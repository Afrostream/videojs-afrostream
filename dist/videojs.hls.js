(function (global, factory) {

  if (typeof module === 'object' && typeof module.exports === 'object') {
    module.exports = global.document ?
      factory(global, true) :
      function (w) {
        if (!w.document) {
          throw new Error('vjs requires a window with a document');
        }
        return factory(w);
      };
  } else {
    factory(global);
  }

  // Pass this if window is not defined yet
}(typeof window !== 'undefined' ? window : this, function (window, noGlobal) { /*jshint unused:false*/
  /*! videojs-contrib-hls - v0.17.5 - 2015-07-30
* Copyright (c) 2015 Brightcove; Licensed  */
// HTML5 Shiv. Must be in <head> to support older browsers.
document.createElement('video');
document.createElement('audio');
document.createElement('track');

/**
 * Doubles as the main function for users to create a player instance and also
 * the main library object.
 *
 * **ALIASES** videojs, _V_ (deprecated)
 *
 * The `vjs` function can be used to initialize or retrieve a player.
 *
 *     var myPlayer = vjs('my_video_id');
 *
 * @param  {String|Element} id      Video element or video element ID
 * @param  {Object=} options        Optional options object for config/settings
 * @param  {Function=} ready        Optional ready callback
 * @return {vjs.Player}             A player instance
 * @namespace
 */
var vjs = function(id, options, ready){
  var tag; // Element of ID

  // Allow for element or ID to be passed in
  // String ID
  if (typeof id === 'string') {

    // Adjust for jQuery ID syntax
    if (id.indexOf('#') === 0) {
      id = id.slice(1);
    }

    // If a player instance has already been created for this ID return it.
    if (vjs.players[id]) {
      return vjs.players[id];

    // Otherwise get element for ID
    } else {
      tag = vjs.el(id);
    }

  // ID is a media element
  } else {
    tag = id;
  }

  // Check for a useable element
  if (!tag || !tag.nodeName) { // re: nodeName, could be a box div also
    throw new TypeError('The element or ID supplied is not valid. (videojs)'); // Returns
  }

  // Element may have a player attr referring to an already created player instance.
  // If not, set up a new player and return the instance.
  return tag['player'] || new vjs.Player(tag, options, ready);
};

// Extended name, also available externally, window.videojs
var videojs = vjs;
window.videojs = window.vjs = vjs;

// CDN Version. Used to target right flash swf.
vjs.CDN_VERSION = '4.6';
vjs.ACCESS_PROTOCOL = ('https:' == document.location.protocol ? 'https://' : 'http://');

/**
 * Global Player instance options, surfaced from vjs.Player.prototype.options_
 * vjs.options = vjs.Player.prototype.options_
 * All options should use string keys so they avoid
 * renaming by closure compiler
 * @type {Object}
 */
vjs.options = {
  // Default order of fallback technology
  'techOrder': ['html5','flash'],
  // techOrder: ['flash','html5'],

  'html5': {},
  'flash': {},

  // Default of web browser is 300x150. Should rely on source width/height.
  'width': 300,
  'height': 150,
  // defaultVolume: 0.85,
  'defaultVolume': 0.00, // The freakin seaguls are driving me crazy!

  // default playback rates
  'playbackRates': [],
  // Add playback rate selection by adding rates
  // 'playbackRates': [0.5, 1, 1.5, 2],

  // Included control sets
  'children': {
    'mediaLoader': {},
    'posterImage': {},
    'textTrackDisplay': {},
    'loadingSpinner': {},
    'bigPlayButton': {},
    'controlBar': {},
    'errorDisplay': {}
  },

  // Default message to show when a video cannot be played.
  'notSupportedMessage': 'No compatible source was found for this video.'
};

// Set CDN Version of swf
// The added (+) blocks the replace from changing this 4.6 string
if (vjs.CDN_VERSION !== 'GENERATED'+'_CDN_VSN') {
  videojs.options['flash']['swf'] = vjs.ACCESS_PROTOCOL + 'vjs.zencdn.net/'+vjs.CDN_VERSION+'/video-js.swf';
}

/**
 * Global player list
 * @type {Object}
 */
vjs.players = {};

/*!
 * Custom Universal Module Definition (UMD)
 *
 * Video.js will never be a non-browser lib so we can simplify UMD a bunch and
 * still support requirejs and browserify. This also needs to be closure
 * compiler compatible, so string keys are used.
 */
if (typeof define === 'function' && define['amd']) {
  define([], function(){ return videojs; });

// checking that module is an object too because of umdjs/umd#35
} else if (typeof exports === 'object' && typeof module === 'object') {
  module['exports'] = videojs;
}
/**
 * Core Object/Class for objects that use inheritance + contstructors
 *
 * To create a class that can be subclassed itself, extend the CoreObject class.
 *
 *     var Animal = CoreObject.extend();
 *     var Horse = Animal.extend();
 *
 * The constructor can be defined through the init property of an object argument.
 *
 *     var Animal = CoreObject.extend({
 *       init: function(name, sound){
 *         this.name = name;
 *       }
 *     });
 *
 * Other methods and properties can be added the same way, or directly to the
 * prototype.
 *
 *    var Animal = CoreObject.extend({
 *       init: function(name){
 *         this.name = name;
 *       },
 *       getName: function(){
 *         return this.name;
 *       },
 *       sound: '...'
 *    });
 *
 *    Animal.prototype.makeSound = function(){
 *      alert(this.sound);
 *    };
 *
 * To create an instance of a class, use the create method.
 *
 *    var fluffy = Animal.create('Fluffy');
 *    fluffy.getName(); // -> Fluffy
 *
 * Methods and properties can be overridden in subclasses.
 *
 *     var Horse = Animal.extend({
 *       sound: 'Neighhhhh!'
 *     });
 *
 *     var horsey = Horse.create('Horsey');
 *     horsey.getName(); // -> Horsey
 *     horsey.makeSound(); // -> Alert: Neighhhhh!
 *
 * @class
 * @constructor
 */
vjs.CoreObject = vjs['CoreObject'] = function(){};
// Manually exporting vjs['CoreObject'] here for Closure Compiler
// because of the use of the extend/create class methods
// If we didn't do this, those functions would get flattend to something like
// `a = ...` and `this.prototype` would refer to the global object instead of
// CoreObject

/**
 * Create a new object that inherits from this Object
 *
 *     var Animal = CoreObject.extend();
 *     var Horse = Animal.extend();
 *
 * @param {Object} props Functions and properties to be applied to the
 *                       new object's prototype
 * @return {vjs.CoreObject} An object that inherits from CoreObject
 * @this {*}
 */
vjs.CoreObject.extend = function(props){
  var init, subObj;

  props = props || {};
  // Set up the constructor using the supplied init method
  // or using the init of the parent object
  // Make sure to check the unobfuscated version for external libs
  init = props['init'] || props.init || this.prototype['init'] || this.prototype.init || function(){};
  // In Resig's simple class inheritance (previously used) the constructor
  //  is a function that calls `this.init.apply(arguments)`
  // However that would prevent us from using `ParentObject.call(this);`
  //  in a Child constuctor because the `this` in `this.init`
  //  would still refer to the Child and cause an inifinite loop.
  // We would instead have to do
  //    `ParentObject.prototype.init.apply(this, argumnents);`
  //  Bleh. We're not creating a _super() function, so it's good to keep
  //  the parent constructor reference simple.
  subObj = function(){
    init.apply(this, arguments);
  };

  // Inherit from this object's prototype
  subObj.prototype = vjs.obj.create(this.prototype);
  // Reset the constructor property for subObj otherwise
  // instances of subObj would have the constructor of the parent Object
  subObj.prototype.constructor = subObj;

  // Make the class extendable
  subObj.extend = vjs.CoreObject.extend;
  // Make a function for creating instances
  subObj.create = vjs.CoreObject.create;

  // Extend subObj's prototype with functions and other properties from props
  for (var name in props) {
    if (props.hasOwnProperty(name)) {
      subObj.prototype[name] = props[name];
    }
  }

  return subObj;
};

/**
 * Create a new instace of this Object class
 *
 *     var myAnimal = Animal.create();
 *
 * @return {vjs.CoreObject} An instance of a CoreObject subclass
 * @this {*}
 */
vjs.CoreObject.create = function(){
  // Create a new object that inherits from this object's prototype
  var inst = vjs.obj.create(this.prototype);

  // Apply this constructor function to the new object
  this.apply(inst, arguments);

  // Return the new object
  return inst;
};
/**
 * @fileoverview Event System (John Resig - Secrets of a JS Ninja http://jsninja.com/)
 * (Original book version wasn't completely usable, so fixed some things and made Closure Compiler compatible)
 * This should work very similarly to jQuery's events, however it's based off the book version which isn't as
 * robust as jquery's, so there's probably some differences.
 */

/**
 * Add an event listener to element
 * It stores the handler function in a separate cache object
 * and adds a generic handler to the element's event,
 * along with a unique id (guid) to the element.
 * @param  {Element|Object}   elem Element or object to bind listeners to
 * @param  {String}   type Type of event to bind to.
 * @param  {Function} fn   Event listener.
 * @private
 */
vjs.on = function(elem, type, fn){
  var data = vjs.getData(elem);

  // We need a place to store all our handler data
  if (!data.handlers) data.handlers = {};

  if (!data.handlers[type]) data.handlers[type] = [];

  if (!fn.guid) fn.guid = vjs.guid++;

  data.handlers[type].push(fn);

  if (!data.dispatcher) {
    data.disabled = false;

    data.dispatcher = function (event){

      if (data.disabled) return;
      event = vjs.fixEvent(event);

      var handlers = data.handlers[event.type];

      if (handlers) {
        // Copy handlers so if handlers are added/removed during the process it doesn't throw everything off.
        var handlersCopy = handlers.slice(0);

        for (var m = 0, n = handlersCopy.length; m < n; m++) {
          if (event.isImmediatePropagationStopped()) {
            break;
          } else {
            handlersCopy[m].call(elem, event);
          }
        }
      }
    };
  }

  if (data.handlers[type].length == 1) {
    if (document.addEventListener) {
      elem.addEventListener(type, data.dispatcher, false);
    } else if (document.attachEvent) {
      elem.attachEvent('on' + type, data.dispatcher);
    }
  }
};

/**
 * Removes event listeners from an element
 * @param  {Element|Object}   elem Object to remove listeners from
 * @param  {String=}   type Type of listener to remove. Don't include to remove all events from element.
 * @param  {Function} fn   Specific listener to remove. Don't incldue to remove listeners for an event type.
 * @private
 */
vjs.off = function(elem, type, fn) {
  // Don't want to add a cache object through getData if not needed
  if (!vjs.hasData(elem)) return;

  var data = vjs.getData(elem);

  // If no events exist, nothing to unbind
  if (!data.handlers) { return; }

  // Utility function
  var removeType = function(t){
     data.handlers[t] = [];
     vjs.cleanUpEvents(elem,t);
  };

  // Are we removing all bound events?
  if (!type) {
    for (var t in data.handlers) removeType(t);
    return;
  }

  var handlers = data.handlers[type];

  // If no handlers exist, nothing to unbind
  if (!handlers) return;

  // If no listener was provided, remove all listeners for type
  if (!fn) {
    removeType(type);
    return;
  }

  // We're only removing a single handler
  if (fn.guid) {
    for (var n = 0; n < handlers.length; n++) {
      if (handlers[n].guid === fn.guid) {
        handlers.splice(n--, 1);
      }
    }
  }

  vjs.cleanUpEvents(elem, type);
};

/**
 * Clean up the listener cache and dispatchers
 * @param  {Element|Object} elem Element to clean up
 * @param  {String} type Type of event to clean up
 * @private
 */
vjs.cleanUpEvents = function(elem, type) {
  var data = vjs.getData(elem);

  // Remove the events of a particular type if there are none left
  if (data.handlers[type].length === 0) {
    delete data.handlers[type];
    // data.handlers[type] = null;
    // Setting to null was causing an error with data.handlers

    // Remove the meta-handler from the element
    if (document.removeEventListener) {
      elem.removeEventListener(type, data.dispatcher, false);
    } else if (document.detachEvent) {
      elem.detachEvent('on' + type, data.dispatcher);
    }
  }

  // Remove the events object if there are no types left
  if (vjs.isEmpty(data.handlers)) {
    delete data.handlers;
    delete data.dispatcher;
    delete data.disabled;

    // data.handlers = null;
    // data.dispatcher = null;
    // data.disabled = null;
  }

  // Finally remove the expando if there is no data left
  if (vjs.isEmpty(data)) {
    vjs.removeData(elem);
  }
};

/**
 * Fix a native event to have standard property values
 * @param  {Object} event Event object to fix
 * @return {Object}
 * @private
 */
vjs.fixEvent = function(event) {

  function returnTrue() { return true; }
  function returnFalse() { return false; }

  // Test if fixing up is needed
  // Used to check if !event.stopPropagation instead of isPropagationStopped
  // But native events return true for stopPropagation, but don't have
  // other expected methods like isPropagationStopped. Seems to be a problem
  // with the Javascript Ninja code. So we're just overriding all events now.
  if (!event || !event.isPropagationStopped) {
    var old = event || window.event;

    event = {};
    // Clone the old object so that we can modify the values event = {};
    // IE8 Doesn't like when you mess with native event properties
    // Firefox returns false for event.hasOwnProperty('type') and other props
    //  which makes copying more difficult.
    // TODO: Probably best to create a whitelist of event props
    for (var key in old) {
      // Safari 6.0.3 warns you if you try to copy deprecated layerX/Y
      // Chrome warns you if you try to copy deprecated keyboardEvent.keyLocation
      if (key !== 'layerX' && key !== 'layerY' && key !== 'keyboardEvent.keyLocation') {
        // Chrome 32+ warns if you try to copy deprecated returnValue, but
        // we still want to if preventDefault isn't supported (IE8).
        if (!(key == 'returnValue' && old.preventDefault)) {
          event[key] = old[key];
        }
      }
    }

    // The event occurred on this element
    if (!event.target) {
      event.target = event.srcElement || document;
    }

    // Handle which other element the event is related to
    event.relatedTarget = event.fromElement === event.target ?
      event.toElement :
      event.fromElement;

    // Stop the default browser action
    event.preventDefault = function () {
      if (old.preventDefault) {
        old.preventDefault();
      }
      event.returnValue = false;
      event.isDefaultPrevented = returnTrue;
      event.defaultPrevented = true;
    };

    event.isDefaultPrevented = returnFalse;
    event.defaultPrevented = false;

    // Stop the event from bubbling
    event.stopPropagation = function () {
      if (old.stopPropagation) {
        old.stopPropagation();
      }
      event.cancelBubble = true;
      event.isPropagationStopped = returnTrue;
    };

    event.isPropagationStopped = returnFalse;

    // Stop the event from bubbling and executing other handlers
    event.stopImmediatePropagation = function () {
      if (old.stopImmediatePropagation) {
        old.stopImmediatePropagation();
      }
      event.isImmediatePropagationStopped = returnTrue;
      event.stopPropagation();
    };

    event.isImmediatePropagationStopped = returnFalse;

    // Handle mouse position
    if (event.clientX != null) {
      var doc = document.documentElement, body = document.body;

      event.pageX = event.clientX +
        (doc && doc.scrollLeft || body && body.scrollLeft || 0) -
        (doc && doc.clientLeft || body && body.clientLeft || 0);
      event.pageY = event.clientY +
        (doc && doc.scrollTop || body && body.scrollTop || 0) -
        (doc && doc.clientTop || body && body.clientTop || 0);
    }

    // Handle key presses
    event.which = event.charCode || event.keyCode;

    // Fix button for mouse clicks:
    // 0 == left; 1 == middle; 2 == right
    if (event.button != null) {
      event.button = (event.button & 1 ? 0 :
        (event.button & 4 ? 1 :
          (event.button & 2 ? 2 : 0)));
    }
  }

  // Returns fixed-up instance
  return event;
};

/**
 * Trigger an event for an element
 * @param  {Element|Object} elem  Element to trigger an event on
 * @param  {String} event Type of event to trigger
 * @private
 */
vjs.trigger = function(elem, event) {
  // Fetches element data and a reference to the parent (for bubbling).
  // Don't want to add a data object to cache for every parent,
  // so checking hasData first.
  var elemData = (vjs.hasData(elem)) ? vjs.getData(elem) : {};
  var parent = elem.parentNode || elem.ownerDocument;
      // type = event.type || event,
      // handler;

  // If an event name was passed as a string, creates an event out of it
  if (typeof event === 'string') {
    event = { type:event, target:elem };
  }
  // Normalizes the event properties.
  event = vjs.fixEvent(event);

  // If the passed element has a dispatcher, executes the established handlers.
  if (elemData.dispatcher) {
    elemData.dispatcher.call(elem, event);
  }

  // Unless explicitly stopped or the event does not bubble (e.g. media events)
    // recursively calls this function to bubble the event up the DOM.
    if (parent && !event.isPropagationStopped() && event.bubbles !== false) {
    vjs.trigger(parent, event);

  // If at the top of the DOM, triggers the default action unless disabled.
  } else if (!parent && !event.defaultPrevented) {
    var targetData = vjs.getData(event.target);

    // Checks if the target has a default action for this event.
    if (event.target[event.type]) {
      // Temporarily disables event dispatching on the target as we have already executed the handler.
      targetData.disabled = true;
      // Executes the default action.
      if (typeof event.target[event.type] === 'function') {
        event.target[event.type]();
      }
      // Re-enables event dispatching.
      targetData.disabled = false;
    }
  }

  // Inform the triggerer if the default was prevented by returning false
  return !event.defaultPrevented;
  /* Original version of js ninja events wasn't complete.
   * We've since updated to the latest version, but keeping this around
   * for now just in case.
   */
  // // Added in attion to book. Book code was broke.
  // event = typeof event === 'object' ?
  //   event[vjs.expando] ?
  //     event :
  //     new vjs.Event(type, event) :
  //   new vjs.Event(type);

  // event.type = type;
  // if (handler) {
  //   handler.call(elem, event);
  // }

  // // Clean up the event in case it is being reused
  // event.result = undefined;
  // event.target = elem;
};

/**
 * Trigger a listener only once for an event
 * @param  {Element|Object}   elem Element or object to
 * @param  {String}   type
 * @param  {Function} fn
 * @private
 */
vjs.one = function(elem, type, fn) {
  var func = function(){
    vjs.off(elem, type, func);
    fn.apply(this, arguments);
  };
  func.guid = fn.guid = fn.guid || vjs.guid++;
  vjs.on(elem, type, func);
};
var hasOwnProp = Object.prototype.hasOwnProperty;

/**
 * Creates an element and applies properties.
 * @param  {String=} tagName    Name of tag to be created.
 * @param  {Object=} properties Element properties to be applied.
 * @return {Element}
 * @private
 */
vjs.createEl = function(tagName, properties){
  var el, propName;

  el = document.createElement(tagName || 'div');

  for (propName in properties){
    if (hasOwnProp.call(properties, propName)) {
      //el[propName] = properties[propName];
      // Not remembering why we were checking for dash
      // but using setAttribute means you have to use getAttribute

      // The check for dash checks for the aria-* attributes, like aria-label, aria-valuemin.
      // The additional check for "role" is because the default method for adding attributes does not
      // add the attribute "role". My guess is because it's not a valid attribute in some namespaces, although
      // browsers handle the attribute just fine. The W3C allows for aria-* attributes to be used in pre-HTML5 docs.
      // http://www.w3.org/TR/wai-aria-primer/#ariahtml. Using setAttribute gets around this problem.

       if (propName.indexOf('aria-') !== -1 || propName=='role') {
         el.setAttribute(propName, properties[propName]);
       } else {
         el[propName] = properties[propName];
       }
    }
  }
  return el;
};

/**
 * Uppercase the first letter of a string
 * @param  {String} string String to be uppercased
 * @return {String}
 * @private
 */
vjs.capitalize = function(string){
  return string.charAt(0).toUpperCase() + string.slice(1);
};

/**
 * Object functions container
 * @type {Object}
 * @private
 */
vjs.obj = {};

/**
 * Object.create shim for prototypal inheritance
 *
 * https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/create
 *
 * @function
 * @param  {Object}   obj Object to use as prototype
 * @private
 */
vjs.obj.create = Object.create || function(obj){
  //Create a new function called 'F' which is just an empty object.
  function F() {}

  //the prototype of the 'F' function should point to the
  //parameter of the anonymous function.
  F.prototype = obj;

  //create a new constructor function based off of the 'F' function.
  return new F();
};

/**
 * Loop through each property in an object and call a function
 * whose arguments are (key,value)
 * @param  {Object}   obj Object of properties
 * @param  {Function} fn  Function to be called on each property.
 * @this {*}
 * @private
 */
vjs.obj.each = function(obj, fn, context){
  for (var key in obj) {
    if (hasOwnProp.call(obj, key)) {
      fn.call(context || this, key, obj[key]);
    }
  }
};

/**
 * Merge two objects together and return the original.
 * @param  {Object} obj1
 * @param  {Object} obj2
 * @return {Object}
 * @private
 */
vjs.obj.merge = function(obj1, obj2){
  if (!obj2) { return obj1; }
  for (var key in obj2){
    if (hasOwnProp.call(obj2, key)) {
      obj1[key] = obj2[key];
    }
  }
  return obj1;
};

/**
 * Merge two objects, and merge any properties that are objects
 * instead of just overwriting one. Uses to merge options hashes
 * where deeper default settings are important.
 * @param  {Object} obj1 Object to override
 * @param  {Object} obj2 Overriding object
 * @return {Object}      New object. Obj1 and Obj2 will be untouched.
 * @private
 */
vjs.obj.deepMerge = function(obj1, obj2){
  var key, val1, val2;

  // make a copy of obj1 so we're not ovewriting original values.
  // like prototype.options_ and all sub options objects
  obj1 = vjs.obj.copy(obj1);

  for (key in obj2){
    if (hasOwnProp.call(obj2, key)) {
      val1 = obj1[key];
      val2 = obj2[key];

      // Check if both properties are pure objects and do a deep merge if so
      if (vjs.obj.isPlain(val1) && vjs.obj.isPlain(val2)) {
        obj1[key] = vjs.obj.deepMerge(val1, val2);
      } else {
        obj1[key] = obj2[key];
      }
    }
  }
  return obj1;
};

/**
 * Make a copy of the supplied object
 * @param  {Object} obj Object to copy
 * @return {Object}     Copy of object
 * @private
 */
vjs.obj.copy = function(obj){
  return vjs.obj.merge({}, obj);
};

/**
 * Check if an object is plain, and not a dom node or any object sub-instance
 * @param  {Object} obj Object to check
 * @return {Boolean}     True if plain, false otherwise
 * @private
 */
vjs.obj.isPlain = function(obj){
  return !!obj
    && typeof obj === 'object'
    && obj.toString() === '[object Object]'
    && obj.constructor === Object;
};

/**
 * Bind (a.k.a proxy or Context). A simple method for changing the context of a function
   It also stores a unique id on the function so it can be easily removed from events
 * @param  {*}   context The object to bind as scope
 * @param  {Function} fn      The function to be bound to a scope
 * @param  {Number=}   uid     An optional unique ID for the function to be set
 * @return {Function}
 * @private
 */
vjs.bind = function(context, fn, uid) {
  // Make sure the function has a unique ID
  if (!fn.guid) { fn.guid = vjs.guid++; }

  // Create the new function that changes the context
  var ret = function() {
    return fn.apply(context, arguments);
  };

  // Allow for the ability to individualize this function
  // Needed in the case where multiple objects might share the same prototype
  // IF both items add an event listener with the same function, then you try to remove just one
  // it will remove both because they both have the same guid.
  // when using this, you need to use the bind method when you remove the listener as well.
  // currently used in text tracks
  ret.guid = (uid) ? uid + '_' + fn.guid : fn.guid;

  return ret;
};

/**
 * Element Data Store. Allows for binding data to an element without putting it directly on the element.
 * Ex. Event listneres are stored here.
 * (also from jsninja.com, slightly modified and updated for closure compiler)
 * @type {Object}
 * @private
 */
vjs.cache = {};

/**
 * Unique ID for an element or function
 * @type {Number}
 * @private
 */
vjs.guid = 1;

/**
 * Unique attribute name to store an element's guid in
 * @type {String}
 * @constant
 * @private
 */
vjs.expando = 'vdata' + (new Date()).getTime();

/**
 * Returns the cache object where data for an element is stored
 * @param  {Element} el Element to store data for.
 * @return {Object}
 * @private
 */
vjs.getData = function(el){
  var id = el[vjs.expando];
  if (!id) {
    id = el[vjs.expando] = vjs.guid++;
    vjs.cache[id] = {};
  }
  return vjs.cache[id];
};

/**
 * Returns the cache object where data for an element is stored
 * @param  {Element} el Element to store data for.
 * @return {Object}
 * @private
 */
vjs.hasData = function(el){
  var id = el[vjs.expando];
  return !(!id || vjs.isEmpty(vjs.cache[id]));
};

/**
 * Delete data for the element from the cache and the guid attr from getElementById
 * @param  {Element} el Remove data for an element
 * @private
 */
vjs.removeData = function(el){
  var id = el[vjs.expando];
  if (!id) { return; }
  // Remove all stored data
  // Changed to = null
  // http://coding.smashingmagazine.com/2012/11/05/writing-fast-memory-efficient-javascript/
  // vjs.cache[id] = null;
  delete vjs.cache[id];

  // Remove the expando property from the DOM node
  try {
    delete el[vjs.expando];
  } catch(e) {
    if (el.removeAttribute) {
      el.removeAttribute(vjs.expando);
    } else {
      // IE doesn't appear to support removeAttribute on the document element
      el[vjs.expando] = null;
    }
  }
};

/**
 * Check if an object is empty
 * @param  {Object}  obj The object to check for emptiness
 * @return {Boolean}
 * @private
 */
vjs.isEmpty = function(obj) {
  for (var prop in obj) {
    // Inlude null properties as empty.
    if (obj[prop] !== null) {
      return false;
    }
  }
  return true;
};

/**
 * Add a CSS class name to an element
 * @param {Element} element    Element to add class name to
 * @param {String} classToAdd Classname to add
 * @private
 */
vjs.addClass = function(element, classToAdd){
  if ((' '+element.className+' ').indexOf(' '+classToAdd+' ') == -1) {
    element.className = element.className === '' ? classToAdd : element.className + ' ' + classToAdd;
  }
};

/**
 * Remove a CSS class name from an element
 * @param {Element} element    Element to remove from class name
 * @param {String} classToAdd Classname to remove
 * @private
 */
vjs.removeClass = function(element, classToRemove){
  var classNames, i;

  if (element.className.indexOf(classToRemove) == -1) { return; }

  classNames = element.className.split(' ');

  // no arr.indexOf in ie8, and we don't want to add a big shim
  for (i = classNames.length - 1; i >= 0; i--) {
    if (classNames[i] === classToRemove) {
      classNames.splice(i,1);
    }
  }

  element.className = classNames.join(' ');
};

/**
 * Element for testing browser HTML5 video capabilities
 * @type {Element}
 * @constant
 * @private
 */
vjs.TEST_VID = vjs.createEl('video');

/**
 * Useragent for browser testing.
 * @type {String}
 * @constant
 * @private
 */
vjs.USER_AGENT = navigator.userAgent;

/**
 * Device is an iPhone
 * @type {Boolean}
 * @constant
 * @private
 */
vjs.IS_IPHONE = (/iPhone/i).test(vjs.USER_AGENT);
vjs.IS_IPAD = (/iPad/i).test(vjs.USER_AGENT);
vjs.IS_IPOD = (/iPod/i).test(vjs.USER_AGENT);
vjs.IS_IOS = vjs.IS_IPHONE || vjs.IS_IPAD || vjs.IS_IPOD;

vjs.IOS_VERSION = (function(){
  var match = vjs.USER_AGENT.match(/OS (\d+)_/i);
  if (match && match[1]) { return match[1]; }
})();

vjs.IS_ANDROID = (/Android/i).test(vjs.USER_AGENT);
vjs.ANDROID_VERSION = (function() {
  // This matches Android Major.Minor.Patch versions
  // ANDROID_VERSION is Major.Minor as a Number, if Minor isn't available, then only Major is returned
  var match = vjs.USER_AGENT.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i),
    major,
    minor;

  if (!match) {
    return null;
  }

  major = match[1] && parseFloat(match[1]);
  minor = match[2] && parseFloat(match[2]);

  if (major && minor) {
    return parseFloat(match[1] + '.' + match[2]);
  } else if (major) {
    return major;
  } else {
    return null;
  }
})();
// Old Android is defined as Version older than 2.3, and requiring a webkit version of the android browser
vjs.IS_OLD_ANDROID = vjs.IS_ANDROID && (/webkit/i).test(vjs.USER_AGENT) && vjs.ANDROID_VERSION < 2.3;

vjs.IS_FIREFOX = (/Firefox/i).test(vjs.USER_AGENT);
vjs.IS_CHROME = (/Chrome/i).test(vjs.USER_AGENT);

vjs.TOUCH_ENABLED = !!(('ontouchstart' in window) || window.DocumentTouch && document instanceof window.DocumentTouch);

/**
 * Get an element's attribute values, as defined on the HTML tag
 * Attributs are not the same as properties. They're defined on the tag
 * or with setAttribute (which shouldn't be used with HTML)
 * This will return true or false for boolean attributes.
 * @param  {Element} tag Element from which to get tag attributes
 * @return {Object}
 * @private
 */
vjs.getAttributeValues = function(tag){
  var obj, knownBooleans, attrs, attrName, attrVal;

  obj = {};

  // known boolean attributes
  // we can check for matching boolean properties, but older browsers
  // won't know about HTML5 boolean attributes that we still read from
  knownBooleans = ','+'autoplay,controls,loop,muted,default'+',';

  if (tag && tag.attributes && tag.attributes.length > 0) {
    attrs = tag.attributes;

    for (var i = attrs.length - 1; i >= 0; i--) {
      attrName = attrs[i].name;
      attrVal = attrs[i].value;

      // check for known booleans
      // the matching element property will return a value for typeof
      if (typeof tag[attrName] === 'boolean' || knownBooleans.indexOf(','+attrName+',') !== -1) {
        // the value of an included boolean attribute is typically an empty
        // string ('') which would equal false if we just check for a false value.
        // we also don't want support bad code like autoplay='false'
        attrVal = (attrVal !== null) ? true : false;
      }

      obj[attrName] = attrVal;
    }
  }

  return obj;
};

/**
 * Get the computed style value for an element
 * From http://robertnyman.com/2006/04/24/get-the-rendered-style-of-an-element/
 * @param  {Element} el        Element to get style value for
 * @param  {String} strCssRule Style name
 * @return {String}            Style value
 * @private
 */
vjs.getComputedDimension = function(el, strCssRule){
  var strValue = '';
  if(document.defaultView && document.defaultView.getComputedStyle){
    strValue = document.defaultView.getComputedStyle(el, '').getPropertyValue(strCssRule);

  } else if(el.currentStyle){
    // IE8 Width/Height support
    strValue = el['client'+strCssRule.substr(0,1).toUpperCase() + strCssRule.substr(1)] + 'px';
  }
  return strValue;
};

/**
 * Insert an element as the first child node of another
 * @param  {Element} child   Element to insert
 * @param  {[type]} parent Element to insert child into
 * @private
 */
vjs.insertFirst = function(child, parent){
  if (parent.firstChild) {
    parent.insertBefore(child, parent.firstChild);
  } else {
    parent.appendChild(child);
  }
};

/**
 * Object to hold browser support information
 * @type {Object}
 * @private
 */
vjs.browser = {};

/**
 * Shorthand for document.getElementById()
 * Also allows for CSS (jQuery) ID syntax. But nothing other than IDs.
 * @param  {String} id  Element ID
 * @return {Element}    Element with supplied ID
 * @private
 */
vjs.el = function(id){
  if (id.indexOf('#') === 0) {
    id = id.slice(1);
  }

  return document.getElementById(id);
};

/**
 * Format seconds as a time string, H:MM:SS or M:SS
 * Supplying a guide (in seconds) will force a number of leading zeros
 * to cover the length of the guide
 * @param  {Number} seconds Number of seconds to be turned into a string
 * @param  {Number} guide   Number (in seconds) to model the string after
 * @return {String}         Time formatted as H:MM:SS or M:SS
 * @private
 */
vjs.formatTime = function(seconds, guide) {
  // Default to using seconds as guide
  guide = guide || seconds;
  var s = Math.floor(seconds % 60),
      m = Math.floor(seconds / 60 % 60),
      h = Math.floor(seconds / 3600),
      gm = Math.floor(guide / 60 % 60),
      gh = Math.floor(guide / 3600);

  // handle invalid times
  if (isNaN(seconds) || seconds === Infinity) {
    // '-' is false for all relational operators (e.g. <, >=) so this setting
    // will add the minimum number of fields specified by the guide
    h = m = s = '-';
  }

  // Check if we need to show hours
  h = (h > 0 || gh > 0) ? h + ':' : '';

  // If hours are showing, we may need to add a leading zero.
  // Always show at least one digit of minutes.
  m = (((h || gm >= 10) && m < 10) ? '0' + m : m) + ':';

  // Check if leading zero is need for seconds
  s = (s < 10) ? '0' + s : s;

  return h + m + s;
};

// Attempt to block the ability to select text while dragging controls
vjs.blockTextSelection = function(){
  document.body.focus();
  document.onselectstart = function () { return false; };
};
// Turn off text selection blocking
vjs.unblockTextSelection = function(){ document.onselectstart = function () { return true; }; };

/**
 * Trim whitespace from the ends of a string.
 * @param  {String} string String to trim
 * @return {String}        Trimmed string
 * @private
 */
vjs.trim = function(str){
  return (str+'').replace(/^\s+|\s+$/g, '');
};

/**
 * Should round off a number to a decimal place
 * @param  {Number} num Number to round
 * @param  {Number} dec Number of decimal places to round to
 * @return {Number}     Rounded number
 * @private
 */
vjs.round = function(num, dec) {
  if (!dec) { dec = 0; }
  return Math.round(num*Math.pow(10,dec))/Math.pow(10,dec);
};

/**
 * Should create a fake TimeRange object
 * Mimics an HTML5 time range instance, which has functions that
 * return the start and end times for a range
 * TimeRanges are returned by the buffered() method
 * @param  {Number} start Start time in seconds
 * @param  {Number} end   End time in seconds
 * @return {Object}       Fake TimeRange object
 * @private
 */
vjs.createTimeRange = function(start, end){
  return {
    length: 1,
    start: function() { return start; },
    end: function() { return end; }
  };
};

/**
 * Simple http request for retrieving external files (e.g. text tracks)
 * @param  {String}    url             URL of resource
 * @param  {Function} onSuccess       Success callback
 * @param  {Function=} onError         Error callback
 * @param  {Boolean=}   withCredentials Flag which allow credentials
 * @private
 */
vjs.get = function(url, onSuccess, onError, withCredentials){
  var fileUrl, request, urlInfo, winLoc, crossOrigin;

  onError = onError || function(){};

  if (typeof XMLHttpRequest === 'undefined') {
    // Shim XMLHttpRequest for older IEs
    window.XMLHttpRequest = function () {
      try { return new window.ActiveXObject('Msxml2.XMLHTTP.6.0'); } catch (e) {}
      try { return new window.ActiveXObject('Msxml2.XMLHTTP.3.0'); } catch (f) {}
      try { return new window.ActiveXObject('Msxml2.XMLHTTP'); } catch (g) {}
      throw new Error('This browser does not support XMLHttpRequest.');
    };
  }

  request = new XMLHttpRequest();

  urlInfo = vjs.parseUrl(url);
  winLoc = window.location;
  // check if url is for another domain/origin
  // ie8 doesn't know location.origin, so we won't rely on it here
  crossOrigin = (urlInfo.protocol + urlInfo.host) !== (winLoc.protocol + winLoc.host);

  // Use XDomainRequest for IE if XMLHTTPRequest2 isn't available
  // 'withCredentials' is only available in XMLHTTPRequest2
  // Also XDomainRequest has a lot of gotchas, so only use if cross domain
  if(crossOrigin && window.XDomainRequest && !('withCredentials' in request)) {
    request = new window.XDomainRequest();
    request.onload = function() {
      onSuccess(request.responseText);
    };
    request.onerror = onError;
    // these blank handlers need to be set to fix ie9 http://cypressnorth.com/programming/internet-explorer-aborting-ajax-requests-fixed/
    request.onprogress = function() {};
    request.ontimeout = onError;

  // XMLHTTPRequest
  } else {
    fileUrl = (urlInfo.protocol == 'file:' || winLoc.protocol == 'file:');

    request.onreadystatechange = function() {
      if (request.readyState === 4) {
        if (request.status === 200 || fileUrl && request.status === 0) {
          onSuccess(request.responseText);
        } else {
          onError(request.responseText);
        }
      }
    };
  }

  // open the connection
  try {
    // Third arg is async, or ignored by XDomainRequest
    request.open('GET', url, true);
    // withCredentials only supported by XMLHttpRequest2
    if(withCredentials) {
      request.withCredentials = true;
    }
  } catch(e) {
    onError(e);
    return;
  }

  // send the request
  try {
    request.send();
  } catch(e) {
    onError(e);
  }
};

/**
 * Add to local storage (may removeable)
 * @private
 */
vjs.setLocalStorage = function(key, value){
  try {
    // IE was throwing errors referencing the var anywhere without this
    var localStorage = window.localStorage || false;
    if (!localStorage) { return; }
    localStorage[key] = value;
  } catch(e) {
    if (e.code == 22 || e.code == 1014) { // Webkit == 22 / Firefox == 1014
      vjs.log('LocalStorage Full (VideoJS)', e);
    } else {
      if (e.code == 18) {
        vjs.log('LocalStorage not allowed (VideoJS)', e);
      } else {
        vjs.log('LocalStorage Error (VideoJS)', e);
      }
    }
  }
};

/**
 * Get abosolute version of relative URL. Used to tell flash correct URL.
 * http://stackoverflow.com/questions/470832/getting-an-absolute-url-from-a-relative-one-ie6-issue
 * @param  {String} url URL to make absolute
 * @return {String}     Absolute URL
 * @private
 */
vjs.getAbsoluteURL = function(url){

  // Check if absolute URL
  if (!url.match(/^https?:\/\//)) {
    // Convert to absolute URL. Flash hosted off-site needs an absolute URL.
    url = vjs.createEl('div', {
      innerHTML: '<a href="'+url+'">x</a>'
    }).firstChild.href;
  }

  return url;
};


/**
 * Resolve and parse the elements of a URL
 * @param  {String} url The url to parse
 * @return {Object}     An object of url details
 */
vjs.parseUrl = function(url) {
  var div, a, addToBody, props, details;

  props = ['protocol', 'hostname', 'port', 'pathname', 'search', 'hash', 'host'];

  // add the url to an anchor and let the browser parse the URL
  a = vjs.createEl('a', { href: url });

  // IE8 (and 9?) Fix
  // ie8 doesn't parse the URL correctly until the anchor is actually
  // added to the body, and an innerHTML is needed to trigger the parsing
  addToBody = (a.host === '' && a.protocol !== 'file:');
  if (addToBody) {
    div = vjs.createEl('div');
    div.innerHTML = '<a href="'+url+'"></a>';
    a = div.firstChild;
    // prevent the div from affecting layout
    div.setAttribute('style', 'display:none; position:absolute;');
    document.body.appendChild(div);
  }

  // Copy the specific URL properties to a new object
  // This is also needed for IE8 because the anchor loses its
  // properties when it's removed from the dom
  details = {};
  for (var i = 0; i < props.length; i++) {
    details[props[i]] = a[props[i]];
  }

  if (addToBody) {
    document.body.removeChild(div);
  }

  return details;
};

// if there's no console then don't try to output messages
// they will still be stored in vjs.log.history
var _noop = function(){};
var _console = window['console'] || {
  'log': _noop,
  'warn': _noop,
  'error': _noop
};

/**
 * Log messags to the console and history based on the type of message
 *
 * @param  {String} type The type of message, or `null` for `log`
 * @param  {[type]} args The args to be passed to the log
 * @private
 */
function _logType(type, args){
  // convert args to an array to get array functions
  var argsArray = Array.prototype.slice.call(args);

  if (type) {
    // add the type to the front of the message
    argsArray.unshift(type.toUpperCase()+':');
  } else {
    // default to log with no prefix
    type = 'log';
  }

  // add to history
  vjs.log.history.push(argsArray);

  // add console prefix after adding to history
  argsArray.unshift('VIDEOJS:');

  // call appropriate log function
  if (_console[type].apply) {
    _console[type].apply(_console, argsArray);
  } else {
    // ie8 doesn't allow error.apply, but it will just join() the array anyway
    _console[type](argsArray.join(' '));
  }
}

/**
 * Log plain debug messages
 */
vjs.log = function(){
  _logType(null, arguments);
};

/**
 * Keep a history of log messages
 * @type {Array}
 */
vjs.log.history = [];

/**
 * Log error messages
 */
vjs.log.error = function(){
  _logType('error', arguments);
};

/**
 * Log warning messages
 */
vjs.log.warn = function(){
  _logType('warn', arguments);
};

// Offset Left
// getBoundingClientRect technique from John Resig http://ejohn.org/blog/getboundingclientrect-is-awesome/
vjs.findPosition = function(el) {
  var box, docEl, body, clientLeft, scrollLeft, left, clientTop, scrollTop, top;

  if (el.getBoundingClientRect && el.parentNode) {
    box = el.getBoundingClientRect();
  }

  if (!box) {
    return {
      left: 0,
      top: 0
    };
  }

  docEl = document.documentElement;
  body = document.body;

  clientLeft = docEl.clientLeft || body.clientLeft || 0;
  scrollLeft = window.pageXOffset || body.scrollLeft;
  left = box.left + scrollLeft - clientLeft;

  clientTop = docEl.clientTop || body.clientTop || 0;
  scrollTop = window.pageYOffset || body.scrollTop;
  top = box.top + scrollTop - clientTop;

  // Android sometimes returns slightly off decimal values, so need to round
  return {
    left: vjs.round(left),
    top: vjs.round(top)
  };
};
/**
 * Utility functions namespace
 * @namespace
 * @type {Object}
 */
vjs.util = {};

/**
 * Merge two options objects, 
 * recursively merging any plain object properties as well.
 * Previously `deepMerge`
 * 
 * @param  {Object} obj1 Object to override values in
 * @param  {Object} obj2 Overriding object
 * @return {Object}      New object -- obj1 and obj2 will be untouched
 */
vjs.util.mergeOptions = function(obj1, obj2){
  var key, val1, val2;

  // make a copy of obj1 so we're not ovewriting original values.
  // like prototype.options_ and all sub options objects
  obj1 = vjs.obj.copy(obj1);

  for (key in obj2){
    if (obj2.hasOwnProperty(key)) {
      val1 = obj1[key];
      val2 = obj2[key];

      // Check if both properties are pure objects and do a deep merge if so
      if (vjs.obj.isPlain(val1) && vjs.obj.isPlain(val2)) {
        obj1[key] = vjs.util.mergeOptions(val1, val2);
      } else {
        obj1[key] = obj2[key];
      }
    }
  }
  return obj1;
};


/**
 * @fileoverview Player Component - Base class for all UI objects
 *
 */

/**
 * Base UI Component class
 *
 * Components are embeddable UI objects that are represented by both a
 * javascript object and an element in the DOM. They can be children of other
 * components, and can have many children themselves.
 *
 *     // adding a button to the player
 *     var button = player.addChild('button');
 *     button.el(); // -> button element
 *
 *     <div class="video-js">
 *       <div class="vjs-button">Button</div>
 *     </div>
 *
 * Components are also event emitters.
 *
 *     button.on('click', function(){
 *       console.log('Button Clicked!');
 *     });
 *
 *     button.trigger('customevent');
 *
 * @param {Object} player  Main Player
 * @param {Object=} options
 * @class
 * @constructor
 * @extends vjs.CoreObject
 */
vjs.Component = vjs.CoreObject.extend({
  /**
   * the constructor function for the class
   *
   * @constructor
   */
  init: function(player, options, ready){
    this.player_ = player;

    // Make a copy of prototype.options_ to protect against overriding global defaults
    this.options_ = vjs.obj.copy(this.options_);

    // Updated options with supplied options
    options = this.options(options);

    // Get ID from options, element, or create using player ID and unique ID
    this.id_ = options['id'] || ((options['el'] && options['el']['id']) ? options['el']['id'] : player.id() + '_component_' + vjs.guid++ );

    this.name_ = options['name'] || null;

    // Create element if one wasn't provided in options
    this.el_ = options['el'] || this.createEl();

    this.children_ = [];
    this.childIndex_ = {};
    this.childNameIndex_ = {};

    // Add any child components in options
    this.initChildren();

    this.ready(ready);
    // Don't want to trigger ready here or it will before init is actually
    // finished for all children that run this constructor

    if (options.reportTouchActivity !== false) {
      this.enableTouchActivity();
    }
  }
});

/**
 * Dispose of the component and all child components
 */
vjs.Component.prototype.dispose = function(){
  this.trigger({ type: 'dispose', 'bubbles': false });

  // Dispose all children.
  if (this.children_) {
    for (var i = this.children_.length - 1; i >= 0; i--) {
      if (this.children_[i].dispose) {
        this.children_[i].dispose();
      }
    }
  }

  // Delete child references
  this.children_ = null;
  this.childIndex_ = null;
  this.childNameIndex_ = null;

  // Remove all event listeners.
  this.off();

  // Remove element from DOM
  if (this.el_.parentNode) {
    this.el_.parentNode.removeChild(this.el_);
  }

  vjs.removeData(this.el_);
  this.el_ = null;
};

/**
 * Reference to main player instance
 *
 * @type {vjs.Player}
 * @private
 */
vjs.Component.prototype.player_ = true;

/**
 * Return the component's player
 *
 * @return {vjs.Player}
 */
vjs.Component.prototype.player = function(){
  return this.player_;
};

/**
 * The component's options object
 *
 * @type {Object}
 * @private
 */
vjs.Component.prototype.options_;

/**
 * Deep merge of options objects
 *
 * Whenever a property is an object on both options objects
 * the two properties will be merged using vjs.obj.deepMerge.
 *
 * This is used for merging options for child components. We
 * want it to be easy to override individual options on a child
 * component without having to rewrite all the other default options.
 *
 *     Parent.prototype.options_ = {
 *       children: {
 *         'childOne': { 'foo': 'bar', 'asdf': 'fdsa' },
 *         'childTwo': {},
 *         'childThree': {}
 *       }
 *     }
 *     newOptions = {
 *       children: {
 *         'childOne': { 'foo': 'baz', 'abc': '123' }
 *         'childTwo': null,
 *         'childFour': {}
 *       }
 *     }
 *
 *     this.options(newOptions);
 *
 * RESULT
 *
 *     {
 *       children: {
 *         'childOne': { 'foo': 'baz', 'asdf': 'fdsa', 'abc': '123' },
 *         'childTwo': null, // Disabled. Won't be initialized.
 *         'childThree': {},
 *         'childFour': {}
 *       }
 *     }
 *
 * @param  {Object} obj Object of new option values
 * @return {Object}     A NEW object of this.options_ and obj merged
 */
vjs.Component.prototype.options = function(obj){
  if (obj === undefined) return this.options_;

  return this.options_ = vjs.util.mergeOptions(this.options_, obj);
};

/**
 * The DOM element for the component
 *
 * @type {Element}
 * @private
 */
vjs.Component.prototype.el_;

/**
 * Create the component's DOM element
 *
 * @param  {String=} tagName  Element's node type. e.g. 'div'
 * @param  {Object=} attributes An object of element attributes that should be set on the element
 * @return {Element}
 */
vjs.Component.prototype.createEl = function(tagName, attributes){
  return vjs.createEl(tagName, attributes);
};

/**
 * Get the component's DOM element
 *
 *     var domEl = myComponent.el();
 *
 * @return {Element}
 */
vjs.Component.prototype.el = function(){
  return this.el_;
};

/**
 * An optional element where, if defined, children will be inserted instead of
 * directly in `el_`
 *
 * @type {Element}
 * @private
 */
vjs.Component.prototype.contentEl_;

/**
 * Return the component's DOM element for embedding content.
 * Will either be el_ or a new element defined in createEl.
 *
 * @return {Element}
 */
vjs.Component.prototype.contentEl = function(){
  return this.contentEl_ || this.el_;
};

/**
 * The ID for the component
 *
 * @type {String}
 * @private
 */
vjs.Component.prototype.id_;

/**
 * Get the component's ID
 *
 *     var id = myComponent.id();
 *
 * @return {String}
 */
vjs.Component.prototype.id = function(){
  return this.id_;
};

/**
 * The name for the component. Often used to reference the component.
 *
 * @type {String}
 * @private
 */
vjs.Component.prototype.name_;

/**
 * Get the component's name. The name is often used to reference the component.
 *
 *     var name = myComponent.name();
 *
 * @return {String}
 */
vjs.Component.prototype.name = function(){
  return this.name_;
};

/**
 * Array of child components
 *
 * @type {Array}
 * @private
 */
vjs.Component.prototype.children_;

/**
 * Get an array of all child components
 *
 *     var kids = myComponent.children();
 *
 * @return {Array} The children
 */
vjs.Component.prototype.children = function(){
  return this.children_;
};

/**
 * Object of child components by ID
 *
 * @type {Object}
 * @private
 */
vjs.Component.prototype.childIndex_;

/**
 * Returns a child component with the provided ID
 *
 * @return {vjs.Component}
 */
vjs.Component.prototype.getChildById = function(id){
  return this.childIndex_[id];
};

/**
 * Object of child components by name
 *
 * @type {Object}
 * @private
 */
vjs.Component.prototype.childNameIndex_;

/**
 * Returns a child component with the provided name
 *
 * @return {vjs.Component}
 */
vjs.Component.prototype.getChild = function(name){
  return this.childNameIndex_[name];
};

/**
 * Adds a child component inside this component
 *
 *     myComponent.el();
 *     // -> <div class='my-component'></div>
 *     myComonent.children();
 *     // [empty array]
 *
 *     var myButton = myComponent.addChild('MyButton');
 *     // -> <div class='my-component'><div class="my-button">myButton<div></div>
 *     // -> myButton === myComonent.children()[0];
 *
 * Pass in options for child constructors and options for children of the child
 *
 *     var myButton = myComponent.addChild('MyButton', {
 *       text: 'Press Me',
 *       children: {
 *         buttonChildExample: {
 *           buttonChildOption: true
 *         }
 *       }
 *     });
 *
 * @param {String|vjs.Component} child The class name or instance of a child to add
 * @param {Object=} options Options, including options to be passed to children of the child.
 * @return {vjs.Component} The child component (created by this process if a string was used)
 * @suppress {accessControls|checkRegExp|checkTypes|checkVars|const|constantProperty|deprecated|duplicate|es5Strict|fileoverviewTags|globalThis|invalidCasts|missingProperties|nonStandardJsDocs|strictModuleDepCheck|undefinedNames|undefinedVars|unknownDefines|uselessCode|visibility}
 */
vjs.Component.prototype.addChild = function(child, options){
  var component, componentClass, componentName, componentId;

  // If string, create new component with options
  if (typeof child === 'string') {

    componentName = child;

    // Make sure options is at least an empty object to protect against errors
    options = options || {};

    // Assume name of set is a lowercased name of the UI Class (PlayButton, etc.)
    componentClass = options['componentClass'] || vjs.capitalize(componentName);

    // Set name through options
    options['name'] = componentName;

    // Create a new object & element for this controls set
    // If there's no .player_, this is a player
    // Closure Compiler throws an 'incomplete alias' warning if we use the vjs variable directly.
    // Every class should be exported, so this should never be a problem here.
    component = new window['videojs'][componentClass](this.player_ || this, options);

  // child is a component instance
  } else {
    component = child;
  }

  this.children_.push(component);

  if (typeof component.id === 'function') {
    this.childIndex_[component.id()] = component;
  }

  // If a name wasn't used to create the component, check if we can use the
  // name function of the component
  componentName = componentName || (component.name && component.name());

  if (componentName) {
    this.childNameIndex_[componentName] = component;
  }

  // Add the UI object's element to the container div (box)
  // Having an element is not required
  if (typeof component['el'] === 'function' && component['el']()) {
    this.contentEl().appendChild(component['el']());
  }

  // Return so it can stored on parent object if desired.
  return component;
};

/**
 * Remove a child component from this component's list of children, and the
 * child component's element from this component's element
 *
 * @param  {vjs.Component} component Component to remove
 */
vjs.Component.prototype.removeChild = function(component){
  if (typeof component === 'string') {
    component = this.getChild(component);
  }

  if (!component || !this.children_) return;

  var childFound = false;
  for (var i = this.children_.length - 1; i >= 0; i--) {
    if (this.children_[i] === component) {
      childFound = true;
      this.children_.splice(i,1);
      break;
    }
  }

  if (!childFound) return;

  this.childIndex_[component.id] = null;
  this.childNameIndex_[component.name] = null;

  var compEl = component.el();
  if (compEl && compEl.parentNode === this.contentEl()) {
    this.contentEl().removeChild(component.el());
  }
};

/**
 * Add and initialize default child components from options
 *
 *     // when an instance of MyComponent is created, all children in options
 *     // will be added to the instance by their name strings and options
 *     MyComponent.prototype.options_.children = {
 *       myChildComponent: {
 *         myChildOption: true
 *       }
 *     }
 *
 *     // Or when creating the component
 *     var myComp = new MyComponent(player, {
 *       children: {
 *         myChildComponent: {
 *           myChildOption: true
 *         }
 *       }
 *     });
 *
 * The children option can also be an Array of child names or
 * child options objects (that also include a 'name' key).
 *
 *     var myComp = new MyComponent(player, {
 *       children: [
 *         'button',
 *         {
 *           name: 'button',
 *           someOtherOption: true
 *         }
 *       ]
 *     });
 *
 */
vjs.Component.prototype.initChildren = function(){
  var parent, children, child, name, opts;

  parent = this;
  children = this.options()['children'];

  if (children) {
    // Allow for an array of children details to passed in the options
    if (children instanceof Array) {
      for (var i = 0; i < children.length; i++) {
        child = children[i];

        if (typeof child == 'string') {
          name = child;
          opts = {};
        } else {
          name = child.name;
          opts = child;
        }

        parent[name] = parent.addChild(name, opts);
      }
    } else {
      vjs.obj.each(children, function(name, opts){
        // Allow for disabling default components
        // e.g. vjs.options['children']['posterImage'] = false
        if (opts === false) return;

        // Set property name on player. Could cause conflicts with other prop names, but it's worth making refs easy.
        parent[name] = parent.addChild(name, opts);
      });
    }
  }
};

/**
 * Allows sub components to stack CSS class names
 *
 * @return {String} The constructed class name
 */
vjs.Component.prototype.buildCSSClass = function(){
    // Child classes can include a function that does:
    // return 'CLASS NAME' + this._super();
    return '';
};

/* Events
============================================================================= */

/**
 * Add an event listener to this component's element
 *
 *     var myFunc = function(){
 *       var myPlayer = this;
 *       // Do something when the event is fired
 *     };
 *
 *     myPlayer.on("eventName", myFunc);
 *
 * The context will be the component.
 *
 * @param  {String}   type The event type e.g. 'click'
 * @param  {Function} fn   The event listener
 * @return {vjs.Component} self
 */
vjs.Component.prototype.on = function(type, fn){
  vjs.on(this.el_, type, vjs.bind(this, fn));
  return this;
};

/**
 * Remove an event listener from the component's element
 *
 *     myComponent.off("eventName", myFunc);
 *
 * @param  {String=}   type Event type. Without type it will remove all listeners.
 * @param  {Function=} fn   Event listener. Without fn it will remove all listeners for a type.
 * @return {vjs.Component}
 */
vjs.Component.prototype.off = function(type, fn){
  vjs.off(this.el_, type, fn);
  return this;
};

/**
 * Add an event listener to be triggered only once and then removed
 *
 * @param  {String}   type Event type
 * @param  {Function} fn   Event listener
 * @return {vjs.Component}
 */
vjs.Component.prototype.one = function(type, fn) {
  vjs.one(this.el_, type, vjs.bind(this, fn));
  return this;
};

/**
 * Trigger an event on an element
 *
 *     myComponent.trigger('eventName');
 *
 * @param  {String}       type  The event type to trigger, e.g. 'click'
 * @param  {Event|Object} event The event object to be passed to the listener
 * @return {vjs.Component}      self
 */
vjs.Component.prototype.trigger = function(type, event){
  vjs.trigger(this.el_, type, event);
  return this;
};

/* Ready
================================================================================ */
/**
 * Is the component loaded
 * This can mean different things depending on the component.
 *
 * @private
 * @type {Boolean}
 */
vjs.Component.prototype.isReady_;

/**
 * Trigger ready as soon as initialization is finished
 *
 * Allows for delaying ready. Override on a sub class prototype.
 * If you set this.isReadyOnInitFinish_ it will affect all components.
 * Specially used when waiting for the Flash player to asynchrnously load.
 *
 * @type {Boolean}
 * @private
 */
vjs.Component.prototype.isReadyOnInitFinish_ = true;

/**
 * List of ready listeners
 *
 * @type {Array}
 * @private
 */
vjs.Component.prototype.readyQueue_;

/**
 * Bind a listener to the component's ready state
 *
 * Different from event listeners in that if the ready event has already happend
 * it will trigger the function immediately.
 *
 * @param  {Function} fn Ready listener
 * @return {vjs.Component}
 */
vjs.Component.prototype.ready = function(fn){
  if (fn) {
    if (this.isReady_) {
      fn.call(this);
    } else {
      if (this.readyQueue_ === undefined) {
        this.readyQueue_ = [];
      }
      this.readyQueue_.push(fn);
    }
  }
  return this;
};

/**
 * Trigger the ready listeners
 *
 * @return {vjs.Component}
 */
vjs.Component.prototype.triggerReady = function(){
  this.isReady_ = true;

  var readyQueue = this.readyQueue_;

  if (readyQueue && readyQueue.length > 0) {

    for (var i = 0, j = readyQueue.length; i < j; i++) {
      readyQueue[i].call(this);
    }

    // Reset Ready Queue
    this.readyQueue_ = [];

    // Allow for using event listeners also, in case you want to do something everytime a source is ready.
    this.trigger('ready');
  }
};

/* Display
============================================================================= */

/**
 * Add a CSS class name to the component's element
 *
 * @param {String} classToAdd Classname to add
 * @return {vjs.Component}
 */
vjs.Component.prototype.addClass = function(classToAdd){
  vjs.addClass(this.el_, classToAdd);
  return this;
};

/**
 * Remove a CSS class name from the component's element
 *
 * @param {String} classToRemove Classname to remove
 * @return {vjs.Component}
 */
vjs.Component.prototype.removeClass = function(classToRemove){
  vjs.removeClass(this.el_, classToRemove);
  return this;
};

/**
 * Show the component element if hidden
 *
 * @return {vjs.Component}
 */
vjs.Component.prototype.show = function(){
  this.el_.style.display = 'block';
  return this;
};

/**
 * Hide the component element if currently showing
 *
 * @return {vjs.Component}
 */
vjs.Component.prototype.hide = function(){
  this.el_.style.display = 'none';
  return this;
};

/**
 * Lock an item in its visible state
 * To be used with fadeIn/fadeOut.
 *
 * @return {vjs.Component}
 * @private
 */
vjs.Component.prototype.lockShowing = function(){
  this.addClass('vjs-lock-showing');
  return this;
};

/**
 * Unlock an item to be hidden
 * To be used with fadeIn/fadeOut.
 *
 * @return {vjs.Component}
 * @private
 */
vjs.Component.prototype.unlockShowing = function(){
  this.removeClass('vjs-lock-showing');
  return this;
};

/**
 * Disable component by making it unshowable
 *
 * Currently private because we're movign towards more css-based states.
 * @private
 */
vjs.Component.prototype.disable = function(){
  this.hide();
  this.show = function(){};
};

/**
 * Set or get the width of the component (CSS values)
 *
 * Setting the video tag dimension values only works with values in pixels.
 * Percent values will not work.
 * Some percents can be used, but width()/height() will return the number + %,
 * not the actual computed width/height.
 *
 * @param  {Number|String=} num   Optional width number
 * @param  {Boolean} skipListeners Skip the 'resize' event trigger
 * @return {vjs.Component} This component, when setting the width
 * @return {Number|String} The width, when getting
 */
vjs.Component.prototype.width = function(num, skipListeners){
  return this.dimension('width', num, skipListeners);
};

/**
 * Get or set the height of the component (CSS values)
 *
 * Setting the video tag dimension values only works with values in pixels.
 * Percent values will not work.
 * Some percents can be used, but width()/height() will return the number + %,
 * not the actual computed width/height.
 *
 * @param  {Number|String=} num     New component height
 * @param  {Boolean=} skipListeners Skip the resize event trigger
 * @return {vjs.Component} This component, when setting the height
 * @return {Number|String} The height, when getting
 */
vjs.Component.prototype.height = function(num, skipListeners){
  return this.dimension('height', num, skipListeners);
};

/**
 * Set both width and height at the same time
 *
 * @param  {Number|String} width
 * @param  {Number|String} height
 * @return {vjs.Component} The component
 */
vjs.Component.prototype.dimensions = function(width, height){
  // Skip resize listeners on width for optimization
  return this.width(width, true).height(height);
};

/**
 * Get or set width or height
 *
 * This is the shared code for the width() and height() methods.
 * All for an integer, integer + 'px' or integer + '%';
 *
 * Known issue: Hidden elements officially have a width of 0. We're defaulting
 * to the style.width value and falling back to computedStyle which has the
 * hidden element issue. Info, but probably not an efficient fix:
 * http://www.foliotek.com/devblog/getting-the-width-of-a-hidden-element-with-jquery-using-width/
 *
 * @param  {String} widthOrHeight  'width' or 'height'
 * @param  {Number|String=} num     New dimension
 * @param  {Boolean=} skipListeners Skip resize event trigger
 * @return {vjs.Component} The component if a dimension was set
 * @return {Number|String} The dimension if nothing was set
 * @private
 */
vjs.Component.prototype.dimension = function(widthOrHeight, num, skipListeners){
  if (num !== undefined) {

    // Check if using css width/height (% or px) and adjust
    if ((''+num).indexOf('%') !== -1 || (''+num).indexOf('px') !== -1) {
      this.el_.style[widthOrHeight] = num;
    } else if (num === 'auto') {
      this.el_.style[widthOrHeight] = '';
    } else {
      this.el_.style[widthOrHeight] = num+'px';
    }

    // skipListeners allows us to avoid triggering the resize event when setting both width and height
    if (!skipListeners) { this.trigger('resize'); }

    // Return component
    return this;
  }

  // Not setting a value, so getting it
  // Make sure element exists
  if (!this.el_) return 0;

  // Get dimension value from style
  var val = this.el_.style[widthOrHeight];
  var pxIndex = val.indexOf('px');
  if (pxIndex !== -1) {
    // Return the pixel value with no 'px'
    return parseInt(val.slice(0,pxIndex), 10);

  // No px so using % or no style was set, so falling back to offsetWidth/height
  // If component has display:none, offset will return 0
  // TODO: handle display:none and no dimension style using px
  } else {

    return parseInt(this.el_['offset'+vjs.capitalize(widthOrHeight)], 10);

    // ComputedStyle version.
    // Only difference is if the element is hidden it will return
    // the percent value (e.g. '100%'')
    // instead of zero like offsetWidth returns.
    // var val = vjs.getComputedStyleValue(this.el_, widthOrHeight);
    // var pxIndex = val.indexOf('px');

    // if (pxIndex !== -1) {
    //   return val.slice(0, pxIndex);
    // } else {
    //   return val;
    // }
  }
};

/**
 * Fired when the width and/or height of the component changes
 * @event resize
 */
vjs.Component.prototype.onResize;

/**
 * Emit 'tap' events when touch events are supported
 *
 * This is used to support toggling the controls through a tap on the video.
 *
 * We're requireing them to be enabled because otherwise every component would
 * have this extra overhead unnecessarily, on mobile devices where extra
 * overhead is especially bad.
 * @private
 */
vjs.Component.prototype.emitTapEvents = function(){
  var touchStart, firstTouch, touchTime, couldBeTap, noTap,
      xdiff, ydiff, touchDistance, tapMovementThreshold;

  // Track the start time so we can determine how long the touch lasted
  touchStart = 0;
  firstTouch = null;

  // Maximum movement allowed during a touch event to still be considered a tap
  tapMovementThreshold = 22;

  this.on('touchstart', function(event) {
    // If more than one finger, don't consider treating this as a click
    if (event.touches.length === 1) {
      firstTouch = event.touches[0];
      // Record start time so we can detect a tap vs. "touch and hold"
      touchStart = new Date().getTime();
      // Reset couldBeTap tracking
      couldBeTap = true;
    }
  });

  this.on('touchmove', function(event) {
    // If more than one finger, don't consider treating this as a click
    if (event.touches.length > 1) {
      couldBeTap = false;
    } else if (firstTouch) {
      // Some devices will throw touchmoves for all but the slightest of taps.
      // So, if we moved only a small distance, this could still be a tap
      xdiff = event.touches[0].pageX - firstTouch.pageX;
      ydiff = event.touches[0].pageY - firstTouch.pageY;
      touchDistance = Math.sqrt(xdiff * xdiff + ydiff * ydiff);
      if (touchDistance > tapMovementThreshold) {
        couldBeTap = false;
      }
    }
  });

  noTap = function(){
    couldBeTap = false;
  };
  // TODO: Listen to the original target. http://youtu.be/DujfpXOKUp8?t=13m8s
  this.on('touchleave', noTap);
  this.on('touchcancel', noTap);

  // When the touch ends, measure how long it took and trigger the appropriate
  // event
  this.on('touchend', function(event) {
    firstTouch = null;
    // Proceed only if the touchmove/leave/cancel event didn't happen
    if (couldBeTap === true) {
      // Measure how long the touch lasted
      touchTime = new Date().getTime() - touchStart;
      // The touch needs to be quick in order to consider it a tap
      if (touchTime < 250) {
        event.preventDefault(); // Don't let browser turn this into a click
        this.trigger('tap');
        // It may be good to copy the touchend event object and change the
        // type to tap, if the other event properties aren't exact after
        // vjs.fixEvent runs (e.g. event.target)
      }
    }
  });
};

/**
 * Report user touch activity when touch events occur
 *
 * User activity is used to determine when controls should show/hide. It's
 * relatively simple when it comes to mouse events, because any mouse event
 * should show the controls. So we capture mouse events that bubble up to the
 * player and report activity when that happens.
 *
 * With touch events it isn't as easy. We can't rely on touch events at the
 * player level, because a tap (touchstart + touchend) on the video itself on
 * mobile devices is meant to turn controls off (and on). User activity is
 * checked asynchronously, so what could happen is a tap event on the video
 * turns the controls off, then the touchend event bubbles up to the player,
 * which if it reported user activity, would turn the controls right back on.
 * (We also don't want to completely block touch events from bubbling up)
 *
 * Also a touchmove, touch+hold, and anything other than a tap is not supposed
 * to turn the controls back on on a mobile device.
 *
 * Here we're setting the default component behavior to report user activity
 * whenever touch events happen, and this can be turned off by components that
 * want touch events to act differently.
 */
vjs.Component.prototype.enableTouchActivity = function() {
  var report, touchHolding, touchEnd;

  // listener for reporting that the user is active
  report = vjs.bind(this.player(), this.player().reportUserActivity);

  this.on('touchstart', function() {
    report();
    // For as long as the they are touching the device or have their mouse down,
    // we consider them active even if they're not moving their finger or mouse.
    // So we want to continue to update that they are active
    clearInterval(touchHolding);
    // report at the same interval as activityCheck
    touchHolding = setInterval(report, 250);
  });

  touchEnd = function(event) {
    report();
    // stop the interval that maintains activity if the touch is holding
    clearInterval(touchHolding);
  };

  this.on('touchmove', report);
  this.on('touchend', touchEnd);
  this.on('touchcancel', touchEnd);
};

/* Button - Base class for all buttons
================================================================================ */
/**
 * Base class for all buttons
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @class
 * @constructor
 */
vjs.Button = vjs.Component.extend({
  /**
   * @constructor
   * @inheritDoc
   */
  init: function(player, options){
    vjs.Component.call(this, player, options);

    this.emitTapEvents();

    this.on('tap', this.onClick);
    this.on('click', this.onClick);
    this.on('focus', this.onFocus);
    this.on('blur', this.onBlur);
  }
});

vjs.Button.prototype.createEl = function(type, props){
  var el;

  // Add standard Aria and Tabindex info
  props = vjs.obj.merge({
    className: this.buildCSSClass(),
    'role': 'button',
    'aria-live': 'polite', // let the screen reader user know that the text of the button may change
    tabIndex: 0
  }, props);

  el = vjs.Component.prototype.createEl.call(this, type, props);

  // if innerHTML hasn't been overridden (bigPlayButton), add content elements
  if (!props.innerHTML) {
    this.contentEl_ = vjs.createEl('div', {
      className: 'vjs-control-content'
    });

    this.controlText_ = vjs.createEl('span', {
      className: 'vjs-control-text',
      innerHTML: this.buttonText || 'Need Text'
    });

    this.contentEl_.appendChild(this.controlText_);
    el.appendChild(this.contentEl_);
  }

  return el;
};

vjs.Button.prototype.buildCSSClass = function(){
  // TODO: Change vjs-control to vjs-button?
  return 'vjs-control ' + vjs.Component.prototype.buildCSSClass.call(this);
};

  // Click - Override with specific functionality for button
vjs.Button.prototype.onClick = function(){};

  // Focus - Add keyboard functionality to element
vjs.Button.prototype.onFocus = function(){
  vjs.on(document, 'keyup', vjs.bind(this, this.onKeyPress));
};

  // KeyPress (document level) - Trigger click when keys are pressed
vjs.Button.prototype.onKeyPress = function(event){
  // Check for space bar (32) or enter (13) keys
  if (event.which == 32 || event.which == 13) {
    event.preventDefault();
    this.onClick();
  }
};

// Blur - Remove keyboard triggers
vjs.Button.prototype.onBlur = function(){
  vjs.off(document, 'keyup', vjs.bind(this, this.onKeyPress));
};
/* Slider
================================================================================ */
/**
 * The base functionality for sliders like the volume bar and seek bar
 *
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.Slider = vjs.Component.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Component.call(this, player, options);

    // Set property names to bar and handle to match with the child Slider class is looking for
    this.bar = this.getChild(this.options_['barName']);
    this.handle = this.getChild(this.options_['handleName']);

    this.on('mousedown', this.onMouseDown);
    this.on('touchstart', this.onMouseDown);
    this.on('focus', this.onFocus);
    this.on('blur', this.onBlur);
    this.on('click', this.onClick);

    this.player_.on('controlsvisible', vjs.bind(this, this.update));

    player.on(this.playerEvent, vjs.bind(this, this.update));

    this.boundEvents = {};
  }
});

vjs.Slider.prototype.createEl = function(type, props) {
  props = props || {};
  // Add the slider element class to all sub classes
  props.className = props.className + ' vjs-slider';
  props = vjs.obj.merge({
    'role': 'slider',
    'aria-valuenow': 0,
    'aria-valuemin': 0,
    'aria-valuemax': 100,
    tabIndex: 0
  }, props);

  return vjs.Component.prototype.createEl.call(this, type, props);
};

vjs.Slider.prototype.onMouseDown = function(event){
  event.preventDefault();
  vjs.blockTextSelection();

  this.boundEvents.move = vjs.bind(this, this.onMouseMove);
  this.boundEvents.end = vjs.bind(this, this.onMouseUp);

  vjs.on(document, 'mousemove', this.boundEvents.move);
  vjs.on(document, 'mouseup', this.boundEvents.end);
  vjs.on(document, 'touchmove', this.boundEvents.move);
  vjs.on(document, 'touchend', this.boundEvents.end);

  this.onMouseMove(event);
};

vjs.Slider.prototype.onMouseUp = function() {
  vjs.unblockTextSelection();
  vjs.off(document, 'mousemove', this.boundEvents.move, false);
  vjs.off(document, 'mouseup', this.boundEvents.end, false);
  vjs.off(document, 'touchmove', this.boundEvents.move, false);
  vjs.off(document, 'touchend', this.boundEvents.end, false);

  this.update();
};

vjs.Slider.prototype.update = function(){
  // In VolumeBar init we have a setTimeout for update that pops and update to the end of the
  // execution stack. The player is destroyed before then update will cause an error
  if (!this.el_) return;

  // If scrubbing, we could use a cached value to make the handle keep up with the user's mouse.
  // On HTML5 browsers scrubbing is really smooth, but some flash players are slow, so we might want to utilize this later.
  // var progress =  (this.player_.scrubbing) ? this.player_.getCache().currentTime / this.player_.duration() : this.player_.currentTime() / this.player_.duration();

  var barProgress,
      progress = this.getPercent(),
      handle = this.handle,
      bar = this.bar;

  // Protect against no duration and other division issues
  if (isNaN(progress)) { progress = 0; }

  barProgress = progress;

  // If there is a handle, we need to account for the handle in our calculation for progress bar
  // so that it doesn't fall short of or extend past the handle.
  if (handle) {

    var box = this.el_,
        boxWidth = box.offsetWidth,

        handleWidth = handle.el().offsetWidth,

        // The width of the handle in percent of the containing box
        // In IE, widths may not be ready yet causing NaN
        handlePercent = (handleWidth) ? handleWidth / boxWidth : 0,

        // Get the adjusted size of the box, considering that the handle's center never touches the left or right side.
        // There is a margin of half the handle's width on both sides.
        boxAdjustedPercent = 1 - handlePercent,

        // Adjust the progress that we'll use to set widths to the new adjusted box width
        adjustedProgress = progress * boxAdjustedPercent;

    // The bar does reach the left side, so we need to account for this in the bar's width
    barProgress = adjustedProgress + (handlePercent / 2);

    // Move the handle from the left based on the adjected progress
    handle.el().style.left = vjs.round(adjustedProgress * 100, 2) + '%';
  }

  // Set the new bar width
  bar.el().style.width = vjs.round(barProgress * 100, 2) + '%';
};

vjs.Slider.prototype.calculateDistance = function(event){
  var el, box, boxX, boxY, boxW, boxH, handle, pageX, pageY;

  el = this.el_;
  box = vjs.findPosition(el);
  boxW = boxH = el.offsetWidth;
  handle = this.handle;

  if (this.options_.vertical) {
    boxY = box.top;

    if (event.changedTouches) {
      pageY = event.changedTouches[0].pageY;
    } else {
      pageY = event.pageY;
    }

    if (handle) {
      var handleH = handle.el().offsetHeight;
      // Adjusted X and Width, so handle doesn't go outside the bar
      boxY = boxY + (handleH / 2);
      boxH = boxH - handleH;
    }

    // Percent that the click is through the adjusted area
    return Math.max(0, Math.min(1, ((boxY - pageY) + boxH) / boxH));

  } else {
    boxX = box.left;

    if (event.changedTouches) {
      pageX = event.changedTouches[0].pageX;
    } else {
      pageX = event.pageX;
    }

    if (handle) {
      var handleW = handle.el().offsetWidth;

      // Adjusted X and Width, so handle doesn't go outside the bar
      boxX = boxX + (handleW / 2);
      boxW = boxW - handleW;
    }

    // Percent that the click is through the adjusted area
    return Math.max(0, Math.min(1, (pageX - boxX) / boxW));
  }
};

vjs.Slider.prototype.onFocus = function(){
  vjs.on(document, 'keyup', vjs.bind(this, this.onKeyPress));
};

vjs.Slider.prototype.onKeyPress = function(event){
  if (event.which == 37) { // Left Arrow
    event.preventDefault();
    this.stepBack();
  } else if (event.which == 39) { // Right Arrow
    event.preventDefault();
    this.stepForward();
  }
};

vjs.Slider.prototype.onBlur = function(){
  vjs.off(document, 'keyup', vjs.bind(this, this.onKeyPress));
};

/**
 * Listener for click events on slider, used to prevent clicks
 *   from bubbling up to parent elements like button menus.
 * @param  {Object} event Event object
 */
vjs.Slider.prototype.onClick = function(event){
  event.stopImmediatePropagation();
  event.preventDefault();
};

/**
 * SeekBar Behavior includes play progress bar, and seek handle
 * Needed so it can determine seek position based on handle position/size
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.SliderHandle = vjs.Component.extend();

/**
 * Default value of the slider
 *
 * @type {Number}
 * @private
 */
vjs.SliderHandle.prototype.defaultValue = 0;

/** @inheritDoc */
vjs.SliderHandle.prototype.createEl = function(type, props) {
  props = props || {};
  // Add the slider element class to all sub classes
  props.className = props.className + ' vjs-slider-handle';
  props = vjs.obj.merge({
    innerHTML: '<span class="vjs-control-text">'+this.defaultValue+'</span>'
  }, props);

  return vjs.Component.prototype.createEl.call(this, 'div', props);
};
/* Menu
================================================================================ */
/**
 * The Menu component is used to build pop up menus, including subtitle and
 * captions selection menus.
 *
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @class
 * @constructor
 */
vjs.Menu = vjs.Component.extend();

/**
 * Add a menu item to the menu
 * @param {Object|String} component Component or component type to add
 */
vjs.Menu.prototype.addItem = function(component){
  this.addChild(component);
  component.on('click', vjs.bind(this, function(){
    this.unlockShowing();
  }));
};

/** @inheritDoc */
vjs.Menu.prototype.createEl = function(){
  var contentElType = this.options().contentElType || 'ul';
  this.contentEl_ = vjs.createEl(contentElType, {
    className: 'vjs-menu-content'
  });
  var el = vjs.Component.prototype.createEl.call(this, 'div', {
    append: this.contentEl_,
    className: 'vjs-menu'
  });
  el.appendChild(this.contentEl_);

  // Prevent clicks from bubbling up. Needed for Menu Buttons,
  // where a click on the parent is significant
  vjs.on(el, 'click', function(event){
    event.preventDefault();
    event.stopImmediatePropagation();
  });

  return el;
};

/**
 * The component for a menu item. `<li>`
 *
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @class
 * @constructor
 */
vjs.MenuItem = vjs.Button.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Button.call(this, player, options);
    this.selected(options['selected']);
  }
});

/** @inheritDoc */
vjs.MenuItem.prototype.createEl = function(type, props){
  return vjs.Button.prototype.createEl.call(this, 'li', vjs.obj.merge({
    className: 'vjs-menu-item',
    innerHTML: this.options_['label']
  }, props));
};

/**
 * Handle a click on the menu item, and set it to selected
 */
vjs.MenuItem.prototype.onClick = function(){
  this.selected(true);
};

/**
 * Set this menu item as selected or not
 * @param  {Boolean} selected
 */
vjs.MenuItem.prototype.selected = function(selected){
  if (selected) {
    this.addClass('vjs-selected');
    this.el_.setAttribute('aria-selected',true);
  } else {
    this.removeClass('vjs-selected');
    this.el_.setAttribute('aria-selected',false);
  }
};


/**
 * A button class with a popup menu
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.MenuButton = vjs.Button.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Button.call(this, player, options);

    this.menu = this.createMenu();

    // Add list to element
    this.addChild(this.menu);

    // Automatically hide empty menu buttons
    if (this.items && this.items.length === 0) {
      this.hide();
    }

    this.on('keyup', this.onKeyPress);
    this.el_.setAttribute('aria-haspopup', true);
    this.el_.setAttribute('role', 'button');
  }
});

/**
 * Track the state of the menu button
 * @type {Boolean}
 * @private
 */
vjs.MenuButton.prototype.buttonPressed_ = false;

vjs.MenuButton.prototype.createMenu = function(){
  var menu = new vjs.Menu(this.player_);

  // Add a title list item to the top
  if (this.options().title) {
    menu.contentEl().appendChild(vjs.createEl('li', {
      className: 'vjs-menu-title',
      innerHTML: vjs.capitalize(this.options().title),
      tabindex: -1
    }));
  }

  this.items = this['createItems']();

  if (this.items) {
    // Add menu items to the menu
    for (var i = 0; i < this.items.length; i++) {
      menu.addItem(this.items[i]);
    }
  }

  return menu;
};

/**
 * Create the list of menu items. Specific to each subclass.
 */
vjs.MenuButton.prototype.createItems = function(){};

/** @inheritDoc */
vjs.MenuButton.prototype.buildCSSClass = function(){
  return this.className + ' vjs-menu-button ' + vjs.Button.prototype.buildCSSClass.call(this);
};

// Focus - Add keyboard functionality to element
// This function is not needed anymore. Instead, the keyboard functionality is handled by
// treating the button as triggering a submenu. When the button is pressed, the submenu
// appears. Pressing the button again makes the submenu disappear.
vjs.MenuButton.prototype.onFocus = function(){};
// Can't turn off list display that we turned on with focus, because list would go away.
vjs.MenuButton.prototype.onBlur = function(){};

vjs.MenuButton.prototype.onClick = function(){
  // When you click the button it adds focus, which will show the menu indefinitely.
  // So we'll remove focus when the mouse leaves the button.
  // Focus is needed for tab navigation.
  this.one('mouseout', vjs.bind(this, function(){
    this.menu.unlockShowing();
    this.el_.blur();
  }));
  if (this.buttonPressed_){
    this.unpressButton();
  } else {
    this.pressButton();
  }
};

vjs.MenuButton.prototype.onKeyPress = function(event){
  event.preventDefault();

  // Check for space bar (32) or enter (13) keys
  if (event.which == 32 || event.which == 13) {
    if (this.buttonPressed_){
      this.unpressButton();
    } else {
      this.pressButton();
    }
  // Check for escape (27) key
  } else if (event.which == 27){
    if (this.buttonPressed_){
      this.unpressButton();
    }
  }
};

vjs.MenuButton.prototype.pressButton = function(){
  this.buttonPressed_ = true;
  this.menu.lockShowing();
  this.el_.setAttribute('aria-pressed', true);
  if (this.items && this.items.length > 0) {
    this.items[0].el().focus(); // set the focus to the title of the submenu
  }
};

vjs.MenuButton.prototype.unpressButton = function(){
  this.buttonPressed_ = false;
  this.menu.unlockShowing();
  this.el_.setAttribute('aria-pressed', false);
};

/**
 * Custom MediaError to mimic the HTML5 MediaError
 * @param {Number} code The media error code
 */
vjs.MediaError = function(code){
  if (typeof code === 'number') {
    this.code = code;
  } else if (typeof code === 'string') {
    // default code is zero, so this is a custom error
    this.message = code;
  } else if (typeof code === 'object') { // object
    vjs.obj.merge(this, code);
  }

  if (!this.message) {
    this.message = vjs.MediaError.defaultMessages[this.code] || '';
  }
};

/**
 * The error code that refers two one of the defined
 * MediaError types
 * @type {Number}
 */
vjs.MediaError.prototype.code = 0;

/**
 * An optional message to be shown with the error.
 * Message is not part of the HTML5 video spec
 * but allows for more informative custom errors.
 * @type {String}
 */
vjs.MediaError.prototype.message = '';

/**
 * An optional status code that can be set by plugins
 * to allow even more detail about the error.
 * For example the HLS plugin might provide the specific
 * HTTP status code that was returned when the error
 * occurred, then allowing a custom error overlay
 * to display more information.
 * @type {[type]}
 */
vjs.MediaError.prototype.status = null;

vjs.MediaError.errorTypes = [
  'MEDIA_ERR_CUSTOM',            // = 0
  'MEDIA_ERR_ABORTED',           // = 1
  'MEDIA_ERR_NETWORK',           // = 2
  'MEDIA_ERR_DECODE',            // = 3
  'MEDIA_ERR_SRC_NOT_SUPPORTED', // = 4
  'MEDIA_ERR_ENCRYPTED'          // = 5
];

vjs.MediaError.defaultMessages = {
  1: 'You aborted the video playback',
  2: 'A network error caused the video download to fail part-way.',
  3: 'The video playback was aborted due to a corruption problem or because the video used features your browser did not support.',
  4: 'The video could not be loaded, either because the server or network failed or because the format is not supported.',
  5: 'The video is encrypted and we do not have the keys to decrypt it.'
};

// Add types as properties on MediaError
// e.g. MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED = 4;
for (var errNum = 0; errNum < vjs.MediaError.errorTypes.length; errNum++) {
  vjs.MediaError[vjs.MediaError.errorTypes[errNum]] = errNum;
  // values should be accessible on both the class and instance
  vjs.MediaError.prototype[vjs.MediaError.errorTypes[errNum]] = errNum;
}
(function(){
  var apiMap, specApi, browserApi, i;

  /**
   * Store the browser-specifc methods for the fullscreen API
   * @type {Object|undefined}
   * @private
   */
  vjs.browser.fullscreenAPI;

  // browser API methods
  // map approach from Screenful.js - https://github.com/sindresorhus/screenfull.js
  apiMap = [
    // Spec: https://dvcs.w3.org/hg/fullscreen/raw-file/tip/Overview.html
    [
      'requestFullscreen',
      'exitFullscreen',
      'fullscreenElement',
      'fullscreenEnabled',
      'fullscreenchange',
      'fullscreenerror'
    ],
    // WebKit
    [
      'webkitRequestFullscreen',
      'webkitExitFullscreen',
      'webkitFullscreenElement',
      'webkitFullscreenEnabled',
      'webkitfullscreenchange',
      'webkitfullscreenerror'
    ],
    // Old WebKit (Safari 5.1)
    [
      'webkitRequestFullScreen',
      'webkitCancelFullScreen',
      'webkitCurrentFullScreenElement',
      'webkitCancelFullScreen',
      'webkitfullscreenchange',
      'webkitfullscreenerror'
    ],
    // Mozilla
    [
      'mozRequestFullScreen',
      'mozCancelFullScreen',
      'mozFullScreenElement',
      'mozFullScreenEnabled',
      'mozfullscreenchange',
      'mozfullscreenerror'
    ],
    // Microsoft
    [
      'msRequestFullscreen',
      'msExitFullscreen',
      'msFullscreenElement',
      'msFullscreenEnabled',
      'MSFullscreenChange',
      'MSFullscreenError'
    ]
  ];

  specApi = apiMap[0];

  // determine the supported set of functions
  for (i=0; i<apiMap.length; i++) {
    // check for exitFullscreen function
    if (apiMap[i][1] in document) {
      browserApi = apiMap[i];
      break;
    }
  }

  // map the browser API names to the spec API names
  // or leave vjs.browser.fullscreenAPI undefined
  if (browserApi) {
    vjs.browser.fullscreenAPI = {};

    for (i=0; i<browserApi.length; i++) {
      vjs.browser.fullscreenAPI[specApi[i]] = browserApi[i];
    }
  }

})();
/**
 * An instance of the `vjs.Player` class is created when any of the Video.js setup methods are used to initialize a video.
 *
 * ```js
 * var myPlayer = videojs('example_video_1');
 * ```
 *
 * In the follwing example, the `data-setup` attribute tells the Video.js library to create a player instance when the library is ready.
 *
 * ```html
 * <video id="example_video_1" data-setup='{}' controls>
 *   <source src="my-source.mp4" type="video/mp4">
 * </video>
 * ```
 *
 * After an instance has been created it can be accessed globally using `Video('example_video_1')`.
 *
 * @class
 * @extends vjs.Component
 */
vjs.Player = vjs.Component.extend({

  /**
   * player's constructor function
   *
   * @constructs
   * @method init
   * @param {Element} tag        The original video tag used for configuring options
   * @param {Object=} options    Player options
   * @param {Function=} ready    Ready callback function
   */
  init: function(tag, options, ready){
    this.tag = tag; // Store the original tag used to set options

    // Make sure tag ID exists
    tag.id = tag.id || 'vjs_video_' + vjs.guid++;

    // Set Options
    // The options argument overrides options set in the video tag
    // which overrides globally set options.
    // This latter part coincides with the load order
    // (tag must exist before Player)
    options = vjs.obj.merge(this.getTagSettings(tag), options);

    // Cache for video property values.
    this.cache_ = {};

    // Set poster
    this.poster_ = options['poster'];
    // Set controls
    this.controls_ = options['controls'];
    // Original tag settings stored in options
    // now remove immediately so native controls don't flash.
    // May be turned back on by HTML5 tech if nativeControlsForTouch is true
    tag.controls = false;

    // we don't want the player to report touch activity on itself
    // see enableTouchActivity in Component
    options.reportTouchActivity = false;

    // Run base component initializing with new options.
    // Builds the element through createEl()
    // Inits and embeds any child components in opts
    vjs.Component.call(this, this, options, ready);

    // Update controls className. Can't do this when the controls are initially
    // set because the element doesn't exist yet.
    if (this.controls()) {
      this.addClass('vjs-controls-enabled');
    } else {
      this.addClass('vjs-controls-disabled');
    }

    // TODO: Make this smarter. Toggle user state between touching/mousing
    // using events, since devices can have both touch and mouse events.
    // if (vjs.TOUCH_ENABLED) {
    //   this.addClass('vjs-touch-enabled');
    // }

    // Make player easily findable by ID
    vjs.players[this.id_] = this;

    if (options['plugins']) {
      vjs.obj.each(options['plugins'], function(key, val){
        this[key](val);
      }, this);
    }

    this.listenForUserActivity();
  }
});

/**
 * Player instance options, surfaced using vjs.options
 * vjs.options = vjs.Player.prototype.options_
 * Make changes in vjs.options, not here.
 * All options should use string keys so they avoid
 * renaming by closure compiler
 * @type {Object}
 * @private
 */
vjs.Player.prototype.options_ = vjs.options;

/**
 * Destroys the video player and does any necessary cleanup
 *
 *     myPlayer.dispose();
 *
 * This is especially helpful if you are dynamically adding and removing videos
 * to/from the DOM.
 */
vjs.Player.prototype.dispose = function(){
  this.trigger('dispose');
  // prevent dispose from being called twice
  this.off('dispose');

  // Kill reference to this player
  vjs.players[this.id_] = null;
  if (this.tag && this.tag['player']) { this.tag['player'] = null; }
  if (this.el_ && this.el_['player']) { this.el_['player'] = null; }

  // Ensure that tracking progress and time progress will stop and plater deleted
  this.stopTrackingProgress();
  this.stopTrackingCurrentTime();

  if (this.tech) { this.tech.dispose(); }

  // Component dispose
  vjs.Component.prototype.dispose.call(this);
};

vjs.Player.prototype.getTagSettings = function(tag){
  var options = {
    'sources': [],
    'tracks': []
  };

  vjs.obj.merge(options, vjs.getAttributeValues(tag));

  // Get tag children settings
  if (tag.hasChildNodes()) {
    var children, child, childName, i, j;

    children = tag.childNodes;

    for (i=0,j=children.length; i<j; i++) {
      child = children[i];
      // Change case needed: http://ejohn.org/blog/nodename-case-sensitivity/
      childName = child.nodeName.toLowerCase();
      if (childName === 'source') {
        options['sources'].push(vjs.getAttributeValues(child));
      } else if (childName === 'track') {
        options['tracks'].push(vjs.getAttributeValues(child));
      }
    }
  }

  return options;
};

vjs.Player.prototype.createEl = function(){
  var el = this.el_ = vjs.Component.prototype.createEl.call(this, 'div');
  var tag = this.tag;

  // Remove width/height attrs from tag so CSS can make it 100% width/height
  tag.removeAttribute('width');
  tag.removeAttribute('height');
  // Empty video tag tracks so the built-in player doesn't use them also.
  // This may not be fast enough to stop HTML5 browsers from reading the tags
  // so we'll need to turn off any default tracks if we're manually doing
  // captions and subtitles. videoElement.textTracks
  if (tag.hasChildNodes()) {
    var nodes, nodesLength, i, node, nodeName, removeNodes;

    nodes = tag.childNodes;
    nodesLength = nodes.length;
    removeNodes = [];

    while (nodesLength--) {
      node = nodes[nodesLength];
      nodeName = node.nodeName.toLowerCase();
      if (nodeName === 'track') {
        removeNodes.push(node);
      }
    }

    for (i=0; i<removeNodes.length; i++) {
      tag.removeChild(removeNodes[i]);
    }
  }

  // Give video tag ID and class to player div
  // ID will now reference player box, not the video tag
  el.id = tag.id;
  el.className = tag.className;

  // Update tag id/class for use as HTML5 playback tech
  // Might think we should do this after embedding in container so .vjs-tech class
  // doesn't flash 100% width/height, but class only applies with .video-js parent
  tag.id += '_html5_api';
  tag.className = 'vjs-tech';

  // Make player findable on elements
  tag['player'] = el['player'] = this;
  // Default state of video is paused
  this.addClass('vjs-paused');

  // Make box use width/height of tag, or rely on default implementation
  // Enforce with CSS since width/height attrs don't work on divs
  this.width(this.options_['width'], true); // (true) Skip resize listener on load
  this.height(this.options_['height'], true);

  // Wrap video tag in div (el/box) container
  if (tag.parentNode) {
    tag.parentNode.insertBefore(el, tag);
  }
  vjs.insertFirst(tag, el); // Breaks iPhone, fixed in HTML5 setup.

  // The event listeners need to be added before the children are added
  // in the component init because the tech (loaded with mediaLoader) may
  // fire events, like loadstart, that these events need to capture.
  // Long term it might be better to expose a way to do this in component.init
  // like component.initEventListeners() that runs between el creation and
  // adding children
  this.el_ = el;
  this.on('loadstart', this.onLoadStart);
  this.on('ended', this.onEnded);
  this.on('play', this.onPlay);
  this.on('firstplay', this.onFirstPlay);
  this.on('pause', this.onPause);
  this.on('progress', this.onProgress);
  this.on('durationchange', this.onDurationChange);
  this.on('fullscreenchange', this.onFullscreenChange);

  return el;
};

// /* Media Technology (tech)
// ================================================================================ */
// Load/Create an instance of playback technlogy including element and API methods
// And append playback element in player div.
vjs.Player.prototype.loadTech = function(techName, source){

  // Pause and remove current playback technology
  if (this.tech) {
    this.unloadTech();
  }

  // get rid of the HTML5 video tag as soon as we are using another tech
  if (techName !== 'Html5' && this.tag) {
    vjs.Html5.disposeMediaElement(this.tag);
    this.tag = null;
  }

  this.techName = techName;

  // Turn off API access because we're loading a new tech that might load asynchronously
  this.isReady_ = false;

  var techReady = function(){
    this.player_.triggerReady();

    // Manually track progress in cases where the browser/flash player doesn't report it.
    if (!this.features['progressEvents']) {
      this.player_.manualProgressOn();
    }

    // Manually track timeudpates in cases where the browser/flash player doesn't report it.
    if (!this.features['timeupdateEvents']) {
      this.player_.manualTimeUpdatesOn();
    }
  };

  // Grab tech-specific options from player options and add source and parent element to use.
  var techOptions = vjs.obj.merge({ 'source': source, 'parentEl': this.el_ }, this.options_[techName.toLowerCase()]);

  if (source) {
    if (source.src == this.cache_.src && this.cache_.currentTime > 0) {
      techOptions['startTime'] = this.cache_.currentTime;
    }

    this.cache_.src = source.src;
  }

  // Initialize tech instance
  this.tech = new window['videojs'][techName](this, techOptions);

  this.tech.ready(techReady);
};

vjs.Player.prototype.unloadTech = function(){
  this.isReady_ = false;
  this.tech.dispose();

  // Turn off any manual progress or timeupdate tracking
  if (this.manualProgress) { this.manualProgressOff(); }

  if (this.manualTimeUpdates) { this.manualTimeUpdatesOff(); }

  this.tech = false;
};

// There's many issues around changing the size of a Flash (or other plugin) object.
// First is a plugin reload issue in Firefox that has been around for 11 years: https://bugzilla.mozilla.org/show_bug.cgi?id=90268
// Then with the new fullscreen API, Mozilla and webkit browsers will reload the flash object after going to fullscreen.
// To get around this, we're unloading the tech, caching source and currentTime values, and reloading the tech once the plugin is resized.
// reloadTech: function(betweenFn){
//   vjs.log('unloadingTech')
//   this.unloadTech();
//   vjs.log('unloadedTech')
//   if (betweenFn) { betweenFn.call(); }
//   vjs.log('LoadingTech')
//   this.loadTech(this.techName, { src: this.cache_.src })
//   vjs.log('loadedTech')
// },

/* Fallbacks for unsupported event types
================================================================================ */
// Manually trigger progress events based on changes to the buffered amount
// Many flash players and older HTML5 browsers don't send progress or progress-like events
vjs.Player.prototype.manualProgressOn = function(){
  this.manualProgress = true;

  // Trigger progress watching when a source begins loading
  this.trackProgress();

  // Watch for a native progress event call on the tech element
  // In HTML5, some older versions don't support the progress event
  // So we're assuming they don't, and turning off manual progress if they do.
  // As opposed to doing user agent detection
  if (this.tech) {
    this.tech.one('progress', function(){

      // Update known progress support for this playback technology
      this.features['progressEvents'] = true;

      // Turn off manual progress tracking
      this.player_.manualProgressOff();
    });
  }
};

vjs.Player.prototype.manualProgressOff = function(){
  this.manualProgress = false;
  this.stopTrackingProgress();
};

vjs.Player.prototype.trackProgress = function(){

  this.progressInterval = setInterval(vjs.bind(this, function(){
    // Don't trigger unless buffered amount is greater than last time
    // log(this.cache_.bufferEnd, this.buffered().end(0), this.duration())
    /* TODO: update for multiple buffered regions */
    if (this.cache_.bufferEnd < this.buffered().end(0)) {
      this.trigger('progress');
    } else if (this.bufferedPercent() == 1) {
      this.stopTrackingProgress();
      this.trigger('progress'); // Last update
    }
  }), 500);
};
vjs.Player.prototype.stopTrackingProgress = function(){ clearInterval(this.progressInterval); };

/*! Time Tracking -------------------------------------------------------------- */
vjs.Player.prototype.manualTimeUpdatesOn = function(){
  this.manualTimeUpdates = true;

  this.on('play', this.trackCurrentTime);
  this.on('pause', this.stopTrackingCurrentTime);
  // timeupdate is also called by .currentTime whenever current time is set

  // Watch for native timeupdate event
  if (this.tech) {
    this.tech.one('timeupdate', function(){
      // Update known progress support for this playback technology
      this.features['timeupdateEvents'] = true;
      // Turn off manual progress tracking
      this.player_.manualTimeUpdatesOff();
    });
  }
};

vjs.Player.prototype.manualTimeUpdatesOff = function(){
  this.manualTimeUpdates = false;
  this.stopTrackingCurrentTime();
  this.off('play', this.trackCurrentTime);
  this.off('pause', this.stopTrackingCurrentTime);
};

vjs.Player.prototype.trackCurrentTime = function(){
  if (this.currentTimeInterval) { this.stopTrackingCurrentTime(); }
  this.currentTimeInterval = setInterval(vjs.bind(this, function(){
    this.trigger('timeupdate');
  }), 250); // 42 = 24 fps // 250 is what Webkit uses // FF uses 15
};

// Turn off play progress tracking (when paused or dragging)
vjs.Player.prototype.stopTrackingCurrentTime = function(){
  clearInterval(this.currentTimeInterval);

  // #1002 - if the video ends right before the next timeupdate would happen,
  // the progress bar won't make it all the way to the end
  this.trigger('timeupdate');
};
// /* Player event handlers (how the player reacts to certain events)
// ================================================================================ */

/**
 * Fired when the user agent begins looking for media data
 * @event loadstart
 */
vjs.Player.prototype.onLoadStart = function() {
  // TODO: Update to use `emptied` event instead. See #1277.

  // reset the error state
  this.error(null);

  // If it's already playing we want to trigger a firstplay event now.
  // The firstplay event relies on both the play and loadstart events
  // which can happen in any order for a new source
  if (!this.paused()) {
    this.trigger('firstplay');
  } else {
    // reset the hasStarted state
    this.hasStarted(false);
    this.one('play', function(){
      this.hasStarted(true);
    });
  }
};

vjs.Player.prototype.hasStarted_ = false;

vjs.Player.prototype.hasStarted = function(hasStarted){
  if (hasStarted !== undefined) {
    // only update if this is a new value
    if (this.hasStarted_ !== hasStarted) {
      this.hasStarted_ = hasStarted;
      if (hasStarted) {
        this.addClass('vjs-has-started');
        // trigger the firstplay event if this newly has played
        this.trigger('firstplay');
      } else {
        this.removeClass('vjs-has-started');
      }
    }
    return this;
  }
  return this.hasStarted_;
};

/**
 * Fired when the player has initial duration and dimension information
 * @event loadedmetadata
 */
vjs.Player.prototype.onLoadedMetaData;

/**
 * Fired when the player has downloaded data at the current playback position
 * @event loadeddata
 */
vjs.Player.prototype.onLoadedData;

/**
 * Fired when the player has finished downloading the source data
 * @event loadedalldata
 */
vjs.Player.prototype.onLoadedAllData;

/**
 * Fired whenever the media begins or resumes playback
 * @event play
 */
vjs.Player.prototype.onPlay = function(){
  vjs.removeClass(this.el_, 'vjs-paused');
  vjs.addClass(this.el_, 'vjs-playing');
};

/**
 * Fired the first time a video is played
 *
 * Not part of the HLS spec, and we're not sure if this is the best
 * implementation yet, so use sparingly. If you don't have a reason to
 * prevent playback, use `myPlayer.one('play');` instead.
 *
 * @event firstplay
 */
vjs.Player.prototype.onFirstPlay = function(){
    //If the first starttime attribute is specified
    //then we will start at the given offset in seconds
    if(this.options_['starttime']){
      this.currentTime(this.options_['starttime']);
    }

    this.addClass('vjs-has-started');
};

/**
 * Fired whenever the media has been paused
 * @event pause
 */
vjs.Player.prototype.onPause = function(){
  vjs.removeClass(this.el_, 'vjs-playing');
  vjs.addClass(this.el_, 'vjs-paused');
};

/**
 * Fired when the current playback position has changed
 *
 * During playback this is fired every 15-250 milliseconds, depnding on the
 * playback technology in use.
 * @event timeupdate
 */
vjs.Player.prototype.onTimeUpdate;

/**
 * Fired while the user agent is downloading media data
 * @event progress
 */
vjs.Player.prototype.onProgress = function(){
  // Add custom event for when source is finished downloading.
  if (this.bufferedPercent() == 1) {
    this.trigger('loadedalldata');
  }
};

/**
 * Fired when the end of the media resource is reached (currentTime == duration)
 * @event ended
 */
vjs.Player.prototype.onEnded = function(){
  if (this.options_['loop']) {
    this.currentTime(0);
    this.play();
  }
};

/**
 * Fired when the duration of the media resource is first known or changed
 * @event durationchange
 */
vjs.Player.prototype.onDurationChange = function(){
  // Allows for cacheing value instead of asking player each time.
  // We need to get the techGet response and check for a value so we don't
  // accidentally cause the stack to blow up.
  var duration = this.techGet('duration');
  if (duration) {
    if (duration < 0) {
      duration = Infinity;
    }
    this.duration(duration);
    // Determine if the stream is live and propagate styles down to UI.
    if (duration === Infinity) {
      this.addClass('vjs-live');
    } else {
      this.removeClass('vjs-live');
    }
  }
};

/**
 * Fired when the volume changes
 * @event volumechange
 */
vjs.Player.prototype.onVolumeChange;

/**
 * Fired when the player switches in or out of fullscreen mode
 * @event fullscreenchange
 */
vjs.Player.prototype.onFullscreenChange = function() {
  if (this.isFullscreen()) {
    this.addClass('vjs-fullscreen');
  } else {
    this.removeClass('vjs-fullscreen');
  }
};

// /* Player API
// ================================================================================ */

/**
 * Object for cached values.
 * @private
 */
vjs.Player.prototype.cache_;

vjs.Player.prototype.getCache = function(){
  return this.cache_;
};

// Pass values to the playback tech
vjs.Player.prototype.techCall = function(method, arg){
  // If it's not ready yet, call method when it is
  if (this.tech && !this.tech.isReady_) {
    this.tech.ready(function(){
      this[method](arg);
    });

  // Otherwise call method now
  } else {
    try {
      this.tech[method](arg);
    } catch(e) {
      vjs.log(e);
      throw e;
    }
  }
};

// Get calls can't wait for the tech, and sometimes don't need to.
vjs.Player.prototype.techGet = function(method){
  if (this.tech && this.tech.isReady_) {

    // Flash likes to die and reload when you hide or reposition it.
    // In these cases the object methods go away and we get errors.
    // When that happens we'll catch the errors and inform tech that it's not ready any more.
    try {
      return this.tech[method]();
    } catch(e) {
      // When building additional tech libs, an expected method may not be defined yet
      if (this.tech[method] === undefined) {
        vjs.log('Video.js: ' + method + ' method not defined for '+this.techName+' playback technology.', e);
      } else {
        // When a method isn't available on the object it throws a TypeError
        if (e.name == 'TypeError') {
          vjs.log('Video.js: ' + method + ' unavailable on '+this.techName+' playback technology element.', e);
          this.tech.isReady_ = false;
        } else {
          vjs.log(e);
        }
      }
      throw e;
    }
  }

  return;
};

/**
 * start media playback
 *
 *     myPlayer.play();
 *
 * @return {vjs.Player} self
 */
vjs.Player.prototype.play = function(){
  this.techCall('play');
  return this;
};

/**
 * Pause the video playback
 *
 *     myPlayer.pause();
 *
 * @return {vjs.Player} self
 */
vjs.Player.prototype.pause = function(){
  this.techCall('pause');
  return this;
};

/**
 * Check if the player is paused
 *
 *     var isPaused = myPlayer.paused();
 *     var isPlaying = !myPlayer.paused();
 *
 * @return {Boolean} false if the media is currently playing, or true otherwise
 */
vjs.Player.prototype.paused = function(){
  // The initial state of paused should be true (in Safari it's actually false)
  return (this.techGet('paused') === false) ? false : true;
};

/**
 * Get or set the current time (in seconds)
 *
 *     // get
 *     var whereYouAt = myPlayer.currentTime();
 *
 *     // set
 *     myPlayer.currentTime(120); // 2 minutes into the video
 *
 * @param  {Number|String=} seconds The time to seek to
 * @return {Number}        The time in seconds, when not setting
 * @return {vjs.Player}    self, when the current time is set
 */
vjs.Player.prototype.currentTime = function(seconds){
  if (seconds !== undefined) {

    this.techCall('setCurrentTime', seconds);

    // improve the accuracy of manual timeupdates
    if (this.manualTimeUpdates) { this.trigger('timeupdate'); }

    return this;
  }

  // cache last currentTime and return. default to 0 seconds
  //
  // Caching the currentTime is meant to prevent a massive amount of reads on the tech's
  // currentTime when scrubbing, but may not provide much performace benefit afterall.
  // Should be tested. Also something has to read the actual current time or the cache will
  // never get updated.
  return this.cache_.currentTime = (this.techGet('currentTime') || 0);
};

/**
 * Get the length in time of the video in seconds
 *
 *     var lengthOfVideo = myPlayer.duration();
 *
 * **NOTE**: The video must have started loading before the duration can be
 * known, and in the case of Flash, may not be known until the video starts
 * playing.
 *
 * @return {Number} The duration of the video in seconds
 */
vjs.Player.prototype.duration = function(seconds){
  if (seconds !== undefined) {

    // cache the last set value for optimiized scrubbing (esp. Flash)
    this.cache_.duration = parseFloat(seconds);

    return this;
  }

  if (this.cache_.duration === undefined) {
    this.onDurationChange();
  }

  return this.cache_.duration || 0;
};

// Calculates how much time is left. Not in spec, but useful.
vjs.Player.prototype.remainingTime = function(){
  return this.duration() - this.currentTime();
};

// http://dev.w3.org/html5/spec/video.html#dom-media-buffered
// Buffered returns a timerange object.
// Kind of like an array of portions of the video that have been downloaded.
// So far no browsers return more than one range (portion)

/**
 * Get a TimeRange object with the times of the video that have been downloaded
 *
 * If you just want the percent of the video that's been downloaded,
 * use bufferedPercent.
 *
 *     // Number of different ranges of time have been buffered. Usually 1.
 *     numberOfRanges = bufferedTimeRange.length,
 *
 *     // Time in seconds when the first range starts. Usually 0.
 *     firstRangeStart = bufferedTimeRange.start(0),
 *
 *     // Time in seconds when the first range ends
 *     firstRangeEnd = bufferedTimeRange.end(0),
 *
 *     // Length in seconds of the first time range
 *     firstRangeLength = firstRangeEnd - firstRangeStart;
 *
 * @return {Object} A mock TimeRange object (following HTML spec)
 */
vjs.Player.prototype.buffered = function(){
  var buffered = this.techGet('buffered'),
      start = 0,
      buflast = buffered.length - 1,
      // Default end to 0 and store in values
      end = this.cache_.bufferEnd = this.cache_.bufferEnd || 0;

  if (buffered && buflast >= 0 && buffered.end(buflast) !== end) {
    end = buffered.end(buflast);
    // Storing values allows them be overridden by setBufferedFromProgress
    this.cache_.bufferEnd = end;
  }

  return vjs.createTimeRange(start, end);
};

/**
 * Get the percent (as a decimal) of the video that's been downloaded
 *
 *     var howMuchIsDownloaded = myPlayer.bufferedPercent();
 *
 * 0 means none, 1 means all.
 * (This method isn't in the HTML5 spec, but it's very convenient)
 *
 * @return {Number} A decimal between 0 and 1 representing the percent
 */
vjs.Player.prototype.bufferedPercent = function(){
  return (this.duration()) ? this.buffered().end(0) / this.duration() : 0;
};

/**
 * Get or set the current volume of the media
 *
 *     // get
 *     var howLoudIsIt = myPlayer.volume();
 *
 *     // set
 *     myPlayer.volume(0.5); // Set volume to half
 *
 * 0 is off (muted), 1.0 is all the way up, 0.5 is half way.
 *
 * @param  {Number} percentAsDecimal The new volume as a decimal percent
 * @return {Number}                  The current volume, when getting
 * @return {vjs.Player}              self, when setting
 */
vjs.Player.prototype.volume = function(percentAsDecimal){
  var vol;

  if (percentAsDecimal !== undefined) {
    vol = Math.max(0, Math.min(1, parseFloat(percentAsDecimal))); // Force value to between 0 and 1
    this.cache_.volume = vol;
    this.techCall('setVolume', vol);
    vjs.setLocalStorage('volume', vol);
    return this;
  }

  // Default to 1 when returning current volume.
  vol = parseFloat(this.techGet('volume'));
  return (isNaN(vol)) ? 1 : vol;
};


/**
 * Get the current muted state, or turn mute on or off
 *
 *     // get
 *     var isVolumeMuted = myPlayer.muted();
 *
 *     // set
 *     myPlayer.muted(true); // mute the volume
 *
 * @param  {Boolean=} muted True to mute, false to unmute
 * @return {Boolean} True if mute is on, false if not, when getting
 * @return {vjs.Player} self, when setting mute
 */
vjs.Player.prototype.muted = function(muted){
  if (muted !== undefined) {
    this.techCall('setMuted', muted);
    return this;
  }
  return this.techGet('muted') || false; // Default to false
};

// Check if current tech can support native fullscreen
// (e.g. with built in controls lik iOS, so not our flash swf)
vjs.Player.prototype.supportsFullScreen = function(){
  return this.techGet('supportsFullScreen') || false;
};

/**
 * is the player in fullscreen
 * @type {Boolean}
 * @private
 */
vjs.Player.prototype.isFullscreen_ = false;

/**
 * Check if the player is in fullscreen mode
 *
 *     // get
 *     var fullscreenOrNot = myPlayer.isFullscreen();
 *
 *     // set
 *     myPlayer.isFullscreen(true); // tell the player it's in fullscreen
 *
 * NOTE: As of the latest HTML5 spec, isFullscreen is no longer an official
 * property and instead document.fullscreenElement is used. But isFullscreen is
 * still a valuable property for internal player workings.
 *
 * @param  {Boolean=} isFS Update the player's fullscreen state
 * @return {Boolean} true if fullscreen, false if not
 * @return {vjs.Player} self, when setting
 */
vjs.Player.prototype.isFullscreen = function(isFS){
  if (isFS !== undefined) {
    this.isFullscreen_ = !!isFS;
    return this;
  }
  return this.isFullscreen_;
};

/**
 * Old naming for isFullscreen()
 * @deprecated for lowercase 's' version
 */
vjs.Player.prototype.isFullScreen = function(isFS){
  vjs.log.warn('player.isFullScreen() has been deprecated, use player.isFullscreen() with a lowercase "s")');
  return this.isFullscreen(isFS);
};

/**
 * Increase the size of the video to full screen
 *
 *     myPlayer.requestFullscreen();
 *
 * In some browsers, full screen is not supported natively, so it enters
 * "full window mode", where the video fills the browser window.
 * In browsers and devices that support native full screen, sometimes the
 * browser's default controls will be shown, and not the Video.js custom skin.
 * This includes most mobile devices (iOS, Android) and older versions of
 * Safari.
 *
 * @return {vjs.Player} self
 */
vjs.Player.prototype.requestFullscreen = function(){
  var fsApi = vjs.browser.fullscreenAPI;

  this.isFullscreen(true);

  if (fsApi) {
    // the browser supports going fullscreen at the element level so we can
    // take the controls fullscreen as well as the video

    // Trigger fullscreenchange event after change
    // We have to specifically add this each time, and remove
    // when cancelling fullscreen. Otherwise if there's multiple
    // players on a page, they would all be reacting to the same fullscreen
    // events
    vjs.on(document, fsApi['fullscreenchange'], vjs.bind(this, function(e){
      this.isFullscreen(document[fsApi.fullscreenElement]);

      // If cancelling fullscreen, remove event listener.
      if (this.isFullscreen() === false) {
        vjs.off(document, fsApi['fullscreenchange'], arguments.callee);
      }

      this.trigger('fullscreenchange');
    }));

    this.el_[fsApi.requestFullscreen]();

  } else if (this.tech.supportsFullScreen()) {
    // we can't take the video.js controls fullscreen but we can go fullscreen
    // with native controls
    this.techCall('enterFullScreen');
  } else {
    // fullscreen isn't supported so we'll just stretch the video element to
    // fill the viewport
    this.enterFullWindow();
    this.trigger('fullscreenchange');
  }

  return this;
};

/**
 * Old naming for requestFullscreen
 * @deprecated for lower case 's' version
 */
vjs.Player.prototype.requestFullScreen = function(){
  vjs.log.warn('player.requestFullScreen() has been deprecated, use player.requestFullscreen() with a lowercase "s")');
  return this.requestFullscreen();
};


/**
 * Return the video to its normal size after having been in full screen mode
 *
 *     myPlayer.exitFullscreen();
 *
 * @return {vjs.Player} self
 */
vjs.Player.prototype.exitFullscreen = function(){
  var fsApi = vjs.browser.fullscreenAPI;
  this.isFullscreen(false);

  // Check for browser element fullscreen support
  if (fsApi) {
    document[fsApi.exitFullscreen]();
  } else if (this.tech.supportsFullScreen()) {
   this.techCall('exitFullScreen');
  } else {
   this.exitFullWindow();
   this.trigger('fullscreenchange');
  }

  return this;
};

/**
 * Old naming for exitFullscreen
 * @deprecated for exitFullscreen
 */
vjs.Player.prototype.cancelFullScreen = function(){
  vjs.log.warn('player.cancelFullScreen() has been deprecated, use player.exitFullscreen()');
  return this.exitFullscreen();
};

// When fullscreen isn't supported we can stretch the video container to as wide as the browser will let us.
vjs.Player.prototype.enterFullWindow = function(){
  this.isFullWindow = true;

  // Storing original doc overflow value to return to when fullscreen is off
  this.docOrigOverflow = document.documentElement.style.overflow;

  // Add listener for esc key to exit fullscreen
  vjs.on(document, 'keydown', vjs.bind(this, this.fullWindowOnEscKey));

  // Hide any scroll bars
  document.documentElement.style.overflow = 'hidden';

  // Apply fullscreen styles
  vjs.addClass(document.body, 'vjs-full-window');

  this.trigger('enterFullWindow');
};
vjs.Player.prototype.fullWindowOnEscKey = function(event){
  if (event.keyCode === 27) {
    if (this.isFullscreen() === true) {
      this.exitFullscreen();
    } else {
      this.exitFullWindow();
    }
  }
};

vjs.Player.prototype.exitFullWindow = function(){
  this.isFullWindow = false;
  vjs.off(document, 'keydown', this.fullWindowOnEscKey);

  // Unhide scroll bars.
  document.documentElement.style.overflow = this.docOrigOverflow;

  // Remove fullscreen styles
  vjs.removeClass(document.body, 'vjs-full-window');

  // Resize the box, controller, and poster to original sizes
  // this.positionAll();
  this.trigger('exitFullWindow');
};

vjs.Player.prototype.selectSource = function(sources){

  // Loop through each playback technology in the options order
  for (var i=0,j=this.options_['techOrder'];i<j.length;i++) {
    var techName = vjs.capitalize(j[i]),
        tech = window['videojs'][techName];

    // Check if the current tech is defined before continuing
    if (!tech) {
      vjs.log.error('The "' + techName + '" tech is undefined. Skipped browser support check for that tech.');
      continue;
    }

    // Check if the browser supports this technology
    if (tech.isSupported()) {
      // Loop through each source object
      for (var a=0,b=sources;a<b.length;a++) {
        var source = b[a];

        // Check if source can be played with this technology
        if (tech['canPlaySource'](source)) {
          return { source: source, tech: techName };
        }
      }
    }
  }

  return false;
};

/**
 * The source function updates the video source
 *
 * There are three types of variables you can pass as the argument.
 *
 * **URL String**: A URL to the the video file. Use this method if you are sure
 * the current playback technology (HTML5/Flash) can support the source you
 * provide. Currently only MP4 files can be used in both HTML5 and Flash.
 *
 *     myPlayer.src("http://www.example.com/path/to/video.mp4");
 *
 * **Source Object (or element):** A javascript object containing information
 * about the source file. Use this method if you want the player to determine if
 * it can support the file using the type information.
 *
 *     myPlayer.src({ type: "video/mp4", src: "http://www.example.com/path/to/video.mp4" });
 *
 * **Array of Source Objects:** To provide multiple versions of the source so
 * that it can be played using HTML5 across browsers you can use an array of
 * source objects. Video.js will detect which version is supported and load that
 * file.
 *
 *     myPlayer.src([
 *       { type: "video/mp4", src: "http://www.example.com/path/to/video.mp4" },
 *       { type: "video/webm", src: "http://www.example.com/path/to/video.webm" },
 *       { type: "video/ogg", src: "http://www.example.com/path/to/video.ogv" }
 *     ]);
 *
 * @param  {String|Object|Array=} source The source URL, object, or array of sources
 * @return {String} The current video source when getting
 * @return {String} The player when setting
 */
vjs.Player.prototype.src = function(source){
  if (source === undefined) {
    return this.techGet('src');
  }

  // Case: Array of source objects to choose from and pick the best to play
  if (source instanceof Array) {

    var sourceTech = this.selectSource(source),
        techName;

    if (sourceTech) {
        source = sourceTech.source;
        techName = sourceTech.tech;

      // If this technology is already loaded, set source
      if (techName == this.techName) {
        this.src(source); // Passing the source object
      // Otherwise load this technology with chosen source
      } else {
        this.loadTech(techName, source);
      }
    } else {
      // this.el_.appendChild(vjs.createEl('p', {
      //   innerHTML: this.options()['notSupportedMessage']
      // }));
      this.error({ code: 4, message: this.options()['notSupportedMessage'] });
      this.triggerReady(); // we could not find an appropriate tech, but let's still notify the delegate that this is it
    }

  // Case: Source object { src: '', type: '' ... }
  } else if (source instanceof Object) {

    if (window['videojs'][this.techName]['canPlaySource'](source)) {
      this.src(source.src);
    } else {
      // Send through tech loop to check for a compatible technology.
      this.src([source]);
    }

  // Case: URL String (http://myvideo...)
  } else {
    // Cache for getting last set source
    this.cache_.src = source;

    if (!this.isReady_) {
      this.ready(function(){
        this.src(source);
      });
    } else {
      this.techCall('src', source);
      if (this.options_['preload'] == 'auto') {
        this.load();
      }
      if (this.options_['autoplay']) {
        this.play();
      }
    }
  }

  return this;
};

// Begin loading the src data
// http://dev.w3.org/html5/spec/video.html#dom-media-load
vjs.Player.prototype.load = function(){
  this.techCall('load');
  return this;
};

// http://dev.w3.org/html5/spec/video.html#dom-media-currentsrc
vjs.Player.prototype.currentSrc = function(){
  return this.techGet('currentSrc') || this.cache_.src || '';
};

// Attributes/Options
vjs.Player.prototype.preload = function(value){
  if (value !== undefined) {
    this.techCall('setPreload', value);
    this.options_['preload'] = value;
    return this;
  }
  return this.techGet('preload');
};
vjs.Player.prototype.autoplay = function(value){
  if (value !== undefined) {
    this.techCall('setAutoplay', value);
    this.options_['autoplay'] = value;
    return this;
  }
  return this.techGet('autoplay', value);
};
vjs.Player.prototype.loop = function(value){
  if (value !== undefined) {
    this.techCall('setLoop', value);
    this.options_['loop'] = value;
    return this;
  }
  return this.techGet('loop');
};

/**
 * the url of the poster image source
 * @type {String}
 * @private
 */
vjs.Player.prototype.poster_;

/**
 * get or set the poster image source url
 *
 * ##### EXAMPLE:
 *
 *     // getting
 *     var currentPoster = myPlayer.poster();
 *
 *     // setting
 *     myPlayer.poster('http://example.com/myImage.jpg');
 *
 * @param  {String=} [src] Poster image source URL
 * @return {String} poster URL when getting
 * @return {vjs.Player} self when setting
 */
vjs.Player.prototype.poster = function(src){
  if (src === undefined) {
    return this.poster_;
  }

  // update the internal poster variable
  this.poster_ = src;

  // update the tech's poster
  this.techCall('setPoster', src);

  // alert components that the poster has been set
  this.trigger('posterchange');
};

/**
 * Whether or not the controls are showing
 * @type {Boolean}
 * @private
 */
vjs.Player.prototype.controls_;

/**
 * Get or set whether or not the controls are showing.
 * @param  {Boolean} controls Set controls to showing or not
 * @return {Boolean}    Controls are showing
 */
vjs.Player.prototype.controls = function(bool){
  if (bool !== undefined) {
    bool = !!bool; // force boolean
    // Don't trigger a change event unless it actually changed
    if (this.controls_ !== bool) {
      this.controls_ = bool;
      if (bool) {
        this.removeClass('vjs-controls-disabled');
        this.addClass('vjs-controls-enabled');
        this.trigger('controlsenabled');
      } else {
        this.removeClass('vjs-controls-enabled');
        this.addClass('vjs-controls-disabled');
        this.trigger('controlsdisabled');
      }
    }
    return this;
  }
  return this.controls_;
};

vjs.Player.prototype.usingNativeControls_;

/**
 * Toggle native controls on/off. Native controls are the controls built into
 * devices (e.g. default iPhone controls), Flash, or other techs
 * (e.g. Vimeo Controls)
 *
 * **This should only be set by the current tech, because only the tech knows
 * if it can support native controls**
 *
 * @param  {Boolean} bool    True signals that native controls are on
 * @return {vjs.Player}      Returns the player
 * @private
 */
vjs.Player.prototype.usingNativeControls = function(bool){
  if (bool !== undefined) {
    bool = !!bool; // force boolean
    // Don't trigger a change event unless it actually changed
    if (this.usingNativeControls_ !== bool) {
      this.usingNativeControls_ = bool;
      if (bool) {
        this.addClass('vjs-using-native-controls');

        /**
         * player is using the native device controls
         *
         * @event usingnativecontrols
         * @memberof vjs.Player
         * @instance
         * @private
         */
        this.trigger('usingnativecontrols');
      } else {
        this.removeClass('vjs-using-native-controls');

        /**
         * player is using the custom HTML controls
         *
         * @event usingcustomcontrols
         * @memberof vjs.Player
         * @instance
         * @private
         */
        this.trigger('usingcustomcontrols');
      }
    }
    return this;
  }
  return this.usingNativeControls_;
};

/**
 * Store the current media error
 * @type {Object}
 * @private
 */
vjs.Player.prototype.error_ = null;

/**
 * Set or get the current MediaError
 * @param  {*} err A MediaError or a String/Number to be turned into a MediaError
 * @return {vjs.MediaError|null}     when getting
 * @return {vjs.Player}              when setting
 */
vjs.Player.prototype.error = function(err){
  if (err === undefined) {
    return this.error_;
  }

  // restoring to default
  if (err === null) {
    this.error_ = err;
    this.removeClass('vjs-error');
    return this;
  }

  // error instance
  if (err instanceof vjs.MediaError) {
    this.error_ = err;
  } else {
    this.error_ = new vjs.MediaError(err);
  }

  // fire an error event on the player
  this.trigger('error');

  // add the vjs-error classname to the player
  this.addClass('vjs-error');

  // log the name of the error type and any message
  // ie8 just logs "[object object]" if you just log the error object
  vjs.log.error('(CODE:'+this.error_.code+' '+vjs.MediaError.errorTypes[this.error_.code]+')', this.error_.message, this.error_);

  return this;
};

vjs.Player.prototype.ended = function(){ return this.techGet('ended'); };
vjs.Player.prototype.seeking = function(){ return this.techGet('seeking'); };

// When the player is first initialized, trigger activity so components
// like the control bar show themselves if needed
vjs.Player.prototype.userActivity_ = true;
vjs.Player.prototype.reportUserActivity = function(event){
  this.userActivity_ = true;
};

vjs.Player.prototype.userActive_ = true;
vjs.Player.prototype.userActive = function(bool){
  if (bool !== undefined) {
    bool = !!bool;
    if (bool !== this.userActive_) {
      this.userActive_ = bool;
      if (bool) {
        // If the user was inactive and is now active we want to reset the
        // inactivity timer
        this.userActivity_ = true;
        this.removeClass('vjs-user-inactive');
        this.addClass('vjs-user-active');
        this.trigger('useractive');
      } else {
        // We're switching the state to inactive manually, so erase any other
        // activity
        this.userActivity_ = false;

        // Chrome/Safari/IE have bugs where when you change the cursor it can
        // trigger a mousemove event. This causes an issue when you're hiding
        // the cursor when the user is inactive, and a mousemove signals user
        // activity. Making it impossible to go into inactive mode. Specifically
        // this happens in fullscreen when we really need to hide the cursor.
        //
        // When this gets resolved in ALL browsers it can be removed
        // https://code.google.com/p/chromium/issues/detail?id=103041
        if(this.tech) {
          this.tech.one('mousemove', function(e){
            e.stopPropagation();
            e.preventDefault();
          });
        }

        this.removeClass('vjs-user-active');
        this.addClass('vjs-user-inactive');
        this.trigger('userinactive');
      }
    }
    return this;
  }
  return this.userActive_;
};

vjs.Player.prototype.listenForUserActivity = function(){
  var onActivity, onMouseMove, onMouseDown, mouseInProgress, onMouseUp,
      activityCheck, inactivityTimeout, lastMoveX, lastMoveY;

  onActivity = vjs.bind(this, this.reportUserActivity);

  onMouseMove = function(e) {
    // #1068 - Prevent mousemove spamming
    // Chrome Bug: https://code.google.com/p/chromium/issues/detail?id=366970
    if(e.screenX != lastMoveX || e.screenY != lastMoveY) {
      lastMoveX = e.screenX;
      lastMoveY = e.screenY;
      onActivity();
    }
  };

  onMouseDown = function() {
    onActivity();
    // For as long as the they are touching the device or have their mouse down,
    // we consider them active even if they're not moving their finger or mouse.
    // So we want to continue to update that they are active
    clearInterval(mouseInProgress);
    // Setting userActivity=true now and setting the interval to the same time
    // as the activityCheck interval (250) should ensure we never miss the
    // next activityCheck
    mouseInProgress = setInterval(onActivity, 250);
  };

  onMouseUp = function(event) {
    onActivity();
    // Stop the interval that maintains activity if the mouse/touch is down
    clearInterval(mouseInProgress);
  };

  // Any mouse movement will be considered user activity
  this.on('mousedown', onMouseDown);
  this.on('mousemove', onMouseMove);
  this.on('mouseup', onMouseUp);

  // Listen for keyboard navigation
  // Shouldn't need to use inProgress interval because of key repeat
  this.on('keydown', onActivity);
  this.on('keyup', onActivity);

  // Run an interval every 250 milliseconds instead of stuffing everything into
  // the mousemove/touchmove function itself, to prevent performance degradation.
  // `this.reportUserActivity` simply sets this.userActivity_ to true, which
  // then gets picked up by this loop
  // http://ejohn.org/blog/learning-from-twitter/
  activityCheck = setInterval(vjs.bind(this, function() {
    // Check to see if mouse/touch activity has happened
    if (this.userActivity_) {
      // Reset the activity tracker
      this.userActivity_ = false;

      // If the user state was inactive, set the state to active
      this.userActive(true);

      // Clear any existing inactivity timeout to start the timer over
      clearTimeout(inactivityTimeout);

      // In X seconds, if no more activity has occurred the user will be
      // considered inactive
      inactivityTimeout = setTimeout(vjs.bind(this, function() {
        // Protect against the case where the inactivityTimeout can trigger just
        // before the next user activity is picked up by the activityCheck loop
        // causing a flicker
        if (!this.userActivity_) {
          this.userActive(false);
        }
      }), 2000);
    }
  }), 250);

  // Clean up the intervals when we kill the player
  this.on('dispose', function(){
    clearInterval(activityCheck);
    clearTimeout(inactivityTimeout);
  });
};

vjs.Player.prototype.playbackRate = function(rate) {
  if (rate !== undefined) {
    this.techCall('setPlaybackRate', rate);
    return this;
  }

  if (this.tech && this.tech.features && this.tech.features['playbackRate']) {
    return this.techGet('playbackRate');
  } else {
    return 1.0;
  }

};

// Methods to add support for
// networkState: function(){ return this.techCall('networkState'); },
// readyState: function(){ return this.techCall('readyState'); },
// initialTime: function(){ return this.techCall('initialTime'); },
// startOffsetTime: function(){ return this.techCall('startOffsetTime'); },
// played: function(){ return this.techCall('played'); },
// seekable: function(){ return this.techCall('seekable'); },
// videoTracks: function(){ return this.techCall('videoTracks'); },
// audioTracks: function(){ return this.techCall('audioTracks'); },
// videoWidth: function(){ return this.techCall('videoWidth'); },
// videoHeight: function(){ return this.techCall('videoHeight'); },
// defaultPlaybackRate: function(){ return this.techCall('defaultPlaybackRate'); },
// mediaGroup: function(){ return this.techCall('mediaGroup'); },
// controller: function(){ return this.techCall('controller'); },
// defaultMuted: function(){ return this.techCall('defaultMuted'); }

// TODO
// currentSrcList: the array of sources including other formats and bitrates
// playList: array of source lists in order of playback
/**
 * Container of main controls
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @class
 * @constructor
 * @extends vjs.Component
 */
vjs.ControlBar = vjs.Component.extend();

vjs.ControlBar.prototype.options_ = {
  loadEvent: 'play',
  children: {
    'playToggle': {},
    'currentTimeDisplay': {},
    'timeDivider': {},
    'durationDisplay': {},
    'remainingTimeDisplay': {},
    'liveDisplay': {},
    'progressControl': {},
    'fullscreenToggle': {},
    'volumeControl': {},
    'muteToggle': {},
    // 'volumeMenuButton': {},
    'playbackRateMenuButton': {}
  }
};

vjs.ControlBar.prototype.createEl = function(){
  return vjs.createEl('div', {
    className: 'vjs-control-bar'
  });
};
/**
 * Displays the live indicator
 * TODO - Future make it click to snap to live
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.LiveDisplay = vjs.Component.extend({
  init: function(player, options){
    vjs.Component.call(this, player, options);
  }
});

vjs.LiveDisplay.prototype.createEl = function(){
  var el = vjs.Component.prototype.createEl.call(this, 'div', {
    className: 'vjs-live-controls vjs-control'
  });

  this.contentEl_ = vjs.createEl('div', {
    className: 'vjs-live-display',
    innerHTML: '<span class="vjs-control-text">Stream Type </span>LIVE',
    'aria-live': 'off'
  });

  el.appendChild(this.contentEl_);

  return el;
};
/**
 * Button to toggle between play and pause
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @class
 * @constructor
 */
vjs.PlayToggle = vjs.Button.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Button.call(this, player, options);

    player.on('play', vjs.bind(this, this.onPlay));
    player.on('pause', vjs.bind(this, this.onPause));
  }
});

vjs.PlayToggle.prototype.buttonText = 'Play';

vjs.PlayToggle.prototype.buildCSSClass = function(){
  return 'vjs-play-control ' + vjs.Button.prototype.buildCSSClass.call(this);
};

// OnClick - Toggle between play and pause
vjs.PlayToggle.prototype.onClick = function(){
  if (this.player_.paused()) {
    this.player_.play();
  } else {
    this.player_.pause();
  }
};

  // OnPlay - Add the vjs-playing class to the element so it can change appearance
vjs.PlayToggle.prototype.onPlay = function(){
  vjs.removeClass(this.el_, 'vjs-paused');
  vjs.addClass(this.el_, 'vjs-playing');
  this.el_.children[0].children[0].innerHTML = 'Pause'; // change the button text to "Pause"
};

  // OnPause - Add the vjs-paused class to the element so it can change appearance
vjs.PlayToggle.prototype.onPause = function(){
  vjs.removeClass(this.el_, 'vjs-playing');
  vjs.addClass(this.el_, 'vjs-paused');
  this.el_.children[0].children[0].innerHTML = 'Play'; // change the button text to "Play"
};
/**
 * Displays the current time
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.CurrentTimeDisplay = vjs.Component.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Component.call(this, player, options);

    player.on('timeupdate', vjs.bind(this, this.updateContent));
  }
});

vjs.CurrentTimeDisplay.prototype.createEl = function(){
  var el = vjs.Component.prototype.createEl.call(this, 'div', {
    className: 'vjs-current-time vjs-time-controls vjs-control'
  });

  this.contentEl_ = vjs.createEl('div', {
    className: 'vjs-current-time-display',
    innerHTML: '<span class="vjs-control-text">Current Time </span>' + '0:00', // label the current time for screen reader users
    'aria-live': 'off' // tell screen readers not to automatically read the time as it changes
  });

  el.appendChild(this.contentEl_);
  return el;
};

vjs.CurrentTimeDisplay.prototype.updateContent = function(){
  // Allows for smooth scrubbing, when player can't keep up.
  var time = (this.player_.scrubbing) ? this.player_.getCache().currentTime : this.player_.currentTime();
  this.contentEl_.innerHTML = '<span class="vjs-control-text">Current Time </span>' + vjs.formatTime(time, this.player_.duration());
};

/**
 * Displays the duration
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.DurationDisplay = vjs.Component.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Component.call(this, player, options);

    // this might need to be changed to 'durationchange' instead of 'timeupdate' eventually,
    // however the durationchange event fires before this.player_.duration() is set,
    // so the value cannot be written out using this method.
    // Once the order of durationchange and this.player_.duration() being set is figured out,
    // this can be updated.
    player.on('timeupdate', vjs.bind(this, this.updateContent));
  }
});

vjs.DurationDisplay.prototype.createEl = function(){
  var el = vjs.Component.prototype.createEl.call(this, 'div', {
    className: 'vjs-duration vjs-time-controls vjs-control'
  });

  this.contentEl_ = vjs.createEl('div', {
    className: 'vjs-duration-display',
    innerHTML: '<span class="vjs-control-text">Duration Time </span>' + '0:00', // label the duration time for screen reader users
    'aria-live': 'off' // tell screen readers not to automatically read the time as it changes
  });

  el.appendChild(this.contentEl_);
  return el;
};

vjs.DurationDisplay.prototype.updateContent = function(){
  var duration = this.player_.duration();
  if (duration) {
      this.contentEl_.innerHTML = '<span class="vjs-control-text">Duration Time </span>' + vjs.formatTime(duration); // label the duration time for screen reader users
  }
};

/**
 * The separator between the current time and duration
 *
 * Can be hidden if it's not needed in the design.
 *
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.TimeDivider = vjs.Component.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Component.call(this, player, options);
  }
});

vjs.TimeDivider.prototype.createEl = function(){
  return vjs.Component.prototype.createEl.call(this, 'div', {
    className: 'vjs-time-divider',
    innerHTML: '<div><span>/</span></div>'
  });
};

/**
 * Displays the time left in the video
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.RemainingTimeDisplay = vjs.Component.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Component.call(this, player, options);

    player.on('timeupdate', vjs.bind(this, this.updateContent));
  }
});

vjs.RemainingTimeDisplay.prototype.createEl = function(){
  var el = vjs.Component.prototype.createEl.call(this, 'div', {
    className: 'vjs-remaining-time vjs-time-controls vjs-control'
  });

  this.contentEl_ = vjs.createEl('div', {
    className: 'vjs-remaining-time-display',
    innerHTML: '<span class="vjs-control-text">Remaining Time </span>' + '-0:00', // label the remaining time for screen reader users
    'aria-live': 'off' // tell screen readers not to automatically read the time as it changes
  });

  el.appendChild(this.contentEl_);
  return el;
};

vjs.RemainingTimeDisplay.prototype.updateContent = function(){
  if (this.player_.duration()) {
    this.contentEl_.innerHTML = '<span class="vjs-control-text">Remaining Time </span>' + '-'+ vjs.formatTime(this.player_.remainingTime());
  }

  // Allows for smooth scrubbing, when player can't keep up.
  // var time = (this.player_.scrubbing) ? this.player_.getCache().currentTime : this.player_.currentTime();
  // this.contentEl_.innerHTML = vjs.formatTime(time, this.player_.duration());
};
/**
 * Toggle fullscreen video
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @class
 * @extends vjs.Button
 */
vjs.FullscreenToggle = vjs.Button.extend({
  /**
   * @constructor
   * @memberof vjs.FullscreenToggle
   * @instance
   */
  init: function(player, options){
    vjs.Button.call(this, player, options);
  }
});

vjs.FullscreenToggle.prototype.buttonText = 'Fullscreen';

vjs.FullscreenToggle.prototype.buildCSSClass = function(){
  return 'vjs-fullscreen-control ' + vjs.Button.prototype.buildCSSClass.call(this);
};

vjs.FullscreenToggle.prototype.onClick = function(){
  if (!this.player_.isFullscreen()) {
    this.player_.requestFullscreen();
    this.controlText_.innerHTML = 'Non-Fullscreen';
  } else {
    this.player_.exitFullscreen();
    this.controlText_.innerHTML = 'Fullscreen';
  }
};
/**
 * The Progress Control component contains the seek bar, load progress,
 * and play progress
 *
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.ProgressControl = vjs.Component.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Component.call(this, player, options);
  }
});

vjs.ProgressControl.prototype.options_ = {
  children: {
    'seekBar': {}
  }
};

vjs.ProgressControl.prototype.createEl = function(){
  return vjs.Component.prototype.createEl.call(this, 'div', {
    className: 'vjs-progress-control vjs-control'
  });
};

/**
 * Seek Bar and holder for the progress bars
 *
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.SeekBar = vjs.Slider.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Slider.call(this, player, options);
    player.on('timeupdate', vjs.bind(this, this.updateARIAAttributes));
    player.ready(vjs.bind(this, this.updateARIAAttributes));
  }
});

vjs.SeekBar.prototype.options_ = {
  children: {
    'loadProgressBar': {},
    'playProgressBar': {},
    'seekHandle': {}
  },
  'barName': 'playProgressBar',
  'handleName': 'seekHandle'
};

vjs.SeekBar.prototype.playerEvent = 'timeupdate';

vjs.SeekBar.prototype.createEl = function(){
  return vjs.Slider.prototype.createEl.call(this, 'div', {
    className: 'vjs-progress-holder',
    'aria-label': 'video progress bar'
  });
};

vjs.SeekBar.prototype.updateARIAAttributes = function(){
    // Allows for smooth scrubbing, when player can't keep up.
    var time = (this.player_.scrubbing) ? this.player_.getCache().currentTime : this.player_.currentTime();
    this.el_.setAttribute('aria-valuenow',vjs.round(this.getPercent()*100, 2)); // machine readable value of progress bar (percentage complete)
    this.el_.setAttribute('aria-valuetext',vjs.formatTime(time, this.player_.duration())); // human readable value of progress bar (time complete)
};

vjs.SeekBar.prototype.getPercent = function(){
  return this.player_.currentTime() / this.player_.duration();
};

vjs.SeekBar.prototype.onMouseDown = function(event){
  vjs.Slider.prototype.onMouseDown.call(this, event);

  this.player_.scrubbing = true;

  this.videoWasPlaying = !this.player_.paused();
  this.player_.pause();
};

vjs.SeekBar.prototype.onMouseMove = function(event){
  var newTime = this.calculateDistance(event) * this.player_.duration();

  // Don't let video end while scrubbing.
  if (newTime == this.player_.duration()) { newTime = newTime - 0.1; }

  // Set new time (tell player to seek to new time)
  this.player_.currentTime(newTime);
};

vjs.SeekBar.prototype.onMouseUp = function(event){
  vjs.Slider.prototype.onMouseUp.call(this, event);

  this.player_.scrubbing = false;
  if (this.videoWasPlaying) {
    this.player_.play();
  }
};

vjs.SeekBar.prototype.stepForward = function(){
  this.player_.currentTime(this.player_.currentTime() + 5); // more quickly fast forward for keyboard-only users
};

vjs.SeekBar.prototype.stepBack = function(){
  this.player_.currentTime(this.player_.currentTime() - 5); // more quickly rewind for keyboard-only users
};


/**
 * Shows load progress
 *
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.LoadProgressBar = vjs.Component.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Component.call(this, player, options);
    player.on('progress', vjs.bind(this, this.update));
  }
});

vjs.LoadProgressBar.prototype.createEl = function(){
  return vjs.Component.prototype.createEl.call(this, 'div', {
    className: 'vjs-load-progress',
    innerHTML: '<span class="vjs-control-text">Loaded: 0%</span>'
  });
};

vjs.LoadProgressBar.prototype.update = function(){
  if (this.el_.style) { this.el_.style.width = vjs.round(this.player_.bufferedPercent() * 100, 2) + '%'; }
};


/**
 * Shows play progress
 *
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.PlayProgressBar = vjs.Component.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Component.call(this, player, options);
  }
});

vjs.PlayProgressBar.prototype.createEl = function(){
  return vjs.Component.prototype.createEl.call(this, 'div', {
    className: 'vjs-play-progress',
    innerHTML: '<span class="vjs-control-text">Progress: 0%</span>'
  });
};

/**
 * The Seek Handle shows the current position of the playhead during playback,
 * and can be dragged to adjust the playhead.
 *
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.SeekHandle = vjs.SliderHandle.extend({
  init: function(player, options) {
    vjs.SliderHandle.call(this, player, options);
    player.on('timeupdate', vjs.bind(this, this.updateContent));
  }
});

/**
 * The default value for the handle content, which may be read by screen readers
 *
 * @type {String}
 * @private
 */
vjs.SeekHandle.prototype.defaultValue = '00:00';

/** @inheritDoc */
vjs.SeekHandle.prototype.createEl = function() {
  return vjs.SliderHandle.prototype.createEl.call(this, 'div', {
    className: 'vjs-seek-handle',
    'aria-live': 'off'
  });
};

vjs.SeekHandle.prototype.updateContent = function() {
  var time = (this.player_.scrubbing) ? this.player_.getCache().currentTime : this.player_.currentTime();
  this.el_.innerHTML = '<span class="vjs-control-text">' + vjs.formatTime(time, this.player_.duration()) + '</span>';
};
/**
 * The component for controlling the volume level
 *
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.VolumeControl = vjs.Component.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Component.call(this, player, options);

    // hide volume controls when they're not supported by the current tech
    if (player.tech && player.tech.features && player.tech.features['volumeControl'] === false) {
      this.addClass('vjs-hidden');
    }
    player.on('loadstart', vjs.bind(this, function(){
      if (player.tech.features && player.tech.features['volumeControl'] === false) {
        this.addClass('vjs-hidden');
      } else {
        this.removeClass('vjs-hidden');
      }
    }));
  }
});

vjs.VolumeControl.prototype.options_ = {
  children: {
    'volumeBar': {}
  }
};

vjs.VolumeControl.prototype.createEl = function(){
  return vjs.Component.prototype.createEl.call(this, 'div', {
    className: 'vjs-volume-control vjs-control'
  });
};

/**
 * The bar that contains the volume level and can be clicked on to adjust the level
 *
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.VolumeBar = vjs.Slider.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Slider.call(this, player, options);
    player.on('volumechange', vjs.bind(this, this.updateARIAAttributes));
    player.ready(vjs.bind(this, this.updateARIAAttributes));
  }
});

vjs.VolumeBar.prototype.updateARIAAttributes = function(){
  // Current value of volume bar as a percentage
  this.el_.setAttribute('aria-valuenow',vjs.round(this.player_.volume()*100, 2));
  this.el_.setAttribute('aria-valuetext',vjs.round(this.player_.volume()*100, 2)+'%');
};

vjs.VolumeBar.prototype.options_ = {
  children: {
    'volumeLevel': {},
    'volumeHandle': {}
  },
  'barName': 'volumeLevel',
  'handleName': 'volumeHandle'
};

vjs.VolumeBar.prototype.playerEvent = 'volumechange';

vjs.VolumeBar.prototype.createEl = function(){
  return vjs.Slider.prototype.createEl.call(this, 'div', {
    className: 'vjs-volume-bar',
    'aria-label': 'volume level'
  });
};

vjs.VolumeBar.prototype.onMouseMove = function(event) {
  if (this.player_.muted()) {
    this.player_.muted(false);
  }

  this.player_.volume(this.calculateDistance(event));
};

vjs.VolumeBar.prototype.getPercent = function(){
  if (this.player_.muted()) {
    return 0;
  } else {
    return this.player_.volume();
  }
};

vjs.VolumeBar.prototype.stepForward = function(){
  this.player_.volume(this.player_.volume() + 0.1);
};

vjs.VolumeBar.prototype.stepBack = function(){
  this.player_.volume(this.player_.volume() - 0.1);
};

/**
 * Shows volume level
 *
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.VolumeLevel = vjs.Component.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Component.call(this, player, options);
  }
});

vjs.VolumeLevel.prototype.createEl = function(){
  return vjs.Component.prototype.createEl.call(this, 'div', {
    className: 'vjs-volume-level',
    innerHTML: '<span class="vjs-control-text"></span>'
  });
};

/**
 * The volume handle can be dragged to adjust the volume level
 *
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
 vjs.VolumeHandle = vjs.SliderHandle.extend();

 vjs.VolumeHandle.prototype.defaultValue = '00:00';

 /** @inheritDoc */
 vjs.VolumeHandle.prototype.createEl = function(){
   return vjs.SliderHandle.prototype.createEl.call(this, 'div', {
     className: 'vjs-volume-handle'
   });
 };
/**
 * A button component for muting the audio
 *
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.MuteToggle = vjs.Button.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Button.call(this, player, options);

    player.on('volumechange', vjs.bind(this, this.update));

    // hide mute toggle if the current tech doesn't support volume control
    if (player.tech && player.tech.features && player.tech.features['volumeControl'] === false) {
      this.addClass('vjs-hidden');
    }
    player.on('loadstart', vjs.bind(this, function(){
      if (player.tech.features && player.tech.features['volumeControl'] === false) {
        this.addClass('vjs-hidden');
      } else {
        this.removeClass('vjs-hidden');
      }
    }));
  }
});

vjs.MuteToggle.prototype.createEl = function(){
  return vjs.Button.prototype.createEl.call(this, 'div', {
    className: 'vjs-mute-control vjs-control',
    innerHTML: '<div><span class="vjs-control-text">Mute</span></div>'
  });
};

vjs.MuteToggle.prototype.onClick = function(){
  this.player_.muted( this.player_.muted() ? false : true );
};

vjs.MuteToggle.prototype.update = function(){
  var vol = this.player_.volume(),
      level = 3;

  if (vol === 0 || this.player_.muted()) {
    level = 0;
  } else if (vol < 0.33) {
    level = 1;
  } else if (vol < 0.67) {
    level = 2;
  }

  // Don't rewrite the button text if the actual text doesn't change.
  // This causes unnecessary and confusing information for screen reader users.
  // This check is needed because this function gets called every time the volume level is changed.
  if(this.player_.muted()){
      if(this.el_.children[0].children[0].innerHTML!='Unmute'){
          this.el_.children[0].children[0].innerHTML = 'Unmute'; // change the button text to "Unmute"
      }
  } else {
      if(this.el_.children[0].children[0].innerHTML!='Mute'){
          this.el_.children[0].children[0].innerHTML = 'Mute'; // change the button text to "Mute"
      }
  }

  /* TODO improve muted icon classes */
  for (var i = 0; i < 4; i++) {
    vjs.removeClass(this.el_, 'vjs-vol-'+i);
  }
  vjs.addClass(this.el_, 'vjs-vol-'+level);
};
/**
 * Menu button with a popup for showing the volume slider.
 * @constructor
 */
vjs.VolumeMenuButton = vjs.MenuButton.extend({
  /** @constructor */
  init: function(player, options){
    vjs.MenuButton.call(this, player, options);

    // Same listeners as MuteToggle
    player.on('volumechange', vjs.bind(this, this.update));

    // hide mute toggle if the current tech doesn't support volume control
    if (player.tech && player.tech.features && player.tech.features.volumeControl === false) {
      this.addClass('vjs-hidden');
    }
    player.on('loadstart', vjs.bind(this, function(){
      if (player.tech.features && player.tech.features.volumeControl === false) {
        this.addClass('vjs-hidden');
      } else {
        this.removeClass('vjs-hidden');
      }
    }));
    this.addClass('vjs-menu-button');
  }
});

vjs.VolumeMenuButton.prototype.createMenu = function(){
  var menu = new vjs.Menu(this.player_, {
    contentElType: 'div'
  });
  var vc = new vjs.VolumeBar(this.player_, vjs.obj.merge({vertical: true}, this.options_.volumeBar));
  menu.addChild(vc);
  return menu;
};

vjs.VolumeMenuButton.prototype.onClick = function(){
  vjs.MuteToggle.prototype.onClick.call(this);
  vjs.MenuButton.prototype.onClick.call(this);
};

vjs.VolumeMenuButton.prototype.createEl = function(){
  return vjs.Button.prototype.createEl.call(this, 'div', {
    className: 'vjs-volume-menu-button vjs-menu-button vjs-control',
    innerHTML: '<div><span class="vjs-control-text">Mute</span></div>'
  });
};
vjs.VolumeMenuButton.prototype.update = vjs.MuteToggle.prototype.update;
/**
 * The component for controlling the playback rate
 *
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.PlaybackRateMenuButton = vjs.MenuButton.extend({
  /** @constructor */
  init: function(player, options){
    vjs.MenuButton.call(this, player, options);

    this.updateVisibility();
    this.updateLabel();

    player.on('loadstart', vjs.bind(this, this.updateVisibility));
    player.on('ratechange', vjs.bind(this, this.updateLabel));
  }
});

vjs.PlaybackRateMenuButton.prototype.createEl = function(){
  var el = vjs.Component.prototype.createEl.call(this, 'div', {
    className: 'vjs-playback-rate vjs-menu-button vjs-control',
    innerHTML: '<div class="vjs-control-content"><span class="vjs-control-text">Playback Rate</span></div>'
  });

  this.labelEl_ = vjs.createEl('div', {
    className: 'vjs-playback-rate-value',
    innerHTML: 1.0
  });

  el.appendChild(this.labelEl_);

  return el;
};

// Menu creation
vjs.PlaybackRateMenuButton.prototype.createMenu = function(){
  var menu = new vjs.Menu(this.player());
  var rates = this.player().options()['playbackRates'];

  if (rates) {
    for (var i = rates.length - 1; i >= 0; i--) {
      menu.addChild(
        new vjs.PlaybackRateMenuItem(this.player(), { 'rate': rates[i] + 'x'})
        );
    };
  }

  return menu;
};

vjs.PlaybackRateMenuButton.prototype.updateARIAAttributes = function(){
  // Current playback rate
  this.el().setAttribute('aria-valuenow', this.player().playbackRate());
};

vjs.PlaybackRateMenuButton.prototype.onClick = function(){
  // select next rate option
  var currentRate = this.player().playbackRate();
  var rates = this.player().options()['playbackRates'];
  // this will select first one if the last one currently selected
  var newRate = rates[0];
  for (var i = 0; i <rates.length ; i++) {
    if (rates[i] > currentRate) {
      newRate = rates[i];
      break;
    }
  };
  this.player().playbackRate(newRate);
};

vjs.PlaybackRateMenuButton.prototype.playbackRateSupported = function(){
  return this.player().tech
    && this.player().tech.features['playbackRate']
    && this.player().options()['playbackRates']
    && this.player().options()['playbackRates'].length > 0
  ;
};

/**
 * Hide playback rate controls when they're no playback rate options to select
 */
vjs.PlaybackRateMenuButton.prototype.updateVisibility = function(){
  if (this.playbackRateSupported()) {
    this.removeClass('vjs-hidden');
  } else {
    this.addClass('vjs-hidden');
  }
};

/**
 * Update button label when rate changed
 */
vjs.PlaybackRateMenuButton.prototype.updateLabel = function(){
  if (this.playbackRateSupported()) {
    this.labelEl_.innerHTML = this.player().playbackRate() + 'x';
  }
};

/**
 * The specific menu item type for selecting a playback rate
 *
 * @constructor
 */
vjs.PlaybackRateMenuItem = vjs.MenuItem.extend({
  contentElType: 'button',
  /** @constructor */
  init: function(player, options){
    var label = this.label = options['rate'];
    var rate = this.rate = parseFloat(label, 10);

    // Modify options for parent MenuItem class's init.
    options['label'] = label;
    options['selected'] = rate === 1;
    vjs.MenuItem.call(this, player, options);

    this.player().on('ratechange', vjs.bind(this, this.update));
  }
});

vjs.PlaybackRateMenuItem.prototype.onClick = function(){
  vjs.MenuItem.prototype.onClick.call(this);
  this.player().playbackRate(this.rate);
};

vjs.PlaybackRateMenuItem.prototype.update = function(){
  this.selected(this.player().playbackRate() == this.rate);
};
/* Poster Image
================================================================================ */
/**
 * The component that handles showing the poster image.
 *
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.PosterImage = vjs.Button.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Button.call(this, player, options);

    if (player.poster()) {
      this.src(player.poster());
    }

    if (!player.poster() || !player.controls()) {
      this.hide();
    }

    player.on('posterchange', vjs.bind(this, function(){
      this.src(player.poster());
    }));

    player.on('play', vjs.bind(this, this.hide));
  }
});

// use the test el to check for backgroundSize style support
var _backgroundSizeSupported = 'backgroundSize' in vjs.TEST_VID.style;

vjs.PosterImage.prototype.createEl = function(){
  var el = vjs.createEl('div', {
    className: 'vjs-poster',

    // Don't want poster to be tabbable.
    tabIndex: -1
  });

  if (!_backgroundSizeSupported) {
    // setup an img element as a fallback for IE8
    el.appendChild(vjs.createEl('img'));
  }

  return el;
};

vjs.PosterImage.prototype.src = function(url){
  var el = this.el();

  // getter
  // can't think of a need for a getter here
  // see #838 if on is needed in the future
  // still don't want a getter to set src as undefined
  if (url === undefined) {
    return;
  }

  // setter
  // To ensure the poster image resizes while maintaining its original aspect
  // ratio, use a div with `background-size` when available. For browsers that
  // do not support `background-size` (e.g. IE8), fall back on using a regular
  // img element.
  if (_backgroundSizeSupported) {
    el.style.backgroundImage = 'url("' + url + '")';
  } else {
    el.firstChild.src = url;
  }
};

vjs.PosterImage.prototype.onClick = function(){
  // Only accept clicks when controls are enabled
  if (this.player().controls()) {
    this.player_.play();
  }
};
/* Loading Spinner
================================================================================ */
/**
 * Loading spinner for waiting events
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @class
 * @constructor
 */
vjs.LoadingSpinner = vjs.Component.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Component.call(this, player, options);

    player.on('canplay', vjs.bind(this, this.hide));
    player.on('canplaythrough', vjs.bind(this, this.hide));
    player.on('playing', vjs.bind(this, this.hide));
    player.on('seeking', vjs.bind(this, this.show));

    // in some browsers seeking does not trigger the 'playing' event,
    // so we also need to trap 'seeked' if we are going to set a
    // 'seeking' event
    player.on('seeked', vjs.bind(this, this.hide));

    player.on('ended', vjs.bind(this, this.hide));

    // Not showing spinner on stalled any more. Browsers may stall and then not trigger any events that would remove the spinner.
    // Checked in Chrome 16 and Safari 5.1.2. http://help.videojs.com/discussions/problems/883-why-is-the-download-progress-showing
    // player.on('stalled', vjs.bind(this, this.show));

    player.on('waiting', vjs.bind(this, this.show));
  }
});

vjs.LoadingSpinner.prototype.createEl = function(){
  return vjs.Component.prototype.createEl.call(this, 'div', {
    className: 'vjs-loading-spinner'
  });
};
/* Big Play Button
================================================================================ */
/**
 * Initial play button. Shows before the video has played. The hiding of the
 * big play button is done via CSS and player states.
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @class
 * @constructor
 */
vjs.BigPlayButton = vjs.Button.extend();

vjs.BigPlayButton.prototype.createEl = function(){
  return vjs.Button.prototype.createEl.call(this, 'div', {
    className: 'vjs-big-play-button',
    innerHTML: '<span aria-hidden="true"></span>',
    'aria-label': 'play video'
  });
};

vjs.BigPlayButton.prototype.onClick = function(){
  this.player_.play();
};
/**
 * Display that an error has occurred making the video unplayable
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.ErrorDisplay = vjs.Component.extend({
  init: function(player, options){
    vjs.Component.call(this, player, options);

    this.update();
    player.on('error', vjs.bind(this, this.update));
  }
});

vjs.ErrorDisplay.prototype.createEl = function(){
  var el = vjs.Component.prototype.createEl.call(this, 'div', {
    className: 'vjs-error-display'
  });

  this.contentEl_ = vjs.createEl('div');
  el.appendChild(this.contentEl_);

  return el;
};

vjs.ErrorDisplay.prototype.update = function(){
  if (this.player().error()) {
    this.contentEl_.innerHTML = this.player().error().message;
  }
};
/**
 * @fileoverview Media Technology Controller - Base class for media playback
 * technology controllers like Flash and HTML5
 */

/**
 * Base class for media (HTML5 Video, Flash) controllers
 * @param {vjs.Player|Object} player  Central player instance
 * @param {Object=} options Options object
 * @constructor
 */
vjs.MediaTechController = vjs.Component.extend({
  /** @constructor */
  init: function(player, options, ready){
    options = options || {};
    // we don't want the tech to report user activity automatically.
    // This is done manually in addControlsListeners
    options.reportTouchActivity = false;
    vjs.Component.call(this, player, options, ready);

    this.initControlsListeners();
  }
});

/**
 * Set up click and touch listeners for the playback element
 * On desktops, a click on the video itself will toggle playback,
 * on a mobile device a click on the video toggles controls.
 * (toggling controls is done by toggling the user state between active and
 * inactive)
 *
 * A tap can signal that a user has become active, or has become inactive
 * e.g. a quick tap on an iPhone movie should reveal the controls. Another
 * quick tap should hide them again (signaling the user is in an inactive
 * viewing state)
 *
 * In addition to this, we still want the user to be considered inactive after
 * a few seconds of inactivity.
 *
 * Note: the only part of iOS interaction we can't mimic with this setup
 * is a touch and hold on the video element counting as activity in order to
 * keep the controls showing, but that shouldn't be an issue. A touch and hold on
 * any controls will still keep the user active
 */
vjs.MediaTechController.prototype.initControlsListeners = function(){
  var player, tech, activateControls, deactivateControls;

  tech = this;
  player = this.player();

  var activateControls = function(){
    if (player.controls() && !player.usingNativeControls()) {
      tech.addControlsListeners();
    }
  };

  deactivateControls = vjs.bind(tech, tech.removeControlsListeners);

  // Set up event listeners once the tech is ready and has an element to apply
  // listeners to
  this.ready(activateControls);
  player.on('controlsenabled', activateControls);
  player.on('controlsdisabled', deactivateControls);

  // if we're loading the playback object after it has started loading or playing the
  // video (often with autoplay on) then the loadstart event has already fired and we
  // need to fire it manually because many things rely on it.
  // Long term we might consider how we would do this for other events like 'canplay'
  // that may also have fired.
  this.ready(function(){
    if (this.networkState && this.networkState() > 0) {
      this.player().trigger('loadstart');
    }
  });
};

vjs.MediaTechController.prototype.addControlsListeners = function(){
  var userWasActive;

  // Some browsers (Chrome & IE) don't trigger a click on a flash swf, but do
  // trigger mousedown/up.
  // http://stackoverflow.com/questions/1444562/javascript-onclick-event-over-flash-object
  // Any touch events are set to block the mousedown event from happening
  this.on('mousedown', this.onClick);

  // If the controls were hidden we don't want that to change without a tap event
  // so we'll check if the controls were already showing before reporting user
  // activity
  this.on('touchstart', function(event) {
    // Stop the mouse events from also happening
    event.preventDefault();
    userWasActive = this.player_.userActive();
  });

  this.on('touchmove', function(event) {
    if (userWasActive){
      this.player().reportUserActivity();
    }
  });

  // Turn on component tap events
  this.emitTapEvents();

  // The tap listener needs to come after the touchend listener because the tap
  // listener cancels out any reportedUserActivity when setting userActive(false)
  this.on('tap', this.onTap);
};

/**
 * Remove the listeners used for click and tap controls. This is needed for
 * toggling to controls disabled, where a tap/touch should do nothing.
 */
vjs.MediaTechController.prototype.removeControlsListeners = function(){
  // We don't want to just use `this.off()` because there might be other needed
  // listeners added by techs that extend this.
  this.off('tap');
  this.off('touchstart');
  this.off('touchmove');
  this.off('touchleave');
  this.off('touchcancel');
  this.off('touchend');
  this.off('click');
  this.off('mousedown');
};

/**
 * Handle a click on the media element. By default will play/pause the media.
 */
vjs.MediaTechController.prototype.onClick = function(event){
  // We're using mousedown to detect clicks thanks to Flash, but mousedown
  // will also be triggered with right-clicks, so we need to prevent that
  if (event.button !== 0) return;

  // When controls are disabled a click should not toggle playback because
  // the click is considered a control
  if (this.player().controls()) {
    if (this.player().paused()) {
      this.player().play();
    } else {
      this.player().pause();
    }
  }
};

/**
 * Handle a tap on the media element. By default it will toggle the user
 * activity state, which hides and shows the controls.
 */
vjs.MediaTechController.prototype.onTap = function(){
  this.player().userActive(!this.player().userActive());
};

/**
 * Provide a default setPoster method for techs
 *
 * Poster support for techs should be optional, so we don't want techs to
 * break if they don't have a way to set a poster.
 */
vjs.MediaTechController.prototype.setPoster = function(){};

vjs.MediaTechController.prototype.features = {
  'volumeControl': true,

  // Resizing plugins using request fullscreen reloads the plugin
  'fullscreenResize': false,
  'playbackRate': false,

  // Optional events that we can manually mimic with timers
  // currently not triggered by video-js-swf
  'progressEvents': false,
  'timeupdateEvents': false
};

vjs.media = {};
/**
 * @fileoverview HTML5 Media Controller - Wrapper for HTML5 Media API
 */

/**
 * HTML5 Media Controller - Wrapper for HTML5 Media API
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @param {Function=} ready
 * @constructor
 */
vjs.Html5 = vjs.MediaTechController.extend({
  /** @constructor */
  init: function(player, options, ready){
    // volume cannot be changed from 1 on iOS
    this.features['volumeControl'] = vjs.Html5.canControlVolume();

    // just in case; or is it excessively...
    this.features['playbackRate'] = vjs.Html5.canControlPlaybackRate();

    // In iOS, if you move a video element in the DOM, it breaks video playback.
    this.features['movingMediaElementInDOM'] = !vjs.IS_IOS;

    // HTML video is able to automatically resize when going to fullscreen
    this.features['fullscreenResize'] = true;

    vjs.MediaTechController.call(this, player, options, ready);
    this.setupTriggers();

    var source = options['source'];

    // set the source if one was provided
    if (source && this.el_.currentSrc !== source.src) {
      this.el_.src = source.src;
    }

    // Determine if native controls should be used
    // Our goal should be to get the custom controls on mobile solid everywhere
    // so we can remove this all together. Right now this will block custom
    // controls on touch enabled laptops like the Chrome Pixel
    if (vjs.TOUCH_ENABLED && player.options()['nativeControlsForTouch'] !== false) {
      this.useNativeControls();
    }

    // Chrome and Safari both have issues with autoplay.
    // In Safari (5.1.1), when we move the video element into the container div, autoplay doesn't work.
    // In Chrome (15), if you have autoplay + a poster + no controls, the video gets hidden (but audio plays)
    // This fixes both issues. Need to wait for API, so it updates displays correctly
    player.ready(function(){
      if (this.tag && this.options_['autoplay'] && this.paused()) {
        delete this.tag['poster']; // Chrome Fix. Fixed in Chrome v16.
        this.play();
      }
    });

    this.triggerReady();
  }
});

vjs.Html5.prototype.dispose = function(){
  vjs.MediaTechController.prototype.dispose.call(this);
};

vjs.Html5.prototype.createEl = function(){
  var player = this.player_,
      // If possible, reuse original tag for HTML5 playback technology element
      el = player.tag,
      newEl,
      clone;

  // Check if this browser supports moving the element into the box.
  // On the iPhone video will break if you move the element,
  // So we have to create a brand new element.
  if (!el || this.features['movingMediaElementInDOM'] === false) {

    // If the original tag is still there, clone and remove it.
    if (el) {
      clone = el.cloneNode(false);
      vjs.Html5.disposeMediaElement(el);
      el = clone;
      player.tag = null;
    } else {
      el = vjs.createEl('video', {
        id:player.id() + '_html5_api',
        className:'vjs-tech'
      });
    }
    // associate the player with the new tag
    el['player'] = player;

    vjs.insertFirst(el, player.el());
  }

  // Update specific tag settings, in case they were overridden
  var attrs = ['autoplay','preload','loop','muted'];
  for (var i = attrs.length - 1; i >= 0; i--) {
    var attr = attrs[i];
    if (player.options_[attr] !== null) {
      el[attr] = player.options_[attr];
    }
  }

  return el;
  // jenniisawesome = true;
};

// Make video events trigger player events
// May seem verbose here, but makes other APIs possible.
// Triggers removed using this.off when disposed
vjs.Html5.prototype.setupTriggers = function(){
  for (var i = vjs.Html5.Events.length - 1; i >= 0; i--) {
    vjs.on(this.el_, vjs.Html5.Events[i], vjs.bind(this, this.eventHandler));
  }
};

vjs.Html5.prototype.eventHandler = function(evt){
  // In the case of an error, set the error prop on the player
  // and let the player handle triggering the event.
  if (evt.type == 'error') {
    this.player().error(this.error().code);

  // in some cases we pass the event directly to the player
  } else {
    // No need for media events to bubble up.
    evt.bubbles = false;

    this.player().trigger(evt);
  }
};

vjs.Html5.prototype.useNativeControls = function(){
  var tech, player, controlsOn, controlsOff, cleanUp;

  tech = this;
  player = this.player();

  // If the player controls are enabled turn on the native controls
  tech.setControls(player.controls());

  // Update the native controls when player controls state is updated
  controlsOn = function(){
    tech.setControls(true);
  };
  controlsOff = function(){
    tech.setControls(false);
  };
  player.on('controlsenabled', controlsOn);
  player.on('controlsdisabled', controlsOff);

  // Clean up when not using native controls anymore
  cleanUp = function(){
    player.off('controlsenabled', controlsOn);
    player.off('controlsdisabled', controlsOff);
  };
  tech.on('dispose', cleanUp);
  player.on('usingcustomcontrols', cleanUp);

  // Update the state of the player to using native controls
  player.usingNativeControls(true);
};


vjs.Html5.prototype.play = function(){ this.el_.play(); };
vjs.Html5.prototype.pause = function(){ this.el_.pause(); };
vjs.Html5.prototype.paused = function(){ return this.el_.paused; };

vjs.Html5.prototype.currentTime = function(){ return this.el_.currentTime; };
vjs.Html5.prototype.setCurrentTime = function(seconds){
  try {
    this.el_.currentTime = seconds;
  } catch(e) {
    vjs.log(e, 'Video is not ready. (Video.js)');
    // this.warning(VideoJS.warnings.videoNotReady);
  }
};

vjs.Html5.prototype.duration = function(){ return this.el_.duration || 0; };
vjs.Html5.prototype.buffered = function(){ return this.el_.buffered; };

vjs.Html5.prototype.volume = function(){ return this.el_.volume; };
vjs.Html5.prototype.setVolume = function(percentAsDecimal){ this.el_.volume = percentAsDecimal; };
vjs.Html5.prototype.muted = function(){ return this.el_.muted; };
vjs.Html5.prototype.setMuted = function(muted){ this.el_.muted = muted; };

vjs.Html5.prototype.width = function(){ return this.el_.offsetWidth; };
vjs.Html5.prototype.height = function(){ return this.el_.offsetHeight; };

vjs.Html5.prototype.supportsFullScreen = function(){
  if (typeof this.el_.webkitEnterFullScreen == 'function') {

    // Seems to be broken in Chromium/Chrome && Safari in Leopard
    if (/Android/.test(vjs.USER_AGENT) || !/Chrome|Mac OS X 10.5/.test(vjs.USER_AGENT)) {
      return true;
    }
  }
  return false;
};

vjs.Html5.prototype.enterFullScreen = function(){
  var video = this.el_;
  if (video.paused && video.networkState <= video.HAVE_METADATA) {
    // attempt to prime the video element for programmatic access
    // this isn't necessary on the desktop but shouldn't hurt
    this.el_.play();

    // playing and pausing synchronously during the transition to fullscreen
    // can get iOS ~6.1 devices into a play/pause loop
    setTimeout(function(){
      video.pause();
      video.webkitEnterFullScreen();
    }, 0);
  } else {
    video.webkitEnterFullScreen();
  }
};
vjs.Html5.prototype.exitFullScreen = function(){
  this.el_.webkitExitFullScreen();
};
vjs.Html5.prototype.src = function(src){ this.el_.src = src; };
vjs.Html5.prototype.load = function(){ this.el_.load(); };
vjs.Html5.prototype.currentSrc = function(){ return this.el_.currentSrc; };

vjs.Html5.prototype.poster = function(){ return this.el_.poster; };
vjs.Html5.prototype.setPoster = function(val){ this.el_.poster = val; };

vjs.Html5.prototype.preload = function(){ return this.el_.preload; };
vjs.Html5.prototype.setPreload = function(val){ this.el_.preload = val; };

vjs.Html5.prototype.autoplay = function(){ return this.el_.autoplay; };
vjs.Html5.prototype.setAutoplay = function(val){ this.el_.autoplay = val; };

vjs.Html5.prototype.controls = function(){ return this.el_.controls; };
vjs.Html5.prototype.setControls = function(val){ this.el_.controls = !!val; };

vjs.Html5.prototype.loop = function(){ return this.el_.loop; };
vjs.Html5.prototype.setLoop = function(val){ this.el_.loop = val; };

vjs.Html5.prototype.error = function(){ return this.el_.error; };
vjs.Html5.prototype.seeking = function(){ return this.el_.seeking; };
vjs.Html5.prototype.ended = function(){ return this.el_.ended; };
vjs.Html5.prototype.defaultMuted = function(){ return this.el_.defaultMuted; };

vjs.Html5.prototype.playbackRate = function(){ return this.el_.playbackRate; };
vjs.Html5.prototype.setPlaybackRate = function(val){ this.el_.playbackRate = val; };

vjs.Html5.prototype.networkState = function(){ return this.el_.networkState; };

/* HTML5 Support Testing ---------------------------------------------------- */

vjs.Html5.isSupported = function(){
  // ie9 with no Media Player is a LIAR! (#984)
  try {
    vjs.TEST_VID['volume'] = 0.5;
  } catch (e) {
    return false;
  }

  return !!vjs.TEST_VID.canPlayType;
};

vjs.Html5.canPlaySource = function(srcObj){
  // IE9 on Windows 7 without MediaPlayer throws an error here
  // https://github.com/videojs/video.js/issues/519
  try {
    return !!vjs.TEST_VID.canPlayType(srcObj.type);
  } catch(e) {
    return '';
  }
  // TODO: Check Type
  // If no Type, check ext
  // Check Media Type
};

vjs.Html5.canControlVolume = function(){
  var volume =  vjs.TEST_VID.volume;
  vjs.TEST_VID.volume = (volume / 2) + 0.1;
  return volume !== vjs.TEST_VID.volume;
};

vjs.Html5.canControlPlaybackRate = function(){
  var playbackRate =  vjs.TEST_VID.playbackRate;
  vjs.TEST_VID.playbackRate = (playbackRate / 2) + 0.1;
  return playbackRate !== vjs.TEST_VID.playbackRate;
};

// HTML5 Feature detection and Device Fixes --------------------------------- //
(function() {
  var canPlayType,
      mpegurlRE = /^application\/(?:x-|vnd\.apple\.)mpegurl/i,
      mp4RE = /^video\/mp4/i;

  vjs.Html5.patchCanPlayType = function() {
    // Android 4.0 and above can play HLS to some extent but it reports being unable to do so
    if (vjs.ANDROID_VERSION >= 4.0) {
      if (!canPlayType) {
        canPlayType = vjs.TEST_VID.constructor.prototype.canPlayType;
      }

      vjs.TEST_VID.constructor.prototype.canPlayType = function(type) {
        if (type && mpegurlRE.test(type)) {
          return 'maybe';
        }
        return canPlayType.call(this, type);
      };
    }

    // Override Android 2.2 and less canPlayType method which is broken
    if (vjs.IS_OLD_ANDROID) {
      if (!canPlayType) {
        canPlayType = vjs.TEST_VID.constructor.prototype.canPlayType;
      }

      vjs.TEST_VID.constructor.prototype.canPlayType = function(type){
        if (type && mp4RE.test(type)) {
          return 'maybe';
        }
        return canPlayType.call(this, type);
      };
    }
  };

  vjs.Html5.unpatchCanPlayType = function() {
    var r = vjs.TEST_VID.constructor.prototype.canPlayType;
    vjs.TEST_VID.constructor.prototype.canPlayType = canPlayType;
    canPlayType = null;
    return r;
  };

  // by default, patch the video element
  vjs.Html5.patchCanPlayType();
})();

// List of all HTML5 events (various uses).
vjs.Html5.Events = 'loadstart,suspend,abort,error,emptied,stalled,loadedmetadata,loadeddata,canplay,canplaythrough,playing,waiting,seeking,seeked,ended,durationchange,timeupdate,progress,play,pause,ratechange,volumechange'.split(',');

vjs.Html5.disposeMediaElement = function(el){
  if (!el) { return; }

  el['player'] = null;

  if (el.parentNode) {
    el.parentNode.removeChild(el);
  }

  // remove any child track or source nodes to prevent their loading
  while(el.hasChildNodes()) {
    el.removeChild(el.firstChild);
  }

  // remove any src reference. not setting `src=''` because that causes a warning
  // in firefox
  el.removeAttribute('src');

  // force the media element to update its loading state by calling load()
  // however IE on Windows 7N has a bug that throws an error so need a try/catch (#793)
  if (typeof el.load === 'function') {
    // wrapping in an iife so it's not deoptimized (#1060#discussion_r10324473)
    (function() {
      try {
        el.load();
      } catch (e) {
        // not supported
      }
    })();
  }
};
/**
 * @fileoverview VideoJS-SWF - Custom Flash Player with HTML5-ish API
 * https://github.com/zencoder/video-js-swf
 * Not using setupTriggers. Using global onEvent func to distribute events
 */

/**
 * Flash Media Controller - Wrapper for fallback SWF API
 *
 * @param {vjs.Player} player
 * @param {Object=} options
 * @param {Function=} ready
 * @constructor
 */
vjs.Flash = vjs.MediaTechController.extend({
  /** @constructor */
  init: function(player, options, ready){
    vjs.MediaTechController.call(this, player, options, ready);

    var source = options['source'],

        // Which element to embed in
        parentEl = options['parentEl'],

        // Create a temporary element to be replaced by swf object
        placeHolder = this.el_ = vjs.createEl('div', { id: player.id() + '_temp_flash' }),

        // Generate ID for swf object
        objId = player.id()+'_flash_api',

        // Store player options in local var for optimization
        // TODO: switch to using player methods instead of options
        // e.g. player.autoplay();
        playerOptions = player.options_,

        // Merge default flashvars with ones passed in to init
        flashVars = vjs.obj.merge({

          // SWF Callback Functions
          'readyFunction': 'videojs.Flash.onReady',
          'eventProxyFunction': 'videojs.Flash.onEvent',
          'errorEventProxyFunction': 'videojs.Flash.onError',

          // Player Settings
          'autoplay': playerOptions.autoplay,
          'preload': playerOptions.preload,
          'loop': playerOptions.loop,
          'muted': playerOptions.muted

        }, options['flashVars']),

        // Merge default parames with ones passed in
        params = vjs.obj.merge({
          'wmode': 'opaque', // Opaque is needed to overlay controls, but can affect playback performance
          'bgcolor': '#000000' // Using bgcolor prevents a white flash when the object is loading
        }, options['params']),

        // Merge default attributes with ones passed in
        attributes = vjs.obj.merge({
          'id': objId,
          'name': objId, // Both ID and Name needed or swf to identifty itself
          'class': 'vjs-tech'
        }, options['attributes']),

        lastSeekTarget
    ;

    // If source was supplied pass as a flash var.
    if (source) {
      if (source.type && vjs.Flash.isStreamingType(source.type)) {
        var parts = vjs.Flash.streamToParts(source.src);
        flashVars['rtmpConnection'] = encodeURIComponent(parts.connection);
        flashVars['rtmpStream'] = encodeURIComponent(parts.stream);
      }
      else {
        flashVars['src'] = encodeURIComponent(vjs.getAbsoluteURL(source.src));
      }
    }

    this['setCurrentTime'] = function(time){
      lastSeekTarget = time;
      this.el_.vjs_setProperty('currentTime', time);
    };
    this['currentTime'] = function(time){
      // when seeking make the reported time keep up with the requested time
      // by reading the time we're seeking to
      if (this.seeking()) {
        return lastSeekTarget;
      }
      return this.el_.vjs_getProperty('currentTime');
    };

    // Add placeholder to player div
    vjs.insertFirst(placeHolder, parentEl);

    // Having issues with Flash reloading on certain page actions (hide/resize/fullscreen) in certain browsers
    // This allows resetting the playhead when we catch the reload
    if (options['startTime']) {
      this.ready(function(){
        this.load();
        this.play();
        this.currentTime(options['startTime']);
      });
    }

    // firefox doesn't bubble mousemove events to parent. videojs/video-js-swf#37
    // bugzilla bug: https://bugzilla.mozilla.org/show_bug.cgi?id=836786
    if (vjs.IS_FIREFOX) {
      this.ready(function(){
        vjs.on(this.el(), 'mousemove', vjs.bind(this, function(){
          // since it's a custom event, don't bubble higher than the player
          this.player().trigger({ 'type':'mousemove', 'bubbles': false });
        }));
      });
    }

    // Flash iFrame Mode
    // In web browsers there are multiple instances where changing the parent element or visibility of a plugin causes the plugin to reload.
    // - Firefox just about always. https://bugzilla.mozilla.org/show_bug.cgi?id=90268 (might be fixed by version 13)
    // - Webkit when hiding the plugin
    // - Webkit and Firefox when using requestFullScreen on a parent element
    // Loading the flash plugin into a dynamically generated iFrame gets around most of these issues.
    // Issues that remain include hiding the element and requestFullScreen in Firefox specifically

    // There's on particularly annoying issue with this method which is that Firefox throws a security error on an offsite Flash object loaded into a dynamically created iFrame.
    // Even though the iframe was inserted into a page on the web, Firefox + Flash considers it a local app trying to access an internet file.
    // I tried mulitple ways of setting the iframe src attribute but couldn't find a src that worked well. Tried a real/fake source, in/out of domain.
    // Also tried a method from stackoverflow that caused a security error in all browsers. http://stackoverflow.com/questions/2486901/how-to-set-document-domain-for-a-dynamically-generated-iframe
    // In the end the solution I found to work was setting the iframe window.location.href right before doing a document.write of the Flash object.
    // The only downside of this it seems to trigger another http request to the original page (no matter what's put in the href). Not sure why that is.

    // NOTE (2012-01-29): Cannot get Firefox to load the remote hosted SWF into a dynamically created iFrame
    // Firefox 9 throws a security error, unleess you call location.href right before doc.write.
    //    Not sure why that even works, but it causes the browser to look like it's continuously trying to load the page.
    // Firefox 3.6 keeps calling the iframe onload function anytime I write to it, causing an endless loop.

    if (options['iFrameMode'] === true && !vjs.IS_FIREFOX) {

      // Create iFrame with vjs-tech class so it's 100% width/height
      var iFrm = vjs.createEl('iframe', {
        'id': objId + '_iframe',
        'name': objId + '_iframe',
        'className': 'vjs-tech',
        'scrolling': 'no',
        'marginWidth': 0,
        'marginHeight': 0,
        'frameBorder': 0
      });

      // Update ready function names in flash vars for iframe window
      flashVars['readyFunction'] = 'ready';
      flashVars['eventProxyFunction'] = 'events';
      flashVars['errorEventProxyFunction'] = 'errors';

      // Tried multiple methods to get this to work in all browsers

      // Tried embedding the flash object in the page first, and then adding a place holder to the iframe, then replacing the placeholder with the page object.
      // The goal here was to try to load the swf URL in the parent page first and hope that got around the firefox security error
      // var newObj = vjs.Flash.embed(options['swf'], placeHolder, flashVars, params, attributes);
      // (in onload)
      //  var temp = vjs.createEl('a', { id:'asdf', innerHTML: 'asdf' } );
      //  iDoc.body.appendChild(temp);

      // Tried embedding the flash object through javascript in the iframe source.
      // This works in webkit but still triggers the firefox security error
      // iFrm.src = 'javascript: document.write('"+vjs.Flash.getEmbedCode(options['swf'], flashVars, params, attributes)+"');";

      // Tried an actual local iframe just to make sure that works, but it kills the easiness of the CDN version if you require the user to host an iframe
      // We should add an option to host the iframe locally though, because it could help a lot of issues.
      // iFrm.src = "iframe.html";

      // Wait until iFrame has loaded to write into it.
      vjs.on(iFrm, 'load', vjs.bind(this, function(){

        var iDoc,
            iWin = iFrm.contentWindow;

        // The one working method I found was to use the iframe's document.write() to create the swf object
        // This got around the security issue in all browsers except firefox.
        // I did find a hack where if I call the iframe's window.location.href='', it would get around the security error
        // However, the main page would look like it was loading indefinitely (URL bar loading spinner would never stop)
        // Plus Firefox 3.6 didn't work no matter what I tried.
        // if (vjs.USER_AGENT.match('Firefox')) {
        //   iWin.location.href = '';
        // }

        // Get the iFrame's document depending on what the browser supports
        iDoc = iFrm.contentDocument ? iFrm.contentDocument : iFrm.contentWindow.document;

        // Tried ensuring both document domains were the same, but they already were, so that wasn't the issue.
        // Even tried adding /. that was mentioned in a browser security writeup
        // document.domain = document.domain+'/.';
        // iDoc.domain = document.domain+'/.';

        // Tried adding the object to the iframe doc's innerHTML. Security error in all browsers.
        // iDoc.body.innerHTML = swfObjectHTML;

        // Tried appending the object to the iframe doc's body. Security error in all browsers.
        // iDoc.body.appendChild(swfObject);

        // Using document.write actually got around the security error that browsers were throwing.
        // Again, it's a dynamically generated (same domain) iframe, loading an external Flash swf.
        // Not sure why that's a security issue, but apparently it is.
        iDoc.write(vjs.Flash.getEmbedCode(options['swf'], flashVars, params, attributes));

        // Setting variables on the window needs to come after the doc write because otherwise they can get reset in some browsers
        // So far no issues with swf ready event being called before it's set on the window.
        iWin['player'] = this.player_;

        // Create swf ready function for iFrame window
        iWin['ready'] = vjs.bind(this.player_, function(currSwf){
          var el = iDoc.getElementById(currSwf),
              player = this,
              tech = player.tech;

          // Update reference to playback technology element
          tech.el_ = el;

          // Make sure swf is actually ready. Sometimes the API isn't actually yet.
          vjs.Flash.checkReady(tech);
        });

        // Create event listener for all swf events
        iWin['events'] = vjs.bind(this.player_, function(swfID, eventName){
          var player = this;
          if (player && player.techName === 'flash') {
            player.trigger(eventName);
          }
        });

        // Create error listener for all swf errors
        iWin['errors'] = vjs.bind(this.player_, function(swfID, eventName){
          vjs.log('Flash Error', eventName);
        });

      }));

      // Replace placeholder with iFrame (it will load now)
      placeHolder.parentNode.replaceChild(iFrm, placeHolder);

    // If not using iFrame mode, embed as normal object
    } else {
      vjs.Flash.embed(options['swf'], placeHolder, flashVars, params, attributes);
    }
  }
});

vjs.Flash.prototype.dispose = function(){
  vjs.MediaTechController.prototype.dispose.call(this);
};

vjs.Flash.prototype.play = function(){
  this.el_.vjs_play();
};

vjs.Flash.prototype.pause = function(){
  this.el_.vjs_pause();
};

vjs.Flash.prototype.src = function(src){
  if (src === undefined) {
    return this.currentSrc();
  }

  if (vjs.Flash.isStreamingSrc(src)) {
    src = vjs.Flash.streamToParts(src);
    this.setRtmpConnection(src.connection);
    this.setRtmpStream(src.stream);
  } else {
    // Make sure source URL is abosolute.
    src = vjs.getAbsoluteURL(src);
    this.el_.vjs_src(src);
  }

  // Currently the SWF doesn't autoplay if you load a source later.
  // e.g. Load player w/ no source, wait 2s, set src.
  if (this.player_.autoplay()) {
    var tech = this;
    setTimeout(function(){ tech.play(); }, 0);
  }
};

vjs.Flash.prototype.currentSrc = function(){
  var src = this.el_.vjs_getProperty('currentSrc');
  // no src, check and see if RTMP
  if (src == null) {
    var connection = this['rtmpConnection'](),
        stream = this['rtmpStream']();

    if (connection && stream) {
      src = vjs.Flash.streamFromParts(connection, stream);
    }
  }
  return src;
};

vjs.Flash.prototype.load = function(){
  this.el_.vjs_load();
};

vjs.Flash.prototype.poster = function(){
  this.el_.vjs_getProperty('poster');
};
vjs.Flash.prototype.setPoster = function(){
  // poster images are not handled by the Flash tech so make this a no-op
};

vjs.Flash.prototype.buffered = function(){
  return vjs.createTimeRange(0, this.el_.vjs_getProperty('buffered'));
};

vjs.Flash.prototype.supportsFullScreen = function(){
  return false; // Flash does not allow fullscreen through javascript
};

vjs.Flash.prototype.enterFullScreen = function(){
  return false;
};

// Create setters and getters for attributes
var api = vjs.Flash.prototype,
    readWrite = 'rtmpConnection,rtmpStream,preload,defaultPlaybackRate,playbackRate,autoplay,loop,mediaGroup,controller,controls,volume,muted,defaultMuted'.split(','),
    readOnly = 'error,networkState,readyState,seeking,initialTime,duration,startOffsetTime,paused,played,seekable,ended,videoTracks,audioTracks,videoWidth,videoHeight,textTracks'.split(',');
    // Overridden: buffered, currentTime, currentSrc

/**
 * @this {*}
 * @private
 */
var createSetter = function(attr){
  var attrUpper = attr.charAt(0).toUpperCase() + attr.slice(1);
  api['set'+attrUpper] = function(val){ return this.el_.vjs_setProperty(attr, val); };
};

/**
 * @this {*}
 * @private
 */
var createGetter = function(attr){
  api[attr] = function(){ return this.el_.vjs_getProperty(attr); };
};

(function(){
  var i;
  // Create getter and setters for all read/write attributes
  for (i = 0; i < readWrite.length; i++) {
    createGetter(readWrite[i]);
    createSetter(readWrite[i]);
  }

  // Create getters for read-only attributes
  for (i = 0; i < readOnly.length; i++) {
    createGetter(readOnly[i]);
  }
})();

/* Flash Support Testing -------------------------------------------------------- */

vjs.Flash.isSupported = function(){
  return vjs.Flash.version()[0] >= 10;
  // return swfobject.hasFlashPlayerVersion('10');
};

vjs.Flash.canPlaySource = function(srcObj){
  var type;

  if (!srcObj.type) {
    return '';
  }

  type = srcObj.type.replace(/;.*/,'').toLowerCase();
  if (type in vjs.Flash.formats || type in vjs.Flash.streamingFormats) {
    return 'maybe';
  }
};

vjs.Flash.formats = {
  'video/flv': 'FLV',
  'video/x-flv': 'FLV',
  'video/mp4': 'MP4',
  'video/m4v': 'MP4'
};

vjs.Flash.streamingFormats = {
  'rtmp/mp4': 'MP4',
  'rtmp/flv': 'FLV'
};

vjs.Flash['onReady'] = function(currSwf){
  var el = vjs.el(currSwf);

  // Get player from box
  // On firefox reloads, el might already have a player
  var player = el['player'] || el.parentNode['player'],
      tech = player.tech;

  // Reference player on tech element
  el['player'] = player;

  // Update reference to playback technology element
  tech.el_ = el;

  vjs.Flash.checkReady(tech);
};

// The SWF isn't alwasy ready when it says it is. Sometimes the API functions still need to be added to the object.
// If it's not ready, we set a timeout to check again shortly.
vjs.Flash.checkReady = function(tech){

  // Check if API property exists
  if (tech.el().vjs_getProperty) {

    // If so, tell tech it's ready
    tech.triggerReady();

  // Otherwise wait longer.
  } else {

    setTimeout(function(){
      vjs.Flash.checkReady(tech);
    }, 50);

  }
};

// Trigger events from the swf on the player
vjs.Flash['onEvent'] = function(swfID, eventName){
  var player = vjs.el(swfID)['player'];
  player.trigger(eventName);
};

// Log errors from the swf
vjs.Flash['onError'] = function(swfID, err){
  var player = vjs.el(swfID)['player'];
  var msg = 'FLASH: '+err;

  if (err == 'srcnotfound') {
    player.error({ code: 4, message: msg });

  // errors we haven't categorized into the media errors
  } else {
    player.error(msg);
  }
};

// Flash Version Check
vjs.Flash.version = function(){
  var version = '0,0,0';

  // IE
  try {
    version = new window.ActiveXObject('ShockwaveFlash.ShockwaveFlash').GetVariable('$version').replace(/\D+/g, ',').match(/^,?(.+),?$/)[1];

  // other browsers
  } catch(e) {
    try {
      if (navigator.mimeTypes['application/x-shockwave-flash'].enabledPlugin){
        version = (navigator.plugins['Shockwave Flash 2.0'] || navigator.plugins['Shockwave Flash']).description.replace(/\D+/g, ',').match(/^,?(.+),?$/)[1];
      }
    } catch(err) {}
  }
  return version.split(',');
};

// Flash embedding method. Only used in non-iframe mode
vjs.Flash.embed = function(swf, placeHolder, flashVars, params, attributes){
  var code = vjs.Flash.getEmbedCode(swf, flashVars, params, attributes),

      // Get element by embedding code and retrieving created element
      obj = vjs.createEl('div', { innerHTML: code }).childNodes[0],

      par = placeHolder.parentNode
  ;

  placeHolder.parentNode.replaceChild(obj, placeHolder);

  // IE6 seems to have an issue where it won't initialize the swf object after injecting it.
  // This is a dumb fix
  var newObj = par.childNodes[0];
  setTimeout(function(){
    newObj.style.display = 'block';
  }, 1000);

  return obj;

};

vjs.Flash.getEmbedCode = function(swf, flashVars, params, attributes){

  var objTag = '<object type="application/x-shockwave-flash"',
      flashVarsString = '',
      paramsString = '',
      attrsString = '';

  // Convert flash vars to string
  if (flashVars) {
    vjs.obj.each(flashVars, function(key, val){
      flashVarsString += (key + '=' + val + '&amp;');
    });
  }

  // Add swf, flashVars, and other default params
  params = vjs.obj.merge({
    'movie': swf,
    'flashvars': flashVarsString,
    'allowScriptAccess': 'always', // Required to talk to swf
    'allowNetworking': 'all' // All should be default, but having security issues.
  }, params);

  // Create param tags string
  vjs.obj.each(params, function(key, val){
    paramsString += '<param name="'+key+'" value="'+val+'" />';
  });

  attributes = vjs.obj.merge({
    // Add swf to attributes (need both for IE and Others to work)
    'data': swf,

    // Default to 100% width/height
    'width': '100%',
    'height': '100%'

  }, attributes);

  // Create Attributes string
  vjs.obj.each(attributes, function(key, val){
    attrsString += (key + '="' + val + '" ');
  });

  return objTag + attrsString + '>' + paramsString + '</object>';
};

vjs.Flash.streamFromParts = function(connection, stream) {
  return connection + '&' + stream;
};

vjs.Flash.streamToParts = function(src) {
  var parts = {
    connection: '',
    stream: ''
  };

  if (! src) {
    return parts;
  }

  // Look for the normal URL separator we expect, '&'.
  // If found, we split the URL into two pieces around the
  // first '&'.
  var connEnd = src.indexOf('&');
  var streamBegin;
  if (connEnd !== -1) {
    streamBegin = connEnd + 1;
  }
  else {
    // If there's not a '&', we use the last '/' as the delimiter.
    connEnd = streamBegin = src.lastIndexOf('/') + 1;
    if (connEnd === 0) {
      // really, there's not a '/'?
      connEnd = streamBegin = src.length;
    }
  }
  parts.connection = src.substring(0, connEnd);
  parts.stream = src.substring(streamBegin, src.length);

  return parts;
};

vjs.Flash.isStreamingType = function(srcType) {
  return srcType in vjs.Flash.streamingFormats;
};

// RTMP has four variations, any string starting
// with one of these protocols should be valid
vjs.Flash.RTMP_RE = /^rtmp[set]?:\/\//i;

vjs.Flash.isStreamingSrc = function(src) {
  return vjs.Flash.RTMP_RE.test(src);
};
/**
 * The Media Loader is the component that decides which playback technology to load
 * when the player is initialized.
 *
 * @constructor
 */
vjs.MediaLoader = vjs.Component.extend({
  /** @constructor */
  init: function(player, options, ready){
    vjs.Component.call(this, player, options, ready);

    // If there are no sources when the player is initialized,
    // load the first supported playback technology.
    if (!player.options_['sources'] || player.options_['sources'].length === 0) {
      for (var i=0,j=player.options_['techOrder']; i<j.length; i++) {
        var techName = vjs.capitalize(j[i]),
            tech = window['videojs'][techName];

        // Check if the browser supports this technology
        if (tech && tech.isSupported()) {
          player.loadTech(techName);
          break;
        }
      }
    } else {
      // // Loop through playback technologies (HTML5, Flash) and check for support.
      // // Then load the best source.
      // // A few assumptions here:
      // //   All playback technologies respect preload false.
      player.src(player.options_['sources']);
    }
  }
});
/**
 * @fileoverview Text Tracks
 * Text tracks are tracks of timed text events.
 * Captions - text displayed over the video for the hearing impared
 * Subtitles - text displayed over the video for those who don't understand langauge in the video
 * Chapters - text displayed in a menu allowing the user to jump to particular points (chapters) in the video
 * Descriptions (not supported yet) - audio descriptions that are read back to the user by a screen reading device
 */

// Player Additions - Functions add to the player object for easier access to tracks

/**
 * List of associated text tracks
 * @type {Array}
 * @private
 */
vjs.Player.prototype.textTracks_;

/**
 * Get an array of associated text tracks. captions, subtitles, chapters, descriptions
 * http://www.w3.org/html/wg/drafts/html/master/embedded-content-0.html#dom-media-texttracks
 * @return {Array}           Array of track objects
 * @private
 */
vjs.Player.prototype.textTracks = function(){
  this.textTracks_ = this.textTracks_ || [];
  return this.textTracks_;
};

/**
 * Add a text track
 * In addition to the W3C settings we allow adding additional info through options.
 * http://www.w3.org/html/wg/drafts/html/master/embedded-content-0.html#dom-media-addtexttrack
 * @param {String}  kind        Captions, subtitles, chapters, descriptions, or metadata
 * @param {String=} label       Optional label
 * @param {String=} language    Optional language
 * @param {Object=} options     Additional track options, like src
 * @private
 */
vjs.Player.prototype.addTextTrack = function(kind, label, language, options){
  var tracks = this.textTracks_ = this.textTracks_ || [];
  options = options || {};

  options['kind'] = kind;
  options['label'] = label;
  options['language'] = language;

  // HTML5 Spec says default to subtitles.
  // Uppercase first letter to match class names
  var Kind = vjs.capitalize(kind || 'subtitles');

  // Create correct texttrack class. CaptionsTrack, etc.
  var track = new window['videojs'][Kind + 'Track'](this, options);

  tracks.push(track);

  // If track.dflt() is set, start showing immediately
  // TODO: Add a process to deterime the best track to show for the specific kind
  // Incase there are mulitple defaulted tracks of the same kind
  // Or the user has a set preference of a specific language that should override the default
  // Note: The setTimeout is a workaround because with the html5 tech, the player is 'ready'
 //  before it's child components (including the textTrackDisplay) have finished loading.
  if (track.dflt()) {
    this.ready(function(){
      setTimeout(function(){
        track.show();
      }, 0);
    });
  }

  return track;
};

/**
 * Add an array of text tracks. captions, subtitles, chapters, descriptions
 * Track objects will be stored in the player.textTracks() array
 * @param {Array} trackList Array of track elements or objects (fake track elements)
 * @private
 */
vjs.Player.prototype.addTextTracks = function(trackList){
  var trackObj;

  for (var i = 0; i < trackList.length; i++) {
    trackObj = trackList[i];
    this.addTextTrack(trackObj['kind'], trackObj['label'], trackObj['language'], trackObj);
  }

  return this;
};

// Show a text track
// disableSameKind: disable all other tracks of the same kind. Value should be a track kind (captions, etc.)
vjs.Player.prototype.showTextTrack = function(id, disableSameKind){
  var tracks = this.textTracks_,
      i = 0,
      j = tracks.length,
      track, showTrack, kind;

  // Find Track with same ID
  for (;i<j;i++) {
    track = tracks[i];
    if (track.id() === id) {
      track.show();
      showTrack = track;

    // Disable tracks of the same kind
    } else if (disableSameKind && track.kind() == disableSameKind && track.mode() > 0) {
      track.disable();
    }
  }

  // Get track kind from shown track or disableSameKind
  kind = (showTrack) ? showTrack.kind() : ((disableSameKind) ? disableSameKind : false);

  // Trigger trackchange event, captionstrackchange, subtitlestrackchange, etc.
  if (kind) {
    this.trigger(kind+'trackchange');
  }

  return this;
};

/**
 * The base class for all text tracks
 *
 * Handles the parsing, hiding, and showing of text track cues
 *
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.TextTrack = vjs.Component.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Component.call(this, player, options);

    // Apply track info to track object
    // Options will often be a track element

    // Build ID if one doesn't exist
    this.id_ = options['id'] || ('vjs_' + options['kind'] + '_' + options['language'] + '_' + vjs.guid++);
    this.src_ = options['src'];
    // 'default' is a reserved keyword in js so we use an abbreviated version
    this.dflt_ = options['default'] || options['dflt'];
    this.title_ = options['title'];
    this.language_ = options['srclang'];
    this.label_ = options['label'];
    this.cues_ = [];
    this.activeCues_ = [];
    this.readyState_ = 0;
    this.mode_ = 0;

    this.player_.on('fullscreenchange', vjs.bind(this, this.adjustFontSize));
  }
});

/**
 * Track kind value. Captions, subtitles, etc.
 * @private
 */
vjs.TextTrack.prototype.kind_;

/**
 * Get the track kind value
 * @return {String}
 */
vjs.TextTrack.prototype.kind = function(){
  return this.kind_;
};

/**
 * Track src value
 * @private
 */
vjs.TextTrack.prototype.src_;

/**
 * Get the track src value
 * @return {String}
 */
vjs.TextTrack.prototype.src = function(){
  return this.src_;
};

/**
 * Track default value
 * If default is used, subtitles/captions to start showing
 * @private
 */
vjs.TextTrack.prototype.dflt_;

/**
 * Get the track default value. ('default' is a reserved keyword)
 * @return {Boolean}
 */
vjs.TextTrack.prototype.dflt = function(){
  return this.dflt_;
};

/**
 * Track title value
 * @private
 */
vjs.TextTrack.prototype.title_;

/**
 * Get the track title value
 * @return {String}
 */
vjs.TextTrack.prototype.title = function(){
  return this.title_;
};

/**
 * Language - two letter string to represent track language, e.g. 'en' for English
 * Spec def: readonly attribute DOMString language;
 * @private
 */
vjs.TextTrack.prototype.language_;

/**
 * Get the track language value
 * @return {String}
 */
vjs.TextTrack.prototype.language = function(){
  return this.language_;
};

/**
 * Track label e.g. 'English'
 * Spec def: readonly attribute DOMString label;
 * @private
 */
vjs.TextTrack.prototype.label_;

/**
 * Get the track label value
 * @return {String}
 */
vjs.TextTrack.prototype.label = function(){
  return this.label_;
};

/**
 * All cues of the track. Cues have a startTime, endTime, text, and other properties.
 * Spec def: readonly attribute TextTrackCueList cues;
 * @private
 */
vjs.TextTrack.prototype.cues_;

/**
 * Get the track cues
 * @return {Array}
 */
vjs.TextTrack.prototype.cues = function(){
  return this.cues_;
};

/**
 * ActiveCues is all cues that are currently showing
 * Spec def: readonly attribute TextTrackCueList activeCues;
 * @private
 */
vjs.TextTrack.prototype.activeCues_;

/**
 * Get the track active cues
 * @return {Array}
 */
vjs.TextTrack.prototype.activeCues = function(){
  return this.activeCues_;
};

/**
 * ReadyState describes if the text file has been loaded
 * const unsigned short NONE = 0;
 * const unsigned short LOADING = 1;
 * const unsigned short LOADED = 2;
 * const unsigned short ERROR = 3;
 * readonly attribute unsigned short readyState;
 * @private
 */
vjs.TextTrack.prototype.readyState_;

/**
 * Get the track readyState
 * @return {Number}
 */
vjs.TextTrack.prototype.readyState = function(){
  return this.readyState_;
};

/**
 * Mode describes if the track is showing, hidden, or disabled
 * const unsigned short OFF = 0;
 * const unsigned short HIDDEN = 1; (still triggering cuechange events, but not visible)
 * const unsigned short SHOWING = 2;
 * attribute unsigned short mode;
 * @private
 */
vjs.TextTrack.prototype.mode_;

/**
 * Get the track mode
 * @return {Number}
 */
vjs.TextTrack.prototype.mode = function(){
  return this.mode_;
};

/**
 * Change the font size of the text track to make it larger when playing in fullscreen mode
 * and restore it to its normal size when not in fullscreen mode.
 */
vjs.TextTrack.prototype.adjustFontSize = function(){
    if (this.player_.isFullScreen()) {
        // Scale the font by the same factor as increasing the video width to the full screen window width.
        // Additionally, multiply that factor by 1.4, which is the default font size for
        // the caption track (from the CSS)
        this.el_.style.fontSize = screen.width / this.player_.width() * 1.4 * 100 + '%';
    } else {
        // Change the font size of the text track back to its original non-fullscreen size
        this.el_.style.fontSize = '';
    }
};

/**
 * Create basic div to hold cue text
 * @return {Element}
 */
vjs.TextTrack.prototype.createEl = function(){
  return vjs.Component.prototype.createEl.call(this, 'div', {
    className: 'vjs-' + this.kind_ + ' vjs-text-track'
  });
};

/**
 * Show: Mode Showing (2)
 * Indicates that the text track is active. If no attempt has yet been made to obtain the track's cues, the user agent will perform such an attempt momentarily.
 * The user agent is maintaining a list of which cues are active, and events are being fired accordingly.
 * In addition, for text tracks whose kind is subtitles or captions, the cues are being displayed over the video as appropriate;
 * for text tracks whose kind is descriptions, the user agent is making the cues available to the user in a non-visual fashion;
 * and for text tracks whose kind is chapters, the user agent is making available to the user a mechanism by which the user can navigate to any point in the media resource by selecting a cue.
 * The showing by default state is used in conjunction with the default attribute on track elements to indicate that the text track was enabled due to that attribute.
 * This allows the user agent to override the state if a later track is discovered that is more appropriate per the user's preferences.
 */
vjs.TextTrack.prototype.show = function(){
  this.activate();

  this.mode_ = 2;

  // Show element.
  vjs.Component.prototype.show.call(this);
};

/**
 * Hide: Mode Hidden (1)
 * Indicates that the text track is active, but that the user agent is not actively displaying the cues.
 * If no attempt has yet been made to obtain the track's cues, the user agent will perform such an attempt momentarily.
 * The user agent is maintaining a list of which cues are active, and events are being fired accordingly.
 */
vjs.TextTrack.prototype.hide = function(){
  // When hidden, cues are still triggered. Disable to stop triggering.
  this.activate();

  this.mode_ = 1;

  // Hide element.
  vjs.Component.prototype.hide.call(this);
};

/**
 * Disable: Mode Off/Disable (0)
 * Indicates that the text track is not active. Other than for the purposes of exposing the track in the DOM, the user agent is ignoring the text track.
 * No cues are active, no events are fired, and the user agent will not attempt to obtain the track's cues.
 */
vjs.TextTrack.prototype.disable = function(){
  // If showing, hide.
  if (this.mode_ == 2) { this.hide(); }

  // Stop triggering cues
  this.deactivate();

  // Switch Mode to Off
  this.mode_ = 0;
};

/**
 * Turn on cue tracking. Tracks that are showing OR hidden are active.
 */
vjs.TextTrack.prototype.activate = function(){
  // Load text file if it hasn't been yet.
  if (this.readyState_ === 0) { this.load(); }

  // Only activate if not already active.
  if (this.mode_ === 0) {
    // Update current cue on timeupdate
    // Using unique ID for bind function so other tracks don't remove listener
    this.player_.on('timeupdate', vjs.bind(this, this.update, this.id_));

    // Reset cue time on media end
    this.player_.on('ended', vjs.bind(this, this.reset, this.id_));

    // Add to display
    if (this.kind_ === 'captions' || this.kind_ === 'subtitles') {
      this.player_.getChild('textTrackDisplay').addChild(this);
    }
  }
};

/**
 * Turn off cue tracking.
 */
vjs.TextTrack.prototype.deactivate = function(){
  // Using unique ID for bind function so other tracks don't remove listener
  this.player_.off('timeupdate', vjs.bind(this, this.update, this.id_));
  this.player_.off('ended', vjs.bind(this, this.reset, this.id_));
  this.reset(); // Reset

  // Remove from display
  this.player_.getChild('textTrackDisplay').removeChild(this);
};

// A readiness state
// One of the following:
//
// Not loaded
// Indicates that the text track is known to exist (e.g. it has been declared with a track element), but its cues have not been obtained.
//
// Loading
// Indicates that the text track is loading and there have been no fatal errors encountered so far. Further cues might still be added to the track.
//
// Loaded
// Indicates that the text track has been loaded with no fatal errors. No new cues will be added to the track except if the text track corresponds to a MutableTextTrack object.
//
// Failed to load
// Indicates that the text track was enabled, but when the user agent attempted to obtain it, this failed in some way (e.g. URL could not be resolved, network error, unknown text track format). Some or all of the cues are likely missing and will not be obtained.
vjs.TextTrack.prototype.load = function(){

  // Only load if not loaded yet.
  if (this.readyState_ === 0) {
    this.readyState_ = 1;
    vjs.get(this.src_, vjs.bind(this, this.parseCues), vjs.bind(this, this.onError));
  }

};

vjs.TextTrack.prototype.onError = function(err){
  this.error = err;
  this.readyState_ = 3;
  this.trigger('error');
};

// Parse the WebVTT text format for cue times.
// TODO: Separate parser into own class so alternative timed text formats can be used. (TTML, DFXP)
vjs.TextTrack.prototype.parseCues = function(srcContent) {
  var cue, time, text,
      lines = srcContent.split('\n'),
      line = '', id;

  for (var i=1, j=lines.length; i<j; i++) {
    // Line 0 should be 'WEBVTT', so skipping i=0

    line = vjs.trim(lines[i]); // Trim whitespace and linebreaks

    if (line) { // Loop until a line with content

      // First line could be an optional cue ID
      // Check if line has the time separator
      if (line.indexOf('-->') == -1) {
        id = line;
        // Advance to next line for timing.
        line = vjs.trim(lines[++i]);
      } else {
        id = this.cues_.length;
      }

      // First line - Number
      cue = {
        id: id, // Cue Number
        index: this.cues_.length // Position in Array
      };

      // Timing line
      time = line.split(' --> ');
      cue.startTime = this.parseCueTime(time[0]);
      cue.endTime = this.parseCueTime(time[1]);

      // Additional lines - Cue Text
      text = [];

      // Loop until a blank line or end of lines
      // Assumeing trim('') returns false for blank lines
      while (lines[++i] && (line = vjs.trim(lines[i]))) {
        text.push(line);
      }

      cue.text = text.join('<br/>');

      // Add this cue
      this.cues_.push(cue);
    }
  }

  this.readyState_ = 2;
  this.trigger('loaded');
};


vjs.TextTrack.prototype.parseCueTime = function(timeText) {
  var parts = timeText.split(':'),
      time = 0,
      hours, minutes, other, seconds, ms;

  // Check if optional hours place is included
  // 00:00:00.000 vs. 00:00.000
  if (parts.length == 3) {
    hours = parts[0];
    minutes = parts[1];
    other = parts[2];
  } else {
    hours = 0;
    minutes = parts[0];
    other = parts[1];
  }

  // Break other (seconds, milliseconds, and flags) by spaces
  // TODO: Make additional cue layout settings work with flags
  other = other.split(/\s+/);
  // Remove seconds. Seconds is the first part before any spaces.
  seconds = other.splice(0,1)[0];
  // Could use either . or , for decimal
  seconds = seconds.split(/\.|,/);
  // Get milliseconds
  ms = parseFloat(seconds[1]);
  seconds = seconds[0];

  // hours => seconds
  time += parseFloat(hours) * 3600;
  // minutes => seconds
  time += parseFloat(minutes) * 60;
  // Add seconds
  time += parseFloat(seconds);
  // Add milliseconds
  if (ms) { time += ms/1000; }

  return time;
};

// Update active cues whenever timeupdate events are triggered on the player.
vjs.TextTrack.prototype.update = function(){
  if (this.cues_.length > 0) {

    // Get current player time, adjust for track offset
    var offset = this.player_.options()['trackTimeOffset'] || 0;
    var time = this.player_.currentTime() + offset;

    // Check if the new time is outside the time box created by the the last update.
    if (this.prevChange === undefined || time < this.prevChange || this.nextChange <= time) {
      var cues = this.cues_,

          // Create a new time box for this state.
          newNextChange = this.player_.duration(), // Start at beginning of the timeline
          newPrevChange = 0, // Start at end

          reverse = false, // Set the direction of the loop through the cues. Optimized the cue check.
          newCues = [], // Store new active cues.

          // Store where in the loop the current active cues are, to provide a smart starting point for the next loop.
          firstActiveIndex, lastActiveIndex,
          cue, i; // Loop vars

      // Check if time is going forwards or backwards (scrubbing/rewinding)
      // If we know the direction we can optimize the starting position and direction of the loop through the cues array.
      if (time >= this.nextChange || this.nextChange === undefined) { // NextChange should happen
        // Forwards, so start at the index of the first active cue and loop forward
        i = (this.firstActiveIndex !== undefined) ? this.firstActiveIndex : 0;
      } else {
        // Backwards, so start at the index of the last active cue and loop backward
        reverse = true;
        i = (this.lastActiveIndex !== undefined) ? this.lastActiveIndex : cues.length - 1;
      }

      while (true) { // Loop until broken
        cue = cues[i];

        // Cue ended at this point
        if (cue.endTime <= time) {
          newPrevChange = Math.max(newPrevChange, cue.endTime);

          if (cue.active) {
            cue.active = false;
          }

          // No earlier cues should have an active start time.
          // Nevermind. Assume first cue could have a duration the same as the video.
          // In that case we need to loop all the way back to the beginning.
          // if (reverse && cue.startTime) { break; }

        // Cue hasn't started
        } else if (time < cue.startTime) {
          newNextChange = Math.min(newNextChange, cue.startTime);

          if (cue.active) {
            cue.active = false;
          }

          // No later cues should have an active start time.
          if (!reverse) { break; }

        // Cue is current
        } else {

          if (reverse) {
            // Add cue to front of array to keep in time order
            newCues.splice(0,0,cue);

            // If in reverse, the first current cue is our lastActiveCue
            if (lastActiveIndex === undefined) { lastActiveIndex = i; }
            firstActiveIndex = i;
          } else {
            // Add cue to end of array
            newCues.push(cue);

            // If forward, the first current cue is our firstActiveIndex
            if (firstActiveIndex === undefined) { firstActiveIndex = i; }
            lastActiveIndex = i;
          }

          newNextChange = Math.min(newNextChange, cue.endTime);
          newPrevChange = Math.max(newPrevChange, cue.startTime);

          cue.active = true;
        }

        if (reverse) {
          // Reverse down the array of cues, break if at first
          if (i === 0) { break; } else { i--; }
        } else {
          // Walk up the array fo cues, break if at last
          if (i === cues.length - 1) { break; } else { i++; }
        }

      }

      this.activeCues_ = newCues;
      this.nextChange = newNextChange;
      this.prevChange = newPrevChange;
      this.firstActiveIndex = firstActiveIndex;
      this.lastActiveIndex = lastActiveIndex;

      this.updateDisplay();

      this.trigger('cuechange');
    }
  }
};

// Add cue HTML to display
vjs.TextTrack.prototype.updateDisplay = function(){
  var cues = this.activeCues_,
      html = '',
      i=0,j=cues.length;

  for (;i<j;i++) {
    html += '<span class="vjs-tt-cue">'+cues[i].text+'</span>';
  }

  this.el_.innerHTML = html;
};

// Set all loop helper values back
vjs.TextTrack.prototype.reset = function(){
  this.nextChange = 0;
  this.prevChange = this.player_.duration();
  this.firstActiveIndex = 0;
  this.lastActiveIndex = 0;
};

// Create specific track types
/**
 * The track component for managing the hiding and showing of captions
 *
 * @constructor
 */
vjs.CaptionsTrack = vjs.TextTrack.extend();
vjs.CaptionsTrack.prototype.kind_ = 'captions';
// Exporting here because Track creation requires the track kind
// to be available on global object. e.g. new window['videojs'][Kind + 'Track']

/**
 * The track component for managing the hiding and showing of subtitles
 *
 * @constructor
 */
vjs.SubtitlesTrack = vjs.TextTrack.extend();
vjs.SubtitlesTrack.prototype.kind_ = 'subtitles';

/**
 * The track component for managing the hiding and showing of chapters
 *
 * @constructor
 */
vjs.ChaptersTrack = vjs.TextTrack.extend();
vjs.ChaptersTrack.prototype.kind_ = 'chapters';


/* Text Track Display
============================================================================= */
// Global container for both subtitle and captions text. Simple div container.

/**
 * The component for displaying text track cues
 *
 * @constructor
 */
vjs.TextTrackDisplay = vjs.Component.extend({
  /** @constructor */
  init: function(player, options, ready){
    vjs.Component.call(this, player, options, ready);

    // This used to be called during player init, but was causing an error
    // if a track should show by default and the display hadn't loaded yet.
    // Should probably be moved to an external track loader when we support
    // tracks that don't need a display.
    if (player.options_['tracks'] && player.options_['tracks'].length > 0) {
      this.player_.addTextTracks(player.options_['tracks']);
    }
  }
});

vjs.TextTrackDisplay.prototype.createEl = function(){
  return vjs.Component.prototype.createEl.call(this, 'div', {
    className: 'vjs-text-track-display'
  });
};


/**
 * The specific menu item type for selecting a language within a text track kind
 *
 * @constructor
 */
vjs.TextTrackMenuItem = vjs.MenuItem.extend({
  /** @constructor */
  init: function(player, options){
    var track = this.track = options['track'];

    // Modify options for parent MenuItem class's init.
    options['label'] = track.label();
    options['selected'] = track.dflt();
    vjs.MenuItem.call(this, player, options);

    this.player_.on(track.kind() + 'trackchange', vjs.bind(this, this.update));
  }
});

vjs.TextTrackMenuItem.prototype.onClick = function(){
  vjs.MenuItem.prototype.onClick.call(this);
  this.player_.showTextTrack(this.track.id_, this.track.kind());
};

vjs.TextTrackMenuItem.prototype.update = function(){
  this.selected(this.track.mode() == 2);
};

/**
 * A special menu item for turning of a specific type of text track
 *
 * @constructor
 */
vjs.OffTextTrackMenuItem = vjs.TextTrackMenuItem.extend({
  /** @constructor */
  init: function(player, options){
    // Create pseudo track info
    // Requires options['kind']
    options['track'] = {
      kind: function() { return options['kind']; },
      player: player,
      label: function(){ return options['kind'] + ' off'; },
      dflt: function(){ return false; },
      mode: function(){ return false; }
    };
    vjs.TextTrackMenuItem.call(this, player, options);
    this.selected(true);
  }
});

vjs.OffTextTrackMenuItem.prototype.onClick = function(){
  vjs.TextTrackMenuItem.prototype.onClick.call(this);
  this.player_.showTextTrack(this.track.id_, this.track.kind());
};

vjs.OffTextTrackMenuItem.prototype.update = function(){
  var tracks = this.player_.textTracks(),
      i=0, j=tracks.length, track,
      off = true;

  for (;i<j;i++) {
    track = tracks[i];
    if (track.kind() == this.track.kind() && track.mode() == 2) {
      off = false;
    }
  }

  this.selected(off);
};

/**
 * The base class for buttons that toggle specific text track types (e.g. subtitles)
 *
 * @constructor
 */
vjs.TextTrackButton = vjs.MenuButton.extend({
  /** @constructor */
  init: function(player, options){
    vjs.MenuButton.call(this, player, options);

    if (this.items.length <= 1) {
      this.hide();
    }
  }
});

// vjs.TextTrackButton.prototype.buttonPressed = false;

// vjs.TextTrackButton.prototype.createMenu = function(){
//   var menu = new vjs.Menu(this.player_);

//   // Add a title list item to the top
//   // menu.el().appendChild(vjs.createEl('li', {
//   //   className: 'vjs-menu-title',
//   //   innerHTML: vjs.capitalize(this.kind_),
//   //   tabindex: -1
//   // }));

//   this.items = this.createItems();

//   // Add menu items to the menu
//   for (var i = 0; i < this.items.length; i++) {
//     menu.addItem(this.items[i]);
//   }

//   // Add list to element
//   this.addChild(menu);

//   return menu;
// };

// Create a menu item for each text track
vjs.TextTrackButton.prototype.createItems = function(){
  var items = [], track;

  // Add an OFF menu item to turn all tracks off
  items.push(new vjs.OffTextTrackMenuItem(this.player_, { 'kind': this.kind_ }));

  for (var i = 0; i < this.player_.textTracks().length; i++) {
    track = this.player_.textTracks()[i];
    if (track.kind() === this.kind_) {
      items.push(new vjs.TextTrackMenuItem(this.player_, {
        'track': track
      }));
    }
  }

  return items;
};

/**
 * The button component for toggling and selecting captions
 *
 * @constructor
 */
vjs.CaptionsButton = vjs.TextTrackButton.extend({
  /** @constructor */
  init: function(player, options, ready){
    vjs.TextTrackButton.call(this, player, options, ready);
    this.el_.setAttribute('aria-label','Captions Menu');
  }
});
vjs.CaptionsButton.prototype.kind_ = 'captions';
vjs.CaptionsButton.prototype.buttonText = 'Captions';
vjs.CaptionsButton.prototype.className = 'vjs-captions-button';

/**
 * The button component for toggling and selecting subtitles
 *
 * @constructor
 */
vjs.SubtitlesButton = vjs.TextTrackButton.extend({
  /** @constructor */
  init: function(player, options, ready){
    vjs.TextTrackButton.call(this, player, options, ready);
    this.el_.setAttribute('aria-label','Subtitles Menu');
  }
});
vjs.SubtitlesButton.prototype.kind_ = 'subtitles';
vjs.SubtitlesButton.prototype.buttonText = 'Subtitles';
vjs.SubtitlesButton.prototype.className = 'vjs-subtitles-button';

// Chapters act much differently than other text tracks
// Cues are navigation vs. other tracks of alternative languages
/**
 * The button component for toggling and selecting chapters
 *
 * @constructor
 */
vjs.ChaptersButton = vjs.TextTrackButton.extend({
  /** @constructor */
  init: function(player, options, ready){
    vjs.TextTrackButton.call(this, player, options, ready);
    this.el_.setAttribute('aria-label','Chapters Menu');
  }
});
vjs.ChaptersButton.prototype.kind_ = 'chapters';
vjs.ChaptersButton.prototype.buttonText = 'Chapters';
vjs.ChaptersButton.prototype.className = 'vjs-chapters-button';

// Create a menu item for each text track
vjs.ChaptersButton.prototype.createItems = function(){
  var items = [], track;

  for (var i = 0; i < this.player_.textTracks().length; i++) {
    track = this.player_.textTracks()[i];
    if (track.kind() === this.kind_) {
      items.push(new vjs.TextTrackMenuItem(this.player_, {
        'track': track
      }));
    }
  }

  return items;
};

vjs.ChaptersButton.prototype.createMenu = function(){
  var tracks = this.player_.textTracks(),
      i = 0,
      j = tracks.length,
      track, chaptersTrack,
      items = this.items = [];

  for (;i<j;i++) {
    track = tracks[i];
    if (track.kind() == this.kind_ && track.dflt()) {
      if (track.readyState() < 2) {
        this.chaptersTrack = track;
        track.on('loaded', vjs.bind(this, this.createMenu));
        return;
      } else {
        chaptersTrack = track;
        break;
      }
    }
  }

  var menu = this.menu = new vjs.Menu(this.player_);

  menu.contentEl().appendChild(vjs.createEl('li', {
    className: 'vjs-menu-title',
    innerHTML: vjs.capitalize(this.kind_),
    tabindex: -1
  }));

  if (chaptersTrack) {
    var cues = chaptersTrack.cues_, cue, mi;
    i = 0;
    j = cues.length;

    for (;i<j;i++) {
      cue = cues[i];

      mi = new vjs.ChaptersTrackMenuItem(this.player_, {
        'track': chaptersTrack,
        'cue': cue
      });

      items.push(mi);

      menu.addChild(mi);
    }
  }

  if (this.items.length > 0) {
    this.show();
  }

  return menu;
};


/**
 * @constructor
 */
vjs.ChaptersTrackMenuItem = vjs.MenuItem.extend({
  /** @constructor */
  init: function(player, options){
    var track = this.track = options['track'],
        cue = this.cue = options['cue'],
        currentTime = player.currentTime();

    // Modify options for parent MenuItem class's init.
    options['label'] = cue.text;
    options['selected'] = (cue.startTime <= currentTime && currentTime < cue.endTime);
    vjs.MenuItem.call(this, player, options);

    track.on('cuechange', vjs.bind(this, this.update));
  }
});

vjs.ChaptersTrackMenuItem.prototype.onClick = function(){
  vjs.MenuItem.prototype.onClick.call(this);
  this.player_.currentTime(this.cue.startTime);
  this.update(this.cue.startTime);
};

vjs.ChaptersTrackMenuItem.prototype.update = function(){
  var cue = this.cue,
      currentTime = this.player_.currentTime();

  // vjs.log(currentTime, cue.startTime);
  this.selected(cue.startTime <= currentTime && currentTime < cue.endTime);
};

// Add Buttons to controlBar
vjs.obj.merge(vjs.ControlBar.prototype.options_['children'], {
  'subtitlesButton': {},
  'captionsButton': {},
  'chaptersButton': {}
});

// vjs.Cue = vjs.Component.extend({
//   /** @constructor */
//   init: function(player, options){
//     vjs.Component.call(this, player, options);
//   }
// });
/**
 * @fileoverview Add JSON support
 * @suppress {undefinedVars}
 * (Compiler doesn't like JSON not being declared)
 */

/**
 * Javascript JSON implementation
 * (Parse Method Only)
 * https://github.com/douglascrockford/JSON-js/blob/master/json2.js
 * Only using for parse method when parsing data-setup attribute JSON.
 * @suppress {undefinedVars}
 * @namespace
 * @private
 */
vjs.JSON;

if (typeof window.JSON !== 'undefined' && window.JSON.parse === 'function') {
  vjs.JSON = window.JSON;

} else {
  vjs.JSON = {};

  var cx = /[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;

  /**
   * parse the json
   *
   * @memberof vjs.JSON
   * @param {String} text The JSON string to parse
   * @param {Function=} [reviver] Optional function that can transform the results
   * @return {Object|Array} The parsed JSON
   */
  vjs.JSON.parse = function (text, reviver) {
      var j;

      function walk(holder, key) {
          var k, v, value = holder[key];
          if (value && typeof value === 'object') {
              for (k in value) {
                  if (Object.prototype.hasOwnProperty.call(value, k)) {
                      v = walk(value, k);
                      if (v !== undefined) {
                          value[k] = v;
                      } else {
                          delete value[k];
                      }
                  }
              }
          }
          return reviver.call(holder, key, value);
      }
      text = String(text);
      cx.lastIndex = 0;
      if (cx.test(text)) {
          text = text.replace(cx, function (a) {
              return '\\u' +
                  ('0000' + a.charCodeAt(0).toString(16)).slice(-4);
          });
      }

      if (/^[\],:{}\s]*$/
              .test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g, '@')
                  .replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g, ']')
                  .replace(/(?:^|:|,)(?:\s*\[)+/g, ''))) {

          j = eval('(' + text + ')');

          return typeof reviver === 'function' ?
              walk({'': j}, '') : j;
      }

      throw new SyntaxError('JSON.parse(): invalid or malformed JSON data');
  };
}
/**
 * @fileoverview Functions for automatically setting up a player
 * based on the data-setup attribute of the video tag
 */

// Automatically set up any tags that have a data-setup attribute
vjs.autoSetup = function(){
  var options, vid, player,
      vids = document.getElementsByTagName('video');

  // Check if any media elements exist
  if (vids && vids.length > 0) {

    for (var i=0,j=vids.length; i<j; i++) {
      vid = vids[i];

      // Check if element exists, has getAttribute func.
      // IE seems to consider typeof el.getAttribute == 'object' instead of 'function' like expected, at least when loading the player immediately.
      if (vid && vid.getAttribute) {

        // Make sure this player hasn't already been set up.
        if (vid['player'] === undefined) {
          options = vid.getAttribute('data-setup');

          // Check if data-setup attr exists.
          // We only auto-setup if they've added the data-setup attr.
          if (options !== null) {

            // Parse options JSON
            // If empty string, make it a parsable json object.
            options = vjs.JSON.parse(options || '{}');

            // Create new video.js instance.
            player = videojs(vid, options);
          }
        }

      // If getAttribute isn't defined, we need to wait for the DOM.
      } else {
        vjs.autoSetupTimeout(1);
        break;
      }
    }

  // No videos were found, so keep looping unless page is finisehd loading.
  } else if (!vjs.windowLoaded) {
    vjs.autoSetupTimeout(1);
  }
};

// Pause to let the DOM keep processing
vjs.autoSetupTimeout = function(wait){
  setTimeout(vjs.autoSetup, wait);
};

if (document.readyState === 'complete') {
  vjs.windowLoaded = true;
} else {
  vjs.one(window, 'load', function(){
    vjs.windowLoaded = true;
  });
}

// Run Auto-load players
// You have to wait at least once in case this script is loaded after your video in the DOM (weird behavior only with minified version)
vjs.autoSetupTimeout(1);
/**
 * the method for registering a video.js plugin
 *
 * @param  {String} name The name of the plugin
 * @param  {Function} init The function that is run when the player inits
 */
vjs.plugin = function(name, init){
  vjs.Player.prototype[name] = init;
};

(function(window){
  var urlCount = 0,
      NativeMediaSource = window.MediaSource || window.WebKitMediaSource || {},
      nativeUrl = window.URL || {},
      EventEmitter,
      flvCodec = /video\/flv(;\s*codecs=["']vp6,aac["'])?$/,
      objectUrlPrefix = 'blob:vjs-media-source/';

  EventEmitter = function(){};
  EventEmitter.prototype.init = function(){
    this.listeners = [];
  };
  EventEmitter.prototype.addEventListener = function(type, listener){
    if (!this.listeners[type]){
      this.listeners[type] = [];
    }
    this.listeners[type].unshift(listener);
  };
  EventEmitter.prototype.removeEventListener = function(type, listener){
    var listeners = this.listeners[type],
        i = listeners.length;
    while (i--) {
      if (listeners[i] === listener) {
        return listeners.splice(i, 1);
      }
    }
  };
  EventEmitter.prototype.trigger = function(event){
    var listeners = this.listeners[event.type] || [],
        i = listeners.length;
    while (i--) {
      listeners[i](event);
    }
  };

  // extend the media source APIs

  // Media Source
  videojs.MediaSource = function(){
    var self = this;
    videojs.MediaSource.prototype.init.call(this);

    this.sourceBuffers = [];
    this.readyState = 'closed';
    this.listeners = {
      sourceopen: [function(event){
        // find the swf where we will push media data
        self.swfObj = document.getElementById(event.swfId);
        self.readyState = 'open';

        // trigger load events
        if (self.swfObj) {
          self.swfObj.vjs_load();
        }
      }],
      webkitsourceopen: [function(event){
        self.trigger({
          type: 'sourceopen'
        });
      }]
    };
  };
  videojs.MediaSource.prototype = new EventEmitter();

  /**
   * The maximum size in bytes for append operations to the video.js
   * SWF. Calling through to Flash blocks and can be expensive so
   * tuning this parameter may improve playback on slower
   * systems. There are two factors to consider:
   * - Each interaction with the SWF must be quick or you risk dropping
   * video frames. To maintain 60fps for the rest of the page, each append
   * cannot take longer than 16ms. Given the likelihood that the page will
   * be executing more javascript than just playback, you probably want to
   * aim for ~8ms.
   * - Bigger appends significantly increase throughput. The total number of
   * bytes over time delivered to the SWF must exceed the video bitrate or
   * playback will stall.
   *
   * The default is set so that a 4MB/s stream should playback
   * without stuttering.
   */
  videojs.MediaSource.BYTES_PER_SECOND_GOAL = 4 * 1024 * 1024;
  videojs.MediaSource.TICKS_PER_SECOND = 60;

  // create a new source buffer to receive a type of media data
  videojs.MediaSource.prototype.addSourceBuffer = function(type){
    var sourceBuffer;

    // if this is an FLV type, we'll push data to flash
    if (flvCodec.test(type)) {
      // Flash source buffers
      sourceBuffer = new videojs.SourceBuffer(this);
    } else if (this.nativeSource) {
      // native source buffers
      sourceBuffer = this.nativeSource.addSourceBuffer.apply(this.nativeSource, arguments);
    } else {
      throw new Error('NotSupportedError (Video.js)');
    }

    this.sourceBuffers.push(sourceBuffer);
    return sourceBuffer;
  };
  videojs.MediaSource.prototype.endOfStream = function(){
    this.readyState = 'ended';
  };

  // store references to the media sources so they can be connected
  // to a video element (a swf object)
  videojs.mediaSources = {};
  // provide a method for a swf object to notify JS that a media source is now open
  videojs.MediaSource.open = function(msObjectURL, swfId){
    var mediaSource = videojs.mediaSources[msObjectURL];

    if (mediaSource) {
      mediaSource.trigger({
        type: 'sourceopen',
        swfId: swfId
      });
    } else {
      throw new Error('Media Source not found (Video.js)');
    }
  };

  // Source Buffer
  videojs.SourceBuffer = function(source){
    var self = this,

        // byte arrays queued to be appended
        buffer = [],

        // the total number of queued bytes
        bufferSize = 0,
        scheduleTick = function(func) {
          // Chrome doesn't invoke requestAnimationFrame callbacks
          // in background tabs, so use setTimeout.
          window.setTimeout(func,
                            Math.ceil(1000 / videojs.MediaSource.TICKS_PER_SECOND));
        },
        append = function() {
          var chunk, i, length, payload, maxSize,
              binary = '';

          if (!buffer.length) {
            // do nothing if the buffer is empty
            return;
          }

          if (document.hidden) {
            // When the document is hidden, the browser will likely
            // invoke callbacks less frequently than we want. Just
            // append a whole second's worth of data. It doesn't
            // matter if the video janks, since the user can't see it.
            maxSize = videojs.MediaSource.BYTES_PER_SECOND_GOAL;
          } else {
            maxSize = Math.ceil(videojs.MediaSource.BYTES_PER_SECOND_GOAL/
                                videojs.MediaSource.TICKS_PER_SECOND);
          }

          // concatenate appends up to the max append size
          payload = new Uint8Array(Math.min(maxSize, bufferSize));
          i = payload.byteLength;
          while (i) {
            chunk = buffer[0].subarray(0, i);

            payload.set(chunk, payload.byteLength - i);

            // requeue any bytes that won't make it this round
            if (chunk.byteLength < buffer[0].byteLength) {
              buffer[0] = buffer[0].subarray(i);
            } else {
              buffer.shift();
            }

            i -= chunk.byteLength;
          }
          bufferSize -= payload.byteLength;

          // base64 encode the bytes
          for (i = 0, length = payload.byteLength; i < length; i++) {
            binary += String.fromCharCode(payload[i]);
          }
          b64str = window.btoa(binary);

          // bypass normal ExternalInterface calls and pass xml directly
          // IE can be slow by default
          self.source.swfObj.CallFunction('<invoke name="vjs_appendBuffer"' +
                                          'returntype="javascript"><arguments><string>' +
                                          b64str +
                                          '</string></arguments></invoke>');

          // schedule another append if necessary
          if (bufferSize !== 0) {
            scheduleTick(append);
          } else {
            self.updating = false;
            self.trigger({ type: 'updateend' });

            if (self.source.readyState === 'ended') {
              self.source.swfObj.vjs_endOfStream();
            }
          }
        };

    videojs.SourceBuffer.prototype.init.call(this);
    this.source = source;

    // indicates whether the asynchronous continuation of an operation
    // is still being processed
    // see https://w3c.github.io/media-source/#widl-SourceBuffer-updating
    this.updating = false;

    // accept video data and pass to the video (swf) object
    this.appendBuffer = function(uint8Array){
      var error;

      if (this.updating) {
        error = new Error('SourceBuffer.append() cannot be called ' +
                          'while an update is in progress');
        error.name = 'InvalidStateError';
        error.code = 11;
        throw error;
      }
      if (buffer.length === 0) {
        scheduleTick(append);
      }

      this.updating = true;
      this.source.readyState = 'open';
      this.trigger({ type: 'update' });

      buffer.push(uint8Array);
      bufferSize += uint8Array.byteLength;
    };

    // reset the parser and remove any data queued to be sent to the swf
    this.abort = function() {
      buffer = [];
      bufferSize = 0;
      this.source.swfObj.vjs_abort();

      // report any outstanding updates have ended
      if (this.updating) {
        this.updating = false;
        this.trigger({ type: 'updateend' });
      }

    };
  };
  videojs.SourceBuffer.prototype = new EventEmitter();

  // URL
  videojs.URL = {
    createObjectURL: function(object){
      var url = objectUrlPrefix + urlCount;

      urlCount++;

      // setup the mapping back to object
      videojs.mediaSources[url] = object;

      return url;
    }
  };

  // plugin
  videojs.plugin('mediaSource', function(options){
    var player = this;

    player.on('loadstart', function(){
      var url = player.currentSrc(),
          trigger = function(event){
            mediaSource.trigger(event);
          },
          mediaSource;

      if (player.techName === 'Html5' && url.indexOf(objectUrlPrefix) === 0) {
        // use the native media source implementation
        mediaSource = videojs.mediaSources[url];

        if (!mediaSource.nativeUrl) {
          // initialize the native source
          mediaSource.nativeSource = new NativeMediaSource();
          mediaSource.nativeSource.addEventListener('sourceopen', trigger, false);
          mediaSource.nativeSource.addEventListener('webkitsourceopen', trigger, false);
          mediaSource.nativeUrl = nativeUrl.createObjectURL(mediaSource.nativeSource);
        }
        player.src(mediaSource.nativeUrl);
      }
    });
  });

})(this);

(function(window, videojs, document, undefined) {
'use strict';

var
  // a fudge factor to apply to advertised playlist bitrates to account for
  // temporary flucations in client bandwidth
  bandwidthVariance = 1.1,

  // the amount of time to wait between checking the state of the buffer
  bufferCheckInterval = 500,
  keyXhr,
  keyFailed,
  resolveUrl;

// returns true if a key has failed to download within a certain amount of retries
keyFailed = function(key) {
  return key.retries && key.retries >= 2;
};

videojs.Hls = videojs.Flash.extend({
  init: function(player, options, ready) {
    var
      source = options.source,
      settings = player.options();

    player.hls = this;
    delete options.source;
    options.swf = settings.flash.swf;
    videojs.Flash.call(this, player, options, ready);
    options.source = source;
    this.bytesReceived = 0;

    // TODO: After video.js#1347 is pulled in remove these lines
    this.currentTime = videojs.Hls.prototype.currentTime;
    this.setCurrentTime = videojs.Hls.prototype.setCurrentTime;

    // a queue of segments that need to be transmuxed and processed,
    // and then fed to the source buffer
    this.segmentBuffer_ = [];
    // periodically check if new data needs to be downloaded or
    // buffered data should be appended to the source buffer
    this.startCheckingBuffer_();

    videojs.Hls.prototype.src.call(this, options.source && options.source.src);
  }
});

// Add HLS to the standard tech order
videojs.options.techOrder.unshift('hls');

// the desired length of video to maintain in the buffer, in seconds
videojs.Hls.GOAL_BUFFER_LENGTH = 30;

videojs.Hls.prototype.src = function(src) {
  var
    tech = this,
    player = this.player(),
    settings = player.options().hls || {},
    mediaSource,
    oldMediaPlaylist,
    source;

  // do nothing if the src is falsey
  if (!src) {
    return;
  }

  // if there is already a source loaded, clean it up
  if (this.src_) {
    this.resetSrc_();
  }

  this.src_ = src;

  mediaSource = new videojs.MediaSource();
  source = {
    src: videojs.URL.createObjectURL(mediaSource),
    type: "video/flv"
  };
  this.mediaSource = mediaSource;

  this.segmentBuffer_ = [];
  this.segmentParser_ = new videojs.Hls.SegmentParser();

  // if the stream contains ID3 metadata, expose that as a metadata
  // text track
  this.setupMetadataCueTranslation_();

  // load the MediaSource into the player
  this.mediaSource.addEventListener('sourceopen', videojs.bind(this, this.handleSourceOpen));

  // cleanup the old playlist loader, if necessary
  if (this.playlists) {
    this.playlists.dispose();
  }

  // The index of the next segment to be downloaded in the current
  // media playlist. When the current media playlist is live with
  // expiring segments, it may be a different value from the media
  // sequence number for a segment.
  this.mediaIndex = 0;

  this.playlists = new videojs.Hls.PlaylistLoader(this.src_, settings.withCredentials);

  this.playlists.on('loadedmetadata', videojs.bind(this, function() {
    var selectedPlaylist, loaderHandler, oldBitrate, newBitrate, segmentDuration,
        segmentDlTime, setupEvents, threshold;

    setupEvents = function() {
      this.fillBuffer();
      player.trigger('loadedmetadata');
    };

    oldMediaPlaylist = this.playlists.media();

    // the bandwidth estimate for the first segment is based on round
    // trip time for the master playlist. the master playlist is
    // almost always tiny so the round-trip time is dominated by
    // latency and the computed bandwidth is much lower than
    // steady-state. if the the downstream developer has a better way
    // of detecting bandwidth and provided a number, use that instead.
    if (this.bandwidth === undefined) {
      // we're going to have to estimate initial bandwidth
      // ourselves. scale the bandwidth estimate to account for the
      // relatively high round-trip time from the master playlist.
      this.setBandwidth({
        bandwidth: this.playlists.bandwidth * 5
      });
    }

    selectedPlaylist = this.selectPlaylist();
    oldBitrate = oldMediaPlaylist.attributes &&
                 oldMediaPlaylist.attributes.BANDWIDTH || 0;
    newBitrate = selectedPlaylist.attributes &&
                 selectedPlaylist.attributes.BANDWIDTH || 0;
    segmentDuration = oldMediaPlaylist.segments &&
                      oldMediaPlaylist.segments[this.mediaIndex].duration ||
                      oldMediaPlaylist.targetDuration;

    segmentDlTime = (segmentDuration * newBitrate) / this.bandwidth;

    if (!segmentDlTime) {
      segmentDlTime = Infinity;
    }

    // this threshold is to account for having a high latency on the manifest
    // request which is a somewhat small file.
    threshold = 10;

    if (newBitrate > oldBitrate && segmentDlTime <= threshold) {
      this.playlists.media(selectedPlaylist);
      loaderHandler = videojs.bind(this, function() {
        setupEvents.call(this);
        this.playlists.off('loadedplaylist', loaderHandler);
      });
      this.playlists.on('loadedplaylist', loaderHandler);
    } else {
      setupEvents.call(this);
    }
  }));

  this.playlists.on('error', videojs.bind(this, function() {
    player.error(this.playlists.error);
  }));

  this.playlists.on('loadedplaylist', videojs.bind(this, function() {
    var updatedPlaylist = this.playlists.media();

    if (!updatedPlaylist) {
      // do nothing before an initial media playlist has been activated
      return;
    }

    this.updateDuration(this.playlists.media());
    this.mediaIndex = videojs.Hls.translateMediaIndex(this.mediaIndex, oldMediaPlaylist, updatedPlaylist);
    oldMediaPlaylist = updatedPlaylist;

    this.fetchKeys_();
  }));

  this.playlists.on('mediachange', videojs.bind(this, function() {
    // abort outstanding key requests and check if new keys need to be retrieved
    if (keyXhr) {
      this.cancelKeyXhr();
    }

    player.trigger('mediachange');
  }));

  this.player().ready(function() {
    // do nothing if the tech has been disposed already
    // this can occur if someone sets the src in player.ready(), for instance
    if (!tech.el()) {
      return;
    }
    tech.el().vjs_src(source.src);
  });
};

/* Returns the media index for the live point in the current playlist, and updates
   the current time to go along with it.
 */
videojs.Hls.getMediaIndexForLive_ = function(selectedPlaylist) {
  if (!selectedPlaylist.segments) {
    return 0;
  }

  var tailIterator = selectedPlaylist.segments.length,
      tailDuration = 0,
      targetTail = (selectedPlaylist.targetDuration || 10) * 3;

  while (tailDuration < targetTail && tailIterator > 0) {
    tailDuration += selectedPlaylist.segments[tailIterator - 1].duration;
    tailIterator--;
  }

  return tailIterator;
};

videojs.Hls.prototype.handleSourceOpen = function() {
  // construct the video data buffer and set the appropriate MIME type
  var
    player = this.player(),
    sourceBuffer = this.mediaSource.addSourceBuffer('video/flv; codecs="vp6,aac"');

  this.sourceBuffer = sourceBuffer;

  // if autoplay is enabled, begin playback. This is duplicative of
  // code in video.js but is required because play() must be invoked
  // *after* the media source has opened.
  // NOTE: moving this invocation of play() after
  // sourceBuffer.appendBuffer() below caused live streams with
  // autoplay to stall
  if (player.options().autoplay) {
    player.play();
  }

  sourceBuffer.appendBuffer(this.segmentParser_.getFlvHeader());
};

// register event listeners to transform in-band metadata events into
// VTTCues on a text track
videojs.Hls.prototype.setupMetadataCueTranslation_ = function() {
  var
    tech = this,
    metadataStream = tech.segmentParser_.metadataStream,
    textTrack;

  // only expose metadata tracks to video.js versions that support
  // dynamic text tracks (4.12+)
  if (!tech.player().addTextTrack) {
    return;
  }

  // add a metadata cue whenever a metadata event is triggered during
  // segment parsing
  metadataStream.on('data', function(metadata) {
    var i, hexDigit;

    // create the metadata track if this is the first ID3 tag we've
    // seen
    if (!textTrack) {
      textTrack = tech.player().addTextTrack('metadata', 'Timed Metadata');

      // build the dispatch type from the stream descriptor
      // https://html.spec.whatwg.org/multipage/embedded-content.html#steps-to-expose-a-media-resource-specific-text-track
      textTrack.inBandMetadataTrackDispatchType = videojs.Hls.SegmentParser.STREAM_TYPES.metadata.toString(16).toUpperCase();
      for (i = 0; i < metadataStream.descriptor.length; i++) {
        hexDigit = ('00' + metadataStream.descriptor[i].toString(16).toUpperCase()).slice(-2);
        textTrack.inBandMetadataTrackDispatchType += hexDigit;
      }
    }

    // store this event for processing once the muxing has finished
    tech.segmentBuffer_[0].pendingMetadata.push({
      textTrack: textTrack,
      metadata: metadata
    });
  });

  // when seeking, clear out all cues ahead of the earliest position
  // in the new segment. keep earlier cues around so they can still be
  // programmatically inspected even though they've already fired
  tech.on(tech.player(), 'seeking', function() {
    var media, startTime, i;
    if (!textTrack) {
      return;
    }
    media = tech.playlists.media();
    startTime = tech.playlists.expiredPreDiscontinuity_ + tech.playlists.expiredPostDiscontinuity_;
    startTime += videojs.Hls.Playlist.duration(media, media.mediaSequence, media.mediaSequence + tech.mediaIndex);

    i = textTrack.cues.length;
    while (i--) {
      if (textTrack.cues[i].startTime >= startTime) {
        textTrack.removeCue(textTrack.cues[i]);
      }
    }
  });
};

videojs.Hls.prototype.addCuesForMetadata_ = function(segmentInfo) {
  var i, cue, frame, metadata, minPts, segment, segmentOffset, textTrack, time;
  segmentOffset = videojs.Hls.Playlist.duration(segmentInfo.playlist,
                                                segmentInfo.playlist.mediaSequence,
                                                segmentInfo.playlist.mediaSequence + segmentInfo.mediaIndex);
  segment = segmentInfo.playlist.segments[segmentInfo.mediaIndex];
  minPts = Math.min(segment.minVideoPts, segment.minAudioPts);

  while (segmentInfo.pendingMetadata.length) {
    metadata = segmentInfo.pendingMetadata[0].metadata;
    textTrack = segmentInfo.pendingMetadata[0].textTrack;

    // create cue points for all the ID3 frames in this metadata event
    for (i = 0; i < metadata.frames.length; i++) {
      frame = metadata.frames[i];
      time = segmentOffset + ((metadata.pts - minPts) * 0.001);
      cue = new window.VTTCue(time, time, frame.value || frame.url || '');
      cue.frame = frame;
      textTrack.addCue(cue);
    }
    segmentInfo.pendingMetadata.shift();
  }
};

/**
 * Reset the mediaIndex if play() is called after the video has
 * ended.
 */
videojs.Hls.prototype.play = function() {
  if (this.ended()) {
    this.mediaIndex = 0;
  }

  // we may need to seek to begin playing safely for live playlists
  if (this.duration() === Infinity) {

    // if this is the first time we're playing the stream or we're
    // ahead of the latest safe playback position, seek to the live
    // point
    if (!this.player().hasClass('vjs-has-started') ||
        this.currentTime() > this.seekable().end(0)) {
      this.setCurrentTime(this.seekable().end(0));

    } else if (this.currentTime() < this.seekable().start(0)) {
      // if the viewer has paused and we fell out of the live window,
      // seek forward to the earliest available position
      this.setCurrentTime(this.seekable().start(0));
    }
  }

  // delegate back to the Flash implementation
  return videojs.Flash.prototype.play.apply(this, arguments);
};

videojs.Hls.prototype.currentTime = function() {
  if (this.lastSeekedTime_) {
    return this.lastSeekedTime_;
  }
  // currentTime is zero while the tech is initializing
  if (!this.el() || !this.el().vjs_getProperty) {
    return 0;
  }
  return this.el().vjs_getProperty('currentTime');
};

videojs.Hls.prototype.setCurrentTime = function(currentTime) {
  if (!(this.playlists && this.playlists.media())) {
    // return immediately if the metadata is not ready yet
    return 0;
  }

  // it's clearly an edge-case but don't thrown an error if asked to
  // seek within an empty playlist
  if (!this.playlists.media().segments) {
    return 0;
  }

  // clamp seeks to the available seekable time range
  if (currentTime < this.seekable().start(0)) {
    currentTime = this.seekable().start(0);
  } else if (currentTime > this.seekable().end(0)) {
    currentTime = this.seekable().end(0);
  }

  // save the seek target so currentTime can report it correctly
  // while the seek is pending
  this.lastSeekedTime_ = currentTime;

  // determine the requested segment
  this.mediaIndex = this.playlists.getMediaIndexForTime_(currentTime);

  // abort any segments still being decoded
  this.sourceBuffer.abort();

  // cancel outstanding requests and buffer appends
  this.cancelSegmentXhr();

  // abort outstanding key requests, if necessary
  if (keyXhr) {
    keyXhr.aborted = true;
    this.cancelKeyXhr();
  }

  // clear out any buffered segments
  this.segmentBuffer_ = [];

  // begin filling the buffer at the new position
  this.fillBuffer(currentTime * 1000);
};

videojs.Hls.prototype.duration = function() {
  var playlists = this.playlists;
  if (playlists) {
    return videojs.Hls.Playlist.duration(playlists.media());
  }
  return 0;
};

videojs.Hls.prototype.seekable = function() {
  var currentSeekable, startOffset, media;

  if (!this.playlists) {
    return videojs.createTimeRange();
  }
  media = this.playlists.media();
  if (!media) {
    return videojs.createTimeRange();
  }

  // report the seekable range relative to the earliest possible
  // position when the stream was first loaded
  currentSeekable = videojs.Hls.Playlist.seekable(media);
  startOffset = this.playlists.expiredPostDiscontinuity_ - this.playlists.expiredPreDiscontinuity_;
  return videojs.createTimeRange(startOffset,
                                 startOffset + (currentSeekable.end(0) - currentSeekable.start(0)));
};

/**
 * Update the player duration
 */
videojs.Hls.prototype.updateDuration = function(playlist) {
  var player = this.player(),
      oldDuration = player.duration(),
      newDuration = videojs.Hls.Playlist.duration(playlist);

  // if the duration has changed, invalidate the cached value
  if (oldDuration !== newDuration) {
    player.trigger('durationchange');
  }
};

/**
 * Clear all buffers and reset any state relevant to the current
 * source. After this function is called, the tech should be in a
 * state suitable for switching to a different video.
 */
videojs.Hls.prototype.resetSrc_ = function() {
  this.cancelSegmentXhr();
  this.cancelKeyXhr();

  if (this.sourceBuffer) {
    this.sourceBuffer.abort();
  }
};

videojs.Hls.prototype.cancelKeyXhr = function() {
  if (keyXhr) {
    keyXhr.onreadystatechange = null;
    keyXhr.abort();
    keyXhr = null;
  }
};

videojs.Hls.prototype.cancelSegmentXhr = function() {
  if (this.segmentXhr_) {
    // Prevent error handler from running.
    this.segmentXhr_.onreadystatechange = null;
    this.segmentXhr_.abort();
    this.segmentXhr_ = null;
  }
};

/**
 * Abort all outstanding work and cleanup.
 */
videojs.Hls.prototype.dispose = function() {
  this.stopCheckingBuffer_();

  if (this.playlists) {
    this.playlists.dispose();
  }

  this.resetSrc_();

  videojs.Flash.prototype.dispose.call(this);
};

/**
 * Chooses the appropriate media playlist based on the current
 * bandwidth estimate and the player size.
 * @return the highest bitrate playlist less than the currently detected
 * bandwidth, accounting for some amount of bandwidth variance
 */
videojs.Hls.prototype.selectPlaylist = function () {
  var
    player = this.player(),
    effectiveBitrate,
    sortedPlaylists = this.playlists.master.playlists.slice(),
    bandwidthPlaylists = [],
    i = sortedPlaylists.length,
    variant,
    oldvariant,
    bandwidthBestVariant,
    resolutionPlusOne,
    resolutionBestVariant,
    playerWidth,
    playerHeight;

  sortedPlaylists.sort(videojs.Hls.comparePlaylistBandwidth);

  // filter out any variant that has greater effective bitrate
  // than the current estimated bandwidth
  while (i--) {
    variant = sortedPlaylists[i];

    // ignore playlists without bandwidth information
    if (!variant.attributes || !variant.attributes.BANDWIDTH) {
      continue;
    }

    effectiveBitrate = variant.attributes.BANDWIDTH * bandwidthVariance;

    if (effectiveBitrate < player.hls.bandwidth) {
      bandwidthPlaylists.push(variant);

      // since the playlists are sorted in ascending order by
      // bandwidth, the first viable variant is the best
      if (!bandwidthBestVariant) {
        bandwidthBestVariant = variant;
      }
    }
  }

  i = bandwidthPlaylists.length;

  // sort variants by resolution
  bandwidthPlaylists.sort(videojs.Hls.comparePlaylistResolution);

  // forget our old variant from above, or we might choose that in high-bandwidth scenarios
  // (this could be the lowest bitrate rendition as  we go through all of them above)
  variant = null;

  playerWidth = parseInt(getComputedStyle(player.el()).width, 10);
  playerHeight = parseInt(getComputedStyle(player.el()).height, 10);

  // iterate through the bandwidth-filtered playlists and find
  // best rendition by player dimension
  while (i--) {
    oldvariant = variant;
    variant = bandwidthPlaylists[i];

    // ignore playlists without resolution information
    if (!variant.attributes ||
        !variant.attributes.RESOLUTION ||
        !variant.attributes.RESOLUTION.width ||
        !variant.attributes.RESOLUTION.height) {
      continue;
    }


    // since the playlists are sorted, the first variant that has
    // dimensions less than or equal to the player size is the best
    if (variant.attributes.RESOLUTION.width === playerWidth &&
        variant.attributes.RESOLUTION.height === playerHeight) {
      // if we have the exact resolution as the player use it
      resolutionPlusOne = null;
      resolutionBestVariant = variant;
      break;
    } else if (variant.attributes.RESOLUTION.width < playerWidth &&
        variant.attributes.RESOLUTION.height < playerHeight) {
      // if we don't have an exact match, see if we have a good higher quality variant to use
      if (oldvariant && oldvariant.attributes && oldvariant.attributes.RESOLUTION &&
          oldvariant.attributes.RESOLUTION.width && oldvariant.attributes.RESOLUTION.height) {
        resolutionPlusOne = oldvariant;
      }
      resolutionBestVariant = variant;
      break;
    }
  }

  // fallback chain of variants
  return resolutionPlusOne || resolutionBestVariant || bandwidthBestVariant || sortedPlaylists[0];
};

/**
 * Periodically request new segments and append video data.
 */
videojs.Hls.prototype.checkBuffer_ = function() {
  // calling this method directly resets any outstanding buffer checks
  if (this.checkBufferTimeout_) {
    window.clearTimeout(this.checkBufferTimeout_);
    this.checkBufferTimeout_ = null;
  }

  this.fillBuffer();
  this.drainBuffer();

  // wait awhile and try again
  this.checkBufferTimeout_ = window.setTimeout(videojs.bind(this, this.checkBuffer_),
                                               bufferCheckInterval);
};

/**
 * Setup a periodic task to request new segments if necessary and
 * append bytes into the SourceBuffer.
 */
videojs.Hls.prototype.startCheckingBuffer_ = function() {
  // if the player ever stalls, check if there is video data available
  // to append immediately
  this.player().on('waiting', videojs.bind(this, this.drainBuffer));

  this.checkBuffer_();
};

/**
 * Stop the periodic task requesting new segments and feeding the
 * SourceBuffer.
 */
videojs.Hls.prototype.stopCheckingBuffer_ = function() {
  window.clearTimeout(this.checkBufferTimeout_);
  this.checkBufferTimeout_ = null;
  this.player().off('waiting', this.drainBuffer);
};

/**
 * Determines whether there is enough video data currently in the buffer
 * and downloads a new segment if the buffered time is less than the goal.
 * @param offset (optional) {number} the offset into the downloaded segment
 * to seek to, in milliseconds
 */
videojs.Hls.prototype.fillBuffer = function(offset) {
  var
    player = this.player(),
    buffered = player.buffered(),
    bufferedTime = 0,
    segment,
    segmentUri;

  // if preload is set to "none", do not download segments until playback is requested
  if (!player.hasClass('vjs-has-started') &&
      player.options().preload === 'none') {
    return;
  }

  // if a video has not been specified, do nothing
  if (!player.currentSrc() || !this.playlists) {
    return;
  }

  // if there is a request already in flight, do nothing
  if (this.segmentXhr_) {
    return;
  }

  // if no segments are available, do nothing
  if (this.playlists.state === "HAVE_NOTHING" ||
      !this.playlists.media() ||
      !this.playlists.media().segments) {
    return;
  }

  // if this is a live video wait until playback has been requested to
  // being buffering so we don't preload data that will never be
  // played
  if (!this.playlists.media().endList &&
      !this.player().hasClass('vjs-has-started') &&
      offset === undefined) {
    return;
  }

  // if a playlist switch is in progress, wait for it to finish
  if (this.playlists.state === 'SWITCHING_MEDIA') {
    return;
  }

  // if the video has finished downloading, stop trying to buffer
  segment = this.playlists.media().segments[this.mediaIndex];
  if (!segment) {
    return;
  }

  if (buffered) {
    // assuming a single, contiguous buffer region
    bufferedTime = player.buffered().end(0) - player.currentTime();
  }

  // if there is plenty of content in the buffer and we're not
  // seeking, relax for awhile
  if (typeof offset !== 'number' && bufferedTime >= videojs.Hls.GOAL_BUFFER_LENGTH) {
    return;
  }

  // resolve the segment URL relative to the playlist
  segmentUri = this.playlistUriToUrl(segment.uri);

  this.loadSegment(segmentUri, offset);
};

videojs.Hls.prototype.playlistUriToUrl = function(segmentRelativeUrl) {
  var playListUrl;
    // resolve the segment URL relative to the playlist
  if (this.playlists.media().uri === this.src_) {
    playListUrl = resolveUrl(this.src_, segmentRelativeUrl);
  } else {
    playListUrl = resolveUrl(resolveUrl(this.src_, this.playlists.media().uri || ''), segmentRelativeUrl);
  }
  return playListUrl;
};

/*
 * Sets `bandwidth`, `segmentXhrTime`, and appends to the `bytesReceived.
 * Expects an object with:
 *  * `roundTripTime` - the round trip time for the request we're setting the time for
 *  * `bandwidth` - the bandwidth we want to set
 *  * `bytesReceived` - amount of bytes downloaded
 * `bandwidth` is the only required property.
 */
videojs.Hls.prototype.setBandwidth = function(xhr) {
  var tech = this;
  // calculate the download bandwidth
  tech.segmentXhrTime = xhr.roundTripTime;
  tech.bandwidth = xhr.bandwidth;
  tech.bytesReceived += xhr.bytesReceived || 0;

  tech.trigger('bandwidthupdate');
};

videojs.Hls.prototype.loadSegment = function(segmentUri, offset) {
  var
    tech = this,
    player = this.player(),
    settings = player.options().hls || {};

  // request the next segment
  this.segmentXhr_ = videojs.Hls.xhr({
    url: segmentUri,
    responseType: 'arraybuffer',
    withCredentials: settings.withCredentials
  }, function(error, url) {
    var segmentInfo;

    // the segment request is no longer outstanding
    tech.segmentXhr_ = null;

    if (error) {
      // if a segment request times out, we may have better luck with another playlist
      if (error === 'timeout') {
        tech.bandwidth = 1;
        return tech.playlists.media(tech.selectPlaylist());
      }
      // otherwise, try jumping ahead to the next segment
      tech.error = {
        status: this.status,
        message: 'HLS segment request error at URL: ' + url,
        code: (this.status >= 500) ? 4 : 2
      };

      // try moving on to the next segment
      tech.mediaIndex++;
      return;
    }

    // stop processing if the request was aborted
    if (!this.response) {
      return;
    }

    tech.setBandwidth(this);

    // package up all the work to append the segment
    segmentInfo = {
      // the segment's mediaIndex at the time it was received
      mediaIndex: tech.mediaIndex,
      // the segment's playlist
      playlist: tech.playlists.media(),
      // optionally, a time offset to seek to within the segment
      offset: offset,
      // unencrypted bytes of the segment
      bytes: null,
      // when a key is defined for this segment, the encrypted bytes
      encryptedBytes: null,
      // optionally, the decrypter that is unencrypting the segment
      decrypter: null,
      // metadata events discovered during muxing that need to be
      // translated into cue points
      pendingMetadata: []
    };
    if (segmentInfo.playlist.segments[segmentInfo.mediaIndex].key) {
      segmentInfo.encryptedBytes = new Uint8Array(this.response);
    } else {
      segmentInfo.bytes = new Uint8Array(this.response);
    }
    tech.segmentBuffer_.push(segmentInfo);
    player.trigger('progress');
    tech.drainBuffer();

    tech.mediaIndex++;

    // figure out what stream the next segment should be downloaded from
    // with the updated bandwidth information
    tech.playlists.media(tech.selectPlaylist());
  });
};

videojs.Hls.prototype.drainBuffer = function(event) {
  var
    i = 0,
    segmentInfo,
    mediaIndex,
    playlist,
    offset,
    tags,
    bytes,
    segment,
    decrypter,
    segIv,
    ptsTime,
    segmentOffset = 0,
    segmentBuffer = this.segmentBuffer_;

  // if the buffer is empty or the source buffer hasn't been created
  // yet, do nothing
  if (!segmentBuffer.length || !this.sourceBuffer) {
    return;
  }

  // we can't append more data if the source buffer is busy processing
  // what we've already sent
  if (this.sourceBuffer.updating) {
    return;
  }

  segmentInfo = segmentBuffer[0];

  mediaIndex = segmentInfo.mediaIndex;
  playlist = segmentInfo.playlist;
  offset = segmentInfo.offset;
  bytes = segmentInfo.bytes;
  segment = playlist.segments[mediaIndex];

  if (segment.key && !bytes) {

    // this is an encrypted segment
    // if the key download failed, we want to skip this segment
    // but if the key hasn't downloaded yet, we want to try again later
    if (keyFailed(segment.key)) {
      return segmentBuffer.shift();
    } else if (!segment.key.bytes) {

      // trigger a key request if one is not already in-flight
      return this.fetchKeys_();

    } else if (segmentInfo.decrypter) {

      // decryption is in progress, try again later
      return;

    } else {
      // if the media sequence is greater than 2^32, the IV will be incorrect
      // assuming 10s segments, that would be about 1300 years
      segIv = segment.key.iv || new Uint32Array([0, 0, 0, mediaIndex + playlist.mediaSequence]);

      // create a decrypter to incrementally decrypt the segment
      decrypter = new videojs.Hls.Decrypter(segmentInfo.encryptedBytes,
                                            segment.key.bytes,
                                            segIv,
                                            function(err, bytes) {
                                              segmentInfo.bytes = bytes;
                                            });
      segmentInfo.decrypter = decrypter;
      return;
    }
  }

  event = event || {};

  // transmux the segment data from MP2T to FLV
  this.segmentParser_.parseSegmentBinaryData(bytes);
  this.segmentParser_.flushTags();

  tags = [];

  if (this.segmentParser_.tagsAvailable()) {
    // record PTS information for the segment so we can calculate
    // accurate durations and seek reliably
    if (this.segmentParser_.stats.h264Tags()) {
      segment.minVideoPts = this.segmentParser_.stats.minVideoPts();
      segment.maxVideoPts = this.segmentParser_.stats.maxVideoPts();
    }
    if (this.segmentParser_.stats.aacTags()) {
      segment.minAudioPts = this.segmentParser_.stats.minAudioPts();
      segment.maxAudioPts = this.segmentParser_.stats.maxAudioPts();
    }
  }

  while (this.segmentParser_.tagsAvailable()) {
    tags.push(this.segmentParser_.getNextTag());
  }

  this.addCuesForMetadata_(segmentInfo);
  this.updateDuration(this.playlists.media());

  // if we're refilling the buffer after a seek, scan through the muxed
  // FLV tags until we find the one that is closest to the desired
  // playback time
  if (typeof offset === 'number') {
    // determine the offset within this segment we're seeking to
    segmentOffset = this.playlists.expiredPostDiscontinuity_ + this.playlists.expiredPreDiscontinuity_;
    segmentOffset += videojs.Hls.Playlist.duration(playlist,
                                                   playlist.mediaSequence,
                                                   playlist.mediaSequence + mediaIndex);
    segmentOffset = offset - (segmentOffset * 1000);
    ptsTime = segmentOffset + tags[0].pts;

    while (tags[i + 1] && tags[i].pts < ptsTime) {
      i++;
    }

    // tell the SWF the media position of the first tag we'll be delivering
    this.el().vjs_setProperty('currentTime', ((tags[i].pts - ptsTime + offset) * 0.001));

    tags = tags.slice(i);

    this.lastSeekedTime_ = null;
  }

  // when we're crossing a discontinuity, inject metadata to indicate
  // that the decoder should be reset appropriately
  if (segment.discontinuity && tags.length) {
    this.el().vjs_discontinuity();
  }

  (function() {
    var segmentByteLength = 0, j, segment;
    for (i = 0; i < tags.length; i++) {
      segmentByteLength += tags[i].bytes.byteLength;
    }
    segment = new Uint8Array(segmentByteLength);
    for (i = 0, j = 0; i < tags.length; i++) {
      segment.set(tags[i].bytes, j);
      j += tags[i].bytes.byteLength;
    }
    this.sourceBuffer.appendBuffer(segment);
  }).call(this);

  // we're done processing this segment
  segmentBuffer.shift();

  // transition the sourcebuffer to the ended state if we've hit the end of
  // the playlist
  if (this.duration() !== Infinity && mediaIndex + 1 === playlist.segments.length) {
    this.mediaSource.endOfStream();
  }
};

/**
 * Attempt to retrieve keys starting at a particular media
 * segment. This method has no effect if segments are not yet
 * available or a key request is already in progress.
 *
 * @param playlist {object} the media playlist to fetch keys for
 * @param index {number} the media segment index to start from
 */
videojs.Hls.prototype.fetchKeys_ = function() {
  var i, key, tech, player, settings, segment, view, receiveKey;

  // if there is a pending XHR or no segments, don't do anything
  if (keyXhr || !this.segmentBuffer_.length) {
    return;
  }

  tech = this;
  player = this.player();
  settings = player.options().hls || {};

  /**
   * Handle a key XHR response. This function needs to lookup the
   */
  receiveKey = function(key) {
    return function(error) {
      keyXhr = null;

      if (error || !this.response || this.response.byteLength !== 16) {
        key.retries = key.retries || 0;
        key.retries++;
        if (!this.aborted) {
          // try fetching again
          tech.fetchKeys_();
        }
        return;
      }

      view = new DataView(this.response);
      key.bytes = new Uint32Array([
        view.getUint32(0),
        view.getUint32(4),
        view.getUint32(8),
        view.getUint32(12)
      ]);

      // check to see if this allows us to make progress buffering now
      tech.checkBuffer_();
    };
  };

  for (i = 0; i < tech.segmentBuffer_.length; i++) {
    segment = tech.segmentBuffer_[i].playlist.segments[tech.segmentBuffer_[i].mediaIndex];
    key = segment.key;

    // continue looking if this segment is unencrypted
    if (!key) {
      continue;
    }

    // request the key if the retry limit hasn't been reached
    if (!key.bytes && !keyFailed(key)) {
      keyXhr = videojs.Hls.xhr({
        url: this.playlistUriToUrl(key.uri),
        responseType: 'arraybuffer',
        withCredentials: settings.withCredentials
      }, receiveKey(key));
      break;
    }
  }
};

/**
 * Whether the browser has built-in HLS support.
 */
videojs.Hls.supportsNativeHls = (function() {
  var
    video = document.createElement('video'),
    xMpegUrl,
    vndMpeg;

  // native HLS is definitely not supported if HTML5 video isn't
  if (!videojs.Html5.isSupported()) {
    return false;
  }

  xMpegUrl = video.canPlayType('application/x-mpegURL');
  vndMpeg = video.canPlayType('application/vnd.apple.mpegURL');
  return (/probably|maybe/).test(xMpegUrl) ||
    (/probably|maybe/).test(vndMpeg);
})();

videojs.Hls.isSupported = function() {

  // Only use the HLS tech if native HLS isn't available
  return !videojs.Hls.supportsNativeHls &&
    // Flash must be supported for the fallback to work
    videojs.Flash.isSupported() &&
    // Media sources must be available to stream bytes to Flash
    videojs.MediaSource &&
    // Typed arrays are used to repackage the segments
    window.Uint8Array;
};

videojs.Hls.canPlaySource = function(srcObj) {
  var mpegurlRE = /^application\/(?:x-|vnd\.apple\.)mpegurl/i;
  return mpegurlRE.test(srcObj.type);
};

/**
 * Calculate the duration of a playlist from a given start index to a given
 * end index.
 * @param playlist {object} a media playlist object
 * @param startIndex {number} an inclusive lower boundary for the playlist.
 * Defaults to 0.
 * @param endIndex {number} an exclusive upper boundary for the playlist.
 * Defaults to playlist length.
 * @return {number} the duration between the start index and end index.
 */
videojs.Hls.getPlaylistDuration = function(playlist, startIndex, endIndex) {
  videojs.log.warn('videojs.Hls.getPlaylistDuration is deprecated. ' +
                   'Use videojs.Hls.Playlist.duration instead');
  return videojs.Hls.Playlist.duration(playlist, startIndex, endIndex);
};

/**
 * Calculate the total duration for a playlist based on segment metadata.
 * @param playlist {object} a media playlist object
 * @return {number} the currently known duration, in seconds
 */
videojs.Hls.getPlaylistTotalDuration = function(playlist) {
  videojs.log.warn('videojs.Hls.getPlaylistTotalDuration is deprecated. ' +
                   'Use videojs.Hls.Playlist.duration instead');
  return videojs.Hls.Playlist.duration(playlist);
};

/**
 * Determine the media index in one playlist that corresponds to a
 * specified media index in another. This function can be used to
 * calculate a new segment position when a playlist is reloaded or a
 * variant playlist is becoming active.
 * @param mediaIndex {number} the index into the original playlist
 * to translate
 * @param original {object} the playlist to translate the media
 * index from
 * @param update {object} the playlist to translate the media index
 * to
 * @param {number} the corresponding media index in the updated
 * playlist
 */
videojs.Hls.translateMediaIndex = function(mediaIndex, original, update) {
  var translatedMediaIndex;

  // no segments have been loaded from the original playlist
  if (mediaIndex === 0) {
    return 0;
  }

  if (!(update && update.segments)) {
    // let the media index be zero when there are no segments defined
    return 0;
  }

  // translate based on media sequence numbers. syncing up across
  // bitrate switches should be happening here.
  translatedMediaIndex = (mediaIndex + (original.mediaSequence - update.mediaSequence));

  if (translatedMediaIndex > update.segments.length || translatedMediaIndex < 0) {
    // recalculate the live point if the streams are too far out of sync
    return videojs.Hls.getMediaIndexForLive_(update) + 1;
  }

  return translatedMediaIndex;
};

/**
 * Deprecated.
 *
 * @deprecated use player.hls.playlists.getMediaIndexForTime_() instead
 */
videojs.Hls.getMediaIndexByTime = function() {
  videojs.log.warn('getMediaIndexByTime is deprecated. ' +
                   'Use PlaylistLoader.getMediaIndexForTime_ instead.');
  return 0;
};

/**
 * A comparator function to sort two playlist object by bandwidth.
 * @param left {object} a media playlist object
 * @param right {object} a media playlist object
 * @return {number} Greater than zero if the bandwidth attribute of
 * left is greater than the corresponding attribute of right. Less
 * than zero if the bandwidth of right is greater than left and
 * exactly zero if the two are equal.
 */
videojs.Hls.comparePlaylistBandwidth = function(left, right) {
  var leftBandwidth, rightBandwidth;
  if (left.attributes && left.attributes.BANDWIDTH) {
    leftBandwidth = left.attributes.BANDWIDTH;
  }
  leftBandwidth = leftBandwidth || window.Number.MAX_VALUE;
  if (right.attributes && right.attributes.BANDWIDTH) {
    rightBandwidth = right.attributes.BANDWIDTH;
  }
  rightBandwidth = rightBandwidth || window.Number.MAX_VALUE;

  return leftBandwidth - rightBandwidth;
};

/**
 * A comparator function to sort two playlist object by resolution (width).
 * @param left {object} a media playlist object
 * @param right {object} a media playlist object
 * @return {number} Greater than zero if the resolution.width attribute of
 * left is greater than the corresponding attribute of right. Less
 * than zero if the resolution.width of right is greater than left and
 * exactly zero if the two are equal.
 */
videojs.Hls.comparePlaylistResolution = function(left, right) {
  var leftWidth, rightWidth;

  if (left.attributes && left.attributes.RESOLUTION && left.attributes.RESOLUTION.width) {
    leftWidth = left.attributes.RESOLUTION.width;
  }

  leftWidth = leftWidth || window.Number.MAX_VALUE;

  if (right.attributes && right.attributes.RESOLUTION && right.attributes.RESOLUTION.width) {
    rightWidth = right.attributes.RESOLUTION.width;
  }

  rightWidth = rightWidth || window.Number.MAX_VALUE;

  // NOTE - Fallback to bandwidth sort as appropriate in cases where multiple renditions
  // have the same media dimensions/ resolution
  if (leftWidth === rightWidth && left.attributes.BANDWIDTH && right.attributes.BANDWIDTH) {
    return left.attributes.BANDWIDTH - right.attributes.BANDWIDTH;
  } else {
    return leftWidth - rightWidth;
  }
};

/**
 * Constructs a new URI by interpreting a path relative to another
 * URI.
 * @param basePath {string} a relative or absolute URI
 * @param path {string} a path part to combine with the base
 * @return {string} a URI that is equivalent to composing `base`
 * with `path`
 * @see http://stackoverflow.com/questions/470832/getting-an-absolute-url-from-a-relative-one-ie6-issue
 */
resolveUrl = videojs.Hls.resolveUrl = function(basePath, path) {
  // use the base element to get the browser to handle URI resolution
  var
    oldBase = document.querySelector('base'),
    docHead = document.querySelector('head'),
    a = document.createElement('a'),
    base = oldBase,
    oldHref,
    result;

  // prep the document
  if (oldBase) {
    oldHref = oldBase.href;
  } else {
    base = docHead.appendChild(document.createElement('base'));
  }

  base.href = basePath;
  a.href = path;
  result = a.href;

  // clean up
  if (oldBase) {
    oldBase.href = oldHref;
  } else {
    docHead.removeChild(base);
  }
  return result;
};

})(window, window.videojs, document);

(function(videojs, undefined) {
  var Stream = function() {
    this.init = function() {
      var listeners = {};
      /**
       * Add a listener for a specified event type.
       * @param type {string} the event name
       * @param listener {function} the callback to be invoked when an event of
       * the specified type occurs
       */
      this.on = function(type, listener) {
        if (!listeners[type]) {
          listeners[type] = [];
        }
        listeners[type].push(listener);
      };
      /**
       * Remove a listener for a specified event type.
       * @param type {string} the event name
       * @param listener {function} a function previously registered for this
       * type of event through `on`
       */
      this.off = function(type, listener) {
        var index;
        if (!listeners[type]) {
          return false;
        }
        index = listeners[type].indexOf(listener);
        listeners[type].splice(index, 1);
        return index > -1;
      };
      /**
       * Trigger an event of the specified type on this stream. Any additional
       * arguments to this function are passed as parameters to event listeners.
       * @param type {string} the event name
       */
      this.trigger = function(type) {
        var callbacks, i, length, args;
        callbacks = listeners[type];
        if (!callbacks) {
          return;
        }
        args = Array.prototype.slice.call(arguments, 1);
        length = callbacks.length;
        for (i = 0; i < length; ++i) {
          callbacks[i].apply(this, args);
        }
      };
      /**
       * Destroys the stream and cleans up.
       */
      this.dispose = function() {
        listeners = {};
      };
    };
  };
  /**
   * Forwards all `data` events on this stream to the destination stream. The
   * destination stream should provide a method `push` to receive the data
   * events as they arrive.
   * @param destination {stream} the stream that will receive all `data` events
   * @see http://nodejs.org/api/stream.html#stream_readable_pipe_destination_options
   */
  Stream.prototype.pipe = function(destination) {
    this.on('data', function(data) {
      destination.push(data);
    });
  };

  videojs.Hls.Stream = Stream;
})(window.videojs);

(function(window) {

window.videojs = window.videojs || {};
window.videojs.Hls = window.videojs.Hls || {};

var hls = window.videojs.Hls;

// (type:uint, extraData:Boolean = false) extends ByteArray
hls.FlvTag = function(type, extraData) {
  var
    // Counter if this is a metadata tag, nal start marker if this is a video
    // tag. unused if this is an audio tag
    adHoc = 0, // :uint

    // checks whether the FLV tag has enough capacity to accept the proposed
    // write and re-allocates the internal buffers if necessary
    prepareWrite = function(flv, count) {
      var
        bytes,
        minLength = flv.position + count;
      if (minLength < flv.bytes.byteLength) {
        // there's enough capacity so do nothing
        return;
      }

      // allocate a new buffer and copy over the data that will not be modified
      bytes = new Uint8Array(minLength * 2);
      bytes.set(flv.bytes.subarray(0, flv.position), 0);
      flv.bytes = bytes;
      flv.view = new DataView(flv.bytes.buffer);
    },

    // commonly used metadata properties
    widthBytes = hls.FlvTag.widthBytes || new Uint8Array('width'.length),
    heightBytes = hls.FlvTag.heightBytes || new Uint8Array('height'.length),
    videocodecidBytes = hls.FlvTag.videocodecidBytes || new Uint8Array('videocodecid'.length),
    i;

  if (!hls.FlvTag.widthBytes) {
    // calculating the bytes of common metadata names ahead of time makes the
    // corresponding writes faster because we don't have to loop over the
    // characters
    // re-test with test/perf.html if you're planning on changing this
    for (i = 0; i < 'width'.length; i++) {
      widthBytes[i] = 'width'.charCodeAt(i);
    }
    for (i = 0; i < 'height'.length; i++) {
      heightBytes[i] = 'height'.charCodeAt(i);
    }
    for (i = 0; i < 'videocodecid'.length; i++) {
      videocodecidBytes[i] = 'videocodecid'.charCodeAt(i);
    }

    hls.FlvTag.widthBytes = widthBytes;
    hls.FlvTag.heightBytes = heightBytes;
    hls.FlvTag.videocodecidBytes = videocodecidBytes;
  }

  this.keyFrame = false; // :Boolean

  switch(type) {
  case hls.FlvTag.VIDEO_TAG:
    this.length = 16;
    break;
  case hls.FlvTag.AUDIO_TAG:
    this.length = 13;
    this.keyFrame = true;
    break;
  case hls.FlvTag.METADATA_TAG:
    this.length = 29;
    this.keyFrame = true;
    break;
  default:
    throw("Error Unknown TagType");
  }

  this.bytes = new Uint8Array(16384);
  this.view = new DataView(this.bytes.buffer);
  this.bytes[0] = type;
  this.position = this.length;
  this.keyFrame = extraData; // Defaults to false

  // presentation timestamp
  this.pts = 0;
  // decoder timestamp
  this.dts = 0;

  // ByteArray#writeBytes(bytes:ByteArray, offset:uint = 0, length:uint = 0)
  this.writeBytes = function(bytes, offset, length) {
    var
      start = offset || 0,
      end;
    length = length || bytes.byteLength;
    end = start + length;

    prepareWrite(this, length);
    this.bytes.set(bytes.subarray(start, end), this.position);

    this.position += length;
    this.length = Math.max(this.length, this.position);
  };

  // ByteArray#writeByte(value:int):void
  this.writeByte = function(byte) {
    prepareWrite(this, 1);
    this.bytes[this.position] = byte;
    this.position++;
    this.length = Math.max(this.length, this.position);
  };

  // ByteArray#writeShort(value:int):void
  this.writeShort = function(short) {
    prepareWrite(this, 2);
    this.view.setUint16(this.position, short);
    this.position += 2;
    this.length = Math.max(this.length, this.position);
  };

  // Negative index into array
  // (pos:uint):int
  this.negIndex = function(pos) {
    return this.bytes[this.length - pos];
  };

  // The functions below ONLY work when this[0] == VIDEO_TAG.
  // We are not going to check for that because we dont want the overhead
  // (nal:ByteArray = null):int
  this.nalUnitSize = function() {
    if (adHoc === 0) {
      return 0;
    }

    return this.length - (adHoc + 4);
  };

  this.startNalUnit = function() {
    // remember position and add 4 bytes
    if (adHoc > 0) {
      throw new Error("Attempted to create new NAL wihout closing the old one");
    }

    // reserve 4 bytes for nal unit size
    adHoc = this.length;
    this.length += 4;
    this.position = this.length;
  };

  // (nal:ByteArray = null):void
  this.endNalUnit = function(nalContainer) {
    var
      nalStart, // :uint
      nalLength; // :uint

    // Rewind to the marker and write the size
    if (this.length === adHoc + 4) {
      // we started a nal unit, but didnt write one, so roll back the 4 byte size value
      this.length -= 4;
    } else if (adHoc > 0) {
      nalStart = adHoc + 4;
      nalLength = this.length - nalStart;

      this.position = adHoc;
      this.view.setUint32(this.position, nalLength);
      this.position = this.length;

      if (nalContainer) {
        // Add the tag to the NAL unit
        nalContainer.push(this.bytes.subarray(nalStart, nalStart + nalLength));
      }
    }

    adHoc = 0;
  };

  /**
   * Write out a 64-bit floating point valued metadata property. This method is
   * called frequently during a typical parse and needs to be fast.
   */
  // (key:String, val:Number):void
  this.writeMetaDataDouble = function(key, val) {
    var i;
    prepareWrite(this, 2 + key.length + 9);

    // write size of property name
    this.view.setUint16(this.position, key.length);
    this.position += 2;

    // this next part looks terrible but it improves parser throughput by
    // 10kB/s in my testing

    // write property name
    if (key === 'width') {
      this.bytes.set(widthBytes, this.position);
      this.position += 5;
    } else if (key === 'height') {
      this.bytes.set(heightBytes, this.position);
      this.position += 6;
    } else if (key === 'videocodecid') {
      this.bytes.set(videocodecidBytes, this.position);
      this.position += 12;
    } else {
      for (i = 0; i < key.length; i++) {
        this.bytes[this.position] = key.charCodeAt(i);
        this.position++;
      }
    }

    // skip null byte
    this.position++;

    // write property value
    this.view.setFloat64(this.position, val);
    this.position += 8;

    // update flv tag length
    this.length = Math.max(this.length, this.position);
    ++adHoc;
  };

  // (key:String, val:Boolean):void
  this.writeMetaDataBoolean = function(key, val) {
    var i;
    prepareWrite(this, 2);
    this.view.setUint16(this.position, key.length);
    this.position += 2;
    for (i = 0; i < key.length; i++) {
      console.assert(key.charCodeAt(i) < 255);
      prepareWrite(this, 1);
      this.bytes[this.position] = key.charCodeAt(i);
      this.position++;
    }
    prepareWrite(this, 2);
    this.view.setUint8(this.position, 0x01);
    this.position++;
    this.view.setUint8(this.position, val ? 0x01 : 0x00);
    this.position++;
    this.length = Math.max(this.length, this.position);
    ++adHoc;
  };

  // ():ByteArray
  this.finalize = function() {
    var
      dtsDelta, // :int
      len; // :int

    switch(this.bytes[0]) {
      // Video Data
    case hls.FlvTag.VIDEO_TAG:
      this.bytes[11] = ((this.keyFrame || extraData) ? 0x10 : 0x20 ) | 0x07; // We only support AVC, 1 = key frame (for AVC, a seekable frame), 2 = inter frame (for AVC, a non-seekable frame)
      this.bytes[12] = extraData ?  0x00 : 0x01;

      dtsDelta = this.pts - this.dts;
      this.bytes[13] = (dtsDelta & 0x00FF0000) >>> 16;
      this.bytes[14] = (dtsDelta & 0x0000FF00) >>>  8;
      this.bytes[15] = (dtsDelta & 0x000000FF) >>>  0;
      break;

    case hls.FlvTag.AUDIO_TAG:
      this.bytes[11] = 0xAF; // 44 kHz, 16-bit stereo
      this.bytes[12] = extraData ? 0x00 : 0x01;
      break;

    case hls.FlvTag.METADATA_TAG:
      this.position = 11;
      this.view.setUint8(this.position, 0x02); // String type
      this.position++;
      this.view.setUint16(this.position, 0x0A); // 10 Bytes
      this.position += 2;
      // set "onMetaData"
      this.bytes.set([0x6f, 0x6e, 0x4d, 0x65,
                      0x74, 0x61, 0x44, 0x61,
                      0x74, 0x61], this.position);
      this.position += 10;
      this.bytes[this.position] = 0x08; // Array type
      this.position++;
      this.view.setUint32(this.position, adHoc);
      this.position = this.length;
      this.bytes.set([0, 0, 9], this.position);
      this.position += 3; // End Data Tag
      this.length = this.position;
      break;
    }

    len = this.length - 11;

    // write the DataSize field
    this.bytes[ 1] = (len & 0x00FF0000) >>> 16;
    this.bytes[ 2] = (len & 0x0000FF00) >>>  8;
    this.bytes[ 3] = (len & 0x000000FF) >>>  0;
    // write the Timestamp
    this.bytes[ 4] = (this.dts & 0x00FF0000) >>> 16;
    this.bytes[ 5] = (this.dts & 0x0000FF00) >>>  8;
    this.bytes[ 6] = (this.dts & 0x000000FF) >>>  0;
    this.bytes[ 7] = (this.dts & 0xFF000000) >>> 24;
    // write the StreamID
    this.bytes[ 8] = 0;
    this.bytes[ 9] = 0;
    this.bytes[10] = 0;

    // Sometimes we're at the end of the view and have one slot to write a
    // uint32, so, prepareWrite of count 4, since, view is uint8
    prepareWrite(this, 4);
    this.view.setUint32(this.length, this.length);
    this.length += 4;
    this.position += 4;

    // trim down the byte buffer to what is actually being used
    this.bytes = this.bytes.subarray(0, this.length);
    this.frameTime = hls.FlvTag.frameTime(this.bytes);
    console.assert(this.bytes.byteLength === this.length);
    return this;
  };
};

hls.FlvTag.AUDIO_TAG = 0x08; // == 8, :uint
hls.FlvTag.VIDEO_TAG = 0x09; // == 9, :uint
hls.FlvTag.METADATA_TAG = 0x12; // == 18, :uint

// (tag:ByteArray):Boolean {
hls.FlvTag.isAudioFrame = function(tag) {
  return hls.FlvTag.AUDIO_TAG === tag[0];
};

// (tag:ByteArray):Boolean {
hls.FlvTag.isVideoFrame = function(tag) {
  return hls.FlvTag.VIDEO_TAG === tag[0];
};

// (tag:ByteArray):Boolean {
hls.FlvTag.isMetaData = function(tag) {
  return hls.FlvTag.METADATA_TAG === tag[0];
};

// (tag:ByteArray):Boolean {
hls.FlvTag.isKeyFrame = function(tag) {
  if (hls.FlvTag.isVideoFrame(tag)) {
    return tag[11] === 0x17;
  }

  if (hls.FlvTag.isAudioFrame(tag)) {
    return true;
  }

  if (hls.FlvTag.isMetaData(tag)) {
    return true;
  }

  return false;
};

// (tag:ByteArray):uint {
hls.FlvTag.frameTime = function(tag) {
  var pts = tag[ 4] << 16; // :uint
  pts |= tag[ 5] <<  8;
  pts |= tag[ 6] <<  0;
  pts |= tag[ 7] << 24;
  return pts;
};

})(this);

(function(window) {

/**
 * Parser for exponential Golomb codes, a variable-bitwidth number encoding
 * scheme used by h264.
 */
window.videojs.Hls.ExpGolomb = function(workingData) {
  var
    // the number of bytes left to examine in workingData
    workingBytesAvailable = workingData.byteLength,

    // the current word being examined
    workingWord = 0, // :uint

    // the number of bits left to examine in the current word
    workingBitsAvailable = 0; // :uint;

  // ():uint
  this.length = function() {
    return (8 * workingBytesAvailable);
  };

  // ():uint
  this.bitsAvailable = function() {
    return (8 * workingBytesAvailable) + workingBitsAvailable;
  };

  // ():void
  this.loadWord = function() {
    var
      position = workingData.byteLength - workingBytesAvailable,
      workingBytes = new Uint8Array(4),
      availableBytes = Math.min(4, workingBytesAvailable);

    if (availableBytes === 0) {
      throw new Error('no bytes available');
    }

    workingBytes.set(workingData.subarray(position,
                                          position + availableBytes));
    workingWord = new DataView(workingBytes.buffer).getUint32(0);

    // track the amount of workingData that has been processed
    workingBitsAvailable = availableBytes * 8;
    workingBytesAvailable -= availableBytes;
  };

  // (count:int):void
  this.skipBits = function(count) {
    var skipBytes; // :int
    if (workingBitsAvailable > count) {
      workingWord          <<= count;
      workingBitsAvailable -= count;
    } else {
      count -= workingBitsAvailable;
      skipBytes = count / 8;

      count -= (skipBytes * 8);
      workingBytesAvailable -= skipBytes;

      this.loadWord();

      workingWord <<= count;
      workingBitsAvailable -= count;
    }
  };

  // (size:int):uint
  this.readBits = function(size) {
    var
      bits = Math.min(workingBitsAvailable, size), // :uint
      valu = workingWord >>> (32 - bits); // :uint

    console.assert(size < 32, 'Cannot read more than 32 bits at a time');

    workingBitsAvailable -= bits;
    if (workingBitsAvailable > 0) {
      workingWord <<= bits;
    } else if (workingBytesAvailable > 0) {
      this.loadWord();
    }

    bits = size - bits;
    if (bits > 0) {
      return valu << bits | this.readBits(bits);
    } else {
      return valu;
    }
  };

  // ():uint
  this.skipLeadingZeros = function() {
    var leadingZeroCount; // :uint
    for (leadingZeroCount = 0 ; leadingZeroCount < workingBitsAvailable ; ++leadingZeroCount) {
      if (0 !== (workingWord & (0x80000000 >>> leadingZeroCount))) {
        // the first bit of working word is 1
        workingWord <<= leadingZeroCount;
        workingBitsAvailable -= leadingZeroCount;
        return leadingZeroCount;
      }
    }

    // we exhausted workingWord and still have not found a 1
    this.loadWord();
    return leadingZeroCount + this.skipLeadingZeros();
  };

  // ():void
  this.skipUnsignedExpGolomb = function() {
    this.skipBits(1 + this.skipLeadingZeros());
  };

  // ():void
  this.skipExpGolomb = function() {
    this.skipBits(1 + this.skipLeadingZeros());
  };

  // ():uint
  this.readUnsignedExpGolomb = function() {
    var clz = this.skipLeadingZeros(); // :uint
    return this.readBits(clz + 1) - 1;
  };

  // ():int
  this.readExpGolomb = function() {
    var valu = this.readUnsignedExpGolomb(); // :int
    if (0x01 & valu) {
      // the number is odd if the low order bit is set
      return (1 + valu) >>> 1; // add 1 to make it even, and divide by 2
    } else {
      return -1 * (valu >>> 1); // divide by two then make it negative
    }
  };

  // Some convenience functions
  // :Boolean
  this.readBoolean = function() {
    return 1 === this.readBits(1);
  };

  // ():int
  this.readUnsignedByte = function() {
    return this.readBits(8);
  };

  this.loadWord();

};
})(this);

(function() {
  var
    H264ExtraData,
    ExpGolomb = window.videojs.Hls.ExpGolomb,
    FlvTag = window.videojs.Hls.FlvTag;

  window.videojs.Hls.H264ExtraData = H264ExtraData = function() {
    this.sps = []; // :Array
    this.pps = []; // :Array
  };

  H264ExtraData.prototype.extraDataExists = function() { // :Boolean
    return this.sps.length > 0;
  };

  // (sizeOfScalingList:int, expGolomb:ExpGolomb):void
  H264ExtraData.prototype.scaling_list = function(sizeOfScalingList, expGolomb) {
    var
      lastScale = 8, // :int
      nextScale = 8, // :int
      j,
      delta_scale; // :int

    for (j = 0; j < sizeOfScalingList; ++j) {
      if (0 !== nextScale) {
        delta_scale = expGolomb.readExpGolomb();
        nextScale = (lastScale + delta_scale + 256) % 256;
        //useDefaultScalingMatrixFlag = ( j = = 0 && nextScale = = 0 )
      }

      lastScale = (nextScale === 0) ? lastScale : nextScale;
      // scalingList[ j ] = ( nextScale == 0 ) ? lastScale : nextScale;
      // lastScale = scalingList[ j ]
    }
  };

  /**
   * RBSP: raw bit-stream payload. The actual encoded video data.
   *
   * SPS: sequence parameter set. Part of the RBSP. Metadata to be applied
   * to a complete video sequence, like width and height.
   */
  H264ExtraData.prototype.getSps0Rbsp = function() { // :ByteArray
    var
      sps = this.sps[0],
      offset = 1,
      start = 1,
      written = 0,
      end = sps.byteLength - 2,
      result = new Uint8Array(sps.byteLength);

    // In order to prevent 0x0000 01 from being interpreted as a
    // NAL start code, occurences of that byte sequence in the
    // RBSP are escaped with an "emulation byte". That turns
    // sequences of 0x0000 01 into 0x0000 0301. When interpreting
    // a NAL payload, they must be filtered back out.
    while (offset < end) {
      if (sps[offset]     === 0x00 &&
          sps[offset + 1] === 0x00 &&
          sps[offset + 2] === 0x03) {
        result.set(sps.subarray(start, offset + 1), written);
        written += offset + 1 - start;
        start = offset + 3;
      }
      offset++;
    }
    result.set(sps.subarray(start), written);
    return result.subarray(0, written + (sps.byteLength - start));
  };

  // (pts:uint):FlvTag
  H264ExtraData.prototype.metaDataTag = function(pts) {
    var
      tag = new FlvTag(FlvTag.METADATA_TAG), // :FlvTag
      expGolomb, // :ExpGolomb
      profile_idc, // :int
      chroma_format_idc, // :int
      imax, // :int
      i, // :int

      pic_order_cnt_type, // :int
      num_ref_frames_in_pic_order_cnt_cycle, // :uint

      pic_width_in_mbs_minus1, // :int
      pic_height_in_map_units_minus1, // :int

      frame_mbs_only_flag, // :int
      frame_cropping_flag, // :Boolean

      frame_crop_left_offset = 0, // :int
      frame_crop_right_offset = 0, // :int
      frame_crop_top_offset = 0, // :int
      frame_crop_bottom_offset = 0, // :int

      width,
      height;

      tag.dts = pts;
      tag.pts = pts;
      expGolomb = new ExpGolomb(this.getSps0Rbsp());

    // :int = expGolomb.readUnsignedByte(); // profile_idc u(8)
    profile_idc = expGolomb.readUnsignedByte();

    // constraint_set[0-5]_flag, u(1), reserved_zero_2bits u(2), level_idc u(8)
    expGolomb.skipBits(16);

    // seq_parameter_set_id
    expGolomb.skipUnsignedExpGolomb();

    if (profile_idc === 100 ||
        profile_idc === 110 ||
        profile_idc === 122 ||
        profile_idc === 244 ||
        profile_idc === 44 ||
        profile_idc === 83 ||
        profile_idc === 86 ||
        profile_idc === 118 ||
        profile_idc === 128) {
      chroma_format_idc = expGolomb.readUnsignedExpGolomb();
      if (3 === chroma_format_idc) {
        expGolomb.skipBits(1); // separate_colour_plane_flag
      }
      expGolomb.skipUnsignedExpGolomb(); // bit_depth_luma_minus8
      expGolomb.skipUnsignedExpGolomb(); // bit_depth_chroma_minus8
      expGolomb.skipBits(1); // qpprime_y_zero_transform_bypass_flag
      if (expGolomb.readBoolean()) { // seq_scaling_matrix_present_flag
        imax = (chroma_format_idc !== 3) ? 8 : 12;
        for (i = 0 ; i < imax ; ++i) {
          if (expGolomb.readBoolean()) { // seq_scaling_list_present_flag[ i ]
            if (i < 6) {
              this.scaling_list(16, expGolomb);
            } else {
              this.scaling_list(64, expGolomb);
            }
          }
        }
      }
    }

    expGolomb.skipUnsignedExpGolomb(); // log2_max_frame_num_minus4
    pic_order_cnt_type = expGolomb.readUnsignedExpGolomb();

    if ( 0 === pic_order_cnt_type ) {
      expGolomb.readUnsignedExpGolomb(); //log2_max_pic_order_cnt_lsb_minus4
    } else if ( 1 === pic_order_cnt_type ) {
      expGolomb.skipBits(1); // delta_pic_order_always_zero_flag
      expGolomb.skipExpGolomb(); // offset_for_non_ref_pic
      expGolomb.skipExpGolomb(); // offset_for_top_to_bottom_field
      num_ref_frames_in_pic_order_cnt_cycle = expGolomb.readUnsignedExpGolomb();
      for(i = 0 ; i < num_ref_frames_in_pic_order_cnt_cycle ; ++i) {
        expGolomb.skipExpGolomb(); // offset_for_ref_frame[ i ]
      }
    }

    expGolomb.skipUnsignedExpGolomb(); // max_num_ref_frames
    expGolomb.skipBits(1); // gaps_in_frame_num_value_allowed_flag
    pic_width_in_mbs_minus1 = expGolomb.readUnsignedExpGolomb();
    pic_height_in_map_units_minus1 = expGolomb.readUnsignedExpGolomb();

    frame_mbs_only_flag = expGolomb.readBits(1);
    if (0 === frame_mbs_only_flag) {
      expGolomb.skipBits(1); // mb_adaptive_frame_field_flag
    }

    expGolomb.skipBits(1); // direct_8x8_inference_flag
    frame_cropping_flag = expGolomb.readBoolean();
    if (frame_cropping_flag) {
      frame_crop_left_offset = expGolomb.readUnsignedExpGolomb();
      frame_crop_right_offset = expGolomb.readUnsignedExpGolomb();
      frame_crop_top_offset = expGolomb.readUnsignedExpGolomb();
      frame_crop_bottom_offset = expGolomb.readUnsignedExpGolomb();
    }

    width = ((pic_width_in_mbs_minus1 + 1) * 16) - frame_crop_left_offset * 2 - frame_crop_right_offset * 2;
    height = ((2 - frame_mbs_only_flag) * (pic_height_in_map_units_minus1 + 1) * 16) - (frame_crop_top_offset * 2) - (frame_crop_bottom_offset * 2);

    tag.writeMetaDataDouble("videocodecid", 7);
    tag.writeMetaDataDouble("width", width);
    tag.writeMetaDataDouble("height", height);
    // tag.writeMetaDataDouble("videodatarate", 0 );
    // tag.writeMetaDataDouble("framerate", 0);

    return tag;
  };

  // (pts:uint):FlvTag
  H264ExtraData.prototype.extraDataTag = function(pts) {
    var
      i,
      tag = new FlvTag(FlvTag.VIDEO_TAG, true);

    tag.dts = pts;
    tag.pts = pts;

    tag.writeByte(0x01);// version
    tag.writeByte(this.sps[0][1]);// profile
    tag.writeByte(this.sps[0][2]);// compatibility
    tag.writeByte(this.sps[0][3]);// level
    tag.writeByte(0xFC | 0x03); // reserved (6 bits), NULA length size - 1 (2 bits)
    tag.writeByte(0xE0 | 0x01 ); // reserved (3 bits), num of SPS (5 bits)
    tag.writeShort( this.sps[0].length ); // data of SPS
    tag.writeBytes( this.sps[0] ); // SPS

    tag.writeByte( this.pps.length ); // num of PPS (will there ever be more that 1 PPS?)
    for (i = 0 ; i < this.pps.length ; ++i) {
      tag.writeShort(this.pps[i].length); // 2 bytes for length of PPS
      tag.writeBytes(this.pps[i]); // data of PPS
    }

    return tag;
  };
})();

(function(window) {
  var
    FlvTag = window.videojs.Hls.FlvTag,
    H264ExtraData = window.videojs.Hls.H264ExtraData,
    H264Stream,
    NALUnitType;

  /**
   * Network Abstraction Layer (NAL) units are the packets of an H264
   * stream. NAL units are divided into types based on their payload
   * data. Each type has a unique numeric identifier.
   *
   *              NAL unit
   * |- NAL header -|------ RBSP ------|
   *
   * NAL unit: Network abstraction layer unit. The combination of a NAL
   * header and an RBSP.
   * NAL header: the encapsulation unit for transport-specific metadata in
   * an h264 stream. Exactly one byte.
   */
  // incomplete, see Table 7.1 of ITU-T H.264 for 12-32
  window.videojs.Hls.NALUnitType = NALUnitType = {
    unspecified: 0,
    slice_layer_without_partitioning_rbsp_non_idr: 1,
    slice_data_partition_a_layer_rbsp: 2,
    slice_data_partition_b_layer_rbsp: 3,
    slice_data_partition_c_layer_rbsp: 4,
    slice_layer_without_partitioning_rbsp_idr: 5,
    sei_rbsp: 6,
    seq_parameter_set_rbsp: 7,
    pic_parameter_set_rbsp: 8,
    access_unit_delimiter_rbsp: 9,
    end_of_seq_rbsp: 10,
    end_of_stream_rbsp: 11
  };

  window.videojs.Hls.H264Stream = H264Stream = function() {
    this._next_pts = 0; // :uint;
    this._next_dts = 0; // :uint;

    this._h264Frame = null; // :FlvTag

    this._oldExtraData = new H264ExtraData(); // :H264ExtraData
    this._newExtraData = new H264ExtraData(); // :H264ExtraData

    this._nalUnitType = -1; // :int

    this._state = 0; // :uint;

    this.tags = [];
  };

  //(pts:uint):void
  H264Stream.prototype.setTimeStampOffset = function() {};

  //(pts:uint, dts:uint, dataAligned:Boolean):void
  H264Stream.prototype.setNextTimeStamp = function(pts, dts, dataAligned) {
    // We could end up with a DTS less than 0 here. We need to deal with that!
    this._next_pts = pts;
    this._next_dts = dts;

    // If data is aligned, flush all internal buffers
    if (dataAligned) {
      this.finishFrame();
    }
  };

  H264Stream.prototype.finishFrame = function() {
    if (this._h264Frame) {
      // Push SPS before EVERY IDR frame for seeking
      if (this._newExtraData.extraDataExists()) {
        this._oldExtraData = this._newExtraData;
        this._newExtraData = new H264ExtraData();
      }

      // Check if keyframe and the length of tags.
      // This makes sure we write metadata on the first frame of a segment.
      if (this._oldExtraData.extraDataExists() &&
          (this._h264Frame.keyFrame || this.tags.length === 0)) {
        // Push extra data on every IDR frame in case we did a stream change + seek
        this.tags.push(this._oldExtraData.metaDataTag(this._h264Frame.pts));
        this.tags.push(this._oldExtraData.extraDataTag(this._h264Frame.pts));
      }

      this._h264Frame.endNalUnit();
      this.tags.push(this._h264Frame);

    }

    this._h264Frame = null;
    this._nalUnitType = -1;
    this._state = 0;
  };

  // (data:ByteArray, o:int, l:int):void
  H264Stream.prototype.writeBytes = function(data, offset, length) {
    var
      nalUnitSize, // :uint
      start, // :uint
      end, // :uint
      t; // :int

    // default argument values
    offset = offset || 0;
    length = length || 0;

    if (length <= 0) {
      // data is empty so there's nothing to write
      return;
    }

    // scan through the bytes until we find the start code (0x000001) for a
    // NAL unit and then begin writing it out
    // strip NAL start codes as we go
    switch (this._state) {
    default:
      /* falls through */
    case 0:
      this._state = 1;
      /* falls through */
    case 1:
      // A NAL unit may be split across two TS packets. Look back a bit to
      // make sure the prefix of the start code wasn't already written out.
      if (data[offset] <= 1) {
        nalUnitSize = this._h264Frame ? this._h264Frame.nalUnitSize() : 0;
        if (nalUnitSize >= 1 && this._h264Frame.negIndex(1) === 0) {
          // ?? ?? 00 | O[01] ?? ??
          if (data[offset] === 1 &&
              nalUnitSize >= 2 &&
              this._h264Frame.negIndex(2) === 0) {
            // ?? 00 00 : 01
            if (3 <= nalUnitSize && 0 === this._h264Frame.negIndex(3)) {
              this._h264Frame.length -= 3; // 00 00 00 : 01
            } else {
              this._h264Frame.length -= 2; // 00 00 : 01
            }

            this._state = 3;
            return this.writeBytes(data, offset + 1, length - 1);
          }

          if (length > 1 && data[offset] === 0 && data[offset + 1] === 1) {
            // ?? 00 | 00 01
            if (nalUnitSize >= 2 && this._h264Frame.negIndex(2) === 0) {
              this._h264Frame.length -= 2; // 00 00 : 00 01
            } else {
              this._h264Frame.length -= 1; // 00 : 00 01
            }

            this._state = 3;
            return this.writeBytes(data, offset + 2, length - 2);
          }

          if (length > 2 &&
              data[offset] === 0 &&
              data[offset + 1] === 0 &&
              data[offset + 2] === 1) {
            // 00 : 00 00 01
            // this._h264Frame.length -= 1;
            this._state = 3;
            return this.writeBytes(data, offset + 3, length - 3);
          }
        }
      }
      // allow fall through if the above fails, we may end up checking a few
      // bytes a second time. But that case will be VERY rare
      this._state = 2;
      /* falls through */
    case 2:
      // Look for start codes in the data from the current offset forward
      start = offset;
      end = start + length;
      for (t = end - 3; offset < t;) {
        if (data[offset + 2] > 1) {
          // if data[offset + 2] is greater than 1, there is no way a start
          // code can begin before offset + 3
          offset += 3;
        } else if (data[offset + 1] !== 0) {
            offset += 2;
        } else if (data[offset] !== 0) {
            offset += 1;
        } else {
          // If we get here we have 00 00 00 or 00 00 01
          if (data[offset + 2] === 1) {
            if (offset > start) {
              this._h264Frame.writeBytes(data, start, offset - start);
            }
            this._state = 3;
            offset += 3;
            return this.writeBytes(data, offset, end - offset);
          }

          if (end - offset >= 4 &&
              data[offset + 2] === 0 &&
              data[offset + 3] === 1) {
            if (offset > start) {
              this._h264Frame.writeBytes(data, start, offset - start);
            }
            this._state = 3;
            offset += 4;
            return this.writeBytes(data, offset, end - offset);
          }

          // We are at the end of the buffer, or we have 3 NULLS followed by
          // something that is not a 1, either way we can step forward by at
          // least 3
          offset += 3;
        }
      }

      // We did not find any start codes. Try again next packet
      this._state = 1;
      if (this._h264Frame) {
        this._h264Frame.writeBytes(data, start, length);
      }
      return;
    case 3:
      // The next byte is the first byte of a NAL Unit

      if (this._h264Frame) {
        // we've come to a new NAL unit so finish up the one we've been
        // working on

        switch (this._nalUnitType) {
        case NALUnitType.seq_parameter_set_rbsp:
          this._h264Frame.endNalUnit(this._newExtraData.sps);
          break;
        case NALUnitType.pic_parameter_set_rbsp:
          this._h264Frame.endNalUnit(this._newExtraData.pps);
          break;
        case NALUnitType.slice_layer_without_partitioning_rbsp_idr:
          this._h264Frame.endNalUnit();
          break;
        default:
          this._h264Frame.endNalUnit();
          break;
        }
      }

      // setup to begin processing the new NAL unit
      this._nalUnitType = data[offset] & 0x1F;
      if (this._h264Frame) {
          if (this._nalUnitType === NALUnitType.access_unit_delimiter_rbsp) {
            // starting a new access unit, flush the previous one
            this.finishFrame();
          } else if (this._nalUnitType === NALUnitType.slice_layer_without_partitioning_rbsp_idr) {
            this._h264Frame.keyFrame = true;
          }
      }

      // finishFrame may render this._h264Frame null, so we must test again
      if (!this._h264Frame) {
        this._h264Frame = new FlvTag(FlvTag.VIDEO_TAG);
        this._h264Frame.pts = this._next_pts;
        this._h264Frame.dts = this._next_dts;
      }

      this._h264Frame.startNalUnit();
      // We know there will not be an overlapping start code, so we can skip
      // that test
      this._state = 2;
      return this.writeBytes(data, offset, length);
    } // switch
  };
})(this);

(function(window) {
var
  FlvTag = window.videojs.Hls.FlvTag,
  adtsSampleingRates = [
    96000, 88200,
    64000, 48000,
    44100, 32000,
    24000, 22050,
    16000, 12000
  ];

window.videojs.Hls.AacStream = function() {
  var
    next_pts, // :uint
    state, // :uint
    pes_length, // :int
    lastMetaPts,

    adtsProtectionAbsent, // :Boolean
    adtsObjectType, // :int
    adtsSampleingIndex, // :int
    adtsChanelConfig, // :int
    adtsFrameSize, // :int
    adtsSampleCount, // :int
    adtsDuration, // :int

    aacFrame, // :FlvTag = null;
    extraData; // :uint;

  this.tags = [];

  // (pts:uint):void
  this.setTimeStampOffset = function(pts) {

    // keep track of the last time a metadata tag was written out
    // set the initial value so metadata will be generated before any
    // payload data
    lastMetaPts = pts - 1000;
  };

  // (pts:uint, pes_size:int, dataAligned:Boolean):void
  this.setNextTimeStamp = function(pts, pes_size, dataAligned) {
    next_pts = pts;
    pes_length = pes_size;

    // If data is aligned, flush all internal buffers
    if (dataAligned) {
      state = 0;
    }
  };

  // (data:ByteArray, o:int = 0, l:int = 0):void
  this.writeBytes = function(data, offset, length) {
    var
      end, // :int
      newExtraData, // :uint
      bytesToCopy; // :int

    // default arguments
    offset = offset || 0;
    length = length || 0;

    // Do not allow more than 'pes_length' bytes to be written
    length = (pes_length < length ? pes_length : length);
    pes_length -= length;
    end = offset + length;
    while (offset < end) {
      switch (state) {
      default:
        state = 0;
        break;
      case 0:
        if (offset >= end) {
          return;
        }
        if (0xFF !== data[offset]) {
          console.assert(false, 'Error no ATDS header found');
          offset += 1;
          state = 0;
          return;
        }

        offset += 1;
        state = 1;
        break;
      case 1:
        if (offset >= end) {
          return;
        }
        if (0xF0 !== (data[offset] & 0xF0)) {
          console.assert(false, 'Error no ATDS header found');
          offset +=1;
          state = 0;
          return;
        }

        adtsProtectionAbsent = !!(data[offset] & 0x01);

        offset += 1;
        state = 2;
        break;
      case 2:
        if (offset >= end) {
          return;
        }
        adtsObjectType = ((data[offset] & 0xC0) >>> 6) + 1;
        adtsSampleingIndex = ((data[offset] & 0x3C) >>> 2);
        adtsChanelConfig = ((data[offset] & 0x01) << 2);

        offset += 1;
        state = 3;
        break;
      case 3:
        if (offset >= end) {
          return;
        }
        adtsChanelConfig |= ((data[offset] & 0xC0) >>> 6);
        adtsFrameSize = ((data[offset] & 0x03) << 11);

        offset += 1;
        state = 4;
        break;
      case 4:
        if (offset >= end) {
          return;
        }
        adtsFrameSize |= (data[offset] << 3);

        offset += 1;
        state = 5;
        break;
      case 5:
        if(offset >= end) {
          return;
        }
        adtsFrameSize |= ((data[offset] & 0xE0) >>> 5);
        adtsFrameSize -= (adtsProtectionAbsent ? 7 : 9);

        offset += 1;
        state = 6;
        break;
      case 6:
        if (offset >= end) {
          return;
        }
        adtsSampleCount = ((data[offset] & 0x03) + 1) * 1024;
        adtsDuration = (adtsSampleCount * 1000) / adtsSampleingRates[adtsSampleingIndex];

        newExtraData = (adtsObjectType << 11) |
                       (adtsSampleingIndex << 7) |
                       (adtsChanelConfig << 3);

        // write out metadata tags every 1 second so that the decoder
        // is re-initialized quickly after seeking into a different
        // audio configuration
        if (newExtraData !== extraData || next_pts - lastMetaPts >= 1000) {
          aacFrame = new FlvTag(FlvTag.METADATA_TAG);
          aacFrame.pts = next_pts;
          aacFrame.dts = next_pts;

          // AAC is always 10
          aacFrame.writeMetaDataDouble("audiocodecid", 10);
          aacFrame.writeMetaDataBoolean("stereo", 2 === adtsChanelConfig);
          aacFrame.writeMetaDataDouble ("audiosamplerate", adtsSampleingRates[adtsSampleingIndex]);
          // Is AAC always 16 bit?
          aacFrame.writeMetaDataDouble ("audiosamplesize", 16);

          this.tags.push(aacFrame);

          extraData = newExtraData;
          aacFrame = new FlvTag(FlvTag.AUDIO_TAG, true);
          // For audio, DTS is always the same as PTS. We want to set the DTS
          // however so we can compare with video DTS to determine approximate
          // packet order
          aacFrame.pts = next_pts;
          aacFrame.dts = aacFrame.pts;

          aacFrame.view.setUint16(aacFrame.position, newExtraData);
          aacFrame.position += 2;
          aacFrame.length = Math.max(aacFrame.length, aacFrame.position);

          this.tags.push(aacFrame);

          lastMetaPts = next_pts;
        }

        // Skip the checksum if there is one
        offset += 1;
        state = 7;
        break;
      case 7:
        if (!adtsProtectionAbsent) {
          if (2 > (end - offset)) {
            return;
          } else {
            offset += 2;
          }
        }

        aacFrame = new FlvTag(FlvTag.AUDIO_TAG);
        aacFrame.pts = next_pts;
        aacFrame.dts = next_pts;
        state = 8;
        break;
      case 8:
        while (adtsFrameSize) {
          if (offset >= end) {
            return;
          }
          bytesToCopy = (end - offset) < adtsFrameSize ? (end - offset) : adtsFrameSize;
          aacFrame.writeBytes(data, offset, bytesToCopy);
          offset += bytesToCopy;
          adtsFrameSize -= bytesToCopy;
        }

        this.tags.push(aacFrame);

        // finished with this frame
        state = 0;
        next_pts += adtsDuration;
      }
    }
  };
};

})(this);

(function(window, videojs, undefined) {
  'use strict';
  var
    // return a percent-encoded representation of the specified byte range
    // @see http://en.wikipedia.org/wiki/Percent-encoding
    percentEncode = function(bytes, start, end) {
      var i, result = '';
      for (i = start; i < end; i++) {
        result += '%' + ('00' + bytes[i].toString(16)).slice(-2);
      }
      return result;
    },
    // return the string representation of the specified byte range,
    // interpreted as UTf-8.
    parseUtf8 = function(bytes, start, end) {
      return window.decodeURIComponent(percentEncode(bytes, start, end));
    },
    // return the string representation of the specified byte range,
    // interpreted as ISO-8859-1.
    parseIso88591 = function(bytes, start, end) {
      return window.unescape(percentEncode(bytes, start, end));
    },
    tagParsers = {
      'TXXX': function(tag) {
        var i;
        if (tag.data[0] !== 3) {
          // ignore frames with unrecognized character encodings
          return;
        }

        for (i = 1; i < tag.data.length; i++) {
          if (tag.data[i] === 0) {
            // parse the text fields
            tag.description = parseUtf8(tag.data, 1, i);
            // do not include the null terminator in the tag value
            tag.value = parseUtf8(tag.data, i + 1, tag.data.length - 1);
            break;
          }
        }
      },
      'WXXX': function(tag) {
        var i;
        if (tag.data[0] !== 3) {
          // ignore frames with unrecognized character encodings
          return;
        }

        for (i = 1; i < tag.data.length; i++) {
          if (tag.data[i] === 0) {
            // parse the description and URL fields
            tag.description = parseUtf8(tag.data, 1, i);
            tag.url = parseUtf8(tag.data, i + 1, tag.data.length);
            break;
          }
        }
      },
      'PRIV': function(tag) {
        var i;

        for (i = 0; i < tag.data.length; i++) {
          if (tag.data[i] === 0) {
            // parse the description and URL fields
            tag.owner = parseIso88591(tag.data, 0, i);
            break;
          }
        }
        tag.privateData = tag.data.subarray(i + 1);
      }
    },
    MetadataStream;

  MetadataStream = function(options) {
    var
      settings = {
        debug: !!(options && options.debug),

        // the bytes of the program-level descriptor field in MP2T
        // see ISO/IEC 13818-1:2013 (E), section 2.6 "Program and
        // program element descriptors"
        descriptor: options && options.descriptor
      },
      // the total size in bytes of the ID3 tag being parsed
      tagSize = 0,
      // tag data that is not complete enough to be parsed
      buffer = [],
      // the total number of bytes currently in the buffer
      bufferSize = 0,
      i;

    MetadataStream.prototype.init.call(this);

    // calculate the text track in-band metadata track dispatch type
    // https://html.spec.whatwg.org/multipage/embedded-content.html#steps-to-expose-a-media-resource-specific-text-track
    this.dispatchType = videojs.Hls.SegmentParser.STREAM_TYPES.metadata.toString(16);
    if (settings.descriptor) {
      for (i = 0; i < settings.descriptor.length; i++) {
        this.dispatchType += ('00' + settings.descriptor[i].toString(16)).slice(-2);
      }
    }

    this.push = function(chunk) {
      var tag, frameStart, frameSize, frame, i;

      // ignore events that don't look like ID3 data
      if (buffer.length === 0 &&
          (chunk.data.length < 10 ||
           chunk.data[0] !== 'I'.charCodeAt(0) ||
           chunk.data[1] !== 'D'.charCodeAt(0) ||
           chunk.data[2] !== '3'.charCodeAt(0))) {
        if (settings.debug) {
          videojs.log('Skipping unrecognized metadata packet');
        }
        return;
      }

      // add this chunk to the data we've collected so far
      buffer.push(chunk);
      bufferSize += chunk.data.byteLength;

      // grab the size of the entire frame from the ID3 header
      if (buffer.length === 1) {
        // the frame size is transmitted as a 28-bit integer in the
        // last four bytes of the ID3 header.
        // The most significant bit of each byte is dropped and the
        // results concatenated to recover the actual value.
        tagSize = (chunk.data[6] << 21) |
                  (chunk.data[7] << 14) |
                  (chunk.data[8] << 7) |
                  (chunk.data[9]);

        // ID3 reports the tag size excluding the header but it's more
        // convenient for our comparisons to include it
        tagSize += 10;
      }

      // if the entire frame has not arrived, wait for more data
      if (bufferSize < tagSize) {
        return;
      }

      // collect the entire frame so it can be parsed
      tag = {
        data: new Uint8Array(tagSize),
        frames: [],
        pts: buffer[0].pts,
        dts: buffer[0].dts
      };
      for (i = 0; i < tagSize;) {
        tag.data.set(buffer[0].data, i);
        i += buffer[0].data.byteLength;
        bufferSize -= buffer[0].data.byteLength;
        buffer.shift();
      }

      // find the start of the first frame and the end of the tag
      frameStart = 10;
      if (tag.data[5] & 0x40) {
        // advance the frame start past the extended header
        frameStart += 4; // header size field
        frameStart += (tag.data[10] << 24) |
                      (tag.data[11] << 16) |
                      (tag.data[12] << 8)  |
                      (tag.data[13]);

        // clip any padding off the end
        tagSize -= (tag.data[16] << 24) |
                   (tag.data[17] << 16) |
                   (tag.data[18] << 8)  |
                   (tag.data[19]);
      }

      // parse one or more ID3 frames
      // http://id3.org/id3v2.3.0#ID3v2_frame_overview
      do {
        // determine the number of bytes in this frame
        frameSize = (tag.data[frameStart + 4] << 24) |
                    (tag.data[frameStart + 5] << 16) |
                    (tag.data[frameStart + 6] <<  8) |
                    (tag.data[frameStart + 7]);
        if (frameSize < 1) {
          return videojs.log('Malformed ID3 frame encountered. Skipping metadata parsing.');
        }

        frame = {
          id: String.fromCharCode(tag.data[frameStart],
                                  tag.data[frameStart + 1],
                                  tag.data[frameStart + 2],
                                  tag.data[frameStart + 3]),
          data: tag.data.subarray(frameStart + 10, frameStart + frameSize + 10)
        };
        if (tagParsers[frame.id]) {
          tagParsers[frame.id](frame);
        }
        tag.frames.push(frame);

        frameStart += 10; // advance past the frame header
        frameStart += frameSize; // advance past the frame body
      } while (frameStart < tagSize);
      this.trigger('data', tag);
    };
  };
  MetadataStream.prototype = new videojs.Hls.Stream();

  videojs.Hls.MetadataStream = MetadataStream;
})(window, window.videojs);

(function(window) {
  var
    videojs = window.videojs,
    FlvTag = videojs.Hls.FlvTag,
    H264Stream = videojs.Hls.H264Stream,
    AacStream = videojs.Hls.AacStream,
    MetadataStream = videojs.Hls.MetadataStream,
    MP2T_PACKET_LENGTH,
    STREAM_TYPES;

  /**
   * An object that incrementally transmuxes MPEG2 Trasport Stream
   * chunks into an FLV.
   */
  videojs.Hls.SegmentParser = function() {
    var
      self = this,
      parseTSPacket,
      streamBuffer = new Uint8Array(MP2T_PACKET_LENGTH),
      streamBufferByteCount = 0,
      h264Stream = new H264Stream(),
      aacStream = new AacStream();

    // expose the stream metadata
    self.stream = {
      // the mapping between transport stream programs and the PIDs
      // that form their elementary streams
      programMapTable: {}
    };

    // allow in-band metadata to be observed
    self.metadataStream = new MetadataStream();

    // For information on the FLV format, see
    // http://download.macromedia.com/f4v/video_file_format_spec_v10_1.pdf.
    // Technically, this function returns the header and a metadata FLV tag
    // if duration is greater than zero
    // duration in seconds
    // @return {object} the bytes of the FLV header as a Uint8Array
    self.getFlvHeader = function(duration, audio, video) { // :ByteArray {
      var
        headBytes = new Uint8Array(3 + 1 + 1 + 4),
        head = new DataView(headBytes.buffer),
        metadata,
        result,
        metadataLength;

      // default arguments
      duration = duration || 0;
      audio = audio === undefined? true : audio;
      video = video === undefined? true : video;

      // signature
      head.setUint8(0, 0x46); // 'F'
      head.setUint8(1, 0x4c); // 'L'
      head.setUint8(2, 0x56); // 'V'

      // version
      head.setUint8(3, 0x01);

      // flags
      head.setUint8(4, (audio ? 0x04 : 0x00) | (video ? 0x01 : 0x00));

      // data offset, should be 9 for FLV v1
      head.setUint32(5, headBytes.byteLength);

      // init the first FLV tag
      if (duration <= 0) {
        // no duration available so just write the first field of the first
        // FLV tag
        result = new Uint8Array(headBytes.byteLength + 4);
        result.set(headBytes);
        result.set([0, 0, 0, 0], headBytes.byteLength);
        return result;
      }

      // write out the duration metadata tag
      metadata = new FlvTag(FlvTag.METADATA_TAG);
      metadata.pts = metadata.dts = 0;
      metadata.writeMetaDataDouble("duration", duration);
      metadataLength = metadata.finalize().length;
      result = new Uint8Array(headBytes.byteLength + metadataLength);
      result.set(headBytes);
      result.set(head.byteLength, metadataLength);

      return result;
    };

    self.flushTags = function() {
      h264Stream.finishFrame();
    };

    /**
     * Returns whether a call to `getNextTag()` will be successful.
     * @return {boolean} whether there is at least one transmuxed FLV
     * tag ready
     */
    self.tagsAvailable = function() { // :int {
      return h264Stream.tags.length + aacStream.tags.length;
    };

    /**
     * Returns the next tag in decoder-timestamp (DTS) order.
     * @returns {object} the next tag to decoded.
     */
    self.getNextTag = function() {
      var tag;

      if (!h264Stream.tags.length) {
        // only audio tags remain
        tag = aacStream.tags.shift();
      } else if (!aacStream.tags.length) {
        // only video tags remain
        tag = h264Stream.tags.shift();
      } else if (aacStream.tags[0].dts < h264Stream.tags[0].dts) {
        // audio should be decoded next
        tag = aacStream.tags.shift();
      } else {
        // video should be decoded next
        tag = h264Stream.tags.shift();
      }

      return tag.finalize();
    };

    self.parseSegmentBinaryData = function(data) { // :ByteArray) {
      var
        dataPosition = 0,
        dataSlice;

      // To avoid an extra copy, we will stash overflow data, and only
      // reconstruct the first packet. The rest of the packets will be
      // parsed directly from data
      if (streamBufferByteCount > 0) {
        if (data.byteLength + streamBufferByteCount < MP2T_PACKET_LENGTH) {
          // the current data is less than a single m2ts packet, so stash it
          // until we receive more

          // ?? this seems to append streamBuffer onto data and then just give up. I'm not sure why that would be interesting.
          videojs.log('data.length + streamBuffer.length < MP2T_PACKET_LENGTH ??');
          streamBuffer.readBytes(data, data.length, streamBuffer.length);
          return;
        } else {
          // we have enough data for an m2ts packet
          // process it immediately
          dataSlice = data.subarray(0, MP2T_PACKET_LENGTH - streamBufferByteCount);
          streamBuffer.set(dataSlice, streamBufferByteCount);

          parseTSPacket(streamBuffer);

          // reset the buffer
          streamBuffer = new Uint8Array(MP2T_PACKET_LENGTH);
          streamBufferByteCount = 0;
        }
      }

      while (true) {
        // Make sure we are TS aligned
        while(dataPosition < data.byteLength  && data[dataPosition] !== 0x47) {
          // If there is no sync byte skip forward until we find one
          // TODO if we find a sync byte, look 188 bytes in the future (if
          // possible). If there is not a sync byte there, keep looking
          dataPosition++;
        }

        // base case: not enough data to parse a m2ts packet
        if (data.byteLength - dataPosition < MP2T_PACKET_LENGTH) {
          if (data.byteLength - dataPosition > 0) {
            // there are bytes remaining, save them for next time
            streamBuffer.set(data.subarray(dataPosition),
                             streamBufferByteCount);
            streamBufferByteCount += data.byteLength - dataPosition;
          }
          return;
        }

        // attempt to parse a m2ts packet
        if (parseTSPacket(data.subarray(dataPosition, dataPosition + MP2T_PACKET_LENGTH))) {
          dataPosition += MP2T_PACKET_LENGTH;
        } else {
          // If there was an error parsing a TS packet. it could be
          // because we are not TS packet aligned. Step one forward by
          // one byte and allow the code above to find the next
          videojs.log('error parsing m2ts packet, attempting to re-align');
          dataPosition++;
        }
      }
    };

    /**
     * Parses a video/mp2t packet and appends the underlying video and
     * audio data onto h264stream and aacStream, respectively.
     * @param data {Uint8Array} the bytes of an MPEG2-TS packet,
     * including the sync byte.
     * @return {boolean} whether a valid packet was encountered
     */
    // TODO add more testing to make sure we dont walk past the end of a TS
    // packet!
    parseTSPacket = function(data) { // :ByteArray):Boolean {
      var
        offset = 0, // :uint
        end = offset + MP2T_PACKET_LENGTH, // :uint

        // Payload Unit Start Indicator
        pusi = !!(data[offset + 1] & 0x40), // mask: 0100 0000

        // packet identifier (PID), a unique identifier for the elementary
        // stream this packet describes
        pid = (data[offset + 1] & 0x1F) << 8 | data[offset + 2], // mask: 0001 1111

        // adaptation_field_control, whether this header is followed by an
        // adaptation field, a payload, or both
        afflag = (data[offset + 3] & 0x30 ) >>> 4,

        patTableId, // :int
        patCurrentNextIndicator, // Boolean
        patSectionLength, // :uint
        programNumber, // :uint
        programPid, // :uint
        patEntriesEnd, // :uint

        pesPacketSize, // :int,
        dataAlignmentIndicator, // :Boolean,
        ptsDtsIndicator, // :int
        pesHeaderLength, // :int

        pts, // :uint
        dts, // :uint

        pmtCurrentNextIndicator, // :Boolean
        pmtProgramDescriptorsLength,
        pmtSectionLength, // :uint

        streamType, // :int
        elementaryPID, // :int
        ESInfolength; // :int

      // Continuity Counter we could use this for sanity check, and
      // corrupt stream detection
      // cc = (data[offset + 3] & 0x0F);

      // move past the header
      offset += 4;

      // if an adaption field is present, its length is specified by
      // the fifth byte of the PES header. The adaptation field is
      // used to specify some forms of timing and control data that we
      // do not currently use.
      if (afflag > 0x01) {
        offset += data[offset] + 1;
      }

      // Handle a Program Association Table (PAT). PATs map PIDs to
      // individual programs. If this transport stream was being used
      // for television broadcast, a program would probably be
      // equivalent to a channel. In HLS, it would be very unusual to
      // create an mp2t stream with multiple programs.
      if (0x0000 === pid) {
        // The PAT may be split into multiple sections and those
        // sections may be split into multiple packets. If a PAT
        // section starts in this packet, PUSI will be true and the
        // first byte of the playload will indicate the offset from
        // the current position to the start of the section.
        if (pusi) {
          offset += 1 + data[offset];
        }
        patTableId = data[offset];

        if (patTableId !== 0x00) {
          videojs.log('the table_id of the PAT should be 0x00 but was' +
                      patTableId.toString(16));
        }

        // the current_next_indicator specifies whether this PAT is
        // currently applicable or is part of the next table to become
        // active
        patCurrentNextIndicator = !!(data[offset + 5] & 0x01);
        if (patCurrentNextIndicator) {
          // section_length specifies the number of bytes following
          // its position to the end of this section
          // section_length = rest of header + (n * entry length) + CRC
          // = 5 + (n * 4) + 4
          patSectionLength =  (data[offset + 1] & 0x0F) << 8 | data[offset + 2];
          // move past the rest of the PSI header to the first program
          // map table entry
          offset += 8;

          // we don't handle streams with more than one program, so
          // raise an exception if we encounter one
          patEntriesEnd = offset + (patSectionLength - 5 - 4);
          for (; offset < patEntriesEnd; offset += 4) {
            programNumber = (data[offset] << 8 | data[offset + 1]);
            programPid = (data[offset + 2] & 0x1F) << 8 | data[offset + 3];
            // network PID program number equals 0
            // this is primarily an artifact of EBU DVB and can be ignored
            if (programNumber === 0) {
              self.stream.networkPid = programPid;
            } else if (self.stream.pmtPid === undefined) {
              // the Program Map Table (PMT) associates the underlying
              // video and audio streams with a unique PID
              self.stream.pmtPid = programPid;
            } else if (self.stream.pmtPid !== programPid) {
              throw new Error("TS has more that 1 program");
            }
          }
        }
      } else if (pid === self.stream.programMapTable[STREAM_TYPES.h264] ||
                 pid === self.stream.programMapTable[STREAM_TYPES.adts] ||
                 pid === self.stream.programMapTable[STREAM_TYPES.metadata]) {
        if (pusi) {
          // comment out for speed
          if (0x00 !== data[offset + 0] || 0x00 !== data[offset + 1] || 0x01 !== data[offset + 2]) {
            // look for PES start code
             throw new Error("PES did not begin with start code");
           }

          // var sid:int  = data[offset+3]; // StreamID
          pesPacketSize = (data[offset + 4] << 8) | data[offset + 5];
          dataAlignmentIndicator = (data[offset + 6] & 0x04) !== 0;
          ptsDtsIndicator = data[offset + 7];
          pesHeaderLength = data[offset + 8]; // TODO sanity check header length
          offset += 9; // Skip past PES header

          // PTS and DTS are normially stored as a 33 bit number.
          // JavaScript does not have a integer type larger than 32 bit
          // BUT, we need to convert from 90ns to 1ms time scale anyway.
          // so what we are going to do instead, is drop the least
          // significant bit (the same as dividing by two) then we can
          // divide by 45 (45 * 2 = 90) to get ms.
          if (ptsDtsIndicator & 0xC0) {
            // the PTS and DTS are not written out directly. For information on
            // how they are encoded, see
            // http://dvd.sourceforge.net/dvdinfo/pes-hdr.html
            pts = (data[offset + 0] & 0x0E) << 28
              | (data[offset + 1] & 0xFF) << 21
              | (data[offset + 2] & 0xFE) << 13
              | (data[offset + 3] & 0xFF) <<  6
              | (data[offset + 4] & 0xFE) >>>  2;
            pts /= 45;
            dts = pts;
            if (ptsDtsIndicator & 0x40) {// DTS
              dts = (data[offset + 5] & 0x0E ) << 28
                | (data[offset + 6] & 0xFF ) << 21
                | (data[offset + 7] & 0xFE ) << 13
                | (data[offset + 8] & 0xFF ) << 6
                | (data[offset + 9] & 0xFE ) >>> 2;
              dts /= 45;
            }
          }

          // Skip past "optional" portion of PTS header
          offset += pesHeaderLength;

          if (pid === self.stream.programMapTable[STREAM_TYPES.h264]) {
            h264Stream.setNextTimeStamp(pts,
                                        dts,
                                        dataAlignmentIndicator);
          } else if (pid === self.stream.programMapTable[STREAM_TYPES.adts]) {
            aacStream.setNextTimeStamp(pts,
                                       pesPacketSize,
                                       dataAlignmentIndicator);
          }
        }

        if (pid === self.stream.programMapTable[STREAM_TYPES.adts]) {
          aacStream.writeBytes(data, offset, end - offset);
        } else if (pid === self.stream.programMapTable[STREAM_TYPES.h264]) {
          h264Stream.writeBytes(data, offset, end - offset);
        } else if (pid === self.stream.programMapTable[STREAM_TYPES.metadata]) {
          self.metadataStream.push({
            pts: pts,
            dts: dts,
            data: data.subarray(offset)
          });
        }
      } else if (self.stream.pmtPid === pid) {
        // similarly to the PAT, jump to the first byte of the section
        if (pusi) {
          offset += 1 + data[offset];
        }
        if (data[offset] !== 0x02) {
          videojs.log('The table_id of a PMT should be 0x02 but was ' +
                      data[offset].toString(16));
        }

        // whether this PMT is currently applicable or is part of the
        // next table to become active
        pmtCurrentNextIndicator = !!(data[offset + 5] & 0x01);
        if (pmtCurrentNextIndicator) {
          // overwrite any existing program map table
          self.stream.programMapTable = {};
          // section_length specifies the number of bytes following
          // its position to the end of this section
          pmtSectionLength  = (data[offset + 1] & 0x0f) << 8 | data[offset + 2];
          // subtract the length of the program info descriptors
          pmtProgramDescriptorsLength = (data[offset + 10] & 0x0f) << 8 | data[offset + 11];
          pmtSectionLength -= pmtProgramDescriptorsLength;
          // skip CRC and PSI data we dont care about
          // rest of header + CRC = 9 + 4
          pmtSectionLength -= 13;

          // capture the PID of PCR packets so we can ignore them if we see any
          self.stream.programMapTable.pcrPid = (data[offset + 8] & 0x1f) << 8 | data[offset + 9];

          // align offset to the first entry in the PMT
          offset += 12 + pmtProgramDescriptorsLength;

          // iterate through the entries
          while (0 < pmtSectionLength) {
            // the type of data carried in the PID this entry describes
            streamType = data[offset + 0];
            // the PID for this entry
            elementaryPID = (data[offset + 1] & 0x1F) << 8 | data[offset + 2];

            if (streamType === STREAM_TYPES.h264 &&
                self.stream.programMapTable[streamType] &&
                self.stream.programMapTable[streamType] !== elementaryPID) {
              throw new Error("Program has more than 1 video stream");
            } else if (streamType === STREAM_TYPES.adts &&
                       self.stream.programMapTable[streamType] &&
                       self.stream.programMapTable[streamType] !== elementaryPID) {
              throw new Error("Program has more than 1 audio Stream");
            }
            // add the stream type entry to the map
            self.stream.programMapTable[streamType] = elementaryPID;

            // TODO add support for MP3 audio

            // the length of the entry descriptor
            ESInfolength = (data[offset + 3] & 0x0F) << 8 | data[offset + 4];
            // capture the stream descriptor for metadata streams
            if (streamType === STREAM_TYPES.metadata) {
              self.metadataStream.descriptor = new Uint8Array(data.subarray(offset + 5, offset + 5 + ESInfolength));
            }
            // move to the first byte after the end of this entry
            offset += 5 + ESInfolength;
            pmtSectionLength -=  5 + ESInfolength;
          }
        }
        // We could test the CRC here to detect corruption with extra CPU cost
      } else if (self.stream.networkPid === pid) {
        // network information specific data (NIT) packet
      } else if (0x0011 === pid) {
        // Service Description Table
      } else if (0x1FFF === pid) {
        // NULL packet
      } else if (self.stream.programMapTable.pcrPid) {
        // program clock reference (PCR) PID for the primary program
        // PTS values are sufficient to synchronize playback for us so
        // we can safely ignore these
      } else {
        videojs.log("Unknown PID parsing TS packet: " + pid);
      }

      return true;
    };

    self.getTags = function() {
      return h264Stream.tags;
    };

    self.stats = {
      h264Tags: function() {
        return h264Stream.tags.length;
      },
      minVideoPts: function() {
        return h264Stream.tags[0].pts;
      },
      maxVideoPts: function() {
        return h264Stream.tags[h264Stream.tags.length - 1].pts;
      },
      aacTags: function() {
        return aacStream.tags.length;
      },
      minAudioPts: function() {
        return aacStream.tags[0].pts;
      },
      maxAudioPts: function() {
        return aacStream.tags[aacStream.tags.length - 1].pts;
      }
    };
  };

  // MPEG2-TS constants
  videojs.Hls.SegmentParser.MP2T_PACKET_LENGTH = MP2T_PACKET_LENGTH = 188;
  videojs.Hls.SegmentParser.STREAM_TYPES = STREAM_TYPES = {
    h264: 0x1b,
    adts: 0x0f,
    metadata: 0x15
  };

})(window);

(function(videojs, parseInt, isFinite, mergeOptions, undefined) {
  var
    noop = function() {},

    // "forgiving" attribute list psuedo-grammar:
    // attributes -> keyvalue (',' keyvalue)*
    // keyvalue   -> key '=' value
    // key        -> [^=]*
    // value      -> '"' [^"]* '"' | [^,]*
    attributeSeparator = (function() {
      var
        key = '[^=]*',
        value = '"[^"]*"|[^,]*',
        keyvalue = '(?:' + key + ')=(?:' + value + ')';

      return new RegExp('(?:^|,)(' + keyvalue + ')');
    })(),
    parseAttributes = function(attributes) {
      var
        // split the string using attributes as the separator
        attrs = attributes.split(attributeSeparator),
        i = attrs.length,
        result = {},
        attr;

      while (i--) {
        // filter out unmatched portions of the string
        if (attrs[i] === '') {
          continue;
        }

        // split the key and value
        attr = /([^=]*)=(.*)/.exec(attrs[i]).slice(1);
        // trim whitespace and remove optional quotes around the value
        attr[0] = attr[0].replace(/^\s+|\s+$/g, '');
        attr[1] = attr[1].replace(/^\s+|\s+$/g, '');
        attr[1] = attr[1].replace(/^['"](.*)['"]$/g, '$1');
        result[attr[0]] = attr[1];
      }
      return result;
    },
    Stream = videojs.Hls.Stream,
    LineStream,
    ParseStream,
    Parser;

  /**
   * A stream that buffers string input and generates a `data` event for each
   * line.
   */
  LineStream = function() {
    var buffer = '';
    LineStream.prototype.init.call(this);

    /**
     * Add new data to be parsed.
     * @param data {string} the text to process
     */
    this.push = function(data) {
      var nextNewline;

      buffer += data;
      nextNewline = buffer.indexOf('\n');

      for (; nextNewline > -1; nextNewline = buffer.indexOf('\n')) {
        this.trigger('data', buffer.substring(0, nextNewline));
        buffer = buffer.substring(nextNewline + 1);
      }
    };
  };
  LineStream.prototype = new Stream();

  /**
   * A line-level M3U8 parser event stream. It expects to receive input one
   * line at a time and performs a context-free parse of its contents. A stream
   * interpretation of a manifest can be useful if the manifest is expected to
   * be too large to fit comfortably into memory or the entirety of the input
   * is not immediately available. Otherwise, it's probably much easier to work
   * with a regular `Parser` object.
   *
   * Produces `data` events with an object that captures the parser's
   * interpretation of the input. That object has a property `tag` that is one
   * of `uri`, `comment`, or `tag`. URIs only have a single additional
   * property, `line`, which captures the entirety of the input without
   * interpretation. Comments similarly have a single additional property
   * `text` which is the input without the leading `#`.
   *
   * Tags always have a property `tagType` which is the lower-cased version of
   * the M3U8 directive without the `#EXT` or `#EXT-X-` prefix. For instance,
   * `#EXT-X-MEDIA-SEQUENCE` becomes `media-sequence` when parsed. Unrecognized
   * tags are given the tag type `unknown` and a single additional property
   * `data` with the remainder of the input.
   */
  ParseStream = function() {
    ParseStream.prototype.init.call(this);
  };
  ParseStream.prototype = new Stream();
  /**
   * Parses an additional line of input.
   * @param line {string} a single line of an M3U8 file to parse
   */
  ParseStream.prototype.push = function(line) {
    var match, event;

    //strip whitespace
    line = line.replace(/^\s+|\s+$/g, '');
    if (line.length === 0) {
      // ignore empty lines
      return;
    }

    // URIs
    if (line[0] !== '#') {
      this.trigger('data', {
        type: 'uri',
        uri: line
      });
      return;
    }

    // Comments
    if (line.indexOf('#EXT') !== 0) {
      this.trigger('data', {
        type: 'comment',
        text: line.slice(1)
      });
      return;
    }

    //strip off any carriage returns here so the regex matching
    //doesn't have to account for them.
    line = line.replace('\r','');

    // Tags
    match = /^#EXTM3U/.exec(line);
    if (match) {
      this.trigger('data', {
        type: 'tag',
        tagType: 'm3u'
      });
      return;
    }
    match = (/^#EXTINF:?([0-9\.]*)?,?(.*)?$/).exec(line);
    if (match) {
      event = {
        type: 'tag',
        tagType: 'inf'
      };
      if (match[1]) {
        event.duration = parseFloat(match[1]);
      }
      if (match[2]) {
        event.title = match[2];
      }
      this.trigger('data', event);
      return;
    }
    match = (/^#EXT-X-TARGETDURATION:?([0-9.]*)?/).exec(line);
    if (match) {
      event = {
        type: 'tag',
        tagType: 'targetduration'
      };
      if (match[1]) {
        event.duration = parseInt(match[1], 10);
      }
      this.trigger('data', event);
      return;
    }
    match = (/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/).exec(line);
    if (match) {
      event = {
        type: 'tag',
        tagType: 'totalduration'
      };
      if (match[1]) {
        event.duration = parseInt(match[1], 10);
      }
      this.trigger('data', event);
      return;
    }
    match = (/^#EXT-X-VERSION:?([0-9.]*)?/).exec(line);
    if (match) {
      event = {
        type: 'tag',
        tagType: 'version'
      };
      if (match[1]) {
        event.version = parseInt(match[1], 10);
      }
      this.trigger('data', event);
      return;
    }
    match = (/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/).exec(line);
    if (match) {
      event = {
        type: 'tag',
        tagType: 'media-sequence'
      };
      if (match[1]) {
        event.number = parseInt(match[1], 10);
      }
      this.trigger('data', event);
      return;
    }
    match = (/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/).exec(line);
    if (match) {
      event = {
        type: 'tag',
        tagType: 'discontinuity-sequence'
      };
      if (match[1]) {
        event.number = parseInt(match[1], 10);
      }
      this.trigger('data', event);
      return;
    }
    match = (/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/).exec(line);
    if (match) {
      event = {
        type: 'tag',
        tagType: 'playlist-type'
      };
      if (match[1]) {
        event.playlistType = match[1];
      }
      this.trigger('data', event);
      return;
    }
    match = (/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/).exec(line);
    if (match) {
      event = {
        type: 'tag',
        tagType: 'byterange'
      };
      if (match[1]) {
        event.length = parseInt(match[1], 10);
      }
      if (match[2]) {
        event.offset = parseInt(match[2], 10);
      }
      this.trigger('data', event);
      return;
    }
    match = (/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/).exec(line);
    if (match) {
      event = {
        type: 'tag',
        tagType: 'allow-cache'
      };
      if (match[1]) {
        event.allowed = !(/NO/).test(match[1]);
      }
      this.trigger('data', event);
      return;
    }
    match = (/^#EXT-X-STREAM-INF:?(.*)$/).exec(line);
    if (match) {
      event = {
        type: 'tag',
        tagType: 'stream-inf'
      };
      if (match[1]) {
        event.attributes = parseAttributes(match[1]);

        if (event.attributes.RESOLUTION) {
          (function() {
            var
              split = event.attributes.RESOLUTION.split('x'),
              resolution = {};
            if (split[0]) {
              resolution.width = parseInt(split[0], 10);
            }
            if (split[1]) {
              resolution.height = parseInt(split[1], 10);
            }
            event.attributes.RESOLUTION = resolution;
          })();
        }
        if (event.attributes.BANDWIDTH) {
          event.attributes.BANDWIDTH = parseInt(event.attributes.BANDWIDTH, 10);
        }
        if (event.attributes['PROGRAM-ID']) {
          event.attributes['PROGRAM-ID'] = parseInt(event.attributes['PROGRAM-ID'], 10);
        }
      }
      this.trigger('data', event);
      return;
    }
    match = (/^#EXT-X-ENDLIST/).exec(line);
    if (match) {
      this.trigger('data', {
        type: 'tag',
        tagType: 'endlist'
      });
      return;
    }
    match = (/^#EXT-X-DISCONTINUITY/).exec(line);
    if (match) {
      this.trigger('data', {
        type: 'tag',
        tagType: 'discontinuity'
      });
      return;
    }
    match = (/^#EXT-X-KEY:?(.*)$/).exec(line);
    if (match) {
      event = {
        type: 'tag',
        tagType: 'key'
      };
      if (match[1]) {
        event.attributes = parseAttributes(match[1]);
        // parse the IV string into a Uint32Array
        if (event.attributes.IV) {
          if (event.attributes.IV.substring(0,2) === '0x') {
            event.attributes.IV = event.attributes.IV.substring(2);
          }

          event.attributes.IV = event.attributes.IV.match(/.{8}/g);
          event.attributes.IV[0] = parseInt(event.attributes.IV[0], 16);
          event.attributes.IV[1] = parseInt(event.attributes.IV[1], 16);
          event.attributes.IV[2] = parseInt(event.attributes.IV[2], 16);
          event.attributes.IV[3] = parseInt(event.attributes.IV[3], 16);
          event.attributes.IV = new Uint32Array(event.attributes.IV);
        }
      }
      this.trigger('data', event);
      return;
    }

    // unknown tag type
    this.trigger('data', {
      type: 'tag',
      data: line.slice(4, line.length)
    });
  };

  /**
   * A parser for M3U8 files. The current interpretation of the input is
   * exposed as a property `manifest` on parser objects. It's just two lines to
   * create and parse a manifest once you have the contents available as a string:
   *
   * ```js
   * var parser = new videojs.m3u8.Parser();
   * parser.push(xhr.responseText);
   * ```
   *
   * New input can later be applied to update the manifest object by calling
   * `push` again.
   *
   * The parser attempts to create a usable manifest object even if the
   * underlying input is somewhat nonsensical. It emits `info` and `warning`
   * events during the parse if it encounters input that seems invalid or
   * requires some property of the manifest object to be defaulted.
   */
  Parser = function() {
    var
      self = this,
      uris = [],
      currentUri = {},
      key;
    Parser.prototype.init.call(this);

    this.lineStream = new LineStream();
    this.parseStream = new ParseStream();
    this.lineStream.pipe(this.parseStream);

    // the manifest is empty until the parse stream begins delivering data
    this.manifest = {
      allowCache: true,
      discontinuityStarts: []
    };

    // update the manifest with the m3u8 entry from the parse stream
    this.parseStream.on('data', function(entry) {
      ({
        tag: function() {
          // switch based on the tag type
          (({
            'allow-cache': function() {
              this.manifest.allowCache = entry.allowed;
              if (!('allowed' in entry)) {
                this.trigger('info', {
                  message: 'defaulting allowCache to YES'
                });
                this.manifest.allowCache = true;
              }
            },
            'byterange': function() {
              var byterange = {};
              if ('length' in entry) {
                currentUri.byterange = byterange;
                byterange.length = entry.length;

                if (!('offset' in entry)) {
                  this.trigger('info', {
                    message: 'defaulting offset to zero'
                  });
                  entry.offset = 0;
                }
              }
              if ('offset' in entry) {
                currentUri.byterange = byterange;
                byterange.offset = entry.offset;
              }
            },
            'endlist': function() {
              this.manifest.endList = true;
            },
            'inf': function() {
              if (!('mediaSequence' in this.manifest)) {
                this.manifest.mediaSequence = 0;
                this.trigger('info', {
                  message: 'defaulting media sequence to zero'
                });
              }
              if (!('discontinuitySequence' in this.manifest)) {
                this.manifest.discontinuitySequence = 0;
                this.trigger('info', {
                  message: 'defaulting discontinuity sequence to zero'
                });
              }
              if (entry.duration >= 0) {
                currentUri.duration = entry.duration;
              }

              this.manifest.segments = uris;

            },
            'key': function() {
              if (!entry.attributes) {
                this.trigger('warn', {
                  message: 'ignoring key declaration without attribute list'
                });
                return;
              }
              // clear the active encryption key
              if (entry.attributes.METHOD === 'NONE') {
                key = null;
                return;
              }
              if (!entry.attributes.URI) {
                this.trigger('warn', {
                  message: 'ignoring key declaration without URI'
                });
                return;
              }
              if (!entry.attributes.METHOD) {
                this.trigger('warn', {
                  message: 'defaulting key method to AES-128'
                });
              }

              // setup an encryption key for upcoming segments
              key = {
                method: entry.attributes.METHOD || 'AES-128',
                uri: entry.attributes.URI
              };

              if (entry.attributes.IV !== undefined) {
                key.iv = entry.attributes.IV;
              }
            },
            'media-sequence': function() {
              if (!isFinite(entry.number)) {
                this.trigger('warn', {
                  message: 'ignoring invalid media sequence: ' + entry.number
                });
                return;
              }
              this.manifest.mediaSequence = entry.number;
            },
            'discontinuity-sequence': function() {
              if (!isFinite(entry.number)) {
                this.trigger('warn', {
                  message: 'ignoring invalid discontinuity sequence: ' + entry.number
                });
                return;
              }
              this.manifest.discontinuitySequence = entry.number;
            },
            'playlist-type': function() {
              if (!(/VOD|EVENT/).test(entry.playlistType)) {
                this.trigger('warn', {
                  message: 'ignoring unknown playlist type: ' + entry.playlist
                });
                return;
              }
              this.manifest.playlistType = entry.playlistType;
            },
            'stream-inf': function() {
              this.manifest.playlists = uris;

              if (!entry.attributes) {
                this.trigger('warn', {
                  message: 'ignoring empty stream-inf attributes'
                });
                return;
              }

              if (!currentUri.attributes) {
                currentUri.attributes = {};
              }
              currentUri.attributes = mergeOptions(currentUri.attributes,
                                                   entry.attributes);
            },
            'discontinuity': function() {
              currentUri.discontinuity = true;
              this.manifest.discontinuityStarts.push(uris.length);
            },
            'targetduration': function() {
              if (!isFinite(entry.duration) || entry.duration < 0) {
                this.trigger('warn', {
                  message: 'ignoring invalid target duration: ' + entry.duration
                });
                return;
              }
              this.manifest.targetDuration = entry.duration;
            },
            'totalduration': function() {
              if (!isFinite(entry.duration) || entry.duration < 0) {
                this.trigger('warn', {
                  message: 'ignoring invalid total duration: ' + entry.duration
                });
                return;
              }
              this.manifest.totalDuration = entry.duration;
            }
          })[entry.tagType] || noop).call(self);
        },
        uri: function() {
          currentUri.uri = entry.uri;
          uris.push(currentUri);

          // if no explicit duration was declared, use the target duration
          if (this.manifest.targetDuration &&
              !('duration' in currentUri)) {
            this.trigger('warn', {
              message: 'defaulting segment duration to the target duration'
            });
            currentUri.duration = this.manifest.targetDuration;
          }
          // annotate with encryption information, if necessary
          if (key) {
            currentUri.key = key;
          }

          // prepare for the next URI
          currentUri = {};
        },
        comment: function() {
          // comments are not important for playback
        }
      })[entry.type].call(self);
    });
  };
  Parser.prototype = new Stream();
  /**
   * Parse the input string and update the manifest object.
   * @param chunk {string} a potentially incomplete portion of the manifest
   */
  Parser.prototype.push = function(chunk) {
    this.lineStream.push(chunk);
  };
  /**
   * Flush any remaining input. This can be handy if the last line of an M3U8
   * manifest did not contain a trailing newline but the file has been
   * completely received.
   */
  Parser.prototype.end = function() {
    // flush any buffered input
    this.lineStream.push('\n');
  };

  window.videojs.m3u8 = {
    LineStream: LineStream,
    ParseStream: ParseStream,
    Parser: Parser
  };
})(window.videojs, window.parseInt, window.isFinite, window.videojs.util.mergeOptions);

(function(videojs){
  /**
   * Creates and sends an XMLHttpRequest.
   * TODO - expose video.js core's XHR and use that instead
   *
   * @param options {string | object} if this argument is a string, it
   * is intrepreted as a URL and a simple GET request is
   * inititated. If it is an object, it should contain a `url`
   * property that indicates the URL to request and optionally a
   * `method` which is the type of HTTP request to send.
   * @param callback (optional) {function} a function to call when the
   * request completes. If the request was not successful, the first
   * argument will be falsey.
   * @return {object} the XMLHttpRequest that was initiated.
   */
   videojs.Hls.xhr = function(url, callback) {
    var
      options = {
        method: 'GET',
        timeout: 45 * 1000
      },
      request,
      abortTimeout;

    if (typeof callback !== 'function') {
      callback = function() {};
    }

    if (typeof url === 'object') {
      options = videojs.util.mergeOptions(options, url);
      url = options.url;
    }

    request = new window.XMLHttpRequest();
    request.open(options.method, url);
    request.url = url;
    request.requestTime = new Date().getTime();

    if (options.responseType) {
      request.responseType = options.responseType;
    }
    if (options.withCredentials) {
      request.withCredentials = true;
    }
    if (options.timeout) {
      abortTimeout = window.setTimeout(function() {
        if (request.readyState !== 4) {
          request.timedout = true;
          request.abort();
        }
      }, options.timeout);
    }

    request.onreadystatechange = function() {
      // wait until the request completes
      if (this.readyState !== 4) {
        return;
      }

      // clear outstanding timeouts
      window.clearTimeout(abortTimeout);

      // request timeout
      if (request.timedout) {
        return callback.call(this, 'timeout', url);
      }

      // request aborted or errored
      if (this.status >= 400 || this.status === 0) {
        return callback.call(this, true, url);
      }

      if (this.response) {
        this.responseTime = new Date().getTime();
        this.roundTripTime = this.responseTime - this.requestTime;
        this.bytesReceived = this.response.byteLength || this.response.length;
        this.bandwidth = Math.floor((this.bytesReceived / this.roundTripTime) * 8 * 1000);
      }

      return callback.call(this, false, url);
    };
    request.send(null);
    return request;
  };

})(window.videojs);

(function(window, videojs) {
  'use strict';

  var DEFAULT_TARGET_DURATION = 10;
  var accumulateDuration, ascendingNumeric, duration, intervalDuration, optionalMin, optionalMax, rangeDuration, seekable;

  // Math.min that will return the alternative input if one of its
  // parameters in undefined
  optionalMin = function(left, right) {
    left = isFinite(left) ? left : Infinity;
    right = isFinite(right) ? right : Infinity;
    return Math.min(left, right);
  };

  // Math.max that will return the alternative input if one of its
  // parameters in undefined
  optionalMax = function(left, right) {
    left = isFinite(left) ? left: -Infinity;
    right = isFinite(right) ? right: -Infinity;
    return Math.max(left, right);
  };

  // Array.sort comparator to sort numbers in ascending order
  ascendingNumeric = function(left, right) {
    return left - right;
  };

  /**
   * Returns the media duration for the segments between a start and
   * exclusive end index. The start and end parameters are interpreted
   * as indices into the currently available segments. This method
   * does not calculate durations for segments that have expired.
   * @param playlist {object} a media playlist object
   * @param start {number} an inclusive lower boundary for the
   * segments to examine.
   * @param end {number} an exclusive upper boundary for the segments
   * to examine.
   * @param includeTrailingTime {boolean} if false, the interval between
   * the final segment and the subsequent segment will not be included
   * in the result
   * @return {number} the duration between the start index and end
   * index in seconds.
   */
  accumulateDuration = function(playlist, start, end, includeTrailingTime) {
    var
      ranges = [],
      rangeEnds = (playlist.discontinuityStarts || []).concat(end),
      result = 0,
      i;

    // short circuit if start and end don't specify a non-empty range
    // of segments
    if (start >= end) {
      return 0;
    }

    // create a range object for each discontinuity sequence
    rangeEnds.sort(ascendingNumeric);
    for (i = 0; i < rangeEnds.length; i++) {
      if (rangeEnds[i] > start) {
        ranges.push({ start: start, end: rangeEnds[i] });
        i++;
        break;
      }
    }
    for (; i < rangeEnds.length; i++) {
      // ignore times ranges later than end
      if (rangeEnds[i] >= end) {
        ranges.push({ start: rangeEnds[i - 1], end: end });
        break;
      }
      ranges.push({ start: ranges[ranges.length - 1].end, end: rangeEnds[i] });
    }

    // add up the durations for each of the ranges
    for (i = 0; i < ranges.length; i++) {
      result += rangeDuration(playlist,
                              ranges[i],
                              i === ranges.length - 1 && includeTrailingTime);
    }

    return result;
  };

  /**
   * Returns the duration of the specified range of segments. The
   * range *must not* cross a discontinuity.
   * @param playlist {object} a media playlist object
   * @param range {object} an object that specifies a starting and
   * ending index into the available segments.
   * @param includeTrailingTime {boolean} if false, the interval between
   * the final segment and the subsequent segment will not be included
   * in the result
   * @return {number} the duration of the range in seconds.
   */
  rangeDuration = function(playlist, range, includeTrailingTime) {
    var
      result = 0,
      targetDuration = playlist.targetDuration || DEFAULT_TARGET_DURATION,
      segment,
      left, right;

    // accumulate while searching for the earliest segment with
    // available PTS information
    for (left = range.start; left < range.end; left++) {
      segment = playlist.segments[left];
      if (segment.minVideoPts !== undefined ||
          segment.minAudioPts !== undefined) {
        break;
      }
      result += segment.duration || targetDuration;
    }

    // see if there's enough information to include the trailing time
    if (includeTrailingTime) {
      segment = playlist.segments[range.end];
      if (segment &&
          (segment.minVideoPts !== undefined ||
           segment.minAudioPts !== undefined)) {
        result += 0.001 *
          (optionalMin(segment.minVideoPts, segment.minAudioPts) -
           optionalMin(playlist.segments[left].minVideoPts,
                    playlist.segments[left].minAudioPts));
        return result;
      }
    }

    // do the same thing while finding the latest segment
    for (right = range.end - 1; right >= left; right--) {
      segment = playlist.segments[right];
      if (segment.maxVideoPts !== undefined ||
          segment.maxAudioPts !== undefined) {
        break;
      }
      result += segment.duration || targetDuration;
    }

    // add in the PTS interval in seconds between them
    if (right >= left) {
      result += 0.001 *
        (optionalMax(playlist.segments[right].maxVideoPts,
                  playlist.segments[right].maxAudioPts) -
         optionalMin(playlist.segments[left].minVideoPts,
                  playlist.segments[left].minAudioPts));
    }

    return result;
  };

  /**
   * Calculate the media duration from the segments associated with a
   * playlist. The duration of a subinterval of the available segments
   * may be calculated by specifying a start and end index.
   *
   * @param playlist {object} a media playlist object
   * @param startSequence {number} (optional) an inclusive lower
   * boundary for the playlist.  Defaults to 0.
   * @param endSequence {number} (optional) an exclusive upper boundary
   * for the playlist.  Defaults to playlist length.
   * @param includeTrailingTime {boolean} if false, the interval between
   * the final segment and the subsequent segment will not be included
   * in the result
   * @return {number} the duration between the start index and end
   * index.
   */
  intervalDuration = function(playlist, startSequence, endSequence, includeTrailingTime) {
    var result = 0, targetDuration, expiredSegmentCount;

    if (startSequence === undefined) {
      startSequence = playlist.mediaSequence || 0;
    }
    if (endSequence === undefined) {
      endSequence = startSequence + (playlist.segments || []).length;
    }
    targetDuration = playlist.targetDuration || DEFAULT_TARGET_DURATION;

    // estimate expired segment duration using the target duration
    expiredSegmentCount = optionalMax(playlist.mediaSequence - startSequence, 0);
    result += expiredSegmentCount * targetDuration;

    // accumulate the segment durations into the result
    result += accumulateDuration(playlist,
                                 startSequence + expiredSegmentCount - playlist.mediaSequence,
                                 endSequence - playlist.mediaSequence,
                                 includeTrailingTime);

    return result;
  };

  /**
   * Calculates the duration of a playlist. If a start and end index
   * are specified, the duration will be for the subset of the media
   * timeline between those two indices. The total duration for live
   * playlists is always Infinity.
   * @param playlist {object} a media playlist object
   * @param startSequence {number} (optional) an inclusive lower
   * boundary for the playlist.  Defaults to 0.
   * @param endSequence {number} (optional) an exclusive upper boundary
   * for the playlist.  Defaults to playlist length.
   * @param includeTrailingTime {boolean} (optional) if false, the interval between
   * the final segment and the subsequent segment will not be included
   * in the result
   * @return {number} the duration between the start index and end
   * index.
   */
  duration = function(playlist, startSequence, endSequence, includeTrailingTime) {
    if (!playlist) {
      return 0;
    }

    if (includeTrailingTime === undefined) {
      includeTrailingTime = true;
    }

    // if a slice of the total duration is not requested, use
    // playlist-level duration indicators when they're present
    if (startSequence === undefined && endSequence === undefined) {
      // if present, use the duration specified in the playlist
      if (playlist.totalDuration) {
        return playlist.totalDuration;
      }

      // duration should be Infinity for live playlists
      if (!playlist.endList) {
        return window.Infinity;
      }
    }

    // calculate the total duration based on the segment durations
    return intervalDuration(playlist,
                            startSequence,
                            endSequence,
                            includeTrailingTime);
  };

  /**
   * Calculates the interval of time that is currently seekable in a
   * playlist. The returned time ranges are relative to the earliest
   * moment in the specified playlist that is still available. A full
   * seekable implementation for live streams would need to offset
   * these values by the duration of content that has expired from the
   * stream.
   * @param playlist {object} a media playlist object
   * @return {TimeRanges} the periods of time that are valid targets
   * for seeking
   */
  seekable = function(playlist) {
    var start, end, liveBuffer, targetDuration, segment, pending, i;

    // without segments, there are no seekable ranges
    if (!playlist.segments) {
      return videojs.createTimeRange();
    }
    // when the playlist is complete, the entire duration is seekable
    if (playlist.endList) {
      return videojs.createTimeRange(0, duration(playlist));
    }

    start = 0;
    end = intervalDuration(playlist,
                           playlist.mediaSequence,
                           playlist.mediaSequence + playlist.segments.length);
    targetDuration = playlist.targetDuration || DEFAULT_TARGET_DURATION;

    // live playlists should not expose three segment durations worth
    // of content from the end of the playlist
    // https://tools.ietf.org/html/draft-pantos-http-live-streaming-16#section-6.3.3
    if (!playlist.endList) {
      liveBuffer = targetDuration * 3;
      // walk backward from the last available segment and track how
      // much media time has elapsed until three target durations have
      // been traversed. if a segment is part of the interval being
      // reported, subtract the overlapping portion of its duration
      // from the result.
      for (i = playlist.segments.length - 1; i >= 0 && liveBuffer > 0; i--) {
        segment = playlist.segments[i];
        pending = optionalMin(duration(playlist,
                                       playlist.mediaSequence + i,
                                       playlist.mediaSequence + i + 1),
                           liveBuffer);
        liveBuffer -= pending;
        end -= pending;
      }
    }

    return videojs.createTimeRange(start, end);
  };

  // exports
  videojs.Hls.Playlist = {
    duration: duration,
    seekable: seekable
  };
})(window, window.videojs);

(function(window, videojs) {
  'use strict';
  var
    resolveUrl = videojs.Hls.resolveUrl,
    xhr = videojs.Hls.xhr,
    Playlist = videojs.Hls.Playlist,
    mergeOptions = videojs.util.mergeOptions,

    /**
     * Returns a new master playlist that is the result of merging an
     * updated media playlist into the original version. If the
     * updated media playlist does not match any of the playlist
     * entries in the original master playlist, null is returned.
     * @param master {object} a parsed master M3U8 object
     * @param media {object} a parsed media M3U8 object
     * @return {object} a new object that represents the original
     * master playlist with the updated media playlist merged in, or
     * null if the merge produced no change.
     */
    updateMaster = function(master, media) {
      var
        changed = false,
        result = mergeOptions(master, {}),
        i,
        playlist;

      i = master.playlists.length;
      while (i--) {
        playlist = result.playlists[i];
        if (playlist.uri === media.uri) {
          // consider the playlist unchanged if the number of segments
          // are equal and the media sequence number is unchanged
          if (playlist.segments &&
              media.segments &&
              playlist.segments.length === media.segments.length &&
              playlist.mediaSequence === media.mediaSequence) {
            continue;
          }

          result.playlists[i] = mergeOptions(playlist, media);
          result.playlists[media.uri] = result.playlists[i];

          // if the update could overlap existing segment information,
          // merge the two lists
          if (playlist.segments) {
            result.playlists[i].segments = updateSegments(playlist.segments,
                                                          media.segments,
                                                          media.mediaSequence - playlist.mediaSequence);
          }
          changed = true;
        }
      }
      return changed ? result : null;
    },

    /**
     * Returns a new array of segments that is the result of merging
     * properties from an older list of segments onto an updated
     * list. No properties on the updated playlist will be overridden.
     * @param original {array} the outdated list of segments
     * @param update {array} the updated list of segments
     * @param offset {number} (optional) the index of the first update
     * segment in the original segment list. For non-live playlists,
     * this should always be zero and does not need to be
     * specified. For live playlists, it should be the difference
     * between the media sequence numbers in the original and updated
     * playlists.
     * @return a list of merged segment objects
     */
    updateSegments = function(original, update, offset) {
      var result = update.slice(), length, i;
      offset = offset || 0;
      length = Math.min(original.length, update.length + offset);

      for (i = offset; i < length; i++) {
        result[i - offset] = mergeOptions(original[i], result[i - offset]);
      }
      return result;
    },

    PlaylistLoader = function(srcUrl, withCredentials) {
      var
        loader = this,
        dispose,
        mediaUpdateTimeout,
        request,
        haveMetadata;

      PlaylistLoader.prototype.init.call(this);

      if (!srcUrl) {
        throw new Error('A non-empty playlist URL is required');
      }

      // update the playlist loader's state in response to a new or
      // updated playlist.
      haveMetadata = function(error, xhr, url) {
        var parser, refreshDelay, update;

        loader.setBandwidth(request || xhr);

        // any in-flight request is now finished
        request = null;

        if (error) {
          loader.error = {
            status: xhr.status,
            message: 'HLS playlist request error at URL: ' + url,
            responseText: xhr.responseText,
            code: (xhr.status >= 500) ? 4 : 2
          };
          return loader.trigger('error');
        }

        loader.state = 'HAVE_METADATA';

        parser = new videojs.m3u8.Parser();
        parser.push(xhr.responseText);
        parser.end();
        parser.manifest.uri = url;

        // merge this playlist into the master
        update = updateMaster(loader.master, parser.manifest);
        refreshDelay = (parser.manifest.targetDuration || 10) * 1000;
        if (update) {
          loader.master = update;
          loader.updateMediaPlaylist_(parser.manifest);
        } else {
          // if the playlist is unchanged since the last reload,
          // try again after half the target duration
          refreshDelay /= 2;
        }

        // refresh live playlists after a target duration passes
        if (!loader.media().endList) {
          window.clearTimeout(mediaUpdateTimeout);
          mediaUpdateTimeout = window.setTimeout(function() {
            loader.trigger('mediaupdatetimeout');
          }, refreshDelay);
        }

        loader.trigger('loadedplaylist');
      };

      // initialize the loader state
      loader.state = 'HAVE_NOTHING';

      // the total duration of all segments that expired and have been
      // removed from the current playlist after the last
      // #EXT-X-DISCONTINUITY. In a live playlist without
      // discontinuities, this is the total amount of time that has
      // been removed from the stream since the playlist loader began
      // tracking it.
      loader.expiredPostDiscontinuity_ = 0;

      // the total duration of all segments that expired and have been
      // removed from the current playlist before the last
      // #EXT-X-DISCONTINUITY. The total amount of time that has
      // expired is always the sum of expiredPreDiscontinuity_ and
      // expiredPostDiscontinuity_.
      loader.expiredPreDiscontinuity_ = 0;

      // capture the prototype dispose function
      dispose = this.dispose;

      /**
       * Abort any outstanding work and clean up.
       */
      loader.dispose = function() {
        if (request) {
          request.onreadystatechange = null;
          request.abort();
          request = null;
        }
        window.clearTimeout(mediaUpdateTimeout);
        dispose.call(this);
      };

      /**
       * When called without any arguments, returns the currently
       * active media playlist. When called with a single argument,
       * triggers the playlist loader to asynchronously switch to the
       * specified media playlist. Calling this method while the
       * loader is in the HAVE_NOTHING or HAVE_MASTER states causes an
       * error to be emitted but otherwise has no effect.
       * @param playlist (optional) {object} the parsed media playlist
       * object to switch to
       */
      loader.media = function(playlist) {
        var mediaChange = false;
        // getter
        if (!playlist) {
          return loader.media_;
        }

        // setter
        if (loader.state === 'HAVE_NOTHING' || loader.state === 'HAVE_MASTER') {
          throw new Error('Cannot switch media playlist from ' + loader.state);
        }

        // find the playlist object if the target playlist has been
        // specified by URI
        if (typeof playlist === 'string') {
          if (!loader.master.playlists[playlist]) {
            throw new Error('Unknown playlist URI: ' + playlist);
          }
          playlist = loader.master.playlists[playlist];
        }

        mediaChange = playlist.uri !== loader.media_.uri;

        // switch to fully loaded playlists immediately
        if (loader.master.playlists[playlist.uri].endList) {
          // abort outstanding playlist requests
          if (request) {
            request.onreadystatechange = null;
            request.abort();
            request = null;
          }
          loader.state = 'HAVE_METADATA';
          loader.media_ = playlist;

          // trigger media change if the active media has been updated
          if (mediaChange) {
            loader.trigger('mediachange');
          }
          return;
        }

        // switching to the active playlist is a no-op
        if (!mediaChange) {
          return;
        }

        loader.state = 'SWITCHING_MEDIA';

        // there is already an outstanding playlist request
        if (request) {
          if (resolveUrl(loader.master.uri, playlist.uri) === request.url) {
            // requesting to switch to the same playlist multiple times
            // has no effect after the first
            return;
          }
          request.onreadystatechange = null;
          request.abort();
          request = null;
        }

        // request the new playlist
        request = xhr({
          url: resolveUrl(loader.master.uri, playlist.uri),
          withCredentials: withCredentials
        }, function(error) {
          haveMetadata(error, this, playlist.uri);
          loader.trigger('mediachange');
        });
      };

      loader.setBandwidth = function(xhr) {
        loader.bandwidth = xhr.bandwidth;
      };

      // live playlist staleness timeout
      loader.on('mediaupdatetimeout', function() {
        if (loader.state !== 'HAVE_METADATA') {
          // only refresh the media playlist if no other activity is going on
          return;
        }

        loader.state = 'HAVE_CURRENT_METADATA';
        request = xhr({
          url: resolveUrl(loader.master.uri, loader.media().uri),
          withCredentials: withCredentials
        }, function(error) {
          haveMetadata(error, this, loader.media().uri);
        });
      });

      // request the specified URL
      xhr({
        url: srcUrl,
        withCredentials: withCredentials
      }, function(error) {
        var parser, i;

        if (error) {
          loader.error = {
            status: this.status,
            message: 'HLS playlist request error at URL: ' + srcUrl,
            responseText: this.responseText,
            code: 2 // MEDIA_ERR_NETWORK
          };
          return loader.trigger('error');
        }

        parser = new videojs.m3u8.Parser();
        parser.push(this.responseText);
        parser.end();

        loader.state = 'HAVE_MASTER';

        parser.manifest.uri = srcUrl;

        // loaded a master playlist
        if (parser.manifest.playlists) {
          loader.master = parser.manifest;

          // setup by-URI lookups
          i = loader.master.playlists.length;
          while (i--) {
            loader.master.playlists[loader.master.playlists[i].uri] = loader.master.playlists[i];
          }

          request = xhr({
            url: resolveUrl(srcUrl, parser.manifest.playlists[0].uri),
            withCredentials: withCredentials
          }, function(error) {
            // pass along the URL specified in the master playlist
            haveMetadata(error,
                         this,
                         parser.manifest.playlists[0].uri);
            if (!error) {
              loader.trigger('loadedmetadata');
            }
          });
          return loader.trigger('loadedplaylist');
        }

        // loaded a media playlist
        // infer a master playlist if none was previously requested
        loader.master = {
          uri: window.location.href,
          playlists: [{
            uri: srcUrl
          }]
        };
        loader.master.playlists[srcUrl] = loader.master.playlists[0];
        haveMetadata(null, this, srcUrl);
        return loader.trigger('loadedmetadata');
      });
    };
  PlaylistLoader.prototype = new videojs.Hls.Stream();

  /**
   * Update the PlaylistLoader state to reflect the changes in an
   * update to the current media playlist.
   * @param update {object} the updated media playlist object
   */
  PlaylistLoader.prototype.updateMediaPlaylist_ = function(update) {
    var lastDiscontinuity, expiredCount, i;

    if (this.media_) {
      expiredCount = update.mediaSequence - this.media_.mediaSequence;

      // setup the index for duration calculations so that the newly
      // expired time will be accumulated after the last
      // discontinuity, unless we discover otherwise
      lastDiscontinuity = this.media_.mediaSequence;

      if (this.media_.discontinuitySequence !== update.discontinuitySequence) {
        i = expiredCount;
        while (i--) {
          if (this.media_.segments[i].discontinuity) {
            // a segment that begins a new discontinuity sequence has expired
            lastDiscontinuity = i + this.media_.mediaSequence;
            this.expiredPreDiscontinuity_ += this.expiredPostDiscontinuity_;
            this.expiredPostDiscontinuity_ = 0;
            break;
          }
        }
      }

      // update the expirated durations
      this.expiredPreDiscontinuity_ += Playlist.duration(this.media_,
                                                         this.media_.mediaSequence,
                                                         lastDiscontinuity);
      this.expiredPostDiscontinuity_ += Playlist.duration(this.media_,
                                                         lastDiscontinuity,
                                                         this.media_.mediaSequence + expiredCount);
    }

    this.media_ = this.master.playlists[update.uri];
  };

  /**
   * Determine the index of the segment that contains a specified
   * playback position in the current media playlist. Early versions
   * of the HLS specification require segment durations to be rounded
   * to the nearest integer which means it may not be possible to
   * determine the correct segment for a playback position if that
   * position is within .5 seconds of the segment duration. This
   * function will always return the lower of the two possible indices
   * in those cases.
   *
   * @param time {number} The number of seconds since the earliest
   * possible position to determine the containing segment for
   * @returns {number} The number of the media segment that contains
   * that time position. If the specified playback position is outside
   * the time range of the current set of media segments, the return
   * value will be clamped to the index of the segment containing the
   * closest playback position that is currently available.
   */
  PlaylistLoader.prototype.getMediaIndexForTime_ = function(time) {
    var i;

    if (!this.media_) {
      return 0;
    }

    // when the requested position is earlier than the current set of
    // segments, return the earliest segment index
    time -= this.expiredPreDiscontinuity_ + this.expiredPostDiscontinuity_;
    if (time < 0) {
      return 0;
    }

    for (i = 0; i < this.media_.segments.length; i++) {
      time -= Playlist.duration(this.media_,
                                this.media_.mediaSequence + i,
                                this.media_.mediaSequence + i + 1,
                                false);

      // HLS version 3 and lower round segment durations to the
      // nearest decimal integer. When the correct media index is
      // ambiguous, prefer the higher one.
      if (time <= 0) {
        return i;
      }
    }

    // the playback position is outside the range of available
    // segments so return the last one
    return this.media_.segments.length - 1;
  };

  videojs.Hls.PlaylistLoader = PlaylistLoader;
})(window, window.videojs);

(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
(function (global){
global.window.pkcs7 = {
  unpad: require('./unpad')
};

}).call(this,typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"./unpad":2}],2:[function(require,module,exports){
/*
 * pkcs7.unpad
 * https://github.com/brightcove/pkcs7
 *
 * Copyright (c) 2014 Brightcove
 * Licensed under the apache2 license.
 */

'use strict';

/**
 * Returns the subarray of a Uint8Array without PKCS#7 padding.
 * @param padded {Uint8Array} unencrypted bytes that have been padded
 * @return {Uint8Array} the unpadded bytes
 * @see http://tools.ietf.org/html/rfc5652
 */
module.exports = function unpad(padded) {
  return padded.subarray(0, padded.byteLength - padded[padded.byteLength - 1]);
};

},{}]},{},[1]);
(function(window, videojs, unpad) {
'use strict';

var AES, AsyncStream, Decrypter, decrypt, ntoh;

/**
 * Convert network-order (big-endian) bytes into their little-endian
 * representation.
 */
ntoh = function(word) {
  return (word << 24) |
    ((word & 0xff00) << 8) |
    ((word & 0xff0000) >> 8) |
    (word >>> 24);
};

/**
 * Schedule out an AES key for both encryption and decryption. This
 * is a low-level class. Use a cipher mode to do bulk encryption.
 *
 * @constructor
 * @param key {Array} The key as an array of 4, 6 or 8 words.
 */
AES = function (key) {
  this._precompute();

  var i, j, tmp,
    encKey, decKey,
    sbox = this._tables[0][4], decTable = this._tables[1],
    keyLen = key.length, rcon = 1;

  if (keyLen !== 4 && keyLen !== 6 && keyLen !== 8) {
    throw new Error("Invalid aes key size");
  }

  encKey = key.slice(0);
  decKey = [];
  this._key = [encKey, decKey];

  // schedule encryption keys
  for (i = keyLen; i < 4 * keyLen + 28; i++) {
    tmp = encKey[i-1];

    // apply sbox
    if (i%keyLen === 0 || (keyLen === 8 && i%keyLen === 4)) {
      tmp = sbox[tmp>>>24]<<24 ^ sbox[tmp>>16&255]<<16 ^ sbox[tmp>>8&255]<<8 ^ sbox[tmp&255];

      // shift rows and add rcon
      if (i%keyLen === 0) {
        tmp = tmp<<8 ^ tmp>>>24 ^ rcon<<24;
        rcon = rcon<<1 ^ (rcon>>7)*283;
      }
    }

    encKey[i] = encKey[i-keyLen] ^ tmp;
  }

  // schedule decryption keys
  for (j = 0; i; j++, i--) {
    tmp = encKey[j&3 ? i : i - 4];
    if (i<=4 || j<4) {
      decKey[j] = tmp;
    } else {
      decKey[j] = decTable[0][sbox[tmp>>>24      ]] ^
                  decTable[1][sbox[tmp>>16  & 255]] ^
                  decTable[2][sbox[tmp>>8   & 255]] ^
                  decTable[3][sbox[tmp      & 255]];
    }
  }
};

AES.prototype = {
  /**
   * The expanded S-box and inverse S-box tables. These will be computed
   * on the client so that we don't have to send them down the wire.
   *
   * There are two tables, _tables[0] is for encryption and
   * _tables[1] is for decryption.
   *
   * The first 4 sub-tables are the expanded S-box with MixColumns. The
   * last (_tables[01][4]) is the S-box itself.
   *
   * @private
   */
  _tables: [[[],[],[],[],[]],[[],[],[],[],[]]],

  /**
   * Expand the S-box tables.
   *
   * @private
   */
  _precompute: function () {
   var encTable = this._tables[0], decTable = this._tables[1],
       sbox = encTable[4], sboxInv = decTable[4],
       i, x, xInv, d=[], th=[], x2, x4, x8, s, tEnc, tDec;

    // Compute double and third tables
   for (i = 0; i < 256; i++) {
     th[( d[i] = i<<1 ^ (i>>7)*283 )^i]=i;
   }

   for (x = xInv = 0; !sbox[x]; x ^= x2 || 1, xInv = th[xInv] || 1) {
     // Compute sbox
     s = xInv ^ xInv<<1 ^ xInv<<2 ^ xInv<<3 ^ xInv<<4;
     s = s>>8 ^ s&255 ^ 99;
     sbox[x] = s;
     sboxInv[s] = x;

     // Compute MixColumns
     x8 = d[x4 = d[x2 = d[x]]];
     tDec = x8*0x1010101 ^ x4*0x10001 ^ x2*0x101 ^ x*0x1010100;
     tEnc = d[s]*0x101 ^ s*0x1010100;

     for (i = 0; i < 4; i++) {
       encTable[i][x] = tEnc = tEnc<<24 ^ tEnc>>>8;
       decTable[i][s] = tDec = tDec<<24 ^ tDec>>>8;
     }
   }

   // Compactify. Considerable speedup on Firefox.
   for (i = 0; i < 5; i++) {
     encTable[i] = encTable[i].slice(0);
     decTable[i] = decTable[i].slice(0);
   }
  },

  /**
   * Decrypt 16 bytes, specified as four 32-bit words.
   * @param encrypted0 {number} the first word to decrypt
   * @param encrypted1 {number} the second word to decrypt
   * @param encrypted2 {number} the third word to decrypt
   * @param encrypted3 {number} the fourth word to decrypt
   * @param out {Int32Array} the array to write the decrypted words
   * into
   * @param offset {number} the offset into the output array to start
   * writing results
   * @return {Array} The plaintext.
   */
  decrypt:function (encrypted0, encrypted1, encrypted2, encrypted3, out, offset) {
    var key = this._key[1],
        // state variables a,b,c,d are loaded with pre-whitened data
        a = encrypted0 ^ key[0],
        b = encrypted3 ^ key[1],
        c = encrypted2 ^ key[2],
        d = encrypted1 ^ key[3],
        a2, b2, c2,

        nInnerRounds = key.length / 4 - 2, // key.length === 2 ?
        i,
        kIndex = 4,
        table = this._tables[1],

        // load up the tables
        table0    = table[0],
        table1    = table[1],
        table2    = table[2],
        table3    = table[3],
        sbox  = table[4];

    // Inner rounds. Cribbed from OpenSSL.
    for (i = 0; i < nInnerRounds; i++) {
      a2 = table0[a>>>24] ^ table1[b>>16 & 255] ^ table2[c>>8 & 255] ^ table3[d & 255] ^ key[kIndex];
      b2 = table0[b>>>24] ^ table1[c>>16 & 255] ^ table2[d>>8 & 255] ^ table3[a & 255] ^ key[kIndex + 1];
      c2 = table0[c>>>24] ^ table1[d>>16 & 255] ^ table2[a>>8 & 255] ^ table3[b & 255] ^ key[kIndex + 2];
      d  = table0[d>>>24] ^ table1[a>>16 & 255] ^ table2[b>>8 & 255] ^ table3[c & 255] ^ key[kIndex + 3];
      kIndex += 4;
      a=a2; b=b2; c=c2;
    }

    // Last round.
    for (i = 0; i < 4; i++) {
      out[(3 & -i) + offset] =
        sbox[a>>>24      ]<<24 ^
        sbox[b>>16  & 255]<<16 ^
        sbox[c>>8   & 255]<<8  ^
        sbox[d      & 255]     ^
        key[kIndex++];
      a2=a; a=b; b=c; c=d; d=a2;
    }
  }
};

/**
 * Decrypt bytes using AES-128 with CBC and PKCS#7 padding.
 * @param encrypted {Uint8Array} the encrypted bytes
 * @param key {Uint32Array} the bytes of the decryption key
 * @param initVector {Uint32Array} the initialization vector (IV) to
 * use for the first round of CBC.
 * @return {Uint8Array} the decrypted bytes
 *
 * @see http://en.wikipedia.org/wiki/Advanced_Encryption_Standard
 * @see http://en.wikipedia.org/wiki/Block_cipher_mode_of_operation#Cipher_Block_Chaining_.28CBC.29
 * @see https://tools.ietf.org/html/rfc2315
 */
decrypt = function(encrypted, key, initVector) {
  var
    // word-level access to the encrypted bytes
    encrypted32 = new Int32Array(encrypted.buffer, encrypted.byteOffset, encrypted.byteLength >> 2),

    decipher = new AES(Array.prototype.slice.call(key)),

    // byte and word-level access for the decrypted output
    decrypted = new Uint8Array(encrypted.byteLength),
    decrypted32 = new Int32Array(decrypted.buffer),

    // temporary variables for working with the IV, encrypted, and
    // decrypted data
    init0, init1, init2, init3,
    encrypted0, encrypted1, encrypted2, encrypted3,

    // iteration variable
    wordIx;

  // pull out the words of the IV to ensure we don't modify the
  // passed-in reference and easier access
  init0 = initVector[0];
  init1 = initVector[1];
  init2 = initVector[2];
  init3 = initVector[3];

  // decrypt four word sequences, applying cipher-block chaining (CBC)
  // to each decrypted block
  for (wordIx = 0; wordIx < encrypted32.length; wordIx += 4) {
    // convert big-endian (network order) words into little-endian
    // (javascript order)
    encrypted0 = ntoh(encrypted32[wordIx]);
    encrypted1 = ntoh(encrypted32[wordIx + 1]);
    encrypted2 = ntoh(encrypted32[wordIx + 2]);
    encrypted3 = ntoh(encrypted32[wordIx + 3]);

    // decrypt the block
    decipher.decrypt(encrypted0,
                     encrypted1,
                     encrypted2,
                     encrypted3,
                     decrypted32,
                     wordIx);

    // XOR with the IV, and restore network byte-order to obtain the
    // plaintext
    decrypted32[wordIx]     = ntoh(decrypted32[wordIx] ^ init0);
    decrypted32[wordIx + 1] = ntoh(decrypted32[wordIx + 1] ^ init1);
    decrypted32[wordIx + 2] = ntoh(decrypted32[wordIx + 2] ^ init2);
    decrypted32[wordIx + 3] = ntoh(decrypted32[wordIx + 3] ^ init3);

    // setup the IV for the next round
    init0 = encrypted0;
    init1 = encrypted1;
    init2 = encrypted2;
    init3 = encrypted3;
  }

  return decrypted;
};

AsyncStream = function() {
  this.jobs = [];
  this.delay = 1;
  this.timeout_ = null;
};
AsyncStream.prototype = new videojs.Hls.Stream();
AsyncStream.prototype.processJob_ = function() {
  this.jobs.shift()();
  if (this.jobs.length) {
    this.timeout_ = setTimeout(videojs.bind(this, this.processJob_),
                               this.delay);
  } else {
    this.timeout_ = null;
  }
};
AsyncStream.prototype.push = function(job) {
  this.jobs.push(job);
  if (!this.timeout_) {
    this.timeout_ = setTimeout(videojs.bind(this, this.processJob_),
                               this.delay);
  }
};

Decrypter = function(encrypted, key, initVector, done) {
  var
    step = Decrypter.STEP,
    encrypted32 = new Int32Array(encrypted.buffer),
    decrypted = new Uint8Array(encrypted.byteLength),
    i = 0;
  this.asyncStream_ = new AsyncStream();

  // split up the encryption job and do the individual chunks asynchronously
  this.asyncStream_.push(this.decryptChunk_(encrypted32.subarray(i, i + step),
                                            key,
                                            initVector,
                                            decrypted,
                                            i));
  for (i = step; i < encrypted32.length; i += step) {
    initVector = new Uint32Array([
      ntoh(encrypted32[i - 4]),
      ntoh(encrypted32[i - 3]),
      ntoh(encrypted32[i - 2]),
      ntoh(encrypted32[i - 1])
    ]);
    this.asyncStream_.push(this.decryptChunk_(encrypted32.subarray(i, i + step),
                                              key,
                                              initVector,
                                              decrypted));
  }
  // invoke the done() callback when everything is finished
  this.asyncStream_.push(function() {
    // remove pkcs#7 padding from the decrypted bytes
    done(null, unpad(decrypted));
  });
};
Decrypter.prototype = new videojs.Hls.Stream();
Decrypter.prototype.decryptChunk_ = function(encrypted, key, initVector, decrypted) {
  return function() {
    var bytes = decrypt(encrypted,
                        key,
                        initVector);
    decrypted.set(bytes, encrypted.byteOffset);
  };
};
// the maximum number of bytes to process at one time
Decrypter.STEP = 4 * 8000;

// exports
videojs.Hls.decrypt = decrypt;
videojs.Hls.Decrypter = Decrypter;
videojs.Hls.AsyncStream = AsyncStream;

})(window, window.videojs, window.pkcs7.unpad);

(function(window) {
  var module = {
    hexDump: function(data) {
      var
        bytes = Array.prototype.slice.call(data),
        step = 16,
        formatHexString = function(e, i) {
          var value = e.toString(16);
          return "00".substring(0, 2 - value.length) + value + (i % 2 ? ' ' : '');
        },
        formatAsciiString = function(e) {
          if (e >= 0x20 && e < 0x7e) {
            return String.fromCharCode(e);
          }
          return '.';
        },
        result = '',
        hex,
        ascii;
      for (var j = 0; j < bytes.length / step; j++) {
        hex = bytes.slice(j * step, j * step + step).map(formatHexString).join('');
        ascii = bytes.slice(j * step, j * step + step).map(formatAsciiString).join('');
        result += hex + ' ' + ascii + '\n';
      }
      return result;
    },
    tagDump: function(tag) {
      return module.hexDump(tag.bytes);
    }
  };

  window.videojs.Hls.utils = module;
})(this);

/*! StreamRoot - v1.1.38 - 2015-07-06
 * www.streamroot.io
 * Copyright (c) 2015 StreamRoot; Licensed  */

(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
  function getFlashVersion(){try{try{var e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");try{e.AllowScriptAccess="always"}catch(t){return"6,0,0"}}catch(t){}return new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(t){try{if(navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)return(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(t){}}return"0,0,0"}var UAParser=require("ua-parser-js"),isFlashVersionSupported=function(){var e=getFlashVersion().split(/,|\./);return parseFloat(e[0])>11||11===parseFloat(e[0])&&parseFloat(e[1])>=4},parser=new UAParser;parser.setUA(window.navigator.userAgent);var uaObject=parser.getResult();window.Streamroot=window.Streamroot||{},window.Streamroot.ua=uaObject,window.Streamroot.isStreamrootFlashSupported=function(){var e="mobile"!==uaObject.device.type&&"tablet"!==uaObject.device.type&&"console"!==uaObject.device.type&&("Chrome"===uaObject.browser.name&&uaObject.browser.major>=38||"Chromium"===uaObject.browser.name&&uaObject.browser.major>=38||"Opera"===uaObject.browser.name&&uaObject.browser.major>=26||"Firefox"===uaObject.browser.name&&uaObject.browser.major>=33)&&"Android"!==uaObject.os.name&&"iOS"!==uaObject.os.name&&isFlashVersionSupported();return e},window.Streamroot.isStreamrootHtml5Supported=function(){var e="mobile"!==uaObject.device.type&&"tablet"!==uaObject.device.type&&"console"!==uaObject.device.type&&("Chrome"===uaObject.browser.name&&uaObject.browser.major>=38||"Chromium"===uaObject.browser.name&&uaObject.browser.major>=38)&&"Android"!==uaObject.os.name&&"iOS"!==uaObject.os.name&&void 0!==window.MediaSource;return e},window.Streamroot.isStreamrootSupported=function(){return window.Streamroot.isStreamrootFlashSupported()||window.Streamroot.isStreamrootHtml5Supported()},window.Streamroot.isFlashVersionSupported=isFlashVersionSupported,window.isStreamrootFlashSupported=window.Streamroot.isStreamrootFlashSupported,window.isStreamrootHtml5Supported=window.Streamroot.isStreamrootHtml5Supported,window.isFlashVersionSupported=window.Streamroot.isFlashVersionSupported;var MediaController=require("./js/media/MediaController"),streamrootAPI=function(e,t,r,o){this.dash=new MediaController(e,t,r,o)};streamrootAPI.prototype.play=function(){this.dash.play()},streamrootAPI.prototype.pause=function(){this.dash.pause()},streamrootAPI.prototype.seek=function(e){this.dash.setCurrentTime(e)},streamrootAPI.prototype.paused=function(){return!this.dash.want_to_play},streamrootAPI.prototype.getCurrentTime=function(){return this.dash.video.currentTime},streamrootAPI.prototype.getBuffered=function(){return this.dash.getBuffered()},streamrootAPI.prototype.switchRepresentation=function(e,t,r){this.dash.manualSwitchRepresentation(e,t,r)},streamrootAPI.prototype.getDuration=function(){return this.dash.getDuration()},streamrootAPI.prototype.addEventListener=function(e,t){this.dash.addEventListener(e,t)},streamrootAPI.prototype.addVideoEventListener=function(e,t){this.dash.addVideoEventListener(e,t)},window.streamrootAPI=streamrootAPI,window.Streamroot.streamrootAPI=streamrootAPI;


},{"./js/media/MediaController":16,"ua-parser-js":264}],2:[function(require,module,exports){
  var Conf=function(){this.LOGGERMANAGER={DISPLAY:!0,SHOWLOGS:3,SHOWBARS:2,SHOWBUFFER:0,CHUNK_DISPLAY:0,SHOWPEERS:2},this.DISPLAY_DEV=!0,this.TRACKER_URL="//tracker.streamroot.io",this.CHUNKPARAMS_WIDTH=5,this.CHUNKPARAMS_HEIGHT=5,this.CHUNK_SIZE=15360,this.P2P_CACHE_MAX_SIZE=136314880,this.MAX_DL_REQUEST_SPEED=1e3,this.TIME_BETWEEN_CHUNK_DL=50,this.NB_CHUNK_DL_GROUP=10,this.MAX_CHUNK_BY_SEED=300,this.NB_SEGMENT_P2P_PREBUFFER=6,this.MAX_SEGMENT_REQUEST_STORE=this.NB_SEGMENT_P2P_PREBUFFER,this.NB_SEGMENT_P2P_SKIP=2,this.MAX_UP_SPEED=600,this.CHUNK_UP_RETRY_DELAY=10,this.PEER_CONNECTION_TIMEOUT=5e4,this.PEER_UP_TIMEOUT=5e3,this.SEND_HEARTBEAT_INTERVAL=5e3,this.CHECK_HEARTBEAT_INTERVAL=1e4,this.MAX_USELESS_COUNT=100,this.MIN_USEFUL_SPEED=10,this.MIN_NUMBER_OF_PEERS=5,this.MAX_NUMBER_OF_PEERS=10,this.ASK_PEERS_INTERVAL=18e4,this.CHECK_USELESS_INTERVAL=24e4,this.CHUNK_TIMEOUT=2500,this.CHUNK_UP_TIMEOUT=this.CHUNK_TIMEOUT-600,this.UP_MAX_BUFFERED_AMOUNT=10,this.OFFER_DECLINED_TIMEOUT=6e4,this.PEER_REMOVED_TIMEOUT=9e5,this.MAX_P2P_PREBUFFERING_TIME=720,this.RETRY_P2P_START_DL_SEGMENT_DELAY=5e3,this.ANALYTICS={DOWNLOAD_TRACK_INTERVAL:12e4,LATENCIES_TRACK_INTERVAL:3e5},this.RY_TRACK=!0,this.RY_TRACKER="srTracker",this.SEGMENTS_HASH_CHECK=!0,this.PROPAGATE_SEGMENT_HASHES=!0,this.ABR_DEL_T=30,this.LIVE={P2P_CACHE_MAX_SIZE:20971520},this.ENABLE_TURN=!0,this.STUNSERVERS=[{url:"stun:stun.l.google.com:19302"}],this.TURNSERVERS=[{url:"turn:23.97.160.254:3478?transport=udp",credential:"streamroot",username:"streamroot"}],this.ALLOW_P2P=!0,this.DISPLAY=!0,this.DISPLAY_ERROR=!1},conf=new Conf;module.exports=conf;


},{}],3:[function(require,module,exports){
  var Conf=function(){this.STREAM_TYPES={DASH:0,SMOOTH:1,HLS:2},this.FORCE_TRACK_BOOL=!1,this.PRESELECTED_TRACKS={video:{id_aset:1,id_rep:1},audio:{id_aset:0,id_rep:0}},this.FORCE_BANDWIDTH={video:1e6,audio:1e5},this.DEFAULT_AUTOSWITCH={video:!1,audio:!1},this.AUTO_LABEL_FIRST=!0,this.RANGE_REQUEST_ALLOWED=!0,this.MAX_CDN_DL=2,this.APPEND_RETRY_INTERVAL=100,this.REMOVE_OLD_SEGMENTS_DELAY=15,this.BUFFER={EMERGENCY_MARGIN:.2,BUFFER_MARGIN:40,SOFT_TRACK_SWITCH_MIN_BUFFER:0,FORCE_SWITCH_CLEAR_ALL:!1,ALWAYS_FORCE_SWITCH:!0,MAX_TRACKS_OFFSET:10},this.REPRESENTATION_NUMBER=0,this.ABR_DEL_T=void 0,this.LIVE={DISTANCE_FROM_LIVE_EDGE:30,MIN_BUFFER_LEVEL:10,ALLOW_LIVE_DELAY:30},this.MPD_UPDATE_INTERVAL=2e3,this.RTT_RELOAD_OFFSET=700,this.MIN_UPDATE_INTERVAL=1e3,this.FREEZE_LIVE_MIN_SEEK_TIME=1e3,this.REPPORT_ERROR=!1,this.ADD_QUERY_PARAM=!1,this.PTS_TOLERANCE=.1,this.HACK_ABR_HLS_AUDIO_ONLY=!0,this.SS_IMPLICIT_AAC_HE=!1},conf=new Conf;module.exports=conf;


},{}],4:[function(require,module,exports){
  "use strict";var conf=require("../../conf"),Backbone=require("backbone"),_=require("underscore"),status=require("../p2p/models/status"),EventEmitter=require("eventemitter3"),overrideDefaults=require("../utils/ObjectHelper").overrideDefaults,_gaq=_gaq||[];_gaq.push(["sr_tracker._setAccount","UA-42851557-1"]),_gaq.push(["sr_tracker._setDomainName","none"]),_gaq.push(["_setSessionCookieTimeout",0]);var VideoAnalytics=function(t,e){this.playerInterface=t,this.apiStartTimestamp=(new Date).getTime(),this.mediaStats="function"==typeof t.getMediaStats?t.getMediaStats():void 0,this.mpdURL=e,this.alreadyPlayed=!1,this.lastP2PDownloaded=0,this.lastP2PDownloadedNewAnalytics=0,this.lastP2PUploaded=0,this.lastCDNDownloaded=0,this.lastCDNCancelled=0,this.lastP2PDownloadedUncorrected=0,this.lastDataDlTwice=0,this.lastDataDlTwice_PP=0,this.lastDataDlTwice_PC=0,this.lastDataDlTwice_CP=0,this.lastDataDlTwice_CC=0,this.lastDataDlTwice_HP=0,this.lastDataDlTwice_HD=0,this.lastDataDlTwice_M=0,this.lastMinSwitchCount=0,this.lastLowerSwitchCount=0,this.lastUpperSwitchCount=0,this.lastTrackerMsgCount=0,this.lastTrackerSgnCount=0,this.downloadTrackCounter=0,this.uploadSaturation=0,this.sumRtt=0,this.maxRtt=0,this.nbRtt=0,this.sumDistance=0,this.maxDistance=0,this.nbDistance=0,this.peerConnecting=[],this.sentOnBeforeUnload=!1,this.onTimeUpdateCallbacks=[],setInterval(this.sendDownloadAnalytics.bind(this),conf.ANALYTICS.DOWNLOAD_TRACK_INTERVAL),setTimeout(this.setRttInterval.bind(this),conf.ANALYTICS.DOWNLOAD_TRACK_INTERVAL/2),setInterval(_.bind(this.sendLatencyAnalytics,this),conf.ANALYTICS.LATENCIES_TRACK_INTERVAL),this.sendLatencyAnalytics(),window.RY=function(t){var e=["identify","track","page"],a="realytics",s=function(t,e){return function(){var a=Array.prototype.slice.call(arguments);t[e]||(t[e]=[]),t[e].push(a)}},i=function(i){for(var n=0;n<e.length;n++){var o=e[n];i?t[i][o]=s(t._q[i],o):t[o]=t[a][o]=s(t._q[a],o)}},n=function(e,s){var n=e?e:a;t[n]||(t[n]={}),t._q[n]||(t._q[n]={}),s&&(t._q[n].init=[[s]]),i(e)};return t._q||(t._q={},n(null,null)),t.init=function(t,a){if(a&&e)for(var s=0;s<e.length;s++)if(a==e[s]||"init"==a)return;n(a,t);var i=document.createElement("script");i.type="text/javascript",i.async=!0,i.src=("https:"==document.location.protocol?"https://":"http://")+"dcniko1cv0rz.cloudfront.net/realytics-0.2.min.js";var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(i,o)},t}(window.RY||{}),RY.init(conf.ID_CLIENT,conf.RY_TRACKER),this.realytics_count=0,_gaq.push(["sr_tracker._trackPageview"]),function(){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}(),this.playerInterface.addVideoEventListener("play",this.onPlay.bind(this)),this.playerInterface.addVideoEventListener("pause",this.onPause.bind(this)),this.playerInterface.addVideoEventListener("timeupdate",this.onTimeUpdate.bind(this)),this.registerOnTimeUpdate(this.checkBuffered),this.registerOnTimeUpdate(this.checkEnded),window.addEventListener("beforeunload",this.onBeforeUnload.bind(this)),window.addEventListener("unload",this.onUnload.bind(this)),_.extend(this,Backbone.Events),status.getEE().once("tracker_ready",this.onTrackerReady.bind(this)),this.track("video views"),this.track_realytics("video views")};VideoAnalytics.prototype.track=function(t,e){var a=["sr_tracker._trackEvent"];a.push(this.mpdURL),a.push(t);var s=status.getMyIds();s.length?a.push(s[0]):a.push("0"),e&&a.push(e),_gaq.push(a)},VideoAnalytics.prototype.track_realytics=function(t,e,a){e=e||{},e.customerID="Integros",e.mpdURL=this.mpdURL,a&&(e.conf={p2pMaxCacheSize:conf.P2P_CACHE_MAX_SIZE,maxDlRequestSpeed:conf.MAX_DL_REQUEST_SPEED,maxChunkBySeed:conf.MAX_CHUNK_BY_SEED,nbSegmentP2PPrebuffer:conf.NB_SEGMENT_P2P_PREBUFFER,maxUpSpeed:conf.MAX_UP_SPEED,chunkUpRetryDelay:conf.CHUNK_UP_RETRY_DELAY,chunkTimeout:conf.CHUNK_TIMEOUT,chunkUpTimeout:conf.CHUNK_UP_TIMEOUT}),conf.RY_TRACK&&(t+="1",RY.srTracker.track(t,e)),0,this.realytics_count++,0},VideoAnalytics.prototype.trackTimeElapsed=function(t,e){var a=(new Date).getTime();this.track(t,a-e),this.track_realytics(t,{value:a-e})},VideoAnalytics.prototype.onPlay=function(){this.track("play",Math.round(this.playerInterface.getCurrentTime())),this.track_realytics("play",{value:Math.round(this.playerInterface.getCurrentTime())})},VideoAnalytics.prototype.onPause=function(){this.track("pause",Math.round(this.playerInterface.getCurrentTime())),this.track_realytics("pause",{value:Math.round(this.playerInterface.getCurrentTime())})},VideoAnalytics.prototype.registerOnTimeUpdate=function(t){this.onTimeUpdateCallbacks.push(t)},VideoAnalytics.prototype.unregisterOnTimeUpdate=function(t){this.onTimeUpdateCallbacks=_.reject(this.onTimeUpdateCallbacks,function(e){return e===t},this)},VideoAnalytics.prototype.onTimeUpdate=function(){_.each(this.onTimeUpdateCallbacks,function(t){t.call(this)},this)},VideoAnalytics.prototype.checkEnded=function(){},VideoAnalytics.prototype.checkBuffered=function(){},VideoAnalytics.prototype.sendDownloadAnalytics=function(){var t=status.getP2PDownloaded(),e=status.getp2pDownloadedNewAnalytics(),a=0>t?1:0,s=status.getP2PUploaded(),i=status.getCDNDownloaded(),n=status.getCdnCancelled(),o=status.getP2PDownloadedUncorrected(),r=status.getDataDownloadedTwice_PP(),c=status.getDataDownloadedTwice_PC(),d=status.getDataDownloadedTwice_CP(),l=status.getDataDownloadedTwice_CC(),h=status.getDataDownloadedTwice_HP(),p=status.getDataDownloadedTwice_HD(),u=status.getDataDownloadedTwice_M(),D=r+c+d+l+h+p+u,m=t-this.lastP2PDownloaded,w=e-this.lastP2PDownloadedNewAnalytics,g=s-this.lastP2PUploaded,y=i-this.lastCDNDownloaded,P=n-this.lastCDNCancelled,f=o-this.lastP2PDownloadedUncorrected,C=r-this.lastDataDlTwice_PP,T=c-this.lastDataDlTwice_PC,A=d-this.lastDataDlTwice_CP,_=l-this.lastDataDlTwice_CC,v=h-this.lastDataDlTwice_HP,k=p-this.lastDataDlTwice_HD,S=u-this.lastDataDlTwice_M,R=D-this.lastDataDlTwice,b=status.getNbRightHashP2P(),U=status.getNbWrongHashP2P(),E=status.getNbRightHashDLM(),M=status.getNbWrongHashDLM();status.setNbRightHashP2P(0),status.setNbWrongHashP2P(0),status.setNbRightHashDLM(0),status.setNbWrongHashDLM(0);var N,L=this.trackPeers(),I=this.trackTracker();this.mediaStats&&(N=this.trackABR()),m>0&&(this.track("p2pDownloaded",m),this.lastP2PDownloaded=t),w>0&&(this.track("p2pDownloadedNewAnalytics",w),this.lastP2PDownloadedNewAnalytics=e),g>0&&(this.track("p2pUploaded",g),this.lastP2PUploaded=s),y>0&&(this.track("cdnDownloaded",y),this.lastCDNDownloaded=i),D>0&&(this.track("dataDlTwice",R),this.lastDataDlTwice=D),(m>0||g>0||y>0||R>0)&&(this.track_realytics("download",{p2p:m,nP2p:w,cdn:y,cdnCancelled:P,totalDl:m+y,up:g,p2pUncorrected:f,doubleDl:{PP:C,PC:T,CP:A,CC:_,HP:v,HD:k,M:S,totalDlTwice:R},testP2PNegative:a,peers:L,nbRightHashP2P:b,nbWrongHashP2P:U,nbRightHashDLM:E,nbWrongHashDLM:M,avgRtt:this.nbRtt>0?this.sumRtt/this.nbRtt:0,maxRtt:this.maxRtt,avgDistance:this.nbDistance>0?this.sumDistance/this.nbDistance:0,maxDistance:this.maxDistance,uploadSaturation:this.uploadSaturation,abr:N,tracker:I,downloadTrackCounter:this.downloadTrackCounter},!0),this.lastCDNCancelled=n,this.lastP2PDownloadedUncorrected=o,this.lastDataDlTwice_PP=r,this.lastDataDlTwice_PC=c,this.lastDataDlTwice_CP=d,this.lastDataDlTwice_CC=l,this.lastDataDlTwice_HP=h,this.lastDataDlTwice_HD=p,this.lastDataDlTwice_M=u,this.uploadSaturation=0,this.downloadTrackCounter++)},VideoAnalytics.prototype.trackSpeed=function(){return status.getAvgDlSpeed()&&this.track("avg dl speed",Math.round(status.getAvgDlSpeed())),status.getMaxDlSpeed()&&this.track("max dl speed",Math.round(status.getMaxDlSpeed())),status.getAvgUpSpeed()&&this.track("avg up speed",Math.round(status.getAvgUpSpeed())),status.getMaxUpSpeed()&&this.track("max up speed",Math.round(status.getMaxUpSpeed())),{avgDl:Math.round(status.getAvgDlSpeed()),maxDl:Math.round(status.getMaxDlSpeed()),avgUp:Math.round(status.getAvgUpSpeed()),maxUp:Math.round(status.getMaxUpSpeed())}},VideoAnalytics.prototype.setP2PDownloaderListeners=function(t){this.p2pDownloader=t,t.getEE().on("uploadSaturated",this.incrementUploadSaturation.bind(this))},VideoAnalytics.prototype.incrementUploadSaturation=function(){this.uploadSaturation++},VideoAnalytics.prototype.onBeforeUnload=function(){if(this.p2pDownloader){this.sendDownloadAnalytics();var t=status.getP2PDownloaded(),e=status.getp2pDownloadedNewAnalytics(),a=status.getP2PUploaded(),s=status.getCDNDownloaded(),i=status.getP2PDownloadedUncorrected(),n=status.getDataDownloadedTwice_PP(),o=status.getDataDownloadedTwice_PC(),r=status.getDataDownloadedTwice_CP(),c=status.getDataDownloadedTwice_CC(),d=status.getDataDownloadedTwice_HP(),l=status.getDataDownloadedTwice_HD(),h=status.getDataDownloadedTwice_M(),p=n+o+r+c+d+l+h,u=this.p2pDownloader.doubleCheckP2PDownload_CDNDownload(),D=u.p2pDownloaded+u.cdnDownloaded;this.track("p2pDownloaded_unloadCheck",t),this.track("p2pDownloadedNewAnalytics_unloadCheck",e),this.track("p2pUploaded_unloadCheck",a),this.track("cdnDownloaded_unloadCheck",s),this.track("dataDlTwice_unloadCheck",p),this.track("p2pCache",D);var m=this.trackPeers(),w=this.trackSpeed(),g=this.getRandomPeerLatency(),y=this.trackQoS();this.track_realytics("unload",{p2p:t,nP2p:e,cdn:s,totalDl:t+s,up:a,p2pUncorrected:i,doubleDl:{PP:n,PC:o,CP:r,CC:c,HP:d,HD:l,M:h,totalDlTwice:p},qos:y,p2pCache:D,speeds:w,peers:m,peerConnectionLatency:g},!0),this.sentOnBeforeUnload=!0}},VideoAnalytics.prototype.onUnload=function(){this.sentOnBeforeUnload||this.onBeforeUnload()},VideoAnalytics.prototype.onTrackerReady=function(){this.trackTimeElapsed("time before tracker ready",this.apiStartTimestamp)},VideoAnalytics.prototype.trackPeers=function(){if(this.peerPool){var t=0,e=0,a=0,s=0,i=0;return _.each(this.peerPool.getPeerArray(),function(n){a++,n.getReadyToCommunicate()===!0&&i++;var o=!0;n.getDataDownloaded()&&(t++,o=!1),n.getDataUploaded()&&(e++,o=!1),o&&s++},this),this.track("seeders",t),this.track("leechers",e),this.track("total peers",a),this.track("useless peers",s),this.track("peer ready",i),{seeders:t,leechers:e,totalPeers:a,uselessPeers:s,peerReady:i}}},VideoAnalytics.prototype.setRttInterval=function(){setInterval(this.computeLatencies.bind(this),conf.ANALYTICS.DOWNLOAD_TRACK_INTERVAL)},VideoAnalytics.prototype.computeLatencies=function(){if(this.peerPool){var t;this.sumRtt=0,this.maxRtt=0,this.nbRtt=0,this.sumDistance=0,this.maxDistance=0,this.nbDistance=0,_.each(this.peerPool.getPeerArray(),function(e){e.getRtt(this.onRtt.bind(this)),t=e.getDistance(),t&&(this.sumDistance+=t,this.nbDistance++,t>this.maxDistance&&(this.maxDistance=t))},this)}},VideoAnalytics.prototype.onRtt=function(t){var e=parseInt(t);this.sumRtt+=e,this.nbRtt++,e>this.maxRtt&&(this.maxRtt=e)},VideoAnalytics.prototype.getRtt=function(){return{avgRtt:this.nbRtt>0?this.sumRtt/this.nbRtt:0,maxRtt:this.maxRtt,avgDistance:this.nbDistance>0?this.sumDistance/this.nbDistance:0,maxDistance:this.maxDistance}},VideoAnalytics.prototype.sendLatencyAnalytics=function(){this.avgPeerAnswerTimeElapsed&&(this.track("peer answer latency",Math.round(this.avgPeerAnswerTimeElapsed)),this.avgPeerAnswerTimeElapsed=!1,this.numberOfPeerAnswerInAvg=!1),this.avgPeerReadyCommTimeElapsed&&(this.track("peer ready to comm latency",Math.round(this.avgPeerReadyCommTimeElapsed)),this.avgPeerReadyCommTimeElapsed=!1,this.numberOfPeerReadyCommInAvg=!1)},VideoAnalytics.prototype.setPeerPoolListeners=function(t){this.peerPool=t,t.getEE().on(t,"offerSent",this.onOfferSent.bind(this)),t.getEE().on(t,"answerReceived",this.onAnswerReceived.bind(this)),t.getEE().on("peerReadyCommunicate",this.onPeerReadyCommunicate.bind(this))},VideoAnalytics.prototype.findPeer=function(t){var e=_.where(this.peerConnecting,{peer:t});return e.length?e[0]:!1},VideoAnalytics.prototype.onOfferSent=function(t){var e=(new Date).getTime();this.findPeer(t)||this.peerConnecting.push({peer:t,timestampOffer:e})},VideoAnalytics.prototype.onAnswerReceived=function(t){var e=(new Date).getTime(),a=this.findPeer(t);if(a&&a.timestampOffer){var s=e-a.timestampOffer;0,this.avgPeerAnswerTimeElapsed=this.avgPeerAnswerTimeElapsed?(this.avgPeerAnswerTimeElapsed*this.numberOfPeerAnswerInAvg+s)/(this.numberOfPeerAnswerInAvg+1):s,this.numberOfPeerAnswerInAvg=this.numberOfPeerAnswerInAvg?this.numberOfPeerAnswerInAvg+1:1,a.timestampAnswer=e}},VideoAnalytics.prototype.onPeerReadyCommunicate=function(t){var e=(new Date).getTime(),a=this.findPeer(t);if(a){var s=e-a.timestampOffer;0,this.avgPeerReadyCommTimeElapsed=this.avgPeerReadyCommTimeElapsed?(this.avgPeerReadyCommTimeElapsed*this.numberOfPeerReadyCommInAvg+s)/(this.numberOfPeerReadyCommInAvg+1):s,this.numberOfPeerReadyCommInAvg=this.numberOfPeerReadyCommInAvg?this.numberOfPeerReadyCommInAvg+1:1,a.timeStampReady=e}},VideoAnalytics.prototype.getRandomPeerLatency=function(t){var e=_.filter(this.peerConnecting,function(t){return t.timestampAnswer&&t.timeStampReady});if(e.length){var a=e[Math.floor(Math.random()*e.length)];return{answer:a.timestampAnswer-a.timestampOffer,ready:a.timeStampReady-a.timestampOffer,distance:a.peer.getDistance()}}return void 0},VideoAnalytics.prototype.trackABR=function(){var t,e={minSwitchCount:0,lowerSwitchCount:0,upperSwitchCount:0};this.mediaStats&&(t=this.mediaStats.getStats(),e=overrideDefaults(e,t));var a=e.minSwitchCount-this.lastMinSwitchCount,s=e.lowerSwitchCount-this.lastLowerSwitchCount,i=e.upperSwitchCount-this.lastUpperSwitchCount;return this.lastMinSwitchCount=e.minSwitchCount,this.lastLowerSwitchCount=e.lowerSwitchCount,this.lastUpperSwitchCount=e.upperSwitchCount,{minSwitchCount:a,lowerSwitchCount:s,upperSwitchCount:i}},VideoAnalytics.prototype.trackQoS=function(){var t,e={startupTime:0,startupTimeLoad:0,rebufferingCount:0,timeSpentRebuffering:0,timeSpentPlaying:0,timeSpentSeeking:0,percentageTimeSpentPlaying:0,avgBitrate:0,bitrateSwitchCount:0,minSwitchCount:0,lowerSwitchCount:0,upperSwitchCount:0};return this.mediaStats&&(t=this.mediaStats.getStats(),e=overrideDefaults(e,t)),e},VideoAnalytics.prototype.trackTracker=function(){var t=status.getTrackerMsgCount(),e=status.getTrackerSgnCount(),a=t-this.lastTrackerMsgCount,s=e-this.lastTrackerSgnCount;return this.lastTrackerMsgCount=t,this.lastTrackerSgnCount=e,{trackerMsgCount:a,trackerSgnCount:s}},VideoAnalytics.prototype.isFake=function(){return this.fake},module.exports=VideoAnalytics;


},{"../../conf":2,"../p2p/models/status":57,"../utils/ObjectHelper":61,"backbone":62,"eventemitter3":110,"underscore":265}],5:[function(require,module,exports){
  "use strict";var utils=require("../utils"),conf=require("../../confMedia"),CDNDownloader=function(e,t){this.id=e,this.downloadManager=t,this.intermediateProgress=0,this.updateInterval=300,this.averageDownloadSpeed=!1,this.instantDownloadSpeed=!1,this.downloading=!1};CDNDownloader.prototype.onLoaded=function(e){this.downloading=!1,e.target.status>=200&&e.target.status<299?e.target.cb({response:e.target.response,pptes:e.target.pptes,startTimeStamp:this.beginningTime,endTimeStamp:e.timeStamp}):this.onLoadError(e)},CDNDownloader.prototype.onLoadError=function(e){this.downloading=!1,this.downloadManager.cancelCDNDownloadById(this.id),conf.REPPORT_ERROR&&0===e.srcElement.status&&window.onPlayerError&&window.onPlayerError("download error")},CDNDownloader.prototype.onLoadStart=function(e){this.beginningTime=this.intermediateTime=e.timeStamp},CDNDownloader.prototype.onProgress=function(e){var t=e.timeStamp;this.averageDownloadSpeed=e.position/1024/((t-this.beginningTime)/1e3),t-this.intermediateTime>this.updateInterval&&(this.instantDownloadSpeed=(e.position-this.intermediateProgress)/1024/((t-this.intermediateTime)/1e3),this.intermediateTime=t,this.intermediateProgress=e.position)},CDNDownloader.prototype.getUrl=function(e,t){this.url_infos=e;var o=new XMLHttpRequest;o.addEventListener("load",this.onLoaded.bind(this)),o.addEventListener("loadstart",this.onLoadStart.bind(this)),o.addEventListener("error",this.onLoadError.bind(this)),o.addEventListener("progress",this.onProgress.bind(this)),o.open("GET",e.url),e.responseType&&(o.responseType=e.responseType),e.range&&o.setRequestHeader("Range",utils.make_range(e.range.start,e.range.end)),e.pptes&&(o.pptes=e.pptes),o.cb=t,o.send(),this.downloading=!0,this.xhr=o},CDNDownloader.prototype.abort=function(){this.downloading&&(this.downloading=!1,this.xhr.abort())},module.exports=CDNDownloader;


},{"../../confMedia":3,"../utils":60}],6:[function(require,module,exports){
  "use strict";var CDNDownloader=require("./CDNDownloader"),conf=require("../../confMedia"),PlayerInterface=require("../media/PlayerInterface"),SRModule=require("../p2p/SRModule"),DownloadManager=function(e,n){var r,t,a=this,i=1,o=[],s=n,l=function(n,t){var a,i=null;if(o.length<conf.MAX_CDN_DL){if(a=e.manifestManager.getPieceInfos(n),a.downloading)return;if(r){if(0,i=r.getP2PData(n),i.isLocked())return;if(i.isComplete()){var s={pptes:{piece:n},cdnByteLength:0};return void i.getFullSegment(s,t)}if(conf.RANGE_REQUEST_ALLOWED){if(a.range=i.getUpdatedRange(a.range),a.range&&a.range.end&&a.range.end<a.range.start)return void 0}else a.range&&0;d(n,a,i,t)}}},d=function(n,r,t,s){var l=i,d=new CDNDownloader(l,a);r.responseType="arraybuffer",r.pptes={piece:n,partialSegment:t},i++,o.push(d),d.getUrl(r,c.bind(void 0,l,p.bind(void 0,s))),e.manifestManager.markAsDownloading(n,l)},f=function(n){return function(r,t){e.manifestManager.markAsDownloading(t),e.manifestManager.setSegmentSize(t.id_period,t.id_aset,t.id_rep,t.idPiece,r.response.byteLength),n(r)}},g=function(n){return function(r,t){0,e.manifestManager.markAsDownloading(t),a.getPart(t,!1,n)}},c=function(e,n,r){var t,a;for(a=0;a<o.length;a++)o[a].id==e&&(t=o.splice(a,1)[0]);n(r)},p=function(n,r){r.response?(r.cdnByteLength=r.response.byteLength,r.pptes.partialSegment.getFullSegment(r,f(n),g(n))):e.manifestManager.markAsDownloading(r.pptes.piece)},u=function(n){0;var r=o.splice(n,1)[0];e.manifestManager.markAsDownloading(r.url_infos.pptes.piece),t.emit("cdnCancelled",r.intermediateProgress),r.abort()},m=function(e){var n;for(n=0;n<o.length;n++)e===o[n].id&&u(n)},w=function(e){var n;for(n=o.length-1;n>=0;n--)o[n].url_infos.pptes&&o[n].url_infos.pptes.piece.id_aset===e&&u(n)},h=function(){var e;for(e=o.length-1;e>=0;e--)o[e].url_infos.pptes&&u(e)},D=function(n){var r,t;for(r=0;r<o.length;r++)o[r].url_infos.pptes&&(t=o[r].url_infos.pptes.piece,e.manifestManager.isLiveTimeExpired(t.id_period,t.id_aset,t.id_rep,t.segment.time)&&(u(r),0));a.triggerInterfaceUpdateMap(n)},M=function(){e.addVideoEventListener("seeking",function(){e.manifestManager.isLive()||(h(),0)}),t=new PlayerInterface(e),r=new SRModule(t,e.manifestManager.getMpdUrl(),s,conf)};this.triggerInterfaceUpdateMap=function(e,n){t?t.emit("onMapUpdate",e,n):0},this.triggerInterfaceTrackChange=function(e,n){if(t){var r=n.map(function(e){return{type:e.type,asetId:e.asetId,repId:e.representationId,bufferLevelMax:e.bufferLevelMax}});t.emit("onTrackChange",e,r)}else 0},this.getSRModule=function(){return r},this.getPart=l,this.cancelCDNDownloadById=function(e){m(e)},this.killSegmentDownloadForTrack=w,this.killAllSegmentDownload=h,this.mapUpdated=D,M()};module.exports=DownloadManager;


},{"../../confMedia":3,"../media/PlayerInterface":18,"../p2p/SRModule":41,"./CDNDownloader":5}],7:[function(require,module,exports){
  "use strict";var conf=require("../../confMedia"),EventEmitter=require("eventemitter3"),debug,ABRController=function(e,t,n){var r,i,u,a,f,o,s=n,p=e,d=!1,c=.16,h=.75,m=.45,g=.55,l=.25,v=.75,S=.55,T=.6,I=13,L=1.1,b=2,B=1.5,C=1.1,_=1.3,M=10,w=(e.mediaStats,conf.ABR_DEL_T),R=!0,y=!1,E=12e3,A=[],D=[],x=0,H=0,O=0,q=0,N=0,k=0,W=new EventEmitter,G=function(e){var t,n,r,i=p.manifestManager.map.periods[e];for(A=[],t=0;t<i.asets.length;t++)if(r=i.asets[t],r.type===s)for(n=0;n<r.reps.length;n++)(!conf.HACK_ABR_HLS_AUDIO_ONLY||"video"!==r.type||r.reps[n].bandwidth>1e5)&&A.push({periodId:e,asetId:t,repId:n,bitrate:r.reps[n].bandwidth});A.sort(function(e,t){return e.bitrate-t.bitrate}),pe()},K=function(e,t){return A[0].asetId===e&&A[0].repId===t},U=function(e,t){var n=A.length-1;return A[n].asetId===e&&A[n].repId===t},V=function(){return A[0]},Y=function(e,t){var n;for(n=0;n<A.length;n++)if(A[n].asetId===e&&A[n].repId===t)return n>0?A[n-1]:A[n]},j=function(e,t){var n;for(n=0;n<A.length;n++)if(A[n].asetId===e&&A[n].repId===t)return n<A.length-1?A[n+1]:A[n]},z=function(e,t){var n;for(n=0;n<A.length;n++)if(A[n].asetId===e&&A[n].repId===t)return A[n].bitrate},F=function(e,t){return j(e,t).bitrate},J=function(e,t){var n=(new Date).getTime(),r={byteLength:e.cdnByteLength,startTimeStamp:e.startTimeStamp,endTimeStamp:e.endTimeStamp,bufferLeft:t,timeStamp:n};D.push(r)},P=function(){var e,t=(new Date).getTime();for(e=D.length-1;e>=0;e--)(t-D[e].timeStamp)/1e3>w&&D.splice(e,1)},Q=function(e){var t,n,r,i=0,u=0;for(P(),t=0;t<D.length;t++)i+=D[t].byteLength,n=Math.max(D[t].endTimeStamp-D[t].startTimeStamp-M,(D[t].endTimeStamp-D[t].startTimeStamp)/2),u+=n/1e3;return r=u>0?i/u:0,x=8*(r+e)},X=function(){var e=D.length;if(3>e)return!0;for(var t=2;t<D.length;t++)if(D[t].bufferLeft<D[t-2].bufferLeft)return!1;return!0},Z=function(){var e=D.length;if(3>e)return!1;for(var t=2;t<D.length;t++)if(D[t].bufferLeft>D[t-2].bufferLeft)return!1;return!0},$=function(e){return r>e},ee=function(e){return i>e},te=function(e){return u>e},ne=function(e){return a>e},re=function(){return H++,V()},ie=function(e,t){return O++,Y(e,t)},ue=function(e,t){return q++,j(e,t)},ae=function(){return y?void 0:re()},fe=function(){I>f?(r=l*f,i=v*f,u=S*f,a=T*f):(r=Math.min(c*f,4),i=h*f,u=m*f,a=g*f)},oe=function(e){var t=z(e.pptes.piece.id_aset,e.pptes.piece.id_rep),n=e.pptes.piece.segment.duration;n>0?(N=(N*k+t/1e6*n)/(k+n),k+=n):0},se=function(e,t,n){d=!0,W.emit("onDecision",s),f=n,t>e.pptes.piece.segment.duration?t-=e.pptes.piece.segment.duration:t=0,oe(e),fe();var r,i,u=e.pptes.piece.id_aset,a=e.pptes.piece.id_rep,p=e.p2pMeanThroughput?e.p2pMeanThroughput:0;if(o||(o={asetId:u,repId:a,bitrate:z(u,a)}),"undefined"!=typeof e.endTimeStamp&&"undefined"!=typeof e.startTimeStamp){var c=Math.max(e.endTimeStamp-e.startTimeStamp-M,(e.endTimeStamp-e.startTimeStamp)/2);r=8*e.cdnByteLength/(c/1e3),J(e,t)}if(i=Q(p),R=X()&&i>=L*z(u,a)){if($(t)){if(i>=b*F(u,a)&&!U(u,a))return o=ue(u,a)}else if(te(t)){if(i>=B*F(u,a)&&!U(u,a))return o=ue(u,a)}else if(i>=C*F(u,a)&&!U(u,a))return o=ue(u,a)}else{if(R=!1,!y&&$(t)&&!K(u,a))return R=!0,o=re();if(ee(t)&&Z())return o=ie(u,a);if(!y&&te(t)){if(r&&z(u,a)>=r&&!K(u,a))return o=ie(u,a)}else if(ne(t));else if(!(U(u,a)||i<=_*F(u,a)))return o=ue(u,a)}return{asetId:u,repId:a}},pe=function(){y=!0,setTimeout(function(){y=!1},E)},de=function(){return{avgBitrate:N,bitrateSwitchCount:H+O+q,minSwitchCount:H,lowerSwitchCount:O,upperSwitchCount:q}},ce=function(){return t.getBufferLeft()},he=function(){return f},me=function(){var e=[{id:"B_MIN",value:r},{id:"B_LOWER",value:i},{id:"B_LOW",value:u},{id:"B_HIGH",value:a}];return e},ge=function(){return o},le=function(){return s},ve=function(){return x},Se=function(){if(o){o.asetId,o.repId;return[{id:"C1",value:L},{id:"C2",value:b},{id:"C3",value:B},{id:"C4",value:C},{id:"C5",value:_}]}},Te=function(){return A},Ie=function(){return d},Le=function(){return R},be=function(){d=!1},Be=function(e,t){W.addListener(e,t)},Ce=function(){p.addVideoEventListener("seeking",pe)};this.getMinRepresentation=V,this.requestMinRepresentationSwitch=ae,this.getNextRepresentation=se,this.setup=G,this.getABRStats=de,this.getBufferLength=ce,this.getBufferMax=he,this.getBufferLengthLevel=me,this.getCurrentTrackInfo=ge,this.getType=le,this.getTroughput=ve,this.getTroughputLevel=Se,this.getSortedRepresentations=Te,this.isEnabled=Ie,this.isAggressiveMode=Le,this.isBufferDecreasing=Z,this.disable=be,this.addEventListener=Be,Ce()};module.exports=ABRController;


},{"../../confMedia":3,"eventemitter3":110}],8:[function(require,module,exports){
  "use strict";var ABRInterface=function(e){var t=function(){for(var t=[],r=0;r<e.length;r++){var n=e[r],f=!1;n.getBufferLengthLevel()&&(f=!0),t.push({enabled:n.isEnabled(),aggressiveMode:n.isAggressiveMode(),isBufferDecreasing:n.isBufferDecreasing(),bufferLength:n.getBufferLength(),bufferMax:n.getBufferMax(),bufferLengthLevel:n.getBufferLengthLevel(),sortedRepresentation:n.getSortedRepresentations(),currentTrackInfo:n.getCurrentTrackInfo(),type:n.getType(),throughput:n.getTroughput(),throughputLevel:n.getTroughputLevel()})}return t},r=function(t,r,n){for(var f=0;f<e.length;f++){if(n&&e[f].getType()===n){e[f].addEventListener(t,r);break}n||e[f].addEventListener(t,r)}},n=function(){window.SR_MEDIA_INTERFACE||(window.SR_MEDIA_INTERFACE={}),window.SR_MEDIA_INTERFACE.abr={},window.SR_MEDIA_INTERFACE.abr.getABRStat=t,window.SR_MEDIA_INTERFACE.abr.addEventListener=r};n()};module.exports=ABRInterface;


},{}],9:[function(require,module,exports){
  "use strict";var AESController=function(){var n=window.crypto||window.msCrypto,t=n.subtle||n.webkitSubtle,r=function(n,t){n.then?n.then(t.bind(null,null),t):(n.oncomplete=function(n){t(null,n.target.result)},n.onerror=t)},e=function(n,e){var o=t.importKey("raw",n,{name:"AES-CBC",length:128},!1,["encrypt","decrypt"]);r(o,e)},o=function(n,e,o,i){var u=t.decrypt({name:"AES-CBC",iv:o},e,n);r(u,i)},i=function(n,t,r){return function(e,i){return e?void r(e):void o(n,i,t,function(n,t){if(n)return void r(n);var e=new Uint8Array(t);r(null,e)})}},u=function(n,t,r,o){e(t,i(n,r,o))};this.decrypt=u};module.exports=AESController;


},{}],10:[function(require,module,exports){
  "use strict";var conf=require("../../confMedia"),BufferController=require("./BufferController"),DiscontinuityController=require("./DiscontinuityController.js"),MediaSourceFactory=require("./wrapper/MediaSourceFactory"),ABRInterface=require("./ABRInterface"),mapAdd=require("../utils/ObjectHelper").mapAdd,Buffer=function(e){this.MODES={STREAMING:0,PREBUFFERING_MAX:1,STOP_BUFFERING:2,BUFFER_LOCAL_PIECE:3};var t,r,n,i=this,o=[],f=function(){r=new MediaSourceFactory(e),e.addVideoEventListener("loadstart",d),e.addVideoEventListener("playing",g),e.addVideoEventListener("play",l)},u=function(e,t){var r;for(r=0;r<o.length;r++)if(o[r].asetId()===e&&o[r].repId()===t)return o[r];return!1},a=function(f,u,s,d){var c,l;if("closed"===r.readyState)return void setTimeout(function(){a(f,u,s,d)},100);e.manifestManager.isLive()||(r.duration=e.manifestManager.getDuration(e.currentPeriod)),t=new DiscontinuityController(e);var g=[];for(c=0;c<u.length;c++)l=new BufferController(e,i,r,u[c].asetId,u[c].representationId,u[c].type,s,d),l.initBuffer(f),o.push(l),g.push(l.getABRController());n=new ABRInterface(g)},s=function(e){var t;for(t=0;t<o.length;t++)o[t].setBufferingMode(e)},d=function(){s(i.MODES.STREAMING)},c=function(){s(i.MODES.STOP_BUFFERING);for(var e=0;e<o.length;e++)o[e].onEnded()},l=function(){s(i.MODES.STREAMING)},g=function(){s(i.MODES.STREAMING)},h=function(e){for(var t=0;t<o.length;t++)if(o[t].getTrackType()===e)return o[t];0},B=function(e,t){var r=h(t);r.setBufferMarginLive(e)},p=function(){var e,t=!!o.length;for(e=0;e<o.length;e++)t=t&&o[e].isInitialized();return t},S=function(){var e,t=!!o.length;for(e=0;e<o.length;e++)t=t&&o[e].isReady();return t},E=function(){S()&&e.conditionalPlay()},M=function(){var e,t=[];for(e=0;e<o.length;e++)t.push({id_aset:o[e].asetId(),id_rep:o[e].repId()});return t},v=function(){var e,t=[];for(e=0;e<o.length;e++)t.push({buffered:o[e].getBufferedTimeRanges(),bufferedStrict:o[e].getBufferedStrict(),id_aset:o[e].asetId(),id_rep:o[e].repId()});return t},R=function(){for(var e=0;e<o.length;e++)o[e].setBufferingMode(this.MODES.STREAMING)},I=function(){var e,t=[];if(!o.length)return[];for(e=0;e<o.length;e++)t.push(o[e].getBufferedRangeEnd());return o[t.indexOf(Math.min.apply(null,t))].getBufferedTimeRanges()},y=function(e){var t,r,n=1/0;for(r=0;r<o.length;r++)t=o[r].getBufferedRangeEnd(e),n>t&&(n=t);return n},T=function(e,t,r,n,i){var o=u(e,t);o?o.switchedTrack(r,n,i):0},A=function(e){t.applySeekRequest(e)},m=function(e,r){t.requestSeek(e,r)},k=function(){return t.getSeekTarget()},C=function(){S()&&e.onEmergency()},F=function(){for(var e,t,r=0;r<o.length;r++)t=o[r].getABRStats(),e=e?mapAdd(e,t):t;return e};this.initBuffer=a,this.setBufferMarginLive=B,this.isInitialized=p,this.isReady=S,this.bufferControllerReady=E,this.setBufferingMode=s,this.getTracks=M,this.getBufferedTracks=v,this.getBuffered=I,this.getMinBufferedTracks=y,this.switchedTrack=T,this.applySeekRequest=A,this.requestSeek=m,this.getSeekTarget=k,this.onEmergency=C,this.setStreamingMode=R,this.onEnded=c,this.getABRStats=F,f()};module.exports=Buffer;


},{"../../confMedia":3,"../utils/ObjectHelper":61,"./ABRInterface":8,"./BufferController":11,"./DiscontinuityController.js":13,"./wrapper/MediaSourceFactory":28}],11:[function(require,module,exports){
  "use strict";var conf=require("../../confMedia"),SourceBufferWrapper=require("./SourceBufferWrapper"),SegmentUpdater=require("./SegmentUpdater"),ABRController=require("./ABRController"),EventEmitter=require("eventemitter3"),debug,BufferController=function(e,t,n,r,i,a,o,s){var f,g,u=this,d=(new EventEmitter,!1),c=!1,m=r,p=i,E=a,S=!1,l=!1,T=e.manifestManager.isLive(),M=conf.BUFFER.EMERGENCY_MARGIN,R=T?conf.LIVE.DISTANCE_FROM_LIVE_EDGE:conf.BUFFER.BUFFER_MARGIN,_=t,F=e.isAutoplay()||!e.isPaused()?_.MODES.STREAMING:_.MODES.STOP_BUFFERING,h=new SourceBufferWrapper(n),P=new ABRController(e,this,E),B=!1,k=!1,v=!1,I=function(){return h.getBufferedTimeRanges()},L=function(){return h.getBufferedStrict()},A=function(t,n){var r,i,a;for(void 0===n&&(n=e.getCurrentTime()),a=0;a<t.length;a++)if(r=t.start(a),i=t.end(a),n>=r&&i>=n)return i;return n},w=function(e){return A(I(),e)},C=function(e){return A(L(),e)},O=function(t){var n;n=e.manifestManager.getInitSegment(t,m,p),h.createSourceBuffer(n),S=!0},b=function(t){var n,r,i,a,o;t&&t.response?(c=!0,e.manifestManager.getStreamType()===conf.STREAM_TYPES.SMOOTH?(n=new SegmentUpdater(t.response,t.pptes.piece),r=n.updateSegment()):e.manifestManager.getStreamType()===conf.STREAM_TYPES.DASH?r=new Uint8Array(t.response):e.manifestManager.getStreamType()===conf.STREAM_TYPES.HLS&&(r=new Uint8Array(t.response),r.key=t.pptes.piece.segment.key),i={start:t.pptes.piece.segment.time,end:t.pptes.piece.segment.time+t.pptes.piece.segment.duration},h.append(r,i,g),d=!1,T&&e.manifestManager.markAsDownloaded(t.pptes.piece),v&&v.idPiece<=t.pptes.piece.idPiece&&(0,_.applySeekRequest(v),v=!1,k=!0),e.currentTracks[E].autoswitch?(a=y(),o=P.getNextRepresentation(t,a,R),e.switchRepresentation(t.pptes.piece.id_aset,o.asetId,t.pptes.piece.id_rep,o.repId,!1)):P.disable()):0},y=function(){return w()-e.getCurrentTime()},U=function(){d=!0},D=function(t){if(!T)return!1;var n=e.manifestManager.getPlaybackTargetSegment(e.currentPeriod,m,p),r=t-n.segment.time<-conf.LIVE.ALLOW_LIVE_DELAY;return r},N=function(){var t=_.getSeekTarget();t&&e.manifestManager.isLiveTimeExpired(e.currentPeriod,m,p,t)&&(0,k=!1,v=!1)},V=function(){var r,i,a,o,s,f,u=T&&_.getSeekTarget()&&_.getSeekTarget()>e.getCurrentTime()?_.getSeekTarget():e.getCurrentTime(),d=!1;if(n.duration>0&&u+.5>=n.duration&&!T&&!e.ended&&setTimeout(function(){0,e.onEnded()},500),S&&F!==_.MODES.STOP_BUFFERING){if(i=w(u),o=_.getMinBufferedTracks(u),s=i-u,a=C(u),f=a-u,M>=f&&(d=!0),M>=s){if(e.currentTracks[E].autoswitch){var c=P.requestMinRepresentationSwitch();c&&e.switchRepresentation(m,c.asetId,p,c.repId,!1)}N(),T&&D(u)&&void 0===_.getSeekTarget()&&(0,r=e.manifestManager.getPlaybackTargetSegment(e.currentPeriod,m,p),B=!0,k=!1,v=!1)}if(i-o<conf.BUFFER.MAX_TRACKS_OFFSET){if(!r&&(R>s||F===_.MODES.PREBUFFERING_MAX)){var h=0;0>=s?(T||(i=u),0!==u&&(h=.001)):h=.2,r=e.manifestManager.getPartForTime(e.currentPeriod,i+h,m,p)}!r&&e.manifestManager.isLiveTimeExpired(e.currentPeriod,m,p,i)&&(0,B=!0,k=!1),!B&&r||k||v?r&&(k=!0,g=r.idPiece,e.downloadManager.getPart(r,b)):(r||(r=e.manifestManager.getBeginningSegment(e.currentPeriod,m,p)),H(r),g=r.idPiece,e.downloadManager.getPart(r,b)),d||l?d&&l&&(T||n.duration-u>M+1)&&(0,t.onEmergency(),l=!1):(l=!0,_.bufferControllerReady())}else 0}},G=function(){var t,n,r,i,a=I(),o=e.getCurrentTime();for(i=0;i<a.length;i++)o<a.start(i)||a.end(i)<o?(t=a.start(i),n=a.end(i),h.remove({start:t,end:n})):(t=a.start(i)-.2>=0?a.start(i)-.2:0,r=e.manifestManager.getPartForTime(e.currentPeriod,o-conf.REMOVE_OLD_SEGMENTS_DELAY,m,p),n=r?r.segment.time:o-conf.REMOVE_OLD_SEGMENTS_DELAY,n>t&&h.remove({start:t,end:n}))},q=function(){var t,n,r,i=e.getCurrentTime(),a=h.getPlaybackInterval(i);if(a&&(n=e.manifestManager.getPartForTime(e.currentPeriod,a.end-.2,m,p)))for(t=n.idPiece,r={id_period:e.currentPeriod,id_aset:m,id_rep:p,idPiece:t};;){if(r=e.manifestManager.getNextSegment(r),!r)break;var o=e.downloadManager.getSRModule().getP2PData(r);if(o.isComplete()&&!o.isLocked()){g=r.idPiece,o.getFullSegment({},b);break}}},x=function(t,n,r){var i,a,o,s=e.getCurrentTime(),f=e.manifestManager.getPartForTime(e.currentPeriod,s,m,p),g=f?f.segment.time:!1,u=!1;if(r)if(conf.BUFFER.FORCE_SWITCH_CLEAR_ALL)u=!0,e.video.event_handlers.onBuffering();else if(i=e.manifestManager.getPartForTime(e.currentPeriod,s+conf.BUFFER.SOFT_TRACK_SWITCH_MIN_BUFFER,m,p))a=i.segment.time+i.segment.duration;else{var d=e.manifestManager.getBeginningSegment(e.currentPeriod,m,p);if(!(s+conf.BUFFER.SOFT_TRACK_SWITCH_MIN_BUFFER<d.segment.time))return void 0;a=d.segment.time+d.segment.duration}else q();o=e.manifestManager.getInitSegment(e.currentPeriod,t,n),h.switchedTrack(o,g,a,u),m=t,p=n},H=function(t){_.requestSeek(t,E),e.video.isFlash&&h.requestedSeek(),0,v=t},W=function(){return E},Y=function(){return P},K=function(){k=!1},X=function(){P.setup(e.currentPeriod),e.addVideoEventListener("seeking",u.onseeking.bind(u)),e.addVideoEventListener("seeked",u.onseeked.bind(u)),setInterval(V,100),setInterval(G,1e4),e.ee.on("trackSwitch",U)};this.getABRController=Y,this.getTrackType=W,this.getBufferLeft=y,this.asetId=function(){return m},this.repId=function(){return p},this.initBuffer=O,this.setBufferMarginLive=function(e){e<=conf.LIVE.DISTANCE_FROM_LIVE_EDGE-conf.LIVE.MIN_BUFFER_LEVEL?R=conf.LIVE.MIN_BUFFER_LEVEL+e:0},this.isInitialized=function(){return S},this.isReady=function(){return l},this.setBufferingMode=function(e){f=F,F=e},this.getBufferedTimeRanges=I,this.getBufferedStrict=L,this.getBufferedRangeEnd=w,this.switchedTrack=x,this.onseeking=function(){0,e.video.isFlash&&u.setBufferingMode(_.MODES.STOP_BUFFERING),h.onSeeking()},this.onseeked=function(){0,u.setBufferingMode(_.MODES.STREAMING),h.onSeeked(),G(),c=!1},this.onEnded=K,this.getABRStats=P.getABRStats,X()};module.exports=BufferController;


},{"../../confMedia":3,"./ABRController":7,"./SegmentUpdater":20,"./SourceBufferWrapper":21,"eventemitter3":110}],12:[function(require,module,exports){
  "use strict";function isInteger(e){return"number"==typeof e&&e%1===0}var CustomTimeRange=function(e){var n=e;this.length=n.length,this.start=function(e){if(isInteger(e)&&e>=0&&e<n.length)return n[e].start;throw isInteger(e)?new Error("CustomTimeRange index out of range"):new Error("Incorrect index type")},this.end=function(e){if(isInteger(e)&&e>=0&&e<n.length)return n[e].end;throw isInteger(e)?new Error("CustomTimeRange index out of range"):new Error("Incorrect index type")}};module.exports=CustomTimeRange;


},{}],13:[function(require,module,exports){
  "use strict";var SeekRequest=require("./SeekRequest.js"),debug,DiscontinuityController=function(e){var t,n=[],i=function(){return t},r=function(i,r){for(var a=0;a<n.length;a++)n[a].getTrackType()===r&&n.splice(a,1);t=void 0!==t?Math.max(t,i.segment.time):i.segment.time,n.push(new SeekRequest(i,r)),e.manifestManager.isLive()?e.downloadManager.killAllSegmentDownload():e.downloadManager.killSegmentDownloadForTrack(i.id_aset)},a=function(i){var r,a=!0;if(n.length){if(i)for(r=0;r<n.length;r++)n[r].getPiece()===i&&n[r].setReady();for(r=0;r<n.length;r++)a=a&&n[r].isReady();if(a||e.manifestManager.isLive())return e.setCurrentTime(t),t=void 0,n=[],!0}};this.applySeekRequest=a,this.requestSeek=r,this.getSeekTarget=i};module.exports=DiscontinuityController;


},{"./SeekRequest.js":19}],14:[function(require,module,exports){
  "use strict";var conf=require("../../confMedia"),MapHelper=require("./MapHelper"),_=require("underscore"),ISOBMFF=require("../../../vendor/js/isobmffManager"),utils=require("../utils"),MapGenerator=require("streamroot-map-generator"),ManifestManager=function(e,t){var r,i,n,s,o,a=this,d=conf.ADD_QUERY_PARAM?utils.updateQueryStringParameter(t,"streamroot",1):t,p=d,u={periods:[]},f=new MapHelper,c=!1,l=new MapGenerator({PLAYLIST_HLS_KEEP_LAST_LINES:conf.PLAYLIST_HLS_KEEP_LAST_LINES,SS_IMPLICIT_AAC_HE:conf.SS_IMPLICIT_AAC_HE}),g=function(){var e=u.isLive;return"undefined"==typeof e&&0,e},m=function(e,t,r){var i=!1;return utils.isPosInt(e)&&e<u.periods.length&&utils.isPosInt(t)&&t<u.periods[e].asets.length&&utils.isPosInt(r)&&r<u.periods[e].asets[t].reps.length&&(i=!0),i},h=function(e){var t,r=u.periods[e.id_period].asets[e.id_aset].reps[e.id_rep].segments;for(t=0;t<r.length;t++)if(r[t].id===e.idPiece)return r[t]},S=function(e,t,r){var i=u.periods[e].asets[t].reps[r].segments,n=i[i.length-1];return n.time+n.duration},E=function(e,t,r){var i=S(e,t,r);return Math.max(i-conf.LIVE.DISTANCE_FROM_LIVE_EDGE,u.periods[e].asets[t].reps[r].segments[0].time)},M=function(e,t,r){for(var i,n=u.periods[e].asets[t].reps[r].segments,s=T(e,t,r),o=E(e,t,r),a=n.length-1;i=n[a];a--)if(i.time<=o||s>=a)return a;return 0},v=function(e,t,r){if(!m(e,t,r))return void 0;var i=M(e,t,r),n=u.periods[e].asets[t].reps[r].segments[i];return{id_period:e,id_rep:r,id_aset:t,idPiece:n.id,segment:n}},T=function(e,t,r){var i=0,n=u.periods[e].asets[t].reps[r].segments;return g()&&(n.length>=5?i=2:4===n.length?i=1:3===n.length&&n[2].duration>=9&&(i=1)),i},P=function(e,t,r){if(!m(e,t,r))return void 0;var i=T(e,t,r),n=u.periods[e].asets[t].reps[r].segments[i];return{id_period:e,id_rep:r,id_aset:t,idPiece:n.id,segment:n}},A=function(e,t,r,i){if(!g())return!1;var n=u.periods[e].asets[t].reps[r].segments[0];return i<n.time},I=function(e){"dash"===e?(s=conf.STREAM_TYPES.DASH,a.stream_type=s):"smooth"===e?(s=conf.STREAM_TYPES.SMOOTH,a.stream_type=s):"hls"===e?(s=conf.STREAM_TYPES.HLS,a.stream_type=s):0},L=function(e){e?l.getMap(p,i,y):l.getMap(d,null,w)},w=function(e,t){if(e)return void o(e);var r,s,f=t.map.profile;i=t.map,u=R(i),a.map=u,u.location&&a.stream_type!=conf.STREAM_TYPES.HLS&&(r=utils.parseUrl(u.location),s=utils.parseUrl(d),p=s.protocol+"//"+r.host+r.pathname+r.search+r.hash,conf.ADD_QUERY_PARAM&&(p=utils.updateQueryStringParameter(p,"streamroot",1))),void 0!==f&&(n=f),I(t.type),g()&&H(),c=!0,o()},y=function(t,r){i=r.map,u=R(i),a.map=u,e.downloadManager.mapUpdated(u),0,0,H()},R=function(e){return f.trimMapByBitrate(e,conf.REPRESENTATION_NUMBER)},H=function(){var t=u.periods[e.currentPeriod].asets[0].reps[0].segments,i=t[t.length-1].duration||conf.MPD_UPDATE_INTERVAL,n=Math.max(1e3*i-conf.RTT_RELOAD_OFFSET,conf.MIN_UPDATE_INTERVAL);clearInterval(r),r=setInterval(function(){a.loadManifest(!0)},n)},D=function(e,t,r,i,n,s){for(var o,a=u.periods[e].asets[t].reps[r].segments,d=n,p=a.length,f=0;p>f;f++)if(a[f].id==i){if(o=a[f].time-d,Math.abs(o)>conf.PTS_TOLERANCE)if(g())for(var c=f;p>c;c++)a[c].time-=o;else for(var l=0;p>l;l++)a[l].time-=o;break}},N=function(t,r,i,n,s,o){for(var a,d=0;a=u.periods[t].asets[d];d++)for(var p,f=0;p=a.reps[f];f++)d===r&&f===i?(D(t,r,i,n,s,o),p.ptsVerified=!0):p.ptsVerified||D(t,d,f,n,s,o);e.downloadManager.triggerInterfaceUpdateMap(u)};this.isLive=g,this.hasSegmentHashes=function(e,t,r){return a.stream_type==conf.STREAM_TYPES.HLS?!1:u.periods[e].asets[t].reps[r].hasSegmentHashes},this.getMap=function(){return u},this.getMpdUrl=function(){return d},this.getStreamType=function(){return s},this.getDuration=function(e){return u.periods[e].duration},this.getPlaybackOffset=function(e){return u.periods[e].playbackOffset},this.getPlaybackTargetSegment=v,this.getBeginningSegment=P,this.isLiveTimeExpired=A,this.getNextSegment=function(e){var t=_.filter(u.periods[e.id_period].asets[e.id_aset].reps[e.id_rep].segments,function(t){return t.id>e.idPiece});return t.length?(t=_.sortBy(t,function(e){return e.id}),{id_period:e.id_period,id_aset:e.id_aset,id_rep:e.id_rep,idPiece:t[0].id,segment:t[0]}):!1},this.getInitSegment=function(e,t,r){var i,n,s;return a.stream_type==conf.STREAM_TYPES.HLS?(i=new ArrayBuffer(8),n="application/vnd.apple.mpegurl",s=10):(i=ISOBMFF.extractInit(u.periods[e].asets[t].reps[r].init.value),n=u.periods[e].asets[t].reps[r].mime+'; codecs="'+u.periods[e].asets[t].reps[r].codecs+'"',s=u.periods[e].duration),{duration:s,initSegment:i,mimecodec:n}},this.getPartForTime=function(e,t,r,i){for(var n=u.periods[e].asets[r].reps[i].segments,s=0;s<n.length-1;s++)if(n[s].time<=t&&n[s+1].time>t)return{id_period:e,id_rep:i,id_aset:r,idPiece:n[s].id,segment:n[s]};return n[n.length-1].time<=t&&n[n.length-1].time+n[n.length-1].duration>t?{id_period:e,id_rep:i,id_aset:r,idPiece:n[s].id,segment:n[n.length-1]}:(0,null)},this.getPieceInfos=function(e){var t=h(e);return t?a.stream_type==conf.STREAM_TYPES.HLS?{url:t.url||u.periods[e.id_period].asets[e.id_aset].reps[0].url,range:t.size&&t.offset&&{start:t.offset,end:t.offset+t.size-1}||null,downloading:t.downloading,downloaded:t.downloaded,size:t.size||null,time:t.time}:{url:t.url||u.periods[e.id_period].asets[e.id_aset].reps[e.id_rep].url,range:t.size&&t.offset&&{start:t.offset,end:t.offset+t.size-1}||null,downloading:t.downloading,downloaded:t.downloaded,size:t.size||null,time:t.time}:(0,!1)},this.getSegmentHash=function(e){var t=h(e);return t?t.hash?t.hash:!1:(0,!1)},this.setSegmentSize=function(e,t,r,i,n){var s=h({id_period:e,id_aset:t,id_rep:r,idPiece:i});s&&(s.size||(s.size=n,0))},this.setSegmentHash=function(e,t){var r=h(e);r&&(r.hash=t)},this.loadManifest=function(e,t){0,o=t,L(e)},this.markAsDownloading=function(e,t){var r=h(e);r?r.downloading=t|!1:0},this.markAsDownloaded=function(e){var t=h(e);t?t.downloaded=!0:0},this.getVideoTrackDimensions=function(e,t,r){var i=u.periods[e].asets[t].reps[r];return i.width&&i.height?{width:i.width,height:i.height}:{width:0,height:0}},this.updateMapPTS=N};module.exports=ManifestManager;


},{"../../../vendor/js/isobmffManager":267,"../../confMedia":3,"../utils":60,"./MapHelper":15,"streamroot-map-generator":166,"underscore":265}],15:[function(require,module,exports){
  "use strict";var MapHelper=function(){var r=function(r,n){for(var i,a=t(r),s=r.periods[0],p=Math.abs(n),o=0;i=s.asets[o];o++){for(var l,f=[],u=0;l=i.reps[u];u++)e(f,l);n>0?p<f.length&&f.splice(0,f.length-p):0>n&&p<f.length&&f.splice(p,f.length-p),a.periods[0].asets[o].reps=f}return a},e=function(r,e){for(var t=!1,n=0;n<r.length;n++)if(e.bandwidth<r[n].bandwidth){r.splice(n,0,e),t=!0;break}t||r.push(e)},t=function(r){if(null===r||"object"!=typeof r)return r;var e;e=r instanceof Array?[]:{};for(var n in r)"init"===n?e[n]=r[n]:"reps"===n||(e[n]=t(r[n]));return e};this.trimMapByBitrate=r};module.exports=MapHelper;


},{}],16:[function(require,module,exports){
  "use strict";var conf=require("../../confMedia"),Buffer=require("./Buffer"),ManifestManager=require("./ManifestManager"),DownloadManager=require("../download/DownloadManager"),utils=require("../utils"),VideoWrapper=require("./VideoWrapper"),VideoExtension=require("./wrapper/VideoExtension"),Track=require("./Track.js"),MediaStats=require("./MediaStats"),EventEmitter=require("eventemitter3"),DRMManager=require("../security/DRMManager.js"),MediaController=function(e,t,r,i){var n=(new Date).getTime();this.playlistDuration=0;var s,a=["onBuffering","onPlaying","onPaused","onFinish","onSpaceBar","onKeyForward","onKeyRewind"],o=function(){},d=utils.overloadConf(conf,i);for(s=0;s<a.length;s++)"undefined"==typeof r[a[s]]&&(r[a[s]]=o);"application/x-shockwave-flash"===e.type?this.video=new VideoExtension(this,e):this.video=e,this.video.event_handlers=r,this.ee=new EventEmitter,this.addVideoEventListener("ended",this.onEnded.bind(this)),this.addVideoEventListener("stalled",this.onStalled.bind(this)),this.video.addEventListener("play",this.onPlay.bind(this)),this.buffer=new Buffer(this),this.videoWrapper=new VideoWrapper(this.video,this,n),this.mediaStats=new MediaStats(this.videoWrapper,this.buffer),this.video.mpd=new ManifestManager(this,t),this.manifestManager=this.video.mpd,this.downloadManager=new DownloadManager(this,d),this.drmManager=new DRMManager(this.video),this.want_to_play=!1,this.currentTracks={},this.currentPeriod=0,conf.FORCE_TRACK_BOOL&&conf.PRESELECTED_TRACKS&&(this.currentTracks=conf.PRESELECTED_TRACKS),this.manifestManager.loadManifest(!1,this.manifestReady.bind(this))};MediaController.prototype.conditionalPlay=function(){this.want_to_play&&this.video.paused&&this.play(!0)},MediaController.prototype.manifestReady=function(e){if(e&&conf.DISPLAY_ERROR)return void this.video.event_handlers.onError(e);var t,r=this.manifestManager.getMap();if(this.manifestManager.isLive())for(var i=r.periods[0].asets[0].reps[0].segments,n=0;n<i.length;n++)this.playlistDuration+=i[n].duration;for(var s,a=0;s=r.periods[this.currentPeriod].asets[a];a++)this.manifestManager.getStreamType()==conf.STREAM_TYPES.HLS&&(s.type="video"),this.currentTracks[s.type]||(this.currentTracks[s.type]=new Track(a,0,!1)),this.currentTracks[s.type].autoswitch=conf.DEFAULT_AUTOSWITCH[s.type]===!0;if(conf.FORCE_TRACK_BOOL||this.chooseBandwidthInitial(),this.video.event_handlers.onMetaData){for(var o,d=[],h=0;o=r.periods[this.currentPeriod].asets[h];h++){for(var c,u=o.lang||null,p=o.type||null,l=0;c=o.reps[l];l++){var f={bandwidth:c.bandwidth,id_rep:l,lang:c.lang||u,width:c.width||null,height:c.height||null};f.type=p,f.id_aset=h,f.type&&(f.selected=this.currentTracks[f.type].autoswitch===!1&&this.currentTracks[f.type].id_aset==f.id_aset&&this.currentTracks[f.type].id_rep==f.id_rep),d.push(f)}0}for(var T in this.currentTracks)t={label:"auto",auto:!0,type:T,selected:this.currentTracks[T].autoswitch!==!1,id_rep:-1},conf.AUTO_LABEL_FIRST?d.splice(0,0,t):d.push(t);d=d.sort(utils.sortDescending),this.video.event_handlers.onMetaData(d),this.emitNewBitrate()}var M=[];for(var v in this.currentTracks)M.push({autoswitch:this.currentTracks[v].autoswitch,asetId:this.currentTracks[v].id_aset,representationId:this.currentTracks[v].id_rep,type:v});this.buffer.initBuffer(this.currentPeriod,M,r.minBufferTime,r.maxSegmentDuration),this.downloadManager.triggerInterfaceUpdateMap(r),this.manifestManager.isLive()&&(M=this.computeBufferLevelMax(M)),this.downloadManager.triggerInterfaceTrackChange(this.currentPeriod,M)},MediaController.prototype.computeBufferLevelMax=function(e){var t=conf.LIVE.DISTANCE_FROM_LIVE_EDGE-conf.LIVE.MIN_BUFFER_LEVEL;return 0>=t&&(0,t=0),e.map(function(e){return e.bufferLevelMax=t,e})},MediaController.prototype.onEnded=function(){this.ended||(0,this.buffer.onEnded(),this.ended=!0,this.videoWrapper.onEnded(),this.video.event_handlers.onFinish(),this.ee.emit("ended"))},MediaController.prototype.onPlay=function(){this.ended&&(this.video.currentTime=0,this.ended=!1)},MediaController.prototype.onStalled=function(){if(0===this.video.currentTime&&this.want_to_play)try{this.video.currentTime=0}catch(e){}},MediaController.prototype.sortMaxBWReps=function(){var e,t=this.currentTracks;for(var r in t)t.hasOwnProperty(r)&&(e=this.manifestManager.getMap().periods[this.currentPeriod].asets[t[r].id_aset].reps,e.sort(utils.sortDescending))},MediaController.prototype.chooseFirstReps=function(){var e=this.currentTracks;for(var t in e)e.hasOwnProperty(t)&&(e[t].id_rep=0)},MediaController.prototype.chooseBandwidthInitial=function(){var e,t,r,i,n;if(conf.FORCE_BANDWIDTH)for(i in this.currentTracks){for(t=1/0,e=this.manifestManager.getMap().periods[this.currentPeriod].asets[this.currentTracks[i].id_aset].reps,n=0;n<e.length;n++)Math.abs(e[n].bandwidth-conf.FORCE_BANDWIDTH[i])<=t&&(t=Math.abs(e[n].bandwidth-conf.FORCE_BANDWIDTH[i]),r=n);this.currentTracks[i].id_rep=r}},MediaController.prototype.onEmergency=function(){this.videoWrapper.setWaiting()},MediaController.prototype.manualSwitchRepresentation=function(e,t,r){var i=this.currentTracks[e].id_aset,n=this.currentTracks[e].id_rep,s=!1,a=this.manifestManager.getMap();-1==r?(0,this.currentTracks[e].autoswitch=!0):(0,this.currentTracks[e].autoswitch=!1,this.currentTracks[e].id_aset=t,this.currentTracks[e].id_rep=r,s=a.periods[this.currentPeriod].asets[t].reps[r].bandwidth>a.periods[this.currentPeriod].asets[i].reps[n].bandwidth||conf.BUFFER.ALWAYS_FORCE_SWITCH,this.switchRepresentation(i,t,n,r,s))},MediaController.prototype.switchRepresentation=function(e,t,r,i,n){if(t!==e||i!==r){this.buffer.switchedTrack(e,r,t,i,n),this.downloadManager.killSegmentDownloadForTrack(e);var s=[];0;for(var a in this.currentTracks)this.currentTracks[a].id_aset===e&&this.currentTracks[a].id_rep===r&&(this.currentTracks[a].id_aset=t,this.currentTracks[a].id_rep=i,0),s.push({autoswitch:this.currentTracks[a].autoswitch,asetId:this.currentTracks[a].id_aset,representationId:this.currentTracks[a].id_rep,type:a});this.downloadManager.triggerInterfaceTrackChange(this.currentPeriod,s),this.ee.emit("trackSwitch"),this.emitNewBitrate()}},MediaController.prototype.emitNewBitrate=function(){var e=0;for(var t in this.currentTracks)e+=this.manifestManager.getMap().periods[this.currentPeriod].asets[this.currentTracks[t].id_aset].reps[this.currentTracks[t].id_rep].bandwidth;this.ee.emit("bitrateswitch",e)},MediaController.prototype.isPaused=function(){return this.video.paused},MediaController.prototype.isAutoplay=function(){return this.video.autoplay},MediaController.prototype.getCurrentTime=function(){return this.video.currentTime},MediaController.prototype.getDuration=function(){return this.video.duration},MediaController.prototype.getVideoBuffered=function(){return this.video.buffered},MediaController.prototype.setCurrentTime=function(e){e>=0&&1/0>e?this.video.currentTime=e:0},MediaController.prototype.play=function(e){e&&this.ended?0:(this.want_to_play=!0,this.video.paused&&(this.buffer.setStreamingMode(),this.video.play()))},MediaController.prototype.pause=function(){0,this.want_to_play=0,this.video.pause(),this.video.event_handlers.onPaused()},MediaController.prototype.getBuffered=function(){return this.buffer.getBuffered()},MediaController.prototype.watchFreezeLive=function(){var e=this.getCurrentTime(),t=-(1/0),r=function(){if(this.buffer.isInitialized()){var r,i=this.getCurrentTime(),n=(new Date).getTime();.002>i-e&&(n-t>conf.FREEZE_LIVE_MIN_SEEK_TIME&&(r=this.manifestManager.map.periods[this.currentPeriod].asets[0].reps[0].segments[0].time+.01,r>=this.getCurrentTime()&&(this.setCurrentTime(r),t=n)),this.play(!0),0),e=i}};setInterval(r.bind(this),1e3)},MediaController.prototype.addVideoEventListener=function(e,t){this.video.addEventListener(e,t)},MediaController.prototype.addEventListener=function(e,t){this.ee.addListener(e,t)},MediaController.prototype.getVideoDimensions=function(){return this.manifestManager.getVideoTrackDimensions(this.currentPeriod,this.currentTracks.video.id_aset,this.currentTracks.video.id_rep)},MediaController.prototype.updateMapPTS=function(e,t,r){return this.manifestManager.updateMapPTS(this.currentPeriod,this.currentTracks.video.id_aset,this.currentTracks.video.id_rep,e,t,r)},module.exports=MediaController;


},{"../../confMedia":3,"../download/DownloadManager":6,"../security/DRMManager.js":58,"../utils":60,"./Buffer":10,"./ManifestManager":14,"./MediaStats":17,"./Track.js":22,"./VideoWrapper":23,"./wrapper/VideoExtension":32,"eventemitter3":110}],17:[function(require,module,exports){
  "use strict";var ObjectHelper=require("../utils/ObjectHelper"),MediaStats=function(t,e){var i=this,r=t,s=e,o=function(){var t=r.getVideoStats(),e=s.getABRStats();return t=ObjectHelper.merge(t,e)},E=function(){window.SR_MEDIA_INTERFACE||(window.SR_MEDIA_INTERFACE={}),window.SR_MEDIA_INTERFACE.qos={},window.SR_MEDIA_INTERFACE.qos.getStats=o};i.getStats=o,E()};module.exports=MediaStats;


},{"../utils/ObjectHelper":61}],18:[function(require,module,exports){
  var EventEmitter=require("eventemitter3").EventEmitter,PlayerInterface=function(e){this.getCurrentTime=function(){return e.getCurrentTime()},this.setCurrentTime=function(t){e.setCurrentTime(t)},this.getPlaybackOffset=function(){return e.manifestManager.getPlaybackOffset(e.currentPeriod)},this.getBuffered=function(){for(var t,r=e.buffer.getBufferedTracks(),i=[],n=0;t=r[n];n++)i.push({buffered:t.buffered,periodId:e.currentPeriod,asetId:t.id_aset,repId:t.id_rep,bufferedStrict:t.bufferedStrict});return i},this.areBuffersInitialized=function(){return e.buffer.isInitialized()},this.setBufferMarginLive=function(t,r){e.buffer.setBufferMarginLive(t,r)},this.addEventListener=function(e,t){this.on(e,t)},this.addVideoEventListener=function(t,r){e.addVideoEventListener(t,r)},this.getMediaStats=function(){return e.mediaStats}};PlayerInterface.prototype=Object.create(EventEmitter.prototype),PlayerInterface.prototype.constructor=PlayerInterface,module.exports=PlayerInterface;


},{"eventemitter3":110}],19:[function(require,module,exports){
  "use strict";var SeekRequest=function(e,t){var n=t,i=!1,u=function(){return n},r=function(){return i},s=function(){i=!0},c=function(){return e};this.isReady=r,this.getTrackType=u,this.setReady=s,this.getPiece=c};module.exports=SeekRequest;


},{}],20:[function(require,module,exports){
  "use strict";function readBytes(t,r,e){for(var n="",a=0;e>a;a++)n+=decToHex(t[r+a]);return n}function decToHex(t,r){var e=Number(t).toString(16);return r="undefined"==typeof r||null===r?r=2:r,r>16&&(r=16),e="0000000000000000".substr(0,r-e.length)+e}function intToUint8Array(t,r){r="undefined"==typeof r||null===r?r=16:r,t=decToHex(t,r);for(var e=[],n=0;n<t.length;n+=2)e.push(parseInt(t.substr(n,2),16));return new Uint8Array(e)}var Long=require("./parser/long"),MOOF="6D6F6F66",MFHD="6D666864",TRAF="74726166",TFHD="74666864",TFDT="74666474",TRUN="7472756E",MDAT="6D646174",UUID="75756964",SegmentUpdater=function(t,r){this.piece=r,this.data=new Uint8Array(t)};SegmentUpdater.prototype.updateSegment=function(){var t=this.buildSegment();t.moof.traf.tfdt||(t=this.addTfdt(t)),t=this.updateTfhd(t),t=this.updateTrun(t);var r=this.buildData(t);return 0,r},SegmentUpdater.prototype.buildSegment=function(){for(var t=this.findBox(MOOF,0,this.data.length),r=this.findBox(MFHD,t.start+8,t.length-8),e=this.findBox(TRAF,t.start+8,t.length-8),n=this.findBox(TFHD,e.start+8,e.length-8),a=this.findBox(TRUN,e.start+8,e.length-8),o=this.findBox(TFDT,e.start+8,e.length-8),f=[],h=this.findBox(MDAT,0,this.data.length),i=this.findBox(UUID,e.start+8,e.length-8);i;)f.push(i),i=this.findBox(UUID,i.start+i.length,e.length-8-(i.start-e.start)-i.length);var d=!1,g=!1;a&&(d=this.data.subarray(a.start,a.start+a.length)),o&&(g=this.data.subarray(o.start,o.start+o.length));for(var l=0,s=0;s<f.length;s++){var u=f[s];f[s]=this.data.subarray(u.start,u.start+u.length),l+=u.length}var m=this.data.subarray(r.start,r.start+r.length),p=this.data.subarray(n.start,n.start+n.length),y=this.data.subarray(h.start,h.start+h.length);e.length=p.length+(g.length||0)+d.length+8,t.length=m.length+e.length+8;var T={moof:{length:t.length,mfhd:m,traf:{length:e.length,tfhd:p,tfdt:g,trun:d,uuid:f}},mdat:y};return T},SegmentUpdater.prototype.addTfdt=function(t){for(var r=[0,0,0,20,116,102,100,116,1,0,0,0,0,0,0,0,0,0,0,0],e=intToUint8Array(this.piece.segment.decodeTime,16),n=0;n<e.length;n++)r[12+n]=e[n];return r=new Uint8Array(r),t.moof.traf.tfdt=r,t.moof.length+=20,t.moof.traf.length+=20,t},SegmentUpdater.prototype.addTrun=function(t){},SegmentUpdater.prototype.updateTfhd=function(t){var r=t.moof.traf.tfhd,e=r[11],n=0,a=!1;e%2===1&&(n=-8,a=!0),t.moof.length=t.moof.length+n,t.moof.traf.length=t.moof.traf.length+n;var o=r.length+n,f=new Uint8Array(o),h=0;o=intToUint8Array(o,8);for(var i=0;i<o.length;i++)f[h]=o[i],h++;for(;11>h;)f[h]=r[h],h++;for(a?f[11]=e-1:f[11]=e,h++;15>h;)f[h]=r[h],h++;for(;h<r.length+n;)f[h]=r[h-n],h++;return t.moof.traf.tfhd=f,t},SegmentUpdater.prototype.updateTrun=function(t){var r=t.moof.traf.trun,e=r[11],n=0,a=!0;e%2===0&&(n=4,a=!1),t.moof.length=t.moof.length+n,t.moof.traf.length=t.moof.traf.length+n;var o=r.length+n,f=new Uint8Array(o),h=0;o=intToUint8Array(o,8);for(var i=0;i<o.length;i++)f[h]=o[i],h++;for(;11>h;)f[h]=r[h],h++;for(a?f[11]=e:f[11]=e+1,h++;16>h;)f[h]=r[h],h++;for(var d=intToUint8Array(t.moof.length+8,8),i=0;i<d.length;i++)f[h]=d[i],h++;for(;h<r.length+n;)f[h]=r[h-n],h++;return t.moof.traf.trun=f,t},SegmentUpdater.prototype.buildData=function(t){for(var r=t.moof.length+t.mdat.length,e=new Uint8Array(r),n=0,a=intToUint8Array(t.moof.length,8),o=0;o<a.length;o++)e[n]=a[o],n++;for(e[4]=109,e[5]=111,e[6]=111,e[7]=102,n=8,o=0;o<t.moof.mfhd.length;o++)e[n]=t.moof.mfhd[o],n++;var f=intToUint8Array(t.moof.traf.length,8);for(o=0;o<f.length;o++)e[n]=f[o],n++;for(e[n]=116,n++,e[n]=114,n++,e[n]=97,n++,e[n]=102,n++,o=0;o<t.moof.traf.tfhd.length;o++)15==o?e[n]=2:e[n]=t.moof.traf.tfhd[o],n++;for(o=0;o<t.moof.traf.tfdt.length;o++)e[n]=t.moof.traf.tfdt[o],n++;for(o=0;o<t.moof.traf.trun.length;o++)e[n]=t.moof.traf.trun[o],n++;for(o=0;o<t.mdat.length;o++)e[n]=t.mdat[o],n++;return e},SegmentUpdater.prototype.findBox=function(t,r,e){t=t.toLowerCase();for(var n=r,a="",o=0;r+e>n&&a!=t;)n+=o,o=parseInt(readBytes(this.data,n,4),16),a=readBytes(this.data,n+4,4);return a==t?{start:n,length:o}:!1},module.exports=SegmentUpdater;


},{"./parser/long":25}],21:[function(require,module,exports){
  "use strict";var CustomTimeRange=require("./CustomTimeRange"),AESController=require("./AESController"),SourceBufferWrapper=function(e){this.ACTION_TYPE={REMOVE:0,APPEND:1};var n,t,r,i,u=this,o=[],f=[],a=0,s=[],d=.3,c=!1,l=function(e,n,t,r){e===u.ACTION_TYPE.APPEND?o.push({segmentData:n,segmentInterval:t,seqnum:r}):f.push(n)},p=function(e){e===u.ACTION_TYPE.APPEND?o.splice(0,1):f.splice(0,1)},g=function(){var e;for(e=o.length-1;e>=0;e--)"undefined"!=typeof o[e].segmentInterval&&o.splice(e,1);s=[]},h=function(e){var n;for(n=0;n<s.length;n++)if(e.start<s[n].start)return void s.splice(n,0,e);s.push(e)},v=function(e){var n;for(n=0;n<s.length;n++)s[n]===e&&s.splice(n,1)},m=function(){return 0===o.length&&0===f.length},E=function(e,o,f,s){if(i.updating||t)0,f||l(u.ACTION_TYPE.APPEND,e,o,s);else if(c&&o);else if(f||m()){var d,g;o&&(d=o.start,g=o.end),r=o,f&&p(u.ACTION_TYPE.APPEND);var h=function(e){return function(n,r){return n?void 0:(t=!1,void(a===e?i.isFlash?i.appendBuffer(r,d,g,s):i.appendBuffer(r):P()))}},v=h(a);e.key?(t=!0,n.decrypt(e.buffer,e.key.aesKey.buffer,e.key.iv,v)):v(null,e)}else l(u.ACTION_TYPE.APPEND,e,o,s)},T=function(e,n){i.updating?(0,n||l(u.ACTION_TYPE.REMOVE,e)):n||m()?(n&&p(u.ACTION_TYPE.REMOVE),e.start>=0&&e.end<1/0&&e.start<e.end?i.remove(e.start,e.end):(0,setTimeout(P,0))):l(u.ACTION_TYPE.REMOVE,e)},P=function(){r&&(v(r),r=void 0),f.length?T(f[0],!0):o.length?E(o[0].segmentData,o[0].segmentInterval,!0,o[0].seqnum):s=[]},A=function(){for(var e,n,t,r,u,o=i.buffered,f=[],a=0,c=0;a<o.length||c<s.length;)r=a<o.length?o.start(a):1/0,u=c<s.length?s[c].start:1/0,"undefined"==typeof n?r!==1/0&&u>r?(n=o.start(a),t=o.end(a),a++):(n=s[c].start,t=s[c].end,c++):t>r-d?(t=Math.max(t,o.end(a)),a++):t>u-d?(t=Math.max(t,s[c].end),c++):(f.push({start:n,end:t}),n=void 0,t=void 0);return"undefined"!=typeof n&&f.push({start:n,end:t}),e=new CustomTimeRange(f)},S=function(e){var n,t=A();for(n=0;n<t.length;n++)if(t.start(n)<=e&&e<=t.end(n))return{start:t.start(n),end:t.end(n)};return!1},C=function(e,n,t,r){var u=i.buffered.length?i.buffered.end(i.buffered.length-1):void 0;r?(g(),u&&T({start:i.appendWindowStart,end:u},!1)):(n&&T({start:i.appendWindowStart,end:n},!1),t&&u&&(g(),T({start:t,end:u},!1))),E(e.initSegment,void 0,!1)},N=function(){},B=function(){0,g(),a++};this.createSourceBuffer=function(t){n=new AESController,i=e.addSourceBuffer(t.mimecodec),"undefined"==typeof i.appendBuffer&&(i.appendBuffer=i.append),i.addEventListener("updateend",P),t.initSegment.byteLength>10&&i.appendBuffer(t.initSegment)},this.append=function(e,n,t){h(n),E(e,n,!1,t)},this.remove=function(e){T(e,!1)},this.getBufferedTimeRanges=A,this.getBufferedStrict=function(){return i.buffered},this.getPlaybackInterval=S,this.checkSegment=function(e){var n,t,r,i=A(),u=e.time,o=u+e.duration;for(r=0;r<i.length;r++)if(n=i.start(r),t=i.end(r),u+d>=n&&t>=o-d)return!0;return!1},this.switchedTrack=C,this.clearRemoveJobs=function(){f=[]},this.onSeeking=B,this.requestedSeek=function(){c=!0},this.onSeeked=function(){c=!1,i.updating||m()||(0,P())},N()};module.exports=SourceBufferWrapper;


},{"./AESController":9,"./CustomTimeRange":12}],22:[function(require,module,exports){
  function Track(e,i,t){"use strict";void 0===e&&0,void 0===i&&0,this.autoswitch=t,Object.defineProperty(this,"id_aset",{get:function(){return e},set:function(i){void 0===i&&0,e=i}}),Object.defineProperty(this,"id_rep",{get:function(){return i},set:function(e){void 0===e&&0,i=e}})}module.exports=Track;


},{}],23:[function(require,module,exports){
  "use strict";var debug,debugEvent,VideoWrapper=function(e,n,t){var i,a,r,o,f,d,s=(new Date).getTime(),u=!0,c=0,g=!1,m=0,v=0,p=!1,l=0,w=t,T=function(e){var n;window.performance&&window.performance.timing?(n=window.performance.timing,d=e-n.domInteractive):d=0,o?f=e-o:(0,f=e-w)},y=function(){if(p&&a){var e=(new Date).getTime();v+=(e-a)/1e3,a=e}},b=function(){y(),p=!1,a=!1},E=function(){a||(a=(new Date).getTime()),p=!0},h=function(){n.manifestManager.isLive()||(r=(new Date).getTime(),g=!0,b()),s=(new Date).getTime()},D=function(){g=!1},L=function(){var t=(new Date).getTime();e.isFlash||n.buffer.isReady()?(e.event_handlers.onPlaying(),n.ee.emit("playing"),void 0===f&&T(t),E(),i&&(m+=(t-i)/1e3,i=void 0,n.ee.emit("bufferend")),r&&(l+=(t-r)/1e3,r=void 0)):k()},S=function(){u=!0},k=function(){u=!0,e.isFlash||(e.playbackRate=0),e.event_handlers.onBuffering(),g?g=!1:(_(),n.ee.emit("bufferstart")),b(),setTimeout(function(){V()},200)},R=function(){o||(o=(new Date).getTime()),u=!1},I=function(){b()},P=function(){b()},V=function(){var t=setInterval(function(){n.buffer.isReady()&&(clearInterval(t),e.playbackRate=1,e.paused||e.dispatchEvent(new Event("playing")))},100)},W=function(){e.addEventListener("seeking",h),e.addEventListener("seeked",D),e.addEventListener("playing",L),e.addEventListener("waiting",S),e.addEventListener("play",R),e.addEventListener("pause",I)},_=function(){!i&&f&&(i=(new Date).getTime(),c++)},F=function(){var e=100*v/(m+v);return{startupTime:f,startupTimeLoad:d,rebufferingCount:c,timeSpentRebuffering:m,timeSpentPlaying:v,timeSpentSeeking:l,percentageTimeSpentPlaying:e}},x=function(){W(),setInterval(y,1e3)};this.setWaiting=k,this.onEnded=P,this.getVideoStats=F,x()};module.exports=VideoWrapper;


},{}],24:[function(require,module,exports){
  "use strict";var conf=require("../../confMedia"),VBM=function(){this.parts=[],this.buffered=[],this.length=0,this.TOLERANCE=.1};VBM.prototype.clear=function(){this.parts=[],this.buffered=[],this.length=0},VBM.prototype.addPiece=function(t){var e;if(this.parts.length)for(e=0;e<this.parts.length;e++){if(t.idPiece<=this.parts[e].idPiece){this.parts.splice(e,0,t);break}if(e===this.parts.length-1){this.parts.push(t);break}}else this.parts.push(t);this.computeBuffered()},VBM.prototype.checkSegment=function(t){var e;for(e=0;e<this.parts.length;e++)if(this.parts[e].idPiece===t)return!0;return!1},VBM.prototype.remove=function(t,e){var s,i,r;for(s=this.parts.length-1;s>=0;s--)if(i=this.parts[s].segment.time,r=i+this.parts[s].segment.duration,e>=i){if(!(r>=t))break;this.parts.splice(s,1)}this.computeBuffered()},VBM.prototype.removePiece=function(t){var e;for(e=0;e<this.parts.length;e++)if(this.parts[e].id_period===t.id_period&&this.parts[e].id_aset===t.id_aset&&this.parts[e].id_rep===t.id_rep&&this.parts[e].idPiece===t.id_segment){this.parts.splice(e,1);break}this.computeBuffered()},VBM.prototype.computeBuffered=function(){var t,e;for(this.buffered=[],e=0;e<this.parts.length;e++)t||0===t?this.parts[e-1].segment.time+this.parts[e-1].segment.duration+this.TOLERANCE<this.parts[e].segment.time&&(this.buffered.push({start:t,end:this.parts[e-1].segment.time+this.parts[e-1].segment.duration}),t=this.parts[e].segment.time):t=this.parts[e].segment.time,e===this.parts.length-1&&this.buffered.push({start:t,end:this.parts[e].segment.time+this.parts[e].segment.duration});this.length=this.buffered.length},VBM.prototype.switchedBitrate=function(t,e){var s,i,r;for(s=0;s<this.parts.length;s++)if("undefined"==typeof i)this.parts[s].segment.time<=t&&t<this.parts[s].segment.time+this.parts[s].segment.duration&&(i=s,r=s);else{if(!(this.parts[s-1].segment.time+this.parts[s-1].segment.duration+this.TOLERANCE>=this.parts[s].segment.time))break;if(r=s,e&&this.parts[s].segment.time>=t+conf.BUFFER.EMERGENCY_MARGIN)break}"undefined"!=typeof i?(this.parts=this.parts.splice(i,r-i+1),this.computeBuffered()):this.clear()},VBM.prototype.getIdLastSegmentInPlaybackInterval=function(t){var e,s,i;for(e=0;e<this.parts.length;e++)if("undefined"==typeof s)this.parts[e].segment.time<=t&&t<this.parts[e].segment.time+this.parts[e].segment.duration&&(s=e,i=this.parts[e].idPiece);else{if(!(this.parts[e-1].segment.time+this.parts[e-1].segment.duration+this.TOLERANCE>=this.parts[e].segment.time))break;i=this.parts[e].idPiece}return i},VBM.prototype.start=function(t){try{return this.buffered[t].start}catch(e){return 0}},VBM.prototype.end=function(t){try{return this.buffered[t].end}catch(e){return 0}},module.exports=VBM;


},{"../../confMedia":3}],25:[function(require,module,exports){
  var Long=function(t,n,i){this.low=0|t,this.high=0|n,this.unsigned=!!i},INT_CACHE={},UINT_CACHE={};Long.fromInt=function(t,n){var i,o;return n?(t>>>=0,t>=0&&256>t&&(o=UINT_CACHE[t])?o:(i=new Long(t,0>(0|t)?-1:0,!0),t>=0&&256>t&&(UINT_CACHE[t]=i),i)):(t=0|t,t>=-128&&128>t&&(o=INT_CACHE[t])?o:(i=new Long(t,0>t?-1:0,!1),t>=-128&&128>t&&(INT_CACHE[t]=i),i))},Long.fromNumber=function(t,n){return n=!!n,isNaN(t)||!isFinite(t)?Long.ZERO:!n&&-TWO_PWR_63_DBL>=t?Long.MIN_SIGNED_VALUE:n&&0>=t?Long.MIN_UNSIGNED_VALUE:!n&&t+1>=TWO_PWR_63_DBL?Long.MAX_SIGNED_VALUE:n&&t>=TWO_PWR_64_DBL?Long.MAX_UNSIGNED_VALUE:0>t?Long.fromNumber(-t,!1).negate():new Long(t%TWO_PWR_32_DBL|0,t/TWO_PWR_32_DBL|0,n)},Long.fromBits=function(t,n,i){return new Long(t,n,i)},Long.from28Bits=function(t,n,i,o){return Long.fromBits(t|n<<28,n>>>4|i<<24,o)},Long.fromString=function(t,n,i){if(0==t.length)throw new Error("number format error: empty string");if("NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return Long.ZERO;if("number"==typeof n&&(i=n,n=!1),i=i||10,2>i||i>36)throw new Error("radix out of range: "+i);if("-"==t.charAt(0))return Long.fromString(t.substring(1),n,i).negate();if(t.indexOf("-")>=0)throw new Error('number format error: interior "-" character: '+t);for(var o=Long.fromNumber(Math.pow(i,8)),r=Long.ZERO,e=0;e<t.length;e+=8){var g=Math.min(8,t.length-e),s=parseInt(t.substring(e,e+g),i);if(8>g){var h=Long.fromNumber(Math.pow(i,g));r=r.multiply(h).add(Long.fromNumber(s))}else r=r.multiply(o),r=r.add(Long.fromNumber(s))}return r};var TWO_PWR_16_DBL=65536,TWO_PWR_24_DBL=1<<24,TWO_PWR_32_DBL=TWO_PWR_16_DBL*TWO_PWR_16_DBL,TWO_PWR_31_DBL=TWO_PWR_32_DBL/2,TWO_PWR_48_DBL=TWO_PWR_32_DBL*TWO_PWR_16_DBL,TWO_PWR_64_DBL=TWO_PWR_32_DBL*TWO_PWR_32_DBL,TWO_PWR_63_DBL=TWO_PWR_64_DBL/2,TWO_PWR_24=Long.fromInt(1<<24);Long.ZERO=Long.fromInt(0),Long.ONE=Long.fromInt(1),Long.NEG_ONE=Long.fromInt(-1),Long.MAX_SIGNED_VALUE=Long.fromBits(-1,2147483647,!1),Long.MAX_UNSIGNED_VALUE=Long.fromBits(-1,-1,!0),Long.MAX_VALUE=Long.MAX_SIGNED_VALUE,Long.MIN_SIGNED_VALUE=Long.fromBits(0,-2147483648,!1),Long.MIN_UNSIGNED_VALUE=Long.fromBits(0,0,!0),Long.MIN_VALUE=Long.MIN_SIGNED_VALUE,Long.prototype.toInt=function(){return this.unsigned?this.low>>>0:this.low},Long.prototype.toNumber=function(){return this.unsigned?(this.high>>>0)*TWO_PWR_32_DBL+(this.low>>>0):this.high*TWO_PWR_32_DBL+(this.low>>>0)},Long.prototype.toString=function(t){if(t=t||10,2>t||t>36)throw new Error("radix out of range: "+t);if(this.isZero())return"0";var n;if(this.isNegative()){if(this.equals(Long.MIN_SIGNED_VALUE)){var i=Long.fromNumber(t),o=this.div(i);return n=o.multiply(i).subtract(this),o.toString(t)+n.toInt().toString(t)}return"-"+this.negate().toString(t)}var r=Long.fromNumber(Math.pow(t,6));n=this;for(var e="";;){var g=n.div(r),s=n.subtract(g.multiply(r)).toInt(),h=s.toString(t);if(n=g,n.isZero())return h+e;for(;h.length<6;)h="0"+h;e=""+h+e}},Long.prototype.getHighBits=function(){return this.high},Long.prototype.getHighBitsUnsigned=function(){return this.high>>>0},Long.prototype.getLowBits=function(){return this.low},Long.prototype.getLowBitsUnsigned=function(){return this.low>>>0},Long.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(Long.MIN_SIGNED_VALUE)?64:this.negate().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,n=31;n>0&&0==(t&1<<n);n--);return 0!=this.high?n+33:n+1},Long.prototype.isZero=function(){return 0==this.high&&0==this.low},Long.prototype.isNegative=function(){return!this.unsigned&&this.high<0},Long.prototype.isOdd=function(){return 1==(1&this.low)},Long.prototype.isEven=function(){return 0==(1&this.low)},Long.prototype.equals=function(t){return this.unsigned!=t.unsigned&&this.high>>>31!=t.high>>>31?!1:this.high==t.high&&this.low==t.low},Long.prototype.notEquals=function(t){return!this.equals(t)},Long.prototype.lessThan=function(t){return this.compare(t)<0},Long.prototype.lessThanOrEqual=function(t){return this.compare(t)<=0},Long.prototype.greaterThan=function(t){return this.compare(t)>0},Long.prototype.greaterThanOrEqual=function(t){return this.compare(t)>=0},Long.prototype.compare=function(t){if(this.equals(t))return 0;var n=this.isNegative(),i=t.isNegative();return n&&!i?-1:!n&&i?1:this.unsigned?t.high>>>0>this.high>>>0||t.high==this.high&&t.low>>>0>this.low>>>0?-1:1:this.subtract(t).isNegative()?-1:1},Long.prototype.negate=function(){return!this.unsigned&&this.equals(Long.MIN_SIGNED_VALUE)?Long.MIN_SIGNED_VALUE:this.not().add(Long.ONE)},Long.prototype.add=function(t){var n=this.high>>>16,i=65535&this.high,o=this.low>>>16,r=65535&this.low,e=t.high>>>16,g=65535&t.high,s=t.low>>>16,h=65535&t.low,u=0,L=0,f=0,a=0;return a+=r+h,f+=a>>>16,a&=65535,f+=o+s,L+=f>>>16,f&=65535,L+=i+g,u+=L>>>16,L&=65535,u+=n+e,u&=65535,Long.fromBits(f<<16|a,u<<16|L,this.unsigned)},Long.prototype.subtract=function(t){return this.add(t.negate())},Long.prototype.multiply=function(t){if(this.isZero())return Long.ZERO;if(t.isZero())return Long.ZERO;if(this.equals(Long.MIN_VALUE))return t.isOdd()?Long.MIN_VALUE:Long.ZERO;if(t.equals(Long.MIN_VALUE))return this.isOdd()?Long.MIN_VALUE:Long.ZERO;if(this.isNegative())return t.isNegative()?this.negate().multiply(t.negate()):this.negate().multiply(t).negate();if(t.isNegative())return this.multiply(t.negate()).negate();if(this.lessThan(TWO_PWR_24)&&t.lessThan(TWO_PWR_24))return Long.fromNumber(this.toNumber()*t.toNumber(),this.unsigned);var n=this.high>>>16,i=65535&this.high,o=this.low>>>16,r=65535&this.low,e=t.high>>>16,g=65535&t.high,s=t.low>>>16,h=65535&t.low,u=0,L=0,f=0,a=0;return a+=r*h,f+=a>>>16,a&=65535,f+=o*h,L+=f>>>16,f&=65535,f+=r*s,L+=f>>>16,f&=65535,L+=i*h,u+=L>>>16,L&=65535,L+=o*s,u+=L>>>16,L&=65535,L+=r*g,u+=L>>>16,L&=65535,u+=n*h+i*s+o*g+r*e,u&=65535,Long.fromBits(f<<16|a,u<<16|L,this.unsigned)},Long.prototype.div=function(t){if(t.isZero())throw new Error("division by zero");if(this.isZero())return Long.ZERO;if(this.equals(Long.MIN_SIGNED_VALUE)){if(t.equals(Long.ONE)||t.equals(Long.NEG_ONE))return min;if(t.equals(Long.MIN_VALUE))return Long.ONE;var n=this.shiftRight(1),i=n.div(t).shiftLeft(1);if(i.equals(Long.ZERO))return t.isNegative()?Long.ONE:Long.NEG_ONE;var o=this.subtract(t.multiply(i)),r=i.add(o.div(t));return r}if(t.equals(Long.MIN_VALUE))return Long.ZERO;if(this.isNegative())return t.isNegative()?this.negate().div(t.negate()):this.negate().div(t).negate();if(t.isNegative())return this.div(t.negate()).negate();for(var e=Long.ZERO,o=this;o.greaterThanOrEqual(t);){for(var i=Math.max(1,Math.floor(o.toNumber()/t.toNumber())),g=Math.ceil(Math.log(i)/Math.LN2),s=48>=g?1:Math.pow(2,g-48),h=Long.fromNumber(i,this.unsigned),u=h.multiply(t);u.isNegative()||u.greaterThan(o);)i-=s,h=Long.fromNumber(i,this.unsigned),u=h.multiply(t);h.isZero()&&(h=Long.ONE),e=e.add(h),o=o.subtract(u)}return e},Long.prototype.modulo=function(t){return this.subtract(this.div(t).multiply(t))},Long.prototype.not=function(){return Long.fromBits(~this.low,~this.high,this.unsigned)},Long.prototype.and=function(t){return Long.fromBits(this.low&t.low,this.high&t.high,this.unsigned)},Long.prototype.or=function(t){return Long.fromBits(this.low|t.low,this.high|t.high,this.unsigned)},Long.prototype.xor=function(t){return Long.fromBits(this.low^t.low,this.high^t.high,this.unsigned)},Long.prototype.shiftLeft=function(t){if(t&=63,0==t)return this;var n=this.low;if(32>t){var i=this.high;return Long.fromBits(n<<t,i<<t|n>>>32-t,this.unsigned)}return Long.fromBits(0,n<<t-32,this.unsigned)},Long.prototype.shiftRight=function(t){if(t&=63,0==t)return this;var n=this.high;if(32>t){var i=this.low;return Long.fromBits(i>>>t|n<<32-t,n>>t,this.unsigned)}return Long.fromBits(n>>t-32,n>=0?0:-1,this.unsigned)},Long.prototype.shiftRightUnsigned=function(t){if(t&=63,0==t)return this;var n=this.high;if(32>t){var i=this.low;return Long.fromBits(i>>>t|n<<32-t,n>>>t,this.unsigned)}return 32==t?Long.fromBits(n,0,this.unsigned):Long.fromBits(n>>>t-32,0,this.unsigned)},Long.prototype.toSigned=function(){var t=this.clone();return t.unsigned=!1,t},Long.prototype.toUnsigned=function(){var t=this.clone();return t.unsigned=!0,t},Long.prototype.clone=function(){return new Long(this.low,this.high,this.unsigned)},module.exports=Long;


},{}],26:[function(require,module,exports){
  "use strict";var B64Worker="./B64Worker.js",B64Encoder=function(){var e=this,r=new Worker((window.webkitURL||window.URL).createObjectURL(new Blob(['(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module \'"+o+"\'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n// Apr 1st 2015\r\n// Was removed by Kevin Oury, see commit 9be8c00a8c20e5889b367fec09448f086d69115f\r\n// Restore by Stanislas Fechner for performance issue\r\n\r\n/**\r\n * B64Encoding is done in a seperate worker to avoid performance issue when the \r\n * user switch tab or use fullscreen\r\n * In these use case, the browser consider the tab is not the active one, and all\r\n * timeout in the main thread are set to minimum 1 second\r\n * Since we need the timeout in the function _arrayBufferToBase64 (for performance issue)\r\n * we do it in a different worker, in which timeout will not be affected\r\n */ \r\n\r\nvar _arrayBufferToBase64 = function(bytes, index) {\r\n    var len = bytes.byteLength,\r\n        b64Data = "";\r\n    for (var i = 0; i < len; i++) {\r\n        b64Data += String.fromCharCode(bytes[i]);\r\n    }\r\n    b64Data = btoa(b64Data);\r\n    self.postMessage({\r\n        b64data: b64Data,\r\n        jobIndex: index\r\n    });\r\n};\r\n\r\nself.onmessage = function(e) {\r\n    _arrayBufferToBase64(new Uint8Array(e.data.data), e.data.jobIndex);\r\n};\r\n\r\n\r\n//Method tick can be used trigger event \'timeUpdate\' in flash.\r\n//We\'ll be able to use this event as a workaroud for the setTimeout / setInterval throttling when the tab is inactive / video in fullscreen\r\n\r\nvar tick = function() {\r\n  self.postMessage({\r\n    tick: true\r\n  });\r\n};\r\n\r\n//setInterval(tick, 125);\r\n\r\n\n},{}]},{},[1])'],{type:"text/javascript"}))),n=[],t=function(e,t){var o=n.push({cb:t})-1;r.postMessage({data:e,jobIndex:o})},o=function(e){var r=e.data.jobIndex,t=n[r];delete n[r],t.cb(e.data.b64data)},a=function(){r.onmessage=o};a(),e.encodeData=t};module.exports=B64Encoder;


},{}],27:[function(require,module,exports){
  "use strict";var FlashMBR=function(e,t){var n=e,a=t,i=[],l=function(e){var t,n,l="";for(n=0;n<e.length;n++)t=e[n],"video"===t.type&&(t.label||(t.height?t.label=t.height+"p":t.label=t.bandwidth/1e3+"kbps"),i.push(t),0!==l.length&&(l+=","),t.selected&&(l+="*"),l+=t.label);a.onTrackList(l)},s=function(e){var t=i[e];n.manualSwitchRepresentation(t.type,t.id_aset,t.id_rep)},h=function(){window.sr_request_quality_change=function(e){s(e)}};this.addTrackList=function(e){l(e)},h()};module.exports=FlashMBR;


},{}],28:[function(require,module,exports){
  "use strict";var MediaSourceFlash=require("./MediaSourceFlash"),MediaSourceWrapper=function(e){if("undefined"!=typeof e.video.getSwf)return new MediaSourceFlash(e.video,e);var i;if(null!==window.MediaSource)0,i=new MediaSource;else{if(!(window.webkitMediaSource=window.WebKitMediaSource||window.webkitMediaSource||window.MozMediaSource))throw new Error("Media Source is not supported in this browser");0,i=new webkitMediaSource}return null!==window.URL?e.video.src=window.URL.createObjectURL(i):(window.webkitURL=window.webkitURL||window.WebKitURL)&&(e.video.src=window.webkitURL.createObjectURL(i)),i};module.exports=MediaSourceWrapper;


},{"./MediaSourceFlash":29}],29:[function(require,module,exports){
  "use strict";var SourceBuffer=require("./SourceBuffer"),B64Encoder=require("./B64Encoder"),conf=require("../../../confMedia"),MediaSourceFlash=function(e,r){var n=this,o=e,t=o.getSwf(),u=new B64Encoder,i={OPEN:"open",CLOSED:"closed"},c=i.CLOSED,f=0,d=[],s=[],a=function(e,r){d[e]||(d[e]=[]),d[e].unshift(r)},E=function(e){for(var r=d[e.type]||[],n=r.length;n--;)r[n](e)},S=function(e){var n;return n=new SourceBuffer(e,t,r,u),s.push(n),o.registerSourceBuffer(n),t.addSourceBuffer(e),n},h=function(){o.createSrc(n),setTimeout(function(){c=i.OPEN},100),window.sr_flash_transcodeError=function(e){0,conf.REPORT_ERROR&&window.onPlayerError&&window.onPlayerError(e)}};this.addSourceBuffer=S,this.addEventListener=a,this.trigger=E,Object.defineProperty(this,"readyState",{get:function(){return c},set:void 0}),Object.defineProperty(this,"duration",{get:function(){return f},set:function(e){f=e}}),h()};module.exports=MediaSourceFlash;


},{"../../../confMedia":3,"./B64Encoder":26,"./SourceBuffer":31}],30:[function(require,module,exports){
  "use strict";var SegmentAppender=function(e,n,d){var t,o,s,u=this,p=d,r=e,c=n,f=!1,i=!1,a=!1,g=function(e){if(a=!1,f)0,f=!1,r.segmentFlushed();else{0;var n="undefined"!=typeof s?0:1;c.appendBuffer(e,t,n,o,s)}},m=function(e,n,d,u,c){i?r.segmentFlushed():(t=n,o=d,s=u,0,a=!0,p.encodeData(e,g))},l=function(){};u.appendBuffer=m,u.seeking=function(){a&&(f=!0),i=!0},u.seeked=function(){i=!1},l()};module.exports=SegmentAppender;


},{}],31:[function(require,module,exports){
  "use strict";var CustomTimeRange=require("../CustomTimeRange"),SegmentAppender=require("./SegmentAppender"),SourceBuffer=function(e,t,n,i){var s,o=this,u=[],d=t,r=new SegmentAppender(o,d,i),a=!1,f=e,c=0,p=0,m=-1,g=!1,h=function(){g=!0},l=function(e,t){u[e]||(u[e]=[]),u[e].unshift(t)},b=function(e){for(var t=u[e.type]||[],n=t.length;n--;)t[n](e)},v=function(e){return 0,Math.abs(e-p)>=1&&(0,0,0),Math.abs(e-p)<1},_=function(e,t,n,i){if(a=!0,b({type:"updatestart"}),v(t)||g||"undefined"==typeof t)s=i,r.appendBuffer(e,f,t,n),m=n;else{var o=c===p;0,y(!0)}},T=function(e,t){if(0>e||t==1/0||e>t)throw new Error("Invalid Arguments: cannot call SourceBuffer.remove");a=!0,e>=p||c>=t||(c>=e&&t>=p?p=d.remove(e,t,f):e>c?p=d.remove(e,t,f):c>=e&&(0,c=t)),m=-1,y()},w=function(){var e=[];return p>c&&e.push({start:c,end:p}),new CustomTimeRange(e)},S=function(e,t,i){a=!1,e||0,0,!e&&m>p?(0,p=m,g=!1):e&&(0,t>0&&i>0&&(B(s,t,i),g||(0,n.setCurrentTime(t/1e3)))),b({type:"updateend"})},y=function(e,t,n){0,setTimeout(function(){S(e,t,n)},5)},k=function(e,t){c=e,p=e,f.match(/audio/)&&"undefined"!=typeof t&&(p=t),m=-1},B=n.updateMapPTS.bind(n),C=function(){f.match(/video/)?window.sr_flash_updateend_video=y:f.match(/audio/)?window.sr_flash_updateend_audio=y:f.match(/vnd/)&&(window.sr_flash_updateend_video=y),n.ee.on("trackSwitch",h)};this.appendBuffer=_,this.remove=T,this.addEventListener=l,this.trigger=b,this.seekTime=k,Object.defineProperty(this,"updating",{get:function(){return a},set:void 0}),Object.defineProperty(this,"buffered",{get:w,set:void 0}),this.appendWindowStart=0,this.seeking=function(e,t){k(e,t),r.seeking()},this.seeked=function(){r.seeked()},this.segmentFlushed=function(){y(!0)},Object.defineProperty(this,"isFlash",{get:function(){return!0},set:void 0}),C()};module.exports=SourceBuffer;


},{"../CustomTimeRange":12,"./SegmentAppender":30}],32:[function(require,module,exports){
  "use strict";var conf=require("../../../confMedia"),FlashMBR=require("./FlashMBR"),VideoExtension=function(e,t){var n,i,r,o,s,a=this,u=t,f=[],d=0,c=0,g=2e3,p=[],l=!1,h=function(){return"undefined"!=typeof u},y=!1,v=function(e,t){p[e]||(p[e]=[]),p[e].unshift(t)},m=function(e){for(var t=p[e.type]||[],n=t.length,i="on"+e.type;n--;)t[n](e);a[i]&&"[object Function]"==getClass.call(a[i])&&a[i](e)},w=function(){var t=e.manifestManager.getDuration(0),n=e.getVideoDimensions();u.onMetaData(t,n.width,n.height)},_=function(t){var n,r=t.onMetaData;if("undefined"==typeof r){var o=new FlashMBR(e,u);r=o.addTrackList}n=function(e){r(e),w()},t.onMetaData=n,i=t},k=function(){h()?(c=void 0,u.play()):new Error("Flash video is not initialized")},F=function(){h()?("undefined"==typeof c&&(c=b()),u.pause()):new Error("Flash video is not initialized")},M=function(){h()?u.stop():new Error("Flash video is not initialized")},P=function(e){if(!y){var t,n;if(s=setTimeout(S,5e3),h()){t=j(e),n=O(t),0,a.trigger({type:"seeking"}),y=!0;for(var i=0;i<f.length;i++)f[i].seeking(t,n);r=c=t,u.seek(t)}else new Error("Flash video is not initialized")}},b=function(){return d=u.currentTime()},E=function(){var e=(new Date).getTime();return l?n.duration:"undefined"!=typeof r?r:"undefined"!=typeof c?c:o&&g>e-o?d+(e-o)/1e3:h()?(o=e,b()):0},T=function(){return h()?u.paused():void new Error("Flash video is not initialized")},j=function(t){var n=e.currentTracks.video,i=e.manifestManager.getPartForTime(e.currentPeriod,t,n.id_aset,n.id_rep);return i?i.segment.time:(0,i=e.manifestManager.getBeginningSegment(e.currentPeriod,n.id_aset,n.id_rep),i.segment.time)},O=function(t){var n,i,r=e.currentTracks.audio;if(r)if(n=e.manifestManager.getPartForTime(e.currentPeriod,t,r.id_aset,r.id_rep)){if(n.segment.time<t)return i=e.manifestManager.getNextSegment(n),i.segment.time}else if(E()<.2)return i=e.manifestManager.getBeginningSegment(e.currentPeriod,r.id_aset,r.id_rep),i.segment.time},S=function(){y=!1,r=void 0,clearTimeout(s),a.trigger({type:"seeked"});for(var e=0;e<f.length;e++)f[e].seeked()},B=function(){l=!1,a.trigger({type:"loadstart"})},D=function(){d=b(),c=void 0,l=!1,a.trigger({type:"play"})},x=function(){c=void 0!==c?c:b(),a.trigger({type:"pause"})},z=function(){c=void 0,a.trigger({type:"playing"})},R=function(){c=void 0!==c?c:b()},q=function(){l=!0,a.trigger({type:"ended"})},V=function(){window.sr_request_seek=function(e){P(e)},window.sr_flash_seeked=function(){S()},window.sr_flash_loadstart=function(){B()},window.sr_flash_play=function(){D()},window.sr_flash_pause=function(){x()},window.sr_flash_playing=function(){z()},window.sr_flash_waiting=function(){R()},window.sr_flash_stopped=function(){q()},u.jsReady()};this.createSrc=function(e){n=e},this.play=function(){k()},this.pause=function(){F()},this.stop=function(){M()},Object.defineProperty(this,"currentTime",{get:E,set:function(e){P(e)}}),Object.defineProperty(this,"seeking",{get:function(){return y},set:void 0}),Object.defineProperty(this,"paused",{get:T,set:void 0}),Object.defineProperty(this,"duration",{get:function(){return n.duration},set:void 0}),Object.defineProperty(this,"playbackRate",{get:function(){return 1},set:function(){0}}),Object.defineProperty(this,"event_handlers",{get:function(){return i},set:function(e){_(e)}}),this.addEventListener=function(e,t){v(e,t)},this.trigger=function(e){m(e)},this.dispatchEvent=m,this.registerSourceBuffer=function(e){f.push(e)},this.getSwf=function(){return u},Object.defineProperty(this,"isFlash",{get:function(){return!0},set:void 0}),V()};module.exports=VideoExtension;


},{"../../../confMedia":3,"./FlashMBR":27}],33:[function(require,module,exports){
  "use strict";var conf=require("../../conf"),ChunkDownloadBuffer=function(e){this.p2pDownloader=e,setInterval(this.downloadChunk.bind(this),conf.TIME_BETWEEN_CHUNK_DL),this.chunkRequests=[]};ChunkDownloadBuffer.prototype.downloadChunk=function(){if(this.calculateDownloadRequestSpeed()+conf.NB_CHUNK_DL_GROUP*conf.CHUNK_SIZE/1024<conf.MAX_DL_REQUEST_SPEED)for(var e=0;e<conf.NB_CHUNK_DL_GROUP;e++)this.p2pDownloader.downloadChunk()},ChunkDownloadBuffer.prototype.calculateDownloadRequestSpeed=function(){var e=this.getIndexRequestOneSecondAgo();return e===!1?this.chunkRequests=[]:e>0&&this.chunkRequests.splice(0,e),this.chunkRequests.length*conf.CHUNK_SIZE/1024},ChunkDownloadBuffer.prototype.getIndexRequestOneSecondAgo=function(){for(var e=(new Date).getTime(),n=0;n<this.chunkRequests.length;n++)if(e-this.chunkRequests[n]<=1e3)return n;return!1},ChunkDownloadBuffer.prototype.addChunkRequest=function(){var e=(new Date).getTime();this.chunkRequests.push(e)},module.exports=ChunkDownloadBuffer;


},{"../../conf":2}],34:[function(require,module,exports){
  var Backbone=require("backbone"),_=require("underscore"),status=require("./models/status"),conf=require("../../conf"),PartialSegment=require("./PartialSegment"),ChunkManager=function(t,n,e){this.p2pDownloader=e,this.size=t,this.dataLocked=!1,this.isEmpty=!0,this.calculateChunkNumber(),this.initializeChunkArray_DownloadStatus(),this.nbChunkDownloading=0,_.extend(this,Backbone.Events)};ChunkManager.prototype.calculateChunkNumber=function(){this.chunkNumber=Math.ceil(this.size/conf.CHUNK_SIZE)},ChunkManager.prototype.initializeChunkArray_DownloadStatus=function(){this.downloadStatus=new Array;for(var t=0;t<this.chunkNumber;t++)this.downloadStatus.push("pending");this.size&&(this.segment=new Uint8Array(this.size))},ChunkManager.prototype.addSegmentSize=function(t){this.size||(this.size=t,this.calculateChunkNumber(),this.initializeChunkArray_DownloadStatus())},ChunkManager.prototype.getChunk=function(t){return this.dataLocked||"downloaded"!=this.downloadStatus[t]&&"CDNdownloaded"!=this.downloadStatus[t]?(this.dataLocked&&0,!1):t<this.chunkNumber-1?this.segment.buffer.slice(t*conf.CHUNK_SIZE,(t+1)*conf.CHUNK_SIZE):this.segment.buffer.slice(t*conf.CHUNK_SIZE)},ChunkManager.prototype.getNextChunk=function(){var t=this.nextChunk();return t>=0&&(this.downloadStatus[t]="downloading",this.nbChunkDownloading++),t},ChunkManager.prototype.nextChunk=function(){var t=this.downloadStatus.indexOf("failed");return 0>t&&(t=this.downloadStatus.indexOf("pending")),t},ChunkManager.prototype.chunkDownloaded=function(t,n,e){if(this.isEmpty=!1,"downloaded"===this.downloadStatus[n])this.p2pDownloader.getP2PManager().correctP2PDownloaded(t.byteLength,"PP");else if("CDNdownloaded"===this.downloadStatus[n])this.p2pDownloader.getP2PManager().correctP2PDownloaded(t.byteLength,"CP");else if(n===this.chunkNumber-1&&t.byteLength+n*conf.CHUNK_SIZE>this.size)0,this.p2pDownloader.getP2PManager().correctP2PDownloaded(t.byteLength,"HP");else if("downloading"===this.downloadStatus[n]&&this.nbChunkDownloading--,this.downloadStatus[n]="downloaded",isNaN(t.byteLength)||status.setp2pDownloadedNewAnalytics(status.getp2pDownloadedNewAnalytics()+t.byteLength),0,this.segment.set(new Uint8Array(t),n*conf.CHUNK_SIZE),this.isSegmentDownloaded()){var o=this.segment.buffer;this.trigger("segmentDownloaded",o)}},ChunkManager.prototype.timeOut=function(t,n){"downloading"===this.downloadStatus[t]&&(this.downloadStatus[t]="failed",this.nbChunkDownloading--,0,n.getHeuristic().incrementNbChunkTimeOut()),"downloaded"!==this.downloadStatus[t]&&this.trigger("chunkTimeOut")},ChunkManager.prototype.isSegmentDownloaded=function(){if(this.segmentDownloaded)return!0;if(this.size){for(var t=this.downloadStatus.length-1;t>=0;t--)if("downloaded"!==this.downloadStatus[t]&&"CDNdownloaded"!==this.downloadStatus[t])return!1;return this.segmentDownloaded=!0,!0}return!1},ChunkManager.prototype.getBiggestSegment=function(t){if(this.size&&!this.isEmpty){var n=this.partialSegment||new PartialSegment(this.p2pDownloader.getP2PManager(),t,this.segment,this.downloadStatus,this.size,this,this.isSegmentDownloaded());return this.dataLocked||(this.partialSegment=n),n}return!1},ChunkManager.prototype.getIndexLastChunkInARow=function(){for(var t=0;t<this.downloadStatus.length;t++)if("downloaded"!==this.downloadStatus[t]&&"CDNdownloaded"!==this.downloadStatus[t])return t-1;return this.downloadStatus.length-1},ChunkManager.prototype.storeSegment=function(t){var n;this.isEmpty=!1,this.size||this.addSegmentSize(t.byteLength),n={start:0,end:this.chunkNumber},this.partialSegment&&this.partialSegment.getCDNIndexRange()&&(n=this.partialSegment.getCDNIndexRange()),this.segment=new Uint8Array(t),this.segmentDownloaded=!0;for(var e=n.start;e<n.end;e++){if("downloaded"===this.downloadStatus[e]||"CDNdownloaded"===this.downloadStatus[e]){var o=conf.CHUNK_SIZE;e===this.chunkNumber-1&&(o=this.size-(this.chunkNumber-1)*conf.CHUNK_SIZE),"downloaded"===this.downloadStatus[e]?this.p2pDownloader.getP2PManager().correctP2PDownloaded(o,"PC"):"CDNdownloaded"===this.downloadStatus[e]&&this.p2pDownloader.getP2PManager().correctP2PDownloaded(o,"CC")}"downloading"===this.downloadStatus[e]&&this.nbChunkDownloading--,this.downloadStatus[e]="CDNdownloaded"}},ChunkManager.prototype.getP2PDownload_CDNDownload=function(){var t=0,n=0;if(this.size){for(var e=0,o=this.downloadStatus.length-1;o>e;e++)"downloaded"===this.downloadStatus[e]?t+=conf.CHUNK_SIZE:"CDNdownloaded"===this.downloadStatus[e]&&(n+=conf.CHUNK_SIZE);var a=this.size-(this.chunkNumber-1)*conf.CHUNK_SIZE;"downloaded"===this.downloadStatus[this.chunkNumber-1]?t+=a:"CDNdownloaded"===this.downloadStatus[this.chunkNumber-1]&&(n+=a)}return{p2pDownloaded:t,cdnDownloaded:n}},ChunkManager.prototype.lockSegmentData=function(){this.dataLocked=!0},ChunkManager.prototype.unlockSegmentData=function(){this.dataLocked=!1},ChunkManager.prototype.clearSegment=function(){delete this.segment,delete this.downloadStatus},module.exports=ChunkManager;


},{"../../conf":2,"./PartialSegment":40,"./models/status":57,"backbone":62,"underscore":265}],35:[function(require,module,exports){
  "use strict";var FakePartialSegment=function(e,n){function t(e){return function(n,t){e(n,t)}}var r,i,u=function(){i=e.segmentMaping(n),i.segment=e.getSegment(i)},o=function(e){var n=new Uint8Array(e);return n.buffer};this.getUpdatedRange=function(e){return e},this.getFullSegment=function(e,n){var r=e.response;e.response=o(r),t(n)(e,i)},this.getCDNIndexRange=function(){return r},this.isComplete=function(){return!1},this.isLocked=function(){return!1},u()};module.exports=FakePartialSegment;


},{}],36:[function(require,module,exports){
  var Backbone=require("backbone"),_=require("underscore"),ChunkDownloadBuffer=require("./ChunkDownloadBuffer"),UploadQueue=require("./UploadQueue"),SegmentRequestQueue=require("./SegmentRequestQueue"),conf=require("../../conf"),SegmentHandler=require("./SegmentHandler"),EventEmitter=require("eventemitter3"),P2PDownloader=function(e,n){var t=this,r=0,d=[],i=n,a=new ChunkDownloadBuffer(t),o=new UploadQueue(t),g=new SegmentRequestQueue(t),u=new EventEmitter,s=function(){_.extend(t,Backbone.Events),e.getEE().on("chunkReceived",m,t),e.getEE().on("segmentRequested",k,t),e.getEE().on("hasSegment",S,t),e.getEE().on("chunkRequested",l,t),e.getEE().on("peerDestroyed",N,t)},c=function(e,n,t,r,d){var a=I(e,n,t,r,d.byteLength),o=a.chunkManager;a.isNew&&u.emit("newChunkManager",o,e,n,t,r),o.storeSegment(d);var s=i.p2pInterface.getSegmentHash({id_period:e,id_aset:n,id_rep:t,idPiece:r});g.answerRequests({id_period:e,id_aset:n,id_rep:t,idPiece:r},d.byteLength,o.chunkNumber,s)},h=function(n){var t=I(n.id_period,n.id_aset,n.id_rep,n.idPiece,n.segment.size,n.segment.duration),r=t.chunkManager;t.isNew&&(u.emit("newChunkManager",r,n.id_period,n.id_aset,n.id_rep,n.idPiece),M(r,n)),_.forEach(_.filter(e.getPeerArray(),function(e){var t=e.getAsetId()==n.id_aset,r=e.getPeriodId()==n.id_period,d=e.getRepId()==n.id_rep;return t&&r&&d}),function(e){e.requestHasSegment(n.idPiece)})},f=function(){var e,n,t,r,d,o=i.ongoingSegments.slice(0).splice(0,conf.NB_SEGMENT_P2P_PREBUFFER);for(n=0;n<o.length;n++)if(e=o[n],e.chunkManagerAndSeeders=e.chunkManagerAndSeeders?e.chunkManagerAndSeeders:D(e.id_period,e.id_aset,e.id_rep,e.idPiece),d=e.chunkManagerAndSeeders,d&&(t=d.seeds.getNextSeed(e.chunkManagerAndSeeders.chunkManager.chunkNumber),t&&(r=d.chunkManager.getNextChunk(),r>=0)))return t.requestChunk(e.idPiece,r),a.addChunkRequest(),void p(r,t,d.chunkManager)},p=function(e,n,r){setTimeout(_.bind(function(){r.timeOut(e,n)},t),conf.CHUNK_TIMEOUT)},S=function(e,n,t,r,d){if(i.p2pInterface.setSegmentSize(e.getPeriodId(),e.getAsetId(),e.getRepId(),n,t,d),i.isSegmentRequested(e.getPeriodId(),e.getAsetId(),e.getRepId(),n)){var a=D(e.getPeriodId(),e.getAsetId(),e.getRepId(),n);a&&(a.chunkManager.addSegmentSize(t),a.seeds.insertSeeder(e))}},m=function(e,n,t,d){r--;var a=D(e.getPeriodId(),e.getAsetId(),e.getRepId(),n).chunkManager;a?a.chunkDownloaded(d,t,e):i.correctP2PDownloaded(d.byteLength,"M"),e.getHeuristic().incrementNbChunkDownloaded()},k=function(e,n){var t=D(e.getPeriodId(),e.getAsetId(),e.getRepId(),n).chunkManager,r={id_period:e.getPeriodId(),id_aset:e.getAsetId(),id_rep:e.getRepId(),idPiece:n};if(t){var d=t.size,a=t.getIndexLastChunkInARow(),o=i.p2pInterface.getSegmentHash(r);if(a>-1)return void e.hasSegment(n,d,a,o)}g.queue(e,n)},l=function(e,n,t){var r=(new Date).getTime(),d=D(e.getPeriodId(),e.getAsetId(),e.getRepId(),n).chunkManager;if(d){var i=d.getChunk(t);i&&o.add(e,n,t,i,r)}},P=function(e){var n=D(e.id_period,e.id_aset,e.id_rep,e.idPiece).chunkManager;return n?n.getBiggestSegment(e):!1},E=function(e,n,t,r){for(var i,a,o=0;a=d[o];o++)if(a.getId_period()==e&&a.getId_aset()==n&&a.getId_rep()==t&&a.getId_segment()==r)return i=a;return!1},I=function(e,n,r,i,a,o){var g=E(e,n,r,i);if(g===!1){var u=new SegmentHandler(e,n,r,i,a,o,t);return d.push(u),H(),{chunkManager:u.getChunkManager(),isNew:!0}}return{chunkManager:g.getChunkManager(),isNew:!1}},M=function(e,n){e.on("segmentDownloaded",_.bind(function(t){var r=E(n.id_period,n.id_aset,n.id_rep,n.idPiece);r.getSeeders().cleanAfterDownloaded(),conf.SEGMENTS_HASH_CHECK?(e.lockSegmentData(),i.p2pInterface.checkHashP2P(e,n,t)):w(e,n,t)},t))},w=function(e,n,t){e.unlockSegmentData(),g.answerRequests(n,t.byteLength,e.chunkNumber,n.segment.hash),u.emit("segmentDownloaded",n,t)},v=function(e){0,0,C(e),i.correctP2PDownloaded(e.segment.size,"HP")},C=function(e){var n=E(e.id_period,e.id_aset,e.id_rep,e.idPiece),t=d.indexOf(n);d.splice(t,1)},D=function(e,n,t,r){var d=E(e,n,t,r);return d!==!1?{chunkManager:d.getChunkManager(),seeds:d.getSeeders()}:!1},R=function(){var e=0,n=0;return _.each(d,function(t){var r=t.getChunkManager().getP2PDownload_CDNDownload();e+=r.p2pDownloaded,n+=r.cdnDownloaded},t),{p2pDownloaded:e,cdnDownloaded:n}},A=function(){u.emit("uploadSaturated")},H=function(){for(var e=0,n=i.p2pInterface.isLive()?conf.LIVE.P2P_CACHE_MAX_SIZE:conf.P2P_CACHE_MAX_SIZE,t=0;t<d.length;t++)d[t].getChunkManager().size&&(e+=d[t].getChunkManager().size);e>n&&(u.emit("segmentRemoved",d[0]),d[0].getChunkManager().clearSegment(),delete d[0],d.splice(0,1))},N=function(e){for(var n,t,r=0;r<i.ongoingSegments.length;r++)n=i.ongoingSegments[r],t=E(n.id_period,n.id_aset,n.id_rep,n.idPiece),t&&t.getSeeders().removeSeeder(e);g.removePeerRequests(e)};t.getP2PManager=function(){return i},t.fillSegment=c,t.startDownloadSegment=h,t.downloadChunk=f,t.getBiggestStartingPartInSegment=P,t.hashVerified=w,t.wrongHash=v,t.removeChunkManager=C,t.getChunkManagerAndSeeders=D,t.doubleCheckP2PDownload_CDNDownload=R,t.uploadSaturated=A,t.getEE=function(){return u},s()};module.exports=P2PDownloader;


},{"../../conf":2,"./ChunkDownloadBuffer":33,"./SegmentHandler":43,"./SegmentRequestQueue":44,"./UploadQueue":47,"backbone":62,"eventemitter3":110,"underscore":265}],37:[function(require,module,exports){
  "use strict";var VideoAnalytics=require("../analytics/VideoAnalytics"),P2PInterface=function(e,t,i){var n,r=null;VideoAnalytics.fake||(n=new VideoAnalytics(e,i)),this.p2pMapController=t,this.setSegmentHasher=function(e){r=e},this.getSegmentHasher=function(){return r},this.getCurrentTime=function(){return e.getCurrentTime()},this.setCurrentTime=function(t){"function"==typeof e.setCurrentTime&&e.setCurrentTime(t)},this.addVideoEventListener=function(t,i){e.addVideoEventListener(t,i)},this.isLive=function(){return t.isLive()},this.hasSegmentHashes=function(e,i,n){return t.hasSegmentHashes(e,i,n)},this.getSegmentHash=function(e){return t.getSegmentHash(e)},this.updateMapWithSegmentsHashes=function(e){return t.updateMapWithSegmentsHashes(e)},this.getMap=function(){return t.getMap()},this.getMpdUrl=function(){return i},this.getOffsetedPlaybackTime=function(){return this.getCurrentTime()+e.getPlaybackOffset()},this.getPieceInfos=function(e){return t.getPieceInfos(e)},this.setSegmentSize=function(e,i,n,r,s,u){t.setSegmentSize(e,i,n,r,s,u)},this.checkHashP2P=function(e,t,i){r.checkHashP2P(e,t,i)},this.areBuffersInitialized=function(){return!e.areBuffersInitialized||e.areBuffersInitialized()},this.getBufferedTracks=function(){for(var t,i=e.getBuffered(),n=[],r=0;t=i[r];r++)n.push({buffered:t.buffered,id_aset:t.asetId,id_rep:t.repId,id_period:t.periodId,bufferedStrict:t.bufferedStrict});return n},this.getTracks=function(){for(var t,i=e.getBuffered(),n=[],r=0;t=i[r];r++)n.push({id_aset:t.asetId,id_rep:t.repId,id_period:t.periodId});return n},this.setBufferMarginLive=function(t,i){e.setBufferMarginLive(t,i)},this.isFake=function(){n.isFake()},this.setPeerPoolListeners=function(e){n.setPeerPoolListeners(e)},this.setP2PDownloaderListeners=function(e){n.setP2PDownloaderListeners(e)}};module.exports=P2PInterface;


},{"../analytics/VideoAnalytics":4}],38:[function(require,module,exports){
  var $=require("jquery"),Backbone=require("backbone");Backbone.$=$;var _=require("underscore"),TrackerManager=require("./TrackerManager"),DisplayManager=require("./display/DisplayManager"),DisplayInterface=require("./display/DisplayInterface"),status=require("./models/status"),PeerPool=require("./collection/peers"),P2PDownloader=require("./P2PDownloader"),conf=require("../../conf"),EventEmitter=require("eventemitter3"),P2PManager=function(e,t){this.p2pInterface=e,this.trackerURL=t,this.trackerManager=new TrackerManager(this.p2pInterface,this.trackerURL),this.peerPool=new PeerPool({TrackerManager:this.trackerManager}),this.maxNumberOfSlots=6,this.p2pDownloader=new P2PDownloader(this.peerPool,this),this.p2pDownloader.getEE().on("segmentDownloaded",_.bind(this.setPieceDownloaded,this)),"undefined"==typeof this.p2pInterface.isFake()&&(this.p2pInterface.setPeerPoolListeners(this.peerPool),this.p2pInterface.setP2PDownloaderListeners(this.p2pDownloader)),this.p2pInterface.addVideoEventListener("seeked",this.onSeeked.bind(this)),_.extend(this,Backbone.Events),this.ongoingSegments=[],this.addFirstOngoingSegments=!1,this.doubleCheckP2PDownload_CDNDownload()};P2PManager.prototype.startDisplayManager=function(){this.p2pInterface.areBuffersInitialized()?(!DisplayManager.fake&&conf.LOGGERMANAGER.DISPLAY&&DisplayManager.start(this),conf.DEBUG&&(this.displayInterface=new DisplayInterface(this))):setTimeout(this.startDisplayManager.bind(this),300)},P2PManager.prototype.fillSegment=function(e,t){this.updateStatusCurrentSegment(e),this.p2pDownloader.fillSegment(e.id_period,e.id_aset,e.id_rep,e.idPiece,t)},P2PManager.prototype.isSegmentRequested=function(e,t,n,s){var i={id_period:e,id_aset:t,id_rep:n,idPiece:s},o=_.where(this.ongoingSegments,i);return o.length?!0:!1},P2PManager.prototype.onSeeked=function(){var e,t,n,s=this.p2pInterface.getBufferedTracks(),i=this.p2pInterface.getCurrentTime();for(t=0;t<s.length;t++)for(n=0;n<s[t].buffered.length;n++)s[t].buffered.start(n)<=i&&i<=s[t].buffered.end(n)&&(e=e?Math.min(e,s[t].buffered.end(n)):s[t].buffered.end(n));e||(e=i),this.ongoingSegments=[],this.addFirstOngoingSegments=!1,this.setOngoingSegments(this.p2pInterface.getMap(),e),0},P2PManager.prototype.setOngoingSegments=function(e,t){for(var n,s,i,o=this,a=0,r=0,g=[],d=!1,p=0,P=o.p2pInterface.getTracks(),c=!0,h=0;h<P.length;h++)c&=o.p2pInterface.hasSegmentHashes(status.getPeriod(),P[h].id_aset,P[h].id_rep);if(!conf.SEGMENTS_HASH_CHECK||c||conf.PROPAGATE_SEGMENT_HASHES){for(a=0;a<e.periods.length;a++){for(o.addFirstOngoingSegments||(r=conf.NB_SEGMENT_P2P_SKIP,o.addFirstOngoingSegments=!0),p=0;p<P.length;p++)g[p]=r;for(;!d;){for(n=1/0,s=-1,p=0;p<P.length;p++)g[p]<e.periods[a].asets[P[p].id_aset].reps[P[p].id_rep].segments.length&&e.periods[a].asets[P[p].id_aset].reps[P[p].id_rep].segments[g[p]].time<n&&(s=p,n=e.periods[a].asets[P[p].id_aset].reps[P[p].id_rep].segments[g[p]].time);if(s>-1){if(i=e.periods[a].asets[P[s].id_aset].reps[P[s].id_rep].segments[g[s]],!t||t&&i.time>=t){var l={id_period:a,id_aset:P[s].id_aset,id_rep:P[s].id_rep,idPiece:i.id,segment:i,id_buffer:s};o.ongoingSegments.push(l)}g[s]+=1}else d=!0}}o.activateP2POngoingSegments()}else 0,o.trackerManager.on("gotSegmentsHashes",o.onSeeked.bind(o))},P2PManager.prototype.onTrackSwitch=function(e,t,n){var s,i,o,a,r,g,d;if(this.peerPool.onTrackSwitch(e),t===e){for(s=0;s<this.ongoingSegments.length;s++)if(this.ongoingSegments[s].id_aset===t){if(o={id_period:this.ongoingSegments[s].id_period,id_aset:t,id_rep:n,idPiece:this.ongoingSegments[s].idPiece,id_buffer:this.ongoingSegments[s].id_buffer},a=this.p2pInterface.getMap().periods[this.ongoingSegments[s].id_period].asets[t].reps[n].segments,this.p2pInterface.isLive()){for(i=0;i<a.length;i++)if(a[i].id===this.ongoingSegments[s].idPiece){o.segment=a[i];break}}else o.segment=a[this.ongoingSegments[s].idPiece];o.segment?this.ongoingSegments.splice(s,1,o):0}}else{for(r=this.p2pInterface.getBufferedTracks(),g=this.p2pInterface.getCurrentTime(),s=0;s<r.length;s++)for(i=0;i<r[s].buffered.length;i++)r[s].buffered.start(i)<=g&&g<=r[s].buffered.end(i)&&(d=d?Math.min(d,r[s].buffered.end(i)):r[s].buffered.end(i));d||(d=g),this.ongoingSegments=[],this.setOngoingSegments(this.p2pInterface.getMap(),d)}this.trigger("repSwitched",e,t,n)},P2PManager.prototype.activateP2POngoingSegments=function(){if(this.ongoingSegments.length)for(var e=Math.min(conf.NB_SEGMENT_P2P_PREBUFFER,this.ongoingSegments.length),t=this.ongoingSegments[0].idPiece,n=0;e>n;n++){if(this.ongoingSegments[n].chunkManager=this.ongoingSegments[n].chunkManager?this.ongoingSegments[n].chunkManager:this.p2pDownloader.getChunkManagerAndSeeders(this.ongoingSegments[n].id_period,this.ongoingSegments[n].id_aset,this.ongoingSegments[n].id_rep,this.ongoingSegments[n].idPiece).chunkManager,this.ongoingSegments[n].chunkManager&&this.ongoingSegments[n].chunkManager.isSegmentDownloaded()){this.removeSegmentFromOngoing(void 0,n);break}this.ongoingSegments[n].p2pActivated||(this.canStartDownloadingSegment(this.ongoingSegments[n])?(this.p2pInterface.isLive()||this.ongoingSegments[n].idPiece-t<=conf.NB_SEGMENT_P2P_PREBUFFER)&&(this.p2pDownloader.startDownloadSegment(this.ongoingSegments[n]),this.ongoingSegments[n].p2pActivated=!0):setTimeout(this.activateP2POngoingSegments.bind(this),conf.RETRY_P2P_START_DL_SEGMENT_DELAY))}},P2PManager.prototype.canStartDownloadingSegment=function(e){var t,n=this.p2pInterface.getPieceInfos(e);return n?t=this.p2pInterface.getPieceInfos(e).time-this.p2pInterface.getCurrentTime()<conf.MAX_P2P_PREBUFFERING_TIME||this.p2pInterface.isLive()&&0===this.p2pInterface.getCurrentTime():(0,this.removeSegmentFromOngoing(e),t=!1),t},P2PManager.prototype.removeSegmentFromOngoing=function(e,t){if(t||0===t)this.ongoingSegments.splice(t,1);else{var n=_.where(this.ongoingSegments,{id_period:e.id_period,id_aset:e.id_aset,id_rep:e.id_rep,idPiece:e.idPiece});n.length&&this.ongoingSegments.splice(this.ongoingSegments.indexOf(n[0]),1)}this.activateP2POngoingSegments()},P2PManager.prototype.setPieceDownloaded=function(e){this.trigger("piece_downloaded_p2pm",e),this.removeSegmentFromOngoing(e),this.updateStatusCurrentSegment(e)},P2PManager.prototype.getBiggestStartingPartInSegment=function(e){return this.p2pDownloader.getBiggestStartingPartInSegment(e)},P2PManager.prototype.correctP2PDownloaded=function(e,t){isNaN(e)||("PP"===t?(status.setDataDownloadedTwice_PP(status.getDataDownloadedTwice_PP()+e),status.setP2PDownloaded(status.getP2PDownloaded()-e)):"PC"===t?(status.setDataDownloadedTwice_PC(status.getDataDownloadedTwice_PC()+e),status.setP2PDownloaded(status.getP2PDownloaded()-e),status.setp2pDownloadedNewAnalytics(status.getp2pDownloadedNewAnalytics()-e),0):"CP"===t?(status.setDataDownloadedTwice_CP(status.getDataDownloadedTwice_CP()+e),status.setP2PDownloaded(status.getP2PDownloaded()-e)):"CC"===t?status.setDataDownloadedTwice_CC(status.getDataDownloadedTwice_CC()+e):"HP"===t?(status.setDataDownloadedTwice_HP(status.getDataDownloadedTwice_HP()+e),status.setP2PDownloaded(status.getP2PDownloaded()-e)):"HD"===t?(status.setDataDownloadedTwice_HD(status.getDataDownloadedTwice_HD()+e),status.setP2PDownloaded(status.getP2PDownloaded()-e)):"M"===t&&(status.setDataDownloadedTwice_M(status.getDataDownloadedTwice_M()+e),status.setP2PDownloaded(status.getP2PDownloaded()-e)))},P2PManager.prototype.doubleCheckP2PDownload_CDNDownload=function(){var e=this.p2pDownloader.doubleCheckP2PDownload_CDNDownload();status.setCDNDoubleCheck(e.cdnDownloaded),status.setP2PDoubleCheck(e.p2pDownloaded),setTimeout(_.bind(this.doubleCheckP2PDownload_CDNDownload,this),1e4)},P2PManager.prototype.updateStatusCurrentSegment=function(e){for(var t=status.getTobuffer(),n=0;n<t.length;n++)t[n].asetId===e.id_aset&&t[n].representationId===e.id_rep&&(t[n].currentSegment=e.idPiece,t[n].currentTime=e.segment.time);status.setTobuffer(t)},module.exports=P2PManager;


},{"../../conf":2,"./P2PDownloader":36,"./TrackerManager":46,"./collection/peers":49,"./display/DisplayInterface":50,"./display/DisplayManager":51,"./models/status":57,"backbone":62,"eventemitter3":110,"jquery":111,"underscore":265}],39:[function(require,module,exports){
  var _=require("underscore"),conf=require("../../conf"),utils=require("../utils"),crypto=require("crypto"),url=require("url"),P2PMapController=function(e){var s,t,r,i=function(){M()},n=function(e){s=o(e)},o=function(e){return JSON.parse(JSON.stringify(e))},a=function(e){var s=JSON.parse(JSON.stringify(e));return s},d=function(e){var t={periods:[]};if(!s)return n(e),void(r=s);e=o(e);for(var i,a=0;i=s.periods[a];a++)for(var d,h=0;d=i.asets[h];h++)for(var u,g=0;u=d.reps[g];g++){p(t,a,h,g);for(var f=e.periods[a].asets[h].reps[g].segments,m=u.segments.length,c=0;m>c&&u.segments[0].id!==f[0].id;c++)u.segments.splice(0,1);m=u.segments.length;for(var l=0;m>l;l++)l<f.length&&u.segments[l].id===f[l].id&&(u.segments[l].time=f[l].time);for(var v=f.length,S=0;v>S;S++)if(!u.segments[S]){var _=f[S];u.segments.push(_),t.periods[a].asets[h].reps[g].segments.push(_)}}r=t},p=function(e,s,t,r){e.periods[s]||(e.periods[s]={asets:[],id_period:s}),e.periods[s].asets[t]||(e.periods[s].asets[t]={reps:[],id_aset:t}),e.periods[s].asets[t].reps[r]||(e.periods[s].asets[t].reps[r]={segments:[],id_rep:r})},h=function(e){return _.where(s.periods[e.id_period].asets[e.id_aset].reps[e.id_rep].segments,{id:e.idPiece})[0]},u=function(){var e=s.isLive;return"undefined"==typeof e?void 0:e},g=function(e,t,r){return!!s.periods[e].asets[t].reps[r].hasSegmentHashes},f=function(e){var s=h(e);return s?s.hash?s.hash:!1:(0,!1)},m=function(e,s){var t=h(e);t&&(t.hash=s)},c=function(e){for(var t=e.period,r=e.asetId,i=e.representationId,n=e.segmentsHashes,o=e.segmentsSizes,a=0;a<e.segmentsHashes.length;a++)s.periods[t].asets[r].reps[i].segments[a].hash=n[a];if(o)for(var d=0;d<e.segmentsHashes.length;d++)s.periods[t].asets[r].reps[i].segments[d].size_fromTracker=o[d];s.periods[t].asets[r].reps[i].hasSegmentHashes=!0},l=function(){return s},v=function(){return r},S=function(e){var t=h(e);return t?{url:t.url||s.periods[e.id_period].asets[e.id_aset].reps[e.id_rep].url,range:t.size&&t.offset&&{start:t.offset,end:t.offset+t.size-1}||null,downloading:t.downloading,downloaded:t.downloaded,size:t.size||null,time:t.time}:(0,!1)},H=function(){return t},M=function(){var s=url.parse(e,!0,!0);t=crypto.createHash("md5").update('"'+s.host+s.pathname+'"').digest("hex")},z=function(e,s,t,r,i,n){var o=h({id_period:e,id_aset:s,id_rep:t,idPiece:r});o&&(o.size||(o.size=i,0),n&&!o.hash&&conf.PROPAGATE_SEGMENT_HASHES&&(o.hash=n))};this.updateMap=d,this.segmentMaping=a,this.getSegment=h,this.isLive=u,this.hasSegmentHashes=g,this.getSegmentHash=f,this.setSegmentHash=m,this.updateMapWithSegmentsHashes=c,this.getMap=l,this.getMapWithNewSegments=v,this.getMpdHash=H,this.getPieceInfos=S,this.setSegmentSize=z,i()};module.exports=P2PMapController;


},{"../../conf":2,"../utils":60,"crypto":82,"underscore":265,"url":266}],40:[function(require,module,exports){
  "use strict";var conf=require("../../conf"),status=require("./models/status"),PartialSegment=function(e,t,n,o,r,a,s){function i(t){return function(n,o){g=n.response,e.fillSegment(o,n.response),e.trigger("piece_downloaded_prtl",o),l=!1,a&&a.unlockSegmentData(),t(n,o)}}function c(t){return function(n,o){status.setCdnDataDiscarded(status.getCdnDataDiscarded()+h),e.p2pDownloader.removeChunkManager(o),e.correctP2PDownloaded(u,"HD"),t(n,o)}}var d,u,f,l,g,p,S,h=0,C=function(){var e;for(u=0,e=0;e<p.length;e++)"downloaded"===p[e]&&(u+=e<p.length-1?conf.CHUNK_SIZE:r-(p.length-1)*conf.CHUNK_SIZE)},H=function(){var e=0;for(e=0;e<p.length;e++)if("downloaded"!==p[e]&&"CDNdownloaded"!==p[e])return e},D=function(){var e=0;for(e=p.length-1;e>=0;e--)if("downloaded"!==p[e]&&"CDNdownloaded"!==p[e])return e+1},m=function(e){var t,n,o=H(),r=D();return void 0!==o&&void 0!==r?(t=e?e.start+o*conf.CHUNK_SIZE:o*conf.CHUNK_SIZE,r===p.length&&e?n=e.end:r<p.length&&(n=e?e.start+r*conf.CHUNK_SIZE-1:r*conf.CHUNK_SIZE-1),d={start:o,end:r},{start:t,end:n}):e?e:void 0},E=function(){g=n?n.buffer.slice():[],p=o?o.slice():[],C(),f=s,S=e.p2pInterface.p2pMapController.segmentMaping(t),S.segment=e.p2pInterface.p2pMapController.getSegment(S)},N=function(e){var t;return void 0!==d&&void 0!==g?(t=new Uint8Array(g),t.set(new Uint8Array(e),d.start*conf.CHUNK_SIZE)):t=new Uint8Array(e),t.buffer},_=function(e){status.setCDNDownloaded(status.getCDNDownloaded()+e.byteLength)};this.getUpdatedRange=function(e){return m(e)},this.getFullSegment=function(t,n,o){if(t.p2pMeanThroughput=status.computeP2PThroughput(),this.isComplete())t.response=g,n(t,null);else{e.trigger("CDNSegmentDownloaded",S);var r=t.response;_(r),h=r.byteLength,t.response=N(r),0!==u&&conf.SEGMENTS_HASH_CHECK?(l=!0,a.lockSegmentData(),e.p2pInterface.getSegmentHasher().checkHashDLM(t,S,i(n),c(o))):conf.SEGMENTS_HASH_CHECK&&conf.PROPAGATE_SEGMENT_HASHES?e.p2pInterface.getSegmentHasher().createHash(t,S,i(n)):i(n)(t,S)}},this.getCDNIndexRange=function(){return d},this.isComplete=function(){return f},this.isLocked=function(){return a&&a.dataLocked},E()};module.exports=PartialSegment;


},{"../../conf":2,"./models/status":57}],41:[function(require,module,exports){
  "use strict";var P2PInterface=require("./P2PInterface"),P2PMapController=require("./P2PMapController"),P2PManager=require("./P2PManager"),SegmentHasher=require("../security/SegmentHasher"),PartialSegment=require("./PartialSegment"),FakePartialSegment=require("./FakePartialSegment"),status=require("./models/status"),conf=require("../../conf"),SRModule=function(e,n,t,a){var r,o,i,d,s,c,u=t,f=a,P=!1,l={},g=function(e){if(e.P2P_CACHE_MAX_SIZE&&(conf.P2P_CACHE_MAX_SIZE=e.P2P_CACHE_MAX_SIZE),void 0!==e.ALLOW_P2P&&(conf.ALLOW_P2P=e.ALLOW_P2P),void 0!==e.DEBUG&&(conf.DEBUG=e.DEBUG),(e.TRACKER_URL||!conf.ALLOW_P2P)&&(conf.TRACKER_URL=e.TRACKER_URL),!e.ID_CLIENT)throw new Error("There must be a client ID in the option object");conf.ID_CLIENT=e.ID_CLIENT},_=function(e){e.MIN_BUFFER_LEVEL=conf.MIN_BUFFER_LEVEL,e.MAX_BUFFER_LEVEL=conf.MAX_BUFFER_LEVEL,e.ABR_DEL_T=conf.ABR_DEL_T},p=function(e){var n=e.map(function(e){return{type:e.type,asetId:e.asetId,representationId:e.repId,bufferLevelMax:e.bufferLevelMax}}),t=status.getTobuffer(),a=[];if(0,t)for(var r=0;r<n.length;r++)for(var o=0;o<t.length;o++)t[o].type===n[r].type&&(a.push({id_aset:n[r].asetId,id_rep:n[r].representationId,id_aset_from:t[o].asetId}),t[o].asetId!==n[r].asetId&&status.setAsetIdUpdate(n[r].asetId),t[o].asetId=n[r].asetId,t[o].representationId=n[r].representationId,t[o].bufferLevelMax=n[r].bufferLevelMax);else{for(var i=0;i<n.length;i++)n[i].currentSegment=-1;t=n}return status.setTobuffer(t,!1,!0),a},C=function(e,n){status.setMPD(n),status.setPeriod(e)},E=function(e,n){var t=r.getMpdHash(),a=p(n);C(e,t);for(var o,d=0;o=a[d];d++)i.onTrackSwitch(o.id_aset_from,o.id_aset,o.id_rep);c&&I()},L=function(e){r.updateMap(e),s&&(i.startDisplayManager(),status.getTobuffer()?I():c=!0)},I=function(){var e=r.getMapWithNewSegments();i.setOngoingSegments(e),c=!1},M=function(e){status.setCdnCancelled(status.getCdnCancelled()+e)},m=function(e){return function(){l[e]=arguments}},S=function(){l.onMapUpdate&&L.apply(void 0,l.onMapUpdate),l.cdnCancelled&&M.apply(void 0,l.cdnCancelled),l.onTrackChange&&E.apply(void 0,l.onTrackChange)},v=function(){e.addEventListener("onMapUpdate",L),e.addEventListener("cdnCancelled",M),r=new P2PMapController(n);var t=window.RTCPeerConnection||window.webkitPeerConnection00||window.webkitRTCPeerConnection||window.mozRTCPeerConnection;s=t&&conf.ALLOW_P2P,s&&(e.addEventListener("onTrackChange",E),o=new P2PInterface(e,r,n),i=new P2PManager(o,conf.TRACKER_URL),d=new SegmentHasher(i),o.setSegmentHasher(d)),S(),P=!0},w=function(){e.addEventListener("onMapUpdate",m("onMapUpdate")),e.addEventListener("cdnCancelled",m("cdnCancelled")),e.addEventListener("onTrackChange",m("onTrackChange")),g(u),_(f)};this.getP2PData=function(e){var n;return P?s?(i.removeSegmentFromOngoing(e),n=i.getBiggestStartingPartInSegment(e)||new PartialSegment(i,e)):n=new FakePartialSegment(r,e):(v(),n=new FakePartialSegment(r,e)),n},w()};window.Streamroot=window.Streamroot||{},window.Streamroot.SRModule=SRModule,module.exports=SRModule;


},{"../../conf":2,"../security/SegmentHasher":59,"./FakePartialSegment":35,"./P2PInterface":37,"./P2PManager":38,"./P2PMapController":39,"./PartialSegment":40,"./models/status":57}],42:[function(require,module,exports){
  "use strict";var _=require("underscore"),conf=require("../../conf"),Seeders=function(){var e=[],t=0,r=function(t){for(var r=0;r<e.length;){if(e[r].getHeuristic().getHeuristicScore()<=t.getHeuristic().getHeuristicScore())return void e.splice(r,0,t);r++}e.push(t)},i=function(t){e=_.reject(e,function(e){return e===t})},n=function(){for(var t=0,r=0;r<e.length;r++)t+=e[r].getHeuristic().getHeuristicScore();return t},u=function(r){var i,u=Math.floor(Math.random()*e.length);switch(t){case 0:if(0!==e.length){i=e[u];for(var c=0;c<e.length;c++)if(e[c].getHeuristic().getNbChunkRequested()/e[c].getHeuristic().getHeuristicScore()<=e[e.length-1].getHeuristic().getNbChunkRequested()/e[e.length-1].getHeuristic().getHeuristicScore()&&e[c].canBeAskedChunk()){i=e[c];break}}break;case 1:if(0!==e.length){i=e[u];for(var c=0;c<e.length;c++)if(Math.random()<=e[c].getHeuristic().getHeuristicScore()&&e[c].canBeAskedChunk()){i=e[c];break}}break;case 2:if(0!==e.length){i=e[u];for(var c=0;c<e.length;c++)if(e[c].getHeuristic().getNbChunkRequested()<=Math.floor(e[c].getHeuristic().getHeuristicScore()/n()*r+1)&&e[c].canBeAskedChunk()){i=e[c];break}}break;case 3:if(0!==e.length){i=e[u];for(var c=0;c<e.length;c++)if(e[c].getHeuristic().getNbChunkRequested()/e[c].getHeuristic().getHeuristicScore()<=e[c+1].getHeuristic().getNbChunkRequested()/e[c+1].getHeuristic().getHeuristicScore()&&e[c].canBeAskedChunk()){i=e[c];break}}break;default:i=!1}return i},c=function(){e=[]};this.getNextSeed=function(e){return u(e)},this.getVerifiedSeeders=function(){return e},this.insertSeeder=function(e){r(e)},this.removeSeeder=function(e){i(e)},this.cleanAfterDownloaded=function(){c()}};module.exports=Seeders;


},{"../../conf":2,"underscore":265}],43:[function(require,module,exports){
  "use strict";var ChunkManager=require("./ChunkManager"),Seeders=require("./Seeders"),SegmentHandler=function(e,n,r,t,u,i,s){var a=e,g=n,d=r,h=t,o=new ChunkManager(u,i,s),c=new Seeders;this.getId_period=function(){return a},this.getId_aset=function(){return g},this.getId_rep=function(){return d},this.getId_segment=function(){return h},this.getChunkManager=function(){return o},this.getSeeders=function(){return c}};module.exports=SegmentHandler;


},{"./ChunkManager":34,"./Seeders":42}],44:[function(require,module,exports){
  var conf=require("../../conf"),_=require("underscore"),SegmentRequestQueue=function(e){this.p2pDownloader=e,this.segmentRequests=[],this.peerTimeouts={}};SegmentRequestQueue.prototype.queue=function(e,t){if(this.p2pDownloader.getP2PManager().p2pInterface.isLive())this.segmentRequests.push({id_segment:t,peer:e});else{var s=_.pluck(_.where(this.p2pDownloader.getP2PManager().ongoingSegments,{id_period:e.getPeriodId(),id_aset:e.getAsetId(),id_rep:e.getRepId()},this),"idPiece"),i=_.min(s),n=_.max(s);t>=i&&t<=n+conf.MAX_SEGMENT_REQUEST_STORE?this.segmentRequests.push({id_segment:t,peer:e}):0}},SegmentRequestQueue.prototype.answerRequests=function(e,t,s,i){var n,r=_.filter(this.segmentRequests,function(t){return t.peer.getPeriodId()===e.id_period&&t.peer.getAsetId()===e.id_aset&&t.peer.getRepId()===e.id_rep&&t.id_segment===e.idPiece},this);for(n=0;n<r.length;n++)r[n].peer.hasSegment(e.idPiece,t,s,i);this.segmentRequests=_.reject(this.segmentRequests,function(t){return t.peer.getPeriodId()===e.id_period&&t.peer.getAsetId()===e.id_aset&&t.peer.getRepId()===e.id_rep&&t.id_segment===e.idPiece},this)},SegmentRequestQueue.prototype.removePeerRequests=function(e){this.segmentRequests=_.reject(this.segmentRequests,function(t){return t.peer===e},this)},module.exports=SegmentRequestQueue;


},{"../../conf":2,"underscore":265}],45:[function(require,module,exports){
  var conf=require("../../conf"),SpeedCalculator=function(){this.transferedChunks=[]};SpeedCalculator.prototype.calculateSpeed=function(){var e=this.getIndexTransferOneSecondAgo();return e===!1?this.transferedChunks=[]:e>0&&this.transferedChunks.splice(0,e),this.transferedChunks.length*conf.CHUNK_SIZE/1024},SpeedCalculator.prototype.getIndexTransferOneSecondAgo=function(){for(var e=(new Date).getTime(),t=0;t<this.transferedChunks.length;t++)if(e-this.transferedChunks[t]<=1e3)return t;return!1},SpeedCalculator.prototype.addChunkTransfer=function(){var e=(new Date).getTime();this.transferedChunks.push(e)},module.exports=SpeedCalculator;


},{"../../conf":2}],46:[function(require,module,exports){
  "use strict";var conf=require("../../conf"),socketio=require("socket.io-client"),Backbone=require("backbone"),_=require("underscore"),status=require("./models/status"),TrackerManager=function(e,t){this.p2pProtocolVersion="1.0.0",this.p2pInterface=e,this.trackerURL=t,_.extend(this,Backbone.Events),status.getEE().on("change:tobuffer",this.onTrackerStatusUpdate.bind(this)),this.connect()};TrackerManager.prototype.register=function(e,t){this.socket?this.socket.on(e,t):0},TrackerManager.prototype.connect=function(){this.socket?0:(this.socket=socketio.connect(this.trackerURL,{}),this.socket.on("connect",this.onTrackerConnected.bind(this)),this.socket.on("reconnect",this.onTrackerConnected.bind(this)),this.socket.on("reconnecting",this.onTrackerReconnecting.bind(this)),this.socket.on("disconnect",this.onTrackerDisconnected.bind(this)))};var _updateCount=function(e){switch(e){case"offer":case"answer":case"icecandidate":status.setTrackerSgnCount(status.getTrackerSgnCount()+1);break;default:status.setTrackerMsgCount(status.getTrackerMsgCount()+1)}};TrackerManager.prototype.sockEmit=function(e,t,s){(status.getConnected()||"initSR"===e)&&(this.socket.emit(e,t,s),_updateCount(e))},TrackerManager.prototype.onTrackerConnected=function(){var e=this,t={isLive:this.p2pInterface.isLive(),minBufferLevel:conf.MIN_BUFFER_LEVEL,maxBufferLevel:conf.MAX_BUFFER_LEVEL};this.sockEmit("initSR",{p2pProtocolVersion:e.p2pProtocolVersion,clientId:conf.ID_CLIENT,mpd:status.getMPD(),mpdURL:this.p2pInterface.getMpdUrl(),period:status.getPeriod(),tobuffer:status.getTobuffer(),live:t},this.onTrackerReady.bind(this))},TrackerManager.prototype.onTrackerReady=function(e,t){var s=this;e?0:(status.setConnected(!0),status.setMyIds(t.my_ids),status.setTobuffer(t.updated_tobuffer,!0),s.p2pInterface.isLive()&&t.updated_tobuffer.forEach(function(e){s.p2pInterface.setBufferMarginLive(e.bufferLevel,e.type),0}),s.trigger("tracker_ready",t))},TrackerManager.prototype.onTrackerReconnecting=function(){0,status.setConnected(!1)},TrackerManager.prototype.onTrackerDisconnected=function(){0,status.setConnected(!1)},TrackerManager.prototype.onTrackerStatusUpdate=function(e){e.getConnected()&&(0,0,this.sockEmit("updateAsetStatus",{newTracks:e.getTobuffer(),mpd:status.getMPD()},this.OnStatusUpdated.bind(this)))},TrackerManager.prototype.OnStatusUpdated=function(e,t){var s=this;0,status.updateStatus(t,function(){s.trigger("status_updated")}.bind(s)),!s.p2pInterface.isLive()&&conf.SEGMENTS_HASH_CHECK&&(0,s.askSegmentsHashes(function(){0})),s.p2pInterface.isLive()&&t.updatedTracks.forEach(function(e){s.p2pInterface.setBufferMarginLive(e.bufferLevel,e.type),0})},TrackerManager.prototype.askPeers=function(e,t){var s,n={};e?(n.asetId=e.asetId?e.asetId:"all",n.exclusions=e.exclusions?e.exclusions:[],n.updating=e.updating?e.updating:!1):(n.asetId="all",n.exclusions=[],n.updating=!1),s={mpdhash:status.getMPD(),periodId:status.getPeriod(),tobuffer:status.getTobuffer(),p2pstats:{P2Ppercent:(status.getP2PDownloaded()/(status.getCDNDownloaded()+status.getP2PDownloaded())).toFixed(3),p2p:status.getP2PDownloaded(),cdn:status.getCDNDownloaded(),dataDownloadedTwice:status.getDataDownloadedTwice()},options:n},0,this.sockEmit("updatePeers",s,t),this.alreadyAsked=!0},TrackerManager.prototype.askSegmentsHashes=function(e){for(var t=this,s=status.getMPD(),n=status.getPeriod(),o=status.getTobuffer(),r={mpd:s,period:n,tobuffer:[]},a=0;a<o.length;a++)t.p2pInterface.hasSegmentHashes(n,o[a].asetId,o[a].representationId)||r.tobuffer.push(o[a]);r.tobuffer.length>0&&t.sockEmit("getSegmentsHashes",r,function(s,n){e();for(var o=n.tobuffer,r=0;r<o.length;r++)if(o[r].segmentsHashes){var a={};a.period=n.period,a.asetId=o[r].asetId,a.representationId=o[r].representationId,a.segmentsHashes=o[r].segmentsHashes,a.segmentsSizes=o[r].segmentsSizes,t.p2pInterface.updateMapWithSegmentsHashes(a)}t.trigger("gotSegmentsHashes")})},TrackerManager.prototype.sendPeerOffer=function(e){this.sockEmit("offer",e)},TrackerManager.prototype.sendPeerAnswer=function(e){0,this.sockEmit("answer",e)},TrackerManager.prototype.sendPeerIceCandidate=function(e){0,this.sockEmit("icecandidate",e)},TrackerManager.prototype.sendAnalytics=function(e){0,this.sockEmit("analytics",e)},module.exports=TrackerManager;


},{"../../conf":2,"./models/status":57,"backbone":62,"socket.io-client":112,"underscore":265}],47:[function(require,module,exports){
  var conf=require("../../conf"),_=require("underscore"),SpeedCalculator=require("./SpeedCalculator"),UploadQueue=function(e){this.p2pDownloader=e,this.queue=[],this.peerTimeouts={},this.saturated=!1,this.uploadSpeedCalculator=new SpeedCalculator,this.uploadLimitation=conf.MAX_UP_SPEED};UploadQueue.prototype.add=function(e,t,i,o,u){this.queue.push({peer:e,id_segment:t,id_chunk:i,chunk:o,timeStamp:u}),this.resetPeerTimeout(e),this.sendChunk()},UploadQueue.prototype.removeFirstChunk=function(){this.queue.splice(0,1)},UploadQueue.prototype.getChunkToSend=function(){for(var e=(new Date).getTime();this.queue.length>0;){if(e-this.queue[0].timeStamp<conf.CHUNK_UP_TIMEOUT)return this.queue[0];0,this.removeFirstChunk(),this.p2pDownloader.uploadSaturated()}},UploadQueue.prototype.sendChunk=function(e){var t=this.uploadSpeedCalculator.calculateSpeed();if(t<this.uploadLimitation&&(!this.saturated||e)){var i=this.getChunkToSend();if(!i)return void this.unsetSaturated();if(i.peer.getCommChannel()&&i.peer.getCommChannel().bufferedAmount<conf.UP_MAX_BUFFERED_AMOUNT){this.uploadSpeedCalculator.addChunkTransfer();try{return i.peer.sendChunk(i.id_segment,i.id_chunk,i.chunk),this.removeFirstChunk(),this.resetPeerTimeout(i.peer),this.unsetSaturated(),void(this.uploadLimitation+=5)}catch(o){0,0,this.uploadLimitation>conf.MAX_UP_SPEED&&(this.uploadLimitation=conf.MAX_UP_SPEED),this.uploadLimitation>400?this.uploadLimitation-=200:this.uploadLimitation>100?this.uploadLimitation-=50:this.uploadLimitation=Math.ceil(this.uploadLimitation/2),0,0,this.setSaturated()}this.checkPeerTimeout(i.peer)}else this.uploadLimitation>30&&(this.uploadLimitation-=20,0,this.setSaturated())}this.setSaturated()},UploadQueue.prototype.checkPeerTimeout=function(e){var t=(new Date).getTime();this.peerTimeouts[e.getId()]?t-this.peerTimeouts[e.getId()]>conf.PEER_UP_TIMEOUT&&this.clearChunksForPeer(e.getId()):this.peerTimeouts[e.getId()]=t},UploadQueue.prototype.resetPeerTimeout=function(e){delete this.peerTimeouts[e.getId()]},UploadQueue.prototype.clearChunksForPeer=function(e){this.queue=_.reject(this.queue,function(t){return t.peer.getId()===e}),0},UploadQueue.prototype.setSaturated=function(){if(!this.saturated){0,this.saturated=!0;var e=conf.CHUNK_SIZE/1024/(conf.MAX_UP_SPEED/1e3);this.sendInterval=setInterval(function(){this.sendChunk(!0)}.bind(this),e)}},UploadQueue.prototype.unsetSaturated=function(){this.saturated===!0&&0,this.saturated=!1,this.queue.length||clearInterval(this.sendInterval)},module.exports=UploadQueue;


},{"../../conf":2,"./SpeedCalculator":45,"underscore":265}],48:[function(require,module,exports){
  "use strict";var WebRTCFactory=function(e){var n=e,o=window.RTCPeerConnection||window.webkitPeerConnection00||window.webkitRTCPeerConnection||window.mozRTCPeerConnection,i=window.RTCIceCandidate||window.mozRTCIceCandidate,t=window.mozRTCSessionDescription||window.RTCSessionDescription;this.createPeerConnection=function(){return new o(n,{optional:[{DtlsSrtpKeyAgreement:!0}]})},this.createIceCandidate=function(e){return new i(e)},this.createSessionDescription=function(e){return new t(e)}};module.exports=WebRTCFactory;


},{}],49:[function(require,module,exports){
  var conf=require("../../../conf"),Backbone=require("backbone"),_=require("underscore"),Peer=require("../models/peer"),status=require("../models/status"),EventEmitter=require("eventemitter3"),WebRTCFactory=require("../WebRTCFactory"),PeerPool=function(e){var n,t,a,r=e.TrackerManager,o=!1,i=!1,s=[],d=this,c=new EventEmitter,g=[],u=[],l=function(){r.register("offer",h.bind(d)),r.register("answer",I.bind(d)),r.register("icecandidate",S.bind(d)),r.register("askAnalytics",T.bind(d)),window.PeerConnection=window.RTCPeerConnection||window.webkitPeerConnection00||window.webkitRTCPeerConnection,n=conf.ENABLE_TURN?{iceServers:conf.TURNSERVERS.concat(conf.STUNSERVERS)}:{iceServers:conf.STUNSERVERS},a=new WebRTCFactory(n),_.extend(d,Backbone.Events),m(),c.on("add",E.bind(d)),d.listenTo(r,"tracker_ready",D.bind(d)),d.listenTo(r,"status_updated",function(){k(!0)}.bind(d)),window.addEventListener("beforeunload",N.bind(d)),window.addEventListener("unload",N.bind(d))},f=function(e,n){if(e.length){var t;for(t=0;t<e.length;t++)p(e[t],n)}},p=function(e,n){if(e){var t=new Peer(e,n);s.push(t),c.emit("add",t)}},m=function(){var e=0,n=0;_.forEach(s,function(t){e+=t.getDlSpeed(),n+=t.getUpSpeed()}),status.setDlSpeed(e),status.setUpSpeed(n),status.computeMaxAndAvgSpeed(),setTimeout(_.bind(m,d),1e3)},v=function(e){0},D=function(e){0,k(!o),o=!0},P=function(e){e.getAreListenerSet()?0:(e.getEE().on("connection_lost",w.bind(d)),e.getEE().on("msg_close",_.bind(function(){w(e)},d)),e.getEE().on("msg_requestHasSegment",_.bind(function(n){0,c.emit("segmentRequested",e,n.id)},d)),e.getEE().on("msg_hasSegment",_.bind(function(n){c.emit("hasSegment",e,n.id,n.segmentSize,n.progress,n.segmentHash),0},d)),e.getEE().on("msg_requestChunk",_.bind(function(n){c.emit("chunkRequested",e,n.id_segment,n.id_chunk)},d)),e.getEE().on("msg_sendChunk",_.bind(function(n){c.emit("chunkReceived",e,n.id_segment,n.id_chunk,n.data)},d)),e.getEE().on("msg_cleanDisconnect",_.bind(function(){M(e)},d)),e.getEE().on("change:ready_to_communicate",_.bind(function(){e.getReadyToCommunicate()===!0&&(0,e.establishHeartbeat(),c.emit("peerReadyCommunicate",e))},d)),e.getEE().on("change:connected",_.bind(function(){e.getConnected()&&c.emit("peerConnected",e)},d)),e.setAreListenerSet(!0))},C=function(e){return e=e.replace(/b=AS([^\r\n]+\r\n)/g,""),e=e.replace(/a=mid:audio\r\n/g,"a=mid:audio\r\nb=AS:50\r\n"),e=e.replace(/a=mid:video\r\n/g,"a=mid:video\r\nb=AS:256\r\n"),e=e.replace(/a=mid:data\r\n/g,"a=mid:data\r\nb=AS:1638400\r\n")},E=function(e){s.length>=conf.MIN_NUMBER_OF_PEERS&&(clearInterval(t),t=void 0),e.getConnected()===!1&&(P(e),e.getPC()?0:e.setPC(a.createPeerConnection()),e.getPC().onstatechange=R.bind(d),e.getPC().onicecandidate=_.bind(function(n){if(n.candidate){var t=e.toJSON(),a=status.getTrackByTrackInfos(t.periodId,t.asetId,t.representationId),o={receiverData:t,senderData:a,icecandidate:n.candidate};r.sendPeerIceCandidate(o)}},d),e.initChannels(),e.getPC().createOffer(function(n){e.getPC().setLocalDescription(n,function(){n.sdp=C(n.sdp);var t=e.toJSON(),a=status.getTrackByTrackInfos(t.periodId,t.asetId,t.representationId),o={receiverData:t,senderData:a,offer:n};r.sendPeerOffer(o),c.emit("offerSent",e)}.bind(d),v)}.bind(d),v),e.startConnectionTimeout())},w=function(e,n){n&&(u.push(e.getId()),setTimeout(function(){return u.splice(0,1)},conf.PEER_REMOVED_TIMEOUT)),c.emit("peerDestroyed",e),e.destroy(),s=_.without(s,e),c.emit("remove"),s.length<conf.MIN_NUMBER_OF_PEERS&&k()},h=function(e){if(0,0,_.filter(s,function(n){return n.getId()==e.senderData._id}).length){var n=_.filter(s,function(n){return n.getId()==e.senderData._id})[0];n.setConnected("offer received, sending answer")}else{if(!(s.length<conf.MAX_NUMBER_OF_PEERS)){var t=e.senderData,o=status.getTrackByTrackInfos(t.periodId,t.asetId,t.representationId),i={receiverData:t,senderData:o,answer:!1};return void r.sendPeerAnswer(i)}e.senderData.connected="offer received, sending answer",e.senderData.isLive=r.p2pInterface.isLive();var c=r.p2pInterface;p(e.senderData,c);var n=_.filter(s,function(n){return n.getId()==e.senderData._id})[0]}P(n),n.getPC()?0:n.setPC(a.createPeerConnection()),n.getPC().onstatechange=R.bind(d),n.getPC().onicecandidate=_.bind(function(e){if(e.candidate){var t=n.toJSON(),a=status.getTrackByTrackInfos(t.periodId,t.asetId,t.representationId),o={receiverData:t,senderData:a,icecandidate:e.candidate};r.sendPeerIceCandidate(o)}},d),n.initDialog();var g=a.createSessionDescription(e.offer);""!==n.getPC().remoteDescription.sdp?0:n.getPC().setRemoteDescription(g,function(){n.getPC().createAnswer(function(e){n.getPC().setLocalDescription(e,function(){e.sdp=C(e.sdp),0;var t=n.toJSON();0;var a=status.getTrackByTrackInfos(t.periodId,t.asetId,t.representationId),o={receiverData:t,senderData:a,answer:e};r.sendPeerAnswer(o)}.bind(d),v)}.bind(d),v)}.bind(d),v),n.startConnectionTimeout()},I=function(e){0;for(var n,t=0;t<s.length;t++)if(s[t].getId()===e.senderData._id){n=s[t];break}if(n)if(e.answer){c.emit("answerReceived",n),n.setConnected("Answer received, connecting");var r=a.createSessionDescription(e.answer);n.getPC().setRemoteDescription(r,function(){},v)}else w(n),b(n),0;else 0},b=function(e){g.push(e.getId()),setTimeout(function(){g.splice(0,1)},conf.OFFER_DECLINED_TIMEOUT)},S=function(e){if(_.filter(s,function(n){return n.getId()==e.senderData._id}).length){var n=_.filter(s,function(n){return n.getId()==e.senderData._id})[0];0,n.getPC().addIceCandidate(a.createIceCandidate(e.icecandidate)),0}},T=function(e){var n=status.getMPD(),t=e.timestamp;if(n===e.mpdhash){var a={mpdhash:n,timestamp:t,downloadStats:{p2pDownloaded:status.getP2PDownloaded(),p2pUploaded:status.getP2PUploaded(),cdnDownloaded:status.getCDNDownloaded(),p2pDownloadedUncorrected:status.getP2PDownloadedUncorrected(),dataDlTwice_PP:status.getDataDownloadedTwice_PP(),dataDlTwice_PC:status.getDataDownloadedTwice_PC(),dataDlTwice_CP:status.getDataDownloadedTwice_CP(),dataDlTwice_CC:status.getDataDownloadedTwice_CC()},speedStats:{avgDl:Math.round(status.getAvgDlSpeed()),maxDl:Math.round(status.getMaxDlSpeed()),avgUp:Math.round(status.getAvgUpSpeed()),maxUp:Math.round(status.getMaxUpSpeed())}};r.sendAnalytics({timestamp:t,data:a,mpdhash:n})}},R=function(e){var n=_.filter(s,function(n){return n.getPC()==e.target})[0];0,"active"==e.target.readyState||n.getConnected()===!0},k=function(e){0,(!t||e)&&(r.askPeers({asetId:status.getAsetIdUpdate(),exclusions:A(),updating:i},y.bind(d)),t=setInterval(function(){var e={asetId:status.getAsetIdUpdate(),exclusions:A(),updating:i};r.askPeers(e,y.bind(d))}.bind(d),conf.ASK_PEERS_INTERVAL)),i=!0},A=function(){var e,n=[];for(e=0;e<s.length;e++)n.push(s[e].getId());return n=n.concat(u,g)},y=function(e,n){if(0,e)0;else if(n.length){0;var t,a=r.p2pInterface.isLive();for(t=0;t<n.length;t++)n[t].isLive=a;var o=r.p2pInterface;f(n,o)}else 0},U=function(e){var n,t=_.filter(s,function(n){return n.getAsetId()==e});for(0,n=0;n<t.length;n++)t[n].sendCleanDisconnectMsg(),M(t[n])},M=function(e){0,w(e)},N=function(){_.forEach(s,function(e){e.getReadyToCommunicate()&&e.sendMessage("close")})};d.getPeerArray=function(){return s},d.getProtectedPeerArray=function(){for(var e=[],n=0;n<s.length;n++){var t=s[n],a={};for(var r in t)0==r.indexOf("get")&&(a[r]=t[r]);e.push(a)}return e},d.onTrackSwitch=function(e){return U(e)},d.getEE=function(){return c},l()};module.exports=PeerPool;


},{"../../../conf":2,"../WebRTCFactory":48,"../models/peer":56,"../models/status":57,"backbone":62,"eventemitter3":110,"underscore":265}],50:[function(require,module,exports){
  "use strict";var status=require("../models/status"),conf=require("../../../conf.js"),DisplayInterface=function(e){var t=function(){var t,o={download:{p2pDownloaded:status.getP2PDownloaded(),p2pDownloadedNewAnalytics:status.getp2pDownloadedNewAnalytics(),cdnDownloaded:status.getCDNDownloaded(),dlSpeed:status.getDlSpeed(),upSpeed:status.getUpSpeed()},peers:{count:0},bufferLevelList:status.getBufferLevelList(),tracker:{connected:status.getConnected()},isLive:e.p2pInterface.isLive()};for(t=0;t<e.peerPool.getPeerArray().length;t++)e.peerPool.getPeerArray()[t].getId()&&o.peers.count++;return o.peerPool=e.peerPool.getProtectedPeerArray(),o},o=function(){window.SR_DISPLAY_INTERFACE={getStats:t}};o()};module.exports=DisplayInterface;


},{"../../../conf.js":2,"../models/status":57}],51:[function(require,module,exports){
  "use strict";var $=require("jquery"),Backbone=require("backbone");Backbone.$=$;var _=require("underscore"),logtemplate=require("./logtemplate.html"),peertemplate=require("./peertemplate.html"),statustemplate=require("./statustemplate.html"),status=require("../models/status"),conf=require("../../../conf"),VirtualBufferedManager=require("../../media/VirtualBufferedManager"),DisplayInterface=require("./DisplayInterface"),EventEmitter=require("eventemitter3"),GraphDots=function(e,t,i,n,s){this.curves=t,_.each(this.curves,function(e){e.values=[0]},this),this.maxValue=0,this.labelHorizontalAxis=n,this.labelVerticalAxis=i,this.graphTitle=s,this.START_X=25,this.START_Y=20;var r=25,h=20;this.SCALE_X=1.9,this.SCALE_Y=1.5,this.CANVAS_WIDTH=this.START_X+r+100*this.SCALE_X,this.CANVAS_HEIGHT=this.START_Y+h+100*this.SCALE_Y,this.END_X=this.CANVAS_WIDTH-r,this.END_Y=this.CANVAS_HEIGHT-h,this.graphCanvas=this.initialize(e),this.refresh()};GraphDots.prototype.initialize=function(e){var t=document.createElement("canvas");return t.width=this.CANVAS_WIDTH,t.height=this.CANVAS_HEIGHT,e.append(t),t},GraphDots.prototype.drawEmptyGraph=function(){this.graphCanvas.width=this.CANVAS_WIDTH;var e=this.graphCanvas.getContext("2d");e.beginPath(),e.moveTo(this.START_X-5,this.END_Y),e.lineTo(this.END_X+2,this.END_Y),e.moveTo(this.START_X,this.END_Y+5),e.lineTo(this.START_X,this.START_Y-2),e.stroke(),e.closePath(),e.font="10px serif";var t=3;e.font="small-caps bold 20px serif",e.fillStyle="#1E9D4F",e.fillText(this.graphTitle,this.START_X-20+80,this.START_Y-5),e.font="bold 12px serif",e.fillStyle="#1E9D4F",e.fillText(this.labelVerticalAxis,this.START_X-20,this.START_Y-10),e.beginPath(),e.font="10px serif",e.fillStyle="black",e.fillText("0",0,this.END_Y+t),e.strokeStyle="#d3d3d3";for(var i=1;10>=i;i++)e.moveTo(this.START_X+1,this.END_Y-10*i*this.SCALE_Y),e.lineTo(this.END_X,this.END_Y-10*i*this.SCALE_Y),e.fillText(i*this.maxValue/10,0,this.END_Y-10*i*this.SCALE_Y+t);e.stroke(),e.closePath(),e.beginPath(),e.strokeStyle="gray";for(var n=6,s=this.START_X;s<=this.END_X;s+=10*this.SCALE_X){var r=this.END_X+this.START_X-s;e.moveTo(r,this.END_Y+1),e.lineTo(r,this.END_Y+5),e.fillText(-(s-this.START_X)/this.SCALE_X,r-n,this.END_Y+15)}e.font="bold 14px serif",e.fillStyle="#1E9D4F",e.fillText(this.labelHorizontalAxis,this.END_X+5,this.END_Y+2),e.stroke(),e.closePath()},GraphDots.prototype.drawCurve=function(e,t){var i,n=this.graphCanvas.getContext("2d");for(n.beginPath(),n.lineWidth=2,n.strokeStyle=t,i=0;i<e.length-2;i++)this.END_X-(i+1)*this.SCALE_X>=this.START_X?(n.moveTo(this.END_X-i*this.SCALE_X,this.END_Y-100*this.SCALE_Y*e[e.length-i-1]/this.maxValue),n.lineTo(this.END_X-(i+1)*this.SCALE_X,this.END_Y-100*this.SCALE_Y*e[e.length-i-2]/this.maxValue)):e.splice(0,1);n.stroke(),n.closePath()},GraphDots.prototype.setNewMaxValue=function(){this.maxValue<=100?this.maxValue=100:this.maxValue<=1e3?this.maxValue=100*Math.ceil(this.maxValue/100):this.maxValue<=1e4?this.maxValue=1e3*Math.ceil(this.maxValue/1e3):this.maxValue<=1e5?this.maxValue=1e4*Math.ceil(this.maxValue/1e4):this.maxValue<=1e6&&(this.maxValue=1e5*Math.ceil(this.maxValue/1e5))},GraphDots.prototype.refresh=function(){_.each(this.curves,function(e){var t=e.getValue();e.values.push(t),t>this.maxValue&&(this.maxValue=t)},this),this.setNewMaxValue(),this.drawEmptyGraph(),_.each(this.curves,function(e){this.drawCurve(e.values,e.color)},this),setTimeout(_.bind(this.refresh,this),1e3)};var PeerItem=Backbone.View.extend({tagName:"li",template:peertemplate,initialize:function(e){this.renderPeriodically()},renderPeriodically:function(){return this.$el.html(this.template({peer:this.model})),setTimeout(_.bind(this.renderPeriodically,this),1e3),this}}),StatsView=Backbone.View.extend({el:"#connection-stats",template:statustemplate,initialize:function(e){this.p2pManager=e.P2PManager,this.p2pManager.peerPool.getEE().on("add",this.render.bind(this)),this.p2pManager.peerPool.getEE().on("remove",this.render.bind(this)),status.getEE().on("change:connected",this.render.bind(this)),this.render()},render:function(){var e={tracker:status.getConnected(),peersCount:0};return _.each(this.p2pManager.peerPool.getPeerArray(),_.bind(function(t){"undefined"!==t.getId()&&e.peersCount++}),this),this.$el.html(this.template({stats:e})),this}}),LogView=Backbone.View.extend({el:"#dashr_logs",template:logtemplate,initialize:function(e){this.p2pManager=e.P2PManager,this.p2pManager.peerPool.getEE().on("add",this.showPeers.bind(this)),this.p2pManager.peerPool.getEE().on("remove",this.showPeers.bind(this)),this.graphDots=new GraphDots($("#dl_graph"),[{getValue:function(){return status.getP2PDownloaded()/1024},color:"green"},{getValue:function(){return status.getP2PUploaded()/1024},color:"red"},{getValue:function(){return status.getCDNDownloaded()/1024},color:"orange"}],"(kB)","t(s)","Data (kB)"),this.renderPeriodically(),this.peersView=Array()},showPeers:function(e,t,i){2==conf.LOGGERMANAGER.SHOWPEERS&&(_.each(this.peersView,function(e){e.remove()}),_.each(this.p2pManager.peerPool.getPeerArray(),_.bind(function(e){if(e.getId()){var t=new PeerItem({model:e});this.peersView.push(t),$("#listepeers").append(t.el)}},this)))},renderPeriodically:function(){var e={status:status.getAttributes(),conf:conf.LOGGERMANAGER};return $(this.el).html(this.template(e)),setTimeout(_.bind(this.renderPeriodically,this),1e3),this}}),SegmentViewBars=function(e,t,i,n,s){this.el=e,this.chunkManager=t,this.segment_id=i,this.width=n,this.height=s,this.size=this.chunkManager.downloadStatus.length};SegmentViewBars.prototype.getChunkColor=function(e){return"pending"===this.chunkManager.downloadStatus[e]?"gray":"downloading"===this.chunkManager.downloadStatus[e]?"blue":"downloaded"===this.chunkManager.downloadStatus[e]?"green":"CDNdownloaded"===this.chunkManager.downloadStatus[e]?"orange":"failed"===this.chunkManager.downloadStatus[e]?"red":void 0},SegmentViewBars.prototype.render=function(){var e,t=this.el.getContext("2d");if(this.chunkManager.downloadStatus)for(e=0;e<this.chunkManager.downloadStatus.length;e++)t.fillStyle=this.getChunkColor(e),t.fillRect(e*this.width,this.segment_id*this.height,this.width,this.height),t.fillStyle="white",t.fillRect(e*this.width,this.segment_id*this.height,this.width,1),t.fillStyle="black",t.fillRect(e*this.width,(this.segment_id+1)*this.height-1,this.width,1)};var RepViewBars=Backbone.View.extend({initialize:function(e){this.rep=e.rep,this.p2pManager=e.p2pManager,this.p2pInterface=this.p2pManager.p2pInterface,this.period_id=e.period_id,this.aset_id=e.aset_id,this.rep_id=e.rep_id,this._views=[],this.CHUNKWIDTH=this.p2pInterface.isLive()?6:2,this.CHUNKHEIGHT=(this.p2pInterface.isLive(),15),this.WIDTH=900,this.HEIGHT=this.rep.segments.length*this.CHUNKHEIGHT},render:function(){return this.el.width=this.WIDTH,this.el.height=this.HEIGHT,this.preRenderSegments(),this.renderSegments(),this},findSegmentView:function(e){},newSegmentView:function(e,t){},segmentDownloaded:function(e){},preRenderSegments:function(){for(var e=this.el.getContext("2d"),t=0;t<this.rep.segments.length;t++){var i=this.rep.segments[t],n=i.size?i.size/conf.CHUNK_SIZE:2;e.fillRect(0,t*this.CHUNKHEIGHT,n,this.CHUNKHEIGHT)}},renderSegments:function(){var e=this.p2pInterface.getMap(),t=e.periods[this.period_id].asets[this.aset_id].reps[this.rep_id].segments.length,i=conf.DISPLAY_DEV||!this.p2pInterface.isLive()||10>t?t:10;this.el.height=i*this.CHUNKHEIGHT;for(var n=0;i>n;n++){var s=this.p2pManager.p2pDownloader.getChunkManagerAndSeeders(this.period_id,this.aset_id,this.rep_id,e.periods[this.period_id].asets[this.aset_id].reps[this.rep_id].segments[n].id).chunkManager,r=this.el.getContext("2d");r.fillRect(0,n*this.CHUNKHEIGHT,2,this.CHUNKHEIGHT);var h=12,a=e.periods[this.period_id].asets[this.aset_id].reps[this.rep_id].segments[n],o=a.id+"  -  "+a.time;if(s){var l=new SegmentViewBars(this.el,s,n,this.CHUNKWIDTH,this.CHUNKHEIGHT);l.render(),conf.DISPLAY_DEV&&(r.font=h+"px Arial",r.fillStyle="black",r.fillText(o,3,n*this.CHUNKHEIGHT+h))}else{var r=this.el.getContext("2d");if(conf.DISPLAY_DEV&&(r.fillStyle="red"),r.fillRect(0,n*this.CHUNKHEIGHT,2,this.CHUNKHEIGHT),conf.DISPLAY_DEV){var h=12;r.font=h+"px Arial",r.fillText(o,3,n*this.CHUNKHEIGHT+h)}}}setTimeout(_.bind(this.renderSegments,this),400)}}),SegmentViewBuffer=function(e,t,i,n,s,r,h){return this.el=e,this.chunkManager=t,this.segment_id=i,this.width=n,this.height=s,this.firstChunk=r,this.bufferHeight=h,this};SegmentViewBuffer.prototype.getChunkColor=function(e){return"pending"===this.chunkManager.downloadStatus[e]?"gray":"downloading"===this.chunkManager.downloadStatus[e]?"blue":"downloaded"===this.chunkManager.downloadStatus[e]?"green":"CDNdownloaded"===this.chunkManager.downloadStatus[e]?"orange":"failed"===this.chunkManager.downloadStatus[e]?"red":void 0},SegmentViewBuffer.prototype.findCoordinates=function(e){var t=Math.floor((e+this.firstChunk)*this.height/this.bufferHeight)*this.width,i=(e+this.firstChunk)*this.height%this.bufferHeight;return{x:t,y:i}},SegmentViewBuffer.prototype.render=function(){for(var e=this.el.getContext("2d"),t=0;t<this.chunkManager.downloadStatus.length;t++){e.fillStyle=this.getChunkColor(t);var i=this.findCoordinates(t);e.fillRect(i.x,i.y,this.width,this.height)}};var RepViewBuffer=Backbone.View.extend({initialize:function(e){this.rep=e.rep,this.p2pManager=e.p2pManager,this._views=[],this.CHUNKWIDTH=conf.CHUNKPARAMS_WIDTH,this.CHUNKHEIGHT=conf.CHUNKPARAMS_HEIGHT,this.WIDTH=620,this.HEIGHT=40,this.el.width=this.WIDTH,this.el.height=this.HEIGHT,this.preRenderSegments()},render:function(){return this.renderSegments(),this},findSegmentView:function(e){var t=_.where(this._views,{segment_id:e});return t.length>=1?(t.length>1&&0,t[0]):(0,!1)},newSegmentView:function(e,t){for(var i,n=0,s=this.rep.segments.length,r=0;s>r&&(i=this.rep.segments[r].id,i!=t);r++)n+=Math.ceil(this.rep.segments[r].size/conf.CHUNK_SIZE);var h=new SegmentViewBuffer(this.el,e,t,this.CHUNKWIDTH,this.CHUNKHEIGHT,n,this.HEIGHT);this._views.push({view:h,segment_id:t})},segmentDownloaded:function(e){var t=this.findSegmentView(e);setTimeout(_.bind(function(){this._views=_.without(this._views,t)},this),5e3)},renderSegments:function(){for(var e=0;e<this._views.length;e++)this._views[e].view.render();setTimeout(_.bind(this.renderSegments,this),400)},preRenderSegments:function(){for(var e=0,t=this.el.getContext("2d"),i=0;i<this.rep.segments.length;i++){for(var n=Math.ceil(this.rep.segments[i].size/conf.CHUNK_SIZE),s=0;n>s;s++){t.fillStyle="black";var r={x:Math.floor((s+e)*this.CHUNKHEIGHT/this.HEIGHT)*this.CHUNKWIDTH,y:(s+e)*this.CHUNKHEIGHT%this.HEIGHT};t.fillRect(r.x,r.y,this.CHUNKWIDTH,this.CHUNKHEIGHT)}e+=n}}}),ChunkBarView=Backbone.View.extend({el:"#chunks",initialize:function(e){this.container=document.createDocumentFragment(),this._views=[],this.p2pManager=e.P2PManager,this.p2pInterface=this.p2pManager.p2pInterface,this.videoMap=this.p2pInterface.getMap(),this.render(),this.p2pManager.p2pDownloader.getEE().on("newChunkManager",this.onNewChunkManager.bind(this)),this.listenTo(this.p2pManager,"piece_downloaded_p2pm",this.onSegmentDownloaded),this.listenTo(this.p2pManager,"CDNSegmentDownloaded",this.onSegmentDownloaded)},render:function(){var e=this.p2pInterface.getTracks();_.each(this.videoMap.periods,function(t,i){_.each(t.asets,function(t,n){var s=document.createElement("div");s.className="aset-buffer";var r=document.createElement("h6");r.className="bar",r.appendChild(document.createTextNode(t.type+" buffer:")),s.appendChild(r),this.container.appendChild(s),_.each(t.reps,function(t,r){for(var h,a=0;a<e.length;a++)e[a].id_aset===n&&(h=e[a].id_rep);if(2===conf.LOGGERMANAGER.SHOWBARS||1===conf.LOGGERMANAGER.SHOWBARS&&r===h)if(1===conf.LOGGERMANAGER.CHUNK_DISPLAY){var o=document.createElement("canvas"),l=new RepViewBars({el:o,p2pManager:this.p2pManager,rep:t,period_id:i,aset_id:n,rep_id:r});this._views.push({view:l,period_id:i,aset_id:n,rep_id:r}),s.appendChild(l.render().el)}else{var d=document.createElement("canvas"),f=new RepViewBuffer({el:d,p2pManager:this.p2pManager,rep:t});this._views.push({view:f,period_id:i,aset_id:n,rep_id:r}),this.container.appendChild(f.render().el)}},this)},this)},this),this.$el.append(this.container)},findRepView:function(e,t,i){var n=_.where(this._views,{period_id:e,aset_id:t,rep_id:i});return n.length>=1?(n.length>1&&0,n[0].view):(0,!1)},onNewChunkManager:function(e,t,i,n,s){var r=this.findRepView(t,i,n);r&&r.newSegmentView(e,s)},onSegmentDownloaded:function(e,t){var i=this.findRepView(e.id_period,e.id_aset,e.id_rep);i&&i.segmentDownloaded(e.idPiece)}}),bufferDisplay=function(e){var t,i,n,s,r,h,a=e.p2pInterface,o=document.createElement("canvas"),l=[],d=750,f=30,p=15,u=12,g=function(){var t,i,n,s,r=a.getBufferedTracks();o.width=d;var h=document.getElementById("buffers");if(h){for(h.appendChild(o),setInterval(m,200),o.onclick=S,o.onmousemove=E,o.onmouseout=T,n=0;n<a.getMap().periods[0].asets.length;n++)for(s=0;s<a.getMap().periods[0].asets[n].reps.length;s++){for(t={id_aset:n,id_rep:s,vbm:new VirtualBufferedManager},i=0;i<r.length;i++)r[i].id_aset===n&&r[i].id_rep===s&&(t.id_buffer=i);l.push(t)}e.on("piece_downloaded_p2pm",H),e.on("piece_downloaded_prtl",H),e.p2pDownloader.getEE().on("segmentRemoved",C.bind(this)),e.on("repSwitched",b)}},c=function(e){o.height=e*f+p},_=function(){var e,s,o=a.getBufferedTracks();for(t=[],i=[],r=1/0,h=0,s=2===conf.LOGGERMANAGER.SHOWBUFFER?l.length:Math.max(o.length),n!==s&&(c(s),n=Math.max(s)),e=0;e<o.length;e++)i.push(o[e].buffered),i[e].length&&(r=Math.min(r,i[e].start(0)),h=Math.max(h,i[e].end(i[e].length-1))),t.push(o[e].bufferedStrict),t[e]&&t[e].length&&(r=Math.min(r,t[e].start(0)),h=Math.max(h,t[e].end(t[e].length-1)));for(e=0;e<l.length;e++)(2===conf.LOGGERMANAGER.SHOWBUFFER||l[e].id_buffer||0===l[e].id_buffer)&&l[e].vbm.length&&(r=Math.min(r,l[e].vbm.start(0)),h=Math.max(h,l[e].vbm.end(l[e].vbm.length-1)))},m=function(){var e,g,c,m,v=o.getContext("2d");for(_(),s=[],e=0;n>e;e++)v.fillStyle="white",v.fillRect(0,e*f,d,f);for(e=0;n>e;e++)if(2===conf.LOGGERMANAGER.SHOWBUFFER){for(g=0;g<l[e].vbm.length;g++)c=w(l[e].vbm.start(g)),m=w(l[e].vbm.end(g)),v.fillStyle="#97b9e2",v.fillRect(c,e*f,m-c>1?m-c:1,f-3);(l[e].id_buffer||0===l[e].id_buffer)&&(s[l[e].id_buffer]=e)}else if(l[e].id_buffer||0===l[e].id_buffer){for(g=0;g<l[e].vbm.length;g++)c=w(l[e].vbm.start(g)),m=w(l[e].vbm.end(g)),v.fillStyle="#97b9e2",v.fillRect(c,l[e].id_buffer*f,m-c>1?m-c:1,f-3);s[l[e].id_buffer]=e}for(e=0;e<i.length;e++)for(g=0;g<i[e].length;g++)c=w(i[e].start(g)),m=w(i[e].end(g)),v.fillStyle="#566e89",v.fillRect(c,(s[e]+1/3)*f-1,m-c>1?m-c:1,2*f/3-2);for(e=0;e<t.length;e++)if(t[e])for(g=0;g<t[e].length;g++)c=w(t[e].start(g)),m=w(t[e].end(g)),v.fillStyle="#202429",v.fillRect(c,(s[e]+2/3)*f-2,m-c>1?m-c:1,f/3-1);c=w(a.getCurrentTime()),m=c+1,v.fillStyle="#bf0101",v.fillRect(c,0,m-c,o.height-p),v.fillStyle="white",v.fillRect(150,o.height-p,100,p),v.fillStyle="#bf0101",v.font=u+"px Arial",v.fillText(a.getCurrentTime().toFixed(3),150,o.height),v.fillStyle="white",v.fillRect(0,o.height-p,100,p),v.fillRect(o.width-100,o.height-p,100,p),v.fillStyle="black",v.font=u+"px Arial",v.fillText(r.toFixed(3),0,o.height),v.fillText(h.toFixed(3),o.width-h.toFixed(3).toString().length*u*5/9,o.height)},w=function(e){return(e-r)*d/(h-r)},v=function(e){return e*(h-r)/d+r},S=function(e){var t=v(e.offsetX);a.setCurrentTime(t)},E=function(e){var n,a,d=o.getContext("2d"),g=v(e.offsetX),c=Math.floor(e.offsetY/f),_="",m=(h-r)/150;if(a=s.indexOf(c),a>-1&&e.offsetY-c*f>=2*f/3-2&&t[a])for(n=0;n<t[a].length;n++)if(t[a].start(n)-m<=g&&g<=t[a].end(n)+m){_=t[a].start(n).toFixed(3)+" - "+t[a].end(n).toFixed(3);break}if(a>-1&&(e.offsetY-c*f<2*f/3-2&&e.offsetY-c*f>=1*f/3-1||""===_)&&i[a])for(n=0;n<i[a].length;n++)if(i[a].start(n)-m<=g&&g<=i[a].end(n)+m){_=i[a].start(n).toFixed(3)+" - "+i[a].end(n).toFixed(3);break}if((e.offsetY-c*f<1*f/3-1||""===_)&&l[c]&&l[c].vbm)for(n=0;n<l[c].vbm.length;n++)if(l[c].vbm.start(n)-m<=g&&g<=l[c].vbm.end(n)+m){_=l[c].vbm.start(n).toFixed(3)+" - "+l[c].vbm.end(n).toFixed(3);break}d.fillStyle="white",d.fillRect(o.width/2-100,o.height-p,400,p),d.fillStyle="black",d.font=u+"px Arial bold",d.fillText(_,o.width/2-h.toFixed(3).toString().length*u*7/18,o.height),d.fillText(g.toFixed(3),500,o.height)},T=function(e){var t=o.getContext("2d");t.fillStyle="white",t.fillRect(o.width/2-100,o.height-p,400,p)},H=function(e){var t;for(t=0;t<l.length;t++)l[t].id_aset===e.id_aset&&l[t].id_rep===e.id_rep&&l[t].vbm.addPiece(e)},C=function(e){var t;for(t=0;t<l.length;t++)l[t].id_aset===e.id_aset&&l[t].id_rep===e.id_rep&&l[t].vbm.removePiece(e)},b=function(e,t,i){var n,s;for(n=0;n<l.length;n++)l[n].id_aset!==e||!l[n].id_buffer&&0!==l[n].id_buffer||(s=l[n].id_buffer,delete l[n].id_buffer);for(n=0;n<l.length;n++)l[n].id_aset===t&&l[n].id_rep===i&&(l[n].id_buffer=s)};g()},DisplayManager=function(){var e=!1;this.start=function(t){if(!e){new LogView({P2PManager:t}),new StatsView({P2PManager:t}),new ChunkBarView({P2PManager:t});if(conf.LOGGERMANAGER.SHOWBUFFER>0){bufferDisplay(t)}e=!0}}};module.exports=new DisplayManager;


},{"../../../conf":2,"../../media/VirtualBufferedManager":24,"../models/status":57,"./DisplayInterface":50,"./logtemplate.html":52,"./peertemplate.html":53,"./statustemplate.html":54,"backbone":62,"eventemitter3":110,"jquery":111,"underscore":265}],52:[function(require,module,exports){
  module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){if(__p+="",2==conf.SHOWLOGS){if(__p+='\r\n	<h3> Download stats:</h3>\r\n	<ul id="download_stats" style="font-size:22px" class="unstyled text-center">\r\n		<li>\r\n			P2P Down Speed: <br/>\r\n			<span class="label label-success"> '+(null==(__t=status.dlSpeed.toFixed(2))?"":__t)+'ko/s</span>\r\n		</li>\r\n		<li> \r\n			Total from Peers: <br/>\r\n			<span class="label label-success">'+(null==(__t=(status.p2pDownloaded/1024).toFixed(0))?"":__t)+"ko ("+(null==(__t=(100*status.p2pDownloaded/(status.cdnDownloaded+status.p2pDownloaded)).toFixed(1))?"":__t)+'%) </span>\r\n		</li>\r\n		<li>\r\n			Total from CDN: <br/>\r\n			<span class="label label-warning">'+(null==(__t=(status.cdnDownloaded/1024).toFixed(0))?"":__t)+"ko ("+(null==(__t=(100*status.cdnDownloaded/(status.cdnDownloaded+status.p2pDownloaded)).toFixed(1))?"":__t)+'%) </span>\r\n		</li>\r\n		<li> \r\n			Data downloaded Twice: <br/>\r\n			<span class="label label-success">'+(null==(__t=(status.dataDownloadedTwice/1024).toFixed(0))?"":__t)+'ko </span>\r\n		</li>\r\n        <li> \r\n			Data downloaded Twice: <br/>\r\n			<span class="label label-success">PP: '+(null==(__t=(status.dataDownloadedTwice_PP/1024).toFixed(0))?"":__t)+'ko </span>\r\n            <span class="label label-success">PC: '+(null==(__t=(status.dataDownloadedTwice_PC/1024).toFixed(0))?"":__t)+'ko </span>\r\n            <span class="label label-success">CP: '+(null==(__t=(status.dataDownloadedTwice_CP/1024).toFixed(0))?"":__t)+'ko </span>\r\n            <span class="label label-success">CC: '+(null==(__t=(status.dataDownloadedTwice_CC/1024).toFixed(0))?"":__t)+'ko </span>\r\n		</li>\r\n        <li> \r\n			p2pDownloaded uncorrected: <br/>\r\n			<span class="label label-success">'+(null==(__t=(status.p2pDownloadedUncorrected/1024).toFixed(0))?"":__t)+'ko </span>\r\n		</li>\r\n		<li> \r\n			Total from Peers (double check): <br/>\r\n			<span class="label label-success">'+(null==(__t=(status.p2pDoubleCheck/1024).toFixed(0))?"":__t)+'ko </span>\r\n		</li>\r\n		<li> \r\n			Total from CDN (double check): <br/>\r\n			<span class="label label-warning">'+(null==(__t=(status.cdnDoubleCheck/1024).toFixed(0))?"":__t)+'ko </span>\r\n		</li>\r\n	</ul>\r\n	<h3> Upload stats:</h3>\r\n	<ul id="upload_stats" style="font-size:22px" class="unstyled text-center">\r\n		<li>\r\n			P2P Up Speed : <br/>\r\n			<span class="label label-danger">'+(null==(__t=status.upSpeed.toFixed(2))?"":__t)+'ko/s</span>\r\n		</li>\r\n		<li> \r\n			Total Uploaded: <br/>\r\n			<span class="label label-danger">'+(null==(__t=(status.p2pUploaded/1024).toFixed(0))?"":__t)+'ko </span>\r\n		</li>\r\n	</ul>\r\n	<h4> Status:</h4>\r\n	<ul class="unstyled">\r\n		<li>\r\n			Connected to Tracker : \r\n			<span class="label label-info">'+(null==(__t=status.connected)?"":__t)+'</span>\r\n		</li>\r\n		<li>\r\n			My peer-ids :\r\n			<span class="label label-info"> ',_.each(status.my_ids,function(l){var s="xx";s+=l,s+="  ",print(s)}),__p+="\r\n			</span>\r\n		</li>\r\n		<li>\r\n			My Aset/Rep ids :\r\n			<ul>\r\n			",status.tobuffer)for(i=0,m=status.tobuffer.length;i<m;i++)__p+="\r\n					<li> Aset : "+(null==(__t=status.tobuffer[i].asetId)?"":__t)+", Rep : "+(null==(__t=status.tobuffer[i].representationId)?"":__t)+"\r\n					</li>\r\n						";__p+="\r\n			</ul>\r\n		</li>\r\n	</ul>\r\n\r\n"}else 1==conf.SHOWLOGS?__p+='\r\n\r\n	<ul id="download_stats" class="list-group">\r\n		<li class="list-group-item">\r\n			<span class="label label-success pull-right"> '+(null==(__t=status.dlSpeed.toFixed(2))?"":__t)+'kB/s</span>\r\n			P2P Down Speed\r\n		</li>\r\n		<li class="list-group-item">\r\n			<span class="label label-danger pull-right">'+(null==(__t=status.upSpeed.toFixed(2))?"":__t)+'kB/s</span>\r\n			P2P Upload Speed\r\n		</li>\r\n		<li class="list-group-item"> \r\n			<span class="label label-success pull-right .from-peers">'+(null==(__t=(status.p2pDownloaded/1024).toFixed(0))?"":__t)+"kB ("+(null==(__t=(100*status.p2pDownloaded/(status.cdnDownloaded+status.p2pDownloaded)).toFixed(1))?"":__t)+"%) </span>\r\n			Total data from Peers\r\n		</li>\r\n\r\n":3==conf.SHOWLOGS&&(__p+='\r\n<!-- Le template de donnÃ©es P2P pour la demo camping 2 -->\r\n	<div id="big-logs">\r\n		<div class="label label-success">\r\n			P2P: ',print("NaN"===(status.p2pDownloaded/(status.cdnDownloaded+status.p2pDownloaded)).toFixed(1)?"0.0%":(100*status.p2pDownloaded/(status.cdnDownloaded+status.p2pDownloaded)).toFixed(1)+"%"),__p+='\r\n		</div>\r\n			<div class="btn-group btn-group-justified" role="toolbar">\r\n				<span class="btn btn-success speed">\r\n				P2P<span class="glyphicon glyphicon glyphicon-arrow-down "></span> '+(null==(__t=status.dlSpeed.toFixed(0))?"":__t)+' kB/s\r\n				</span>\r\n				<span class="btn btn-danger speed">\r\n				P2P<span class="glyphicon glyphicon glyphicon-arrow-up"></span> '+(null==(__t=status.upSpeed.toFixed(0))?"":__t)+' kB/s\r\n				</span>\r\n			</div>\r\n	<div>\r\n	<!-- <ul id="download_stats" class="list-group">\r\n		<li class="list-group-item">\r\n			<span class="label label-success pull-right"> </span>\r\n			\r\n		</li>\r\n		<li class="list-group-item">\r\n			<span class="label label-danger pull-right">'+(null==(__t=status.upSpeed.toFixed(2))?"":__t)+'kB/s</span>\r\n			P2P Upload Speed\r\n		</li>\r\n		<li class="list-group-item"> \r\n			<span class="label label-success pull-right .from-peers">'+(null==(__t=(status.p2pDownloaded/1024).toFixed(0))?"":__t)+"kB ("+(null==(__t=(100*status.p2pDownloaded/(status.cdnDownloaded+status.p2pDownloaded)).toFixed(1))?"":__t)+"%) </span>\r\n			Total data from Peers\r\n		</li> -->\r\n\r\n");__p+="\r\n\r\n"}return __p};


},{}],53:[function(require,module,exports){
  module.exports=function(obj){var __t,__p="";Array.prototype.join;with(obj||{})__p+="id = "+(null==(__t=peer.getId())?"":__t)+',\r\n<strong><span style="color:green;font-weight:bold">dlSpeed : '+(null==(__t=peer.getDlSpeed().toFixed(2))?"":__t)+'ko/s</span>, \r\n<span style="color:red;font-weight:bold">upSpeed : '+(null==(__t=peer.getUpSpeed().toFixed(2))?"":__t)+"ko/s</span></strong>\r\n<br/>\r\nStatus: connected: "+(null==(__t=peer.getConnected())?"":__t)+", period:  "+(null==(__t=peer.getPeriodId())?"":__t)+",aset:  "+(null==(__t=peer.getAsetId())?"":__t)+", rep:  "+(null==(__t=peer.getRepId())?"":__t)+", \r\ndataDownloaded (Utile) : "+(null==(__t=(peer.getDataDownloaded()/1024).toFixed(0))?"":__t)+"ko, dataUploaded : "+(null==(__t=(peer.getDataUploaded()/1024).toFixed(0))?"":__t)+"ko\r\n<br />";return __p};


},{}],54:[function(require,module,exports){
  module.exports=function(obj){var __t,__p="";Array.prototype.join;with(obj||{})__p+='<h4>Status</h4>\r\n<ul class="list-unstyled">\r\n  <li>\r\n    Connected to Tracker:\r\n  </li>\r\n  <li>\r\n    <span class="badge">'+(null==(__t=stats.tracker)?"":__t)+'</span>\r\n  </li>\r\n  <li>\r\n    Peers connected to:\r\n  </li>\r\n  <li>\r\n    <span class="badge peersCount">'+(null==(__t=Math.round(stats.peersCount/2))?"":__t)+"</span>\r\n  </li>\r\n</ul>";return __p};


},{}],55:[function(require,module,exports){
  "use strict";var Heuristic=function(n,t){var e=.3,u=0,i=4e3,r=0,c=0,o=0,s=.5,f=0,h=n,a=t,d=function(){r++},N=function(){c++},m=function(){o++},I=function(){var n,t=c/r;return n=isNaN(t)?u:Math.min(t,1),0,f=n,n},b=function(){var n;return 0!==r&&(n=(1-e)*s+e*I(),s=n),0,s},k=function(){r=0,c=0,o=0},g=function(){b(),k()},l=function(){setInterval(g,i)};this.incrementNbChunkRequested=function(){return d()},this.incrementNbChunkDownloaded=function(){return N()},this.incrementNbChunkTimeOut=function(){return m()},this.heurisInst=function(){return I()},this.mean=function(){return b()},this.getNbChunkRequested=function(){return r},this.getHeuristicScore=function(){return s},this.getLastHeuristInst=function(){return f},l()};module.exports=Heuristic;


},{}],56:[function(require,module,exports){
  var _=require("underscore"),Backbone=require("backbone"),status=require("../models/status"),conf=require("../../../conf"),Heuristic=require("./Heuristic"),EventEmitter=require("eventemitter3"),Peer=function(e,t){var n,o,r,i,u,a,c,s,d,f,l,g=0,m=0,h=0,b=0,y=0,p=(new Date).getTime(),C=!1,v=0,T=0,I=e._id,A=e.asetId,E=e.periodId,S=e.representationId,P=e.city,w=e.country,D=e.currentSegment,L=e.currentTime,R=e.ipAddress,M=e.ipFullList,k=e.ipPort,N=e.isp,U=e.latitude,q=e.longitude,H=e.mpdhash,O=e.region,B=e.socketId,J=e.trackerId,x=e.type,F=e.updatedAt,K=e["p2pstats.P2Ppercent"],V=e.bufferLevel,X=0,z=0,Y=new Heuristic(I,B),j=this,G=new EventEmitter,Q=function(){var e={_id:I,asetId:A,city:P,country:w,currentSegment:D,currentTime:L,ipAddress:R,ipFullList:M,ipPort:k,isp:N,latitude:U,longitude:q,mpdhash:H,periodId:E,region:O,representationId:S,socketId:B,trackerId:J,type:x,updatedAt:F};return e},W=function(e){var t;d&&d.getStats(function(n){var o,r,i=n.result();for(r=0;r<i.length;r++)if(o=i[r],o.stat("googRtt")){t=o.stat("googRtt"),e(t);break}})},Z=function(){var e,t,n,o;j.loc?(n=j.loc.coordinates[1],o=j.loc.coordinates[0],e=status.getTobuffer()[0].loc.coordinates[1],t=status.getTobuffer()[0].loc.coordinates[0]):(n=U,o=q,e=status.getTobuffer()[0].latitude,t=status.getTobuffer()[0].longitude);var r=6371,i=(n-e)*Math.PI/180,u=(o-t)*Math.PI/180,a=e*Math.PI/180,c=n*Math.PI/180,s=Math.sin(i/2)*Math.sin(i/2)+Math.sin(u/2)*Math.sin(u/2)*Math.cos(a)*Math.cos(c),d=2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s)),f=r*d;return f},$=function(){var e=(new Date).getTime(),t=e-p;X=h/1024/(t/1e3),z=b/1024/(t/1e3),j.getReadyToCommunicate()===!0&&(h+b)/1024/(t/1e3)<conf.MIN_USEFUL_SPEED?(y++,y>conf.MAX_USELESS_COUNT&&0):y=0,h=0,b=0,p=e},ee=function(){var e=g,t=m;0>=e-v&&0>=t-T&&re(!0),v=e,T=t},te=function(){ie(),0},ne=function(){l||(l=setTimeout(function(){0,re(!0)}.bind(j),conf.PEER_CONNECTION_TIMEOUT))},oe=function(){clearTimeout(l)},re=function(e){G.emit("connection_lost",j,e),0},ie=function(){0,f||(0,0,f=f?f:d.createDataChannel("communication",{reliable:!1}),0,f.binaryType="arraybuffer",0,f.onclose=function(){re(!1)}.bind(j),ue(),f.onerror=function(e){re(!1)}.bind(j))},ue=function(){f.onmessage=_.bind(function(e){if(C=!0,j.setReadyToCommunicate(!0),j.setConnected(!0),status.setRawDataDownloaded(status.getRawDataDownloaded()+e.data.length),"string"==typeof e.data){var t=JSON.parse(e.data);if(t.readyComm)return void setTimeout(_.bind(function(){j.setReadyToCommunicate(!0),j.setConnected(!0),oe()},j),100);"heartbeat"===t.type?0:G.emit("msg_"+t.type,t.args)}else{var n=Ie(e.data);h+=n.data.byteLength,g+=n.data.byteLength,status.setP2PDownloadedUncorrected(status.getP2PDownloadedUncorrected()+n.data.byteLength),status.setP2PDownloaded(status.getP2PDownloaded()+n.data.byteLength),G.emit("msg_sendChunk",n)}},j)},ae=function(e,t){if(void 0===n)return 0,!1;var o=JSON.stringify({type:e,args:t});return status.setRawDataUploaded(status.getRawDataUploaded()+o.length),f.send(o),!0},ce=function(){i=setInterval(function(){C===!0?C=!1:(re(!1),0)}.bind(j),conf.CHECK_HEARTBEAT_INTERVAL),u=setInterval(function(){fe()}.bind(j),conf.SEND_HEARTBEAT_INTERVAL)},se=function(){d.ondatachannel=de.bind(j)},de=function(e){0;var t=e.channel||e;"communication"==t.label&&(f=t,ue(),"connecting"==t.readyState?f.onopen=function(){0,t.send(JSON.stringify({readyComm:!0})),setTimeout(_.bind(function(){j.setReadyToCommunicate(!0),r=!0,oe()},j),100)}.bind(j):(0,t.send(JSON.stringify({readyComm:!0})),setTimeout(_.bind(function(){j.setReadyToCommunicate(!0),r=!0,oe()},j),100)),f.onclose=function(){re(!1)}.bind(j),f.onerror=function(e){re(!1)}.bind(j))},fe=function(){ae("heartbeat")},le=function(e){0,ae("requestHasSegment",{id:e})},ge=function(e,t,n,o){ae("hasSegment",{id:e,segmentSize:t,progress:n,segmentHash:o})},me=function(e,t){ae("requestChunk",{id_segment:e,id_chunk:t}),G.emit("self_requestChunk",j,e,t),Y.incrementNbChunkRequested()},he=function(e,t,n){j.downloading={id_segment:e,id_chunk:t};var o=n.byteLength;n=_e(e,t,n),n!==!1&&f.send(n),b+=o,m+=o,status.setP2PUploaded(status.getP2PUploaded()+o)},be=function(){ae("cleanDisconnect")},ye=function(){return Y.getNbChunkRequested()<conf.MAX_CHUNK_BY_SEED},pe=function(e){e=e?_.clone(e):{};clearTimeout(l),clearInterval(i),clearInterval(u),clearInterval(c),clearInterval(s),f&&(f.close(),f=null);try{d.close()}catch(t){0}d=null},Ce=function(e){var t=Math.floor(e/256),n=e%256;return new Uint8Array([n,t])},ve=function(e){var t=Ce(Math.floor(e/65536)),n=Ce(e%65536);return new Uint8Array([n[0],n[1],t[0],t[1]])},Te=function(e){var n,o;if(t.isLive()){if(o=t.getMap().periods[E].asets[A].reps[S].segments,_.find(o,function(t){return t.id==e}))return e;n=Math.floor(o[o.length-1].id/4294967296);var r=e+4294967296*n;return _.find(o,function(e){return e.id==r})?r:e+4294967296*(n-1)}return e},_e=function(e,t,n){var o=ve(e);if(t>65536)return 0,!1;var r=Ce(t),i=new Uint8Array(n.byteLength+o.byteLength+r.byteLength);return i.set(o,0),i.set(r,4),i.set(new Uint8Array(n),6),i.buffer},Ie=function(e){var t=new Uint32Array(e.slice(0,4)),n=new Uint16Array(e.slice(4,6)),o=e.slice(6),r=Te(t[0]),i=n[0];return{id_segment:r,id_chunk:i,data:o}},Ae=function(e){_.extend(j,Backbone.Events),void 0===r&&(r=!1,o=!0),c=setInterval(_.bind($,j),1e3),s=setInterval(ee.bind(j),conf.CHECK_USELESS_INTERVAL)};j.toJSON=function(){return Q()},j.getConnected=function(){return r},j.setConnected=function(e){e!=r&&(G.emit("change:connected"),r=e,0)},j.getRtt=function(e){return W(e)},j.getDistance=function(){return Z()},j.getReadyToCommunicate=function(){return n},j.setReadyToCommunicate=function(e){e!=n&&(n=e,G.emit("change:ready_to_communicate"))},j.initChannels=function(){return te()},j.startConnectionTimeout=function(){return ne()},j.sendMessage=function(e,t){return ae(e,t)},j.establishHeartbeat=function(){return ce()},j.initDialog=function(){return se()},j.requestHasSegment=function(e){return le(e)},j.hasSegment=function(e,t,n,o){return ge(e,t,n,o)},j.requestChunk=function(e,t){return me(e,t)},j.sendChunk=function(e,t,n){return he(e,t,n)},j.sendCleanDisconnectMsg=function(){return be()},j.canBeAskedChunk=function(){return ye()},j.destroy=function(e){return pe(e)},j.getDataDownloaded=function(){return g},j.getDataUploaded=function(){return m},j.getId=function(){return I},j.getAsetId=function(){return A},j.getPeriodId=function(){return E},j.getRepId=function(){return S},j.getCity=function(){return P},j.getCountry=function(){return w},j.getRegion=function(){return O},j.getIpAddress=function(){return R},j.getType=function(){return x},j.getSocketId=function(){return B},j.getCurrentTime=function(){return L},j.getDlSpeed=function(){return X},j.getUpSpeed=function(){return z},j.setPC=function(e){d=e},j.getPC=function(){return d},j.getCommChannel=function(){return f},j.getHeuristic=function(){return Y},j.getAreListenerSet=function(){return a},j.setAreListenerSet=function(e){a=e},j.getUpdatedAt=function(){return F},j.getEE=function(){return G},j.getP2Pstats=function(){return K},j.getBufferLevel=function(){return V},Ae(e)};module.exports=Peer;


},{"../../../conf":2,"../models/status":57,"./Heuristic":55,"backbone":62,"eventemitter3":110,"underscore":265}],57:[function(require,module,exports){
  var EventEmitter=require("eventemitter3"),_=require("underscore"),Backbone=require("backbone"),conf=require("../../../conf"),Status=function(){var e,n,t,o,r,a,u,d=!1,c=[],i=0,f=0,D=0,s=0,l=0,p=0,g=0,w=0,P=0,T=0,C=0,b=0,h=0,m=0,v=[],S=0,M=0,k=0,N=0,y=0,H=0,U=0,A=0,L=0,x=0,I=0,R=0,E=0,W=0,B=0,q=0,j=this,z=new EventEmitter,F=function(){setInterval(Q.bind(j),1e3),_.extend(j,Backbone.Events)},G=function(){var o={avgDlSpeed:f,avgUpSpeed:l,cdnDoubleCheck:x,cdnDownloaded:h,connected:d,dataDownloadedTwice_CC:N,dataDownloadedTwice_CP:k,dataDownloadedTwice_HD:H,dataDownloadedTwice_HP:y,dataDownloadedTwice_M:U,dataDownloadedTwice_PC:M,dataDownloadedTwice_PP:S,dlSpeed:i,maxDlSpeed:D,maxUpSpeed:p,mpd:n,my_ids:c,nbRightHashDLM:E,nbRightHashP2P:I,nbWrongHashDLM:W,nbWrongHashP2P:R,p2pDoubleCheck:L,p2pDownloaded:g,p2pDownloadedNewAnalytics:w,p2pDownloadedHistory:v,p2pDownloadedUncorrected:P,p2pUploaded:T,period:t,rawDataDownloaded:C,rawDataUploaded:b,tobuffer:e,trackerMsgCount:B,trackerSgnCount:q,upSpeed:s};return o},J=function(){var e,n,t,o;i&&(i>D&&(D=i),e=f?(f*r+i)/(r+1):i,n=r?r+1:1,r=n,f=e),s&&(s>p&&(p=s),t=l?(l*a+s)/(a+1):s,o=a?a+1:1,a=o,l=t)},K=function(n,t,o){var r=_.find(e,function(e){return 0,e.asetId==t&&e.periodId==n&&e.representationId==o});return r?r:"no track found"},O=function(e,n){var t=e.my_ids,o=e.updatedTracks;j.setMyIds(t),j.setTobuffer(o,!0),n()},Q=function(){var e,n=v,t=(new Date).getTime();for(n.push({p2pDownloaded:g,timeStamp:t}),e=n.length-1;e>=0;e--)t-n[e].timeStamp>1e3*conf.ABR_DEL_T&&n.splice(e,1)},V=function(){var e,n,t,o,r=v;return r.length?(e=r[0],n=r[r.length-1],t=n.p2pDownloaded-e.p2pDownloaded,o=(n.timeStamp-e.timeStamp)/1e3,o>0&&t>0?t/o:0):0},X=function(){for(var n=0;n<e.length;n++)e[n]=_.pick(e[n],"type","asetId","representationId","currentSegment","currentTime","bufferLevelMax")};j.getMyIds=function(){return c},j.setMyIds=function(e){c!==e&&(c=e)},j.getDataDownloadedTwice=function(){return o},j.getTobuffer=function(){return e},j.setTobuffer=function(n,t,o){if(n!==e){var r;if(e&&e.length&&(r=e[0].bufferLevelMax),e=n,r)for(var a=0;a<e.length;a++)e[a].bufferLevelMax=r;t||z.emit("change:tobuffer",j,e)}else o&&z.emit("change:tobuffer",j,e)},j.getMPD=function(){return n},j.setMPD=function(e){n=e},j.getPeriod=function(){return t},j.setPeriod=function(e){t=e},j.getAttributes=function(){return G()},j.getDlSpeed=function(){return i},j.setDlSpeed=function(e){i=e},j.getAvgDlSpeed=function(){return f},j.getMaxDlSpeed=function(){return D},j.getUpSpeed=function(){return s},j.setUpSpeed=function(e){s=e},j.getAvgUpSpeed=function(){return l},j.getMaxUpSpeed=function(){return p},j.getP2PDownloaded=function(){return g},j.setP2PDownloaded=function(e){"number"!=typeof e||isNaN(e)?0:g=e},j.getp2pDownloadedNewAnalytics=function(){return w},j.setp2pDownloadedNewAnalytics=function(e){"number"!=typeof e||isNaN(e)?0:w=e},j.getP2PDownloadedUncorrected=function(){return P},j.setP2PDownloadedUncorrected=function(e){P=e},j.getP2PUploaded=function(){return T},j.setP2PUploaded=function(e){T=e},j.getRawDataDownloaded=function(){return C},j.setRawDataDownloaded=function(e){C=e},j.getRawDataUploaded=function(){return b},j.setRawDataUploaded=function(e){b=e},j.getCDNDownloaded=function(){return h},j.setCDNDownloaded=function(e){h=e},j.getCdnCancelled=function(){return m},j.setCdnCancelled=function(e){m=e},j.getDataDownloadedTwice_PP=function(){return S},j.setDataDownloadedTwice_PP=function(e){S=e},j.getDataDownloadedTwice_PC=function(){return M},j.setDataDownloadedTwice_PC=function(e){M=e},j.getDataDownloadedTwice_CP=function(){return k},j.setDataDownloadedTwice_CP=function(e){k=e},j.getDataDownloadedTwice_CC=function(){return N},j.setDataDownloadedTwice_CC=function(e){N=e},j.getDataDownloadedTwice_HP=function(){return y},j.setDataDownloadedTwice_HP=function(e){y=e},j.getDataDownloadedTwice_HD=function(){return H},j.setDataDownloadedTwice_HD=function(e){H=e},j.getDataDownloadedTwice_M=function(){return U},j.setDataDownloadedTwice_M=function(e){U=e},j.getCdnDataDiscarded=function(){return A},j.setCdnDataDiscarded=function(e){A=e},j.getP2PDoubleCheck=function(){return L},j.setP2PDoubleCheck=function(e){L=e},j.getCDNDoubleCheck=function(){return x},j.setCDNDoubleCheck=function(e){x=e},j.getNbRightHashP2P=function(){return I},j.setNbRightHashP2P=function(e){I=e},j.getNbWrongHashP2P=function(){return R},j.setNbWrongHashP2P=function(e){R=e},j.getNbRightHashDLM=function(){return E},j.setNbRightHashDLM=function(e){E=e},j.getNbWrongHashDLM=function(){return W},j.setNbWrongHashDLM=function(e){W=e},j.getTrackerMsgCount=function(){return B},j.setTrackerMsgCount=function(e){B=e},j.getTrackerSgnCount=function(){return q},j.setTrackerSgnCount=function(e){q=e},j.getConnected=function(){return d},j.setConnected=function(e){e||X(),e!==d&&(d=e,z.emit("change:connected"),e===!0&&z.emit("tracker_ready"))},j.getEE=function(){return z},j.setAsetIdUpdate=function(e){u=e},j.getAsetIdUpdate=function(){return u},j.computeMaxAndAvgSpeed=function(){return J()},j.computeMaxAndAvgCDNSpeed=function(){return _computeMaxAndAvgCDNSpeed()},j.getTrackByTrackInfos=function(e,n,t){return K(e,n,t)},j.updateStatus=function(e,n){return O(e,n)},j.computeP2PThroughput=function(){return V()},j.getBufferLevelList=function(){var n=e.map(function(e){return{bufferLevel:e.bufferLevel,trackType:e.type}});return n},F()},status=new Status;module.exports=status;


},{"../../../conf":2,"backbone":62,"eventemitter3":110,"underscore":265}],58:[function(require,module,exports){
  "use strict";var DRMManager=function(e){var t=function(e){e.target.webkitGenerateKeyRequest("com.widevine.alpha",e.initData)},n=function(e){var t=new XMLHttpRequest;t.open("POST","http://wv-ref-eme-player.appspot.com/proxy",!0),t.responseType="arraybuffer",t.onload=function(){if(200==this.status){var t=new Uint8Array(this.response);e.target.webkitAddKey("com.widevine.alpha",t,e.initData,e.sessionId)}},t.send(e.message)},a=function(){e.addEventListener("webkitneedkey",t),e.addEventListener("keymessage",n),e.addEventListener("webkitkeymessage",n)},i=function(){a()};i()};module.exports=DRMManager;


},{}],59:[function(require,module,exports){
  "use strict";var hashWorker="./HashWorker.js",status=require("../p2p/models/status"),SegmentHasher=function(e){var n=new Worker((window.webkitURL||window.URL).createObjectURL(new Blob(['(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module \'"+o+"\'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n/*\r\n *  The MurmurHash3 algorithm was created by Austin Appleby.  This JavaScript port was authored\r\n *  by Peter Zotov (based on Java port by Yonik Seeley) and is placed into the public domain.\r\n *  The author hereby disclaims copyright to this source code.\r\n *\r\n *  This produces exactly the same hash values as the final C++ version of MurmurHash3 and\r\n *  is thus suitable for producing the same hash values across platforms.\r\n *\r\n *  There are two versions of this hash implementation. First interprets the string as a\r\n *  sequence of bytes, ignoring most significant byte of each codepoint. The second one\r\n *  interprets the string as a UTF-16 codepoint sequence, and appends each 16-bit codepoint\r\n *  to the hash independently. The latter mode was not written to be compatible with\r\n *  any other implementation, but it should offer better performance for JavaScript-only\r\n *  applications.\r\n *\r\n *  See http://github.com/whitequark/murmurhash3-js for future updates to this file.\r\n */\r\n\r\nvar MurmurHash3 = {\r\n    mul32: function(m, n) {\r\n        var nlo = n & 0xffff;\r\n        var nhi = n - nlo;\r\n        return ((nhi * m | 0) + (nlo * m | 0)) | 0;\r\n    },\r\n\r\n    hashBytes: function(data, len, seed) {\r\n        var c1 = 0xcc9e2d51,\r\n            c2 = 0x1b873593;\r\n\r\n        var h1 = seed;\r\n        var roundedEnd = len & ~0x3;\r\n\r\n        for (var i = 0; i < roundedEnd; i += 4) {\r\n            var k1 = (data[i] & 0xff) |\r\n                ((data[i + 1] & 0xff) << 8) |\r\n                ((data[i + 2] & 0xff) << 16) |\r\n                ((data[i + 3] & 0xff) << 24);\r\n\r\n            k1 = this.mul32(k1, c1);\r\n            k1 = ((k1 & 0x1ffff) << 15) | (k1 >>> 17); // ROTL32(k1,15);\r\n            k1 = this.mul32(k1, c2);\r\n\r\n            h1 ^= k1;\r\n            h1 = ((h1 & 0x7ffff) << 13) | (h1 >>> 19); // ROTL32(h1,13);\r\n            h1 = (h1 * 5 + 0xe6546b64) | 0;\r\n        }\r\n\r\n        k1 = 0;\r\n\r\n        switch (len % 4) {\r\n            case 3:\r\n                k1 = (data[roundedEnd + 2] & 0xff) << 16;\r\n                // fallthrough\r\n            case 2:\r\n                k1 |= (data[roundedEnd + 1] & 0xff) << 8;\r\n                // fallthrough\r\n            case 1:\r\n                k1 |= (data[roundedEnd] & 0xff);\r\n                k1 = this.mul32(k1, c1);\r\n                k1 = ((k1 & 0x1ffff) << 15) | (k1 >>> 17); // ROTL32(k1,15);\r\n                k1 = this.mul32(k1, c2);\r\n                h1 ^= k1;\r\n        }\r\n\r\n        // finalization\r\n        h1 ^= len;\r\n\r\n        // fmix(h1);\r\n        h1 ^= h1 >>> 16;\r\n        h1 = this.mul32(h1, 0x85ebca6b);\r\n        h1 ^= h1 >>> 13;\r\n        h1 = this.mul32(h1, 0xc2b2ae35);\r\n        h1 ^= h1 >>> 16;\r\n\r\n        return h1;\r\n    }\r\n};\r\n\r\n\r\n//jshint -W117\r\nself.onmessage = function(e) {\r\n    var segmentData = new Uint8Array(e.data.segmentData);\r\n    var hash = MurmurHash3.hashBytes(segmentData, segmentData.length, 0x0).toString();\r\n    if (e.data.create) {\r\n        self.postMessage({\r\n            segmentData: e.data.segmentData,\r\n            jobIndex: e.data.jobIndex,\r\n            hash: hash,\r\n            create: true\r\n        }, [e.data.segmentData]);\r\n    } else if (hash === e.data.hash) {\r\n        self.postMessage({\r\n            segmentData: e.data.segmentData,\r\n            hashMatch: true,\r\n            jobIndex: e.data.jobIndex,\r\n            hash: hash\r\n        }, [e.data.segmentData]);\r\n    } else {\r\n        self.postMessage({\r\n            segmentData: e.data.segmentData,\r\n            hashMatch: false,\r\n            jobIndex: e.data.jobIndex,\r\n            hash: hash\r\n        }, [e.data.segmentData]);\r\n    }\r\n};\n},{}]},{},[1])'],{type:"text/javascript"}))),t=[],r=function(e,r,a){var s=t.push({result:e,segment:r,cb:a})-1;n.postMessage({segmentData:e.response,jobIndex:s,create:!0},[e.response])},a=function(e,r,a,s){var o=t.push({result:e,segment:r,cbSuccess:a,cbError:s,dlm:!0})-1;n.postMessage({segmentData:e.response,hash:r.segment.hash,jobIndex:o},[e.response])},s=function(e,r,a){var s=t.push({chunkManager:e,segment:r,dlm:!1})-1;n.postMessage({segmentData:a,hash:r.segment.hash,jobIndex:s},[a])},o=function(){n.onmessage=function(n){var r=t[n.data.jobIndex];delete t[n.data.jobIndex],n.data.create?(r.result.response=n.data.segmentData,e.p2pInterface.p2pMapController.setSegmentHash(r.segment,n.data.hash),r.cb(r.result,r.segment)):r.dlm?n.data.hashMatch?(0,status.setNbRightHashDLM(status.getNbRightHashDLM()+1),r.result.response=n.data.segmentData,r.cbSuccess(r.result,r.segment)):(0,status.setNbWrongHashDLM(status.getNbWrongHashDLM()+1),r.cbError(r.result,r.segment)):n.data.hashMatch?(0,status.setNbRightHashP2P(status.getNbRightHashP2P()+1),r.chunkManager.segment=new Uint8Array(n.data.segmentData),e.p2pDownloader.hashVerified(r.chunkManager,r.segment,n.data.segmentData)):(0,status.setNbWrongHashP2P(status.getNbWrongHashP2P()+1),e.p2pDownloader.wrongHash(r.segment))}};this.createHash=r,this.checkHashDLM=a,this.checkHashP2P=s,o()};module.exports=SegmentHasher;


},{"../p2p/models/status":57}],60:[function(require,module,exports){
  exports.clone=function E(_){function e(E,_,e){var t,n,L={};for(t in _)n=_[t],t in E&&(E[t]===n||t in L&&L[t]===n)||(E[t]=e?e(n):n);return E}if(!_||"object"!=typeof _||"[object Function]"===Object.prototype.toString.call(_))return _;if(_.nodeType&&"cloneNode"in _)return _.cloneNode(!0);if(_ instanceof Date)return new Date(_.getTime());if(_ instanceof RegExp)return new RegExp(_);var t,n,L;if(_ instanceof Array)for(t=[],n=0,L=_.length;L>n;++n)n in _&&t.push(E(_[n]));else t=_.constructor?new _.constructor:{};return e(t,_,E)},exports.sortDescending=function(E,_){return _.bandwidth-E.bandwidth},exports.overloadConf=function(E,_){if(!_||void 0===_.ID_CLIENT)throw new Error("There must be a client ID in the option object");E.ID_CLIENT=_.ID_CLIENT,void 0!==_.RANGE_REQUEST_ALLOWED&&(E.RANGE_REQUEST_ALLOWED=_.RANGE_REQUEST_ALLOWED),_.FORCE_BANDWIDTH&&(E.FORCE_BANDWIDTH=_.FORCE_BANDWIDTH),_.DEFAULT_AUTOSWITCH&&(E.DEFAULT_AUTOSWITCH=_.DEFAULT_AUTOSWITCH),_.BUFFER&&(_.BUFFER.BUFFER_MARGIN&&(E.BUFFER.BUFFER_MARGIN=_.BUFFER.BUFFER_MARGIN),_.BUFFER.SOFT_TRACK_SWITCH_MIN_BUFFER&&(E.BUFFER.SOFT_TRACK_SWITCH_MIN_BUFFER=_.BUFFER.SOFT_TRACK_SWITCH_MIN_BUFFER),void 0!==_.BUFFER.FORCE_SWITCH_CLEAR_ALL&&(E.BUFFER.FORCE_SWITCH_CLEAR_ALL=_.BUFFER.FORCE_SWITCH_CLEAR_ALL),void 0!==_.BUFFER.ALWAYS_FORCE_SWITCH&&(E.BUFFER.ALWAYS_FORCE_SWITCH=_.BUFFER.ALWAYS_FORCE_SWITCH)),_.LIVE&&(void 0!==_.LIVE.DISTANCE_FROM_LIVE_EDGE&&(E.LIVE.DISTANCE_FROM_LIVE_EDGE=_.LIVE.DISTANCE_FROM_LIVE_EDGE),void 0!==_.LIVE.MIN_BUFFER_LEVEL&&(E.LIVE.MIN_BUFFER_LEVEL=_.LIVE.MIN_BUFFER_LEVEL),void 0!==_.LIVE.ALLOW_LIVE_DELAY&&(E.LIVE.ALLOW_LIVE_DELAY=_.LIVE.ALLOW_LIVE_DELAY)),"undefined"!=typeof _.ADD_QUERY_PARAM&&(E.ADD_QUERY_PARAM=_.ADD_QUERY_PARAM),void 0!==_.PLAYLIST_HLS_KEEP_LAST_LINES&&(E.PLAYLIST_HLS_KEEP_LAST_LINES=_.PLAYLIST_HLS_KEEP_LAST_LINES),void 0!==_.SS_IMPLICIT_AAC_HE&&(E.SS_IMPLICIT_AAC_HE=_.SS_IMPLICIT_AAC_HE),void 0!==_.DISPLAY_ERROR&&(E.DISPLAY_ERROR=_.DISPLAY_ERROR),void 0!==_.REPRESENTATION_NUMBER&&(E.REPRESENTATION_NUMBER=_.REPRESENTATION_NUMBER);var e={ALLOW_P2P:_.ALLOW_P2P,TRACKER_URL:_.TRACKER_URL,P2P_CACHE_MAX_SIZE:_.P2P_CACHE_MAX_SIZE,DISPLAY:_.DISPLAY,ID_CLIENT:_.ID_CLIENT,DEBUG:_.DEBUG};return e},exports.make_range=function(E,_){return _?"bytes="+E+"-"+_:"bytes="+E+"-"},exports.absURL=function(E,_){if(_.match(/^[a-z]*:\/\//))return _;var e;"/"==_[0]&&(_=_.slice(1,_.length));var t=E.lastIndexOf("/");return t+1<=E.length&&(e=E.slice(0,t+1)),e+_},exports.relToAbs=function(E){var _=document.createElement("a");return _.href=E,_.protocol+"//"+_.host+_.pathname+_.search+_.hash},exports.parseUrl=function(E){var _=document.createElement("a");return _.href=E,_},exports.updateQueryStringParameter=function(E,_,e){var t=new RegExp("([?&])"+_+"=.*?(&|$)","i"),n=-1!==E.indexOf("?")?"&":"?";return E.match(t)?E.replace(t,"$1"+_+"="+e+"$2"):E+n+_+"="+e};var isInt=function(E){return"number"==typeof E&&E%1===0};exports.isInt=isInt,exports.isPosInt=function(E){return isInt(E)&&E>=0};


},{}],61:[function(require,module,exports){
  "use strict";module.exports={merge:function(r,e){for(var o in e)e.hasOwnProperty(o)&&(void 0===r[o]?r[o]=e[o]:0);return r},overrideDefaults:function(r,e){for(var o in r)r.hasOwnProperty(o)&&void 0!==e[o]&&(r[o]=e[o]);return r},mapAdd:function(r,e){var o={};for(var n in r)r.hasOwnProperty(n)&&(o[n]=r[n]+e[n]);return o}};


},{}],62:[function(require,module,exports){
  !function(t,e){if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(i,n,s){t.Backbone=e(t,s,i,n)});else if("undefined"!=typeof exports){var i=require("underscore");e(t,exports,i)}else t.Backbone=e(t,{},t._,t.jQuery||t.Zepto||t.ender||t.$)}(this,function(t,e,i,n){var s=t.Backbone,r=[],a=(r.push,r.slice);r.splice;e.VERSION="1.1.2",e.$=n,e.noConflict=function(){return t.Backbone=s,this},e.emulateHTTP=!1,e.emulateJSON=!1;var o=e.Events={on:function(t,e,i){if(!u(this,"on",t,[e,i])||!e)return this;this._events||(this._events={});var n=this._events[t]||(this._events[t]=[]);return n.push({callback:e,context:i,ctx:i||this}),this},once:function(t,e,n){if(!u(this,"once",t,[e,n])||!e)return this;var s=this,r=i.once(function(){s.off(t,r),e.apply(this,arguments)});return r._callback=e,this.on(t,r,n)},off:function(t,e,n){var s,r,a,o,h,c,l,d;if(!this._events||!u(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events=void 0,this;for(o=t?[t]:i.keys(this._events),h=0,c=o.length;c>h;h++)if(t=o[h],a=this._events[t]){if(this._events[t]=s=[],e||n)for(l=0,d=a.length;d>l;l++)r=a[l],(e&&e!==r.callback&&e!==r.callback._callback||n&&n!==r.context)&&s.push(r);s.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=a.call(arguments,1);if(!u(this,"trigger",t,e))return this;var i=this._events[t],n=this._events.all;return i&&c(i,e),n&&c(n,arguments),this},stopListening:function(t,e,n){var s=this._listeningTo;if(!s)return this;var r=!e&&!n;n||"object"!=typeof e||(n=this),t&&((s={})[t._listenId]=t);for(var a in s)t=s[a],t.off(e,n,this),(r||i.isEmpty(t._events))&&delete this._listeningTo[a];return this}},h=/\s+/,u=function(t,e,i,n){if(!i)return!0;if("object"==typeof i){for(var s in i)t[e].apply(t,[s,i[s]].concat(n));return!1}if(h.test(i)){for(var r=i.split(h),a=0,o=r.length;o>a;a++)t[e].apply(t,[r[a]].concat(n));return!1}return!0},c=function(t,e){var i,n=-1,s=t.length,r=e[0],a=e[1],o=e[2];switch(e.length){case 0:for(;++n<s;)(i=t[n]).callback.call(i.ctx);return;case 1:for(;++n<s;)(i=t[n]).callback.call(i.ctx,r);return;case 2:for(;++n<s;)(i=t[n]).callback.call(i.ctx,r,a);return;case 3:for(;++n<s;)(i=t[n]).callback.call(i.ctx,r,a,o);return;default:for(;++n<s;)(i=t[n]).callback.apply(i.ctx,e);return}},l={listenTo:"on",listenToOnce:"once"};i.each(l,function(t,e){o[e]=function(e,n,s){var r=this._listeningTo||(this._listeningTo={}),a=e._listenId||(e._listenId=i.uniqueId("l"));return r[a]=e,s||"object"!=typeof n||(s=this),e[t](n,s,this),this}}),o.bind=o.on,o.unbind=o.off,i.extend(e,o);var d=e.Model=function(t,e){var n=t||{};e||(e={}),this.cid=i.uniqueId("c"),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(n=this.parse(n,e)||{}),n=i.defaults({},n,i.result(this,"defaults")),this.set(n,e),this.changed={},this.initialize.apply(this,arguments)};i.extend(d.prototype,o,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(t){return i.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return i.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,n){var s,r,a,o,h,u,c,l;if(null==t)return this;if("object"==typeof t?(r=t,n=e):(r={})[t]=e,n||(n={}),!this._validate(r,n))return!1;a=n.unset,h=n.silent,o=[],u=this._changing,this._changing=!0,u||(this._previousAttributes=i.clone(this.attributes),this.changed={}),l=this.attributes,c=this._previousAttributes,this.idAttribute in r&&(this.id=r[this.idAttribute]);for(s in r)e=r[s],i.isEqual(l[s],e)||o.push(s),i.isEqual(c[s],e)?delete this.changed[s]:this.changed[s]=e,a?delete l[s]:l[s]=e;if(!h){o.length&&(this._pending=n);for(var d=0,f=o.length;f>d;d++)this.trigger("change:"+o[d],this,l[o[d]],n)}if(u)return this;if(!h)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,i.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,i.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!i.isEmpty(this.changed):i.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?i.clone(this.changed):!1;var e,n=!1,s=this._changing?this._previousAttributes:this.attributes;for(var r in t)i.isEqual(s[r],e=t[r])||((n||(n={}))[r]=e);return n},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(t){t=t?i.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=this,n=t.success;return t.success=function(i){return e.set(e.parse(i,t),t)?(n&&n(e,i,t),void e.trigger("sync",e,i,t)):!1},U(this,t),this.sync("read",this,t)},save:function(t,e,n){var s,r,a,o=this.attributes;if(null==t||"object"==typeof t?(s=t,n=e):(s={})[t]=e,n=i.extend({validate:!0},n),s&&!n.wait){if(!this.set(s,n))return!1}else if(!this._validate(s,n))return!1;s&&n.wait&&(this.attributes=i.extend({},o,s)),void 0===n.parse&&(n.parse=!0);var h=this,u=n.success;return n.success=function(t){h.attributes=o;var e=h.parse(t,n);return n.wait&&(e=i.extend(s||{},e)),i.isObject(e)&&!h.set(e,n)?!1:(u&&u(h,t,n),void h.trigger("sync",h,t,n))},U(this,n),r=this.isNew()?"create":n.patch?"patch":"update","patch"===r&&(n.attrs=s),a=this.sync(r,this,n),s&&n.wait&&(this.attributes=o),a},destroy:function(t){t=t?i.clone(t):{};var e=this,n=t.success,s=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(i){(t.wait||e.isNew())&&s(),n&&n(e,i,t),e.isNew()||e.trigger("sync",e,i,t)},this.isNew())return t.success(),!1;U(this,t);var r=this.sync("delete",this,t);return t.wait||s(),r},url:function(){var t=i.result(this,"urlRoot")||i.result(this.collection,"url")||j();return this.isNew()?t:t.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},i.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=i.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return n?(this.trigger("invalid",this,n,i.extend(e,{validationError:n})),!1):!0}});var f=["keys","values","pairs","invert","pick","omit"];i.each(f,function(t){d.prototype[t]=function(){var e=a.call(arguments);return e.unshift(this.attributes),i[t].apply(i,e)}});var p=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,i.extend({silent:!0},e))},g={add:!0,remove:!0,merge:!0},v={add:!0,remove:!1};i.extend(p.prototype,o,{model:d,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,i.extend({merge:!1},e,v))},remove:function(t,e){var n=!i.isArray(t);t=n?[t]:i.clone(t),e||(e={});var s,r,a,o;for(s=0,r=t.length;r>s;s++)o=t[s]=this.get(t[s]),o&&(delete this._byId[o.id],delete this._byId[o.cid],a=this.indexOf(o),this.models.splice(a,1),this.length--,e.silent||(e.index=a,o.trigger("remove",o,this,e)),this._removeReference(o,e));return n?t[0]:t},set:function(t,e){e=i.defaults({},e,g),e.parse&&(t=this.parse(t,e));var n=!i.isArray(t);t=n?t?[t]:[]:i.clone(t);var s,r,a,o,h,u,c,l=e.at,f=this.model,p=this.comparator&&null==l&&e.sort!==!1,v=i.isString(this.comparator)?this.comparator:null,m=[],y=[],_={},b=e.add,w=e.merge,x=e.remove,E=!p&&b&&x?[]:!1;for(s=0,r=t.length;r>s;s++){if(h=t[s]||{},a=h instanceof d?o=h:h[f.prototype.idAttribute||"id"],u=this.get(a))x&&(_[u.cid]=!0),w&&(h=h===o?o.attributes:h,e.parse&&(h=u.parse(h,e)),u.set(h,e),p&&!c&&u.hasChanged(v)&&(c=!0)),t[s]=u;else if(b){if(o=t[s]=this._prepareModel(h,e),!o)continue;m.push(o),this._addReference(o,e)}o=u||o,!E||!o.isNew()&&_[o.id]||E.push(o),_[o.id]=!0}if(x){for(s=0,r=this.length;r>s;++s)_[(o=this.models[s]).cid]||y.push(o);y.length&&this.remove(y,e)}if(m.length||E&&E.length)if(p&&(c=!0),this.length+=m.length,null!=l)for(s=0,r=m.length;r>s;s++)this.models.splice(l+s,0,m[s]);else{E&&(this.models.length=0);var k=E||m;for(s=0,r=k.length;r>s;s++)this.models.push(k[s])}if(c&&this.sort({silent:!0}),!e.silent){for(s=0,r=m.length;r>s;s++)(o=m[s]).trigger("add",o,this,e);(c||E&&E.length)&&this.trigger("sort",this,e)}return n?t[0]:t},reset:function(t,e){e||(e={});for(var n=0,s=this.models.length;s>n;n++)this._removeReference(this.models[n],e);return e.previousModels=this.models,this._reset(),t=this.add(t,i.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,i.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return this.add(t,i.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return a.apply(this.models,arguments)},get:function(t){return null==t?void 0:this._byId[t]||this._byId[t.id]||this._byId[t.cid]},at:function(t){return this.models[t]},where:function(t,e){return i.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var i in t)if(t[i]!==e.get(i))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),i.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(i.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return i.invoke(this.models,"get",t)},fetch:function(t){t=t?i.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success,n=this;return t.success=function(i){var s=t.reset?"reset":"set";n[s](i,t),e&&e(n,i,t),n.trigger("sync",n,i,t)},U(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?i.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var n=this,s=e.success;return e.success=function(t,i){e.wait&&n.add(t,e),s&&s(t,i,e)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof d)return t;e=e?i.clone(e):{},e.collection=this;var n=new this.model(t,e);return n.validationError?(this.trigger("invalid",this,n.validationError,e),!1):n},_addReference:function(t,e){this._byId[t.cid]=t,null!=t.id&&(this._byId[t.id]=t),t.collection||(t.collection=this),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,n){("add"!==t&&"remove"!==t||i===this)&&("destroy"===t&&this.remove(e,n),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});var m=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];i.each(m,function(t){p.prototype[t]=function(){var e=a.call(arguments);return e.unshift(this.models),i[t].apply(i,e)}});var y=["groupBy","countBy","sortBy","indexBy"];i.each(y,function(t){p.prototype[t]=function(e,n){var s=i.isFunction(e)?e:function(t){return t.get(e)};return i[t](this.models,s,n)}});var _=e.View=function(t){this.cid=i.uniqueId("view"),t||(t={}),i.extend(this,i.pick(t,w)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},b=/^(\S+)\s*(.*)$/,w=["model","collection","el","id","attributes","className","tagName","events"];i.extend(_.prototype,o,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,i){return this.$el&&this.undelegateEvents(),this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],i!==!1&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=i.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var n=t[e];if(i.isFunction(n)||(n=this[t[e]]),n){var s=e.match(b),r=s[1],a=s[2];n=i.bind(n,this),r+=".delegateEvents"+this.cid,""===a?this.$el.on(r,n):this.$el.on(r,a,n)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(i.result(this,"el"),!1);else{var t=i.extend({},i.result(this,"attributes"));this.id&&(t.id=i.result(this,"id")),this.className&&(t["class"]=i.result(this,"className"));var n=e.$("<"+i.result(this,"tagName")+">").attr(t);this.setElement(n,!1)}}}),e.sync=function(t,n,s){var r=E[t];i.defaults(s||(s={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var a={type:r,dataType:"json"};if(s.url||(a.url=i.result(n,"url")||j()),null!=s.data||!n||"create"!==t&&"update"!==t&&"patch"!==t||(a.contentType="application/json",a.data=JSON.stringify(s.attrs||n.toJSON(s))),s.emulateJSON&&(a.contentType="application/x-www-form-urlencoded",a.data=a.data?{model:a.data}:{}),s.emulateHTTP&&("PUT"===r||"DELETE"===r||"PATCH"===r)){a.type="POST",s.emulateJSON&&(a.data._method=r);var o=s.beforeSend;s.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",r),o?o.apply(this,arguments):void 0}}"GET"===a.type||s.emulateJSON||(a.processData=!1),"PATCH"===a.type&&x&&(a.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var h=s.xhr=e.ajax(i.extend(a,s));return n.trigger("request",n,h,s),h};var x=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),E={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var k=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},T=/\((.*?)\)/g,$=/(\(\?)?:\w+/g,S=/\*\w+/g,H=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend(k.prototype,o,{initialize:function(){},route:function(t,n,s){i.isRegExp(t)||(t=this._routeToRegExp(t)),i.isFunction(n)&&(s=n,n=""),s||(s=this[n]);var r=this;return e.history.route(t,function(i){var a=r._extractParameters(t,i);r.execute(s,a),r.trigger.apply(r,["route:"+n].concat(a)),r.trigger("route",n,a),e.history.trigger("route",r,n,a)}),this},execute:function(t,e){t&&t.apply(this,e)},navigate:function(t,i){return e.history.navigate(t,i),this},_bindRoutes:function(){if(this.routes){this.routes=i.result(this,"routes");for(var t,e=i.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(H,"\\/*#replaceCode#*/").replace(T,"(?:$1)?").replace($,function(t,e){return e?t:"([^/?]+)"}).replace(S,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var n=t.exec(e).slice(1);return i.map(n,function(t,e){return e===n.length-1?t||null:t?decodeURIComponent(t):null})}});var A=e.History=function(){this.handlers=[],i.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},I=/^[#\/]|\s+$/g,N=/^\/+|\/+$/g,R=/msie [\w.]+/,O=/\/$/,P=/#.*$/;A.started=!1,i.extend(A.prototype,o,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"/*#replaceCode#*//")===this.root},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=decodeURI(this.location.pathname+this.location.search);var i=this.root.replace(O,"");t.indexOf(i)||(t=t.slice(i.length))}else t=this.getHash();return t.replace(I,"")},start:function(t){if(A.started)throw new Error("Backbone.history has already been started");A.started=!0,this.options=i.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var n=this.getFragment(),s=document.documentMode,r=R.exec(navigator.userAgent.toLowerCase())&&(!s||7>=s);if(this.root=("/"+this.root+"/").replace(N,"/"),r&&this._wantsHashChange){var a=e.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=a.hide().appendTo("body")[0].contentWindow,this.navigate(n)}this._hasPushState?e.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?e.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=n;var o=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&o.hash&&(this.fragment=this.getHash().replace(I,""),this.history.replaceState({},document.title,this.root+this.fragment))}return this.options.silent?void 0:this.loadUrl()},stop:function(){e.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),A.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e===this.fragment?!1:(this.iframe&&this.navigate(e),void this.loadUrl())},loadUrl:function(t){return t=this.fragment=this.getFragment(t),i.any(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0})},navigate:function(t,e){if(!A.started)return!1;e&&e!==!0||(e={trigger:!!e});var i=this.root+(t=this.getFragment(t||""));if(t=t.replace(P,""),this.fragment!==t){if(this.fragment=t,""===t&&"/"!==i&&(i=i.slice(0,-1)),this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,i){if(i){var n=t.href.replace(/(javascript:|#).*$/,"");t.replace(n+"#"+e)}else t.hash="#"+e}}),e.history=new A;var C=function(t,e){var n,s=this;n=t&&i.has(t,"constructor")?t.constructor:function(){return s.apply(this,arguments)},i.extend(n,s,e);var r=function(){this.constructor=n};return r.prototype=s.prototype,n.prototype=new r,t&&i.extend(n.prototype,t),n.__super__=s.prototype,n};d.extend=p.extend=k.extend=_.extend=A.extend=C;var j=function(){throw new Error('A "url" property or function must be specified')},U=function(t,e){var i=e.error;e.error=function(n){i&&i(t,n,e),t.trigger("error",t,n,e)}};return e});


},{"underscore":265}],63:[function(require,module,exports){

},{}],64:[function(require,module,exports){
  function replacer(t,e){return util.isUndefined(e)?""+e:!util.isNumber(e)||!isNaN(e)&&isFinite(e)?util.isFunction(e)||util.isRegExp(e)?e.toString():e:e.toString()}function truncate(t,e){return util.isString(t)?t.length<e?t:t.slice(0,e):t}function getMessage(t){return truncate(JSON.stringify(t.actual,replacer),128)+" "+t.operator+" "+truncate(JSON.stringify(t.expected,replacer),128)}function fail(t,e,r,i,s){throw new assert.AssertionError({message:r,actual:t,expected:e,operator:i,stackStartFunction:s})}function ok(t,e){t||fail(t,!0,e,"==",assert.ok)}function _deepEqual(t,e){if(t===e)return!0;if(util.isBuffer(t)&&util.isBuffer(e)){if(t.length!=e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}return util.isDate(t)&&util.isDate(e)?t.getTime()===e.getTime():util.isRegExp(t)&&util.isRegExp(e)?t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase:util.isObject(t)||util.isObject(e)?objEquiv(t,e):t==e}function isArguments(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function objEquiv(t,e){if(util.isNullOrUndefined(t)||util.isNullOrUndefined(e))return!1;if(t.prototype!==e.prototype)return!1;if(isArguments(t))return isArguments(e)?(t=pSlice.call(t),e=pSlice.call(e),_deepEqual(t,e)):!1;try{var r,i,s=objectKeys(t),n=objectKeys(e)}catch(a){return!1}if(s.length!=n.length)return!1;for(s.sort(),n.sort(),i=s.length-1;i>=0;i--)if(s[i]!=n[i])return!1;for(i=s.length-1;i>=0;i--)if(r=s[i],!_deepEqual(t[r],e[r]))return!1;return!0}function expectedException(t,e){return t&&e?"[object RegExp]"==Object.prototype.toString.call(e)?e.test(t):t instanceof e?!0:e.call({},t)===!0?!0:!1:!1}function _throws(t,e,r,i){var s;util.isString(r)&&(i=r,r=null);try{e()}catch(n){s=n}if(i=(r&&r.name?" ("+r.name+").":".")+(i?" "+i:"."),t&&!s&&fail(s,r,"Missing expected exception"+i),!t&&expectedException(s,r)&&fail(s,r,"Got unwanted exception"+i),t&&s&&r&&!expectedException(s,r)||!t&&s)throw s}var util=require("util/"),pSlice=Array.prototype.slice,hasOwn=Object.prototype.hasOwnProperty,assert=module.exports=ok;assert.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=getMessage(this),this.generatedMessage=!0);var e=t.stackStartFunction||fail;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var r=new Error;if(r.stack){var i=r.stack,s=e.name,n=i.indexOf("\n"+s);if(n>=0){var a=i.indexOf("\n",n+1);i=i.substring(a+1)}this.stack=i}}},util.inherits(assert.AssertionError,Error),assert.fail=fail,assert.ok=ok,assert.equal=function(t,e,r){t!=e&&fail(t,e,r,"==",assert.equal)},assert.notEqual=function(t,e,r){t==e&&fail(t,e,r,"!=",assert.notEqual)},assert.deepEqual=function(t,e,r){_deepEqual(t,e)||fail(t,e,r,"deepEqual",assert.deepEqual)},assert.notDeepEqual=function(t,e,r){_deepEqual(t,e)&&fail(t,e,r,"notDeepEqual",assert.notDeepEqual)},assert.strictEqual=function(t,e,r){t!==e&&fail(t,e,r,"===",assert.strictEqual)},assert.notStrictEqual=function(t,e,r){t===e&&fail(t,e,r,"!==",assert.notStrictEqual)},assert["throws"]=function(t,e,r){_throws.apply(this,[!0].concat(pSlice.call(arguments)))},assert.doesNotThrow=function(t,e){_throws.apply(this,[!1].concat(pSlice.call(arguments)))},assert.ifError=function(t){if(t)throw t};var objectKeys=Object.keys||function(t){var e=[];for(var r in t)hasOwn.call(t,r)&&e.push(r);return e};


},{"util/":109}],65:[function(require,module,exports){
  "use strict";var TYPED_OK="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;exports.assign=function(r){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var e=t.shift();if(e){if("object"!=typeof e)throw new TypeError(e+"must be non-object");for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n])}}return r},exports.shrinkBuf=function(r,t){return r.length===t?r:r.subarray?r.subarray(0,t):(r.length=t,r)};var fnTyped={arraySet:function(r,t,e,n,a){if(t.subarray&&r.subarray)return void r.set(t.subarray(e,e+n),a);for(var o=0;n>o;o++)r[a+o]=t[e+o]},flattenChunks:function(r){var t,e,n,a,o,s;for(n=0,t=0,e=r.length;e>t;t++)n+=r[t].length;for(s=new Uint8Array(n),a=0,t=0,e=r.length;e>t;t++)o=r[t],s.set(o,a),a+=o.length;return s}},fnUntyped={arraySet:function(r,t,e,n,a){for(var o=0;n>o;o++)r[a+o]=t[e+o]},flattenChunks:function(r){return[].concat.apply([],r)}};exports.setTyped=function(r){r?(exports.Buf8=Uint8Array,exports.Buf16=Uint16Array,exports.Buf32=Int32Array,exports.assign(exports,fnTyped)):(exports.Buf8=Array,exports.Buf16=Array,exports.Buf32=Array,exports.assign(exports,fnUntyped))},exports.setTyped(TYPED_OK);


},{}],66:[function(require,module,exports){
  "use strict";function adler32(e,r,o,t){for(var d=65535&e|0,l=e>>>16&65535|0,u=0;0!==o;){u=o>2e3?2e3:o,o-=u;do d=d+r[t++]|0,l=l+d|0;while(--u);d%=65521,l%=65521}return d|l<<16|0}module.exports=adler32;


},{}],67:[function(require,module,exports){
  module.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};


},{}],68:[function(require,module,exports){
  "use strict";function makeTable(){for(var r,a=[],c=0;256>c;c++){r=c;for(var e=0;8>e;e++)r=1&r?3988292384^r>>>1:r>>>1;a[c]=r}return a}function crc32(r,a,c,e){var o=crcTable,t=e+c;r=-1^r;for(var n=e;t>n;n++)r=r>>>8^o[255&(r^a[n])];return-1^r}var crcTable=makeTable();module.exports=crc32;


},{}],69:[function(require,module,exports){
  "use strict";function err(t,e){return t.msg=msg[e],e}function rank(t){return(t<<1)-(t>4?9:0)}function zero(t){for(var e=t.length;--e>=0;)t[e]=0}function flush_pending(t){var e=t.state,_=e.pending;_>t.avail_out&&(_=t.avail_out),0!==_&&(utils.arraySet(t.output,e.pending_buf,e.pending_out,_,t.next_out),t.next_out+=_,e.pending_out+=_,t.total_out+=_,t.avail_out-=_,e.pending-=_,0===e.pending&&(e.pending_out=0))}function flush_block_only(t,e){trees._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,flush_pending(t.strm)}function put_byte(t,e){t.pending_buf[t.pending++]=e}function putShortMSB(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function read_buf(t,e,_,a){var s=t.avail_in;return s>a&&(s=a),0===s?0:(t.avail_in-=s,utils.arraySet(e,t.input,t.next_in,s,_),1===t.state.wrap?t.adler=adler32(t.adler,e,s,_):2===t.state.wrap&&(t.adler=crc32(t.adler,e,s,_)),t.next_in+=s,t.total_in+=s,s)}function longest_match(t,e){var _,a,s=t.max_chain_length,n=t.strstart,i=t.prev_length,r=t.nice_match,l=t.strstart>t.w_size-MIN_LOOKAHEAD?t.strstart-(t.w_size-MIN_LOOKAHEAD):0,h=t.window,o=t.w_mask,d=t.prev,u=t.strstart+MAX_MATCH,f=h[n+i-1],E=h[n+i];t.prev_length>=t.good_match&&(s>>=2),r>t.lookahead&&(r=t.lookahead);do if(_=e,h[_+i]===E&&h[_+i-1]===f&&h[_]===h[n]&&h[++_]===h[n+1]){n+=2,_++;do;while(h[++n]===h[++_]&&h[++n]===h[++_]&&h[++n]===h[++_]&&h[++n]===h[++_]&&h[++n]===h[++_]&&h[++n]===h[++_]&&h[++n]===h[++_]&&h[++n]===h[++_]&&u>n);if(a=MAX_MATCH-(u-n),n=u-MAX_MATCH,a>i){if(t.match_start=e,i=a,a>=r)break;f=h[n+i-1],E=h[n+i]}}while((e=d[e&o])>l&&0!==--s);return i<=t.lookahead?i:t.lookahead}function fill_window(t){var e,_,a,s,n,i=t.w_size;do{if(s=t.window_size-t.lookahead-t.strstart,t.strstart>=i+(i-MIN_LOOKAHEAD)){utils.arraySet(t.window,t.window,i,i,0),t.match_start-=i,t.strstart-=i,t.block_start-=i,_=t.hash_size,e=_;do a=t.head[--e],t.head[e]=a>=i?a-i:0;while(--_);_=i,e=_;do a=t.prev[--e],t.prev[e]=a>=i?a-i:0;while(--_);s+=i}if(0===t.strm.avail_in)break;if(_=read_buf(t.strm,t.window,t.strstart+t.lookahead,s),t.lookahead+=_,t.lookahead+t.insert>=MIN_MATCH)for(n=t.strstart-t.insert,t.ins_h=t.window[n],t.ins_h=(t.ins_h<<t.hash_shift^t.window[n+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[n+MIN_MATCH-1])&t.hash_mask,t.prev[n&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=n,n++,t.insert--,!(t.lookahead+t.insert<MIN_MATCH)););}while(t.lookahead<MIN_LOOKAHEAD&&0!==t.strm.avail_in)}function deflate_stored(t,e){var _=65535;for(_>t.pending_buf_size-5&&(_=t.pending_buf_size-5);;){if(t.lookahead<=1){if(fill_window(t),0===t.lookahead&&e===Z_NO_FLUSH)return BS_NEED_MORE;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var a=t.block_start+_;if((0===t.strstart||t.strstart>=a)&&(t.lookahead=t.strstart-a,t.strstart=a,flush_block_only(t,!1),0===t.strm.avail_out))return BS_NEED_MORE;if(t.strstart-t.block_start>=t.w_size-MIN_LOOKAHEAD&&(flush_block_only(t,!1),0===t.strm.avail_out))return BS_NEED_MORE}return t.insert=0,e===Z_FINISH?(flush_block_only(t,!0),0===t.strm.avail_out?BS_FINISH_STARTED:BS_FINISH_DONE):t.strstart>t.block_start&&(flush_block_only(t,!1),0===t.strm.avail_out)?BS_NEED_MORE:BS_NEED_MORE}function deflate_fast(t,e){for(var _,a;;){if(t.lookahead<MIN_LOOKAHEAD){if(fill_window(t),t.lookahead<MIN_LOOKAHEAD&&e===Z_NO_FLUSH)return BS_NEED_MORE;if(0===t.lookahead)break}if(_=0,t.lookahead>=MIN_MATCH&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+MIN_MATCH-1])&t.hash_mask,_=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==_&&t.strstart-_<=t.w_size-MIN_LOOKAHEAD&&(t.match_length=longest_match(t,_)),t.match_length>=MIN_MATCH)if(a=trees._tr_tally(t,t.strstart-t.match_start,t.match_length-MIN_MATCH),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=MIN_MATCH){t.match_length--;do t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+MIN_MATCH-1])&t.hash_mask,_=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(0!==--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else a=trees._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(a&&(flush_block_only(t,!1),0===t.strm.avail_out))return BS_NEED_MORE}return t.insert=t.strstart<MIN_MATCH-1?t.strstart:MIN_MATCH-1,e===Z_FINISH?(flush_block_only(t,!0),0===t.strm.avail_out?BS_FINISH_STARTED:BS_FINISH_DONE):t.last_lit&&(flush_block_only(t,!1),0===t.strm.avail_out)?BS_NEED_MORE:BS_BLOCK_DONE}function deflate_slow(t,e){for(var _,a,s;;){if(t.lookahead<MIN_LOOKAHEAD){if(fill_window(t),t.lookahead<MIN_LOOKAHEAD&&e===Z_NO_FLUSH)return BS_NEED_MORE;if(0===t.lookahead)break}if(_=0,t.lookahead>=MIN_MATCH&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+MIN_MATCH-1])&t.hash_mask,_=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=MIN_MATCH-1,0!==_&&t.prev_length<t.max_lazy_match&&t.strstart-_<=t.w_size-MIN_LOOKAHEAD&&(t.match_length=longest_match(t,_),t.match_length<=5&&(t.strategy===Z_FILTERED||t.match_length===MIN_MATCH&&t.strstart-t.match_start>4096)&&(t.match_length=MIN_MATCH-1)),t.prev_length>=MIN_MATCH&&t.match_length<=t.prev_length){s=t.strstart+t.lookahead-MIN_MATCH,a=trees._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-MIN_MATCH),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=s&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+MIN_MATCH-1])&t.hash_mask,_=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(0!==--t.prev_length);if(t.match_available=0,t.match_length=MIN_MATCH-1,t.strstart++,a&&(flush_block_only(t,!1),0===t.strm.avail_out))return BS_NEED_MORE}else if(t.match_available){if(a=trees._tr_tally(t,0,t.window[t.strstart-1]),a&&flush_block_only(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return BS_NEED_MORE}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(a=trees._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<MIN_MATCH-1?t.strstart:MIN_MATCH-1,e===Z_FINISH?(flush_block_only(t,!0),0===t.strm.avail_out?BS_FINISH_STARTED:BS_FINISH_DONE):t.last_lit&&(flush_block_only(t,!1),0===t.strm.avail_out)?BS_NEED_MORE:BS_BLOCK_DONE}function deflate_rle(t,e){for(var _,a,s,n,i=t.window;;){if(t.lookahead<=MAX_MATCH){if(fill_window(t),t.lookahead<=MAX_MATCH&&e===Z_NO_FLUSH)return BS_NEED_MORE;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=MIN_MATCH&&t.strstart>0&&(s=t.strstart-1,a=i[s],a===i[++s]&&a===i[++s]&&a===i[++s])){n=t.strstart+MAX_MATCH;do;while(a===i[++s]&&a===i[++s]&&a===i[++s]&&a===i[++s]&&a===i[++s]&&a===i[++s]&&a===i[++s]&&a===i[++s]&&n>s);t.match_length=MAX_MATCH-(n-s),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=MIN_MATCH?(_=trees._tr_tally(t,1,t.match_length-MIN_MATCH),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(_=trees._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),_&&(flush_block_only(t,!1),0===t.strm.avail_out))return BS_NEED_MORE}return t.insert=0,e===Z_FINISH?(flush_block_only(t,!0),0===t.strm.avail_out?BS_FINISH_STARTED:BS_FINISH_DONE):t.last_lit&&(flush_block_only(t,!1),0===t.strm.avail_out)?BS_NEED_MORE:BS_BLOCK_DONE}function deflate_huff(t,e){for(var _;;){if(0===t.lookahead&&(fill_window(t),0===t.lookahead)){if(e===Z_NO_FLUSH)return BS_NEED_MORE;break}if(t.match_length=0,_=trees._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,_&&(flush_block_only(t,!1),0===t.strm.avail_out))return BS_NEED_MORE}return t.insert=0,e===Z_FINISH?(flush_block_only(t,!0),0===t.strm.avail_out?BS_FINISH_STARTED:BS_FINISH_DONE):t.last_lit&&(flush_block_only(t,!1),0===t.strm.avail_out)?BS_NEED_MORE:BS_BLOCK_DONE}function lm_init(t){t.window_size=2*t.w_size,zero(t.head),t.max_lazy_match=configuration_table[t.level].max_lazy,t.good_match=configuration_table[t.level].good_length,t.nice_match=configuration_table[t.level].nice_length,t.max_chain_length=configuration_table[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=MIN_MATCH-1,t.match_available=0,t.ins_h=0}function DeflateState(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Z_DEFLATED,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new utils.Buf16(2*HEAP_SIZE),this.dyn_dtree=new utils.Buf16(2*(2*D_CODES+1)),this.bl_tree=new utils.Buf16(2*(2*BL_CODES+1)),zero(this.dyn_ltree),zero(this.dyn_dtree),zero(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new utils.Buf16(MAX_BITS+1),this.heap=new utils.Buf16(2*L_CODES+1),zero(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new utils.Buf16(2*L_CODES+1),zero(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function deflateResetKeep(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=Z_UNKNOWN,e=t.state,e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?INIT_STATE:BUSY_STATE,t.adler=2===e.wrap?0:1,e.last_flush=Z_NO_FLUSH,trees._tr_init(e),Z_OK):err(t,Z_STREAM_ERROR)}function deflateReset(t){var e=deflateResetKeep(t);return e===Z_OK&&lm_init(t.state),e}function deflateSetHeader(t,e){return t&&t.state?2!==t.state.wrap?Z_STREAM_ERROR:(t.state.gzhead=e,Z_OK):Z_STREAM_ERROR}function deflateInit2(t,e,_,a,s,n){if(!t)return Z_STREAM_ERROR;var i=1;if(e===Z_DEFAULT_COMPRESSION&&(e=6),0>a?(i=0,a=-a):a>15&&(i=2,a-=16),1>s||s>MAX_MEM_LEVEL||_!==Z_DEFLATED||8>a||a>15||0>e||e>9||0>n||n>Z_FIXED)return err(t,Z_STREAM_ERROR);8===a&&(a=9);var r=new DeflateState;return t.state=r,r.strm=t,r.wrap=i,r.gzhead=null,r.w_bits=a,r.w_size=1<<r.w_bits,r.w_mask=r.w_size-1,r.hash_bits=s+7,r.hash_size=1<<r.hash_bits,r.hash_mask=r.hash_size-1,r.hash_shift=~~((r.hash_bits+MIN_MATCH-1)/MIN_MATCH),r.window=new utils.Buf8(2*r.w_size),r.head=new utils.Buf16(r.hash_size),r.prev=new utils.Buf16(r.w_size),r.lit_bufsize=1<<s+6,r.pending_buf_size=4*r.lit_bufsize,r.pending_buf=new utils.Buf8(r.pending_buf_size),r.d_buf=r.lit_bufsize>>1,r.l_buf=3*r.lit_bufsize,r.level=e,r.strategy=n,r.method=_,deflateReset(t)}function deflateInit(t,e){return deflateInit2(t,e,Z_DEFLATED,MAX_WBITS,DEF_MEM_LEVEL,Z_DEFAULT_STRATEGY)}function deflate(t,e){var _,a,s,n;if(!t||!t.state||e>Z_BLOCK||0>e)return t?err(t,Z_STREAM_ERROR):Z_STREAM_ERROR;if(a=t.state,!t.output||!t.input&&0!==t.avail_in||a.status===FINISH_STATE&&e!==Z_FINISH)return err(t,0===t.avail_out?Z_BUF_ERROR:Z_STREAM_ERROR);if(a.strm=t,_=a.last_flush,a.last_flush=e,a.status===INIT_STATE)if(2===a.wrap)t.adler=0,put_byte(a,31),put_byte(a,139),put_byte(a,8),a.gzhead?(put_byte(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(a.gzhead.extra?4:0)+(a.gzhead.name?8:0)+(a.gzhead.comment?16:0)),put_byte(a,255&a.gzhead.time),put_byte(a,a.gzhead.time>>8&255),put_byte(a,a.gzhead.time>>16&255),put_byte(a,a.gzhead.time>>24&255),put_byte(a,9===a.level?2:a.strategy>=Z_HUFFMAN_ONLY||a.level<2?4:0),put_byte(a,255&a.gzhead.os),a.gzhead.extra&&a.gzhead.extra.length&&(put_byte(a,255&a.gzhead.extra.length),put_byte(a,a.gzhead.extra.length>>8&255)),a.gzhead.hcrc&&(t.adler=crc32(t.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=EXTRA_STATE):(put_byte(a,0),put_byte(a,0),put_byte(a,0),put_byte(a,0),put_byte(a,0),put_byte(a,9===a.level?2:a.strategy>=Z_HUFFMAN_ONLY||a.level<2?4:0),put_byte(a,OS_CODE),a.status=BUSY_STATE);else{var i=Z_DEFLATED+(a.w_bits-8<<4)<<8,r=-1;r=a.strategy>=Z_HUFFMAN_ONLY||a.level<2?0:a.level<6?1:6===a.level?2:3,i|=r<<6,0!==a.strstart&&(i|=PRESET_DICT),i+=31-i%31,a.status=BUSY_STATE,putShortMSB(a,i),0!==a.strstart&&(putShortMSB(a,t.adler>>>16),putShortMSB(a,65535&t.adler)),t.adler=1}if(a.status===EXTRA_STATE)if(a.gzhead.extra){for(s=a.pending;a.gzindex<(65535&a.gzhead.extra.length)&&(a.pending!==a.pending_buf_size||(a.gzhead.hcrc&&a.pending>s&&(t.adler=crc32(t.adler,a.pending_buf,a.pending-s,s)),flush_pending(t),s=a.pending,a.pending!==a.pending_buf_size));)put_byte(a,255&a.gzhead.extra[a.gzindex]),a.gzindex++;a.gzhead.hcrc&&a.pending>s&&(t.adler=crc32(t.adler,a.pending_buf,a.pending-s,s)),a.gzindex===a.gzhead.extra.length&&(a.gzindex=0,a.status=NAME_STATE)}else a.status=NAME_STATE;if(a.status===NAME_STATE)if(a.gzhead.name){s=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>s&&(t.adler=crc32(t.adler,a.pending_buf,a.pending-s,s)),flush_pending(t),s=a.pending,a.pending===a.pending_buf_size)){n=1;break}n=a.gzindex<a.gzhead.name.length?255&a.gzhead.name.charCodeAt(a.gzindex++):0,put_byte(a,n)}while(0!==n);a.gzhead.hcrc&&a.pending>s&&(t.adler=crc32(t.adler,a.pending_buf,a.pending-s,s)),0===n&&(a.gzindex=0,a.status=COMMENT_STATE)}else a.status=COMMENT_STATE;if(a.status===COMMENT_STATE)if(a.gzhead.comment){s=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>s&&(t.adler=crc32(t.adler,a.pending_buf,a.pending-s,s)),flush_pending(t),s=a.pending,a.pending===a.pending_buf_size)){n=1;break}n=a.gzindex<a.gzhead.comment.length?255&a.gzhead.comment.charCodeAt(a.gzindex++):0,put_byte(a,n)}while(0!==n);a.gzhead.hcrc&&a.pending>s&&(t.adler=crc32(t.adler,a.pending_buf,a.pending-s,s)),0===n&&(a.status=HCRC_STATE)}else a.status=HCRC_STATE;if(a.status===HCRC_STATE&&(a.gzhead.hcrc?(a.pending+2>a.pending_buf_size&&flush_pending(t),a.pending+2<=a.pending_buf_size&&(put_byte(a,255&t.adler),put_byte(a,t.adler>>8&255),t.adler=0,a.status=BUSY_STATE)):a.status=BUSY_STATE),0!==a.pending){if(flush_pending(t),0===t.avail_out)return a.last_flush=-1,Z_OK}else if(0===t.avail_in&&rank(e)<=rank(_)&&e!==Z_FINISH)return err(t,Z_BUF_ERROR);if(a.status===FINISH_STATE&&0!==t.avail_in)return err(t,Z_BUF_ERROR);if(0!==t.avail_in||0!==a.lookahead||e!==Z_NO_FLUSH&&a.status!==FINISH_STATE){var l=a.strategy===Z_HUFFMAN_ONLY?deflate_huff(a,e):a.strategy===Z_RLE?deflate_rle(a,e):configuration_table[a.level].func(a,e);if((l===BS_FINISH_STARTED||l===BS_FINISH_DONE)&&(a.status=FINISH_STATE),l===BS_NEED_MORE||l===BS_FINISH_STARTED)return 0===t.avail_out&&(a.last_flush=-1),Z_OK;if(l===BS_BLOCK_DONE&&(e===Z_PARTIAL_FLUSH?trees._tr_align(a):e!==Z_BLOCK&&(trees._tr_stored_block(a,0,0,!1),e===Z_FULL_FLUSH&&(zero(a.head),0===a.lookahead&&(a.strstart=0,a.block_start=0,a.insert=0))),flush_pending(t),0===t.avail_out))return a.last_flush=-1,Z_OK}return e!==Z_FINISH?Z_OK:a.wrap<=0?Z_STREAM_END:(2===a.wrap?(put_byte(a,255&t.adler),put_byte(a,t.adler>>8&255),put_byte(a,t.adler>>16&255),put_byte(a,t.adler>>24&255),put_byte(a,255&t.total_in),put_byte(a,t.total_in>>8&255),put_byte(a,t.total_in>>16&255),put_byte(a,t.total_in>>24&255)):(putShortMSB(a,t.adler>>>16),putShortMSB(a,65535&t.adler)),flush_pending(t),a.wrap>0&&(a.wrap=-a.wrap),0!==a.pending?Z_OK:Z_STREAM_END)}function deflateEnd(t){var e;return t&&t.state?(e=t.state.status,e!==INIT_STATE&&e!==EXTRA_STATE&&e!==NAME_STATE&&e!==COMMENT_STATE&&e!==HCRC_STATE&&e!==BUSY_STATE&&e!==FINISH_STATE?err(t,Z_STREAM_ERROR):(t.state=null,e===BUSY_STATE?err(t,Z_DATA_ERROR):Z_OK)):Z_STREAM_ERROR}var utils=require("../utils/common"),trees=require("./trees"),adler32=require("./adler32"),crc32=require("./crc32"),msg=require("./messages"),Z_NO_FLUSH=0,Z_PARTIAL_FLUSH=1,Z_FULL_FLUSH=3,Z_FINISH=4,Z_BLOCK=5,Z_OK=0,Z_STREAM_END=1,Z_STREAM_ERROR=-2,Z_DATA_ERROR=-3,Z_BUF_ERROR=-5,Z_DEFAULT_COMPRESSION=-1,Z_FILTERED=1,Z_HUFFMAN_ONLY=2,Z_RLE=3,Z_FIXED=4,Z_DEFAULT_STRATEGY=0,Z_UNKNOWN=2,Z_DEFLATED=8,MAX_MEM_LEVEL=9,MAX_WBITS=15,DEF_MEM_LEVEL=8,LENGTH_CODES=29,LITERALS=256,L_CODES=LITERALS+1+LENGTH_CODES,D_CODES=30,BL_CODES=19,HEAP_SIZE=2*L_CODES+1,MAX_BITS=15,MIN_MATCH=3,MAX_MATCH=258,MIN_LOOKAHEAD=MAX_MATCH+MIN_MATCH+1,PRESET_DICT=32,INIT_STATE=42,EXTRA_STATE=69,NAME_STATE=73,COMMENT_STATE=91,HCRC_STATE=103,BUSY_STATE=113,FINISH_STATE=666,BS_NEED_MORE=1,BS_BLOCK_DONE=2,BS_FINISH_STARTED=3,BS_FINISH_DONE=4,OS_CODE=3,Config=function(t,e,_,a,s){this.good_length=t,this.max_lazy=e,this.nice_length=_,this.max_chain=a,this.func=s},configuration_table;configuration_table=[new Config(0,0,0,0,deflate_stored),new Config(4,4,8,4,deflate_fast),new Config(4,5,16,8,deflate_fast),new Config(4,6,32,32,deflate_fast),new Config(4,4,16,16,deflate_slow),new Config(8,16,32,32,deflate_slow),new Config(8,16,128,128,deflate_slow),new Config(8,32,128,256,deflate_slow),new Config(32,128,258,1024,deflate_slow),new Config(32,258,258,4096,deflate_slow)],exports.deflateInit=deflateInit,exports.deflateInit2=deflateInit2,exports.deflateReset=deflateReset,exports.deflateResetKeep=deflateResetKeep,exports.deflateSetHeader=deflateSetHeader,exports.deflate=deflate,exports.deflateEnd=deflateEnd,exports.deflateInfo="pako deflate (from Nodeca project)";


},{"../utils/common":65,"./adler32":66,"./crc32":68,"./messages":73,"./trees":74}],70:[function(require,module,exports){
  "use strict";var BAD=30,TYPE=12;module.exports=function(i,e){var o,a,t,d,n,l,s,f,r,b,c,u,v,m,w,h,k,_,x,g,A,B,D,p,E;o=i.state,a=i.next_in,p=i.input,t=a+(i.avail_in-5),d=i.next_out,E=i.output,n=d-(e-i.avail_out),l=d+(i.avail_out-257),s=o.dmax,f=o.wsize,r=o.whave,b=o.wnext,c=o.window,u=o.hold,v=o.bits,m=o.lencode,w=o.distcode,h=(1<<o.lenbits)-1,k=(1<<o.distbits)-1;i:do{15>v&&(u+=p[a++]<<v,v+=8,u+=p[a++]<<v,v+=8),_=m[u&h];e:for(;;){if(x=_>>>24,u>>>=x,v-=x,x=_>>>16&255,0===x)E[d++]=65535&_;else{if(!(16&x)){if(0===(64&x)){_=m[(65535&_)+(u&(1<<x)-1)];continue e}if(32&x){o.mode=TYPE;break i}i.msg="invalid literal/length code",o.mode=BAD;break i}g=65535&_,x&=15,x&&(x>v&&(u+=p[a++]<<v,v+=8),g+=u&(1<<x)-1,u>>>=x,v-=x),15>v&&(u+=p[a++]<<v,v+=8,u+=p[a++]<<v,v+=8),_=w[u&k];o:for(;;){if(x=_>>>24,u>>>=x,v-=x,x=_>>>16&255,!(16&x)){if(0===(64&x)){_=w[(65535&_)+(u&(1<<x)-1)];continue o}i.msg="invalid distance code",o.mode=BAD;break i}if(A=65535&_,x&=15,x>v&&(u+=p[a++]<<v,v+=8,x>v&&(u+=p[a++]<<v,v+=8)),A+=u&(1<<x)-1,A>s){i.msg="invalid distance too far back",o.mode=BAD;break i}if(u>>>=x,v-=x,x=d-n,A>x){if(x=A-x,x>r&&o.sane){i.msg="invalid distance too far back",o.mode=BAD;break i}if(B=0,D=c,0===b){if(B+=f-x,g>x){g-=x;do E[d++]=c[B++];while(--x);B=d-A,D=E}}else if(x>b){if(B+=f+b-x,x-=b,g>x){g-=x;do E[d++]=c[B++];while(--x);if(B=0,g>b){x=b,g-=x;do E[d++]=c[B++];while(--x);B=d-A,D=E}}}else if(B+=b-x,g>x){g-=x;do E[d++]=c[B++];while(--x);B=d-A,D=E}for(;g>2;)E[d++]=D[B++],E[d++]=D[B++],E[d++]=D[B++],g-=3;g&&(E[d++]=D[B++],g>1&&(E[d++]=D[B++]))}else{B=d-A;do E[d++]=E[B++],E[d++]=E[B++],E[d++]=E[B++],g-=3;while(g>2);g&&(E[d++]=E[B++],g>1&&(E[d++]=E[B++]))}break}}break}}while(t>a&&l>d);g=v>>3,a-=g,v-=g<<3,u&=(1<<v)-1,i.next_in=a,i.next_out=d,i.avail_in=t>a?5+(t-a):5-(a-t),i.avail_out=l>d?257+(l-d):257-(d-l),o.hold=u,o.bits=v};


},{}],71:[function(require,module,exports){
  "use strict";function ZSWAP32(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function InflateState(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new utils.Buf16(320),this.work=new utils.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function inflateResetKeep(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=HEAD,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new utils.Buf32(ENOUGH_LENS),t.distcode=t.distdyn=new utils.Buf32(ENOUGH_DISTS),t.sane=1,t.back=-1,Z_OK):Z_STREAM_ERROR}function inflateReset(e){var t;return e&&e.state?(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,inflateResetKeep(e)):Z_STREAM_ERROR}function inflateReset2(e,t){var a,i;return e&&e.state?(i=e.state,0>t?(a=0,t=-t):(a=(t>>4)+1,48>t&&(t&=15)),t&&(8>t||t>15)?Z_STREAM_ERROR:(null!==i.window&&i.wbits!==t&&(i.window=null),i.wrap=a,i.wbits=t,inflateReset(e))):Z_STREAM_ERROR}function inflateInit2(e,t){var a,i;return e?(i=new InflateState,e.state=i,i.window=null,a=inflateReset2(e,t),a!==Z_OK&&(e.state=null),a):Z_STREAM_ERROR}function inflateInit(e){return inflateInit2(e,DEF_WBITS)}function fixedtables(e){if(virgin){var t;for(lenfix=new utils.Buf32(512),distfix=new utils.Buf32(32),t=0;144>t;)e.lens[t++]=8;for(;256>t;)e.lens[t++]=9;for(;280>t;)e.lens[t++]=7;for(;288>t;)e.lens[t++]=8;for(inflate_table(LENS,e.lens,0,288,lenfix,0,e.work,{bits:9}),t=0;32>t;)e.lens[t++]=5;inflate_table(DISTS,e.lens,0,32,distfix,0,e.work,{bits:5}),virgin=!1}e.lencode=lenfix,e.lenbits=9,e.distcode=distfix,e.distbits=5}function updatewindow(e,t,a,i){var n,s=e.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new utils.Buf8(s.wsize)),i>=s.wsize?(utils.arraySet(s.window,t,a-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(n=s.wsize-s.wnext,n>i&&(n=i),utils.arraySet(s.window,t,a-i,n,s.wnext),i-=n,i?(utils.arraySet(s.window,t,a-i,i,0),s.wnext=i,s.whave=s.wsize):(s.wnext+=n,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=n))),0}function inflate(e,t){var a,i,n,s,l,r,o,d,f,c,h,E,b,k,_,m,u,w,R,T,g,D,S,x,A=0,v=new utils.Buf8(4),O=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return Z_STREAM_ERROR;a=e.state,a.mode===TYPE&&(a.mode=TYPEDO),l=e.next_out,n=e.output,o=e.avail_out,s=e.next_in,i=e.input,r=e.avail_in,d=a.hold,f=a.bits,c=r,h=o,D=Z_OK;e:for(;;)switch(a.mode){case HEAD:if(0===a.wrap){a.mode=TYPEDO;break}for(;16>f;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(2&a.wrap&&35615===d){a.check=0,v[0]=255&d,v[1]=d>>>8&255,a.check=crc32(a.check,v,2,0),d=0,f=0,a.mode=FLAGS;break}if(a.flags=0,a.head&&(a.head.done=!1),!(1&a.wrap)||(((255&d)<<8)+(d>>8))%31){e.msg="incorrect header check",a.mode=BAD;break}if((15&d)!==Z_DEFLATED){e.msg="unknown compression method",a.mode=BAD;break}if(d>>>=4,f-=4,g=(15&d)+8,0===a.wbits)a.wbits=g;else if(g>a.wbits){e.msg="invalid window size",a.mode=BAD;break}a.dmax=1<<g,e.adler=a.check=1,a.mode=512&d?DICTID:TYPE,d=0,f=0;break;case FLAGS:for(;16>f;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(a.flags=d,(255&a.flags)!==Z_DEFLATED){e.msg="unknown compression method",a.mode=BAD;break}if(57344&a.flags){e.msg="unknown header flags set",a.mode=BAD;break}a.head&&(a.head.text=d>>8&1),512&a.flags&&(v[0]=255&d,v[1]=d>>>8&255,a.check=crc32(a.check,v,2,0)),d=0,f=0,a.mode=TIME;case TIME:for(;32>f;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}a.head&&(a.head.time=d),512&a.flags&&(v[0]=255&d,v[1]=d>>>8&255,v[2]=d>>>16&255,v[3]=d>>>24&255,a.check=crc32(a.check,v,4,0)),d=0,f=0,a.mode=OS;case OS:for(;16>f;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}a.head&&(a.head.xflags=255&d,a.head.os=d>>8),512&a.flags&&(v[0]=255&d,v[1]=d>>>8&255,a.check=crc32(a.check,v,2,0)),d=0,f=0,a.mode=EXLEN;case EXLEN:if(1024&a.flags){for(;16>f;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}a.length=d,a.head&&(a.head.extra_len=d),512&a.flags&&(v[0]=255&d,v[1]=d>>>8&255,a.check=crc32(a.check,v,2,0)),d=0,f=0}else a.head&&(a.head.extra=null);a.mode=EXTRA;case EXTRA:if(1024&a.flags&&(E=a.length,E>r&&(E=r),E&&(a.head&&(g=a.head.extra_len-a.length,a.head.extra||(a.head.extra=new Array(a.head.extra_len)),utils.arraySet(a.head.extra,i,s,E,g)),512&a.flags&&(a.check=crc32(a.check,i,E,s)),r-=E,s+=E,a.length-=E),a.length))break e;a.length=0,a.mode=NAME;case NAME:if(2048&a.flags){if(0===r)break e;E=0;do g=i[s+E++],a.head&&g&&a.length<65536&&(a.head.name+=String.fromCharCode(g));while(g&&r>E);if(512&a.flags&&(a.check=crc32(a.check,i,E,s)),r-=E,s+=E,g)break e}else a.head&&(a.head.name=null);a.length=0,a.mode=COMMENT;case COMMENT:if(4096&a.flags){if(0===r)break e;E=0;do g=i[s+E++],a.head&&g&&a.length<65536&&(a.head.comment+=String.fromCharCode(g));while(g&&r>E);if(512&a.flags&&(a.check=crc32(a.check,i,E,s)),r-=E,s+=E,g)break e}else a.head&&(a.head.comment=null);a.mode=HCRC;case HCRC:if(512&a.flags){for(;16>f;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(d!==(65535&a.check)){e.msg="header crc mismatch",a.mode=BAD;break}d=0,f=0}a.head&&(a.head.hcrc=a.flags>>9&1,a.head.done=!0),e.adler=a.check=0,a.mode=TYPE;break;case DICTID:for(;32>f;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}e.adler=a.check=ZSWAP32(d),d=0,f=0,a.mode=DICT;case DICT:if(0===a.havedict)return e.next_out=l,e.avail_out=o,e.next_in=s,e.avail_in=r,a.hold=d,a.bits=f,Z_NEED_DICT;e.adler=a.check=1,a.mode=TYPE;case TYPE:if(t===Z_BLOCK||t===Z_TREES)break e;case TYPEDO:if(a.last){d>>>=7&f,f-=7&f,a.mode=CHECK;break}for(;3>f;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}switch(a.last=1&d,d>>>=1,f-=1,3&d){case 0:a.mode=STORED;break;case 1:if(fixedtables(a),a.mode=LEN_,t===Z_TREES){d>>>=2,f-=2;break e}break;case 2:a.mode=TABLE;break;case 3:e.msg="invalid block type",a.mode=BAD}d>>>=2,f-=2;break;case STORED:for(d>>>=7&f,f-=7&f;32>f;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if((65535&d)!==(d>>>16^65535)){e.msg="invalid stored block lengths",a.mode=BAD;break}if(a.length=65535&d,d=0,f=0,a.mode=COPY_,t===Z_TREES)break e;case COPY_:a.mode=COPY;case COPY:if(E=a.length){if(E>r&&(E=r),E>o&&(E=o),0===E)break e;utils.arraySet(n,i,s,E,l),r-=E,s+=E,o-=E,l+=E,a.length-=E;break}a.mode=TYPE;break;case TABLE:for(;14>f;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(a.nlen=(31&d)+257,d>>>=5,f-=5,a.ndist=(31&d)+1,d>>>=5,f-=5,a.ncode=(15&d)+4,d>>>=4,f-=4,a.nlen>286||a.ndist>30){e.msg="too many length or distance symbols",a.mode=BAD;break}a.have=0,a.mode=LENLENS;case LENLENS:for(;a.have<a.ncode;){for(;3>f;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}a.lens[O[a.have++]]=7&d,d>>>=3,f-=3}for(;a.have<19;)a.lens[O[a.have++]]=0;if(a.lencode=a.lendyn,a.lenbits=7,S={bits:a.lenbits},D=inflate_table(CODES,a.lens,0,19,a.lencode,0,a.work,S),a.lenbits=S.bits,D){e.msg="invalid code lengths set",a.mode=BAD;break}a.have=0,a.mode=CODELENS;case CODELENS:for(;a.have<a.nlen+a.ndist;){for(;A=a.lencode[d&(1<<a.lenbits)-1],_=A>>>24,m=A>>>16&255,u=65535&A,!(f>=_);){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(16>u)d>>>=_,f-=_,a.lens[a.have++]=u;else{if(16===u){for(x=_+2;x>f;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(d>>>=_,f-=_,0===a.have){e.msg="invalid bit length repeat",a.mode=BAD;break}g=a.lens[a.have-1],E=3+(3&d),d>>>=2,f-=2}else if(17===u){for(x=_+3;x>f;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}d>>>=_,f-=_,g=0,E=3+(7&d),d>>>=3,f-=3}else{for(x=_+7;x>f;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}d>>>=_,f-=_,g=0,E=11+(127&d),d>>>=7,f-=7}if(a.have+E>a.nlen+a.ndist){e.msg="invalid bit length repeat",a.mode=BAD;break}for(;E--;)a.lens[a.have++]=g}}if(a.mode===BAD)break;if(0===a.lens[256]){e.msg="invalid code -- missing end-of-block",a.mode=BAD;break}if(a.lenbits=9,S={bits:a.lenbits},D=inflate_table(LENS,a.lens,0,a.nlen,a.lencode,0,a.work,S),a.lenbits=S.bits,D){e.msg="invalid literal/lengths set",a.mode=BAD;break}if(a.distbits=6,a.distcode=a.distdyn,S={bits:a.distbits},D=inflate_table(DISTS,a.lens,a.nlen,a.ndist,a.distcode,0,a.work,S),a.distbits=S.bits,D){e.msg="invalid distances set",a.mode=BAD;break}if(a.mode=LEN_,t===Z_TREES)break e;case LEN_:a.mode=LEN;case LEN:if(r>=6&&o>=258){e.next_out=l,e.avail_out=o,e.next_in=s,e.avail_in=r,a.hold=d,a.bits=f,inflate_fast(e,h),l=e.next_out,n=e.output,o=e.avail_out,s=e.next_in,i=e.input,r=e.avail_in,d=a.hold,f=a.bits,a.mode===TYPE&&(a.back=-1);break}for(a.back=0;A=a.lencode[d&(1<<a.lenbits)-1],_=A>>>24,m=A>>>16&255,u=65535&A,!(f>=_);){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(m&&0===(240&m)){for(w=_,R=m,T=u;A=a.lencode[T+((d&(1<<w+R)-1)>>w)],_=A>>>24,m=A>>>16&255,u=65535&A,!(f>=w+_);){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}d>>>=w,f-=w,a.back+=w}if(d>>>=_,f-=_,a.back+=_,a.length=u,0===m){a.mode=LIT;break}if(32&m){a.back=-1,a.mode=TYPE;break}if(64&m){e.msg="invalid literal/length code",a.mode=BAD;break}a.extra=15&m,a.mode=LENEXT;case LENEXT:if(a.extra){for(x=a.extra;x>f;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}a.length+=d&(1<<a.extra)-1,d>>>=a.extra,f-=a.extra,a.back+=a.extra}a.was=a.length,a.mode=DIST;case DIST:for(;A=a.distcode[d&(1<<a.distbits)-1],_=A>>>24,m=A>>>16&255,u=65535&A,!(f>=_);){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(0===(240&m)){for(w=_,R=m,T=u;A=a.distcode[T+((d&(1<<w+R)-1)>>w)],_=A>>>24,m=A>>>16&255,u=65535&A,!(f>=w+_);){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}d>>>=w,f-=w,a.back+=w}if(d>>>=_,f-=_,a.back+=_,64&m){e.msg="invalid distance code",a.mode=BAD;break}a.offset=u,a.extra=15&m,a.mode=DISTEXT;case DISTEXT:if(a.extra){for(x=a.extra;x>f;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}a.offset+=d&(1<<a.extra)-1,d>>>=a.extra,f-=a.extra,a.back+=a.extra}if(a.offset>a.dmax){e.msg="invalid distance too far back",a.mode=BAD;break}a.mode=MATCH;case MATCH:if(0===o)break e;if(E=h-o,a.offset>E){if(E=a.offset-E,E>a.whave&&a.sane){e.msg="invalid distance too far back",a.mode=BAD;break}E>a.wnext?(E-=a.wnext,b=a.wsize-E):b=a.wnext-E,E>a.length&&(E=a.length),k=a.window}else k=n,b=l-a.offset,E=a.length;E>o&&(E=o),o-=E,a.length-=E;do n[l++]=k[b++];while(--E);0===a.length&&(a.mode=LEN);break;case LIT:if(0===o)break e;n[l++]=a.length,o--,a.mode=LEN;break;case CHECK:if(a.wrap){for(;32>f;){if(0===r)break e;r--,d|=i[s++]<<f,f+=8}if(h-=o,e.total_out+=h,a.total+=h,h&&(e.adler=a.check=a.flags?crc32(a.check,n,h,l-h):adler32(a.check,n,h,l-h)),h=o,(a.flags?d:ZSWAP32(d))!==a.check){e.msg="incorrect data check",a.mode=BAD;break}d=0,f=0}a.mode=LENGTH;case LENGTH:if(a.wrap&&a.flags){for(;32>f;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(d!==(4294967295&a.total)){e.msg="incorrect length check",a.mode=BAD;break}d=0,f=0}a.mode=DONE;case DONE:D=Z_STREAM_END;break e;case BAD:D=Z_DATA_ERROR;break e;case MEM:return Z_MEM_ERROR;case SYNC:default:return Z_STREAM_ERROR}return e.next_out=l,e.avail_out=o,e.next_in=s,e.avail_in=r,a.hold=d,a.bits=f,(a.wsize||h!==e.avail_out&&a.mode<BAD&&(a.mode<CHECK||t!==Z_FINISH))&&updatewindow(e,e.output,e.next_out,h-e.avail_out)?(a.mode=MEM,Z_MEM_ERROR):(c-=e.avail_in,h-=e.avail_out,e.total_in+=c,e.total_out+=h,a.total+=h,a.wrap&&h&&(e.adler=a.check=a.flags?crc32(a.check,n,h,e.next_out-h):adler32(a.check,n,h,e.next_out-h)),e.data_type=a.bits+(a.last?64:0)+(a.mode===TYPE?128:0)+(a.mode===LEN_||a.mode===COPY_?256:0),(0===c&&0===h||t===Z_FINISH)&&D===Z_OK&&(D=Z_BUF_ERROR),D)}function inflateEnd(e){if(!e||!e.state)return Z_STREAM_ERROR;var t=e.state;return t.window&&(t.window=null),e.state=null,Z_OK}function inflateGetHeader(e,t){var a;return e&&e.state?(a=e.state,0===(2&a.wrap)?Z_STREAM_ERROR:(a.head=t,t.done=!1,Z_OK)):Z_STREAM_ERROR}var utils=require("../utils/common"),adler32=require("./adler32"),crc32=require("./crc32"),inflate_fast=require("./inffast"),inflate_table=require("./inftrees"),CODES=0,LENS=1,DISTS=2,Z_FINISH=4,Z_BLOCK=5,Z_TREES=6,Z_OK=0,Z_STREAM_END=1,Z_NEED_DICT=2,Z_STREAM_ERROR=-2,Z_DATA_ERROR=-3,Z_MEM_ERROR=-4,Z_BUF_ERROR=-5,Z_DEFLATED=8,HEAD=1,FLAGS=2,TIME=3,OS=4,EXLEN=5,EXTRA=6,NAME=7,COMMENT=8,HCRC=9,DICTID=10,DICT=11,TYPE=12,TYPEDO=13,STORED=14,COPY_=15,COPY=16,TABLE=17,LENLENS=18,CODELENS=19,LEN_=20,LEN=21,LENEXT=22,DIST=23,DISTEXT=24,MATCH=25,LIT=26,CHECK=27,LENGTH=28,DONE=29,BAD=30,MEM=31,SYNC=32,ENOUGH_LENS=852,ENOUGH_DISTS=592,MAX_WBITS=15,DEF_WBITS=MAX_WBITS,virgin=!0,lenfix,distfix;exports.inflateReset=inflateReset,exports.inflateReset2=inflateReset2,exports.inflateResetKeep=inflateResetKeep,exports.inflateInit=inflateInit,exports.inflateInit2=inflateInit2,exports.inflate=inflate,exports.inflateEnd=inflateEnd,exports.inflateGetHeader=inflateGetHeader,exports.inflateInfo="pako inflate (from Nodeca project)";


},{"../utils/common":65,"./adler32":66,"./crc32":68,"./inffast":70,"./inftrees":72}],72:[function(require,module,exports){
  "use strict";var utils=require("../utils/common"),MAXBITS=15,ENOUGH_LENS=852,ENOUGH_DISTS=592,CODES=0,LENS=1,DISTS=2,lbase=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],lext=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],dbase=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],dext=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];module.exports=function(r,S,e,f,t,i,u,o){var E,l,s,n,I,N,T,B,D,O=o.bits,a=0,b=0,A=0,L=0,M=0,X=0,d=0,G=0,H=0,U=0,_=null,x=0,c=new utils.Buf16(MAXBITS+1),m=new utils.Buf16(MAXBITS+1),v=null,w=0;for(a=0;MAXBITS>=a;a++)c[a]=0;for(b=0;f>b;b++)c[S[e+b]]++;for(M=O,L=MAXBITS;L>=1&&0===c[L];L--);if(M>L&&(M=L),0===L)return t[i++]=20971520,t[i++]=20971520,o.bits=1,0;for(A=1;L>A&&0===c[A];A++);for(A>M&&(M=A),G=1,a=1;MAXBITS>=a;a++)if(G<<=1,G-=c[a],0>G)return-1;if(G>0&&(r===CODES||1!==L))return-1;for(m[1]=0,a=1;MAXBITS>a;a++)m[a+1]=m[a]+c[a];for(b=0;f>b;b++)0!==S[e+b]&&(u[m[S[e+b]]++]=b);if(r===CODES?(_=v=u,N=19):r===LENS?(_=lbase,x-=257,v=lext,w-=257,N=256):(_=dbase,v=dext,N=-1),U=0,b=0,a=A,I=i,X=M,d=0,s=-1,H=1<<M,n=H-1,r===LENS&&H>ENOUGH_LENS||r===DISTS&&H>ENOUGH_DISTS)return 1;for(var C=0;;){C++,T=a-d,u[b]<N?(B=0,D=u[b]):u[b]>N?(B=v[w+u[b]],D=_[x+u[b]]):(B=96,D=0),E=1<<a-d,l=1<<X,A=l;do l-=E,t[I+(U>>d)+l]=T<<24|B<<16|D|0;while(0!==l);for(E=1<<a-1;U&E;)E>>=1;if(0!==E?(U&=E-1,U+=E):U=0,b++,0===--c[a]){if(a===L)break;a=S[e+u[b]]}if(a>M&&(U&n)!==s){for(0===d&&(d=M),I+=A,X=a-d,G=1<<X;L>X+d&&(G-=c[X+d],!(0>=G));)X++,G<<=1;if(H+=1<<X,r===LENS&&H>ENOUGH_LENS||r===DISTS&&H>ENOUGH_DISTS)return 1;s=U&n,t[s]=M<<24|X<<16|I-i|0}}return 0!==U&&(t[I+U]=a-d<<24|64<<16|0),o.bits=M,0};


},{"../utils/common":65}],73:[function(require,module,exports){
  "use strict";module.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};


},{}],74:[function(require,module,exports){
  "use strict";function zero(e){for(var _=e.length;--_>=0;)e[_]=0}function d_code(e){return 256>e?_dist_code[e]:_dist_code[256+(e>>>7)]}function put_short(e,_){e.pending_buf[e.pending++]=255&_,e.pending_buf[e.pending++]=_>>>8&255}function send_bits(e,_,t){e.bi_valid>Buf_size-t?(e.bi_buf|=_<<e.bi_valid&65535,put_short(e,e.bi_buf),e.bi_buf=_>>Buf_size-e.bi_valid,e.bi_valid+=t-Buf_size):(e.bi_buf|=_<<e.bi_valid&65535,e.bi_valid+=t)}function send_code(e,_,t){send_bits(e,t[2*_],t[2*_+1])}function bi_reverse(e,_){var t=0;do t|=1&e,e>>>=1,t<<=1;while(--_>0);return t>>>1}function bi_flush(e){16===e.bi_valid?(put_short(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}function gen_bitlen(e,_){var t,r,i,n,s,d,a=_.dyn_tree,l=_.max_code,c=_.stat_desc.static_tree,o=_.stat_desc.has_stree,b=_.stat_desc.extra_bits,f=_.stat_desc.extra_base,u=_.stat_desc.max_length,p=0;for(n=0;MAX_BITS>=n;n++)e.bl_count[n]=0;for(a[2*e.heap[e.heap_max]+1]=0,t=e.heap_max+1;HEAP_SIZE>t;t++)r=e.heap[t],n=a[2*a[2*r+1]+1]+1,n>u&&(n=u,p++),a[2*r+1]=n,r>l||(e.bl_count[n]++,s=0,r>=f&&(s=b[r-f]),d=a[2*r],e.opt_len+=d*(n+s),o&&(e.static_len+=d*(c[2*r+1]+s)));if(0!==p){do{for(n=u-1;0===e.bl_count[n];)n--;e.bl_count[n]--,e.bl_count[n+1]+=2,e.bl_count[u]--,p-=2}while(p>0);for(n=u;0!==n;n--)for(r=e.bl_count[n];0!==r;)i=e.heap[--t],i>l||(a[2*i+1]!==n&&(e.opt_len+=(n-a[2*i+1])*a[2*i],a[2*i+1]=n),r--)}}function gen_codes(e,_,t){var r,i,n=new Array(MAX_BITS+1),s=0;for(r=1;MAX_BITS>=r;r++)n[r]=s=s+t[r-1]<<1;for(i=0;_>=i;i++){var d=e[2*i+1];0!==d&&(e[2*i]=bi_reverse(n[d]++,d))}}function tr_static_init(){var e,_,t,r,i,n=new Array(MAX_BITS+1);for(t=0,r=0;LENGTH_CODES-1>r;r++)for(base_length[r]=t,e=0;e<1<<extra_lbits[r];e++)_length_code[t++]=r;for(_length_code[t-1]=r,i=0,r=0;16>r;r++)for(base_dist[r]=i,e=0;e<1<<extra_dbits[r];e++)_dist_code[i++]=r;for(i>>=7;D_CODES>r;r++)for(base_dist[r]=i<<7,e=0;e<1<<extra_dbits[r]-7;e++)_dist_code[256+i++]=r;for(_=0;MAX_BITS>=_;_++)n[_]=0;for(e=0;143>=e;)static_ltree[2*e+1]=8,e++,n[8]++;for(;255>=e;)static_ltree[2*e+1]=9,e++,n[9]++;for(;279>=e;)static_ltree[2*e+1]=7,e++,n[7]++;for(;287>=e;)static_ltree[2*e+1]=8,e++,n[8]++;for(gen_codes(static_ltree,L_CODES+1,n),e=0;D_CODES>e;e++)static_dtree[2*e+1]=5,static_dtree[2*e]=bi_reverse(e,5);static_l_desc=new StaticTreeDesc(static_ltree,extra_lbits,LITERALS+1,L_CODES,MAX_BITS),static_d_desc=new StaticTreeDesc(static_dtree,extra_dbits,0,D_CODES,MAX_BITS),static_bl_desc=new StaticTreeDesc(new Array(0),extra_blbits,0,BL_CODES,MAX_BL_BITS)}function init_block(e){var _;for(_=0;L_CODES>_;_++)e.dyn_ltree[2*_]=0;for(_=0;D_CODES>_;_++)e.dyn_dtree[2*_]=0;for(_=0;BL_CODES>_;_++)e.bl_tree[2*_]=0;e.dyn_ltree[2*END_BLOCK]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function bi_windup(e){e.bi_valid>8?put_short(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function copy_block(e,_,t,r){bi_windup(e),r&&(put_short(e,t),put_short(e,~t)),utils.arraySet(e.pending_buf,e.window,_,t,e.pending),e.pending+=t}function smaller(e,_,t,r){var i=2*_,n=2*t;return e[i]<e[n]||e[i]===e[n]&&r[_]<=r[t]}function pqdownheap(e,_,t){for(var r=e.heap[t],i=t<<1;i<=e.heap_len&&(i<e.heap_len&&smaller(_,e.heap[i+1],e.heap[i],e.depth)&&i++,!smaller(_,r,e.heap[i],e.depth));)e.heap[t]=e.heap[i],t=i,i<<=1;e.heap[t]=r}function compress_block(e,_,t){var r,i,n,s,d=0;if(0!==e.last_lit)do r=e.pending_buf[e.d_buf+2*d]<<8|e.pending_buf[e.d_buf+2*d+1],i=e.pending_buf[e.l_buf+d],d++,0===r?send_code(e,i,_):(n=_length_code[i],send_code(e,n+LITERALS+1,_),s=extra_lbits[n],0!==s&&(i-=base_length[n],send_bits(e,i,s)),r--,n=d_code(r),send_code(e,n,t),s=extra_dbits[n],0!==s&&(r-=base_dist[n],send_bits(e,r,s)));while(d<e.last_lit);send_code(e,END_BLOCK,_)}function build_tree(e,_){var t,r,i,n=_.dyn_tree,s=_.stat_desc.static_tree,d=_.stat_desc.has_stree,a=_.stat_desc.elems,l=-1;for(e.heap_len=0,e.heap_max=HEAP_SIZE,t=0;a>t;t++)0!==n[2*t]?(e.heap[++e.heap_len]=l=t,e.depth[t]=0):n[2*t+1]=0;for(;e.heap_len<2;)i=e.heap[++e.heap_len]=2>l?++l:0,n[2*i]=1,e.depth[i]=0,e.opt_len--,d&&(e.static_len-=s[2*i+1]);for(_.max_code=l,t=e.heap_len>>1;t>=1;t--)pqdownheap(e,n,t);i=a;do t=e.heap[1],e.heap[1]=e.heap[e.heap_len--],pqdownheap(e,n,1),r=e.heap[1],e.heap[--e.heap_max]=t,e.heap[--e.heap_max]=r,n[2*i]=n[2*t]+n[2*r],e.depth[i]=(e.depth[t]>=e.depth[r]?e.depth[t]:e.depth[r])+1,n[2*t+1]=n[2*r+1]=i,e.heap[1]=i++,pqdownheap(e,n,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],gen_bitlen(e,_),gen_codes(n,l,e.bl_count)}function scan_tree(e,_,t){var r,i,n=-1,s=_[1],d=0,a=7,l=4;for(0===s&&(a=138,l=3),_[2*(t+1)+1]=65535,r=0;t>=r;r++)i=s,s=_[2*(r+1)+1],++d<a&&i===s||(l>d?e.bl_tree[2*i]+=d:0!==i?(i!==n&&e.bl_tree[2*i]++,e.bl_tree[2*REP_3_6]++):10>=d?e.bl_tree[2*REPZ_3_10]++:e.bl_tree[2*REPZ_11_138]++,d=0,n=i,0===s?(a=138,l=3):i===s?(a=6,l=3):(a=7,l=4))}function send_tree(e,_,t){var r,i,n=-1,s=_[1],d=0,a=7,l=4;for(0===s&&(a=138,l=3),r=0;t>=r;r++)if(i=s,s=_[2*(r+1)+1],!(++d<a&&i===s)){if(l>d){do send_code(e,i,e.bl_tree);while(0!==--d)}else 0!==i?(i!==n&&(send_code(e,i,e.bl_tree),d--),send_code(e,REP_3_6,e.bl_tree),send_bits(e,d-3,2)):10>=d?(send_code(e,REPZ_3_10,e.bl_tree),send_bits(e,d-3,3)):(send_code(e,REPZ_11_138,e.bl_tree),send_bits(e,d-11,7));d=0,n=i,0===s?(a=138,l=3):i===s?(a=6,l=3):(a=7,l=4)}}function build_bl_tree(e){var _;for(scan_tree(e,e.dyn_ltree,e.l_desc.max_code),scan_tree(e,e.dyn_dtree,e.d_desc.max_code),build_tree(e,e.bl_desc),_=BL_CODES-1;_>=3&&0===e.bl_tree[2*bl_order[_]+1];_--);return e.opt_len+=3*(_+1)+5+5+4,_}function send_all_trees(e,_,t,r){var i;for(send_bits(e,_-257,5),send_bits(e,t-1,5),send_bits(e,r-4,4),i=0;r>i;i++)send_bits(e,e.bl_tree[2*bl_order[i]+1],3);send_tree(e,e.dyn_ltree,_-1),send_tree(e,e.dyn_dtree,t-1)}function detect_data_type(e){var _,t=4093624447;for(_=0;31>=_;_++,t>>>=1)if(1&t&&0!==e.dyn_ltree[2*_])return Z_BINARY;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return Z_TEXT;for(_=32;LITERALS>_;_++)if(0!==e.dyn_ltree[2*_])return Z_TEXT;return Z_BINARY}function _tr_init(e){static_init_done||(tr_static_init(),static_init_done=!0),e.l_desc=new TreeDesc(e.dyn_ltree,static_l_desc),e.d_desc=new TreeDesc(e.dyn_dtree,static_d_desc),e.bl_desc=new TreeDesc(e.bl_tree,static_bl_desc),e.bi_buf=0,e.bi_valid=0,init_block(e)}function _tr_stored_block(e,_,t,r){send_bits(e,(STORED_BLOCK<<1)+(r?1:0),3),copy_block(e,_,t,!0)}function _tr_align(e){send_bits(e,STATIC_TREES<<1,3),send_code(e,END_BLOCK,static_ltree),bi_flush(e)}function _tr_flush_block(e,_,t,r){var i,n,s=0;e.level>0?(e.strm.data_type===Z_UNKNOWN&&(e.strm.data_type=detect_data_type(e)),build_tree(e,e.l_desc),build_tree(e,e.d_desc),s=build_bl_tree(e),i=e.opt_len+3+7>>>3,n=e.static_len+3+7>>>3,i>=n&&(i=n)):i=n=t+5,i>=t+4&&-1!==_?_tr_stored_block(e,_,t,r):e.strategy===Z_FIXED||n===i?(send_bits(e,(STATIC_TREES<<1)+(r?1:0),3),compress_block(e,static_ltree,static_dtree)):(send_bits(e,(DYN_TREES<<1)+(r?1:0),3),send_all_trees(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),compress_block(e,e.dyn_ltree,e.dyn_dtree)),init_block(e),r&&bi_windup(e)}function _tr_tally(e,_,t){return e.pending_buf[e.d_buf+2*e.last_lit]=_>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&_,e.pending_buf[e.l_buf+e.last_lit]=255&t,e.last_lit++,0===_?e.dyn_ltree[2*t]++:(e.matches++,_--,e.dyn_ltree[2*(_length_code[t]+LITERALS+1)]++,e.dyn_dtree[2*d_code(_)]++),e.last_lit===e.lit_bufsize-1}var utils=require("../utils/common"),Z_FIXED=4,Z_BINARY=0,Z_TEXT=1,Z_UNKNOWN=2,STORED_BLOCK=0,STATIC_TREES=1,DYN_TREES=2,MIN_MATCH=3,MAX_MATCH=258,LENGTH_CODES=29,LITERALS=256,L_CODES=LITERALS+1+LENGTH_CODES,D_CODES=30,BL_CODES=19,HEAP_SIZE=2*L_CODES+1,MAX_BITS=15,Buf_size=16,MAX_BL_BITS=7,END_BLOCK=256,REP_3_6=16,REPZ_3_10=17,REPZ_11_138=18,extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],DIST_CODE_LEN=512,static_ltree=new Array(2*(L_CODES+2));zero(static_ltree);var static_dtree=new Array(2*D_CODES);zero(static_dtree);var _dist_code=new Array(DIST_CODE_LEN);zero(_dist_code);var _length_code=new Array(MAX_MATCH-MIN_MATCH+1);zero(_length_code);var base_length=new Array(LENGTH_CODES);zero(base_length);var base_dist=new Array(D_CODES);zero(base_dist);var StaticTreeDesc=function(e,_,t,r,i){this.static_tree=e,this.extra_bits=_,this.extra_base=t,this.elems=r,this.max_length=i,this.has_stree=e&&e.length},static_l_desc,static_d_desc,static_bl_desc,TreeDesc=function(e,_){this.dyn_tree=e,this.max_code=0,this.stat_desc=_},static_init_done=!1;exports._tr_init=_tr_init,exports._tr_stored_block=_tr_stored_block,exports._tr_flush_block=_tr_flush_block,exports._tr_tally=_tr_tally,exports._tr_align=_tr_align;


},{"../utils/common":65}],75:[function(require,module,exports){
  "use strict";function ZStream(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}module.exports=ZStream;


},{}],76:[function(require,module,exports){
  (function (process,Buffer){
    function Zlib(t){if(t<exports.DEFLATE||t>exports.UNZIP)throw new TypeError("Bad argument");this.mode=t,this.init_done=!1,this.write_in_progress=!1,this.pending_close=!1,this.windowBits=0,this.level=0,this.memLevel=0,this.strategy=0,this.dictionary=null}function bufferSet(t,e){for(var s=0;s<t.length;s++)this[e+s]=t[s]}var msg=require("pako/lib/zlib/messages"),zstream=require("pako/lib/zlib/zstream"),zlib_deflate=require("pako/lib/zlib/deflate.js"),zlib_inflate=require("pako/lib/zlib/inflate.js"),constants=require("pako/lib/zlib/constants");for(var key in constants)exports[key]=constants[key];exports.NONE=0,exports.DEFLATE=1,exports.INFLATE=2,exports.GZIP=3,exports.GUNZIP=4,exports.DEFLATERAW=5,exports.INFLATERAW=6,exports.UNZIP=7,Zlib.prototype.init=function(t,e,s,i,r){switch(this.windowBits=t,this.level=e,this.memLevel=s,this.strategy=i,(this.mode===exports.GZIP||this.mode===exports.GUNZIP)&&(this.windowBits+=16),this.mode===exports.UNZIP&&(this.windowBits+=32),(this.mode===exports.DEFLATERAW||this.mode===exports.INFLATERAW)&&(this.windowBits=-this.windowBits),this.strm=new zstream,this.mode){case exports.DEFLATE:case exports.GZIP:case exports.DEFLATERAW:var o=zlib_deflate.deflateInit2(this.strm,this.level,exports.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case exports.INFLATE:case exports.GUNZIP:case exports.INFLATERAW:case exports.UNZIP:var o=zlib_inflate.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}return o!==exports.Z_OK?void this._error(o):(this.write_in_progress=!1,void(this.init_done=!0))},Zlib.prototype.params=function(){throw new Error("deflateParams Not supported")},Zlib.prototype._writeCheck=function(){if(!this.init_done)throw new Error("write before init");if(this.mode===exports.NONE)throw new Error("already finalized");if(this.write_in_progress)throw new Error("write already in progress");if(this.pending_close)throw new Error("close is pending")},Zlib.prototype.write=function(t,e,s,i,r,o,n){this._writeCheck(),this.write_in_progress=!0;var a=this;return process.nextTick(function(){a.write_in_progress=!1;var p=a._write(t,e,s,i,r,o,n);a.callback(p[0],p[1]),a.pending_close&&a.close()}),this},Zlib.prototype.writeSync=function(t,e,s,i,r,o,n){return this._writeCheck(),this._write(t,e,s,i,r,o,n)},Zlib.prototype._write=function(t,e,s,i,r,o,n){if(this.write_in_progress=!0,t!==exports.Z_NO_FLUSH&&t!==exports.Z_PARTIAL_FLUSH&&t!==exports.Z_SYNC_FLUSH&&t!==exports.Z_FULL_FLUSH&&t!==exports.Z_FINISH&&t!==exports.Z_BLOCK)throw new Error("Invalid flush value");null==e&&(e=new Buffer(0),i=0,s=0),r._set?r.set=r._set:r.set=bufferSet;var a=this.strm;switch(a.avail_in=i,a.input=e,a.next_in=s,a.avail_out=n,a.output=r,a.next_out=o,this.mode){case exports.DEFLATE:case exports.GZIP:case exports.DEFLATERAW:var p=zlib_deflate.deflate(a,t);break;case exports.UNZIP:case exports.INFLATE:case exports.GUNZIP:case exports.INFLATERAW:var p=zlib_inflate.inflate(a,t);break;default:throw new Error("Unknown mode "+this.mode)}return p!==exports.Z_STREAM_END&&p!==exports.Z_OK&&this._error(p),this.write_in_progress=!1,[a.avail_in,a.avail_out]},Zlib.prototype.close=function(){return this.write_in_progress?void(this.pending_close=!0):(this.pending_close=!1,this.mode===exports.DEFLATE||this.mode===exports.GZIP||this.mode===exports.DEFLATERAW?zlib_deflate.deflateEnd(this.strm):zlib_inflate.inflateEnd(this.strm),void(this.mode=exports.NONE))},Zlib.prototype.reset=function(){switch(this.mode){case exports.DEFLATE:case exports.DEFLATERAW:var t=zlib_deflate.deflateReset(this.strm);break;case exports.INFLATE:case exports.INFLATERAW:var t=zlib_inflate.inflateReset(this.strm)}t!==exports.Z_OK&&this._error(t)},Zlib.prototype._error=function(t){this.onerror(msg[t]+": "+this.strm.msg,t),this.write_in_progress=!1,this.pending_close&&this.close()},exports.Zlib=Zlib;


  }).call(this,require("Zbi7gb"),require("buffer").Buffer)
},{"Zbi7gb":95,"buffer":78,"pako/lib/zlib/constants":67,"pako/lib/zlib/deflate.js":69,"pako/lib/zlib/inflate.js":71,"pako/lib/zlib/messages":73,"pako/lib/zlib/zstream":75}],77:[function(require,module,exports){
  (function (process,Buffer){
    function zlibBuffer(e,n,i){function t(){for(var n;null!==(n=e.read());)o.push(n),s+=n.length;e.once("readable",t)}function r(n){e.removeListener("end",f),e.removeListener("readable",t),i(n)}function f(){var n=Buffer.concat(o,s);o=[],i(null,n),e.close()}var o=[],s=0;e.on("error",r),e.on("end",f),e.end(n),t()}function zlibBufferSync(e,n){if("string"==typeof n&&(n=new Buffer(n)),!Buffer.isBuffer(n))throw new TypeError("Not a string or buffer");var i=binding.Z_FINISH;return e._processChunk(n,i)}function Deflate(e){return this instanceof Deflate?void Zlib.call(this,e,binding.DEFLATE):new Deflate(e)}function Inflate(e){return this instanceof Inflate?void Zlib.call(this,e,binding.INFLATE):new Inflate(e)}function Gzip(e){return this instanceof Gzip?void Zlib.call(this,e,binding.GZIP):new Gzip(e)}function Gunzip(e){return this instanceof Gunzip?void Zlib.call(this,e,binding.GUNZIP):new Gunzip(e)}function DeflateRaw(e){return this instanceof DeflateRaw?void Zlib.call(this,e,binding.DEFLATERAW):new DeflateRaw(e)}function InflateRaw(e){return this instanceof InflateRaw?void Zlib.call(this,e,binding.INFLATERAW):new InflateRaw(e)}function Unzip(e){return this instanceof Unzip?void Zlib.call(this,e,binding.UNZIP):new Unzip(e)}function Zlib(e,n){if(this._opts=e=e||{},this._chunkSize=e.chunkSize||exports.Z_DEFAULT_CHUNK,Transform.call(this,e),e.flush&&e.flush!==binding.Z_NO_FLUSH&&e.flush!==binding.Z_PARTIAL_FLUSH&&e.flush!==binding.Z_SYNC_FLUSH&&e.flush!==binding.Z_FULL_FLUSH&&e.flush!==binding.Z_FINISH&&e.flush!==binding.Z_BLOCK)throw new Error("Invalid flush flag: "+e.flush);if(this._flushFlag=e.flush||binding.Z_NO_FLUSH,e.chunkSize&&(e.chunkSize<exports.Z_MIN_CHUNK||e.chunkSize>exports.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+e.chunkSize);if(e.windowBits&&(e.windowBits<exports.Z_MIN_WINDOWBITS||e.windowBits>exports.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+e.windowBits);if(e.level&&(e.level<exports.Z_MIN_LEVEL||e.level>exports.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+e.level);if(e.memLevel&&(e.memLevel<exports.Z_MIN_MEMLEVEL||e.memLevel>exports.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+e.memLevel);if(e.strategy&&e.strategy!=exports.Z_FILTERED&&e.strategy!=exports.Z_HUFFMAN_ONLY&&e.strategy!=exports.Z_RLE&&e.strategy!=exports.Z_FIXED&&e.strategy!=exports.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+e.strategy);if(e.dictionary&&!Buffer.isBuffer(e.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._binding=new binding.Zlib(n);var i=this;this._hadError=!1,this._binding.onerror=function(e,n){i._binding=null,i._hadError=!0;var t=new Error(e);t.errno=n,t.code=exports.codes[n],i.emit("error",t)};var t=exports.Z_DEFAULT_COMPRESSION;"number"==typeof e.level&&(t=e.level);var r=exports.Z_DEFAULT_STRATEGY;"number"==typeof e.strategy&&(r=e.strategy),this._binding.init(e.windowBits||exports.Z_DEFAULT_WINDOWBITS,t,e.memLevel||exports.Z_DEFAULT_MEMLEVEL,r,e.dictionary),this._buffer=new Buffer(this._chunkSize),this._offset=0,this._closed=!1,this._level=t,this._strategy=r,this.once("end",this.close)}var Transform=require("_stream_transform"),binding=require("./binding"),util=require("util"),assert=require("assert").ok;binding.Z_MIN_WINDOWBITS=8,binding.Z_MAX_WINDOWBITS=15,binding.Z_DEFAULT_WINDOWBITS=15,binding.Z_MIN_CHUNK=64,binding.Z_MAX_CHUNK=1/0,binding.Z_DEFAULT_CHUNK=16384,binding.Z_MIN_MEMLEVEL=1,binding.Z_MAX_MEMLEVEL=9,binding.Z_DEFAULT_MEMLEVEL=8,binding.Z_MIN_LEVEL=-1,binding.Z_MAX_LEVEL=9,binding.Z_DEFAULT_LEVEL=binding.Z_DEFAULT_COMPRESSION,Object.keys(binding).forEach(function(e){e.match(/^Z/)&&(exports[e]=binding[e])}),exports.codes={Z_OK:binding.Z_OK,Z_STREAM_END:binding.Z_STREAM_END,Z_NEED_DICT:binding.Z_NEED_DICT,Z_ERRNO:binding.Z_ERRNO,Z_STREAM_ERROR:binding.Z_STREAM_ERROR,Z_DATA_ERROR:binding.Z_DATA_ERROR,Z_MEM_ERROR:binding.Z_MEM_ERROR,Z_BUF_ERROR:binding.Z_BUF_ERROR,Z_VERSION_ERROR:binding.Z_VERSION_ERROR},Object.keys(exports.codes).forEach(function(e){exports.codes[exports.codes[e]]=e}),exports.Deflate=Deflate,exports.Inflate=Inflate,exports.Gzip=Gzip,exports.Gunzip=Gunzip,exports.DeflateRaw=DeflateRaw,exports.InflateRaw=InflateRaw,exports.Unzip=Unzip,exports.createDeflate=function(e){return new Deflate(e)},exports.createInflate=function(e){return new Inflate(e)},exports.createDeflateRaw=function(e){return new DeflateRaw(e)},exports.createInflateRaw=function(e){return new InflateRaw(e)},exports.createGzip=function(e){return new Gzip(e)},exports.createGunzip=function(e){return new Gunzip(e)},exports.createUnzip=function(e){return new Unzip(e)},exports.deflate=function(e,n,i){return"function"==typeof n&&(i=n,n={}),zlibBuffer(new Deflate(n),e,i)},exports.deflateSync=function(e,n){return zlibBufferSync(new Deflate(n),e)},exports.gzip=function(e,n,i){return"function"==typeof n&&(i=n,n={}),zlibBuffer(new Gzip(n),e,i)},exports.gzipSync=function(e,n){return zlibBufferSync(new Gzip(n),e)},exports.deflateRaw=function(e,n,i){return"function"==typeof n&&(i=n,n={}),zlibBuffer(new DeflateRaw(n),e,i)},exports.deflateRawSync=function(e,n){return zlibBufferSync(new DeflateRaw(n),e)},exports.unzip=function(e,n,i){return"function"==typeof n&&(i=n,n={}),zlibBuffer(new Unzip(n),e,i)},exports.unzipSync=function(e,n){return zlibBufferSync(new Unzip(n),e)},exports.inflate=function(e,n,i){return"function"==typeof n&&(i=n,n={}),zlibBuffer(new Inflate(n),e,i)},exports.inflateSync=function(e,n){return zlibBufferSync(new Inflate(n),e)},exports.gunzip=function(e,n,i){return"function"==typeof n&&(i=n,n={}),zlibBuffer(new Gunzip(n),e,i)},exports.gunzipSync=function(e,n){return zlibBufferSync(new Gunzip(n),e)},exports.inflateRaw=function(e,n,i){return"function"==typeof n&&(i=n,n={}),zlibBuffer(new InflateRaw(n),e,i)},exports.inflateRawSync=function(e,n){return zlibBufferSync(new InflateRaw(n),e)},util.inherits(Zlib,Transform),Zlib.prototype.params=function(e,n,i){if(e<exports.Z_MIN_LEVEL||e>exports.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+e);if(n!=exports.Z_FILTERED&&n!=exports.Z_HUFFMAN_ONLY&&n!=exports.Z_RLE&&n!=exports.Z_FIXED&&n!=exports.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+n);if(this._level!==e||this._strategy!==n){var t=this;this.flush(binding.Z_SYNC_FLUSH,function(){t._binding.params(e,n),t._hadError||(t._level=e,t._strategy=n,i&&i())})}else process.nextTick(i)},Zlib.prototype.reset=function(){return this._binding.reset()},Zlib.prototype._flush=function(e){this._transform(new Buffer(0),"",e)},Zlib.prototype.flush=function(e,n){var i=this._writableState;if(("function"==typeof e||void 0===e&&!n)&&(n=e,e=binding.Z_FULL_FLUSH),i.ended)n&&process.nextTick(n);else if(i.ending)n&&this.once("end",n);else if(i.needDrain){var t=this;this.once("drain",function(){t.flush(n)})}else this._flushFlag=e,this.write(new Buffer(0),"",n)},Zlib.prototype.close=function(e){if(e&&process.nextTick(e),!this._closed){this._closed=!0,this._binding.close();var n=this;process.nextTick(function(){n.emit("close")})}},Zlib.prototype._transform=function(e,n,i){var t,r=this._writableState,f=r.ending||r.ended,o=f&&(!e||r.length===e.length);if(null===!e&&!Buffer.isBuffer(e))return i(new Error("invalid input"));o?t=binding.Z_FINISH:(t=this._flushFlag,e.length>=r.length&&(this._flushFlag=this._opts.flush||binding.Z_NO_FLUSH));this._processChunk(e,t,i)},Zlib.prototype._processChunk=function(e,n,i){function t(u,c){if(!s._hadError){var h=f-c;if(assert(h>=0,"have should not go down"),h>0){var p=s._buffer.slice(s._offset,s._offset+h);s._offset+=h,l?s.push(p):(a.push(p),_+=p.length)}if((0===c||s._offset>=s._chunkSize)&&(f=s._chunkSize,s._offset=0,s._buffer=new Buffer(s._chunkSize)),0===c){if(o+=r-u,r=u,!l)return!0;var d=s._binding.write(n,e,o,r,s._buffer,s._offset,s._chunkSize);return d.callback=t,void(d.buffer=e)}return l?void i():!1}}var r=e&&e.length,f=this._chunkSize-this._offset,o=0,s=this,l="function"==typeof i;if(!l){var u,a=[],_=0;this.on("error",function(e){u=e});do var c=this._binding.writeSync(n,e,o,r,this._buffer,this._offset,f);while(!this._hadError&&t(c[0],c[1]));if(this._hadError)throw u;var h=Buffer.concat(a,_);return this.close(),h}var p=this._binding.write(n,e,o,r,this._buffer,this._offset,f);p.buffer=e,p.callback=t},util.inherits(Deflate,Zlib),util.inherits(Inflate,Zlib),util.inherits(Gzip,Zlib),util.inherits(Gunzip,Zlib),util.inherits(DeflateRaw,Zlib),util.inherits(InflateRaw,Zlib),util.inherits(Unzip,Zlib);


  }).call(this,require("Zbi7gb"),require("buffer").Buffer)
},{"./binding":76,"Zbi7gb":95,"_stream_transform":105,"assert":64,"buffer":78,"util":109}],78:[function(require,module,exports){
  function Buffer(e,t,r){if(!(this instanceof Buffer))return new Buffer(e,t,r);var n=typeof e;if("base64"===t&&"string"===n)for(e=stringtrim(e);e.length%4!==0;)e+="=";var i;if("number"===n)i=coerce(e);else if("string"===n)i=Buffer.byteLength(e,t);else{if("object"!==n)throw new Error("First argument needs to be a number, array or string.");i=coerce(e.length)}var s;Buffer._useTypedArrays?s=Buffer._augment(new Uint8Array(i)):(s=this,s.length=i,s._isBuffer=!0);var a;if(Buffer._useTypedArrays&&"number"==typeof e.byteLength)s._set(e);else if(isArrayish(e))for(a=0;i>a;a++)Buffer.isBuffer(e)?s[a]=e.readUInt8(a):s[a]=e[a];else if("string"===n)s.write(e,0,t);else if("number"===n&&!Buffer._useTypedArrays&&!r)for(a=0;i>a;a++)s[a]=0;return s}function _hexWrite(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;var s=t.length;assert(s%2===0,"Invalid hex string"),n>s/2&&(n=s/2);for(var a=0;n>a;a++){var o=parseInt(t.substr(2*a,2),16);assert(!isNaN(o),"Invalid hex string"),e[r+a]=o}return Buffer._charsWritten=2*a,a}function _utf8Write(e,t,r,n){var i=Buffer._charsWritten=blitBuffer(utf8ToBytes(t),e,r,n);return i}function _asciiWrite(e,t,r,n){var i=Buffer._charsWritten=blitBuffer(asciiToBytes(t),e,r,n);return i}function _binaryWrite(e,t,r,n){return _asciiWrite(e,t,r,n)}function _base64Write(e,t,r,n){var i=Buffer._charsWritten=blitBuffer(base64ToBytes(t),e,r,n);return i}function _utf16leWrite(e,t,r,n){var i=Buffer._charsWritten=blitBuffer(utf16leToBytes(t),e,r,n);return i}function _base64Slice(e,t,r){return 0===t&&r===e.length?base64.fromByteArray(e):base64.fromByteArray(e.slice(t,r))}function _utf8Slice(e,t,r){var n="",i="";r=Math.min(e.length,r);for(var s=t;r>s;s++)e[s]<=127?(n+=decodeUtf8Char(i)+String.fromCharCode(e[s]),i=""):i+="%"+e[s].toString(16);return n+decodeUtf8Char(i)}function _asciiSlice(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;r>i;i++)n+=String.fromCharCode(e[i]);return n}function _binarySlice(e,t,r){return _asciiSlice(e,t,r)}function _hexSlice(e,t,r){var n=e.length;(!t||0>t)&&(t=0),(!r||0>r||r>n)&&(r=n);for(var i="",s=t;r>s;s++)i+=toHex(e[s]);return i}function _utf16leSlice(e,t,r){for(var n=e.slice(t,r),i="",s=0;s<n.length;s+=2)i+=String.fromCharCode(n[s]+256*n[s+1]);return i}function _readUInt16(e,t,r,n){n||(assert("boolean"==typeof r,"missing or invalid endian"),assert(void 0!==t&&null!==t,"missing offset"),assert(t+1<e.length,"Trying to read beyond buffer length"));var i=e.length;if(!(t>=i)){var s;return r?(s=e[t],i>t+1&&(s|=e[t+1]<<8)):(s=e[t]<<8,i>t+1&&(s|=e[t+1])),s}}function _readUInt32(e,t,r,n){n||(assert("boolean"==typeof r,"missing or invalid endian"),assert(void 0!==t&&null!==t,"missing offset"),assert(t+3<e.length,"Trying to read beyond buffer length"));var i=e.length;if(!(t>=i)){var s;return r?(i>t+2&&(s=e[t+2]<<16),i>t+1&&(s|=e[t+1]<<8),s|=e[t],i>t+3&&(s+=e[t+3]<<24>>>0)):(i>t+1&&(s=e[t+1]<<16),i>t+2&&(s|=e[t+2]<<8),i>t+3&&(s|=e[t+3]),s+=e[t]<<24>>>0),s}}function _readInt16(e,t,r,n){n||(assert("boolean"==typeof r,"missing or invalid endian"),assert(void 0!==t&&null!==t,"missing offset"),assert(t+1<e.length,"Trying to read beyond buffer length"));var i=e.length;if(!(t>=i)){var s=_readUInt16(e,t,r,!0),a=32768&s;return a?-1*(65535-s+1):s}}function _readInt32(e,t,r,n){n||(assert("boolean"==typeof r,"missing or invalid endian"),assert(void 0!==t&&null!==t,"missing offset"),assert(t+3<e.length,"Trying to read beyond buffer length"));var i=e.length;if(!(t>=i)){var s=_readUInt32(e,t,r,!0),a=2147483648&s;return a?-1*(4294967295-s+1):s}}function _readFloat(e,t,r,n){return n||(assert("boolean"==typeof r,"missing or invalid endian"),assert(t+3<e.length,"Trying to read beyond buffer length")),ieee754.read(e,t,r,23,4)}function _readDouble(e,t,r,n){return n||(assert("boolean"==typeof r,"missing or invalid endian"),assert(t+7<e.length,"Trying to read beyond buffer length")),ieee754.read(e,t,r,52,8)}function _writeUInt16(e,t,r,n,i){i||(assert(void 0!==t&&null!==t,"missing value"),assert("boolean"==typeof n,"missing or invalid endian"),assert(void 0!==r&&null!==r,"missing offset"),assert(r+1<e.length,"trying to write beyond buffer length"),verifuint(t,65535));var s=e.length;if(!(r>=s))for(var a=0,o=Math.min(s-r,2);o>a;a++)e[r+a]=(t&255<<8*(n?a:1-a))>>>8*(n?a:1-a)}function _writeUInt32(e,t,r,n,i){i||(assert(void 0!==t&&null!==t,"missing value"),assert("boolean"==typeof n,"missing or invalid endian"),assert(void 0!==r&&null!==r,"missing offset"),assert(r+3<e.length,"trying to write beyond buffer length"),verifuint(t,4294967295));var s=e.length;if(!(r>=s))for(var a=0,o=Math.min(s-r,4);o>a;a++)e[r+a]=t>>>8*(n?a:3-a)&255}function _writeInt16(e,t,r,n,i){i||(assert(void 0!==t&&null!==t,"missing value"),assert("boolean"==typeof n,"missing or invalid endian"),assert(void 0!==r&&null!==r,"missing offset"),assert(r+1<e.length,"Trying to write beyond buffer length"),verifsint(t,32767,-32768));var s=e.length;r>=s||(t>=0?_writeUInt16(e,t,r,n,i):_writeUInt16(e,65535+t+1,r,n,i))}function _writeInt32(e,t,r,n,i){i||(assert(void 0!==t&&null!==t,"missing value"),assert("boolean"==typeof n,"missing or invalid endian"),assert(void 0!==r&&null!==r,"missing offset"),assert(r+3<e.length,"Trying to write beyond buffer length"),verifsint(t,2147483647,-2147483648));var s=e.length;r>=s||(t>=0?_writeUInt32(e,t,r,n,i):_writeUInt32(e,4294967295+t+1,r,n,i))}function _writeFloat(e,t,r,n,i){i||(assert(void 0!==t&&null!==t,"missing value"),assert("boolean"==typeof n,"missing or invalid endian"),assert(void 0!==r&&null!==r,"missing offset"),assert(r+3<e.length,"Trying to write beyond buffer length"),verifIEEE754(t,3.4028234663852886e38,-3.4028234663852886e38));var s=e.length;r>=s||ieee754.write(e,t,r,n,23,4)}function _writeDouble(e,t,r,n,i){i||(assert(void 0!==t&&null!==t,"missing value"),assert("boolean"==typeof n,"missing or invalid endian"),assert(void 0!==r&&null!==r,"missing offset"),assert(r+7<e.length,"Trying to write beyond buffer length"),verifIEEE754(t,1.7976931348623157e308,-1.7976931348623157e308));var s=e.length;r>=s||ieee754.write(e,t,r,n,52,8)}function stringtrim(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function clamp(e,t,r){return"number"!=typeof e?r:(e=~~e,e>=t?t:e>=0?e:(e+=t,e>=0?e:0))}function coerce(e){return e=~~Math.ceil(+e),0>e?0:e}function isArray(e){return(Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)})(e)}function isArrayish(e){return isArray(e)||Buffer.isBuffer(e)||e&&"object"==typeof e&&"number"==typeof e.length}function toHex(e){return 16>e?"0"+e.toString(16):e.toString(16)}function utf8ToBytes(e){for(var t=[],r=0;r<e.length;r++){var n=e.charCodeAt(r);if(127>=n)t.push(e.charCodeAt(r));else{var i=r;n>=55296&&57343>=n&&r++;for(var s=encodeURIComponent(e.slice(i,r+1)).substr(1).split("%"),a=0;a<s.length;a++)t.push(parseInt(s[a],16))}}return t}function asciiToBytes(e){for(var t=[],r=0;r<e.length;r++)t.push(255&e.charCodeAt(r));return t}function utf16leToBytes(e){for(var t,r,n,i=[],s=0;s<e.length;s++)t=e.charCodeAt(s),r=t>>8,n=t%256,i.push(n),i.push(r);return i}function base64ToBytes(e){return base64.toByteArray(e)}function blitBuffer(e,t,r,n){for(var i=0;n>i&&!(i+r>=t.length||i>=e.length);i++)t[i+r]=e[i];return i}function decodeUtf8Char(e){try{return decodeURIComponent(e)}catch(t){return String.fromCharCode(65533)}}function verifuint(e,t){assert("number"==typeof e,"cannot write a non-number as a number"),assert(e>=0,"specified a negative value for writing an unsigned value"),assert(t>=e,"value is larger than maximum value for type"),assert(Math.floor(e)===e,"value has a fractional component")}function verifsint(e,t,r){assert("number"==typeof e,"cannot write a non-number as a number"),assert(t>=e,"value larger than maximum allowed value"),assert(e>=r,"value smaller than minimum allowed value"),assert(Math.floor(e)===e,"value has a fractional component")}function verifIEEE754(e,t,r){assert("number"==typeof e,"cannot write a non-number as a number"),assert(t>=e,"value larger than maximum allowed value"),assert(e>=r,"value smaller than minimum allowed value")}function assert(e,t){if(!e)throw new Error(t||"Failed assertion")}var base64=require("base64-js"),ieee754=require("ieee754");exports.Buffer=Buffer,exports.SlowBuffer=Buffer,exports.INSPECT_MAX_BYTES=50,Buffer.poolSize=8192,Buffer._useTypedArrays=function(){try{var e=new ArrayBuffer(0),t=new Uint8Array(e);return t.foo=function(){return 42},42===t.foo()&&"function"==typeof t.subarray}catch(r){return!1}}(),Buffer.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.isBuffer=function(e){return!(null===e||void 0===e||!e._isBuffer)},Buffer.byteLength=function(e,t){var r;switch(e+="",t||"utf8"){case"hex":r=e.length/2;break;case"utf8":case"utf-8":r=utf8ToBytes(e).length;break;case"ascii":case"binary":case"raw":r=e.length;break;case"base64":r=base64ToBytes(e).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":r=2*e.length;break;default:throw new Error("Unknown encoding")}return r},Buffer.concat=function(e,t){if(assert(isArray(e),"Usage: Buffer.concat(list, [totalLength])\nlist should be an Array."),0===e.length)return new Buffer(0);if(1===e.length)return e[0];var r;if("number"!=typeof t)for(t=0,r=0;r<e.length;r++)t+=e[r].length;var n=new Buffer(t),i=0;for(r=0;r<e.length;r++){var s=e[r];s.copy(n,i),i+=s.length}return n},Buffer.prototype.write=function(e,t,r,n){if(isFinite(t))isFinite(r)||(n=r,r=void 0);else{var i=n;n=t,t=r,r=i}t=Number(t)||0;var s=this.length-t;r?(r=Number(r),r>s&&(r=s)):r=s,n=String(n||"utf8").toLowerCase();var a;switch(n){case"hex":a=_hexWrite(this,e,t,r);break;case"utf8":case"utf-8":a=_utf8Write(this,e,t,r);break;case"ascii":a=_asciiWrite(this,e,t,r);break;case"binary":a=_binaryWrite(this,e,t,r);break;case"base64":a=_base64Write(this,e,t,r);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":a=_utf16leWrite(this,e,t,r);break;default:throw new Error("Unknown encoding")}return a},Buffer.prototype.toString=function(e,t,r){var n=this;if(e=String(e||"utf8").toLowerCase(),t=Number(t)||0,r=void 0!==r?Number(r):r=n.length,r===t)return"";var i;switch(e){case"hex":i=_hexSlice(n,t,r);break;case"utf8":case"utf-8":i=_utf8Slice(n,t,r);break;case"ascii":i=_asciiSlice(n,t,r);break;case"binary":i=_binarySlice(n,t,r);break;case"base64":i=_base64Slice(n,t,r);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":i=_utf16leSlice(n,t,r);break;default:throw new Error("Unknown encoding")}return i},Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},Buffer.prototype.copy=function(e,t,r,n){var i=this;if(r||(r=0),n||0===n||(n=this.length),t||(t=0),n!==r&&0!==e.length&&0!==i.length){assert(n>=r,"sourceEnd < sourceStart"),assert(t>=0&&t<e.length,"targetStart out of bounds"),assert(r>=0&&r<i.length,"sourceStart out of bounds"),assert(n>=0&&n<=i.length,"sourceEnd out of bounds"),n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var s=n-r;if(100>s||!Buffer._useTypedArrays)for(var a=0;s>a;a++)e[a+t]=this[a+r];else e._set(this.subarray(r,r+s),t)}},Buffer.prototype.slice=function(e,t){var r=this.length;if(e=clamp(e,r,0),t=clamp(t,r,r),Buffer._useTypedArrays)return Buffer._augment(this.subarray(e,t));for(var n=t-e,i=new Buffer(n,void 0,!0),s=0;n>s;s++)i[s]=this[s+e];return i},Buffer.prototype.get=function(e){return 0,this.readUInt8(e)},Buffer.prototype.set=function(e,t){return 0,this.writeUInt8(e,t)},Buffer.prototype.readUInt8=function(e,t){return t||(assert(void 0!==e&&null!==e,"missing offset"),assert(e<this.length,"Trying to read beyond buffer length")),e>=this.length?void 0:this[e]},Buffer.prototype.readUInt16LE=function(e,t){return _readUInt16(this,e,!0,t)},Buffer.prototype.readUInt16BE=function(e,t){return _readUInt16(this,e,!1,t)},Buffer.prototype.readUInt32LE=function(e,t){return _readUInt32(this,e,!0,t)},Buffer.prototype.readUInt32BE=function(e,t){return _readUInt32(this,e,!1,t)},Buffer.prototype.readInt8=function(e,t){if(t||(assert(void 0!==e&&null!==e,"missing offset"),assert(e<this.length,"Trying to read beyond buffer length")),!(e>=this.length)){var r=128&this[e];return r?-1*(255-this[e]+1):this[e]}},Buffer.prototype.readInt16LE=function(e,t){return _readInt16(this,e,!0,t)},Buffer.prototype.readInt16BE=function(e,t){return _readInt16(this,e,!1,t)},Buffer.prototype.readInt32LE=function(e,t){return _readInt32(this,e,!0,t)},Buffer.prototype.readInt32BE=function(e,t){return _readInt32(this,e,!1,t)},Buffer.prototype.readFloatLE=function(e,t){return _readFloat(this,e,!0,t)},Buffer.prototype.readFloatBE=function(e,t){return _readFloat(this,e,!1,t)},Buffer.prototype.readDoubleLE=function(e,t){return _readDouble(this,e,!0,t)},Buffer.prototype.readDoubleBE=function(e,t){return _readDouble(this,e,!1,t)},Buffer.prototype.writeUInt8=function(e,t,r){r||(assert(void 0!==e&&null!==e,"missing value"),assert(void 0!==t&&null!==t,"missing offset"),assert(t<this.length,"trying to write beyond buffer length"),verifuint(e,255)),t>=this.length||(this[t]=e)},Buffer.prototype.writeUInt16LE=function(e,t,r){_writeUInt16(this,e,t,!0,r)},Buffer.prototype.writeUInt16BE=function(e,t,r){_writeUInt16(this,e,t,!1,r)},Buffer.prototype.writeUInt32LE=function(e,t,r){_writeUInt32(this,e,t,!0,r)},Buffer.prototype.writeUInt32BE=function(e,t,r){_writeUInt32(this,e,t,!1,r)},Buffer.prototype.writeInt8=function(e,t,r){r||(assert(void 0!==e&&null!==e,"missing value"),assert(void 0!==t&&null!==t,"missing offset"),assert(t<this.length,"Trying to write beyond buffer length"),verifsint(e,127,-128)),t>=this.length||(e>=0?this.writeUInt8(e,t,r):this.writeUInt8(255+e+1,t,r))},Buffer.prototype.writeInt16LE=function(e,t,r){_writeInt16(this,e,t,!0,r)},Buffer.prototype.writeInt16BE=function(e,t,r){_writeInt16(this,e,t,!1,r)},Buffer.prototype.writeInt32LE=function(e,t,r){_writeInt32(this,e,t,!0,r)},Buffer.prototype.writeInt32BE=function(e,t,r){_writeInt32(this,e,t,!1,r)},Buffer.prototype.writeFloatLE=function(e,t,r){_writeFloat(this,e,t,!0,r)},Buffer.prototype.writeFloatBE=function(e,t,r){_writeFloat(this,e,t,!1,r)},Buffer.prototype.writeDoubleLE=function(e,t,r){_writeDouble(this,e,t,!0,r)},Buffer.prototype.writeDoubleBE=function(e,t,r){_writeDouble(this,e,t,!1,r)},Buffer.prototype.fill=function(e,t,r){if(e||(e=0),t||(t=0),r||(r=this.length),"string"==typeof e&&(e=e.charCodeAt(0)),assert("number"==typeof e&&!isNaN(e),"value is not a number"),assert(r>=t,"end < start"),r!==t&&0!==this.length){assert(t>=0&&t<this.length,"start out of bounds"),assert(r>=0&&r<=this.length,"end out of bounds");for(var n=t;r>n;n++)this[n]=e}},Buffer.prototype.inspect=function(){for(var e=[],t=this.length,r=0;t>r;r++)if(e[r]=toHex(this[r]),r===exports.INSPECT_MAX_BYTES){e[r+1]="...";break}return"<Buffer "+e.join(" ")+">"},Buffer.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(Buffer._useTypedArrays)return new Buffer(this).buffer;for(var e=new Uint8Array(this.length),t=0,r=e.length;r>t;t+=1)e[t]=this[t];return e.buffer}throw new Error("Buffer.toArrayBuffer not supported in this browser")};var BP=Buffer.prototype;Buffer._augment=function(e){return e._isBuffer=!0,e._get=e.get,e._set=e.set,e.get=BP.get,e.set=BP.set,e.write=BP.write,e.toString=BP.toString,e.toLocaleString=BP.toString,e.toJSON=BP.toJSON,e.copy=BP.copy,e.slice=BP.slice,e.readUInt8=BP.readUInt8,e.readUInt16LE=BP.readUInt16LE,e.readUInt16BE=BP.readUInt16BE,e.readUInt32LE=BP.readUInt32LE,e.readUInt32BE=BP.readUInt32BE,e.readInt8=BP.readInt8,e.readInt16LE=BP.readInt16LE,e.readInt16BE=BP.readInt16BE,e.readInt32LE=BP.readInt32LE,e.readInt32BE=BP.readInt32BE,e.readFloatLE=BP.readFloatLE,e.readFloatBE=BP.readFloatBE,e.readDoubleLE=BP.readDoubleLE,e.readDoubleBE=BP.readDoubleBE,e.writeUInt8=BP.writeUInt8,e.writeUInt16LE=BP.writeUInt16LE,e.writeUInt16BE=BP.writeUInt16BE,e.writeUInt32LE=BP.writeUInt32LE,e.writeUInt32BE=BP.writeUInt32BE,e.writeInt8=BP.writeInt8,e.writeInt16LE=BP.writeInt16LE,e.writeInt16BE=BP.writeInt16BE,e.writeInt32LE=BP.writeInt32LE,e.writeInt32BE=BP.writeInt32BE,e.writeFloatLE=BP.writeFloatLE,e.writeFloatBE=BP.writeFloatBE,e.writeDoubleLE=BP.writeDoubleLE,e.writeDoubleBE=BP.writeDoubleBE,e.fill=BP.fill,e.inspect=BP.inspect,e.toArrayBuffer=BP.toArrayBuffer,e};


},{"base64-js":79,"ieee754":80}],79:[function(require,module,exports){
  var lookup="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(t){"use strict";function r(t){var r=t.charCodeAt(0);return r===h||r===u?62:r===c||r===f?63:o>r?-1:o+10>r?r-o+26+26:i+26>r?r-i:A+26>r?r-A+26:void 0}function e(t){function e(t){i[f++]=t}var n,h,c,o,A,i;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var u=t.length;A="="===t.charAt(u-2)?2:"="===t.charAt(u-1)?1:0,i=new a(3*t.length/4-A),c=A>0?t.length-4:t.length;var f=0;for(n=0,h=0;c>n;n+=4,h+=3)o=r(t.charAt(n))<<18|r(t.charAt(n+1))<<12|r(t.charAt(n+2))<<6|r(t.charAt(n+3)),e((16711680&o)>>16),e((65280&o)>>8),e(255&o);return 2===A?(o=r(t.charAt(n))<<2|r(t.charAt(n+1))>>4,e(255&o)):1===A&&(o=r(t.charAt(n))<<10|r(t.charAt(n+1))<<4|r(t.charAt(n+2))>>2,e(o>>8&255),e(255&o)),i}function n(t){function r(t){return lookup.charAt(t)}function e(t){return r(t>>18&63)+r(t>>12&63)+r(t>>6&63)+r(63&t)}var n,a,h,c=t.length%3,o="";for(n=0,h=t.length-c;h>n;n+=3)a=(t[n]<<16)+(t[n+1]<<8)+t[n+2],o+=e(a);switch(c){case 1:a=t[t.length-1],o+=r(a>>2),o+=r(a<<4&63),o+="==";break;case 2:a=(t[t.length-2]<<8)+t[t.length-1],o+=r(a>>10),o+=r(a>>4&63),o+=r(a<<2&63),o+="="}return o}var a="undefined"!=typeof Uint8Array?Uint8Array:Array,h="+".charCodeAt(0),c="/".charCodeAt(0),o="0".charCodeAt(0),A="a".charCodeAt(0),i="A".charCodeAt(0),u="-".charCodeAt(0),f="_".charCodeAt(0);t.toByteArray=e,t.fromByteArray=n}("undefined"==typeof exports?this.base64js={}:exports);


},{}],80:[function(require,module,exports){
  exports.read=function(a,o,t,r,h){var M,p,w=8*h-r-1,f=(1<<w)-1,e=f>>1,i=-7,N=t?h-1:0,n=t?-1:1,s=a[o+N];for(N+=n,M=s&(1<<-i)-1,s>>=-i,i+=w;i>0;M=256*M+a[o+N],N+=n,i-=8);for(p=M&(1<<-i)-1,M>>=-i,i+=r;i>0;p=256*p+a[o+N],N+=n,i-=8);if(0===M)M=1-e;else{if(M===f)return p?NaN:(s?-1:1)*(1/0);p+=Math.pow(2,r),M-=e}return(s?-1:1)*p*Math.pow(2,M-r)},exports.write=function(a,o,t,r,h,M){var p,w,f,e=8*M-h-1,i=(1<<e)-1,N=i>>1,n=23===h?Math.pow(2,-24)-Math.pow(2,-77):0,s=r?0:M-1,u=r?1:-1,l=0>o||0===o&&0>1/o?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(w=isNaN(o)?1:0,p=i):(p=Math.floor(Math.log(o)/Math.LN2),o*(f=Math.pow(2,-p))<1&&(p--,f*=2),o+=p+N>=1?n/f:n*Math.pow(2,1-N),o*f>=2&&(p++,f/=2),p+N>=i?(w=0,p=i):p+N>=1?(w=(o*f-1)*Math.pow(2,h),p+=N):(w=o*Math.pow(2,N-1)*Math.pow(2,h),p=0));h>=8;a[t+s]=255&w,s+=u,w/=256,h-=8);for(p=p<<h|w,e+=h;e>0;a[t+s]=255&p,s+=u,p/=256,e-=8);a[t+s-u]|=128*l};


},{}],81:[function(require,module,exports){
  function toArray(r,e){if(r.length%intSize!==0){var f=r.length+(intSize-r.length%intSize);r=Buffer.concat([r,zeroBuffer],f)}for(var t=[],n=e?r.readInt32BE:r.readInt32LE,u=0;u<r.length;u+=intSize)t.push(n.call(r,u));return t}function toBuffer(r,e,f){for(var t=new Buffer(e),n=f?t.writeInt32BE:t.writeInt32LE,u=0;u<r.length;u++)n.call(t,r[u],4*u,!0);return t}function hash(r,e,f,t){Buffer.isBuffer(r)||(r=new Buffer(r));var n=e(toArray(r,t),r.length*chrsz);return toBuffer(n,f,t)}var Buffer=require("buffer").Buffer,intSize=4,zeroBuffer=new Buffer(intSize);zeroBuffer.fill(0);var chrsz=8;module.exports={hash:hash};


},{"buffer":78}],82:[function(require,module,exports){
  function hmac(e,r,f){Buffer.isBuffer(r)||(r=new Buffer(r)),Buffer.isBuffer(f)||(f=new Buffer(f)),r.length>blocksize?r=e(r):r.length<blocksize&&(r=Buffer.concat([r,zeroBuffer],blocksize));for(var t=new Buffer(blocksize),n=new Buffer(blocksize),i=0;blocksize>i;i++)t[i]=54^r[i],n[i]=92^r[i];var c=e(Buffer.concat([t,f]));return e(Buffer.concat([n,c]))}function hash(e,r){e=e||"sha1";var f=algorithms[e],t=[],n=0;return f||error("algorithm:",e,"is not yet supported"),{update:function(e){return Buffer.isBuffer(e)||(e=new Buffer(e)),t.push(e),n+=e.length,this},digest:function(e){var n=Buffer.concat(t),i=r?hmac(f,r,n):f(n);return t=null,e?i.toString(e):i}}}function error(){var e=[].slice.call(arguments).join(" ");throw new Error([e,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}function each(e,r){for(var f in e)r(e[f],f)}var Buffer=require("buffer").Buffer,sha=require("./sha"),sha256=require("./sha256"),rng=require("./rng"),md5=require("./md5"),algorithms={sha1:sha,sha256:sha256,md5:md5},blocksize=64,zeroBuffer=new Buffer(blocksize);zeroBuffer.fill(0),exports.createHash=function(e){return hash(e)},exports.createHmac=function(e,r){return hash(e,r)},exports.randomBytes=function(e,r){if(!r||!r.call)return new Buffer(rng(e));try{r.call(this,void 0,new Buffer(rng(e)))}catch(f){r(f)}},each(["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],function(e){exports[e]=function(){error("sorry,",e,"is not implemented yet")}});


},{"./md5":83,"./rng":84,"./sha":85,"./sha256":86,"buffer":78}],83:[function(require,module,exports){
  function md5_vm_test(){return"900150983cd24fb0d6963f7d28e17f72"==hex_md5("abc")}function core_md5(d,_){d[_>>5]|=128<<_%32,d[(_+64>>>9<<4)+14]=_;for(var m=1732584193,f=-271733879,i=-1732584194,h=271733878,r=0;r<d.length;r+=16){var n=m,e=f,g=i,t=h;m=md5_ff(m,f,i,h,d[r+0],7,-680876936),h=md5_ff(h,m,f,i,d[r+1],12,-389564586),i=md5_ff(i,h,m,f,d[r+2],17,606105819),f=md5_ff(f,i,h,m,d[r+3],22,-1044525330),m=md5_ff(m,f,i,h,d[r+4],7,-176418897),h=md5_ff(h,m,f,i,d[r+5],12,1200080426),i=md5_ff(i,h,m,f,d[r+6],17,-1473231341),f=md5_ff(f,i,h,m,d[r+7],22,-45705983),m=md5_ff(m,f,i,h,d[r+8],7,1770035416),h=md5_ff(h,m,f,i,d[r+9],12,-1958414417),i=md5_ff(i,h,m,f,d[r+10],17,-42063),f=md5_ff(f,i,h,m,d[r+11],22,-1990404162),m=md5_ff(m,f,i,h,d[r+12],7,1804603682),h=md5_ff(h,m,f,i,d[r+13],12,-40341101),i=md5_ff(i,h,m,f,d[r+14],17,-1502002290),f=md5_ff(f,i,h,m,d[r+15],22,1236535329),m=md5_gg(m,f,i,h,d[r+1],5,-165796510),h=md5_gg(h,m,f,i,d[r+6],9,-1069501632),i=md5_gg(i,h,m,f,d[r+11],14,643717713),f=md5_gg(f,i,h,m,d[r+0],20,-373897302),m=md5_gg(m,f,i,h,d[r+5],5,-701558691),h=md5_gg(h,m,f,i,d[r+10],9,38016083),i=md5_gg(i,h,m,f,d[r+15],14,-660478335),f=md5_gg(f,i,h,m,d[r+4],20,-405537848),m=md5_gg(m,f,i,h,d[r+9],5,568446438),h=md5_gg(h,m,f,i,d[r+14],9,-1019803690),i=md5_gg(i,h,m,f,d[r+3],14,-187363961),f=md5_gg(f,i,h,m,d[r+8],20,1163531501),m=md5_gg(m,f,i,h,d[r+13],5,-1444681467),h=md5_gg(h,m,f,i,d[r+2],9,-51403784),i=md5_gg(i,h,m,f,d[r+7],14,1735328473),f=md5_gg(f,i,h,m,d[r+12],20,-1926607734),m=md5_hh(m,f,i,h,d[r+5],4,-378558),h=md5_hh(h,m,f,i,d[r+8],11,-2022574463),i=md5_hh(i,h,m,f,d[r+11],16,1839030562),f=md5_hh(f,i,h,m,d[r+14],23,-35309556),m=md5_hh(m,f,i,h,d[r+1],4,-1530992060),h=md5_hh(h,m,f,i,d[r+4],11,1272893353),i=md5_hh(i,h,m,f,d[r+7],16,-155497632),f=md5_hh(f,i,h,m,d[r+10],23,-1094730640),m=md5_hh(m,f,i,h,d[r+13],4,681279174),h=md5_hh(h,m,f,i,d[r+0],11,-358537222),i=md5_hh(i,h,m,f,d[r+3],16,-722521979),f=md5_hh(f,i,h,m,d[r+6],23,76029189),m=md5_hh(m,f,i,h,d[r+9],4,-640364487),h=md5_hh(h,m,f,i,d[r+12],11,-421815835),i=md5_hh(i,h,m,f,d[r+15],16,530742520),f=md5_hh(f,i,h,m,d[r+2],23,-995338651),m=md5_ii(m,f,i,h,d[r+0],6,-198630844),h=md5_ii(h,m,f,i,d[r+7],10,1126891415),i=md5_ii(i,h,m,f,d[r+14],15,-1416354905),f=md5_ii(f,i,h,m,d[r+5],21,-57434055),m=md5_ii(m,f,i,h,d[r+12],6,1700485571),h=md5_ii(h,m,f,i,d[r+3],10,-1894986606),i=md5_ii(i,h,m,f,d[r+10],15,-1051523),f=md5_ii(f,i,h,m,d[r+1],21,-2054922799),m=md5_ii(m,f,i,h,d[r+8],6,1873313359),h=md5_ii(h,m,f,i,d[r+15],10,-30611744),i=md5_ii(i,h,m,f,d[r+6],15,-1560198380),f=md5_ii(f,i,h,m,d[r+13],21,1309151649),m=md5_ii(m,f,i,h,d[r+4],6,-145523070),h=md5_ii(h,m,f,i,d[r+11],10,-1120210379),i=md5_ii(i,h,m,f,d[r+2],15,718787259),f=md5_ii(f,i,h,m,d[r+9],21,-343485551),m=safe_add(m,n),f=safe_add(f,e),i=safe_add(i,g),h=safe_add(h,t)}return Array(m,f,i,h)}function md5_cmn(d,_,m,f,i,h){return safe_add(bit_rol(safe_add(safe_add(_,d),safe_add(f,h)),i),m)}function md5_ff(d,_,m,f,i,h,r){return md5_cmn(_&m|~_&f,d,_,i,h,r)}function md5_gg(d,_,m,f,i,h,r){return md5_cmn(_&f|m&~f,d,_,i,h,r)}function md5_hh(d,_,m,f,i,h,r){return md5_cmn(_^m^f,d,_,i,h,r)}function md5_ii(d,_,m,f,i,h,r){return md5_cmn(m^(_|~f),d,_,i,h,r)}function safe_add(d,_){var m=(65535&d)+(65535&_),f=(d>>16)+(_>>16)+(m>>16);return f<<16|65535&m}function bit_rol(d,_){return d<<_|d>>>32-_}var helpers=require("./helpers");module.exports=function(d){return helpers.hash(d,core_md5,16)};


},{"./helpers":81}],84:[function(require,module,exports){
  !function(){var r,n,t=this;r=function(r){for(var n,n,t=new Array(r),o=0;r>o;o++)0==(3&o)&&(n=4294967296*Math.random()),t[o]=n>>>((3&o)<<3)&255;return t},t.crypto&&crypto.getRandomValues&&(n=function(r){var n=new Uint8Array(r);return crypto.getRandomValues(n),n}),module.exports=n||r}();


},{}],85:[function(require,module,exports){
  function core_sha1(r,a){r[a>>5]|=128<<24-a%32,r[(a+64>>9<<4)+15]=a;for(var e=Array(80),d=1732584193,s=-271733879,f=-1732584194,n=271733878,t=-1009589776,o=0;o<r.length;o+=16){for(var _=d,u=s,h=f,l=n,c=t,i=0;80>i;i++){16>i?e[i]=r[o+i]:e[i]=rol(e[i-3]^e[i-8]^e[i-14]^e[i-16],1);var v=safe_add(safe_add(rol(d,5),sha1_ft(i,s,f,n)),safe_add(safe_add(t,e[i]),sha1_kt(i)));t=n,n=f,f=rol(s,30),s=d,d=v}d=safe_add(d,_),s=safe_add(s,u),f=safe_add(f,h),n=safe_add(n,l),t=safe_add(t,c)}return Array(d,s,f,n,t)}function sha1_ft(r,a,e,d){return 20>r?a&e|~a&d:40>r?a^e^d:60>r?a&e|a&d|e&d:a^e^d}function sha1_kt(r){return 20>r?1518500249:40>r?1859775393:60>r?-1894007588:-899497514}function safe_add(r,a){var e=(65535&r)+(65535&a),d=(r>>16)+(a>>16)+(e>>16);return d<<16|65535&e}function rol(r,a){return r<<a|r>>>32-a}var helpers=require("./helpers");module.exports=function(r){return helpers.hash(r,core_sha1,20,!0)};


},{"./helpers":81}],86:[function(require,module,exports){
  var helpers=require("./helpers"),safe_add=function(a,e){var r=(65535&a)+(65535&e),d=(a>>16)+(e>>16)+(r>>16);return d<<16|65535&r},S=function(a,e){return a>>>e|a<<32-e},R=function(a,e){return a>>>e},Ch=function(a,e,r){return a&e^~a&r},Maj=function(a,e,r){return a&e^a&r^e&r},Sigma0256=function(a){return S(a,2)^S(a,13)^S(a,22)},Sigma1256=function(a){return S(a,6)^S(a,11)^S(a,25)},Gamma0256=function(a){return S(a,7)^S(a,18)^R(a,3)},Gamma1256=function(a){return S(a,17)^S(a,19)^R(a,10)},core_sha256=function(a,e){var r,d,n,f,s,t,u,_,o,i,S,c,m=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),h=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),g=new Array(64);a[e>>5]|=128<<24-e%32,a[(e+64>>9<<4)+15]=e;for(var o=0;o<a.length;o+=16){r=h[0],d=h[1],n=h[2],f=h[3],s=h[4],t=h[5],u=h[6],_=h[7];for(var i=0;64>i;i++)16>i?g[i]=a[i+o]:g[i]=safe_add(safe_add(safe_add(Gamma1256(g[i-2]),g[i-7]),Gamma0256(g[i-15])),g[i-16]),S=safe_add(safe_add(safe_add(safe_add(_,Sigma1256(s)),Ch(s,t,u)),m[i]),g[i]),c=safe_add(Sigma0256(r),Maj(r,d,n)),_=u,u=t,t=s,s=safe_add(f,S),f=n,n=d,d=r,r=safe_add(S,c);h[0]=safe_add(r,h[0]),h[1]=safe_add(d,h[1]),h[2]=safe_add(n,h[2]),h[3]=safe_add(f,h[3]),h[4]=safe_add(s,h[4]),h[5]=safe_add(t,h[5]),h[6]=safe_add(u,h[6]),h[7]=safe_add(_,h[7])}return h};module.exports=function(a){return helpers.hash(a,core_sha256,32,!0)};


},{"./helpers":81}],87:[function(require,module,exports){
  function EventEmitter(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function isFunction(e){return"function"==typeof e}function isNumber(e){return"number"==typeof e}function isObject(e){return"object"==typeof e&&null!==e}function isUndefined(e){return void 0===e}module.exports=EventEmitter,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._maxListeners=void 0,EventEmitter.defaultMaxListeners=10,EventEmitter.prototype.setMaxListeners=function(e){if(!isNumber(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},EventEmitter.prototype.emit=function(e){var t,n,s,i,r,o;if(this._events||(this._events={}),"error"===e&&(!this._events.error||isObject(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],isUndefined(n))return!1;if(isFunction(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(s=arguments.length,i=new Array(s-1),r=1;s>r;r++)i[r-1]=arguments[r];n.apply(this,i)}else if(isObject(n)){for(s=arguments.length,i=new Array(s-1),r=1;s>r;r++)i[r-1]=arguments[r];for(o=n.slice(),s=o.length,r=0;s>r;r++)o[r].apply(this,i)}return!0},EventEmitter.prototype.addListener=function(e,t){var n;if(!isFunction(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,isFunction(t.listener)?t.listener:t),this._events[e]?isObject(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,isObject(this._events[e])&&!this._events[e].warned){var n;n=isUndefined(this._maxListeners)?EventEmitter.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,0,"function"==typeof console.trace&&0)}return this},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.once=function(e,t){function n(){this.removeListener(e,n),s||(s=!0,t.apply(this,arguments))}if(!isFunction(t))throw TypeError("listener must be a function");var s=!1;return n.listener=t,this.on(e,n),this},EventEmitter.prototype.removeListener=function(e,t){var n,s,i,r;if(!isFunction(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],i=n.length,s=-1,n===t||isFunction(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(isObject(n)){for(r=i;r-->0;)if(n[r]===t||n[r].listener&&n[r].listener===t){s=r;break}if(0>s)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(s,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},EventEmitter.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],isFunction(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},EventEmitter.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?isFunction(this._events[e])?[this._events[e]]:this._events[e].slice():[]},EventEmitter.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?isFunction(e._events[t])?1:e._events[t].length:0};


},{}],88:[function(require,module,exports){
  var http=module.exports,EventEmitter=require("events").EventEmitter,Request=require("./lib/request"),url=require("url");http.request=function(e,t){"string"==typeof e&&(e=url.parse(e)),e||(e={}),e.host||e.port||(e.port=parseInt(window.location.port,10)),!e.host&&e.hostname&&(e.host=e.hostname),e.scheme||(e.scheme=window.location.protocol.split(":")[0]),e.host||(e.host=window.location.hostname||window.location.host),/:/.test(e.host)&&(e.port||(e.port=e.host.split(":")[1]),e.host=e.host.split(":")[0]),e.port||(e.port="https"==e.scheme?443:80);var o=new Request(new xhrHttp,e);return t&&o.on("response",t),o},http.get=function(e,t){e.method="GET";var o=http.request(e,t);return o.end(),o},http.Agent=function(){},http.Agent.defaultMaxSockets=4;var xhrHttp=function(){if("undefined"==typeof window)throw new Error("no window object present");if(window.XMLHttpRequest)return window.XMLHttpRequest;if(window.ActiveXObject){for(var e=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Microsoft.XMLHTTP"],t=0;t<e.length;t++)try{var o=new window.ActiveXObject(e[t]);return function(){if(o){var r=o;return o=null,r}return new window.ActiveXObject(e[t])}}catch(r){}throw new Error("ajax not supported in this browser")}throw new Error("ajax not supported in this browser")}();http.STATUS_CODES={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"};


},{"./lib/request":89,"events":87,"url":266}],89:[function(require,module,exports){
  var Stream=require("stream"),Response=require("./response"),Base64=require("Base64"),inherits=require("inherits"),Request=module.exports=function(e,t){var r=this;r.writable=!0,r.xhr=e,r.body=[],r.uri=(t.scheme||"http")+"://"+t.host+(t.port?":"+t.port:"")+(t.path||"/"),"undefined"==typeof t.withCredentials&&(t.withCredentials=!0);try{e.withCredentials=t.withCredentials}catch(s){}if(e.open(t.method||"GET",r.uri,!0),r._headers={},t.headers)for(var o=objectKeys(t.headers),i=0;i<o.length;i++){var n=o[i];if(r.isSafeRequestHeader(n)){var a=t.headers[n];r.setHeader(n,a)}}t.auth&&this.setHeader("Authorization","Basic "+Base64.btoa(t.auth));var h=new Response;h.on("close",function(){r.emit("close")}),h.on("ready",function(){r.emit("response",h)}),e.onreadystatechange=function(){e.__aborted||h.handle(e)}};inherits(Request,Stream),Request.prototype.setHeader=function(e,t){this._headers[e.toLowerCase()]=t},Request.prototype.getHeader=function(e){return this._headers[e.toLowerCase()]},Request.prototype.removeHeader=function(e){delete this._headers[e.toLowerCase()]},Request.prototype.write=function(e){this.body.push(e)},Request.prototype.destroy=function(e){this.xhr.__aborted=!0,this.xhr.abort(),this.emit("close")},Request.prototype.end=function(e){void 0!==e&&this.body.push(e);for(var t=objectKeys(this._headers),r=0;r<t.length;r++){var s=t[r],o=this._headers[s];if(isArray(o))for(var i=0;i<o.length;i++)this.xhr.setRequestHeader(s,o[i]);else this.xhr.setRequestHeader(s,o)}if(0===this.body.length)this.xhr.send("");else if("string"==typeof this.body[0])this.xhr.send(this.body.join(""));else if(isArray(this.body[0])){for(var n=[],r=0;r<this.body.length;r++)n.push.apply(n,this.body[r]);this.xhr.send(n)}else if(/Array/.test(Object.prototype.toString.call(this.body[0]))){for(var a=0,r=0;r<this.body.length;r++)a+=this.body[r].length;for(var n=new this.body[0].constructor(a),h=0,r=0;r<this.body.length;r++)for(var d=this.body[r],i=0;i<d.length;i++)n[h++]=d[i];this.xhr.send(n)}else{for(var n="",r=0;r<this.body.length;r++)n+=this.body[r].toString();this.xhr.send(n)}},Request.unsafeHeaders=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","content-transfer-encoding","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"],Request.prototype.isSafeRequestHeader=function(e){return e?-1===indexOf(Request.unsafeHeaders,e.toLowerCase()):!1};var objectKeys=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t},isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},indexOf=function(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0;r<e.length;r++)if(e[r]===t)return r;return-1};


},{"./response":90,"Base64":91,"inherits":93,"stream":101}],90:[function(require,module,exports){
  function parseHeaders(e){for(var t=e.getAllResponseHeaders().split(/\r?\n/),s={},r=0;r<t.length;r++){var a=t[r];if(""!==a){var i=a.match(/^([^:]+):\s*(.*)/);if(i){var o=i[1].toLowerCase(),n=i[2];void 0!==s[o]?isArray(s[o])?s[o].push(n):s[o]=[s[o],n]:s[o]=n}else s[a]=!0}}return s}var Stream=require("stream"),util=require("util"),Response=module.exports=function(e){this.offset=0,this.readable=!0};util.inherits(Response,Stream);var capable={streaming:!0,status2:!0};Response.prototype.getResponse=function(e){var t=String(e.responseType).toLowerCase();return"blob"===t?e.responseBlob||e.response:"arraybuffer"===t?e.response:e.responseText},Response.prototype.getHeader=function(e){return this.headers[e.toLowerCase()]},Response.prototype.handle=function(e){if(2===e.readyState&&capable.status2){try{this.statusCode=e.status,this.headers=parseHeaders(e)}catch(t){capable.status2=!1}capable.status2&&this.emit("ready")}else if(capable.streaming&&3===e.readyState){try{this.statusCode||(this.statusCode=e.status,this.headers=parseHeaders(e),this.emit("ready"))}catch(t){}try{this._emitData(e)}catch(t){capable.streaming=!1}}else 4===e.readyState&&(this.statusCode||(this.statusCode=e.status,this.emit("ready")),this._emitData(e),e.error?this.emit("error",this.getResponse(e)):this.emit("end"),this.emit("close"))},Response.prototype._emitData=function(e){var t=this.getResponse(e);return t.toString().match(/ArrayBuffer/)?(this.emit("data",new Uint8Array(t,this.offset)),void(this.offset=t.byteLength)):void(t.length>this.offset&&(this.emit("data",t.slice(this.offset)),this.offset=t.length))};var isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};


},{"stream":101,"util":109}],91:[function(require,module,exports){
  !function(){function t(t){this.message=t}var e="undefined"!=typeof exports?exports:this,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";t.prototype=new Error,t.prototype.name="InvalidCharacterError",e.btoa||(e.btoa=function(e){for(var o,n,a=0,i=r,c="";e.charAt(0|a)||(i="=",a%1);c+=i.charAt(63&o>>8-a%1*8)){if(n=e.charCodeAt(a+=.75),n>255)throw new t("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");o=o<<8|n}return c}),e.atob||(e.atob=function(e){if(e=e.replace(/=+$/,""),e.length%4==1)throw new t("'atob' failed: The string to be decoded is not correctly encoded.");for(var o,n,a=0,i=0,c="";n=e.charAt(i++);~n&&(o=a%4?64*o+n:n,a++%4)?c+=String.fromCharCode(255&o>>(-2*a&6)):0)n=r.indexOf(n);return c})}();


},{}],92:[function(require,module,exports){
  var http=require("http"),https=module.exports;for(var key in http)http.hasOwnProperty(key)&&(https[key]=http[key]);https.request=function(t,e){return t||(t={}),t.scheme="https",http.request.call(this,t,e)};


},{"http":88}],93:[function(require,module,exports){
  "function"==typeof Object.create?module.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:module.exports=function(t,e){t.super_=e;var o=function(){};o.prototype=e.prototype,t.prototype=new o,t.prototype.constructor=t};


},{}],94:[function(require,module,exports){
  (function (process){
    function normalizeArray(r,t){for(var e=0,n=r.length-1;n>=0;n--){var s=r[n];"."===s?r.splice(n,1):".."===s?(r.splice(n,1),e++):e&&(r.splice(n,1),e--)}if(t)for(;e--;e)r.unshift("..");return r}function filter(r,t){if(r.filter)return r.filter(t);for(var e=[],n=0;n<r.length;n++)t(r[n],n,r)&&e.push(r[n]);return e}var splitPathRe=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,splitPath=function(r){return splitPathRe.exec(r).slice(1)};exports.resolve=function(){for(var r="",t=!1,e=arguments.length-1;e>=-1&&!t;e--){var n=e>=0?arguments[e]:process.cwd();if("string"!=typeof n)throw new TypeError("Arguments to path.resolve must be strings");n&&(r=n+"/"+r,t="/"===n.charAt(0))}return r=normalizeArray(filter(r.split("/"),function(r){return!!r}),!t).join("/"),(t?"/":"")+r||"."},exports.normalize=function(r){var t=exports.isAbsolute(r),e="/"===substr(r,-1);return r=normalizeArray(filter(r.split("/"),function(r){return!!r}),!t).join("/"),r||t||(r="."),r&&e&&(r+="/"),(t?"/":"")+r},exports.isAbsolute=function(r){return"/"===r.charAt(0)},exports.join=function(){var r=Array.prototype.slice.call(arguments,0);return exports.normalize(filter(r,function(r,t){if("string"!=typeof r)throw new TypeError("Arguments to path.join must be strings");return r}).join("/"))},exports.relative=function(r,t){function e(r){for(var t=0;t<r.length&&""===r[t];t++);for(var e=r.length-1;e>=0&&""===r[e];e--);return t>e?[]:r.slice(t,e-t+1)}r=exports.resolve(r).substr(1),t=exports.resolve(t).substr(1);for(var n=e(r.split("/")),s=e(t.split("/")),i=Math.min(n.length,s.length),o=i,u=0;i>u;u++)if(n[u]!==s[u]){o=u;break}for(var l=[],u=o;u<n.length;u++)l.push("..");return l=l.concat(s.slice(o)),l.join("/")},exports.sep="/",exports.delimiter=":",exports.dirname=function(r){var t=splitPath(r),e=t[0],n=t[1];return e||n?(n&&(n=n.substr(0,n.length-1)),e+n):"."},exports.basename=function(r,t){var e=splitPath(r)[2];return t&&e.substr(-1*t.length)===t&&(e=e.substr(0,e.length-t.length)),e},exports.extname=function(r){return splitPath(r)[3]};var substr="b"==="ab".substr(-1)?function(r,t,e){return r.substr(t,e)}:function(r,t,e){return 0>t&&(t=r.length+t),r.substr(t,e)};


  }).call(this,require("Zbi7gb"))
},{"Zbi7gb":95}],95:[function(require,module,exports){
  function noop(){}var process=module.exports={};process.nextTick=function(){var o="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(o)return function(o){return window.setImmediate(o)};if(e){var s=[];return window.addEventListener("message",function(o){var e=o.source;if((e===window||null===e)&&"process-tick"===o.data&&(o.stopPropagation(),s.length>0)){var n=s.shift();n()}},!0),function(o){s.push(o),window.postMessage("process-tick","*")}}return function(o){setTimeout(o,0)}}(),process.title="browser",process.browser=!0,process.env={},process.argv=[],process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.binding=function(o){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(o){throw new Error("process.chdir is not supported")};


},{}],96:[function(require,module,exports){
  (function (global){
    !function(o){function e(o){throw RangeError(L[o])}function n(o,e){for(var n=o.length;n--;)o[n]=e(o[n]);return o}function t(o,e){return n(o.split(S),e).join(".")}function r(o){for(var e,n,t=[],r=0,u=o.length;u>r;)e=o.charCodeAt(r++),e>=55296&&56319>=e&&u>r?(n=o.charCodeAt(r++),56320==(64512&n)?t.push(((1023&e)<<10)+(1023&n)+65536):(t.push(e),r--)):t.push(e);return t}function u(o){return n(o,function(o){var e="";return o>65535&&(o-=65536,e+=R(o>>>10&1023|55296),o=56320|1023&o),e+=R(o)}).join("")}function i(o){return 10>o-48?o-22:26>o-65?o-65:26>o-97?o-97:x}function f(o,e){return o+22+75*(26>o)-((0!=e)<<5)}function c(o,e,n){var t=0;for(o=n?P(o/m):o>>1,o+=P(o/e);o>M*C>>1;t+=x)o=P(o/M);return P(t+(M+1)*o/(o+j))}function l(o){var n,t,r,f,l,d,s,a,p,h,v=[],g=o.length,w=0,j=I,m=A;for(t=o.lastIndexOf(F),0>t&&(t=0),r=0;t>r;++r)o.charCodeAt(r)>=128&&e("not-basic"),v.push(o.charCodeAt(r));for(f=t>0?t+1:0;g>f;){for(l=w,d=1,s=x;f>=g&&e("invalid-input"),a=i(o.charCodeAt(f++)),(a>=x||a>P((b-w)/d))&&e("overflow"),w+=a*d,p=m>=s?y:s>=m+C?C:s-m,!(p>a);s+=x)h=x-p,d>P(b/h)&&e("overflow"),d*=h;n=v.length+1,m=c(w-l,n,0==l),P(w/n)>b-j&&e("overflow"),j+=P(w/n),w%=n,v.splice(w++,0,j)}return u(v)}function d(o){var n,t,u,i,l,d,s,a,p,h,v,g,w,j,m,E=[];for(o=r(o),g=o.length,n=I,t=0,l=A,d=0;g>d;++d)v=o[d],128>v&&E.push(R(v));for(u=i=E.length,i&&E.push(F);g>u;){for(s=b,d=0;g>d;++d)v=o[d],v>=n&&s>v&&(s=v);for(w=u+1,s-n>P((b-t)/w)&&e("overflow"),t+=(s-n)*w,n=s,d=0;g>d;++d)if(v=o[d],n>v&&++t>b&&e("overflow"),v==n){for(a=t,p=x;h=l>=p?y:p>=l+C?C:p-l,!(h>a);p+=x)m=a-h,j=x-h,E.push(R(f(h+m%j,0))),a=P(m/j);E.push(R(f(a,0))),l=c(t,w,u==i),t=0,++u}++t,++n}return E.join("")}function s(o){return t(o,function(o){return E.test(o)?l(o.slice(4).toLowerCase()):o})}function a(o){return t(o,function(o){return O.test(o)?"xn--"+d(o):o})}var p="object"==typeof exports&&exports,h="object"==typeof module&&module&&module.exports==p&&module,v="object"==typeof global&&global;(v.global===v||v.window===v)&&(o=v);var g,w,b=2147483647,x=36,y=1,C=26,j=38,m=700,A=72,I=128,F="-",E=/^xn--/,O=/[^ -~]/,S=/\x2E|\u3002|\uFF0E|\uFF61/g,L={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},M=x-y,P=Math.floor,R=String.fromCharCode;if(g={version:"1.2.4",ucs2:{decode:r,encode:u},decode:l,encode:d,toASCII:a,toUnicode:s},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return g});else if(p&&!p.nodeType)if(h)h.exports=g;else for(w in g)g.hasOwnProperty(w)&&(p[w]=g[w]);else o.punycode=g}(this);


  }).call(this,typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],97:[function(require,module,exports){
  "use strict";function hasOwnProperty(r,e){return Object.prototype.hasOwnProperty.call(r,e)}module.exports=function(r,e,t,n){e=e||"&",t=t||"=";var o={};if("string"!=typeof r||0===r.length)return o;var a=/\+/g;r=r.split(e);var s=1e3;n&&"number"==typeof n.maxKeys&&(s=n.maxKeys);var p=r.length;s>0&&p>s&&(p=s);for(var y=0;p>y;++y){var u,c,i,l,f=r[y].replace(a,"%20"),v=f.indexOf(t);v>=0?(u=f.substr(0,v),c=f.substr(v+1)):(u=f,c=""),i=decodeURIComponent(u),l=decodeURIComponent(c),hasOwnProperty(o,i)?isArray(o[i])?o[i].push(l):o[i]=[o[i],l]:o[i]=l}return o};var isArray=Array.isArray||function(r){return"[object Array]"===Object.prototype.toString.call(r)};


},{}],98:[function(require,module,exports){
  "use strict";function map(r,e){if(r.map)return r.map(e);for(var t=[],n=0;n<r.length;n++)t.push(e(r[n],n));return t}var stringifyPrimitive=function(r){switch(typeof r){case"string":return r;case"boolean":return r?"true":"false";case"number":return isFinite(r)?r:"";default:return""}};module.exports=function(r,e,t,n){return e=e||"&",t=t||"=",null===r&&(r=void 0),"object"==typeof r?map(objectKeys(r),function(n){var i=encodeURIComponent(stringifyPrimitive(n))+t;return isArray(r[n])?r[n].map(function(r){return i+encodeURIComponent(stringifyPrimitive(r))}).join(e):i+encodeURIComponent(stringifyPrimitive(r[n]))}).join(e):n?encodeURIComponent(stringifyPrimitive(n))+t+encodeURIComponent(stringifyPrimitive(r)):""};var isArray=Array.isArray||function(r){return"[object Array]"===Object.prototype.toString.call(r)},objectKeys=Object.keys||function(r){var e=[];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&e.push(t);return e};


},{}],99:[function(require,module,exports){
  "use strict";exports.decode=exports.parse=require("./decode"),exports.encode=exports.stringify=require("./encode");


},{"./decode":97,"./encode":98}],100:[function(require,module,exports){
  function Duplex(e){return this instanceof Duplex?(Readable.call(this,e),Writable.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",onend)):new Duplex(e)}function onend(){if(!this.allowHalfOpen&&!this._writableState.ended){var e=this;setImmediate(function(){e.end()})}}module.exports=Duplex;var inherits=require("inherits"),setImmediate=require("process/browser.js").nextTick,Readable=require("./readable.js"),Writable=require("./writable.js");inherits(Duplex,Readable),Duplex.prototype.write=Writable.prototype.write,Duplex.prototype.end=Writable.prototype.end,Duplex.prototype._write=Writable.prototype._write;


},{"./readable.js":104,"./writable.js":106,"inherits":93,"process/browser.js":102}],101:[function(require,module,exports){
  function Stream(){EE.call(this)}module.exports=Stream;var EE=require("events").EventEmitter,inherits=require("inherits");inherits(Stream,EE),Stream.Readable=require("./readable.js"),Stream.Writable=require("./writable.js"),Stream.Duplex=require("./duplex.js"),Stream.Transform=require("./transform.js"),Stream.PassThrough=require("./passthrough.js"),Stream.Stream=Stream,Stream.prototype.pipe=function(e,r){function t(r){e.writable&&!1===e.write(r)&&m.pause&&m.pause()}function n(){m.readable&&m.resume&&m.resume()}function o(){u||(u=!0,e.end())}function i(){u||(u=!0,"function"==typeof e.destroy&&e.destroy())}function s(e){if(a(),0===EE.listenerCount(this,"error"))throw e}function a(){m.removeListener("data",t),e.removeListener("drain",n),m.removeListener("end",o),m.removeListener("close",i),m.removeListener("error",s),e.removeListener("error",s),m.removeListener("end",a),m.removeListener("close",a),e.removeListener("close",a)}var m=this;m.on("data",t),e.on("drain",n),e._isStdio||r&&r.end===!1||(m.on("end",o),m.on("close",i));var u=!1;return m.on("error",s),e.on("error",s),m.on("end",a),m.on("close",a),e.on("close",a),e.emit("pipe",m),e};


},{"./duplex.js":100,"./passthrough.js":103,"./readable.js":104,"./transform.js":105,"./writable.js":106,"events":87,"inherits":93}],102:[function(require,module,exports){
  var process=module.exports={};process.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,n="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};if(n){var o=[];return window.addEventListener("message",function(e){var n=e.source;if((n===window||null===n)&&"process-tick"===e.data&&(e.stopPropagation(),o.length>0)){var r=o.shift();r()}},!0),function(e){o.push(e),window.postMessage("process-tick","*")}}return function(e){setTimeout(e,0)}}(),process.title="browser",process.browser=!0,process.env={},process.argv=[],process.binding=function(e){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(e){throw new Error("process.chdir is not supported")};


},{}],103:[function(require,module,exports){
  function PassThrough(r){return this instanceof PassThrough?void Transform.call(this,r):new PassThrough(r)}module.exports=PassThrough;var Transform=require("./transform.js"),inherits=require("inherits");inherits(PassThrough,Transform),PassThrough.prototype._transform=function(r,s,o){o(null,r)};


},{"./transform.js":105,"inherits":93}],104:[function(require,module,exports){
  (function (process){
    function ReadableState(e,t){e=e||{};var n=e.highWaterMark;this.highWaterMark=n||0===n?n:16384,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=!1,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.calledRead=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!e.objectMode,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(StringDecoder||(StringDecoder=require("string_decoder").StringDecoder),this.decoder=new StringDecoder(e.encoding),this.encoding=e.encoding)}function Readable(e){return this instanceof Readable?(this._readableState=new ReadableState(e,this),this.readable=!0,void Stream.call(this)):new Readable(e)}function readableAddChunk(e,t,n,r,a){var i=chunkInvalid(t,n);if(i)e.emit("error",i);else if(null===n||void 0===n)t.reading=!1,t.ended||onEofChunk(e,t);else if(t.objectMode||n&&n.length>0)if(t.ended&&!a){var d=new Error("stream.push() after EOF");e.emit("error",d)}else if(t.endEmitted&&a){var d=new Error("stream.unshift() after end event");e.emit("error",d)}else!t.decoder||a||r||(n=t.decoder.write(n)),t.length+=t.objectMode?1:n.length,a?t.buffer.unshift(n):(t.reading=!1,t.buffer.push(n)),t.needReadable&&emitReadable(e),maybeReadMore(e,t);else a||(t.reading=!1);return needMoreData(t)}function needMoreData(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function roundUpToNextPowerOf2(e){if(e>=MAX_HWM)e=MAX_HWM;else{e--;for(var t=1;32>t;t<<=1)e|=e>>t;e++}return e}function howMuchToRead(e,t){return 0===t.length&&t.ended?0:t.objectMode?0===e?0:1:isNaN(e)||null===e?t.flowing&&t.buffer.length?t.buffer[0].length:t.length:0>=e?0:(e>t.highWaterMark&&(t.highWaterMark=roundUpToNextPowerOf2(e)),e>t.length?t.ended?t.length:(t.needReadable=!0,0):e)}function chunkInvalid(e,t){var n=null;return Buffer.isBuffer(t)||"string"==typeof t||null===t||void 0===t||e.objectMode||n||(n=new TypeError("Invalid non-string/buffer chunk")),n}function onEofChunk(e,t){if(t.decoder&&!t.ended){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.length>0?emitReadable(e):endReadable(e)}function emitReadable(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,t.sync?setImmediate(function(){emitReadable_(e)}):emitReadable_(e))}function emitReadable_(e){e.emit("readable")}function maybeReadMore(e,t){t.readingMore||(t.readingMore=!0,setImmediate(function(){maybeReadMore_(e,t)}))}function maybeReadMore_(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function pipeOnDrain(e){return function(){var t=e._readableState;t.awaitDrain--,0===t.awaitDrain&&flow(e)}}function flow(e){function t(e,t,a){var i=e.write(n);!1===i&&r.awaitDrain++}var n,r=e._readableState;for(r.awaitDrain=0;r.pipesCount&&null!==(n=e.read());)if(1===r.pipesCount?t(r.pipes,0,null):forEach(r.pipes,t),e.emit("data",n),r.awaitDrain>0)return;return 0===r.pipesCount?(r.flowing=!1,void(EE.listenerCount(e,"data")>0&&emitDataEvents(e))):void(r.ranOut=!0)}function pipeOnReadable(){this._readableState.ranOut&&(this._readableState.ranOut=!1,flow(this))}function emitDataEvents(e,t){var n=e._readableState;if(n.flowing)throw new Error("Cannot switch to old mode now.");var r=t||!1,a=!1;e.readable=!0,e.pipe=Stream.prototype.pipe,e.on=e.addListener=Stream.prototype.on,e.on("readable",function(){a=!0;for(var t;!r&&null!==(t=e.read());)e.emit("data",t);null===t&&(a=!1,e._readableState.needReadable=!0)}),e.pause=function(){r=!0,this.emit("pause")},e.resume=function(){r=!1,a?setImmediate(function(){e.emit("readable")}):this.read(0),this.emit("resume")},e.emit("readable")}function fromList(e,t){var n,r=t.buffer,a=t.length,i=!!t.decoder,d=!!t.objectMode;if(0===r.length)return null;if(0===a)n=null;else if(d)n=r.shift();else if(!e||e>=a)n=i?r.join(""):Buffer.concat(r,a),r.length=0;else if(e<r[0].length){var o=r[0];n=o.slice(0,e),r[0]=o.slice(e)}else if(e===r[0].length)n=r.shift();else{n=i?"":new Buffer(e);for(var l=0,s=0,u=r.length;u>s&&e>l;s++){var o=r[0],h=Math.min(e-l,o.length);i?n+=o.slice(0,h):o.copy(n,l,0,h),h<o.length?r[0]=o.slice(h):r.shift(),l+=h}}return n}function endReadable(e){var t=e._readableState;if(t.length>0)throw new Error("endReadable called on non-empty stream");!t.endEmitted&&t.calledRead&&(t.ended=!0,setImmediate(function(){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}))}function forEach(e,t){for(var n=0,r=e.length;r>n;n++)t(e[n],n)}function indexOf(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1}module.exports=Readable,Readable.ReadableState=ReadableState;var EE=require("events").EventEmitter,Stream=require("./index.js"),Buffer=require("buffer").Buffer,setImmediate=require("process/browser.js").nextTick,StringDecoder,inherits=require("inherits");inherits(Readable,Stream),Readable.prototype.push=function(e,t){var n=this._readableState;return"string"!=typeof e||n.objectMode||(t=t||n.defaultEncoding,t!==n.encoding&&(e=new Buffer(e,t),t="")),readableAddChunk(this,n,e,t,!1)},Readable.prototype.unshift=function(e){var t=this._readableState;return readableAddChunk(this,t,e,"",!0)},Readable.prototype.setEncoding=function(e){StringDecoder||(StringDecoder=require("string_decoder").StringDecoder),this._readableState.decoder=new StringDecoder(e),this._readableState.encoding=e};var MAX_HWM=8388608;Readable.prototype.read=function(e){var t=this._readableState;t.calledRead=!0;var n=e;if(("number"!=typeof e||e>0)&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return emitReadable(this),null;if(e=howMuchToRead(e,t),0===e&&t.ended)return 0===t.length&&endReadable(this),null;var r=t.needReadable;t.length-e<=t.highWaterMark&&(r=!0),(t.ended||t.reading)&&(r=!1),r&&(t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1),r&&!t.reading&&(e=howMuchToRead(n,t));var a;return a=e>0?fromList(e,t):null,null===a&&(t.needReadable=!0,e=0),t.length-=e,0!==t.length||t.ended||(t.needReadable=!0),t.ended&&!t.endEmitted&&0===t.length&&endReadable(this),a},Readable.prototype._read=function(e){this.emit("error",new Error("not implemented"))},Readable.prototype.pipe=function(e,t){function n(e){e===s&&a()}function r(){e.end()}function a(){e.removeListener("close",d),e.removeListener("finish",o),e.removeListener("drain",p),e.removeListener("error",i),e.removeListener("unpipe",n),s.removeListener("end",r),s.removeListener("end",a),(!e._writableState||e._writableState.needDrain)&&p()}function i(t){l(),0===c&&0===EE.listenerCount(e,"error")&&e.emit("error",t)}function d(){e.removeListener("finish",o),l()}function o(){e.removeListener("close",d),l()}function l(){s.unpipe(e)}var s=this,u=this._readableState;switch(u.pipesCount){case 0:u.pipes=e;break;case 1:u.pipes=[u.pipes,e];break;default:u.pipes.push(e)}u.pipesCount+=1;var h=(!t||t.end!==!1)&&e!==process.stdout&&e!==process.stderr,f=h?r:a;u.endEmitted?setImmediate(f):s.once("end",f),e.on("unpipe",n);var p=pipeOnDrain(s);e.on("drain",p);var c=EE.listenerCount(e,"error");return e.once("error",i),e.once("close",d),e.once("finish",o),e.emit("pipe",s),u.flowing||(this.on("readable",pipeOnReadable),u.flowing=!0,setImmediate(function(){flow(s)})),e},Readable.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,this.removeListener("readable",pipeOnReadable),t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var n=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,this.removeListener("readable",pipeOnReadable),t.flowing=!1;for(var a=0;r>a;a++)n[a].emit("unpipe",this);return this}var a=indexOf(t.pipes,e);return-1===a?this:(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},Readable.prototype.on=function(e,t){var n=Stream.prototype.on.call(this,e,t);if("data"!==e||this._readableState.flowing||emitDataEvents(this),"readable"===e&&this.readable){var r=this._readableState;r.readableListening||(r.readableListening=!0,r.emittedReadable=!1,r.needReadable=!0,r.reading?r.length&&emitReadable(this,r):this.read(0))}return n},Readable.prototype.addListener=Readable.prototype.on,Readable.prototype.resume=function(){emitDataEvents(this),this.read(0),this.emit("resume")},Readable.prototype.pause=function(){emitDataEvents(this,!0),this.emit("pause")},Readable.prototype.wrap=function(e){var t=this._readableState,n=!1,r=this;e.on("end",function(){if(t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&r.push(e)}r.push(null)}),e.on("data",function(a){if(t.decoder&&(a=t.decoder.write(a)),a&&(t.objectMode||a.length)){var i=r.push(a);i||(n=!0,e.pause())}});for(var a in e)"function"==typeof e[a]&&"undefined"==typeof this[a]&&(this[a]=function(t){return function(){return e[t].apply(e,arguments)}}(a));var i=["error","close","destroy","pause","resume"];return forEach(i,function(t){e.on(t,function(e){return r.emit.apply(r,t,e)})}),r._read=function(t){n&&(n=!1,e.resume())},r},Readable._fromList=fromList;


  }).call(this,require("Zbi7gb"))
},{"./index.js":101,"Zbi7gb":95,"buffer":78,"events":87,"inherits":93,"process/browser.js":102,"string_decoder":107}],105:[function(require,module,exports){
  function TransformState(r,t){this.afterTransform=function(r,n){return afterTransform(t,r,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function afterTransform(r,t,n){var e=r._transformState;e.transforming=!1;var a=e.writecb;if(!a)return r.emit("error",new Error("no writecb in Transform class"));e.writechunk=null,e.writecb=null,null!==n&&void 0!==n&&r.push(n),a&&a(t);var i=r._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&r._read(i.highWaterMark)}function Transform(r){if(!(this instanceof Transform))return new Transform(r);Duplex.call(this,r);var t=(this._transformState=new TransformState(r,this),this);this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("finish",function(){"function"==typeof this._flush?this._flush(function(r){done(t,r)}):done(t)})}function done(r,t){if(t)return r.emit("error",t);var n=r._writableState,e=(r._readableState,r._transformState);if(n.length)throw new Error("calling transform done when ws.length != 0");if(e.transforming)throw new Error("calling transform done when still transforming");return r.push(null)}module.exports=Transform;var Duplex=require("./duplex.js"),inherits=require("inherits");inherits(Transform,Duplex),Transform.prototype.push=function(r,t){return this._transformState.needTransform=!1,Duplex.prototype.push.call(this,r,t)},Transform.prototype._transform=function(r,t,n){throw new Error("not implemented")},Transform.prototype._write=function(r,t,n){var e=this._transformState;if(e.writecb=n,e.writechunk=r,e.writeencoding=t,!e.transforming){var a=this._readableState;(e.needTransform||a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}},Transform.prototype._read=function(r){var t=this._transformState;t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0};


},{"./duplex.js":100,"inherits":93}],106:[function(require,module,exports){
  function WriteReq(e,t,r){this.chunk=e,this.encoding=t,this.callback=r}function WritableState(e,t){e=e||{};var r=e.highWaterMark;this.highWaterMark=r||0===r?r:16384,this.objectMode=!!e.objectMode,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var i=e.decodeStrings===!1;this.decodeStrings=!i,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){onwrite(t,e)},this.writecb=null,this.writelen=0,this.buffer=[]}function Writable(e){return this instanceof Writable||this instanceof Stream.Duplex?(this._writableState=new WritableState(e,this),this.writable=!0,void Stream.call(this)):new Writable(e)}function writeAfterEnd(e,t,r){var i=new Error("write after end");e.emit("error",i),setImmediate(function(){r(i)})}function validChunk(e,t,r,i){var n=!0;if(!Buffer.isBuffer(r)&&"string"!=typeof r&&null!==r&&void 0!==r&&!t.objectMode){var f=new TypeError("Invalid non-string/buffer chunk");e.emit("error",f),setImmediate(function(){i(f)}),n=!1}return n}function decodeChunk(e,t,r){return e.objectMode||e.decodeStrings===!1||"string"!=typeof t||(t=new Buffer(t,r)),t}function writeOrBuffer(e,t,r,i,n){r=decodeChunk(t,r,i);var f=t.objectMode?1:r.length;t.length+=f;var o=t.length<t.highWaterMark;return t.needDrain=!o,t.writing?t.buffer.push(new WriteReq(r,i,n)):doWrite(e,t,f,r,i,n),o}function doWrite(e,t,r,i,n,f){t.writelen=r,t.writecb=f,t.writing=!0,t.sync=!0,e._write(i,n,t.onwrite),t.sync=!1}function onwriteError(e,t,r,i,n){r?setImmediate(function(){n(i)}):n(i),e.emit("error",i)}function onwriteStateUpdate(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function onwrite(e,t){var r=e._writableState,i=r.sync,n=r.writecb;if(onwriteStateUpdate(r),t)onwriteError(e,r,i,t,n);else{var f=needFinish(e,r);f||r.bufferProcessing||!r.buffer.length||clearBuffer(e,r),i?setImmediate(function(){afterWrite(e,r,f,n)}):afterWrite(e,r,f,n)}}function afterWrite(e,t,r,i){r||onwriteDrain(e,t),i(),r&&finishMaybe(e,t)}function onwriteDrain(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function clearBuffer(e,t){t.bufferProcessing=!0;for(var r=0;r<t.buffer.length;r++){var i=t.buffer[r],n=i.chunk,f=i.encoding,o=i.callback,a=t.objectMode?1:n.length;if(doWrite(e,t,a,n,f,o),t.writing){r++;break}}t.bufferProcessing=!1,r<t.buffer.length?t.buffer=t.buffer.slice(r):t.buffer.length=0}function needFinish(e,t){return t.ending&&0===t.length&&!t.finished&&!t.writing}function finishMaybe(e,t){var r=needFinish(e,t);return r&&(t.finished=!0,e.emit("finish")),r}function endWritable(e,t,r){t.ending=!0,finishMaybe(e,t),r&&(t.finished?setImmediate(r):e.once("finish",r)),t.ended=!0}module.exports=Writable,Writable.WritableState=WritableState;var isUint8Array="undefined"!=typeof Uint8Array?function(e){return e instanceof Uint8Array}:function(e){return e&&e.constructor&&"Uint8Array"===e.constructor.name},isArrayBuffer="undefined"!=typeof ArrayBuffer?function(e){return e instanceof ArrayBuffer}:function(e){return e&&e.constructor&&"ArrayBuffer"===e.constructor.name},inherits=require("inherits"),Stream=require("./index.js"),setImmediate=require("process/browser.js").nextTick,Buffer=require("buffer").Buffer;inherits(Writable,Stream),Writable.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},Writable.prototype.write=function(e,t,r){var i=this._writableState,n=!1;return"function"==typeof t&&(r=t,t=null),!Buffer.isBuffer(e)&&isUint8Array(e)&&(e=new Buffer(e)),isArrayBuffer(e)&&"undefined"!=typeof Uint8Array&&(e=new Buffer(new Uint8Array(e))),Buffer.isBuffer(e)?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof r&&(r=function(){}),i.ended?writeAfterEnd(this,i,r):validChunk(this,i,e,r)&&(n=writeOrBuffer(this,i,e,t,r)),n},Writable.prototype._write=function(e,t,r){r(new Error("not implemented"))},Writable.prototype.end=function(e,t,r){var i=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),"undefined"!=typeof e&&null!==e&&this.write(e,t),i.ending||i.finished||endWritable(this,i,r)};


},{"./index.js":101,"buffer":78,"inherits":93,"process/browser.js":102}],107:[function(require,module,exports){
  function assertEncoding(e){if(e&&!Buffer.isEncoding(e))throw new Error("Unknown encoding: "+e)}function passThroughWrite(e){return e.toString(this.encoding)}function utf16DetectIncompleteChar(e){var t=this.charReceived=e.length%2;return this.charLength=t?2:0,t}function base64DetectIncompleteChar(e){var t=this.charReceived=e.length%3;return this.charLength=t?3:0,t}var Buffer=require("buffer").Buffer,StringDecoder=exports.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),assertEncoding(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=utf16DetectIncompleteChar;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=base64DetectIncompleteChar;break;default:return void(this.write=passThroughWrite)}this.charBuffer=new Buffer(6),this.charReceived=0,this.charLength=0};StringDecoder.prototype.write=function(e){for(var t="",r=0;this.charLength;){var h=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,r,h),this.charReceived+=h-r,r=h,this.charReceived<this.charLength)return"";t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var i=t.charCodeAt(t.length-1);if(!(i>=55296&&56319>=i)){if(this.charReceived=this.charLength=0,h==e.length)return t;e=e.slice(h,e.length);break}this.charLength+=this.surrogateSize,t=""}var c=this.detectIncompleteChar(e),n=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-c,n),this.charReceived=c,n-=c),t+=e.toString(this.encoding,0,n);var n=t.length-1,i=t.charCodeAt(n);if(i>=55296&&56319>=i){var a=this.surrogateSize;return this.charLength+=a,this.charReceived+=a,this.charBuffer.copy(this.charBuffer,a,0,a),this.charBuffer.write(t.charAt(t.length-1),this.encoding),t.substring(0,n)}return t},StringDecoder.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var r=e[e.length-t];if(1==t&&r>>5==6){this.charLength=2;break}if(2>=t&&r>>4==14){this.charLength=3;break}if(3>=t&&r>>3==30){this.charLength=4;break}}return t},StringDecoder.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var r=this.charReceived,h=this.charBuffer,i=this.encoding;t+=h.slice(0,r).toString(i)}return t};


},{"buffer":78}],108:[function(require,module,exports){
  module.exports=function(o){return o&&"object"==typeof o&&"function"==typeof o.copy&&"function"==typeof o.fill&&"function"==typeof o.readUInt8};


},{}],109:[function(require,module,exports){
  (function (process,global){
    function inspect(e,r){var t={seen:[],stylize:stylizeNoColor};return arguments.length>=3&&(t.depth=arguments[2]),arguments.length>=4&&(t.colors=arguments[3]),isBoolean(r)?t.showHidden=r:r&&exports._extend(t,r),isUndefined(t.showHidden)&&(t.showHidden=!1),isUndefined(t.depth)&&(t.depth=2),isUndefined(t.colors)&&(t.colors=!1),isUndefined(t.customInspect)&&(t.customInspect=!0),t.colors&&(t.stylize=stylizeWithColor),formatValue(t,e,t.depth)}function stylizeWithColor(e,r){var t=inspect.styles[r];return t?"["+inspect.colors[t][0]+"m"+e+"["+inspect.colors[t][1]+"m":e}function stylizeNoColor(e,r){return e}function arrayToHash(e){var r={};return e.forEach(function(e,t){r[e]=!0}),r}function formatValue(e,r,t){if(e.customInspect&&r&&isFunction(r.inspect)&&r.inspect!==exports.inspect&&(!r.constructor||r.constructor.prototype!==r)){var n=r.inspect(t,e);return isString(n)||(n=formatValue(e,n,t)),n}var i=formatPrimitive(e,r);if(i)return i;var o=Object.keys(r),s=arrayToHash(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(r)),isError(r)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return formatError(r);if(0===o.length){if(isFunction(r)){var u=r.name?": "+r.name:"";return e.stylize("[Function"+u+"]","special")}if(isRegExp(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(isDate(r))return e.stylize(Date.prototype.toString.call(r),"date");if(isError(r))return formatError(r)}var a="",c=!1,l=["{","}"];if(isArray(r)&&(c=!0,l=["[","]"]),isFunction(r)){var p=r.name?": "+r.name:"";a=" [Function"+p+"]"}if(isRegExp(r)&&(a=" "+RegExp.prototype.toString.call(r)),isDate(r)&&(a=" "+Date.prototype.toUTCString.call(r)),isError(r)&&(a=" "+formatError(r)),0===o.length&&(!c||0==r.length))return l[0]+a+l[1];if(0>t)return isRegExp(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special");e.seen.push(r);var f;return f=c?formatArray(e,r,t,s,o):o.map(function(n){return formatProperty(e,r,t,s,n,c)}),e.seen.pop(),reduceToSingleString(f,a,l)}function formatPrimitive(e,r){if(isUndefined(r))return e.stylize("undefined","undefined");if(isString(r)){var t="'"+JSON.stringify(r).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(t,"string")}return isNumber(r)?e.stylize(""+r,"number"):isBoolean(r)?e.stylize(""+r,"boolean"):isNull(r)?e.stylize("null","null"):void 0}function formatError(e){return"["+Error.prototype.toString.call(e)+"]"}function formatArray(e,r,t,n,i){for(var o=[],s=0,u=r.length;u>s;++s)hasOwnProperty(r,String(s))?o.push(formatProperty(e,r,t,n,String(s),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(formatProperty(e,r,t,n,i,!0))}),o}function formatProperty(e,r,t,n,i,o){var s,u,a;if(a=Object.getOwnPropertyDescriptor(r,i)||{value:r[i]},a.get?u=a.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):a.set&&(u=e.stylize("[Setter]","special")),hasOwnProperty(n,i)||(s="["+i+"]"),u||(e.seen.indexOf(a.value)<0?(u=isNull(t)?formatValue(e,a.value,null):formatValue(e,a.value,t-1),u.indexOf("\n")>-1&&(u=o?u.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+u.split("\n").map(function(e){return"   "+e}).join("\n"))):u=e.stylize("[Circular]","special")),isUndefined(s)){if(o&&i.match(/^\d+$/))return u;s=JSON.stringify(""+i),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+u}function reduceToSingleString(e,r,t){var n=0,i=e.reduce(function(e,r){return n++,r.indexOf("\n")>=0&&n++,e+r.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?t[0]+(""===r?"":r+"\n ")+" "+e.join(",\n  ")+" "+t[1]:t[0]+r+" "+e.join(", ")+" "+t[1]}function isArray(e){return Array.isArray(e)}function isBoolean(e){return"boolean"==typeof e}function isNull(e){return null===e}function isNullOrUndefined(e){return null==e}function isNumber(e){return"number"==typeof e}function isString(e){return"string"==typeof e}function isSymbol(e){return"symbol"==typeof e}function isUndefined(e){return void 0===e}function isRegExp(e){return isObject(e)&&"[object RegExp]"===objectToString(e)}function isObject(e){return"object"==typeof e&&null!==e}function isDate(e){return isObject(e)&&"[object Date]"===objectToString(e)}function isError(e){return isObject(e)&&("[object Error]"===objectToString(e)||e instanceof Error)}function isFunction(e){return"function"==typeof e}function isPrimitive(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function objectToString(e){return Object.prototype.toString.call(e)}function pad(e){return 10>e?"0"+e.toString(10):e.toString(10)}function timestamp(){var e=new Date,r=[pad(e.getHours()),pad(e.getMinutes()),pad(e.getSeconds())].join(":");return[e.getDate(),months[e.getMonth()],r].join(" ")}function hasOwnProperty(e,r){return Object.prototype.hasOwnProperty.call(e,r)}var formatRegExp=/%[sdj%]/g;exports.format=function(e){if(!isString(e)){for(var r=[],t=0;t<arguments.length;t++)r.push(inspect(arguments[t]));return r.join(" ")}for(var t=1,n=arguments,i=n.length,o=String(e).replace(formatRegExp,function(e){if("%%"===e)return"%";if(t>=i)return e;switch(e){case"%s":return String(n[t++]);case"%d":return Number(n[t++]);case"%j":try{return JSON.stringify(n[t++])}catch(r){return"[Circular]"}default:return e}}),s=n[t];i>t;s=n[++t])o+=isNull(s)||!isObject(s)?" "+s:" "+inspect(s);return o},exports.deprecate=function(e,r){function t(){if(!n){if(process.throwDeprecation)throw new Error(r);process.traceDeprecation?0:0,n=!0}return e.apply(this,arguments)}if(isUndefined(global.process))return function(){return exports.deprecate(e,r).apply(this,arguments)};if(process.noDeprecation===!0)return e;var n=!1;return t};var debugs={},debugEnviron;exports.debuglog=function(e){if(isUndefined(debugEnviron)&&(debugEnviron=process.env.NODE_DEBUG||""),e=e.toUpperCase(),!debugs[e])if(new RegExp("\\b"+e+"\\b","i").test(debugEnviron)){var r=process.pid;debugs[e]=function(){var t=exports.format.apply(exports,arguments);0}}else debugs[e]=function(){};return debugs[e]},exports.inspect=inspect,inspect.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},inspect.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},exports.isArray=isArray,exports.isBoolean=isBoolean,exports.isNull=isNull,exports.isNullOrUndefined=isNullOrUndefined,exports.isNumber=isNumber,exports.isString=isString,exports.isSymbol=isSymbol,exports.isUndefined=isUndefined,exports.isRegExp=isRegExp,exports.isObject=isObject,exports.isDate=isDate,exports.isError=isError,exports.isFunction=isFunction,exports.isPrimitive=isPrimitive,exports.isBuffer=require("./support/isBuffer");var months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];exports.log=function(){0},exports.inherits=require("inherits"),exports._extend=function(e,r){if(!r||!isObject(r))return e;for(var t=Object.keys(r),n=t.length;n--;)e[t[n]]=r[t[n]];return e};


  }).call(this,require("Zbi7gb"),typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"./support/isBuffer":108,"Zbi7gb":95,"inherits":93}],110:[function(require,module,exports){
  "use strict";function EE(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function EventEmitter(){}EventEmitter.prototype._events=void 0,EventEmitter.prototype.listeners=function(t){if(!this._events||!this._events[t])return[];if(this._events[t].fn)return[this._events[t].fn];for(var e=0,n=this._events[t].length,s=new Array(n);n>e;e++)s[e]=this._events[t][e].fn;return s},EventEmitter.prototype.emit=function(t,e,n,s,r,i){if(!this._events||!this._events[t])return!1;var v,o,h=this._events[t],E=arguments.length;if("function"==typeof h.fn){switch(h.once&&this.removeListener(t,h.fn,!0),E){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,e),!0;case 3:return h.fn.call(h.context,e,n),!0;case 4:return h.fn.call(h.context,e,n,s),!0;case 5:return h.fn.call(h.context,e,n,s,r),!0;case 6:return h.fn.call(h.context,e,n,s,r,i),!0}for(o=1,v=new Array(E-1);E>o;o++)v[o-1]=arguments[o];h.fn.apply(h.context,v)}else{var f,c=h.length;for(o=0;c>o;o++)switch(h[o].once&&this.removeListener(t,h[o].fn,!0),E){case 1:h[o].fn.call(h[o].context);break;case 2:h[o].fn.call(h[o].context,e);break;case 3:h[o].fn.call(h[o].context,e,n);break;default:if(!v)for(f=1,v=new Array(E-1);E>f;f++)v[f-1]=arguments[f];h[o].fn.apply(h[o].context,v)}}return!0},EventEmitter.prototype.on=function(t,e,n){var s=new EE(e,n||this);return this._events||(this._events={}),this._events[t]?this._events[t].fn?this._events[t]=[this._events[t],s]:this._events[t].push(s):this._events[t]=s,this},EventEmitter.prototype.once=function(t,e,n){var s=new EE(e,n||this,!0);return this._events||(this._events={}),this._events[t]?this._events[t].fn?this._events[t]=[this._events[t],s]:this._events[t].push(s):this._events[t]=s,this},EventEmitter.prototype.removeListener=function(t,e,n){if(!this._events||!this._events[t])return this;var s=this._events[t],r=[];if(e&&(s.fn&&(s.fn!==e||n&&!s.once)&&r.push(s),!s.fn))for(var i=0,v=s.length;v>i;i++)(s[i].fn!==e||n&&!s[i].once)&&r.push(s[i]);return r.length?this._events[t]=1===r.length?r[0]:r:delete this._events[t],this},EventEmitter.prototype.removeAllListeners=function(t){return this._events?(t?delete this._events[t]:this._events={},this):this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.addListener=EventEmitter.prototype.on,EventEmitter.prototype.setMaxListeners=function(){return this},EventEmitter.EventEmitter=EventEmitter,EventEmitter.EventEmitter2=EventEmitter,EventEmitter.EventEmitter3=EventEmitter,module.exports=EventEmitter;


},{}],111:[function(require,module,exports){
  !function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e){var t=e.length,n=Z.type(e);return"function"===n||Z.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e}function r(e,t,n){if(Z.isFunction(t))return Z.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return Z.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(ae.test(t))return Z.filter(t,e,n);t=Z.filter(t,e)}return Z.grep(e,function(e){return U.call(t,e)>=0!==n})}function i(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function o(e){var t=he[e]={};return Z.each(e.match(de)||[],function(e,n){t[n]=!0}),t}function s(){J.removeEventListener("DOMContentLoaded",s,!1),e.removeEventListener("load",s,!1),Z.ready()}function a(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=Z.expando+Math.random()}function u(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(be,"-$1").toLowerCase(),n=e.getAttribute(r),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:xe.test(n)?Z.parseJSON(n):n}catch(i){}ye.set(e,t,n)}else n=void 0;return n}function l(){return!0}function c(){return!1}function f(){try{return J.activeElement}catch(e){}}function p(e,t){return Z.nodeName(e,"table")&&Z.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function d(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function h(e){var t=Pe.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function g(e,t){for(var n=0,r=e.length;r>n;n++)ve.set(e[n],"globalEval",!t||ve.get(t[n],"globalEval"))}function m(e,t){var n,r,i,o,s,a,u,l;if(1===t.nodeType){if(ve.hasData(e)&&(o=ve.access(e),s=ve.set(t,o),l=o.events)){delete s.handle,s.events={};for(i in l)for(n=0,r=l[i].length;r>n;n++)Z.event.add(t,i,l[i][n])}ye.hasData(e)&&(a=ye.access(e),u=Z.extend({},a),ye.set(t,u))}}function v(e,t){var n=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&Z.nodeName(e,t)?Z.merge([e],n):n}function y(e,t){var n=t.nodeName.toLowerCase();"input"===n&&Ne.test(e.type)?t.checked=e.checked:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}function x(t,n){var r,i=Z(n.createElement(t)).appendTo(n.body),o=e.getDefaultComputedStyle&&(r=e.getDefaultComputedStyle(i[0]))?r.display:Z.css(i[0],"display");return i.detach(),o}function b(e){var t=J,n=$e[e];return n||(n=x(e,t),"none"!==n&&n||(We=(We||Z("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=We[0].contentDocument,t.write(),t.close(),n=x(e,t),We.detach()),$e[e]=n),n}function w(e,t,n){var r,i,o,s,a=e.style;return n=n||_e(e),n&&(s=n.getPropertyValue(t)||n[t]),n&&(""!==s||Z.contains(e.ownerDocument,e)||(s=Z.style(e,t)),Ie.test(s)&&Be.test(t)&&(r=a.width,i=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=r,a.minWidth=i,a.maxWidth=o)),void 0!==s?s+"":s}function T(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function C(e,t){if(t in e)return t;for(var n=t[0].toUpperCase()+t.slice(1),r=t,i=Ge.length;i--;)if(t=Ge[i]+n,t in e)return t;return r}function N(e,t,n){var r=Xe.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function k(e,t,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===t?1:0,s=0;4>o;o+=2)"margin"===n&&(s+=Z.css(e,n+Te[o],!0,i)),r?("content"===n&&(s-=Z.css(e,"padding"+Te[o],!0,i)),"margin"!==n&&(s-=Z.css(e,"border"+Te[o]+"Width",!0,i))):(s+=Z.css(e,"padding"+Te[o],!0,i),"padding"!==n&&(s+=Z.css(e,"border"+Te[o]+"Width",!0,i)));return s}function E(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,o=_e(e),s="border-box"===Z.css(e,"boxSizing",!1,o);if(0>=i||null==i){if(i=w(e,t,o),(0>i||null==i)&&(i=e.style[t]),Ie.test(i))return i;r=s&&(Q.boxSizingReliable()||i===e.style[t]),i=parseFloat(i)||0}return i+k(e,t,n||(s?"border":"content"),r,o)+"px"}function S(e,t){for(var n,r,i,o=[],s=0,a=e.length;a>s;s++)r=e[s],r.style&&(o[s]=ve.get(r,"olddisplay"),n=r.style.display,t?(o[s]||"none"!==n||(r.style.display=""),""===r.style.display&&Ce(r)&&(o[s]=ve.access(r,"olddisplay",b(r.nodeName)))):(i=Ce(r),"none"===n&&i||ve.set(r,"olddisplay",i?n:Z.css(r,"display"))));for(s=0;a>s;s++)r=e[s],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?o[s]||"":"none"));return e}function j(e,t,n,r,i){return new j.prototype.init(e,t,n,r,i)}function D(){return setTimeout(function(){Qe=void 0}),Qe=Z.now()}function A(e,t){var n,r=0,i={height:e};for(t=t?1:0;4>r;r+=2-t)n=Te[r],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function L(e,t,n){for(var r,i=(nt[t]||[]).concat(nt["*"]),o=0,s=i.length;s>o;o++)if(r=i[o].call(n,t,e))return r}function q(e,t,n){var r,i,o,s,a,u,l,c,f=this,p={},d=e.style,h=e.nodeType&&Ce(e),g=ve.get(e,"fxshow");n.queue||(a=Z._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,u=a.empty.fire,a.empty.fire=function(){a.unqueued||u()}),a.unqueued++,f.always(function(){f.always(function(){a.unqueued--,Z.queue(e,"fx").length||a.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],l=Z.css(e,"display"),c="none"===l?ve.get(e,"olddisplay")||b(e.nodeName):l,"inline"===c&&"none"===Z.css(e,"float")&&(d.display="inline-block")),n.overflow&&(d.overflow="hidden",f.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]}));for(r in t)if(i=t[r],Ke.exec(i)){if(delete t[r],o=o||"toggle"===i,i===(h?"hide":"show")){if("show"!==i||!g||void 0===g[r])continue;h=!0}p[r]=g&&g[r]||Z.style(e,r)}else l=void 0;if(Z.isEmptyObject(p))"inline"===("none"===l?b(e.nodeName):l)&&(d.display=l);else{g?"hidden"in g&&(h=g.hidden):g=ve.access(e,"fxshow",{}),o&&(g.hidden=!h),h?Z(e).show():f.done(function(){Z(e).hide()}),f.done(function(){var t;ve.remove(e,"fxshow");for(t in p)Z.style(e,t,p[t])});for(r in p)s=L(h?g[r]:0,r,f),r in g||(g[r]=s.start,h&&(s.end=s.start,s.start="width"===r||"height"===r?1:0))}}function H(e,t){var n,r,i,o,s;for(n in e)if(r=Z.camelCase(n),i=t[r],o=e[n],Z.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),s=Z.cssHooks[r],s&&"expand"in s){o=s.expand(o),delete e[r];for(n in o)n in e||(e[n]=o[n],t[n]=i)}else t[r]=i}function O(e,t,n){var r,i,o=0,s=tt.length,a=Z.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;for(var t=Qe||D(),n=Math.max(0,l.startTime+l.duration-t),r=n/l.duration||0,o=1-r,s=0,u=l.tweens.length;u>s;s++)l.tweens[s].run(o);return a.notifyWith(e,[l,o,n]),1>o&&u?n:(a.resolveWith(e,[l]),!1)},l=a.promise({elem:e,props:Z.extend({},t),opts:Z.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Qe||D(),duration:n.duration,tweens:[],createTween:function(t,n){var r=Z.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)l.tweens[n].run(1);return t?a.resolveWith(e,[l,t]):a.rejectWith(e,[l,t]),this}}),c=l.props;for(H(c,l.opts.specialEasing);s>o;o++)if(r=tt[o].call(l,e,c,l.opts))return r;return Z.map(c,L,l),Z.isFunction(l.opts.start)&&l.opts.start.call(e,l),Z.fx.timer(Z.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function F(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(de)||[];if(Z.isFunction(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function P(e,t,n,r){function i(a){var u;return o[a]=!0,Z.each(e[a]||[],function(e,a){var l=a(t,n,r);return"string"!=typeof l||s||o[l]?s?!(u=l):void 0:(t.dataTypes.unshift(l),i(l),!1)}),u}var o={},s=e===wt;return i(t.dataTypes[0])||!o["*"]&&i("*")}function M(e,t){var n,r,i=Z.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&Z.extend(!0,e,r),e}function R(e,t,n){for(var r,i,o,s,a=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in a)if(a[i]&&a[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}s||(s=i)}o=o||s}return o?(o!==u[0]&&u.unshift(o),n[o]):void 0}function W(e,t,n,r){var i,o,s,a,u,l={},c=e.dataTypes.slice();if(c[1])for(s in e.converters)l[s.toLowerCase()]=e.converters[s];for(o=c.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(s=l[u+" "+o]||l["* "+o],!s)for(i in l)if(a=i.split(" "),a[1]===o&&(s=l[u+" "+a[0]]||l["* "+a[0]])){s===!0?s=l[i]:l[i]!==!0&&(o=a[0],c.unshift(a[1]));break}if(s!==!0)if(s&&e["throws"])t=s(t);else try{t=s(t)}catch(f){return{state:"parsererror",error:s?f:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}function $(e,t,n,r){var i;if(Z.isArray(t))Z.each(t,function(t,i){n||kt.test(e)?r(e,i):$(e+"["+("object"==typeof i?t:"")+"]",i,n,r)});else if(n||"object"!==Z.type(t))r(e,t);else for(i in t)$(e+"["+i+"]",t[i],n,r)}function B(e){return Z.isWindow(e)?e:9===e.nodeType&&e.defaultView}var I=[],_=I.slice,z=I.concat,X=I.push,U=I.indexOf,V={},Y=V.toString,G=V.hasOwnProperty,Q={},J=e.document,K="2.1.1",Z=function(e,t){return new Z.fn.init(e,t)},ee=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,te=/^-ms-/,ne=/-([\da-z])/gi,re=function(e,t){return t.toUpperCase()};Z.fn=Z.prototype={jquery:K,constructor:Z,selector:"",length:0,toArray:function(){return _.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:_.call(this)},pushStack:function(e){var t=Z.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return Z.each(this,e,t)},map:function(e){return this.pushStack(Z.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(_.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:X,sort:I.sort,splice:I.splice},Z.extend=Z.fn.extend=function(){var e,t,n,r,i,o,s=arguments[0]||{},a=1,u=arguments.length,l=!1;for("boolean"==typeof s&&(l=s,s=arguments[a]||{},a++),"object"==typeof s||Z.isFunction(s)||(s={}),a===u&&(s=this,a--);u>a;a++)if(null!=(e=arguments[a]))for(t in e)n=s[t],r=e[t],s!==r&&(l&&r&&(Z.isPlainObject(r)||(i=Z.isArray(r)))?(i?(i=!1,o=n&&Z.isArray(n)?n:[]):o=n&&Z.isPlainObject(n)?n:{},s[t]=Z.extend(l,o,r)):void 0!==r&&(s[t]=r));return s},Z.extend({expando:"jQuery"+(K+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===Z.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!Z.isArray(e)&&e-parseFloat(e)>=0},isPlainObject:function(e){return"object"!==Z.type(e)||e.nodeType||Z.isWindow(e)?!1:e.constructor&&!G.call(e.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?V[Y.call(e)]||"object":typeof e},globalEval:function(e){var t,n=eval;e=Z.trim(e),e&&(1===e.indexOf("use strict")?(t=J.createElement("script"),t.text=e,J.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(te,"ms-").replace(ne,re)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,r){var i,o=0,s=e.length,a=n(e);if(r){if(a)for(;s>o&&(i=t.apply(e[o],r),i!==!1);o++);else for(o in e)if(i=t.apply(e[o],r),i===!1)break}else if(a)for(;s>o&&(i=t.call(e[o],o,e[o]),i!==!1);o++);else for(o in e)if(i=t.call(e[o],o,e[o]),i===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(ee,"")},makeArray:function(e,t){var r=t||[];return null!=e&&(n(Object(e))?Z.merge(r,"string"==typeof e?[e]:e):X.call(r,e)),r},inArray:function(e,t,n){return null==t?-1:U.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;n>r;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r,i=[],o=0,s=e.length,a=!n;s>o;o++)r=!t(e[o],o),r!==a&&i.push(e[o]);return i},map:function(e,t,r){var i,o=0,s=e.length,a=n(e),u=[];if(a)for(;s>o;o++)i=t(e[o],o,r),null!=i&&u.push(i);else for(o in e)i=t(e[o],o,r),null!=i&&u.push(i);return z.apply([],u)},guid:1,proxy:function(e,t){var n,r,i;return"string"==typeof t&&(n=e[t],t=e,e=n),Z.isFunction(e)?(r=_.call(arguments,2),i=function(){return e.apply(t||this,r.concat(_.call(arguments)))},i.guid=e.guid=e.guid||Z.guid++,i):void 0},now:Date.now,support:Q}),Z.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){V["[object "+t+"]"]=t.toLowerCase()});var ie=function(e){function t(e,t,n,r){var i,o,s,a,u,l,f,d,h,g;if((t?t.ownerDocument||t:$)!==q&&L(t),t=t||q,n=n||[],!e||"string"!=typeof e)return n;if(1!==(a=t.nodeType)&&9!==a)return[];if(O&&!r){if(i=ye.exec(e))if(s=i[1]){if(9===a){if(o=t.getElementById(s),!o||!o.parentNode)return n;if(o.id===s)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(s))&&R(t,o)&&o.id===s)return n.push(o),n}else{if(i[2])return Z.apply(n,t.getElementsByTagName(e)),n;if((s=i[3])&&w.getElementsByClassName&&t.getElementsByClassName)return Z.apply(n,t.getElementsByClassName(s)),n}if(w.qsa&&(!F||!F.test(e))){if(d=f=W,h=t,g=9===a&&e,1===a&&"object"!==t.nodeName.toLowerCase()){for(l=k(e),(f=t.getAttribute("id"))?d=f.replace(be,"\\/*#replaceCode#*/"):t.setAttribute("id",d),d="[id='"+d+"'] ",u=l.length;u--;)l[u]=d+p(l[u]);h=xe.test(e)&&c(t.parentNode)||t,g=l.join(",")}if(g)try{return Z.apply(n,h.querySelectorAll(g)),n}catch(m){}finally{f||t.removeAttribute("id")}}}return S(e.replace(ue,"$1"),t,n,r)}function n(){function e(n,r){return t.push(n+" ")>T.cacheLength&&delete e[t.shift()],e[n+" "]=r}var t=[];return e}function r(e){return e[W]=!0,e}function i(e){var t=q.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var n=e.split("|"),r=e.length;r--;)T.attrHandle[n[r]]=t}function s(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||Y)-(~e.sourceIndex||Y);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function a(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function u(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function l(e){return r(function(t){return t=+t,r(function(n,r){for(var i,o=e([],n.length,t),s=o.length;s--;)n[i=o[s]]&&(n[i]=!(r[i]=n[i]))})})}function c(e){return e&&typeof e.getElementsByTagName!==V&&e}function f(){}function p(e){for(var t=0,n=e.length,r="";n>t;t++)r+=e[t].value;return r}function d(e,t,n){var r=t.dir,i=n&&"parentNode"===r,o=I++;return t.first?function(t,n,o){for(;t=t[r];)if(1===t.nodeType||i)return e(t,n,o)}:function(t,n,s){var a,u,l=[B,o];if(s){for(;t=t[r];)if((1===t.nodeType||i)&&e(t,n,s))return!0}else for(;t=t[r];)if(1===t.nodeType||i){if(u=t[W]||(t[W]={}),(a=u[r])&&a[0]===B&&a[1]===o)return l[2]=a[2];if(u[r]=l,l[2]=e(t,n,s))return!0}}}function h(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function g(e,n,r){for(var i=0,o=n.length;o>i;i++)t(e,n[i],r);return r}function m(e,t,n,r,i){for(var o,s=[],a=0,u=e.length,l=null!=t;u>a;a++)(o=e[a])&&(!n||n(o,r,i))&&(s.push(o),l&&t.push(a));return s}function v(e,t,n,i,o,s){return i&&!i[W]&&(i=v(i)),o&&!o[W]&&(o=v(o,s)),r(function(r,s,a,u){var l,c,f,p=[],d=[],h=s.length,v=r||g(t||"*",a.nodeType?[a]:a,[]),y=!e||!r&&t?v:m(v,p,e,a,u),x=n?o||(r?e:h||i)?[]:s:y;if(n&&n(y,x,a,u),i)for(l=m(x,d),i(l,[],a,u),c=l.length;c--;)(f=l[c])&&(x[d[c]]=!(y[d[c]]=f));if(r){if(o||e){if(o){for(l=[],c=x.length;c--;)(f=x[c])&&l.push(y[c]=f);o(null,x=[],l,u)}for(c=x.length;c--;)(f=x[c])&&(l=o?te.call(r,f):p[c])>-1&&(r[l]=!(s[l]=f))}}else x=m(x===s?x.splice(h,x.length):x),o?o(null,s,x,u):Z.apply(s,x)})}function y(e){for(var t,n,r,i=e.length,o=T.relative[e[0].type],s=o||T.relative[" "],a=o?1:0,u=d(function(e){return e===t},s,!0),l=d(function(e){return te.call(t,e)>-1},s,!0),c=[function(e,n,r){return!o&&(r||n!==j)||((t=n).nodeType?u(e,n,r):l(e,n,r))}];i>a;a++)if(n=T.relative[e[a].type])c=[d(h(c),n)];else{if(n=T.filter[e[a].type].apply(null,e[a].matches),n[W]){for(r=++a;i>r&&!T.relative[e[r].type];r++);return v(a>1&&h(c),a>1&&p(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(ue,"$1"),n,r>a&&y(e.slice(a,r)),i>r&&y(e=e.slice(r)),i>r&&p(e))}c.push(n)}return h(c)}function x(e,n){var i=n.length>0,o=e.length>0,s=function(r,s,a,u,l){var c,f,p,d=0,h="0",g=r&&[],v=[],y=j,x=r||o&&T.find.TAG("*",l),b=B+=null==y?1:Math.random()||.1,w=x.length;for(l&&(j=s!==q&&s);h!==w&&null!=(c=x[h]);h++){if(o&&c){for(f=0;p=e[f++];)if(p(c,s,a)){u.push(c);break}l&&(B=b)}i&&((c=!p&&c)&&d--,r&&g.push(c))}if(d+=h,i&&h!==d){for(f=0;p=n[f++];)p(g,v,s,a);if(r){if(d>0)for(;h--;)g[h]||v[h]||(v[h]=J.call(u));v=m(v)}Z.apply(u,v),l&&!r&&v.length>0&&d+n.length>1&&t.uniqueSort(u)}return l&&(B=b,j=y),g};return i?r(s):s}var b,w,T,C,N,k,E,S,j,D,A,L,q,H,O,F,P,M,R,W="sizzle"+-new Date,$=e.document,B=0,I=0,_=n(),z=n(),X=n(),U=function(e,t){return e===t&&(A=!0),0},V="undefined",Y=1<<31,G={}.hasOwnProperty,Q=[],J=Q.pop,K=Q.push,Z=Q.push,ee=Q.slice,te=Q.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},ne="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",re="[\\x20\\t\\r\\n\\f]",ie="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",oe=ie.replace("w","w#"),se="\\["+re+"*("+ie+")(?:"+re+"*([*^$|!~]?=)"+re+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+oe+"))|)"+re+"*\\]",ae=":("+ie+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+se+")*)|.*)\\)|)",ue=new RegExp("^"+re+"+|((?:^|[^\\\\])(?:\\\\.)*)"+re+"+$","g"),le=new RegExp("^"+re+"*,"+re+"*"),ce=new RegExp("^"+re+"*([>+~]|"+re+")"+re+"*"),fe=new RegExp("="+re+"*([^\\]'\"]*?)"+re+"*\\]","g"),pe=new RegExp(ae),de=new RegExp("^"+oe+"$"),he={ID:new RegExp("^#("+ie+")"),CLASS:new RegExp("^\\.("+ie+")"),TAG:new RegExp("^("+ie.replace("w","w*")+")"),ATTR:new RegExp("^"+se),PSEUDO:new RegExp("^"+ae),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+re+"*(even|odd|(([+-]|)(\\d*)n|)"+re+"*(?:([+-]|)"+re+"*(\\d+)|))"+re+"*\\)|)","i"),bool:new RegExp("^(?:"+ne+")$","i"),needsContext:new RegExp("^"+re+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+re+"*((?:-\\d)?\\d*)"+re+"*\\)|)(?=[^-]|$)","i")},ge=/^(?:input|select|textarea|button)$/i,me=/^h\d$/i,ve=/^[^{]+\{\s*\[native \w/,ye=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,xe=/[+~]/,be=/'|\\/g,we=new RegExp("\\\\([\\da-f]{1,6}"+re+"?|("+re+")|.)","ig"),Te=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)};try{Z.apply(Q=ee.call($.childNodes),$.childNodes),Q[$.childNodes.length].nodeType}catch(Ce){Z={apply:Q.length?function(e,t){K.apply(e,ee.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}w=t.support={},N=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},L=t.setDocument=function(e){var t,n=e?e.ownerDocument||e:$,r=n.defaultView;return n!==q&&9===n.nodeType&&n.documentElement?(q=n,H=n.documentElement,O=!N(n),r&&r!==r.top&&(r.addEventListener?r.addEventListener("unload",function(){L()},!1):r.attachEvent&&r.attachEvent("onunload",function(){L()})),w.attributes=i(function(e){return e.className="i",!e.getAttribute("className")}),w.getElementsByTagName=i(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),w.getElementsByClassName=ve.test(n.getElementsByClassName)&&i(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),w.getById=i(function(e){return H.appendChild(e).id=W,!n.getElementsByName||!n.getElementsByName(W).length}),w.getById?(T.find.ID=function(e,t){if(typeof t.getElementById!==V&&O){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},T.filter.ID=function(e){var t=e.replace(we,Te);return function(e){return e.getAttribute("id")===t}}):(delete T.find.ID,T.filter.ID=function(e){var t=e.replace(we,Te);return function(e){var n=typeof e.getAttributeNode!==V&&e.getAttributeNode("id");return n&&n.value===t}}),T.find.TAG=w.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!==V?t.getElementsByTagName(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},T.find.CLASS=w.getElementsByClassName&&function(e,t){return typeof t.getElementsByClassName!==V&&O?t.getElementsByClassName(e):void 0},P=[],F=[],(w.qsa=ve.test(n.querySelectorAll))&&(i(function(e){e.innerHTML="<select msallowclip=''><option selected=''></option></select>",e.querySelectorAll("[msallowclip^='']").length&&F.push("[*^$]="+re+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||F.push("\\["+re+"*(?:value|"+ne+")"),e.querySelectorAll(":checked").length||F.push(":checked")}),i(function(e){var t=n.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&F.push("name"+re+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||F.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),F.push(",.*:")})),(w.matchesSelector=ve.test(M=H.matches||H.webkitMatchesSelector||H.mozMatchesSelector||H.oMatchesSelector||H.msMatchesSelector))&&i(function(e){w.disconnectedMatch=M.call(e,"div"),M.call(e,"[s!='']:x"),P.push("!=",ae)}),F=F.length&&new RegExp(F.join("|")),P=P.length&&new RegExp(P.join("|")),t=ve.test(H.compareDocumentPosition),R=t||ve.test(H.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},U=t?function(e,t){if(e===t)return A=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r?r:(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&r||!w.sortDetached&&t.compareDocumentPosition(e)===r?e===n||e.ownerDocument===/*#replaceCode#*/&R($,e)?-1:t===n||t.ownerDocument===/*#replaceCode#*/&R($,t)?1:D?te.call(D,e)-te.call(D,t):0:4&r?-1:1)}:function(e,t){if(e===t)return A=!0,0;var r,i=0,o=e.parentNode,a=t.parentNode,u=[e],l=[t];if(!o||!a)return e===n?-1:t===n?1:o?-1:a?1:D?te.call(D,e)-te.call(D,t):0;if(o===a)return s(e,t);for(r=e;r=r.parentNode;)u.unshift(r);for(r=t;r=r.parentNode;)l.unshift(r);for(;u[i]===l[i];)i++;return i?s(u[i],l[i]):u[i]===$?-1:l[i]===$?1:0},n):q},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==q&&L(e),n=n.replace(fe,"='$1']"),!(!w.matchesSelector||!O||P&&P.test(n)||F&&F.test(n)))try{var r=M.call(e,n);if(r||w.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(i){}return t(n,q,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==q&&L(e),R(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==q&&L(e);var n=T.attrHandle[t.toLowerCase()],r=n&&G.call(T.attrHandle,t.toLowerCase())?n(e,t,!O):void 0;return void 0!==r?r:w.attributes||!O?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],r=0,i=0;if(A=!w.detectDuplicates,D=!w.sortStable&&e.slice(0),e.sort(U),A){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return D=null,e},C=t.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=C(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=C(t);return n},T=t.selectors={cacheLength:50,createPseudo:r,match:he,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(we,Te),e[3]=(e[3]||e[4]||e[5]||"").replace(we,Te),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return he.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&pe.test(n)&&(t=k(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(we,Te).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=_[e+" "];return t||(t=new RegExp("(^|"+re+")"+e+"("+re+"|$)"))&&_(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==V&&e.getAttribute("class")||"")})},ATTR:function(e,n,r){return function(i){var o=t.attr(i,e);return null==o?"!="===n:n?(o+="","="===n?o===r:"!="===n?o!==r:"^="===n?r&&0===o.indexOf(r):"*="===n?r&&o.indexOf(r)>-1:"$="===n?r&&o.slice(-r.length)===r:"~="===n?(" "+o+" ").indexOf(r)>-1:"|="===n?o===r||o.slice(0,r.length+1)===r+"-":!1):!0}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),s="last"!==e.slice(-4),a="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var l,c,f,p,d,h,g=o!==s?"nextSibling":"previousSibling",m=t.parentNode,v=a&&t.nodeName.toLowerCase(),y=!u&&!a;if(m){if(o){for(;g;){for(f=t;f=f[g];)if(a?f.nodeName.toLowerCase()===v:1===f.nodeType)return!1;h=g="only"===e&&!h&&"nextSibling"}return!0}if(h=[s?m.firstChild:m.lastChild],s&&y){for(c=m[W]||(m[W]={}),l=c[e]||[],d=l[0]===B&&l[1],p=l[0]===B&&l[2],f=d&&m.childNodes[d];f=++d&&f&&f[g]||(p=d=0)||h.pop();)if(1===f.nodeType&&++p&&f===t){c[e]=[B,d,p];break}}else if(y&&(l=(t[W]||(t[W]={}))[e])&&l[0]===B)p=l[1];else for(;(f=++d&&f&&f[g]||(p=d=0)||h.pop())&&((a?f.nodeName.toLowerCase()!==v:1!==f.nodeType)||!++p||(y&&((f[W]||(f[W]={}))[e]=[B,p]),f!==t)););return p-=i,p===r||p%r===0&&p/r>=0}}},PSEUDO:function(e,n){var i,o=T.pseudos[e]||T.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[W]?o(n):o.length>1?(i=[e,e,"",n],T.setFilters.hasOwnProperty(e.toLowerCase())?r(function(e,t){for(var r,i=o(e,n),s=i.length;s--;)r=te.call(e,i[s]),e[r]=!(t[r]=i[s])}):function(e){return o(e,0,i)}):o}},pseudos:{not:r(function(e){var t=[],n=[],i=E(e.replace(ue,"$1"));return i[W]?r(function(e,t,n,r){for(var o,s=i(e,null,r,[]),a=e.length;a--;)(o=s[a])&&(e[a]=!(t[a]=o))}):function(e,r,o){return t[0]=e,i(t,null,o,n),!n.pop()}}),has:r(function(e){return function(n){return t(e,n).length>0}}),contains:r(function(e){return function(t){return(t.textContent||t.innerText||C(t)).indexOf(e)>-1}}),lang:r(function(e){return de.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(we,Te).toLowerCase(),function(t){var n;do if(n=O?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===H},focus:function(e){return e===q.activeElement&&(!q.hasFocus||q.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!T.pseudos.empty(e)},header:function(e){return me.test(e.nodeName)},input:function(e){return ge.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:l(function(){return[0]}),last:l(function(e,t){return[t-1]}),eq:l(function(e,t,n){return[0>n?n+t:n]}),even:l(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:l(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:l(function(e,t,n){for(var r=0>n?n+t:n;--r>=0;)e.push(r);return e}),gt:l(function(e,t,n){for(var r=0>n?n+t:n;++r<t;)e.push(r);return e})}},T.pseudos.nth=T.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})T.pseudos[b]=a(b);for(b in{submit:!0,reset:!0})T.pseudos[b]=u(b);return f.prototype=T.filters=T.pseudos,T.setFilters=new f,k=t.tokenize=function(e,n){var r,i,o,s,a,u,l,c=z[e+" "];if(c)return n?0:c.slice(0);for(a=e,u=[],l=T.preFilter;a;){(!r||(i=le.exec(a)))&&(i&&(a=a.slice(i[0].length)||a),u.push(o=[])),r=!1,(i=ce.exec(a))&&(r=i.shift(),o.push({value:r,type:i[0].replace(ue," ")}),a=a.slice(r.length));for(s in T.filter)!(i=he[s].exec(a))||l[s]&&!(i=l[s](i))||(r=i.shift(),o.push({value:r,type:s,matches:i}),a=a.slice(r.length));if(!r)break}return n?a.length:a?t.error(e):z(e,u).slice(0)},E=t.compile=function(e,t){var n,r=[],i=[],o=X[e+" "];if(!o){for(t||(t=k(e)),n=t.length;n--;)o=y(t[n]),o[W]?r.push(o):i.push(o);o=X(e,x(i,r)),o.selector=e}return o},S=t.select=function(e,t,n,r){var i,o,s,a,u,l="function"==typeof e&&e,f=!r&&k(e=l.selector||e);if(n=n||[],1===f.length){if(o=f[0]=f[0].slice(0),o.length>2&&"ID"===(s=o[0]).type&&w.getById&&9===t.nodeType&&O&&T.relative[o[1].type]){if(t=(T.find.ID(s.matches[0].replace(we,Te),t)||[])[0],!t)return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(i=he.needsContext.test(e)?0:o.length;i--&&(s=o[i],!T.relative[a=s.type]);)if((u=T.find[a])&&(r=u(s.matches[0].replace(we,Te),xe.test(o[0].type)&&c(t.parentNode)||t))){if(o.splice(i,1),e=r.length&&p(o),!e)return Z.apply(n,r),n;break}}return(l||E(e,f))(r,t,!O,n,xe.test(e)&&c(t.parentNode)||t),n},w.sortStable=W.split("").sort(U).join("")===W,w.detectDuplicates=!!A,L(),w.sortDetached=i(function(e){return 1&e.compareDocumentPosition(q.createElement("div"))}),i(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),w.attributes&&i(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),i(function(e){return null==e.getAttribute("disabled")})||o(ne,function(e,t,n){var r;return n?void 0:e[t]===!0?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),t}(e);Z.find=ie,Z.expr=ie.selectors,Z.expr[":"]=Z.expr.pseudos,Z.unique=ie.uniqueSort,Z.text=ie.getText,Z.isXMLDoc=ie.isXML,Z.contains=ie.contains;var oe=Z.expr.match.needsContext,se=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ae=/^.[^:#\[\.,]*$/;Z.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?Z.find.matchesSelector(r,e)?[r]:[]:Z.find.matches(e,Z.grep(t,function(e){return 1===e.nodeType}))},Z.fn.extend({find:function(e){var t,n=this.length,r=[],i=this;if("string"!=typeof e)return this.pushStack(Z(e).filter(function(){
    for(t=0;n>t;t++)if(Z.contains(i[t],this))return!0}));for(t=0;n>t;t++)Z.find(e,i[t],r);return r=this.pushStack(n>1?Z.unique(r):r),r.selector=this.selector?this.selector+" "+e:e,r},filter:function(e){return this.pushStack(r(this,e||[],!1))},not:function(e){return this.pushStack(r(this,e||[],!0))},is:function(e){return!!r(this,"string"==typeof e&&oe.test(e)?Z(e):e||[],!1).length}});var ue,le=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ce=Z.fn.init=function(e,t){var n,r;if(!e)return this;if("string"==typeof e){if(n="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:le.exec(e),!n||!n[1]&&t)return!t||t.jquery?(t||ue).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof Z?t[0]:t,Z.merge(this,Z.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:J,!0)),se.test(n[1])&&Z.isPlainObject(t))for(n in t)Z.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return r=J.getElementById(n[2]),r&&r.parentNode&&(this.length=1,this[0]=r),this.context=J,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):Z.isFunction(e)?"undefined"!=typeof ue.ready?ue.ready(e):e(Z):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),Z.makeArray(e,this))};ce.prototype=Z.fn,ue=Z(J);var fe=/^(?:parents|prev(?:Until|All))/,pe={children:!0,contents:!0,next:!0,prev:!0};Z.extend({dir:function(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&Z(e).is(n))break;r.push(e)}return r},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),Z.fn.extend({has:function(e){var t=Z(e,this),n=t.length;return this.filter(function(){for(var e=0;n>e;e++)if(Z.contains(this,t[e]))return!0})},closest:function(e,t){for(var n,r=0,i=this.length,o=[],s=oe.test(e)||"string"!=typeof e?Z(e,t||this.context):0;i>r;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&Z.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?Z.unique(o):o)},index:function(e){return e?"string"==typeof e?U.call(Z(e),this[0]):U.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(Z.unique(Z.merge(this.get(),Z(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),Z.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return Z.dir(e,"parentNode")},parentsUntil:function(e,t,n){return Z.dir(e,"parentNode",n)},next:function(e){return i(e,"nextSibling")},prev:function(e){return i(e,"previousSibling")},nextAll:function(e){return Z.dir(e,"nextSibling")},prevAll:function(e){return Z.dir(e,"previousSibling")},nextUntil:function(e,t,n){return Z.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return Z.dir(e,"previousSibling",n)},siblings:function(e){return Z.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return Z.sibling(e.firstChild)},contents:function(e){return e.contentDocument||Z.merge([],e.childNodes)}},function(e,t){Z.fn[e]=function(n,r){var i=Z.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=Z.filter(r,i)),this.length>1&&(pe[e]||Z.unique(i),fe.test(e)&&i.reverse()),this.pushStack(i)}});var de=/\S+/g,he={};Z.Callbacks=function(e){e="string"==typeof e?he[e]||o(e):Z.extend({},e);var t,n,r,i,s,a,u=[],l=!e.once&&[],c=function(o){for(t=e.memory&&o,n=!0,a=i||0,i=0,s=u.length,r=!0;u&&s>a;a++)if(u[a].apply(o[0],o[1])===!1&&e.stopOnFalse){t=!1;break}r=!1,u&&(l?l.length&&c(l.shift()):t?u=[]:f.disable())},f={add:function(){if(u){var n=u.length;!function o(t){Z.each(t,function(t,n){var r=Z.type(n);"function"===r?e.unique&&f.has(n)||u.push(n):n&&n.length&&"string"!==r&&o(n)})}(arguments),r?s=u.length:t&&(i=n,c(t))}return this},remove:function(){return u&&Z.each(arguments,function(e,t){for(var n;(n=Z.inArray(t,u,n))>-1;)u.splice(n,1),r&&(s>=n&&s--,a>=n&&a--)}),this},has:function(e){return e?Z.inArray(e,u)>-1:!(!u||!u.length)},empty:function(){return u=[],s=0,this},disable:function(){return u=l=t=void 0,this},disabled:function(){return!u},lock:function(){return l=void 0,t||f.disable(),this},locked:function(){return!l},fireWith:function(e,t){return!u||n&&!l||(t=t||[],t=[e,t.slice?t.slice():t],r?l.push(t):c(t)),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!n}};return f},Z.extend({Deferred:function(e){var t=[["resolve","done",Z.Callbacks("once memory"),"resolved"],["reject","fail",Z.Callbacks("once memory"),"rejected"],["notify","progress",Z.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return Z.Deferred(function(n){Z.each(t,function(t,o){var s=Z.isFunction(e[t])&&e[t];i[o[1]](function(){var e=s&&s.apply(this,arguments);e&&Z.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o[0]+"With"](this===r?n.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?Z.extend(e,r):r}},i={};return r.pipe=r.then,Z.each(t,function(e,o){var s=o[2],a=o[3];r[o[1]]=s.add,a&&s.add(function(){n=a},t[1^e][2].disable,t[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=s.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t,n,r,i=0,o=_.call(arguments),s=o.length,a=1!==s||e&&Z.isFunction(e.promise)?s:0,u=1===a?e:Z.Deferred(),l=function(e,n,r){return function(i){n[e]=this,r[e]=arguments.length>1?_.call(arguments):i,r===t?u.notifyWith(n,r):--a||u.resolveWith(n,r)}};if(s>1)for(t=new Array(s),n=new Array(s),r=new Array(s);s>i;i++)o[i]&&Z.isFunction(o[i].promise)?o[i].promise().done(l(i,r,o)).fail(u.reject).progress(l(i,n,t)):--a;return a||u.resolveWith(r,o),u.promise()}});var ge;Z.fn.ready=function(e){return Z.ready.promise().done(e),this},Z.extend({isReady:!1,readyWait:1,holdReady:function(e){e?Z.readyWait++:Z.ready(!0)},ready:function(e){(e===!0?--Z.readyWait:Z.isReady)||(Z.isReady=!0,e!==!0&&--Z.readyWait>0||(ge.resolveWith(J,[Z]),Z.fn.triggerHandler&&(Z(J).triggerHandler("ready"),Z(J).off("ready"))))}}),Z.ready.promise=function(t){return ge||(ge=Z.Deferred(),"complete"===J.readyState?setTimeout(Z.ready):(J.addEventListener("DOMContentLoaded",s,!1),e.addEventListener("load",s,!1))),ge.promise(t)},Z.ready.promise();var me=Z.access=function(e,t,n,r,i,o,s){var a=0,u=e.length,l=null==n;if("object"===Z.type(n)){i=!0;for(a in n)Z.access(e,t,a,n[a],!0,o,s)}else if(void 0!==r&&(i=!0,Z.isFunction(r)||(s=!0),l&&(s?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(Z(e),n)})),t))for(;u>a;a++)t(e[a],n,s?r:r.call(e[a],a,t(e[a],n)));return i?e:l?t.call(e):u?t(e[0],n):o};Z.acceptData=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType},a.uid=1,a.accepts=Z.acceptData,a.prototype={key:function(e){if(!a.accepts(e))return 0;var t={},n=e[this.expando];if(!n){n=a.uid++;try{t[this.expando]={value:n},Object.defineProperties(e,t)}catch(r){t[this.expando]=n,Z.extend(e,t)}}return this.cache[n]||(this.cache[n]={}),n},set:function(e,t,n){var r,i=this.key(e),o=this.cache[i];if("string"==typeof t)o[t]=n;else if(Z.isEmptyObject(o))Z.extend(this.cache[i],t);else for(r in t)o[r]=t[r];return o},get:function(e,t){var n=this.cache[this.key(e)];return void 0===t?n:n[t]},access:function(e,t,n){var r;return void 0===t||t&&"string"==typeof t&&void 0===n?(r=this.get(e,t),void 0!==r?r:this.get(e,Z.camelCase(t))):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r,i,o=this.key(e),s=this.cache[o];if(void 0===t)this.cache[o]={};else{Z.isArray(t)?r=t.concat(t.map(Z.camelCase)):(i=Z.camelCase(t),t in s?r=[t,i]:(r=i,r=r in s?[r]:r.match(de)||[])),n=r.length;for(;n--;)delete s[r[n]]}},hasData:function(e){return!Z.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}};var ve=new a,ye=new a,xe=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,be=/([A-Z])/g;Z.extend({hasData:function(e){return ye.hasData(e)||ve.hasData(e)},data:function(e,t,n){return ye.access(e,t,n)},removeData:function(e,t){ye.remove(e,t)},_data:function(e,t,n){return ve.access(e,t,n)},_removeData:function(e,t){ve.remove(e,t)}}),Z.fn.extend({data:function(e,t){var n,r,i,o=this[0],s=o&&o.attributes;if(void 0===e){if(this.length&&(i=ye.get(o),1===o.nodeType&&!ve.get(o,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&(r=s[n].name,0===r.indexOf("data-")&&(r=Z.camelCase(r.slice(5)),u(o,r,i[r])));ve.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each(function(){ye.set(this,e)}):me(this,function(t){var n,r=Z.camelCase(e);if(o&&void 0===t){if(n=ye.get(o,e),void 0!==n)return n;if(n=ye.get(o,r),void 0!==n)return n;if(n=u(o,r,void 0),void 0!==n)return n}else this.each(function(){var n=ye.get(this,r);ye.set(this,r,t),-1!==e.indexOf("-")&&void 0!==n&&ye.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){ye.remove(this,e)})}}),Z.extend({queue:function(e,t,n){var r;return e?(t=(t||"fx")+"queue",r=ve.get(e,t),n&&(!r||Z.isArray(n)?r=ve.access(e,t,Z.makeArray(n)):r.push(n)),r||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=Z.queue(e,t),r=n.length,i=n.shift(),o=Z._queueHooks(e,t),s=function(){Z.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,s,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return ve.get(e,n)||ve.access(e,n,{empty:Z.Callbacks("once memory").add(function(){ve.remove(e,[t+"queue",n])})})}}),Z.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?Z.queue(this[0],e):void 0===t?this:this.each(function(){var n=Z.queue(this,e,t);Z._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&Z.dequeue(this,e)})},dequeue:function(e){return this.each(function(){Z.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=Z.Deferred(),o=this,s=this.length,a=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)n=ve.get(o[s],e+"queueHooks"),n&&n.empty&&(r++,n.empty.add(a));return a(),i.promise(t)}});var we=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Te=["Top","Right","Bottom","Left"],Ce=function(e,t){return e=t||e,"none"===Z.css(e,"display")||!Z.contains(e.ownerDocument,e)},Ne=/^(?:checkbox|radio)$/i;!function(){var e=J.createDocumentFragment(),t=e.appendChild(J.createElement("div")),n=J.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),Q.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",Q.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var ke="undefined";Q.focusinBubbles="onfocusin"in e;var Ee=/^key/,Se=/^(?:mouse|pointer|contextmenu)|click/,je=/^(?:focusinfocus|focusoutblur)$/,De=/^([^.]*)(?:\.(.+)|)$/;Z.event={global:{},add:function(e,t,n,r,i){var o,s,a,u,l,c,f,p,d,h,g,m=ve.get(e);if(m)for(n.handler&&(o=n,n=o.handler,i=o.selector),n.guid||(n.guid=Z.guid++),(u=m.events)||(u=m.events={}),(s=m.handle)||(s=m.handle=function(t){return typeof Z!==ke&&Z.event.triggered!==t.type?Z.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(de)||[""],l=t.length;l--;)a=De.exec(t[l])||[],d=g=a[1],h=(a[2]||"").split(".").sort(),d&&(f=Z.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=Z.event.special[d]||{},c=Z.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&Z.expr.match.needsContext.test(i),namespace:h.join(".")},o),(p=u[d])||(p=u[d]=[],p.delegateCount=0,f.setup&&f.setup.call(e,r,h,s)!==!1||e.addEventListener&&e.addEventListener(d,s,!1)),f.add&&(f.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),Z.event.global[d]=!0)},remove:function(e,t,n,r,i){var o,s,a,u,l,c,f,p,d,h,g,m=ve.hasData(e)&&ve.get(e);if(m&&(u=m.events)){for(t=(t||"").match(de)||[""],l=t.length;l--;)if(a=De.exec(t[l])||[],d=g=a[1],h=(a[2]||"").split(".").sort(),d){for(f=Z.event.special[d]||{},d=(r?f.delegateType:f.bindType)||d,p=u[d]||[],a=a[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=p.length;o--;)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||a&&!a.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));s&&!p.length&&(f.teardown&&f.teardown.call(e,h,m.handle)!==!1||Z.removeEvent(e,d,m.handle),delete u[d])}else for(d in u)Z.event.remove(e,d+t[l],n,r,!0);Z.isEmptyObject(u)&&(delete m.handle,ve.remove(e,"events"))}},trigger:function(t,n,r,i){var o,s,a,u,l,c,f,p=[r||J],d=G.call(t,"type")?t.type:t,h=G.call(t,"namespace")?t.namespace.split("."):[];if(s=a=r=r||J,3!==r.nodeType&&8!==r.nodeType&&!je.test(d+Z.event.triggered)&&(d.indexOf(".")>=0&&(h=d.split("."),d=h.shift(),h.sort()),l=d.indexOf(":")<0&&"on"+d,t=t[Z.expando]?t:new Z.Event(d,"object"==typeof t&&t),t.isTrigger=i?2:3,t.namespace=h.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),n=null==n?[t]:Z.makeArray(n,[t]),f=Z.event.special[d]||{},i||!f.trigger||f.trigger.apply(r,n)!==!1)){if(!i&&!f.noBubble&&!Z.isWindow(r)){for(u=f.delegateType||d,je.test(u+d)||(s=s.parentNode);s;s=s.parentNode)p.push(s),a=s;a===(r.ownerDocument||J)&&p.push(a.defaultView||a.parentWindow||e)}for(o=0;(s=p[o++])&&!t.isPropagationStopped();)t.type=o>1?u:f.bindType||d,c=(ve.get(s,"events")||{})[t.type]&&ve.get(s,"handle"),c&&c.apply(s,n),c=l&&s[l],c&&c.apply&&Z.acceptData(s)&&(t.result=c.apply(s,n),t.result===!1&&t.preventDefault());return t.type=d,i||t.isDefaultPrevented()||f._default&&f._default.apply(p.pop(),n)!==!1||!Z.acceptData(r)||l&&Z.isFunction(r[d])&&!Z.isWindow(r)&&(a=r[l],a&&(r[l]=null),Z.event.triggered=d,r[d](),Z.event.triggered=void 0,a&&(r[l]=a)),t.result}},dispatch:function(e){e=Z.event.fix(e);var t,n,r,i,o,s=[],a=_.call(arguments),u=(ve.get(this,"events")||{})[e.type]||[],l=Z.event.special[e.type]||{};if(a[0]=e,e.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,e)!==!1){for(s=Z.event.handlers.call(this,e,u),t=0;(i=s[t++])&&!e.isPropagationStopped();)for(e.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(o.namespace))&&(e.handleObj=o,e.data=o.data,r=((Z.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,a),void 0!==r&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,r,i,o,s=[],a=t.delegateCount,u=e.target;if(a&&u.nodeType&&(!e.button||"click"!==e.type))for(;u!==this;u=u.parentNode||this)if(u.disabled!==!0||"click"!==e.type){for(r=[],n=0;a>n;n++)o=t[n],i=o.selector+" ",void 0===r[i]&&(r[i]=o.needsContext?Z(i,this).index(u)>=0:Z.find(i,this,null,[u]).length),r[i]&&r.push(o);r.length&&s.push({elem:u,handlers:r})}return a<t.length&&s.push({elem:this,handlers:t.slice(a)}),s},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i,o=t.button;return null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||J,r=n.documentElement,i=n.body,e.pageX=t.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},fix:function(e){if(e[Z.expando])return e;var t,n,r,i=e.type,o=e,s=this.fixHooks[i];for(s||(this.fixHooks[i]=s=Se.test(i)?this.mouseHooks:Ee.test(i)?this.keyHooks:{}),r=s.props?this.props.concat(s.props):this.props,e=new Z.Event(o),t=r.length;t--;)n=r[t],e[n]=o[n];return e.target||(e.target=J),3===e.target.nodeType&&(e.target=e.target.parentNode),s.filter?s.filter(e,o):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==f()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===f()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&Z.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return Z.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=Z.extend(new Z.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?Z.event.trigger(i,null,t):Z.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},Z.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)},Z.Event=function(e,t){return this instanceof Z.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?l:c):this.type=e,t&&Z.extend(this,t),this.timeStamp=e&&e.timeStamp||Z.now(),void(this[Z.expando]=!0)):new Z.Event(e,t)},Z.Event.prototype={isDefaultPrevented:c,isPropagationStopped:c,isImmediatePropagationStopped:c,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=l,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=l,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=l,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},Z.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){Z.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return(!i||i!==r&&!Z.contains(r,i))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),Q.focusinBubbles||Z.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){Z.event.simulate(t,e.target,Z.event.fix(e),!0)};Z.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=ve.access(r,t);i||r.addEventListener(e,n,!0),ve.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=ve.access(r,t)-1;i?ve.access(r,t,i):(r.removeEventListener(e,n,!0),ve.remove(r,t))}}}),Z.fn.extend({on:function(e,t,n,r,i){var o,s;if("object"==typeof e){"string"!=typeof t&&(n=n||t,t=void 0);for(s in e)this.on(s,t,n,e[s],i);return this}if(null==n&&null==r?(r=t,n=t=void 0):null==r&&("string"==typeof t?(r=n,n=void 0):(r=n,n=t,t=void 0)),r===!1)r=c;else if(!r)return this;return 1===i&&(o=r,r=function(e){return Z().off(e),o.apply(this,arguments)},r.guid=o.guid||(o.guid=Z.guid++)),this.each(function(){Z.event.add(this,e,r,n,t)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,Z(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return(t===!1||"function"==typeof t)&&(n=t,t=void 0),n===!1&&(n=c),this.each(function(){Z.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){Z.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?Z.event.trigger(e,t,n,!0):void 0}});var Ae=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Le=/<([\w:]+)/,qe=/<|&#?\w+;/,He=/<(?:script|style|link)/i,Oe=/checked\s*(?:[^=]|=\s*.checked.)/i,Fe=/^$|\/(?:java|ecma)script/i,Pe=/^true\/(.*)/,Me=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Re={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Re.optgroup=Re.option,Re.tbody=Re.tfoot=Re.colgroup=Re.caption=Re.thead,Re.th=Re.td,Z.extend({clone:function(e,t,n){var r,i,o,s,a=e.cloneNode(!0),u=Z.contains(e.ownerDocument,e);if(!(Q.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||Z.isXMLDoc(e)))for(s=v(a),o=v(e),r=0,i=o.length;i>r;r++)y(o[r],s[r]);if(t)if(n)for(o=o||v(e),s=s||v(a),r=0,i=o.length;i>r;r++)m(o[r],s[r]);else m(e,a);return s=v(a,"script"),s.length>0&&g(s,!u&&v(e,"script")),a},buildFragment:function(e,t,n,r){for(var i,o,s,a,u,l,c=t.createDocumentFragment(),f=[],p=0,d=e.length;d>p;p++)if(i=e[p],i||0===i)if("object"===Z.type(i))Z.merge(f,i.nodeType?[i]:i);else if(qe.test(i)){for(o=o||c.appendChild(t.createElement("div")),s=(Le.exec(i)||["",""])[1].toLowerCase(),a=Re[s]||Re._default,o.innerHTML=a[1]+i.replace(Ae,"<$1></$2>")+a[2],l=a[0];l--;)o=o.lastChild;Z.merge(f,o.childNodes),o=c.firstChild,o.textContent=""}else f.push(t.createTextNode(i));for(c.textContent="",p=0;i=f[p++];)if((!r||-1===Z.inArray(i,r))&&(u=Z.contains(i.ownerDocument,i),o=v(c.appendChild(i),"script"),u&&g(o),n))for(l=0;i=o[l++];)Fe.test(i.type||"")&&n.push(i);return c},cleanData:function(e){for(var t,n,r,i,o=Z.event.special,s=0;void 0!==(n=e[s]);s++){if(Z.acceptData(n)&&(i=n[ve.expando],i&&(t=ve.cache[i]))){if(t.events)for(r in t.events)o[r]?Z.event.remove(n,r):Z.removeEvent(n,r,t.handle);ve.cache[i]&&delete ve.cache[i]}delete ye.cache[n[ye.expando]]}}}),Z.fn.extend({text:function(e){return me(this,function(e){return void 0===e?Z.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=e)})},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=p(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=p(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,r=e?Z.filter(e,this):this,i=0;null!=(n=r[i]);i++)t||1!==n.nodeType||Z.cleanData(v(n)),n.parentNode&&(t&&Z.contains(n.ownerDocument,n)&&g(v(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(Z.cleanData(v(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return Z.clone(this,e,t)})},html:function(e){return me(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!He.test(e)&&!Re[(Le.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Ae,"<$1></$2>");try{for(;r>n;n++)t=this[n]||{},1===t.nodeType&&(Z.cleanData(v(t,!1)),t.innerHTML=e);t=0}catch(i){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,Z.cleanData(v(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=z.apply([],e);var n,r,i,o,s,a,u=0,l=this.length,c=this,f=l-1,p=e[0],g=Z.isFunction(p);if(g||l>1&&"string"==typeof p&&!Q.checkClone&&Oe.test(p))return this.each(function(n){var r=c.eq(n);g&&(e[0]=p.call(this,n,r.html())),r.domManip(e,t)});if(l&&(n=Z.buildFragment(e,this[0].ownerDocument,!1,this),r=n.firstChild,1===n.childNodes.length&&(n=r),r)){for(i=Z.map(v(n,"script"),d),o=i.length;l>u;u++)s=n,u!==f&&(s=Z.clone(s,!0,!0),o&&Z.merge(i,v(s,"script"))),t.call(this[u],s,u);if(o)for(a=i[i.length-1].ownerDocument,Z.map(i,h),u=0;o>u;u++)s=i[u],Fe.test(s.type||"")&&!ve.access(s,"globalEval")&&Z.contains(a,s)&&(s.src?Z._evalUrl&&Z._evalUrl(s.src):Z.globalEval(s.textContent.replace(Me,"")))}return this}}),Z.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){Z.fn[e]=function(e){for(var n,r=[],i=Z(e),o=i.length-1,s=0;o>=s;s++)n=s===o?this:this.clone(!0),Z(i[s])[t](n),X.apply(r,n.get());return this.pushStack(r)}});var We,$e={},Be=/^margin/,Ie=new RegExp("^("+we+")(?!px)[a-z%]+$","i"),_e=function(e){return e.ownerDocument.defaultView.getComputedStyle(e,null)};!function(){function t(){s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",s.innerHTML="",i.appendChild(o);var t=e.getComputedStyle(s,null);n="1%"!==t.top,r="4px"===t.width,i.removeChild(o)}var n,r,i=J.documentElement,o=J.createElement("div"),s=J.createElement("div");s.style&&(s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",Q.clearCloneStyle="content-box"===s.style.backgroundClip,o.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",o.appendChild(s),e.getComputedStyle&&Z.extend(Q,{pixelPosition:function(){return t(),n},boxSizingReliable:function(){return null==r&&t(),r},reliableMarginRight:function(){var t,n=s.appendChild(J.createElement("div"));return n.style.cssText=s.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",n.style.marginRight=n.style.width="0",s.style.width="1px",i.appendChild(o),t=!parseFloat(e.getComputedStyle(n,null).marginRight),i.removeChild(o),t}}))}(),Z.swap=function(e,t,n,r){var i,o,s={};for(o in t)s[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=s[o];return i};var ze=/^(none|table(?!-c[ea]).+)/,Xe=new RegExp("^("+we+")(.*)$","i"),Ue=new RegExp("^([+-])=("+we+")","i"),Ve={position:"absolute",visibility:"hidden",display:"block"},Ye={letterSpacing:"0",fontWeight:"400"},Ge=["Webkit","O","Moz","ms"];Z.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=w(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,s,a=Z.camelCase(t),u=e.style;return t=Z.cssProps[a]||(Z.cssProps[a]=C(u,a)),s=Z.cssHooks[t]||Z.cssHooks[a],void 0===n?s&&"get"in s&&void 0!==(i=s.get(e,!1,r))?i:u[t]:(o=typeof n,"string"===o&&(i=Ue.exec(n))&&(n=(i[1]+1)*i[2]+parseFloat(Z.css(e,t)),o="number"),null!=n&&n===n&&("number"!==o||Z.cssNumber[a]||(n+="px"),Q.clearCloneStyle||""!==n||0!==t.indexOf("background")||(u[t]="inherit"),s&&"set"in s&&void 0===(n=s.set(e,n,r))||(u[t]=n)),void 0)}},css:function(e,t,n,r){var i,o,s,a=Z.camelCase(t);return t=Z.cssProps[a]||(Z.cssProps[a]=C(e.style,a)),s=Z.cssHooks[t]||Z.cssHooks[a],s&&"get"in s&&(i=s.get(e,!0,n)),void 0===i&&(i=w(e,t,r)),"normal"===i&&t in Ye&&(i=Ye[t]),""===n||n?(o=parseFloat(i),n===!0||Z.isNumeric(o)?o||0:i):i}}),Z.each(["height","width"],function(e,t){Z.cssHooks[t]={get:function(e,n,r){return n?ze.test(Z.css(e,"display"))&&0===e.offsetWidth?Z.swap(e,Ve,function(){return E(e,t,r)}):E(e,t,r):void 0},set:function(e,n,r){var i=r&&_e(e);return N(e,n,r?k(e,t,r,"border-box"===Z.css(e,"boxSizing",!1,i),i):0)}}}),Z.cssHooks.marginRight=T(Q.reliableMarginRight,function(e,t){return t?Z.swap(e,{display:"inline-block"},w,[e,"marginRight"]):void 0}),Z.each({margin:"",padding:"",border:"Width"},function(e,t){Z.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];4>r;r++)i[e+Te[r]+t]=o[r]||o[r-2]||o[0];return i}},Be.test(e)||(Z.cssHooks[e+t].set=N)}),Z.fn.extend({css:function(e,t){return me(this,function(e,t,n){var r,i,o={},s=0;if(Z.isArray(t)){for(r=_e(e),i=t.length;i>s;s++)o[t[s]]=Z.css(e,t[s],!1,r);return o}return void 0!==n?Z.style(e,t,n):Z.css(e,t)},e,t,arguments.length>1)},show:function(){return S(this,!0)},hide:function(){return S(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Ce(this)?Z(this).show():Z(this).hide()})}}),Z.Tween=j,j.prototype={constructor:j,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(Z.cssNumber[n]?"":"px")},cur:function(){var e=j.propHooks[this.prop];return e&&e.get?e.get(this):j.propHooks._default.get(this)},run:function(e){var t,n=j.propHooks[this.prop];return this.options.duration?this.pos=t=Z.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):j.propHooks._default.set(this),this}},j.prototype.init.prototype=j.prototype,j.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=Z.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){Z.fx.step[e.prop]?Z.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[Z.cssProps[e.prop]]||Z.cssHooks[e.prop])?Z.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},j.propHooks.scrollTop=j.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},Z.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},Z.fx=j.prototype.init,Z.fx.step={};var Qe,Je,Ke=/^(?:toggle|show|hide)$/,Ze=new RegExp("^(?:([+-])=|)("+we+")([a-z%]*)$","i"),et=/queueHooks$/,tt=[q],nt={"*":[function(e,t){var n=this.createTween(e,t),r=n.cur(),i=Ze.exec(t),o=i&&i[3]||(Z.cssNumber[e]?"":"px"),s=(Z.cssNumber[e]||"px"!==o&&+r)&&Ze.exec(Z.css(n.elem,e)),a=1,u=20;if(s&&s[3]!==o){o=o||s[3],i=i||[],s=+r||1;do a=a||".5",s/=a,Z.style(n.elem,e,s+o);while(a!==(a=n.cur()/r)&&1!==a&&--u)}return i&&(s=n.start=+s||+r||0,n.unit=o,n.end=i[1]?s+(i[1]+1)*i[2]:+i[2]),n}]};Z.Animation=Z.extend(O,{tweener:function(e,t){Z.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,r=0,i=e.length;i>r;r++)n=e[r],nt[n]=nt[n]||[],nt[n].unshift(t)},prefilter:function(e,t){t?tt.unshift(e):tt.push(e)}}),Z.speed=function(e,t,n){var r=e&&"object"==typeof e?Z.extend({},e):{complete:n||!n&&t||Z.isFunction(e)&&e,duration:e,easing:n&&t||t&&!Z.isFunction(t)&&t};return r.duration=Z.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in Z.fx.speeds?Z.fx.speeds[r.duration]:Z.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){Z.isFunction(r.old)&&r.old.call(this),r.queue&&Z.dequeue(this,r.queue)},r},Z.fn.extend({fadeTo:function(e,t,n,r){return this.filter(Ce).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=Z.isEmptyObject(e),o=Z.speed(t,n,r),s=function(){var t=O(this,Z.extend({},e),o);(i||ve.get(this,"finish"))&&t.stop(!0)};return s.finish=s,i||o.queue===!1?this.each(s):this.queue(o.queue,s)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=Z.timers,s=ve.get(this);if(i)s[i]&&s[i].stop&&r(s[i]);else for(i in s)s[i]&&s[i].stop&&et.test(i)&&r(s[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));(t||!n)&&Z.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=ve.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=Z.timers,s=r?r.length:0;for(n.finish=!0,Z.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;s>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);
    delete n.finish})}}),Z.each(["toggle","show","hide"],function(e,t){var n=Z.fn[t];Z.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(A(t,!0),e,r,i)}}),Z.each({slideDown:A("show"),slideUp:A("hide"),slideToggle:A("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){Z.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),Z.timers=[],Z.fx.tick=function(){var e,t=0,n=Z.timers;for(Qe=Z.now();t<n.length;t++)e=n[t],e()||n[t]!==e||n.splice(t--,1);n.length||Z.fx.stop(),Qe=void 0},Z.fx.timer=function(e){Z.timers.push(e),e()?Z.fx.start():Z.timers.pop()},Z.fx.interval=13,Z.fx.start=function(){Je||(Je=setInterval(Z.fx.tick,Z.fx.interval))},Z.fx.stop=function(){clearInterval(Je),Je=null},Z.fx.speeds={slow:600,fast:200,_default:400},Z.fn.delay=function(e,t){return e=Z.fx?Z.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},function(){var e=J.createElement("input"),t=J.createElement("select"),n=t.appendChild(J.createElement("option"));e.type="checkbox",Q.checkOn=""!==e.value,Q.optSelected=n.selected,t.disabled=!0,Q.optDisabled=!n.disabled,e=J.createElement("input"),e.value="t",e.type="radio",Q.radioValue="t"===e.value}();var rt,it,ot=Z.expr.attrHandle;Z.fn.extend({attr:function(e,t){return me(this,Z.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){Z.removeAttr(this,e)})}}),Z.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return typeof e.getAttribute===ke?Z.prop(e,t,n):(1===o&&Z.isXMLDoc(e)||(t=t.toLowerCase(),r=Z.attrHooks[t]||(Z.expr.match.bool.test(t)?it:rt)),void 0===n?r&&"get"in r&&null!==(i=r.get(e,t))?i:(i=Z.find.attr(e,t),null==i?void 0:i):null!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:(e.setAttribute(t,n+""),n):void Z.removeAttr(e,t))},removeAttr:function(e,t){var n,r,i=0,o=t&&t.match(de);if(o&&1===e.nodeType)for(;n=o[i++];)r=Z.propFix[n]||n,Z.expr.match.bool.test(n)&&(e[r]=!1),e.removeAttribute(n)},attrHooks:{type:{set:function(e,t){if(!Q.radioValue&&"radio"===t&&Z.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}}}),it={set:function(e,t,n){return t===!1?Z.removeAttr(e,n):e.setAttribute(n,n),n}},Z.each(Z.expr.match.bool.source.match(/\w+/g),function(e,t){var n=ot[t]||Z.find.attr;ot[t]=function(e,t,r){var i,o;return r||(o=ot[t],ot[t]=i,i=null!=n(e,t,r)?t.toLowerCase():null,ot[t]=o),i}});var st=/^(?:input|select|textarea|button)$/i;Z.fn.extend({prop:function(e,t){return me(this,Z.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[Z.propFix[e]||e]})}}),Z.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,n){var r,i,o,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return o=1!==s||!Z.isXMLDoc(e),o&&(t=Z.propFix[t]||t,i=Z.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||st.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),Q.optSelected||(Z.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),Z.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){Z.propFix[this.toLowerCase()]=this});var at=/[\t\r\n\f]/g;Z.fn.extend({addClass:function(e){var t,n,r,i,o,s,a="string"==typeof e&&e,u=0,l=this.length;if(Z.isFunction(e))return this.each(function(t){Z(this).addClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(de)||[];l>u;u++)if(n=this[u],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(at," "):" ")){for(o=0;i=t[o++];)r.indexOf(" "+i+" ")<0&&(r+=i+" ");s=Z.trim(r),n.className!==s&&(n.className=s)}return this},removeClass:function(e){var t,n,r,i,o,s,a=0===arguments.length||"string"==typeof e&&e,u=0,l=this.length;if(Z.isFunction(e))return this.each(function(t){Z(this).removeClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(de)||[];l>u;u++)if(n=this[u],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(at," "):"")){for(o=0;i=t[o++];)for(;r.indexOf(" "+i+" ")>=0;)r=r.replace(" "+i+" "," ");s=e?Z.trim(r):"",n.className!==s&&(n.className=s)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):Z.isFunction(e)?this.each(function(n){Z(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n)for(var t,r=0,i=Z(this),o=e.match(de)||[];t=o[r++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else(n===ke||"boolean"===n)&&(this.className&&ve.set(this,"__className__",this.className),this.className=this.className||e===!1?"":ve.get(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,r=this.length;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(at," ").indexOf(t)>=0)return!0;return!1}});var ut=/\r/g;Z.fn.extend({val:function(e){var t,n,r,i=this[0];{if(arguments.length)return r=Z.isFunction(e),this.each(function(n){var i;1===this.nodeType&&(i=r?e.call(this,n,Z(this).val()):e,null==i?i="":"number"==typeof i?i+="":Z.isArray(i)&&(i=Z.map(i,function(e){return null==e?"":e+""})),t=Z.valHooks[this.type]||Z.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))});if(i)return t=Z.valHooks[i.type]||Z.valHooks[i.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:(n=i.value,"string"==typeof n?n.replace(ut,""):null==n?"":n)}}}),Z.extend({valHooks:{option:{get:function(e){var t=Z.find.attr(e,"value");return null!=t?t:Z.trim(Z.text(e))}},select:{get:function(e){for(var t,n,r=e.options,i=e.selectedIndex,o="select-one"===e.type||0>i,s=o?null:[],a=o?i+1:r.length,u=0>i?a:o?i:0;a>u;u++)if(n=r[u],!(!n.selected&&u!==i||(Q.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&Z.nodeName(n.parentNode,"optgroup"))){if(t=Z(n).val(),o)return t;s.push(t)}return s},set:function(e,t){for(var n,r,i=e.options,o=Z.makeArray(t),s=i.length;s--;)r=i[s],(r.selected=Z.inArray(r.value,o)>=0)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),Z.each(["radio","checkbox"],function(){Z.valHooks[this]={set:function(e,t){return Z.isArray(t)?e.checked=Z.inArray(Z(e).val(),t)>=0:void 0}},Q.checkOn||(Z.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),Z.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){Z.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),Z.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var lt=Z.now(),ct=/\?/;Z.parseJSON=function(e){return JSON.parse(e+"")},Z.parseXML=function(e){var t,n;if(!e||"string"!=typeof e)return null;try{n=new DOMParser,t=n.parseFromString(e,"text/xml")}catch(r){t=void 0}return(!t||t.getElementsByTagName("parsererror").length)&&Z.error("Invalid XML: "+e),t};var ft,pt,dt=/#.*$/,ht=/([?&])_=[^&]*/,gt=/^(.*?):[ \t]*([^\r\n]*)$/gm,mt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,vt=/^(?:GET|HEAD)$/,yt=/^\/\//,xt=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,bt={},wt={},Tt="*/".concat("*");try{pt=location.href}catch(Ct){pt=J.createElement("a"),pt.href="",pt=pt.href}ft=xt.exec(pt.toLowerCase())||[],Z.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:pt,type:"GET",isLocal:mt.test(ft[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Tt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":Z.parseJSON,"text xml":Z.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?M(M(e,Z.ajaxSettings),t):M(Z.ajaxSettings,e)},ajaxPrefilter:F(bt),ajaxTransport:F(wt),ajax:function(e,t){function n(e,t,n,s){var u,c,v,y,b,T=t;2!==x&&(x=2,a&&clearTimeout(a),r=void 0,o=s||"",w.readyState=e>0?4:0,u=e>=200&&300>e||304===e,n&&(y=R(f,w,n)),y=W(f,y,w,u),u?(f.ifModified&&(b=w.getResponseHeader("Last-Modified"),b&&(Z.lastModified[i]=b),b=w.getResponseHeader("etag"),b&&(Z.etag[i]=b)),204===e||"HEAD"===f.type?T="nocontent":304===e?T="notmodified":(T=y.state,c=y.data,v=y.error,u=!v)):(v=T,(e||!T)&&(T="error",0>e&&(e=0))),w.status=e,w.statusText=(t||T)+"",u?h.resolveWith(p,[c,T,w]):h.rejectWith(p,[w,T,v]),w.statusCode(m),m=void 0,l&&d.trigger(u?"ajaxSuccess":"ajaxError",[w,f,u?c:v]),g.fireWith(p,[w,T]),l&&(d.trigger("ajaxComplete",[w,f]),--Z.active||Z.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var r,i,o,s,a,u,l,c,f=Z.ajaxSetup({},t),p=f.context||f,d=f.context&&(p.nodeType||p.jquery)?Z(p):Z.event,h=Z.Deferred(),g=Z.Callbacks("once memory"),m=f.statusCode||{},v={},y={},x=0,b="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(2===x){if(!s)for(s={};t=gt.exec(o);)s[t[1].toLowerCase()]=t[2];t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===x?o:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return x||(e=y[n]=y[n]||e,v[e]=t),this},overrideMimeType:function(e){return x||(f.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>x)for(t in e)m[t]=[m[t],e[t]];else w.always(e[w.status]);return this},abort:function(e){var t=e||b;return r&&r.abort(t),n(0,t),this}};if(h.promise(w).complete=g.add,w.success=w.done,w.error=w.fail,f.url=((e||f.url||pt)+"").replace(dt,"").replace(yt,ft[1]+"//"),f.type=t.method||t.type||f.method||f.type,f.dataTypes=Z.trim(f.dataType||"*").toLowerCase().match(de)||[""],null==f.crossDomain&&(u=xt.exec(f.url.toLowerCase()),f.crossDomain=!(!u||u[1]===ft[1]&&u[2]===ft[2]&&(u[3]||("http:"===u[1]?"80":"443"))===(ft[3]||("http:"===ft[1]?"80":"443")))),f.data&&f.processData&&"string"!=typeof f.data&&(f.data=Z.param(f.data,f.traditional)),P(bt,f,t,w),2===x)return w;l=f.global,l&&0===Z.active++&&Z.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!vt.test(f.type),i=f.url,f.hasContent||(f.data&&(i=f.url+=(ct.test(i)?"&":"?")+f.data,delete f.data),f.cache===!1&&(f.url=ht.test(i)?i.replace(ht,"$1_="+lt++):i+(ct.test(i)?"&":"?")+"_="+lt++)),f.ifModified&&(Z.lastModified[i]&&w.setRequestHeader("If-Modified-Since",Z.lastModified[i]),Z.etag[i]&&w.setRequestHeader("If-None-Match",Z.etag[i])),(f.data&&f.hasContent&&f.contentType!==!1||t.contentType)&&w.setRequestHeader("Content-Type",f.contentType),w.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Tt+"; q=0.01":""):f.accepts["*"]);for(c in f.headers)w.setRequestHeader(c,f.headers[c]);if(f.beforeSend&&(f.beforeSend.call(p,w,f)===!1||2===x))return w.abort();b="abort";for(c in{success:1,error:1,complete:1})w[c](f[c]);if(r=P(wt,f,t,w)){w.readyState=1,l&&d.trigger("ajaxSend",[w,f]),f.async&&f.timeout>0&&(a=setTimeout(function(){w.abort("timeout")},f.timeout));try{x=1,r.send(v,n)}catch(T){if(!(2>x))throw T;n(-1,T)}}else n(-1,"No Transport");return w},getJSON:function(e,t,n){return Z.get(e,t,n,"json")},getScript:function(e,t){return Z.get(e,void 0,t,"script")}}),Z.each(["get","post"],function(e,t){Z[t]=function(e,n,r,i){return Z.isFunction(n)&&(i=i||r,r=n,n=void 0),Z.ajax({url:e,type:t,dataType:i,data:n,success:r})}}),Z.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){Z.fn[t]=function(e){return this.on(t,e)}}),Z._evalUrl=function(e){return Z.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},Z.fn.extend({wrapAll:function(e){var t;return Z.isFunction(e)?this.each(function(t){Z(this).wrapAll(e.call(this,t))}):(this[0]&&(t=Z(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return Z.isFunction(e)?this.each(function(t){Z(this).wrapInner(e.call(this,t))}):this.each(function(){var t=Z(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=Z.isFunction(e);return this.each(function(n){Z(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){Z.nodeName(this,"body")||Z(this).replaceWith(this.childNodes)}).end()}}),Z.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},Z.expr.filters.visible=function(e){return!Z.expr.filters.hidden(e)};var Nt=/%20/g,kt=/\[\]$/,Et=/\r?\n/g,St=/^(?:submit|button|image|reset|file)$/i,jt=/^(?:input|select|textarea|keygen)/i;Z.param=function(e,t){var n,r=[],i=function(e,t){t=Z.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=Z.ajaxSettings&&Z.ajaxSettings.traditional),Z.isArray(e)||e.jquery&&!Z.isPlainObject(e))Z.each(e,function(){i(this.name,this.value)});else for(n in e)$(n,e[n],t,i);return r.join("&").replace(Nt,"+")},Z.fn.extend({serialize:function(){return Z.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=Z.prop(this,"elements");return e?Z.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!Z(this).is(":disabled")&&jt.test(this.nodeName)&&!St.test(e)&&(this.checked||!Ne.test(e))}).map(function(e,t){var n=Z(this).val();return null==n?null:Z.isArray(n)?Z.map(n,function(e){return{name:t.name,value:e.replace(Et,"\r\n")}}):{name:t.name,value:n.replace(Et,"\r\n")}}).get()}}),Z.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var Dt=0,At={},Lt={0:200,1223:204},qt=Z.ajaxSettings.xhr();e.ActiveXObject&&Z(e).on("unload",function(){for(var e in At)At[e]()}),Q.cors=!!qt&&"withCredentials"in qt,Q.ajax=qt=!!qt,Z.ajaxTransport(function(e){var t;return Q.cors||qt&&!e.crossDomain?{send:function(n,r){var i,o=e.xhr(),s=++Dt;if(o.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(i in e.xhrFields)o[i]=e.xhrFields[i];e.mimeType&&o.overrideMimeType&&o.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(i in n)o.setRequestHeader(i,n[i]);t=function(e){return function(){t&&(delete At[s],t=o.onload=o.onerror=null,"abort"===e?o.abort():"error"===e?r(o.status,o.statusText):r(Lt[o.status]||o.status,o.statusText,"string"==typeof o.responseText?{text:o.responseText}:void 0,o.getAllResponseHeaders()))}},o.onload=t(),o.onerror=t("error"),t=At[s]=t("abort");try{o.send(e.hasContent&&e.data||null)}catch(a){if(t)throw a}},abort:function(){t&&t()}}:void 0}),Z.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return Z.globalEval(e),e}}}),Z.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),Z.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(r,i){t=Z("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),J.head.appendChild(t[0])},abort:function(){n&&n()}}}});var Ht=[],Ot=/(=)\?(?=&|$)|\?\?/;Z.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Ht.pop()||Z.expando+"_"+lt++;return this[e]=!0,e}}),Z.ajaxPrefilter("json jsonp",function(t,n,r){var i,o,s,a=t.jsonp!==!1&&(Ot.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ot.test(t.data)&&"data");return a||"jsonp"===t.dataTypes[0]?(i=t.jsonpCallback=Z.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(Ot,"$1"+i):t.jsonp!==!1&&(t.url+=(ct.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return s||Z.error(i+" was not called"),s[0]},t.dataTypes[0]="json",o=e[i],e[i]=function(){s=arguments},r.always(function(){e[i]=o,t[i]&&(t.jsonpCallback=n.jsonpCallback,Ht.push(i)),s&&Z.isFunction(o)&&o(s[0]),s=o=void 0}),"script"):void 0}),Z.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||J;var r=se.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=Z.buildFragment([e],t,i),i&&i.length&&Z(i).remove(),Z.merge([],r.childNodes))};var Ft=Z.fn.load;Z.fn.load=function(e,t,n){if("string"!=typeof e&&Ft)return Ft.apply(this,arguments);var r,i,o,s=this,a=e.indexOf(" ");return a>=0&&(r=Z.trim(e.slice(a)),e=e.slice(0,a)),Z.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),s.length>0&&Z.ajax({url:e,type:i,dataType:"html",data:t}).done(function(e){o=arguments,s.html(r?Z("<div>").append(Z.parseHTML(e)).find(r):e)}).complete(n&&function(e,t){s.each(n,o||[e.responseText,t,e])}),this},Z.expr.filters.animated=function(e){return Z.grep(Z.timers,function(t){return e===t.elem}).length};var Pt=e.document.documentElement;Z.offset={setOffset:function(e,t,n){var r,i,o,s,a,u,l,c=Z.css(e,"position"),f=Z(e),p={};"static"===c&&(e.style.position="relative"),a=f.offset(),o=Z.css(e,"top"),u=Z.css(e,"left"),l=("absolute"===c||"fixed"===c)&&(o+u).indexOf("auto")>-1,l?(r=f.position(),s=r.top,i=r.left):(s=parseFloat(o)||0,i=parseFloat(u)||0),Z.isFunction(t)&&(t=t.call(e,n,a)),null!=t.top&&(p.top=t.top-a.top+s),null!=t.left&&(p.left=t.left-a.left+i),"using"in t?t.using.call(e,p):f.css(p)}},Z.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){Z.offset.setOffset(this,e,t)});var t,n,r=this[0],i={top:0,left:0},o=r&&r.ownerDocument;if(o)return t=o.documentElement,Z.contains(t,r)?(typeof r.getBoundingClientRect!==ke&&(i=r.getBoundingClientRect()),n=B(o),{top:i.top+n.pageYOffset-t.clientTop,left:i.left+n.pageXOffset-t.clientLeft}):i},position:function(){if(this[0]){var e,t,n=this[0],r={top:0,left:0};return"fixed"===Z.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),Z.nodeName(e[0],"html")||(r=e.offset()),r.top+=Z.css(e[0],"borderTopWidth",!0),r.left+=Z.css(e[0],"borderLeftWidth",!0)),{top:t.top-r.top-Z.css(n,"marginTop",!0),left:t.left-r.left-Z.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||Pt;e&&!Z.nodeName(e,"html")&&"static"===Z.css(e,"position");)e=e.offsetParent;return e||Pt})}}),Z.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,n){var r="pageYOffset"===n;Z.fn[t]=function(i){return me(this,function(t,i,o){var s=B(t);return void 0===o?s?s[n]:t[i]:void(s?s.scrollTo(r?e.pageXOffset:o,r?o:e.pageYOffset):t[i]=o)},t,i,arguments.length,null)}}),Z.each(["top","left"],function(e,t){Z.cssHooks[t]=T(Q.pixelPosition,function(e,n){return n?(n=w(e,t),Ie.test(n)?Z(e).position()[t]+"px":n):void 0})}),Z.each({Height:"height",Width:"width"},function(e,t){Z.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){Z.fn[r]=function(r,i){var o=arguments.length&&(n||"boolean"!=typeof r),s=n||(r===!0||i===!0?"margin":"border");return me(this,function(t,n,r){var i;return Z.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):void 0===r?Z.css(t,n,s):Z.style(t,n,r,s)},t,o?r:void 0,o,null)}})}),Z.fn.size=function(){return this.length},Z.fn.andSelf=Z.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return Z});var Mt=e.jQuery,Rt=e.$;return Z.noConflict=function(t){return e.$===Z&&(e.$=Rt),t&&e.jQuery===Z&&(e.jQuery=Mt),Z},typeof t===ke&&(e.jQuery=e.$=Z),Z});


},{}],112:[function(require,module,exports){
  module.exports=require("./lib/");


},{"./lib/":113}],113:[function(require,module,exports){
  function lookup(e,r){"object"==typeof e&&(r=e,e=void 0),r=r||{};var o,c=url(e),a=c.source,t=c.id;return r.forceNew||r["force new connection"]||!1===r.multiplex?(debug("ignoring socket cache for %s",a),o=Manager(a,r)):(cache[t]||(debug("new io instance for %s",a),cache[t]=Manager(a,r)),o=cache[t]),o.socket(c.path)}var url=require("./url"),parser=require("socket.io-parser"),Manager=require("./manager"),debug=require("debug")("socket.io-client");module.exports=exports=lookup;var cache=exports.managers={};exports.protocol=parser.protocol,exports.connect=lookup,exports.Manager=require("./manager"),exports.Socket=require("./socket");


},{"./manager":114,"./socket":116,"./url":117,"debug":121,"socket.io-parser":155}],114:[function(require,module,exports){
  function Manager(e,t){return this instanceof Manager?(e&&"object"==typeof e&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new Backoff({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connected=[],this.encoding=!1,this.packetBuffer=[],this.encoder=new parser.Encoder,this.decoder=new parser.Decoder,this.autoConnect=t.autoConnect!==!1,void(this.autoConnect&&this.open())):new Manager(e,t)}var url=require("./url"),eio=require("engine.io-client"),Socket=require("./socket"),Emitter=require("component-emitter"),parser=require("socket.io-parser"),on=require("./on"),bind=require("component-bind"),object=require("object-component"),debug=require("debug")("socket.io-client:manager"),indexOf=require("indexof"),Backoff=require("backo2");module.exports=Manager,Manager.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var e in this.nsps)this.nsps[e].emit.apply(this.nsps[e],arguments)},Manager.prototype.updateSocketIds=function(){for(var e in this.nsps)this.nsps[e].id=this.engine.id},Emitter(Manager.prototype),Manager.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},Manager.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},Manager.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},Manager.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},Manager.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},Manager.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},Manager.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},Manager.prototype.open=Manager.prototype.connect=function(e){if(debug("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;debug("opening %s",this.uri),this.engine=eio(this.uri,this.opts);var t=this.engine,n=this;this.readyState="opening",this.skipReconnect=!1;var o=on(t,"open",function(){n.onopen(),e&&e()}),i=on(t,"error",function(t){if(debug("connect_error"),n.cleanup(),n.readyState="closed",n.emitAll("connect_error",t),e){var o=new Error("Connection error");o.data=t,e(o)}else n.maybeReconnectOnOpen()});if(!1!==this._timeout){var r=this._timeout;debug("connect attempt will timeout after %d",r);var c=setTimeout(function(){debug("connect attempt timed out after %d",r),o.destroy(),t.close(),t.emit("error","timeout"),n.emitAll("connect_timeout",r)},r);this.subs.push({destroy:function(){clearTimeout(c)}})}return this.subs.push(o),this.subs.push(i),this},Manager.prototype.onopen=function(){debug("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(on(e,"data",bind(this,"ondata"))),this.subs.push(on(this.decoder,"decoded",bind(this,"ondecoded"))),this.subs.push(on(e,"error",bind(this,"onerror"))),this.subs.push(on(e,"close",bind(this,"onclose")))},Manager.prototype.ondata=function(e){this.decoder.add(e)},Manager.prototype.ondecoded=function(e){this.emit("packet",e)},Manager.prototype.onerror=function(e){debug("error",e),this.emitAll("error",e)},Manager.prototype.socket=function(e){var t=this.nsps[e];if(!t){t=new Socket(this,e),this.nsps[e]=t;var n=this;t.on("connect",function(){t.id=n.engine.id,~indexOf(n.connected,t)||n.connected.push(t)})}return t},Manager.prototype.destroy=function(e){var t=indexOf(this.connected,e);~t&&this.connected.splice(t,1),this.connected.length||this.close()},Manager.prototype.packet=function(e){debug("writing packet %j",e);var t=this;t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,function(e){for(var n=0;n<e.length;n++)t.engine.write(e[n]);t.encoding=!1,t.processPacketQueue()}))},Manager.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},Manager.prototype.cleanup=function(){for(var e;e=this.subs.shift();)e.destroy();this.packetBuffer=[],this.encoding=!1,this.decoder.destroy()},Manager.prototype.close=Manager.prototype.disconnect=function(){this.skipReconnect=!0,this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},Manager.prototype.onclose=function(e){debug("close"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},Manager.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)debug("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();debug("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var n=setTimeout(function(){e.skipReconnect||(debug("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||e.open(function(t){t?(debug("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(debug("reconnect success"),e.onreconnect())}))},t);this.subs.push({destroy:function(){clearTimeout(n)}})}},Manager.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)};


},{"./on":115,"./socket":116,"./url":117,"backo2":118,"component-bind":119,"component-emitter":120,"debug":121,"engine.io-client":122,"indexof":151,"object-component":152,"socket.io-parser":155}],115:[function(require,module,exports){
  function on(n,o,e){return n.on(o,e),{destroy:function(){n.removeListener(o,e)}}}module.exports=on;


},{}],116:[function(require,module,exports){
  function Socket(t,e){this.io=t,this.nsp=e,this.json=this,this.ids=0,this.acks={},this.io.autoConnect&&this.open(),this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0}var parser=require("socket.io-parser"),Emitter=require("component-emitter"),toArray=require("to-array"),on=require("./on"),bind=require("component-bind"),debug=require("debug")("socket.io-client:socket"),hasBin=require("has-binary");module.exports=exports=Socket;var events={connect:1,connect_error:1,connect_timeout:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1},emit=Emitter.prototype.emit;Emitter(Socket.prototype),Socket.prototype.subEvents=function(){if(!this.subs){var t=this.io;this.subs=[on(t,"open",bind(this,"onopen")),on(t,"packet",bind(this,"onpacket")),on(t,"close",bind(this,"onclose"))]}},Socket.prototype.open=Socket.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"==this.io.readyState&&this.onopen(),this)},Socket.prototype.send=function(){var t=toArray(arguments);return t.unshift("message"),this.emit.apply(this,t),this},Socket.prototype.emit=function(t){if(events.hasOwnProperty(t))return emit.apply(this,arguments),this;var e=toArray(arguments),s=parser.EVENT;hasBin(e)&&(s=parser.BINARY_EVENT);var i={type:s,data:e};return"function"==typeof e[e.length-1]&&(debug("emitting packet with ack id %d",this.ids),this.acks[this.ids]=e.pop(),i.id=this.ids++),this.connected?this.packet(i):this.sendBuffer.push(i),this},Socket.prototype.packet=function(t){t.nsp=this.nsp,this.io.packet(t)},Socket.prototype.onopen=function(){debug("transport is open - connecting"),"/"!=this.nsp&&this.packet({type:parser.CONNECT})},Socket.prototype.onclose=function(t){debug("close (%s)",t),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",t)},Socket.prototype.onpacket=function(t){if(t.nsp==this.nsp)switch(t.type){case parser.CONNECT:this.onconnect();break;case parser.EVENT:this.onevent(t);break;case parser.BINARY_EVENT:this.onevent(t);break;case parser.ACK:this.onack(t);break;case parser.BINARY_ACK:this.onack(t);break;case parser.DISCONNECT:this.ondisconnect();break;case parser.ERROR:this.emit("error",t.data)}},Socket.prototype.onevent=function(t){var e=t.data||[];debug("emitting event %j",e),null!=t.id&&(debug("attaching ack callback to event"),e.push(this.ack(t.id))),this.connected?emit.apply(this,e):this.receiveBuffer.push(e)},Socket.prototype.ack=function(t){var e=this,s=!1;return function(){if(!s){s=!0;var i=toArray(arguments);debug("sending ack %j",i);var n=hasBin(i)?parser.BINARY_ACK:parser.ACK;e.packet({type:n,id:t,data:i})}}},Socket.prototype.onack=function(t){debug("calling ack %s with %j",t.id,t.data);var e=this.acks[t.id];e.apply(this,t.data),delete this.acks[t.id]},Socket.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},Socket.prototype.emitBuffered=function(){var t;for(t=0;t<this.receiveBuffer.length;t++)emit.apply(this,this.receiveBuffer[t]);for(this.receiveBuffer=[],t=0;t<this.sendBuffer.length;t++)this.packet(this.sendBuffer[t]);this.sendBuffer=[]},Socket.prototype.ondisconnect=function(){debug("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},Socket.prototype.destroy=function(){if(this.subs){for(var t=0;t<this.subs.length;t++)this.subs[t].destroy();this.subs=null}this.io.destroy(this)},Socket.prototype.close=Socket.prototype.disconnect=function(){return this.connected&&(debug("performing disconnect (%s)",this.nsp),this.packet({type:parser.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this};


},{"./on":115,"component-bind":119,"component-emitter":120,"debug":121,"has-binary":149,"socket.io-parser":155,"to-array":159}],117:[function(require,module,exports){
  (function (global){
    function url(t,o){var r=t,o=o||global.location;return null==t&&(t=o.protocol+"//"+o.host),"string"==typeof t&&("/"==t.charAt(0)&&(t="/"==t.charAt(1)?o.protocol+t:o.hostname+t),/^(https?|wss?):\/\//.test(t)||(debug("protocol-less url %s",t),t="undefined"!=typeof o?o.protocol+"//"+t:"https://"+t),debug("parse %s",t),r=parseuri(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/",r.id=r.protocol+"://"+r.host+":"+r.port,r.href=r.protocol+"://"+r.host+(o&&o.port==r.port?"":":"+r.port),r}var parseuri=require("parseuri"),debug=require("debug")("socket.io-client:url");module.exports=url;


  }).call(this,typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"debug":121,"parseuri":153}],118:[function(require,module,exports){
  function Backoff(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}module.exports=Backoff,Backoff.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var o=Math.random(),i=Math.floor(o*this.jitter*t);t=0==(1&Math.floor(10*o))?t-i:t+i}return 0|Math.min(t,this.max)},Backoff.prototype.reset=function(){this.attempts=0},Backoff.prototype.setMin=function(t){this.ms=t},Backoff.prototype.setMax=function(t){this.max=t},Backoff.prototype.setJitter=function(t){this.jitter=t};


},{}],119:[function(require,module,exports){
  var slice=[].slice;module.exports=function(n,r){if("string"==typeof r&&(r=n[r]),"function"!=typeof r)throw new Error("bind() requires a function");var e=slice.call(arguments,2);return function(){return r.apply(n,e.concat(slice.call(arguments)))}};


},{}],120:[function(require,module,exports){
  function Emitter(t){return t?mixin(t):void 0}function mixin(t){for(var e in Emitter.prototype)t[e]=Emitter.prototype[e];return t}module.exports=Emitter,Emitter.prototype.on=Emitter.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks[t]=this._callbacks[t]||[]).push(e),this},Emitter.prototype.once=function(t,e){function i(){r.off(t,i),e.apply(this,arguments)}var r=this;return this._callbacks=this._callbacks||{},i.fn=e,this.on(t,i),this},Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var i=this._callbacks[t];if(!i)return this;if(1==arguments.length)return delete this._callbacks[t],this;for(var r,s=0;s<i.length;s++)if(r=i[s],r===e||r.fn===e){i.splice(s,1);break}return this},Emitter.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),i=this._callbacks[t];if(i){i=i.slice(0);for(var r=0,s=i.length;s>r;++r)i[r].apply(this,e)}return this},Emitter.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[t]||[]},Emitter.prototype.hasListeners=function(t){return!!this.listeners(t).length};


},{}],121:[function(require,module,exports){
  function debug(e){return debug.enabled(e)?function(n){n=coerce(n);var u=new Date,o=u-(debug[e]||u);debug[e]=u,n=e+" "+n+" +"+debug.humanize(o),window.console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}:function(){}}function coerce(e){return e instanceof Error?e.stack||e.message:e}module.exports=debug,debug.names=[],debug.skips=[],debug.enable=function(e){try{localStorage.debug=e}catch(n){}for(var u=(e||"").split(/[\s,]+/),o=u.length,t=0;o>t;t++)e=u[t].replace("*",".*?"),"-"===e[0]?debug.skips.push(new RegExp("^"+e.substr(1)+"$")):debug.names.push(new RegExp("^"+e+"$"))},debug.disable=function(){debug.enable("")},debug.humanize=function(e){var n=1e3,u=6e4,o=60*u;return e>=o?(e/o).toFixed(1)+"h":e>=u?(e/u).toFixed(1)+"m":e>=n?(e/n|0)+"s":e+"ms"},debug.enabled=function(e){for(var n=0,u=debug.skips.length;u>n;n++)if(debug.skips[n].test(e))return!1;for(var n=0,u=debug.names.length;u>n;n++)if(debug.names[n].test(e))return!0;return!1};try{window.localStorage&&debug.enable(localStorage.debug)}catch(e){}


},{}],122:[function(require,module,exports){
  module.exports=require("./lib/");


},{"./lib/":123}],123:[function(require,module,exports){
  module.exports=require("./socket"),module.exports.parser=require("engine.io-parser");


},{"./socket":124,"engine.io-parser":136}],124:[function(require,module,exports){
  (function (global){
    function noop(){}function Socket(e,t){if(!(this instanceof Socket))return new Socket(e,t);if(t=t||{},e&&"object"==typeof e&&(t=e,e=null),e&&(e=parseuri(e),t.host=e.host,t.secure="https"==e.protocol||"wss"==e.protocol,t.port=e.port,e.query&&(t.query=e.query)),this.secure=null!=t.secure?t.secure:global.location&&"https:"==location.protocol,t.host){var r=t.host.split(":");t.hostname=r.shift(),r.length?t.port=r.pop():t.port||(t.port=this.secure?"443":"80")}this.agent=t.agent||!1,this.hostname=t.hostname||(global.location?location.hostname:"localhost"),this.port=t.port||(global.location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=parseqs.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.callbackBuffer=[],this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.pfx=t.pfx||null,this.key=t.key||null,this.passphrase=t.passphrase||null,this.cert=t.cert||null,this.ca=t.ca||null,this.ciphers=t.ciphers||null,this.rejectUnauthorized=t.rejectUnauthorized||null,this.open()}function clone(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}var transports=require("./transports"),Emitter=require("component-emitter"),debug=require("debug")("engine.io-client:socket"),index=require("indexof"),parser=require("engine.io-parser"),parseuri=require("parseuri"),parsejson=require("parsejson"),parseqs=require("parseqs");module.exports=Socket,Socket.priorWebsocketSuccess=!1,Emitter(Socket.prototype),Socket.protocol=parser.protocol,Socket.Socket=Socket,Socket.Transport=require("./transport"),Socket.transports=require("./transports"),Socket.parser=require("engine.io-parser"),Socket.prototype.createTransport=function(e){debug('creating transport "%s"',e);var t=clone(this.query);t.EIO=parser.protocol,t.transport=e,this.id&&(t.sid=this.id);var r=new transports[e]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:t,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized});return r},Socket.prototype.open=function(){var e;if(this.rememberUpgrade&&Socket.priorWebsocketSuccess&&-1!=this.transports.indexOf("websocket"))e="websocket";else{if(0==this.transports.length){var t=this;return void setTimeout(function(){t.emit("error","No transports available")},0)}e=this.transports[0]}this.readyState="opening";var e;try{e=this.createTransport(e)}catch(r){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},Socket.prototype.setTransport=function(e){debug("setting transport %s",e.name);var t=this;this.transport&&(debug("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",function(){t.onDrain()}).on("packet",function(e){t.onPacket(e)}).on("error",function(e){t.onError(e)}).on("close",function(){t.onClose("transport close")})},Socket.prototype.probe=function(e){function t(){if(h.onlyBinaryUpgrades){var t=!this.supportsBinary&&h.transport.supportsBinary;c=c||t}c||(debug('probe transport "%s" opened',e),p.send([{type:"ping",data:"probe"}]),p.once("packet",function(t){if(!c)if("pong"==t.type&&"probe"==t.data){if(debug('probe transport "%s" pong',e),h.upgrading=!0,h.emit("upgrading",p),!p)return;Socket.priorWebsocketSuccess="websocket"==p.name,debug('pausing current transport "%s"',h.transport.name),h.transport.pause(function(){c||"closed"!=h.readyState&&(debug("changing transport and sending upgrade packet"),a(),h.setTransport(p),p.send([{type:"upgrade"}]),h.emit("upgrade",p),p=null,h.upgrading=!1,h.flush())})}else{debug('probe transport "%s" failed',e);var r=new Error("probe error");r.transport=p.name,h.emit("upgradeError",r)}}))}function r(){c||(c=!0,a(),p.close(),p=null)}function s(t){var s=new Error("probe error: "+t);s.transport=p.name,r(),debug('probe transport "%s" failed because of error: %s',e,t),h.emit("upgradeError",s)}function o(){s("transport closed")}function i(){s("socket closed")}function n(e){p&&e.name!=p.name&&(debug('"%s" works - aborting "%s"',e.name,p.name),r())}function a(){p.removeListener("open",t),p.removeListener("error",s),p.removeListener("close",o),h.removeListener("close",i),h.removeListener("upgrading",n)}debug('probing transport "%s"',e);var p=this.createTransport(e,{probe:1}),c=!1,h=this;Socket.priorWebsocketSuccess=!1,p.once("open",t),p.once("error",s),p.once("close",o),this.once("close",i),this.once("upgrading",n),p.open()},Socket.prototype.onOpen=function(){if(debug("socket open"),this.readyState="open",Socket.priorWebsocketSuccess="websocket"==this.transport.name,this.emit("open"),this.flush(),"open"==this.readyState&&this.upgrade&&this.transport.pause){debug("starting upgrade probes");for(var e=0,t=this.upgrades.length;t>e;e++)this.probe(this.upgrades[e])}},Socket.prototype.onPacket=function(e){if("opening"==this.readyState||"open"==this.readyState)switch(debug('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(parsejson(e.data));break;case"pong":this.setPing();break;case"error":var t=new Error("server error");t.code=e.data,this.emit("error",t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else debug('packet received with socket readyState "%s"',this.readyState)},Socket.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!=this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},Socket.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){"closed"!=t.readyState&&t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)},Socket.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){debug("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)},Socket.prototype.ping=function(){this.sendPacket("ping")},Socket.prototype.onDrain=function(){for(var e=0;e<this.prevBufferLen;e++)this.callbackBuffer[e]&&this.callbackBuffer[e]();this.writeBuffer.splice(0,this.prevBufferLen),this.callbackBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0==this.writeBuffer.length?this.emit("drain"):this.flush()},Socket.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(debug("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},Socket.prototype.write=Socket.prototype.send=function(e,t){return this.sendPacket("message",e,t),this},Socket.prototype.sendPacket=function(e,t,r){if("closing"!=this.readyState&&"closed"!=this.readyState){var s={type:e,data:t};this.emit("packetCreate",s),this.writeBuffer.push(s),this.callbackBuffer.push(r),this.flush()}},Socket.prototype.close=function(){function e(){s.onClose("forced close"),debug("socket closing - telling transport to close"),s.transport.close()}function t(){s.removeListener("upgrade",t),s.removeListener("upgradeError",t),e()}function r(){s.once("upgrade",t),s.once("upgradeError",t)}if("opening"==this.readyState||"open"==this.readyState){this.readyState="closing";var s=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?r():e()}):this.upgrading?r():e()}return this},Socket.prototype.onError=function(e){debug("socket error %j",e),Socket.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},Socket.prototype.onClose=function(e,t){if("opening"==this.readyState||"open"==this.readyState||"closing"==this.readyState){debug('socket close with reason: "%s"',e);var r=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),setTimeout(function(){r.writeBuffer=[],r.callbackBuffer=[],r.prevBufferLen=0},0),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t)}},Socket.prototype.filterUpgrades=function(e){for(var t=[],r=0,s=e.length;s>r;r++)~index(this.transports,e[r])&&t.push(e[r]);return t};


  }).call(this,typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"./transport":125,"./transports":126,"component-emitter":120,"debug":133,"engine.io-parser":136,"indexof":151,"parsejson":145,"parseqs":146,"parseuri":147}],125:[function(require,module,exports){
  function Transport(t){this.path=t.path,this.hostname=t.hostname,this.port=t.port,this.secure=t.secure,this.query=t.query,this.timestampParam=t.timestampParam,this.timestampRequests=t.timestampRequests,this.readyState="",this.agent=t.agent||!1,this.socket=t.socket,this.enablesXDR=t.enablesXDR,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized}var parser=require("engine.io-parser"),Emitter=require("component-emitter");module.exports=Transport,Emitter(Transport.prototype),Transport.timestamps=0,Transport.prototype.onError=function(t,e){var r=new Error(t);return r.type="TransportError",r.description=e,this.emit("error",r),this},Transport.prototype.open=function(){return("closed"==this.readyState||""==this.readyState)&&(this.readyState="opening",this.doOpen()),this},Transport.prototype.close=function(){return("opening"==this.readyState||"open"==this.readyState)&&(this.doClose(),this.onClose()),this},Transport.prototype.send=function(t){if("open"!=this.readyState)throw new Error("Transport not open");this.write(t)},Transport.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},Transport.prototype.onData=function(t){var e=parser.decodePacket(t,this.socket.binaryType);this.onPacket(e)},Transport.prototype.onPacket=function(t){this.emit("packet",t)},Transport.prototype.onClose=function(){this.readyState="closed",this.emit("close")};


},{"component-emitter":120,"engine.io-parser":136}],126:[function(require,module,exports){
  (function (global){
    function polling(e){var o,t=!1,r=!1,n=!1!==e.jsonp;if(global.location){var i="https:"==location.protocol,l=location.port;l||(l=i?443:80),t=e.hostname!=location.hostname||l!=e.port,r=e.secure!=i}if(e.xdomain=t,e.xscheme=r,o=new XMLHttpRequest(e),"open"in o&&!e.forceJSONP)return new XHR(e);if(!n)throw new Error("JSONP disabled");return new JSONP(e)}var XMLHttpRequest=require("xmlhttprequest"),XHR=require("./polling-xhr"),JSONP=require("./polling-jsonp"),websocket=require("./websocket");exports.polling=polling,exports.websocket=websocket;


  }).call(this,typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"./polling-jsonp":127,"./polling-xhr":128,"./websocket":130,"xmlhttprequest":131}],127:[function(require,module,exports){
  (function (global){
    function empty(){}function JSONPPolling(e){Polling.call(this,e),this.query=this.query||{},callbacks||(global.___eio||(global.___eio=[]),callbacks=global.___eio),this.index=callbacks.length;var t=this;callbacks.push(function(e){t.onData(e)}),this.query.j=this.index,global.document&&global.addEventListener&&global.addEventListener("beforeunload",function(){t.script&&(t.script.onerror=empty)},!1)}var Polling=require("./polling"),inherit=require("component-inherit");module.exports=JSONPPolling;var rNewline=/\n/g,rEscapedNewline=/\\n/g,callbacks,index=0;inherit(JSONPPolling,Polling),JSONPPolling.prototype.supportsBinary=!1,JSONPPolling.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),Polling.prototype.doClose.call(this)},JSONPPolling.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(t,i),this.script=t;var r="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent);r&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},JSONPPolling.prototype.doWrite=function(e,t){function i(){r(),t()}function r(){if(o.iframe)try{o.form.removeChild(o.iframe)}catch(e){o.onError("jsonp polling iframe removal error",e)}try{var t='<iframe src="javascript:0" name="'+o.iframeId+'">';n=document.createElement(t)}catch(e){n=document.createElement("iframe"),n.name=o.iframeId,n.src="javascript:0"}n.id=o.iframeId,o.form.appendChild(n),o.iframe=n}var o=this;if(!this.form){var n,a=document.createElement("form"),l=document.createElement("textarea"),s=this.iframeId="eio_iframe_"+this.index;a.className="socketio",a.style.position="absolute",a.style.top="-1000px",a.style.left="-1000px",a.target=s,a.method="POST",a.setAttribute("accept-charset","utf-8"),l.name="d",a.appendChild(l),document.body.appendChild(a),this.form=a,this.area=l}this.form.action=this.uri(),r(),e=e.replace(rEscapedNewline,"\\\n"),this.area.value=e.replace(rNewline,"\\n");try{this.form.submit()}catch(c){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"==o.iframe.readyState&&i()}:this.iframe.onload=i};


  }).call(this,typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"./polling":129,"component-inherit":132}],128:[function(require,module,exports){
  (function (global){
    function empty(){}function XHR(t){if(Polling.call(this,t),global.location){var e="https:"==location.protocol,s=location.port;s||(s=e?443:80),this.xd=t.hostname!=global.location.hostname||s!=t.port,this.xs=t.secure!=e}}function Request(t){this.method=t.method||"GET",this.uri=t.uri,this.xd=!!t.xd,this.xs=!!t.xs,this.async=!1!==t.async,this.data=void 0!=t.data?t.data:null,this.agent=t.agent,this.isBinary=t.isBinary,this.supportsBinary=t.supportsBinary,this.enablesXDR=t.enablesXDR,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.create()}function unloadHandler(){for(var t in Request.requests)Request.requests.hasOwnProperty(t)&&Request.requests[t].abort()}var XMLHttpRequest=require("xmlhttprequest"),Polling=require("./polling"),Emitter=require("component-emitter"),inherit=require("component-inherit"),debug=require("debug")("engine.io-client:polling-xhr");module.exports=XHR,module.exports.Request=Request,inherit(XHR,Polling),XHR.prototype.supportsBinary=!0,XHR.prototype.request=function(t){return t=t||{},t.uri=this.uri(),t.xd=this.xd,t.xs=this.xs,t.agent=this.agent||!1,t.supportsBinary=this.supportsBinary,t.enablesXDR=this.enablesXDR,t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,new Request(t)},XHR.prototype.doWrite=function(t,e){var s="string"!=typeof t&&void 0!==t,r=this.request({method:"POST",data:t,isBinary:s}),i=this;r.on("success",e),r.on("error",function(t){i.onError("xhr post error",t)}),this.sendXhr=r},XHR.prototype.doPoll=function(){debug("xhr poll");var t=this.request(),e=this;t.on("data",function(t){e.onData(t)}),t.on("error",function(t){e.onError("xhr poll error",t)}),this.pollXhr=t},Emitter(Request.prototype),Request.prototype.create=function(){var t={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized;var e=this.xhr=new XMLHttpRequest(t),s=this;try{if(debug("xhr open %s: %s",this.method,this.uri),e.open(this.method,this.uri,this.async),this.supportsBinary&&(e.responseType="arraybuffer"),"POST"==this.method)try{this.isBinary?e.setRequestHeader("Content-type","application/octet-stream"):e.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(r){}"withCredentials"in e&&(e.withCredentials=!0),this.hasXDR()?(e.onload=function(){s.onLoad()},e.onerror=function(){s.onError(e.responseText)}):e.onreadystatechange=function(){4==e.readyState&&(200==e.status||1223==e.status?s.onLoad():setTimeout(function(){s.onError(e.status)},0))},debug("xhr data %s",this.data),e.send(this.data)}catch(r){return void setTimeout(function(){s.onError(r)},0)}global.document&&(this.index=Request.requestsCount++,Request.requests[this.index]=this)},Request.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},Request.prototype.onData=function(t){this.emit("data",t),this.onSuccess()},Request.prototype.onError=function(t){this.emit("error",t),this.cleanup(!0)},Request.prototype.cleanup=function(t){if("undefined"!=typeof this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=empty:this.xhr.onreadystatechange=empty,t)try{this.xhr.abort()}catch(e){}global.document&&delete Request.requests[this.index],this.xhr=null}},Request.prototype.onLoad=function(){var t;try{var e;try{e=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(s){}t="application/octet-stream"===e?this.xhr.response:this.supportsBinary?"ok":this.xhr.responseText}catch(s){this.onError(s)}null!=t&&this.onData(t)},Request.prototype.hasXDR=function(){return"undefined"!=typeof global.XDomainRequest&&!this.xs&&this.enablesXDR},Request.prototype.abort=function(){this.cleanup()},global.document&&(Request.requestsCount=0,Request.requests={},global.attachEvent?global.attachEvent("onunload",unloadHandler):global.addEventListener&&global.addEventListener("beforeunload",unloadHandler,!1));


  }).call(this,typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"./polling":129,"component-emitter":120,"component-inherit":132,"debug":133,"xmlhttprequest":131}],129:[function(require,module,exports){
  function Polling(t){var e=t&&t.forceBase64;(!hasXHR2||e)&&(this.supportsBinary=!1),Transport.call(this,t)}var Transport=require("../transport"),parseqs=require("parseqs"),parser=require("engine.io-parser"),inherit=require("component-inherit"),debug=require("debug")("engine.io-client:polling");module.exports=Polling;var hasXHR2=function(){var t=require("xmlhttprequest"),e=new t({xdomain:!1});return null!=e.responseType}();inherit(Polling,Transport),Polling.prototype.name="polling",Polling.prototype.doOpen=function(){this.poll()},Polling.prototype.pause=function(t){function e(){debug("paused"),i.readyState="paused",t()}var i=this;if(this.readyState="pausing",this.polling||!this.writable){var o=0;this.polling&&(debug("we are currently polling - waiting to pause"),o++,this.once("pollComplete",function(){debug("pre-pause polling complete"),--o||e()})),this.writable||(debug("we are currently writing - waiting to pause"),o++,this.once("drain",function(){debug("pre-pause writing complete"),--o||e()}))}else e()},Polling.prototype.poll=function(){debug("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},Polling.prototype.onData=function(t){var e=this;debug("polling got data %s",t);var i=function(t,i,o){return"opening"==e.readyState&&e.onOpen(),"close"==t.type?(e.onClose(),!1):void e.onPacket(t)};parser.decodePayload(t,this.socket.binaryType,i),"closed"!=this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():debug('ignoring poll - transport state "%s"',this.readyState))},Polling.prototype.doClose=function(){function t(){debug("writing close packet"),e.write([{type:"close"}])}var e=this;"open"==this.readyState?(debug("transport open - closing"),t()):(debug("transport not open - deferring close"),this.once("open",t))},Polling.prototype.write=function(t){var e=this;this.writable=!1;var i=function(){e.writable=!0,e.emit("drain")},e=this;parser.encodePayload(t,this.supportsBinary,function(t){e.doWrite(t,i)})},Polling.prototype.uri=function(){var t=this.query||{},e=this.secure?"https":"http",i="";return!1!==this.timestampRequests&&(t[this.timestampParam]=+new Date+"-"+Transport.timestamps++),this.supportsBinary||t.sid||(t.b64=1),t=parseqs.encode(t),this.port&&("https"==e&&443!=this.port||"http"==e&&80!=this.port)&&(i=":"+this.port),t.length&&(t="?"+t),e+"://"+this.hostname+i+this.path+t};


},{"../transport":125,"component-inherit":132,"debug":133,"engine.io-parser":136,"parseqs":146,"xmlhttprequest":131}],130:[function(require,module,exports){
  function WS(t){var e=t&&t.forceBase64;e&&(this.supportsBinary=!1),Transport.call(this,t)}var Transport=require("../transport"),parser=require("engine.io-parser"),parseqs=require("parseqs"),inherit=require("component-inherit"),debug=require("debug")("engine.io-client:websocket"),WebSocket=require("ws");module.exports=WS,inherit(WS,Transport),WS.prototype.name="websocket",WS.prototype.supportsBinary=!0,WS.prototype.doOpen=function(){if(this.check()){var t=this.uri(),e=void 0,s={agent:this.agent};s.pfx=this.pfx,s.key=this.key,s.passphrase=this.passphrase,s.cert=this.cert,s.ca=this.ca,s.ciphers=this.ciphers,s.rejectUnauthorized=this.rejectUnauthorized,this.ws=new WebSocket(t,e,s),void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.binaryType="arraybuffer",this.addEventListeners()}},WS.prototype.addEventListeners=function(){var t=this;this.ws.onopen=function(){t.onOpen()},this.ws.onclose=function(){t.onClose()},this.ws.onmessage=function(e){t.onData(e.data)},this.ws.onerror=function(e){t.onError("websocket error",e)}},"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(WS.prototype.onData=function(t){var e=this;setTimeout(function(){Transport.prototype.onData.call(e,t)},0)}),WS.prototype.write=function(t){function e(){s.writable=!0,s.emit("drain")}var s=this;this.writable=!1;for(var r=0,o=t.length;o>r;r++)parser.encodePacket(t[r],this.supportsBinary,function(t){try{s.ws.send(t)}catch(e){debug("websocket closed before onclose event")}});setTimeout(e,0)},WS.prototype.onClose=function(){Transport.prototype.onClose.call(this)},WS.prototype.doClose=function(){"undefined"!=typeof this.ws&&this.ws.close()},WS.prototype.uri=function(){var t=this.query||{},e=this.secure?"wss":"ws",s="";return this.port&&("wss"==e&&443!=this.port||"ws"==e&&80!=this.port)&&(s=":"+this.port),this.timestampRequests&&(t[this.timestampParam]=+new Date),this.supportsBinary||(t.b64=1),t=parseqs.encode(t),t.length&&(t="?"+t),e+"://"+this.hostname+s+this.path+t},WS.prototype.check=function(){return!(!WebSocket||"__initialize"in WebSocket&&this.name===WS.prototype.name)};


},{"../transport":125,"component-inherit":132,"debug":133,"engine.io-parser":136,"parseqs":146,"ws":148}],131:[function(require,module,exports){
  var hasCORS=require("has-cors");module.exports=function(e){var t=e.xdomain,n=e.xscheme,r=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||hasCORS))return new XMLHttpRequest}catch(a){}try{if("undefined"!=typeof XDomainRequest&&!n&&r)return new XDomainRequest}catch(a){}if(!t)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(a){}};


},{"has-cors":143}],132:[function(require,module,exports){
  module.exports=function(o,t){var p=function(){};p.prototype=t.prototype,o.prototype=new p,o.prototype.constructor=o};


},{}],133:[function(require,module,exports){
  function useColors(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function formatArgs(){var o=arguments,e=this.useColors;if(o[0]=(e?"%c":"")+this.namespace+(e?" %c":" ")+o[0]+(e?"%c ":" ")+"+"+exports.humanize(this.diff),!e)return o;var r="color: "+this.color;o=[o[0],r,"color: inherit"].concat(Array.prototype.slice.call(o,1));var t=0,n=0;return o[0].replace(/%[a-z%]/g,function(o){"%%"!==o&&(t++,"%c"===o&&(n=t))}),o.splice(n,0,r),o}function log(){return"object"==typeof console&&"function"==typeof console.log&&Function.prototype.apply.call(console.log,console,arguments)}function save(o){try{null==o?localStorage.removeItem("debug"):localStorage.debug=o}catch(e){}}function load(){var o;try{o=localStorage.debug}catch(e){}return o}exports=module.exports=require("./debug"),exports.log=log,exports.formatArgs=formatArgs,exports.save=save,exports.load=load,exports.useColors=useColors,exports.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],exports.formatters.j=function(o){return JSON.stringify(o)},exports.enable(load());


},{"./debug":134}],134:[function(require,module,exports){
  function selectColor(){return exports.colors[prevColor++%exports.colors.length]}function debug(e){function r(){}function o(){var e=o,r=+new Date,s=r-(prevTime||r);e.diff=s,e.prev=prevTime,e.curr=r,prevTime=r,null==e.useColors&&(e.useColors=exports.useColors()),null==e.color&&e.useColors&&(e.color=selectColor());var t=Array.prototype.slice.call(arguments);t[0]=exports.coerce(t[0]),"string"!=typeof t[0]&&(t=["%o"].concat(t));var n=0;t[0]=t[0].replace(/%([a-z%])/g,function(r,o){if("%%"===r)return r;n++;var s=exports.formatters[o];if("function"==typeof s){var p=t[n];r=s.call(e,p),t.splice(n,1),n--}return r}),"function"==typeof exports.formatArgs&&(t=exports.formatArgs.apply(e,t));var p=o.log||exports.log||console.log.bind(console);p.apply(e,t)}r.enabled=!1,o.enabled=!0;var s=exports.enabled(e)?o:r;return s.namespace=e,s}function enable(e){exports.save(e);for(var r=(e||"").split(/[\s,]+/),o=r.length,s=0;o>s;s++)r[s]&&(e=r[s].replace(/\*/g,".*?"),"-"===e[0]?exports.skips.push(new RegExp("^"+e.substr(1)+"$")):exports.names.push(new RegExp("^"+e+"$")))}function disable(){exports.enable("")}function enabled(e){var r,o;for(r=0,o=exports.skips.length;o>r;r++)if(exports.skips[r].test(e))return!1;for(r=0,o=exports.names.length;o>r;r++)if(exports.names[r].test(e))return!0;return!1}function coerce(e){return e instanceof Error?e.stack||e.message:e}exports=module.exports=debug,exports.coerce=coerce,exports.disable=disable,exports.enable=enable,exports.enabled=enabled,exports.humanize=require("ms"),exports.names=[],exports.skips=[],exports.formatters={};var prevColor=0,prevTime;


},{"ms":135}],135:[function(require,module,exports){
  function parse(e){var r=/^((?:\d+)?\.?\d+) *(ms|seconds?|s|minutes?|m|hours?|h|days?|d|years?|y)?$/i.exec(e);if(r){var a=parseFloat(r[1]),n=(r[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"y":return a*y;case"days":case"day":case"d":return a*d;case"hours":case"hour":case"h":return a*h;case"minutes":case"minute":case"m":return a*m;case"seconds":case"second":case"s":return a*s;case"ms":return a}}}function short(e){return e>=d?Math.round(e/d)+"d":e>=h?Math.round(e/h)+"h":e>=m?Math.round(e/m)+"m":e>=s?Math.round(e/s)+"s":e+"ms"}function long(e){return plural(e,d,"day")||plural(e,h,"hour")||plural(e,m,"minute")||plural(e,s,"second")||e+" ms"}function plural(s,e,r){return e>s?void 0:1.5*e>s?Math.floor(s/e)+" "+r:Math.ceil(s/e)+" "+r+"s"}var s=1e3,m=60*s,h=60*m,d=24*h,y=365.25*d;module.exports=function(s,e){return e=e||{},"string"==typeof s?parse(s):e["long"]?long(s):short(s)};


},{}],136:[function(require,module,exports){
  (function (global){
    function encodeBase64Object(e,r){var t="b"+exports.packets[e.type]+e.data.data;return r(t)}function encodeArrayBuffer(e,r,t){if(!r)return exports.encodeBase64Packet(e,t);var n=e.data,a=new Uint8Array(n),o=new Uint8Array(1+n.byteLength);o[0]=packets[e.type];for(var f=0;f<a.length;f++)o[f+1]=a[f];return t(o.buffer)}function encodeBlobAsArrayBuffer(e,r,t){if(!r)return exports.encodeBase64Packet(e,t);var n=new FileReader;return n.onload=function(){e.data=n.result,exports.encodePacket(e,r,!0,t)},n.readAsArrayBuffer(e.data)}function encodeBlob(e,r,t){if(!r)return exports.encodeBase64Packet(e,t);if(dontSendBlobs)return encodeBlobAsArrayBuffer(e,r,t);var n=new Uint8Array(1);n[0]=packets[e.type];var a=new Blob([n.buffer,e.data]);return t(a)}function map(e,r,t){for(var n=new Array(e.length),a=after(e.length,t),o=function(e,t,a){r(t,function(r,t){n[e]=t,a(r,n)})},f=0;f<e.length;f++)o(f,e[f],a)}var keys=require("./keys"),hasBinary=require("has-binary"),sliceBuffer=require("arraybuffer.slice"),base64encoder=require("base64-arraybuffer"),after=require("after"),utf8=require("utf8"),isAndroid=navigator.userAgent.match(/Android/i),isPhantomJS=/PhantomJS/i.test(navigator.userAgent),dontSendBlobs=isAndroid||isPhantomJS;exports.protocol=3;var packets=exports.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},packetslist=keys(packets),err={type:"error",data:"parser error"},Blob=require("blob");exports.encodePacket=function(e,r,t,n){"function"==typeof r&&(n=r,r=!1),"function"==typeof t&&(n=t,t=null);var a=void 0===e.data?void 0:e.data.buffer||e.data;if(global.ArrayBuffer&&a instanceof ArrayBuffer)return encodeArrayBuffer(e,r,n);if(Blob&&a instanceof global.Blob)return encodeBlob(e,r,n);if(a&&a.base64)return encodeBase64Object(e,n);var o=packets[e.type];return void 0!==e.data&&(o+=t?utf8.encode(String(e.data)):String(e.data)),n(""+o)},exports.encodeBase64Packet=function(e,r){var t="b"+exports.packets[e.type];if(Blob&&e.data instanceof Blob){var n=new FileReader;return n.onload=function(){var e=n.result.split(",")[1];r(t+e)},n.readAsDataURL(e.data)}var a;try{a=String.fromCharCode.apply(null,new Uint8Array(e.data))}catch(o){for(var f=new Uint8Array(e.data),i=new Array(f.length),u=0;u<f.length;u++)i[u]=f[u];a=String.fromCharCode.apply(null,i)}return t+=global.btoa(a),r(t)},exports.decodePacket=function(e,r,t){if("string"==typeof e||void 0===e){if("b"==e.charAt(0))return exports.decodeBase64Packet(e.substr(1),r);if(t)try{e=utf8.decode(e)}catch(n){return err}var a=e.charAt(0);return Number(a)==a&&packetslist[a]?e.length>1?{type:packetslist[a],data:e.substring(1)}:{type:packetslist[a]}:err}var o=new Uint8Array(e),a=o[0],f=sliceBuffer(e,1);return Blob&&"blob"===r&&(f=new Blob([f])),{type:packetslist[a],data:f}},exports.decodeBase64Packet=function(e,r){var t=packetslist[e.charAt(0)];if(!global.ArrayBuffer)return{type:t,data:{base64:!0,data:e.substr(1)}};var n=base64encoder.decode(e.substr(1));return"blob"===r&&Blob&&(n=new Blob([n])),{type:t,data:n}},exports.encodePayload=function(e,r,t){function n(e){return e.length+":"+e}function a(e,t){exports.encodePacket(e,o?r:!1,!0,function(e){t(null,n(e))})}"function"==typeof r&&(t=r,r=null);var o=hasBinary(e);return r&&o?Blob&&!dontSendBlobs?exports.encodePayloadAsBlob(e,t):exports.encodePayloadAsArrayBuffer(e,t):e.length?void map(e,a,function(e,r){return t(r.join(""))}):t("0:")},exports.decodePayload=function(e,r,t){if("string"!=typeof e)return exports.decodePayloadAsBinary(e,r,t);"function"==typeof r&&(t=r,r=null);var n;if(""==e)return t(err,0,1);for(var a,o,f="",i=0,u=e.length;u>i;i++){var c=e.charAt(i);if(":"!=c)f+=c;else{if(""==f||f!=(a=Number(f)))return t(err,0,1);if(o=e.substr(i+1,a),f!=o.length)return t(err,0,1);if(o.length){if(n=exports.decodePacket(o,r,!0),err.type==n.type&&err.data==n.data)return t(err,0,1);var s=t(n,i+a,u);if(!1===s)return}i+=a,f=""}}return""!=f?t(err,0,1):void 0},exports.encodePayloadAsArrayBuffer=function(e,r){function t(e,r){exports.encodePacket(e,!0,!0,function(e){return r(null,e)})}return e.length?void map(e,t,function(e,t){var n=t.reduce(function(e,r){var t;return t="string"==typeof r?r.length:r.byteLength,e+t.toString().length+t+2},0),a=new Uint8Array(n),o=0;return t.forEach(function(e){var r="string"==typeof e,t=e;if(r){for(var n=new Uint8Array(e.length),f=0;f<e.length;f++)n[f]=e.charCodeAt(f);t=n.buffer}r?a[o++]=0:a[o++]=1;for(var i=t.byteLength.toString(),f=0;f<i.length;f++)a[o++]=parseInt(i[f]);a[o++]=255;for(var n=new Uint8Array(t),f=0;f<n.length;f++)a[o++]=n[f]}),r(a.buffer)}):r(new ArrayBuffer(0))},exports.encodePayloadAsBlob=function(e,r){function t(e,r){exports.encodePacket(e,!0,!0,function(e){var t=new Uint8Array(1);if(t[0]=1,"string"==typeof e){for(var n=new Uint8Array(e.length),a=0;a<e.length;a++)n[a]=e.charCodeAt(a);e=n.buffer,t[0]=0}for(var o=e instanceof ArrayBuffer?e.byteLength:e.size,f=o.toString(),i=new Uint8Array(f.length+1),a=0;a<f.length;a++)i[a]=parseInt(f[a]);if(i[f.length]=255,Blob){var u=new Blob([t.buffer,i.buffer,e]);r(null,u)}})}map(e,t,function(e,t){return r(new Blob(t))})},exports.decodePayloadAsBinary=function(e,r,t){"function"==typeof r&&(t=r,r=null);for(var n=e,a=[],o=!1;n.byteLength>0;){for(var f=new Uint8Array(n),i=0===f[0],u="",c=1;255!=f[c];c++){if(u.length>310){o=!0;break}u+=f[c]}if(o)return t(err,0,1);n=sliceBuffer(n,2+u.length),u=parseInt(u);var s=sliceBuffer(n,0,u);if(i)try{s=String.fromCharCode.apply(null,new Uint8Array(s))}catch(l){var d=new Uint8Array(s);s="";for(var c=0;c<d.length;c++)s+=String.fromCharCode(d[c])}a.push(s),n=sliceBuffer(n,u)}var p=a.length;a.forEach(function(e,n){t(exports.decodePacket(e,r,!0),n,p)})};


  }).call(this,typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"./keys":137,"after":138,"arraybuffer.slice":139,"base64-arraybuffer":140,"blob":141,"has-binary":149,"utf8":142}],137:[function(require,module,exports){
  module.exports=Object.keys||function(r){var e=[],t=Object.prototype.hasOwnProperty;for(var o in r)t.call(r,o)&&e.push(o);return e};


},{}],138:[function(require,module,exports){
  function after(o,n,t){function r(o,e){if(r.count<=0)throw new Error("after called too many times");--r.count,o?(u=!0,n(o),n=t):0!==r.count||u||n(null,e)}var u=!1;return t=t||noop,r.count=o,0===o?n():r}function noop(){}module.exports=after;


},{}],139:[function(require,module,exports){
  module.exports=function(r,e,n){var t=r.byteLength;if(e=e||0,n=n||t,r.slice)return r.slice(e,n);if(0>e&&(e+=t),0>n&&(n+=t),n>t&&(n=t),e>=t||e>=n||0===t)return new ArrayBuffer(0);for(var f=new Uint8Array(r),i=new Uint8Array(n-e),u=e,a=0;n>u;u++,a++)i[a]=f[u];return i.buffer};


},{}],140:[function(require,module,exports){
  !function(n){"use strict";exports.encode=function(e){var r,t=new Uint8Array(e),i=t.length,f="";for(r=0;i>r;r+=3)f+=n[t[r]>>2],f+=n[(3&t[r])<<4|t[r+1]>>4],f+=n[(15&t[r+1])<<2|t[r+2]>>6],f+=n[63&t[r+2]];return i%3===2?f=f.substring(0,f.length-1)+"=":i%3===1&&(f=f.substring(0,f.length-2)+"=="),f},exports.decode=function(e){var r,t,i,f,g,o=.75*e.length,u=e.length,s=0;"="===e[e.length-1]&&(o--,"="===e[e.length-2]&&o--);var d=new ArrayBuffer(o),h=new Uint8Array(d);for(r=0;u>r;r+=4)t=n.indexOf(e[r]),i=n.indexOf(e[r+1]),f=n.indexOf(e[r+2]),g=n.indexOf(e[r+3]),h[s++]=t<<2|i>>4,h[s++]=(15&i)<<4|f>>2,h[s++]=(3&f)<<6|63&g;return d}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/");


},{}],141:[function(require,module,exports){
  (function (global){
    function BlobBuilderConstructor(l,o){o=o||{};for(var e=new BlobBuilder,r=0;r<l.length;r++)e.append(l[r]);return o.type?e.getBlob(o.type):e.getBlob()}var BlobBuilder=global.BlobBuilder||global.WebKitBlobBuilder||global.MSBlobBuilder||global.MozBlobBuilder,blobSupported=function(){try{var l=new Blob(["hi"]);return 2==l.size}catch(o){return!1}}(),blobBuilderSupported=BlobBuilder&&BlobBuilder.prototype.append&&BlobBuilder.prototype.getBlob;module.exports=function(){return blobSupported?global.Blob:blobBuilderSupported?BlobBuilderConstructor:void 0}();


  }).call(this,typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],142:[function(require,module,exports){
  (function (global){
    !function(r){function e(r){for(var e,n,t=[],o=0,i=r.length;i>o;)e=r.charCodeAt(o++),e>=55296&&56319>=e&&i>o?(n=r.charCodeAt(o++),56320==(64512&n)?t.push(((1023&e)<<10)+(1023&n)+65536):(t.push(e),o--)):t.push(e);return t}function n(r){for(var e,n=r.length,t=-1,o="";++t<n;)e=r[t],e>65535&&(e-=65536,o+=s(e>>>10&1023|55296),e=56320|1023&e),o+=s(e);return o}function t(r,e){return s(r>>e&63|128)}function o(r){if(0==(4294967168&r))return s(r);var e="";return 0==(4294965248&r)?e=s(r>>6&31|192):0==(4294901760&r)?(e=s(r>>12&15|224),e+=t(r,6)):0==(4292870144&r)&&(e=s(r>>18&7|240),e+=t(r,12),e+=t(r,6)),e+=s(63&r|128)}function i(r){for(var n,t=e(r),i=t.length,f=-1,u="";++f<i;)n=t[f],u+=o(n);return u}function f(){if(p>=v)throw Error("Invalid byte index");var r=255&h[p];if(p++,128==(192&r))return 63&r;throw Error("Invalid continuation byte")}function u(){var r,e,n,t,o;if(p>v)throw Error("Invalid byte index");if(p==v)return!1;if(r=255&h[p],p++,0==(128&r))return r;if(192==(224&r)){var e=f();if(o=(31&r)<<6|e,o>=128)return o;throw Error("Invalid continuation byte")}if(224==(240&r)){if(e=f(),n=f(),o=(15&r)<<12|e<<6|n,o>=2048)return o;throw Error("Invalid continuation byte")}if(240==(248&r)&&(e=f(),n=f(),t=f(),o=(15&r)<<18|e<<12|n<<6|t,o>=65536&&1114111>=o))return o;throw Error("Invalid UTF-8 detected")}function a(r){h=e(r),v=h.length,p=0;for(var t,o=[];(t=u())!==!1;)o.push(t);return n(o)}var d="object"==typeof exports&&exports,l="object"==typeof module&&module&&module.exports==d&&module,c="object"==typeof global&&global;(c.global===c||c.window===c)&&(r=c);var h,v,p,s=String.fromCharCode,b={version:"2.0.0",encode:i,decode:a};if("function"==typeof define&&"object"==typeof define.amd&&define.amd)define(function(){return b});else if(d&&!d.nodeType)if(l)l.exports=b;else{var y={},w=y.hasOwnProperty;for(var g in b)w.call(b,g)&&(d[g]=b[g])}else r.utf8=b}(this);


  }).call(this,typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],143:[function(require,module,exports){
  var global=require("global");try{module.exports="XMLHttpRequest"in global&&"withCredentials"in new global.XMLHttpRequest}catch(err){module.exports=!1}


},{"global":144}],144:[function(require,module,exports){
  module.exports=function(){return this}();


},{}],145:[function(require,module,exports){
  (function (global){
    var rvalidchars=/^[\],:{}\s]*$/,rvalidescape=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rvalidtokens=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rvalidbraces=/(?:^|:|,)(?:\s*\[)+/g,rtrimLeft=/^\s+/,rtrimRight=/\s+$/;module.exports=function(r){return"string"==typeof r&&r?(r=r.replace(rtrimLeft,"").replace(rtrimRight,""),global.JSON&&JSON.parse?JSON.parse(r):rvalidchars.test(r.replace(rvalidescape,"@").replace(rvalidtokens,"]").replace(rvalidbraces,""))?new Function("return "+r)():void 0):null};


  }).call(this,typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],146:[function(require,module,exports){
  exports.encode=function(e){var n="";for(var o in e)e.hasOwnProperty(o)&&(n.length&&(n+="&"),n+=encodeURIComponent(o)+"="+encodeURIComponent(e[o]));return n},exports.decode=function(e){for(var n={},o=e.split("&"),t=0,r=o.length;r>t;t++){var d=o[t].split("=");n[decodeURIComponent(d[0])]=decodeURIComponent(d[1])}return n};


},{}],147:[function(require,module,exports){
  var re=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,parts=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];module.exports=function(r){var e=r,t=r.indexOf("["),s=r.indexOf("]");-1!=t&&-1!=s&&(r=r.substring(0,t)+r.substring(t,s).replace(/:/g,";")+r.substring(s,r.length));for(var o=re.exec(r||""),a={},u=14;u--;)a[parts[u]]=o[u]||"";return-1!=t&&-1!=s&&(a.source=e,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a};


},{}],148:[function(require,module,exports){
  function ws(e,o,t){var b;return b=o?new WebSocket(e,o):new WebSocket(e)}var global=function(){return this}(),WebSocket=global.WebSocket||global.MozWebSocket;module.exports=WebSocket?ws:null,WebSocket&&(ws.prototype=WebSocket.prototype);


},{}],149:[function(require,module,exports){
  (function (global){
    function hasBinary(r){function e(r){if(!r)return!1;if(global.Buffer&&global.Buffer.isBuffer(r)||global.ArrayBuffer&&r instanceof ArrayBuffer||global.Blob&&r instanceof Blob||global.File&&r instanceof File)return!0;if(isArray(r)){for(var f=0;f<r.length;f++)if(e(r[f]))return!0}else if(r&&"object"==typeof r){r.toJSON&&(r=r.toJSON());for(var a in r)if(r.hasOwnProperty(a)&&e(r[a]))return!0}return!1}return e(r)}var isArray=require("isarray");module.exports=hasBinary;


  }).call(this,typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"isarray":150}],150:[function(require,module,exports){
  module.exports=Array.isArray||function(r){return"[object Array]"==Object.prototype.toString.call(r)};


},{}],151:[function(require,module,exports){
  var indexOf=[].indexOf;module.exports=function(e,n){if(indexOf)return e.indexOf(n);for(var r=0;r<e.length;++r)if(e[r]===n)return r;return-1};


},{}],152:[function(require,module,exports){
  var has=Object.prototype.hasOwnProperty;exports.keys=Object.keys||function(r){var t=[];for(var e in r)has.call(r,e)&&t.push(e);return t},exports.values=function(r){var t=[];for(var e in r)has.call(r,e)&&t.push(r[e]);return t},exports.merge=function(r,t){for(var e in t)has.call(t,e)&&(r[e]=t[e]);return r},exports.length=function(r){return exports.keys(r).length},exports.isEmpty=function(r){return 0==exports.length(r)};


},{}],153:[function(require,module,exports){
  var re=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,parts=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];module.exports=function(r){for(var t=re.exec(r||""),e={},o=14;o--;)e[parts[o]]=t[o]||"";return e};


},{}],154:[function(require,module,exports){
  (function (global){
    var isArray=require("isarray"),isBuf=require("./is-buffer");exports.deconstructPacket=function(r){function e(r){if(!r)return r;if(isBuf(r)){var n={_placeholder:!0,num:t.length};return t.push(r),n}if(isArray(r)){for(var a=new Array(r.length),i=0;i<r.length;i++)a[i]=e(r[i]);return a}if("object"==typeof r&&!(r instanceof Date)){var a={};for(var f in r)a[f]=e(r[f]);return a}return r}var t=[],n=r.data,a=r;return a.data=e(n),a.attachments=t.length,{packet:a,buffers:t}},exports.reconstructPacket=function(r,e){function t(r){if(r&&r._placeholder){var n=e[r.num];return n}if(isArray(r)){for(var a=0;a<r.length;a++)r[a]=t(r[a]);return r}if(r&&"object"==typeof r){for(var i in r)r[i]=t(r[i]);return r}return r}return r.data=t(r.data),r.attachments=void 0,r},exports.removeBlobs=function(r,e){function t(r,i,f){if(!r)return r;if(global.Blob&&r instanceof Blob||global.File&&r instanceof File){n++;var o=new FileReader;o.onload=function(){f?f[i]=this.result:a=this.result,--n||e(a)},o.readAsArrayBuffer(r)}else if(isArray(r))for(var u=0;u<r.length;u++)t(r[u],u,r);else if(r&&"object"==typeof r&&!isBuf(r))for(var s in r)t(r[s],s,r)}var n=0,a=r;t(a),n||e(a)};


  }).call(this,typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"./is-buffer":156,"isarray":157}],155:[function(require,module,exports){
  function Encoder(){}function encodeAsString(r){var t="",e=!1;return t+=r.type,(exports.BINARY_EVENT==r.type||exports.BINARY_ACK==r.type)&&(t+=r.attachments,t+="-"),r.nsp&&"/"!=r.nsp&&(e=!0,t+=r.nsp),null!=r.id&&(e&&(t+=",",e=!1),t+=r.id),null!=r.data&&(e&&(t+=","),t+=json.stringify(r.data)),debug("encoded %j as %s",r,t),t}function encodeAsBinary(r,t){function e(r){var e=binary.deconstructPacket(r),o=encodeAsString(e.packet),n=e.buffers;n.unshift(o),t(n)}binary.removeBlobs(r,e)}function Decoder(){this.reconstructor=null}function decodeString(r){var t={},e=0;if(t.type=Number(r.charAt(0)),null==exports.types[t.type])return error();if(exports.BINARY_EVENT==t.type||exports.BINARY_ACK==t.type){for(t.attachments="";"-"!=r.charAt(++e);)t.attachments+=r.charAt(e);t.attachments=Number(t.attachments)}if("/"==r.charAt(e+1))for(t.nsp="";++e;){var o=r.charAt(e);if(","==o)break;if(t.nsp+=o,e+1==r.length)break}else t.nsp="/";var n=r.charAt(e+1);if(""!=n&&Number(n)==n){for(t.id="";++e;){var o=r.charAt(e);if(null==o||Number(o)!=o){--e;break}if(t.id+=r.charAt(e),e+1==r.length)break}t.id=Number(t.id)}if(r.charAt(++e))try{t.data=json.parse(r.substr(e))}catch(s){return error()}return debug("decoded %s as %j",r,t),t}function BinaryReconstructor(r){this.reconPack=r,this.buffers=[]}function error(r){return{type:exports.ERROR,data:"parser error"}}var debug=require("debug")("socket.io-parser"),json=require("json3"),isArray=require("isarray"),Emitter=require("component-emitter"),binary=require("./binary"),isBuf=require("./is-buffer");exports.protocol=4,exports.types=["CONNECT","DISCONNECT","EVENT","BINARY_EVENT","ACK","BINARY_ACK","ERROR"],exports.CONNECT=0,exports.DISCONNECT=1,exports.EVENT=2,exports.ACK=3,exports.ERROR=4,exports.BINARY_EVENT=5,exports.BINARY_ACK=6,exports.Encoder=Encoder,exports.Decoder=Decoder,Encoder.prototype.encode=function(r,t){if(debug("encoding packet %j",r),exports.BINARY_EVENT==r.type||exports.BINARY_ACK==r.type)encodeAsBinary(r,t);else{var e=encodeAsString(r);t([e])}},Emitter(Decoder.prototype),Decoder.prototype.add=function(r){var t;if("string"==typeof r)t=decodeString(r),exports.BINARY_EVENT==t.type||exports.BINARY_ACK==t.type?(this.reconstructor=new BinaryReconstructor(t),0==this.reconstructor.reconPack.attachments&&this.emit("decoded",t)):this.emit("decoded",t);else{if(!isBuf(r)&&!r.base64)throw new Error("Unknown type: "+r);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(r),t&&(this.reconstructor=null,this.emit("decoded",t))}},Decoder.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},BinaryReconstructor.prototype.takeBinaryData=function(r){if(this.buffers.push(r),this.buffers.length==this.reconPack.attachments){var t=binary.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},BinaryReconstructor.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]};


},{"./binary":154,"./is-buffer":156,"component-emitter":120,"debug":121,"isarray":157,"json3":158}],156:[function(require,module,exports){
  (function (global){
    function isBuf(f){return global.Buffer&&global.Buffer.isBuffer(f)||global.ArrayBuffer&&f instanceof ArrayBuffer}module.exports=isBuf;


  }).call(this,typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],157:[function(require,module,exports){
  module.exports=Array.isArray||function(r){return"[object Array]"==Object.prototype.toString.call(r)};


},{}],158:[function(require,module,exports){
  !function(e){function t(e){if(t[e]!==o)return t[e];var r;if("bug-string-char-index"==e)r="a"!="a"[0];else if("json"==e)r=t("json-stringify")&&t("json-parse");else{var n,a='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var i=l.stringify,s="function"==typeof i&&f;if(s){(n=function(){return 1}).toJSON=n;try{s="0"===i(0)&&"0"===i(new Number)&&'""'==i(new String)&&i(c)===o&&i(o)===o&&i()===o&&"1"===i(n)&&"[1]"==i([n])&&"[null]"==i([o])&&"null"==i(null)&&"[null,null,null]"==i([o,c,null])&&i({a:[n,!0,!1,null,"\x00\b\n\f\r	"]})==a&&"1"===i(null,n)&&"[\n 1,\n 2\n]"==i([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==i(new Date(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==i(new Date(864e13))&&'"-000001-01-01T00:00:00.000Z"'==i(new Date(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==i(new Date(-1))}catch(u){s=!1}}r=s}if("json-parse"==e){var h=l.parse;if("function"==typeof h)try{if(0===h("0")&&!h(!1)){n=h(a);var p=5==n.a.length&&1===n.a[0];if(p){try{p=!h('"	"')}catch(u){}if(p)try{p=1!==h("01")}catch(u){}if(p)try{p=1!==h("1.")}catch(u){}}}}catch(u){p=!1}r=p}}return t[e]=!!r}var r,n,o,c={}.toString,a="function"==typeof define&&define.amd,i="object"==typeof JSON&&JSON,l="object"==typeof exports&&exports&&!exports.nodeType&&exports;l&&i?(l.stringify=i.stringify,l.parse=i.parse):l=e.JSON=i||{};var f=new Date(-0xc782b5b800cec);try{f=-109252==f.getUTCFullYear()&&0===f.getUTCMonth()&&1===f.getUTCDate()&&10==f.getUTCHours()&&37==f.getUTCMinutes()&&6==f.getUTCSeconds()&&708==f.getUTCMilliseconds()}catch(s){}if(!t("json")){var u="[object Function]",h="[object Date]",p="[object Number]",g="[object String]",y="[object Array]",d="[object Boolean]",v=t("bug-string-char-index");if(!f)var b=Math.floor,C=[0,31,59,90,120,151,181,212,243,273,304,334],j=function(e,t){return C[t]+365*(e-1970)+b((e-1969+(t=+(t>1)))/4)-b((e-1901+t)/100)+b((e-1601+t)/400)};(r={}.hasOwnProperty)||(r=function(e){var t,n={};return(n.__proto__=null,n.__proto__={toString:1},n).toString!=c?r=function(e){var t=this.__proto__,r=e in(this.__proto__=null,this);return this.__proto__=t,r}:(t=n.constructor,r=function(e){var r=(this.constructor||t).prototype;return e in this&&!(e in r&&this[e]===r[e])}),n=null,r.call(this,e)});var A={"boolean":1,number:1,string:1,undefined:1},T=function(e,t){var r=typeof e[t];return"object"==r?!!e[t]:!A[r]};if(n=function(e,t){var o,a,i,l=0;(o=function(){this.valueOf=0}).prototype.valueOf=0,a=new o;for(i in a)r.call(a,i)&&l++;return o=a=null,l?n=2==l?function(e,t){var n,o={},a=c.call(e)==u;for(n in e)a&&"prototype"==n||r.call(o,n)||!(o[n]=1)||!r.call(e,n)||t(n)}:function(e,t){var n,o,a=c.call(e)==u;for(n in e)a&&"prototype"==n||!r.call(e,n)||(o="constructor"===n)||t(n);(o||r.call(e,n="constructor"))&&t(n)}:(a=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],n=function(e,t){var n,o,i=c.call(e)==u,l=!i&&"function"!=typeof e.constructor&&T(e,"hasOwnProperty")?e.hasOwnProperty:r;for(n in e)i&&"prototype"==n||!l.call(e,n)||t(n);for(o=a.length;n=a[--o];l.call(e,n)&&t(n));}),n(e,t)},!t("json-stringify")){var S={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},_="000000",w=function(e,t){return(_+(t||0)).slice(-e)},O="\\u00",U=function(e){var t,r='"',n=0,o=e.length,c=o>10&&v;for(c&&(t=e.split(""));o>n;n++){var a=e.charCodeAt(n);switch(a){case 8:case 9:case 10:case 12:case 13:case 34:case 92:r+=S[a];break;default:if(32>a){r+=O+w(2,a.toString(16));break}r+=c?t[n]:v?e.charAt(n):e[n]}}return r+'"'},x=function(e,t,a,i,l,f,s){var u,v,C,A,T,S,_,O,N,D,J,M,k,m,P,Z;try{u=t[e]}catch(E){}if("object"==typeof u&&u)if(v=c.call(u),v!=h||r.call(u,"toJSON"))"function"==typeof u.toJSON&&(v!=p&&v!=g&&v!=y||r.call(u,"toJSON"))&&(u=u.toJSON(e));else if(u>-1/0&&1/0>u){if(j){for(T=b(u/864e5),C=b(T/365.2425)+1970-1;j(C+1,0)<=T;C++);for(A=b((T-j(C,0))/30.42);j(C,A+1)<=T;A++);T=1+T-j(C,A),S=(u%864e5+864e5)%864e5,_=b(S/36e5)%24,O=b(S/6e4)%60,N=b(S/1e3)%60,D=S%1e3}else C=u.getUTCFullYear(),A=u.getUTCMonth(),T=u.getUTCDate(),_=u.getUTCHours(),O=u.getUTCMinutes(),N=u.getUTCSeconds(),D=u.getUTCMilliseconds();u=(0>=C||C>=1e4?(0>C?"-":"+")+w(6,0>C?-C:C):w(4,C))+"-"+w(2,A+1)+"-"+w(2,T)+"T"+w(2,_)+":"+w(2,O)+":"+w(2,N)+"."+w(3,D)+"Z"}else u=null;if(a&&(u=a.call(t,e,u)),null===u)return"null";if(v=c.call(u),v==d)return""+u;if(v==p)return u>-1/0&&1/0>u?""+u:"null";if(v==g)return U(""+u);if("object"==typeof u){for(m=s.length;m--;)if(s[m]===u)throw TypeError();if(s.push(u),J=[],P=f,f+=l,v==y){for(k=0,m=u.length;m>k;k++)M=x(k,u,a,i,l,f,s),J.push(M===o?"null":M);Z=J.length?l?"[\n"+f+J.join(",\n"+f)+"\n"+P+"]":"["+J.join(",")+"]":"[]"}else n(i||u,function(e){var t=x(e,u,a,i,l,f,s);t!==o&&J.push(U(e)+":"+(l?" ":"")+t)}),Z=J.length?l?"{\n"+f+J.join(",\n"+f)+"\n"+P+"}":"{"+J.join(",")+"}":"{}";return s.pop(),Z}};l.stringify=function(e,t,r){var n,o,a,i;if("function"==typeof t||"object"==typeof t&&t)if((i=c.call(t))==u)o=t;else if(i==y){a={};for(var l,f=0,s=t.length;s>f;l=t[f++],i=c.call(l),(i==g||i==p)&&(a[l]=1));}if(r)if((i=c.call(r))==p){if((r-=r%1)>0)for(n="",r>10&&(r=10);n.length<r;n+=" ");}else i==g&&(n=r.length<=10?r:r.slice(0,10));return x("",(l={},l[""]=e,l),o,a,n,"",[])}}if(!t("json-parse")){var N,D,J=String.fromCharCode,M={92:"\\",34:'"',47:"/",98:"\b",116:"	",110:"\n",102:"\f",114:"\r"},k=function(){throw N=D=null,SyntaxError()},m=function(){for(var e,t,r,n,o,c=D,a=c.length;a>N;)switch(o=c.charCodeAt(N)){case 9:case 10:case 13:case 32:N++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=v?c.charAt(N):c[N],N++,e;case 34:for(e="@",N++;a>N;)if(o=c.charCodeAt(N),32>o)k();else if(92==o)switch(o=c.charCodeAt(++N)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=M[o],N++;break;case 117:for(t=++N,r=N+4;r>N;N++)o=c.charCodeAt(N),o>=48&&57>=o||o>=97&&102>=o||o>=65&&70>=o||k();e+=J("0x"+c.slice(t,N));break;default:k()}else{if(34==o)break;for(o=c.charCodeAt(N),t=N;o>=32&&92!=o&&34!=o;)o=c.charCodeAt(++N);e+=c.slice(t,N)}if(34==c.charCodeAt(N))return N++,e;k();default:if(t=N,45==o&&(n=!0,o=c.charCodeAt(++N)),o>=48&&57>=o){for(48==o&&(o=c.charCodeAt(N+1),o>=48&&57>=o)&&k(),n=!1;a>N&&(o=c.charCodeAt(N),o>=48&&57>=o);N++);if(46==c.charCodeAt(N)){for(r=++N;a>r&&(o=c.charCodeAt(r),o>=48&&57>=o);r++);r==N&&k(),N=r}if(o=c.charCodeAt(N),101==o||69==o){for(o=c.charCodeAt(++N),(43==o||45==o)&&N++,r=N;a>r&&(o=c.charCodeAt(r),o>=48&&57>=o);r++);r==N&&k(),N=r}return+c.slice(t,N)}if(n&&k(),"true"==c.slice(N,N+4))return N+=4,!0;if("false"==c.slice(N,N+5))return N+=5,!1;if("null"==c.slice(N,N+4))return N+=4,null;k()}return"$"},P=function(e){var t,r;if("$"==e&&k(),"string"==typeof e){if("@"==(v?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];e=m(),"]"!=e;r||(r=!0))r&&(","==e?(e=m(),"]"==e&&k()):k()),","==e&&k(),t.push(P(e));return t}if("{"==e){for(t={};e=m(),"}"!=e;r||(r=!0))r&&(","==e?(e=m(),"}"==e&&k()):k()),(","==e||"string"!=typeof e||"@"!=(v?e.charAt(0):e[0])||":"!=m())&&k(),t[e.slice(1)]=P(m());return t}k()}return e},Z=function(e,t,r){var n=E(e,t,r);n===o?delete e[t]:e[t]=n},E=function(e,t,r){var o,a=e[t];if("object"==typeof a&&a)if(c.call(a)==y)for(o=a.length;o--;)Z(a,o,r);else n(a,function(e){Z(a,e,r)});return r.call(e,t,a)};l.parse=function(e,t){var r,n;return N=0,D=""+e,r=P(m()),"$"!=m()&&k(),N=D=null,t&&c.call(t)==u?E((n={},n[""]=r,n),"",t):r}}}a&&define(function(){return l})}(this);


},{}],159:[function(require,module,exports){
  function toArray(r,o){var t=[];o=o||0;for(var a=o||0;a<r.length;a++)t[a-o]=r[a];return t}module.exports=toArray;


},{}],160:[function(require,module,exports){
  "use strict";function DashMapGenerator(){var e=function(e,s){0;var r,i=e.profiles;switch(i.name){case"isoff-on-demand":r=new ProfileOnDemand(s);break;case"isoff-live":r=new ProfileLiveFull(s);break;case"isoff-main":r=new ProfileMain(s);break;default:0,r=new ProfileMain(s)}var n=e.getMap(r);return n.profile=i,n.location=e.location,n},s=function(e,s){var r=-1,i=!1;if(s&&s.length)for(var n=s[s.length-1].id,o=e.length-1;o>=0;o--){if(e[o].id===n){i=!0;break}r=o}else r=0;return{minIndex:r,minIndexFound:i}},r=function(e,r,i){for(var n={periods:[]},o=0;o<r.periods.length;o++){for(var a={asets:[]},t=0;t<r.periods[o].asets.length;t++){for(var l={reps:[]},p=0;p<r.periods[o].asets[t].reps.length;p++){var d={},f=new ProfileLiveFull(i),m=f.getSegments(e,e.periods[o],e.periods[o].adaptationSets[t],e.periods[o].adaptationSets[t].representations[p]),u=s(m.segments,r.periods[o].asets[t].reps[p].segments),g=u.minIndex,h=u.minIndexFound,P=m.segments.slice(0);d.segments=h&&g>-1?P.splice(g):[],l.reps.push(d);for(var c=r.periods[o].asets[t].reps[p].segments.length,v=0;c>v&&r.periods[o].asets[t].reps[p].segments[0].id!==m.segments[0].id;v++)r.periods[o].asets[t].reps[p].segments.splice(0,1);for(var M=m.segments.length,D=0;M>D;D++)r.periods[o].asets[t].reps[p].segments[D]||r.periods[o].asets[t].reps[p].segments.push(m.segments[D])}a.asets.push(l)}return n.periods.push(a),{map:r,mapAddToP2P:n}}};this.createMapDash=e,this.updateMapDash=r,this._calcMinIndexes=s}var _=require("lodash"),ProfileOnDemand=require("./MPDProfiles/ProfileOnDemand"),ProfileLiveFull=require("./MPDProfiles/ProfileLiveFull"),ProfileMain=require("./MPDProfiles/ProfileMain");module.exports=DashMapGenerator;


},{"./MPDProfiles/ProfileLiveFull":163,"./MPDProfiles/ProfileMain":164,"./MPDProfiles/ProfileOnDemand":165,"lodash":183}],161:[function(require,module,exports){
  "use strict";var conf=require("./conf"),Downloader=require("streamroot-downloader").Downloader,utils=require("./utils/utils"),m3u8=require("streamroot-m3u8"),Stream=require("stream"),AesKeysHelper=require("./utils/AesKeysHelper"),downloader=new Downloader,HlsMapGenerator=function(){var e=new AesKeysHelper,t=function(e){var t=e.items.StreamItem.length,r=e.items.PlaylistItem.length,s=e.items.MediaItem.length,i=e.items.IframeStreamItem.length;return 0!==t&&0===r&&0===s&&0===i},r=function(e){var t=e.items.StreamItem.length,r=e.items.PlaylistItem.length,s=e.items.MediaItem.length,i=e.items.IframeStreamItem.length;return 0!==r&&0===t&&0===s&&0===i},s=function(t,r,s,i){var n,a,u=s.attributes.get("resolution"),o=0,l=t.items.PlaylistItem;u&&u.length&&u.length>=2&&(n=u[0],a=u[1]);var m={bandwidth:s.attributes.get("bandwidth")||2e5,width:n,height:a,fourCC:null,codecs:null,init:null,mime:null,hasSegmentHashes:!1,segments:[]},p=t.get("mediaSequence")||0;t.properties.liveCutOffset&&(p+=t.properties.liveCutOffset);for(var d=0;d<l.length;d++){var f=l[d],c={time:o,duration:f.properties.duration,url:utils.absURL(r,f.properties.uri)};c.id=p+d;var v=f.get("key");v&&(c.parserKey=v),o+=c.duration,m.segments.push(c)}utils.asyncMap(m.segments,function(t,s,i){if(t.parserKey)switch(t.parserKey.method){case"AES-128":t.key={},t.key.method=t.parserKey.method,t.key.url=utils.absURL(r,t.parserKey.url),t.parserKey.iv?t.key.iv=t.parserKey.iv:t.key.iv=e.getIV(t.id),delete t.parserKey,e.getAESKey(t.key.url,function(e,r){e?i(e):(t.key.aesKey=r,i())});break;case"NONE":delete t.parserKey,i();break;default:i(new Error("Unsupported encryption method"))}else i()},function(e){i(e,m)})},i=function(e,t){var r,s=-1;do r=s,s=e.indexOf("#EXT-X-KEY",s+1);while(-1!=s&&t>s);if(-1!=r){var i=e.indexOf("\n");return e.substring(r,i+1)}},n=function(e,t){var r=t.indexOf("#EXTINF",e);return{index:r,payloadText:t.substr(r)}},a=function(e){return function(t,a,u){var l=t.url,m=t.streamItem,p={url:l,responseType:"text"};downloader.getURL(p,function(t,a){if(t)return t.message="Could not retrieve manifest || Previous error: "+t.message,void u(t);var l=m3u8.createStream();l.on("m3u",function(t){r(t)&&(o(t,e),s(t,p.url,m,u))});var d=new Stream.Readable,f=a.response;if(f.indexOf("#EXT-X-ENDLIST")>-1||f.indexOf("#EXT-X-PLAYLIST-TYPE:VOD")>-1);else if(conf.PLAYLIST_HLS_KEEP_LAST_LINES){var c=f.substring(0,f.indexOf("#EXTINF")),v=utils.occurrences(f,"\n"),h=utils.occurrences(c,"\n"),g=v-h,y=Math.max(0,g-conf.PLAYLIST_HLS_KEEP_LAST_LINES),L=utils.nthChar(f,"\n",h+y-1),S=n(L,f);L=S.index;var I=utils.occurrences(f,"#EXTINF",L),T=S.payloadText,E=i(f,L)||"";f=c+E+T,l.m3u.properties.liveCutOffset=I}d.push(f),d.push(null),d.pipe(l)})}},u=function(e,i,n,u,l,m){if(t(e)){for(var p,d=[],f=0;f<e.items.StreamItem.length;f++){p=e.items.StreamItem[f];var c={streamItem:p,url:utils.absURL(i,p.properties.uri)};d.push(c)}m.m3u=e,utils.asyncMap(d,a(m),function(e,t){e?n(e):(m.periods[0].asets[0].reps=t,u(m,n))})}else if(r(e)){var v=[{attributes:{}}];v.get=function(){};var h={attributes:v,properties:{}};o(e,m),s(e,i,h,function(e,t){e?n(e):(m.periods[0].asets[0].reps=[t],l(m,n))})}},o=function(e,t){var r=t.isLive;"VOD"===e.get("playlistType")?t.isLive=!1:t.isLive=!0;var s=void 0===r||r&&t.isLive||!r&&!t.isLive;s===!1&&0},l=function(e,t,r){function s(e,t){if(e.isLive===!1){for(var r,s=0,i=0;r=e.periods[0].asets[0].reps[0].segments[i];i++)s+=r.duration;e.periods[0].duration=s}t(null,e)}var i={periods:[{asets:[{reps:[]}]}]},n=m3u8.createStream(),a=new Stream.Readable;a.push(e),a.push(null),n.on("m3u",function(e){i.isLive=void 0,u(e,t,r,s,s,i)}),a.pipe(n)},m=function(e,t){for(var r=e.segments.length,s=0;r>s&&e.segments[0].url!==t.segments[0].url;s++)e.segments.splice(0,1);for(var i=t.segments.length,n=e.segments.length;i>n;n++){var a=e.segments.length;0===a?e.segments.push(t.segments[n]):(t.segments[n].time=e.segments[a-1].time+e.segments[a-1].duration,e.segments.push(t.segments[n]))}return e},p=function(e,t){for(var r=0;r<e.periods[0].asets.length;r++)for(var s=0;s<e.periods[0].asets[r].reps.length;s++){var i=e.periods[0].asets[r].reps[s],n=t.periods[0].asets[r].reps[s];e.periods[0].asets[r].reps[s]=m(i,n)}return e},d=function(e,t,r){function s(t,r){t=p(e,t),r(null,{map:t,mapAddToP2P:t})}function i(e,t){t(new Error("This function should never be called"))}var n=e.m3u,a={periods:[{asets:[{reps:[]}]}],isLive:e.isLive};u(n,t,r,s,i,a)},f=function(e,t,r,s){function i(e,t){t(new Error("This function should never be called"))}function n(e,r){e=p(t,e),r(null,{map:e,mapAddToP2P:e})}var a={periods:[{asets:[{reps:[]}]}],isLive:t.isLive},o=m3u8.createStream(),l=new Stream.Readable;l.push(e),l.push(null),o.on("m3u",function(e){a.isLive=void 0,u(e,r,s,i,n,a)}),l.pipe(o)};this.updateMapMasterPlaylist=d,this.updateMapMediaPlaylist=f,this.createMapHls=l};module.exports=HlsMapGenerator;


},{"./conf":177,"./utils/AesKeysHelper":178,"./utils/utils":182,"stream":101,"streamroot-downloader":245,"streamroot-m3u8":260}],162:[function(require,module,exports){
  "use strict";var JSPack=require("./utils/jspack"),Long=require("./utils/long"),InitializationBuilder=function(){var e=new Date,t=2082844800+Math.floor(e.getTime()/1e3),a=Long.fromNumber(t,!0),n=a,c={audio:2,video:2,text:0},i=1,L=3,o=new JSPack,s=0,d=function(e){for(var t=[],a=0;a<e.length;a+=2)t.push(parseInt(e.substr(a,2),16));return new Uint8Array(t)},l=function(e){e=r(e);for(var t,a,n,c,i,L,s,d,l,g,h={audio:[],video:[]},P=32,k=o.Pack(">L4s4sL4s4s4s4s",[P,"ftyp","isom",1,"isom","avc1","mp42","dash"]),H=B(e),f=v(e),p=m(e),A=0;A<e.AudioQualityLevels;A++)t=u("audio",e,A),a=8+H.length+t.length+f.length,n=o.Pack(">L4s",[a,"moov"]),c=n.concat(H,f,t),i=new Uint8Array(k.concat(c)),h.audio.push(i);for(A=0;A<e.VideoQualityLevels;A++)L=u("video",e,A),s=8+H.length+L.length+p.length,d=o.Pack(">L4s",[s,"moov"]),l=d.concat(H,p,L),g=new Uint8Array(k.concat(l)),h.video.push(g);return h},r=function(e){var t,a,n,c,i,L,o=null;e.TimeScale=e.TimeScale||1e7,e.SamplingRate=[],e.Bitrate=[],e.AACL=[],e.acodec=[];for(var s=0;s<e.StreamIndex.length;s++)if(o=e.StreamIndex[s],"video"==o.Type){e.VideoQualityLevels=o.QualityLevel.length,e.MaxHeight=[],e.MaxWidth=[],e.sequenceParameterSetNALUnit=[],e.pictureParameterSetNALUnit=[],t=0;for(var d=0;d<e.VideoQualityLevels;d++){if(a=o.QualityLevel[d],n=a.FourCC,c=a.CodecPrivateData,e.vcodec=n,e.MaxHeight.push(a.MaxHeight),e.MaxWidth.push(a.MaxWidth),"AVC1"==n||"H264"==n||"X264"==n||"DAVC"==n){var l=c.split("00000001");e.sequenceParameterSetNALUnit.push(l[1]),e.pictureParameterSetNALUnit.push(l[2]),e.vcodec="H264"}t++}(null===e.VideoQualityLevels||void 0===e.VideoQualityLevels||isNaN(e.VideoQualityLevels))&&(e.VideoQualityLevels=t)}else if("audio"==o.Type){e.AudioQualityLevels=o.QualityLevel.length,t=0;for(var d=0;d<e.AudioQualityLevels;d++)a=o.QualityLevel[d],n=a.FourCC,c=a.CodecPrivateData,i=a.SamplingRate,L=a.Bitrate,e.acodec.push(n),e.SamplingRate.push(i),e.Bitrate.push(L),e.AACL.push(c),t++;(null===e.AudioQualityLevels||void 0===e.AudioQualityLevels||isNaN(e.AudioQualityLevels))&&(e.AudioQualityLevels=t)}return e},u=function(e,t,L){var s,d,l,r,u,h,P,k,v,m,B,H,f,p,A=t.Duration,U=[65536,0,0,0,65536,0,0,0,1073741824],y=t.TimeScale,x=g(e,L,t),Q=45,S=o.Pack(">L4sL",[Q,"hdlr",0]),C="";return A=Long.fromNumber(A,!0),s="audio"==e?256:0,"video"==e?(d=t.MaxWidth[L],d<<=16,l=t.MaxHeight[L],l<<=16):(d=0,l=0),1===i?(r=104,u=o.Pack(">L4sL",[r,"tkhd",16777223]),u=u.concat(o.Pack(">LLLLLLLL",[a.getHighBitsUnsigned(),a.getLowBitsUnsigned(),n.getHighBitsUnsigned(),n.getLowBitsUnsigned(),c[e],0,A.getHighBitsUnsigned(),A.getLowBitsUnsigned()]))):0===i&&(r=92,u=o.Pack(">L4sL",[r,"tkhd",7]),u=u.concat(o.Pack(">LLLLL",[a,n,c[e],0,A]))),u=u.concat(o.Pack(">dhhhH9l",[0,0,0,s,0].concat(U)),o.Pack(">LL",[d,l])),1===i?(h=o.Pack(">L4sL",[44,"mdhd",16777216]),h=h.concat(o.Pack(">LLLLLLL",[a.getHighBitsUnsigned(),a.getLowBitsUnsigned(),n.getHighBitsUnsigned(),n.getLowBitsUnsigned(),y,A.getHighBitsUnsigned(),A.getLowBitsUnsigned()]))):0===i&&(h=o.Pack(">L4sL",[32,"mdhd",0]),h=h.concat(o.Pack(">LLLL",[a,n,y,A]))),h=h.concat(o.Pack(">HH",[21956,0])),"video"==e?(P="VideoHandler",k="vide"):"audio"==e?(P="AudioHandler",k="soun"):(P="Undfd",k="ndfd"),S=S.concat(o.Pack(">L4s3L12sB",[0,k,0,0,0,P,0])),v=8+h.length+S.length+x.length,m=o.Pack(">L4s",[v,"mdia"]),B=8+r+C.length+v,H=o.Pack(">L4s",[B,"trak"]),f=m.concat(h,S,x),p=H.concat(u,f)},g=function(e,t,a){var n,c,i,L,s,d,l,r=o.Pack(">L4sLd",[20,"vmhd",1,0]),u=o.Pack(">L4sLhH",[16,"smhd",0,0,0]),g=o.Pack(">L4sL",[20,"nmhd",0]);return"video"==e?n=r:"audio"==e?n=u:"metad"==e&&(n=g),c=36,i=o.Pack(">L4sL4sL",[c,"dinf",28,"dref",0]),i=i.concat(o.Pack(">LL4sL",[1,12,"url ",1])),L=h(e,t,a),s=8+n.length+c+L.length,d=o.Pack(">L4s",[s,"minf"]),l=d.concat(n,i,L)},h=function(e,t,a){var n,c,i,L,d,l,r,u,g,h,v,m,B,H,f,p,A,U,y=o.Pack(">L4sLL",[16,"stts",0,0]),x=o.Pack(">L4sLL",[16,"stsc",0,0]),Q=o.Pack(">L4sLL",[16,"stco",0,0]),S=o.Pack(">L4sLLL",[20,"stsz",0,0,0]);return"video"===e?("H264"==a.vcodec?(n="avc1",c=k(t,a)):"WVC1"==a.vcodec&&0,d=86+c.length,l=a.MaxWidth[t],r=a.MaxHeight[t],u=4718592,g=4718592,h="\fVideoHandler",v=24,B=o.Pack(">L4sLHH",[d,n,0,0,1]),B=B.concat(o.Pack(">ddHH",[0,0,l,r]),o.Pack(">LL",[u,g]),o.Pack(">LH32sHh",[0,1,h,v,-1]),c)):"audio"==e&&("AACL"==a.acodec[s]?(i="mp4a",L=P(a)):"WMAP"==a.acodec[s]&&0,d=36+L.length,m=48e3<<16,B=o.Pack(">L4sLHH",[d,i,0,0,1]),B=B.concat(o.Pack(">dHHLL",[0,2,16,0,m]),L)),H=16+B.length,f=o.Pack(">L4sLL",[H,"stsd",0,1]),f=f.concat(B),p=8+f.length+S.length+x.length+y.length+Q.length,A=o.Pack(">L4s",[p,"stbl"]),U=A.concat(f,S,x,y,Q)},P=function(e){var t,a,n,c,i,L,l,r,u,g,h,P,k,v,m,B,H,f,p=e.AACL[s];return""===p&&(p="1210"),p=d(p),t=3,a=2155905024+p.length+18+8,n=0,c=0,i=o.Pack(">BLHB",[t,a,n,c]),t=4,a=2155905024+p.length+18,L=64,l=21,r=[0,48,0],u=128e3,g=128e3,h=o.Pack(">BLBB3B",[t,a,L,l].concat(r)),h=h.concat(o.Pack(">LL",[u,g])),t=5,a=2155905024+p.length,P=o.Pack(">BL",[t,a]),k=o.Pack(">3H",[1664,32896,258]),v=12+i.length+h.length+P.length+p.length+k.length,m=o.Pack(">L4sL",[v,"esds",0]),0!==p.length?(B=">"+p.length+"B",H=o.Pack(B,p),f=m.concat(i,h,P,H,k)):f=m.concat(i,h,P,k),f},k=function(e,t){var a,n,c,i,L,s,l,r,u,g,h=t.sequenceParameterSetNALUnit[e],P=t.pictureParameterSetNALUnit[e],k=3,v=1,m=1;return h=d(h),P=d(P),a=h.length,n=P.length,c=h[1],i=h[2],L=h[3],s=o.Pack(">BBBB",[1,c,i,L]),s=s.concat(o.Pack(">BB",[252+k,224+v])),s=s.concat(o.Pack(">H",[a])),l=">"+a+"B",s=s.concat(o.Pack(l,h)),s=s.concat(o.Pack(">B",[m])),s=s.concat(o.Pack(">H",[n])),l=">"+n+"B",s=s.concat(o.Pack(l,P)),r=8+s.length,u=o.Pack(">L4s",[r,"avcC"]),g=u.concat(s)},v=function(){var e=40,t=o.Pack(">L4s",[e,"mvex"]),a=o.Pack(">L4sLLLLLL",[32,"trex",0,2,1,1,1,0]),n=t.concat(a);return n},m=function(){var e=40,t=o.Pack(">L4s",[e,"mvex"]),a=o.Pack(">L4sLLLLLL",[32,"trex",0,2,1,1,1,0]),n=t.concat(a);return n},B=function(e){var t,c,s=e.TimeScale,d=e.Duration,l=65536,r=256,u=0,g=0,h=[65536,0,0,0,65536,0,0,0,1073741824],P=[0,0,0,0,0,0];return d=Long.fromNumber(d,!0),1===i?(t=120,c=o.Pack(">L4sL",[t,"mvhd",16777216]),c=c.concat(o.Pack(">LLLLLLL",[a.getHighBitsUnsigned(),a.getLowBitsUnsigned(),n.getHighBitsUnsigned(),n.getLowBitsUnsigned(),s,d.getHighBitsUnsigned(),d.getLowBitsUnsigned()]))):0===i&&(t=108,c=o.Pack(">L4sL",[t,"mvhd",0]),c=c.concat(o.Pack(">LLLL",[a,n,s,d]))),c=c.concat(o.Pack(">LHHd9L",[l,r,u,g].concat(h)),o.Pack(">6L",P),o.Pack(">L",[L]))};this.buildInits=l};module.exports=InitializationBuilder;


},{"./utils/jspack":180,"./utils/long":181}],163:[function(require,module,exports){
  "use strict";var SegmentList=require("../MediaPresentation/SegmentList"),SegmentBase=require("../MediaPresentation/SegmentBase"),SegmentTemplate=require("../MediaPresentation/SegmentTemplate"),ProfileLiveFull=function(e){this.url_mpd=e,this.map={periods:[]};var t=function(e,t,s,n){var m;if(n.segmentBase){0;var a=new SegmentBase(n.segmentBase,this.url_mpd);m=a.getSegments(n)}else if(n.segmentList){0;var i=new SegmentList(n,this.url_mpd);m=i.getSegments()}else if(s.segmentTemplate||n.segmentTemplate){var l=t.baseURLs.length?t.baseURLs[0]:"",r=n.segmentTemplate?n.segmentTemplate:s.segmentTemplate,g=new SegmentTemplate(r,this.url_mpd);m=g.getSegments(e,t,n,l)}return m};this.getSegments=t};module.exports=ProfileLiveFull;


},{"../MediaPresentation/SegmentBase":171,"../MediaPresentation/SegmentList":172,"../MediaPresentation/SegmentTemplate":173}],164:[function(require,module,exports){
  "use strict";var utils=require("../utils/utils"),SegmentList=require("../MediaPresentation/SegmentList"),SegmentBase=require("../MediaPresentation/SegmentBase"),SegmentTemplate=require("../MediaPresentation/SegmentTemplate"),ProfileMain=function(e){this.url_mpd=e,this.map={periods:[]};var t=function(e,t,s,n){var m;if(n.segmentBase){var i=new SegmentBase(n.segmentBase,this.url_mpd);m=i.getSegments(n)}else if(n.segmentList){var a=new SegmentList(n,this.url_mpd);m=a.getSegments()}else if(s.segmentTemplate||n.segmentTemplate){var r=t.baseURLs.length?t.baseURLs[0]:"",g=n.segmentTemplate?n.segmentTemplate:s.segmentTemplate,l=new SegmentTemplate(g,this.url_mpd);m=l.getSegments(e,t,n,r)}return m};this.getSegments=t};module.exports=ProfileMain;


},{"../MediaPresentation/SegmentBase":171,"../MediaPresentation/SegmentList":172,"../MediaPresentation/SegmentTemplate":173,"../utils/utils":182}],165:[function(require,module,exports){
  "use strict";var SegmentList=require("../MediaPresentation/SegmentList"),SegmentBase=require("../MediaPresentation/SegmentBase"),SegmentTemplate=require("../MediaPresentation/SegmentTemplate"),ProfileOnDemand=function(e){this.url_mpd=e,this.map={periods:[]};var t=function(e,t,n,s){var m;if(s.segmentBase){var a=new SegmentBase(s.segmentBase,this.url_mpd);m=a.getSegments(s)}else if(s.segmentList){0;var i=new SegmentList(s,this.url_mpd);m=i.getSegments()}else if(n.segmentTemplate||s.segmentTemplate){0,e.profiles.name="main";var r=t.baseURLs.length?t.baseURLs[0]:"",l=s.segmentTemplate?s.segmentTemplate:n.segmentTemplate,g=new SegmentTemplate(l,this.url_mpd);m=g.getSegments(e,t,s,r)}return m};this.getSegments=t};module.exports=ProfileOnDemand;


},{"../MediaPresentation/SegmentBase":171,"../MediaPresentation/SegmentList":172,"../MediaPresentation/SegmentTemplate":173}],166:[function(require,module,exports){
  "use strict";function MapGenerator(e){var r=new SmoothMapGenerator,a=new HlsMapGenerator,n=new DashMapGenerator,t=new ParseMPD,o=new ParseSmooth,s=function(e,r,n){var t;t="undefined"!=typeof window?window.location.protocol:"http:",e=e.replace(/^\/\//,t+"//"),null===r?downloader.getURL({url:e,responseType:"text"},function(r,a){return r?(r.message="Could not retrieve manifest Â«"+e+"Â» || Previous error: "+r.message,n(r)):void i(a.response,e,n)}):r.m3u?a.updateMapMasterPlaylist(r,e,n):downloader.getURL({url:e,responseType:"text"},function(a,t){return a?(a.message="Could not retrieve manifest Â«"+e+"Â» || Previous error: "+a.message,n(a)):void d(t.response,r,e,n)})},i=function(e,s,i){var d,u,f;try{d=l(e),f=m(e)}catch(h){return h.message="Unable to parse manifest Â«"+s+"Â» and create map || PREVIOUS ERROR: "+h.message,i(h)}if("hls"===f)a.createMapHls(e,s,function(e,r){return e?(e.message("Unable to parse manifest Â«"+s+"Â» and create map || PREVIOUS ERROR: "+e.message),i(e)):void p(r,f,i,null)});else{if("dash"===f){var c=t.parser(d);u=n.createMapDash(c,s)}else{if("smooth"!==f)return i(new Error("Unable to parse manifest Â«"+s+"Â» and create map || PREVIOUS ERROR: Unknown streaming format: "+f.toString()));var g=o.parser(d);u=r.createMapSmooth(g,s)}p(u,f,i,null)}},p=function(e,r,a,n){if(n){var t=e.periods[n.pptes.rep.id_period].asets[n.pptes.rep.id_aset].reps[n.pptes.rep.id_rep];if(t.init.value=n.response,"isoff-on-demand"==e.profile.name){try{t.segments=t.segments.concat(ISOBMFF.parseSIDX(n.response))}catch(o){return o.message="Unable to parse manifest and create map || PREVIOUS ERROR: "+o.message,a(o)}for(var s=0;s<t.segments.length;s++)t.segments[s].id=s}}for(var i,d=0;i=e.periods[d];d++)for(var l,m=0;l=i.asets[m];m++)for(var u,f=0;u=l.reps[f];f++){var h;if(u.init&&!u.init.value)return h="isoff-on-demand"==e.profile.name?{start:u.init.start,end:u.init.end}:"isoff-on-demand"==e.profile.name&&u.init.start&&u.init.end?{start:u.init.start,end:u.init.end}:null,void downloader.getURL({url:u.init.url,responseType:"arraybuffer",range:h,pptes:{rep:{id_period:d,id_aset:m,id_rep:f}}},function(n,t){n?a(n):p(e,r,a,t)})}a(null,{map:e,type:r})},d=function(e,s,i,p){var d=l(e),u=m(e);if("dash"===u){var f=t.parser(d);p(null,n.updateMapDash(f,s,i))}else if("smooth"===u){var h=o.parser(d);p(null,r.updateMapSmooth(h,s,i))}else{if("hls"!==u)return;a.updateMapMediaPlaylist(e,s,i,p)}},l=function(e){var r=new DomParser,a=r.parseFromString(e,"application/xml");return a},m=function(e){var r="#EXTM3U";if(e.slice(0,r.length)===r)return"hls";for(var a=l(e),n=[],t=0;t<a.childNodes.length;t++)"MPD"==a.childNodes[t].nodeName?n.push("dash"):"SmoothStreamingMedia"==a.childNodes[t].nodeName&&n.push("smooth");if(0===n.length)throw new Error("no relevant nodes detected for streaming format determination");if(n.length>1)throw new Error("too many nodes detected for streaming format determination");return n[0]},u=function(){for(var r in e)internalConf[r]=e[r]};u(),this.getMap=s}var DomParser=require("xmldom").DOMParser,ParseMPD=require("./Parser/MPDParser"),ParseSmooth=require("./Parser/SmoothParser"),DashMapGenerator=require("./DashMapGenerator"),SmoothMapGenerator=require("./SmoothMapGenerator"),HlsMapGenerator=require("./HlsMapGenerator"),Downloader=require("streamroot-downloader").Downloader,ISOBMFF=require("./utils/isobmffManager"),internalConf=require("./conf"),downloader=new Downloader;module.exports=MapGenerator;


},{"./DashMapGenerator":160,"./HlsMapGenerator":161,"./Parser/MPDParser":174,"./Parser/SmoothParser":175,"./SmoothMapGenerator":176,"./conf":177,"./utils/isobmffManager":179,"streamroot-downloader":245,"xmldom":261}],167:[function(require,module,exports){
  "use strict";var AdaptationSet=function(){this.contentProtection=null,this.segmentBase=null,this.segmentList=null,this.segmentTemplate=null,this.baseURLs=[],this.representations=[];var e=function(e,t,s){var i,n,a={};a.reps=[],this.lang&&(a.lang=this.lang),this.mimeType&&(a.type=this.mimeType.slice(0,this.mimeType.lastIndexOf("/"))),n=this.representations.length;for(var l=0;n>l;l++)i=this.representations[l],i.mimeType&&(a.type=i.mimeType.slice(0,i.mimeType.lastIndexOf("/"))),a.lang||i.lang&&(a.lang=i.lang),a.reps.push(i.getMap(l,e,t,s,this));return a};this.getMap=e};module.exports=AdaptationSet;


},{}],168:[function(require,module,exports){
  "use strict";var MPD=function(){this.baseURLs=[],this.location=null,this.mediaPresentationDuration=null,this.minBufferTime=null,this.periods=[],this.profiles={};var i=function(i){var t,e,r={};r.minBufferTime=this.minBufferTime,r.isLive="dynamic"===this.type,r.periods=[],e=this.periods.length;for(var s=0;e>s;s++)t=this.periods[s],t.duration||(t.duration=this.mediaPresentationDuration,e>1&&0),r.periods.push(t.getMap(i,this));return r};this.getMap=i};module.exports=MPD;


},{}],169:[function(require,module,exports){
  "use strict";var Period=function(){this.contentProtection=null,this.duration=null,this.id=null,this.segmentBase=null,this.segmentList=null,this.segmentTemplate=null,this.baseURLs=[],this.adaptationSets=[];var t=function(t,e){var s,i,a={};a.duration=this.duration||e.mediaPresentationDuration,a.decodeTimeOffset=0,a.playbackOffset=0,a.asets=[],i=this.adaptationSets.length;for(var n=0;i>n;n++)s=this.adaptationSets[n],a.asets.push(s.getMap(t,e,this));return a};this.getMap=t};module.exports=Period;


},{}],170:[function(require,module,exports){
  "use strict";var Representation=function(){this.id=null,this.mimeType=null,this.bandwidth=null,this.codecs=null,this.contentProtection=null,this.frameRate=null,this.height=null,this.width=null,this.segmentBase=null,this.segmentList=null,this.baseURLs=[];var e=function(e,t,i,s,n){var h,l={};return l.bandwidth=this.bandwidth,l.mime=this.mimeType||n.mimeType,l.id_rep=e,l.type=l.mime.slice(0,l.mime.lastIndexOf("/")),l.codecs=this.codecs||n.codecs,l.width=this.width||n.width,l.height=this.height||n.height,l.codecs&&(l.codecs=l.codecs.replace(/0x/,"")),"unknown"==l.codecs&&(l.codecs="mp4a.40.2"),h=t.getSegments(i,s,n,this),l.segments=h.segments,l.init=h.init,l.url=h.url,l};this.getMap=e};module.exports=Representation;


},{}],171:[function(require,module,exports){
  "use strict";var utils=require("../utils/utils"),SegmentBase=function(i,t){this.url_mpd=t,this.timescale=i.timescale||1,this.representationTimeOffset=i.representationTimeOffset||0,this.indexRange=i.indexRange,this.indexRangeExact=i.indexRangeExact||!1,this.initialization=i.initialization;var e=function(i){var t={segments:[],init:{url:utils.absURL(this.url_mpd,i.baseURLs[0]),start:this.initialization&&this.initialization.start||0,end:this.indexRange.end||this.initialization&&this.initialization.end,value:null},url:utils.absURL(this.url_mpd,i.baseURLs[0])};return t};this.getSegments=e};module.exports=SegmentBase;


},{"../utils/utils":182}],172:[function(require,module,exports){
  "use strict";var utils=require("../utils/utils"),SegmentList=function(t,e){var s=function(t,e){for(var s=0;s<e.segmentList.segmentURLs.length;s++)void 0===t[s].media&&(t[s].media=e.baseURLs[0]);return t},i=function(){for(var t=0,e={segments:[]},s=0;s<this.segmentList.segmentURLs.length;s++){var i={url:utils.absURL(this.url_mpd,this.segmentList.segmentURLs[s].media),duration:this.segmentList.timescale&&this.segmentList.duration/this.segmentList.timescale||this.segmentList.duration,time:t,start:this.segmentList.segmentURLs[s].mediaRange?this.segmentList.segmentURLs[s].mediaRange.start:0,end:this.segmentList.segmentURLs[s].mediaRange?this.segmentList.segmentURLs[s].mediaRange.end:void 0,size:this.segmentList.segmentURLs[s].mediaRange?this.segmentList.segmentURLs[s].mediaRange.length:void 0,id:s};e.segments.push(i),t+=i.duration}return e.init={url:utils.absURL(this.url_mpd,this.segmentList.initialization),start:this.segmentList.initialization.start,end:this.segmentList.initialization.end,value:null},e};t.segmentList.segmentURLs=s(t.segmentList.segmentURLs,t),this.segmentList=t.segmentList,this.url_mpd=e,this.getSegments=i};module.exports=SegmentList;


},{"../utils/utils":182}],173:[function(require,module,exports){
  "use strict";var utils=require("../utils/utils"),SegmentTemplate=function(t,e){this.timescale=t?t.timescale:null,this.duration=t?t.duration:null,this.media=t?t.media:null,this.startNumber=t?t.startNumber:null,this.presentationTimeOffset=t?t.presentationTimeOffset:null,this.initialization=t?t.initialization:null,this.segmentTimeline=t?t.segmentTimeline:null,this.url_mpd=e;var i=function(t){if(null===t)return"Null template. Cannot merge.";for(var e in this)this.hasOwnProperty(e)&&(null===this[e]||void 0===this[e])&&(this[e]=t[e])},s=function(t,e,i,s){var a,n,r={segments:[]},l=i.bandwidth,m=0;if(this.segmentTimeline){var u;for(a=0;a<this.segmentTimeline.segments.length;a++){var h=this.segmentTimeline.segments[a];h.r||(h.r=0),(h.t||0===h.t)&&(u=h.t);for(var d=0;d<=h.r;d++)n={url:utils.absURL(this.url_mpd,s+this.media.replace("$RepresentationID$",i.id).replace("$Time$",u).replace("$Bandwidth$",l)),duration:h.d/this.timescale,time:u/this.timescale},n.id=t.isLive?Math.round(10*n.time):m,r.segments.push(n),u+=h.d,m++}}else{var o,p,c,g,$=this.startNumber||1,f=this.presentationTimeOffset||0;c=this.duration/this.timescale;var v=Date.now(),T=0;t.hasOwnProperty("suggestedPresentationDelay")&&(T=t.suggestedPresentationDelay),o=(v-t.availabilityStartTime)/1e3,o-=T,o-=T,p=Math.floor(o/c),$+=p,g=f/this.timescale+Math.floor(o);var b=g%c;if(g-=b,g-=c){var w=Math.floor(t.minimumUpdatePeriod/c);for(a=0;w>a;)n={url:utils.absURL(this.url_mpd,s+this.media.replace("$RepresentationID$",i.id).replace("$Number$",$).replace("$Bandwidth$",l)),duration:c,time:g},n.id=$,a++,r.segments.push(n),g+=n.duration,$++}else for($=this.startNumber||1,g=0,a=0;g<e.duration;)n={url:utils.absURL(this.url_mpd,s+this.media.replace("$RepresentationID$",i.id).replace("$Number$",$).replace("$Bandwidth$",l)),duration:this.timescale&&this.duration/this.timescale||this.duration,time:g},n.time+n.duration>e.duration&&(n.duration=e.duration-n.time),n.id=a,a++,r.segments.push(n),g+=n.duration,$++}return r.init={url:this.initialization&&utils.absURL(this.url_mpd,s+this.initialization.replace("$RepresentationID$",i.id).replace("$Bandwidth$",l))||r.segments[0].url,value:null},r};this.mergeTemplates=i,this.getSegments=s};module.exports=SegmentTemplate;


},{"../utils/utils":182}],174:[function(require,module,exports){
  "use strict";function ParseMPD(){var e=function(e){for(var t=0;t<e.childNodes.length;t++)if("MPD"==e.childNodes[t].nodeName)return C(e.childNodes[t])},t=function(e){return e},n=function(e){var t=/PT(([0-9]*)H)?(([0-9]*)M)?(([0-9.]*)S)?/,n=t.exec(e);return n?3600*parseFloat(n[2]||0)+60*parseFloat(n[4]||0)+parseFloat(n[6]||0):parseFloat(e)},r=function(e){var t=new Date(e).getTime();return t},a=function(e,t,n){var r=[];if(null===n)return r;for(var a=n.firstChild;null!==a;a=a.nextSibling)a.nodeName==e&&r.push(t(a));return r},i=function(e,t,n){return a(e,t,n)[0]||null},s=function(e,t,n){n=n||{};for(var r in e)"undefined"!=typeof t.attributes.getNamedItem(r)&&(n[r]=e[r](t.attributes.getNamedItem(r).value));return n},o=function(e){var t=/([0-9]+)(\/([0-9]+))?/.exec(e);return t?t[3]?parseFloat(t[1])/(parseFloat(t[3])||1):parseFloat(t[1]):1},u=function(e){var t=/([0-9]+)-([0-9]+)/.exec(e);if(!t)return null;var n=parseInt(t[1]),r=parseInt(t[2]);return{start:n,end:r,length:r-n+1}},m={media:t,mediaRange:u,index:t,indexRange:u},p=function(e){return s(m,e)},d=function(e){return e.textContent},l=function(e){return e.attributes.range?u(e.attributes.range.value):e.attributes?e.attributes[0].value:void 0},f={timescale:parseInt,duration:parseInt,indexRange:u,presentationTimeOffset:parseInt,startNumber:parseInt},c=function(e){var t=s(f,e);return t.initialization=i("Initialization",l,e),t},g=function(e){var t=c(e);return t.timescale&&t.duration?t.durationSeconds=t.duration/t.timescale:t.durationSeconds=t.duration,t.segmentURLs=a("SegmentURL",p,e),t},v=function(e){var t=e.attributes.schemeIdUri;if(!t||"http://youtube.com/drm/2012/10/10"!=t.textContent)return null;for(var n={},r=e.firstElementChild;"undefined"!=typeof r;r=r.nextElementSibling)if("yt:SystemURL"===r.nodeName){var a=r.attributes.type.textContent;n[a]=r.textContent}return n},S={id:parseInt,profiles:t,width:parseInt,height:parseInt,frameRate:o,audioSamplingRate:parseInt,mimeType:t,codecs:t},I=function(e,t){var n=s(S,e,t);return n.baseURLs=a("BaseURL",d,e),n.segmentBase=i("SegmentBase",c,e),n.segmentList=i("SegmentList",g,e),n.segmentTemplate=i("SegmentTemplate",h,e),n.contentProtection=i("ContentProtection",v,e),n},P={id:t,bandwidth:parseInt,qualityRanking:parseInt},T=function(e){var t=I(e,new Representation);return s(P,e,t),t},b={timescale:parseInt,duration:parseInt,media:t,startNumber:parseInt,presentationTimeOffset:parseInt,initialization:t},h=function(e){var t=s(b,e);return t.segmentTimeline=i("SegmentTimeline",R,e),t},R=function(e){var t={segments:a("S",y,e)};return t},x={t:parseInt,d:parseInt,r:parseInt},y=function(e){var t=s(x,e);return t},L={lang:t},M=function(e){var t=I(e,new AdaptationSet);s(L,e,t),t.segmentTemplate=i("SegmentTemplate",h,e),t.representations=a("Representation",T,e),t.segmentList=i("SegmentList",g,e);var n,r,o=t.representations.length;for(n=0;o>n;n++)r=t.representations[n],"undefined"!=typeof t.segmentTemplate&&(r.segmentTemplate=new SegmentTemplate(r.segmentTemplate),r.segmentTemplate.mergeTemplates(t.segmentTemplate));return t},D={id:parseInt,start:n,duration:n},N=function(e){var t=I(e,new Period);return s(D,e,t),t.adaptationSets=a("AdaptationSet",M,e),t},U=function(e){var t=e.split(":"),n=t.length,r={};return r.name=t[n-2],r.year=t[n-1],r},w=function(e){return e.textContent},C=function(e){var o=new MPD;return s({mediaPresentationDuration:n,type:t,minBufferTime:n,maxSegmentDuration:n,minimumUpdatePeriod:n,availabilityStartTime:r,suggestedPresentationDelay:n,profiles:U},e,o),o.periods=a("Period",N,e),o.baseURLs=a("BaseURL",d,e),o.location=i("Location",w,e),o.isLive="dynamic"===o.type,o};this.parser=e}var MPD=require("../MediaPresentation/MPD"),Period=require("../MediaPresentation/Period"),AdaptationSet=require("../MediaPresentation/AdaptationSet"),Representation=require("../MediaPresentation/Representation"),SegmentTemplate=require("../MediaPresentation/SegmentTemplate");module.exports=ParseMPD;


},{"../MediaPresentation/AdaptationSet":167,"../MediaPresentation/MPD":168,"../MediaPresentation/Period":169,"../MediaPresentation/Representation":170,"../MediaPresentation/SegmentTemplate":173}],175:[function(require,module,exports){
  "use strict";function ParseSmooth(){var t=function(t){for(var r=0;r<t.childNodes.length;r++)if("SmoothStreamingMedia"==t.childNodes[r].nodeName)return e(t.childNodes[r])},e=function(t){var e={};e.MajorVersion=parseInt(t.getAttribute("MajorVersion")),e.MinorVersion=parseInt(t.getAttribute("MinorVersion")),e.Duration=parseInt(t.getAttribute("Duration")),e.Timescale=parseInt(t.getAttribute("TimeScale")||t.getAttribute("Timescale")),(null===e.Timescale||void 0===e.Timescale)&&(e.Timescale=1e7),e.IsLive=t.getAttribute("IsLive"),e.LookaheadCount=t.getAttribute("LookaheadCount"),e.DVRWindowLength=t.getAttribute("DVRWindowLength"),e.StreamIndex=[];for(var i=t.getElementsByTagName("StreamIndex"),a=0;a<i.length;a++)e.StreamIndex[a]=r(i[a]);return e},r=function(t){var e={},r=t.getAttribute("Type");e.Type=r,e.Chunks=parseInt(t.getAttribute("Chunks")),e.QualityLevels=parseInt(t.getAttribute("QualityLevels")),e.Url=t.getAttribute("Url"),e.Timescale=parseInt(t.getAttribute("TimeScale")||t.getAttribute("Timescale")||"10000000"),e.Name=t.getAttribute("Name"),"video"==r?(e.MaxWidth=parseInt(t.getAttribute("MaxWidth")),e.MaxHeight=parseInt(t.getAttribute("MaxHeight")),e.DisplayWidth=parseInt(t.getAttribute("DisplayWidth")),e.DisplayHeight=parseInt(t.getAttribute("DisplayHeight")),e.Subtype=t.getAttribute("Subtype")):"text"==r&&(e.Subtype=t.getAttribute("Subtype")),e.ParentStreamIndex=t.getAttribute("ParentStreamIndex"),e.ManifestOuput=t.getAttribute("ManifestOuput"),e.Subtype=t.getAttribute("Subtype"),e.QualityLevel=[],e.c=[];for(var n=t.getElementsByTagName("QualityLevel"),u=t.getElementsByTagName("c"),s=0;s<n.length;s++)e.QualityLevel[s]=i(n[s],r);for(var s=0;s<u.length;s++)e.c[s]=a(u[s],r);return e},i=function(t,e){var r={};return r.Index=parseInt(t.getAttribute("Index")),r.Bitrate=parseInt(t.getAttribute("Bitrate")),r.CodecPrivateData=t.getAttribute("CodecPrivateData"),r.Scheme=t.getAttribute("Scheme"),r.SchemeVersion=t.getAttribute("SchemeVersion"),r.BufferTime=t.getAttribute("BufferTime"),r.NominalBitrate=t.getAttribute("NominalBitrate"),r.HardwareProfile=t.getAttribute("HardwareProfile"),r.Index=parseInt(t.getAttribute("Index")),"video"==e?(r.MaxHeight=parseInt(t.getAttribute("MaxHeight")),r.MaxWidth=parseInt(t.getAttribute("MaxWidth")),r.FourCC=t.getAttribute("FourCC"),n(t,"NALUnitLengthField",r)):"audio"==e&&(r.SamplingRate=parseInt(t.getAttribute("SamplingRate")),r.Channels=parseInt(t.getAttribute("Channels")),r.BitsPerSample=parseInt(t.getAttribute("BitsPerSample")),r.PacketSize=parseInt(t.getAttribute("PacketSize")),r.AudioTag=t.getAttribute("AudioTag"),r.FourCC=t.getAttribute("FourCC")),r},a=function(t){var e={};if(e.d=parseInt(t.getAttribute("d")),n(t,"n",e),t.hasAttribute("t")){var r=t.getAttribute("t");if(conf.LONG_TIME){for(var i=conf.TIME_LENGTH,a=r.slice(-conf.TIME_LENGTH),u=0;"0"===a[u];)u+=1;i-=u,e.t=parseInt(r.slice(-i)),e.time_most_significant=parseInt(r.substring(0,r.length-i)||"0")}else e.t=parseInt(r)}return t.hasAttribute("r")&&(e.r=parseInt(t.getAttribute("r"))),e},n=function(t,e,r){t.hasAttribute(e)&&(r[e]=t.getAttribute(e))};this.parser=t}var conf=require("../conf");module.exports=ParseSmooth;


},{"../conf":177}],176:[function(require,module,exports){
  "use strict";function SmoothMapGenerator(){var e=function(e,t){var i,r,s={periods:[]},a=null;s.isLive=!1,void 0!==e.IsLive&&"true"===e.IsLive.toLowerCase()&&(s.isLive=!0);for(var o=0;o<e.StreamIndex.length;o++)i=e.StreamIndex[o].c[0].t||0,null===a?a=i:a>i&&(a=i);r=conf.HACK_OFFSET?a:0;var n=new InitBuilder,d=n.buildInits(e),p={asets:[]},l=e.Timescale||1e7;p.decodeTimeOffset=r,p.playbackOffset=r/l,p.duration=e.Duration/l;for(var o=0;o<e.StreamIndex.length;o++){var m={reps:new Array},u=e.StreamIndex[o];if("text"!=u.Type){u.Type&&(m.type=u.Type),u.Timescale&&(l=u.Timescale);for(var h=utils.rmQueryArgs(t).replace("/Manifest","").replace("/manifest","")+"/"+u.Url,c=0;c<u.QualityLevel.length;c++){var v=u.QualityLevel[c],g=v.Bitrate,f=v.FourCC,C="";if("audio"==u.Type)"AACL"==f?(C="mp4a.40.2",conf.SS_IMPLICIT_AAC_HE&&(C="mp4a.40.5")):"AACH"==f&&(C="mp4a.40.5");else if("video"==u.Type)if("AVC1"==f||"H264"==f||"X264"==f||"DAVC"==f){var y=v.CodecPrivateData.substring(10,12).toLowerCase(),T=v.CodecPrivateData.substring(12,14).toLowerCase(),A=v.CodecPrivateData.substring(14,16).toLowerCase();C="avc1."+y+T+A}else C="Error. Codec "+f+" not supported";var w={value:d[u.Type][c].buffer},L={bandwidth:g,fourCC:f,codecs:C,init:w,mime:m.type+"/mp4",segments:[]};"video"===u.Type&&(u.DisplayWidth?L.width=u.DisplayWidth:v.DisplayWidth?L.width=v.DisplayWidth:u.MaxWidth?L.width=u.MaxWidth:v.MaxWidth?L.width=v.MaxWidth:0,u.DisplayHeight?L.height=u.DisplayHeight:v.DisplayHeight?L.height=v.DisplayHeight:u.MaxHeight?L.height=u.MaxHeight:v.MaxHeight?L.height=v.MaxHeight:0);var D,M=u.c[0].t||0,x=u.c[0].time_most_significant;D=(M-r)/l;for(var b=h.replace("{bitrate}",g),I=0,S=0;S<u.c.length;S++){var H,_,P,W=u.c[S];isNaN(W.d)?void 0!==W.t&&u.c[S+1]&&(_=u.c[S+1].t-W.t):_=W.d,H=_/l,P=W.r||1;for(var Q=0;P>Q;Q++){var B={url:b.replace("{start time}",(x||"")+M.toString()),duration:H,time:D,timeCode:M,decodeTime:M-r},q=M/l,E=q;B.id=s.isLive?Math.floor(E):I,I++,D+=H,M+=_,L.segments.push(B)}}m.reps.push(L)}p.asets.push(m)}}return s.periods.push(p),s},t=function(e,t,i,r){var s={periods:[]},a={asets:[]},o=e.Timescale||1e7;r=t.periods[0].decodeTimeOffset,a.duration=e.Duration/o;for(var n=0;n<e.StreamIndex.length;n++){var d={reps:[]},p=e.StreamIndex[n];p.Type&&(d.type=p.Type),p.Timescale&&(o=p.Timescale);for(var l=utils.rmQueryArgs(i).replace("/Manifest","").replace("/manifest","")+"/"+p.Url,m=0;m<p.QualityLevel.length;m++){var u=p.QualityLevel[m],h=u.Bitrate,c=u.FourCC,v="";if("audio"==p.Type)"AACL"==c?v="mp4a.40.2":"AACH"==c&&(v="mp4a.40.5");else if("video"==p.Type)if("AVC1"==c||"H264"==c||"X264"==c||"DAVC"==c){var g=u.CodecPrivateData.substring(10,12).toLowerCase(),f=u.CodecPrivateData.substring(12,14).toLowerCase(),C=u.CodecPrivateData.substring(14,16).toLowerCase();v="avc1."+g+f+C}else v="Error. Codec "+c+" not supported";for(var y={bandwidth:h,fourCC:c,codecs:v,mime:d.type+"/mp4",segments:[]},T=p.c[0].t,A=p.c[0].time_most_significant,w=(T-r)/o,L=l.replace("{bitrate}",h),D=0;D<p.c.length;D++){var M,x,b,I=p.c[D];isNaN(I.d)?void 0!==I.t&&p.c[D+1]&&(x=p.c[D+1].t-I.t):x=I.d,M=x/o,b=I.r||1;for(var S=0;b>S;S++){var H=T/o,P=H,W={id:Math.floor(P),url:L.replace("{start time}",(A||"")+T.toString()),duration:M,time:w,timeCode:T,decodeTime:T-r};w+=M,T+=x,y.segments.push(W)}}for(var Q=-1,B=!1,q=y.segments.length-1;q>=0;q--)_.where(t.periods[0].asets[n].reps[m].segments,{id:y.segments[q].id}).length||B?B=!0:Q=q;var E=y.segments.slice(0),F={segments:B&&Q>-1?E.splice(Q):[]};d.reps.push(F);for(var N=t.periods[0].asets[n].reps[m].segments.length,q=0;N>q&&t.periods[0].asets[n].reps[m].segments[0].id!==y.segments[0].id;q++)t.periods[0].asets[n].reps[m].segments.splice(0,1);for(var O=y.segments.length,q=0;O>q;q++)t.periods[0].asets[n].reps[m].segments[q]||t.periods[0].asets[n].reps[m].segments.push(y.segments[q])}a.asets.push(d)}return s.periods.push(a),{map:t,mapAddToP2P:s}};this.createMapSmooth=e,this.updateMapSmooth=t}var conf=require("./conf"),_=require("lodash"),InitBuilder=require("./InitializationBuilder"),utils=require("./utils/utils");module.exports=SmoothMapGenerator;


},{"./InitializationBuilder":162,"./conf":177,"./utils/utils":182,"lodash":183}],177:[function(require,module,exports){
  "use strict";var Conf=function(){this.HACK_OFFSET=!0,this.PLAYLIST_HLS_KEEP_LAST_LINES=void 0,this.SS_IMPLICIT_AAC_HE=!1},conf=new Conf;module.exports=conf;


},{}],178:[function(require,module,exports){
  "use strict";var Downloader=require("streamroot-downloader").Downloader,downloader=new Downloader,AesKeysHelper=function(){var e={},r=function(e){var r=new Uint32Array([e]),n=new Uint8Array(r.buffer),o=new Uint8Array([n[3],n[2],n[1],n[0]]),t=new Uint8Array(16);return t.set(o,12),t},n=function(r,n){if(e[r])n(null,e[r]);else{var o={url:r,responseType:"arraybuffer"};downloader.getURL(o,function(o,t){if(o)n(o);else{var a=new Uint8Array(t.response);e[r]=a,n(null,a)}})}};this.getIV=r,this.getAESKey=n};module.exports=AesKeysHelper;


},{"streamroot-downloader":245}],179:[function(require,module,exports){
  var extractinit=function(t){for(var r=new DataView(t),e=0;e<t.byteLength;){var n=r.getUint32(e+4,!1);if(1936286840==n||1836019558==n)break;e+=r.getUint32(e,!1)}return new Uint8Array(t.slice(0,e))},parsesidx=function(t,r){for(var e=new DataView(t),n=0;1936286840!=e.getUint32(n+4,!1);)if(n+=e.getUint32(n,!1),n>=t.byteLength)throw new Error("Could not find sidx");var i=e.getUint32(n,!1)+n;if(i>t.byteLength)throw new Error("sidx terminates after array buffer");var a=e.getUint8(n+8);n+=12;var o=e.getUint32(n+4,!1);n+=8;var f,g;0===a?(f=e.getUint32(n,!1),g=e.getUint32(n+4,!1),n+=8):(f=(e.getUint32(n,!1)<<32)+e.getUint32(n+4,!1),g=(e.getUint32(n+8,!1)<<32)+e.getUint32(n+12,!1),n+=16),g+=i+(r||0);var U=e.getUint16(n+2,!1);n+=4;for(var s=g,d=f,w=[],v=0;U>v;v++){var h=e.getUint32(n,!1),u=2147483648&h;if(u)throw new Error("Unhandled indirect reference");h=2147483647&h;var c=e.getUint32(n+4,!1);n+=12,w.push({size:h,offset:s,duration:c/o,time:d/o}),s+=h,d+=c}if(n!=i)throw new Error("Error: final pos "+n+" differs from SIDX end "+i);return w};module.exports={parseSIDX:parsesidx,extractInit:extractinit};


},{}],180:[function(require,module,exports){
  var JSPack=function(){var e,n=!1,t=this;t._DeArray=function(e,n,t){return[e.slice(n,n+t)]},t._EnArray=function(e,n,t,a){for(var r=0;t>r;e[n+r]=a[r]?a[r]:0,r++);},t._DeChar=function(e,n){return String.fromCharCode(e[n])},t._EnChar=function(e,n,t){e[n]=t.charCodeAt(0)},t._DeInt=function(t,a){var r,i,c,o=n?e.len-1:0,s=n?-1:1,h=o+s*e.len;for(r=0,i=o,c=1;i!=h;r+=t[a+i]*c,i+=s,c*=256);return e.bSigned&&r&Math.pow(2,8*e.len-1)&&(r-=Math.pow(2,8*e.len)),r},t._EnInt=function(t,a,r){var i,c=n?e.len-1:0,o=n?-1:1,s=c+o*e.len;for(r=r<e.min?e.min:r>e.max?e.max:r,i=c;i!=s;t[a+i]=255&r,i+=o,r>>=8);},t._DeString=function(e,n,t){for(var a=new Array(t),r=0;t>r;a[r]=String.fromCharCode(e[n+r]),r++);return a.join("")},t._EnString=function(e,n,t,a){for(var r,i=0;t>i;e[n+i]=(r=a.charCodeAt(i))?r:0,i++);},t._De754=function(t,a){var r,i,c,o,s,h,_,l,u,f;for(_=e.mLen,l=8*e.len-e.mLen-1,f=(1<<l)-1,u=f>>1,o=n?0:e.len-1,s=n?1:-1,r=t[a+o],o+=s,h=-7,i=r&(1<<-h)-1,r>>=-h,h+=l;h>0;i=256*i+t[a+o],o+=s,h-=8);for(c=i&(1<<-h)-1,i>>=-h,h+=_;h>0;c=256*c+t[a+o],o+=s,h-=8);switch(i){case 0:i=1-u;break;case f:return c?NaN:(r?-1:1)*(1/0);default:c+=Math.pow(2,_),i-=u}return(r?-1:1)*c*Math.pow(2,i-_)},t._En754=function(t,a,r){var i,c,o,s,h,_,l,u,f,d;for(l=e.mLen,u=8*e.len-e.mLen-1,d=(1<<u)-1,f=d>>1,i=0>r?1:0,r=Math.abs(r),isNaN(r)||r==1/0?(o=isNaN(r)?1:0,c=d):(c=Math.floor(Math.log(r)/Math.LN2),r*(_=Math.pow(2,-c))<1&&(c--,_*=2),r+=c+f>=1?e.rt/_:e.rt*Math.pow(2,1-f),r*_>=2&&(c++,_/=2),c+f>=d?(o=0,c=d):c+f>=1?(o=(r*_-1)*Math.pow(2,l),c+=f):(o=r*Math.pow(2,f-1)*Math.pow(2,l),c=0)),s=n?e.len-1:0,h=n?-1:1;l>=8;t[a+s]=255&o,s+=h,o/=256,l-=8);for(c=c<<l|o,u+=l;u>0;t[a+s]=255&c,s+=h,c/=256,u-=8);t[a+s-h]|=128*i},t._sPattern="(\\d+)?([AxcbBhHsfdiIlL])",t._lenLut={A:1,x:1,c:1,b:1,B:1,h:2,H:2,s:1,f:4,d:8,i:4,I:4,l:4,L:4},t._elLut={A:{en:t._EnArray,de:t._DeArray},s:{en:t._EnString,de:t._DeString},c:{en:t._EnChar,de:t._DeChar},b:{en:t._EnInt,de:t._DeInt,len:1,bSigned:!0,min:-Math.pow(2,7),max:Math.pow(2,7)-1},B:{en:t._EnInt,de:t._DeInt,len:1,bSigned:!1,min:0,max:Math.pow(2,8)-1},h:{en:t._EnInt,de:t._DeInt,len:2,bSigned:!0,min:-Math.pow(2,15),max:Math.pow(2,15)-1},H:{en:t._EnInt,de:t._DeInt,len:2,bSigned:!1,min:0,max:Math.pow(2,16)-1},i:{en:t._EnInt,de:t._DeInt,len:4,bSigned:!0,min:-Math.pow(2,31),max:Math.pow(2,31)-1},I:{en:t._EnInt,de:t._DeInt,len:4,bSigned:!1,min:0,max:Math.pow(2,32)-1},l:{en:t._EnInt,de:t._DeInt,len:4,bSigned:!0,min:-Math.pow(2,31),max:Math.pow(2,31)-1},L:{en:t._EnInt,de:t._DeInt,len:4,bSigned:!1,min:0,max:Math.pow(2,32)-1},f:{en:t._En754,de:t._De754,len:4,mLen:23,rt:Math.pow(2,-24)-Math.pow(2,-77)},d:{en:t._En754,de:t._De754,len:8,mLen:52,rt:0}},t._UnpackSeries=function(n,t,a,r){for(var i=e.de,c=[],o=0;n>o;c.push(i(a,r+o*t)),o++);return c},t._PackSeries=function(n,t,a,r,i,c){for(var o=e.en,s=0;n>s;o(a,r+s*t,i[c+s]),s++);},t.Unpack=function(t,a,r){n="<"!=t.charAt(0),r=r?r:0;for(var i,c,o,s=new RegExp(this._sPattern,"g"),h=[];i=s.exec(t);){if(c=void 0==i[1]||""==i[1]?1:parseInt(i[1]),o=this._lenLut[i[2]],r+c*o>a.length)return void 0;switch(i[2]){case"A":case"s":h.push(this._elLut[i[2]].de(a,r,c));break;case"c":case"b":case"B":case"h":case"H":case"i":case"I":case"l":case"L":case"f":case"d":e=this._elLut[i[2]],h.push(this._UnpackSeries(c,o,a,r))}r+=c*o}return Array.prototype.concat.apply([],h)},t.PackTo=function(t,a,r,i){n="<"!=t.charAt(0);for(var c,o,s,h,_=new RegExp(this._sPattern,"g"),l=0;c=_.exec(t);){if(o=void 0==c[1]||""==c[1]?1:parseInt(c[1]),s=this._lenLut[c[2]],r+o*s>a.length)return!1;switch(c[2]){case"A":case"s":if(l+1>i.length)return!1;this._elLut[c[2]].en(a,r,o,i[l]),l+=1;break;case"c":case"b":case"B":case"h":case"H":case"i":case"I":case"l":case"L":case"f":case"d":if(e=this._elLut[c[2]],l+o>i.length)return!1;this._PackSeries(o,s,a,r,i,l),l+=o;break;case"x":for(h=0;o>h;h++)a[r+h]=0}r+=o*s}return a},t.Pack=function(e,n){return this.PackTo(e,new Array(this.CalcLength(e)),0,n)},t.CalcLength=function(e){for(var n,t=new RegExp(this._sPattern,"g"),a=0;n=t.exec(e);)a+=(void 0==n[1]||""==n[1]?1:parseInt(n[1]))*this._lenLut[n[2]];return a}};module.exports=JSPack;


},{}],181:[function(require,module,exports){
  var Long=function(t,n,i){this.low=0|t,this.high=0|n,this.unsigned=!!i},INT_CACHE={},UINT_CACHE={};Long.fromInt=function(t,n){var i,o;return n?(t>>>=0,t>=0&&256>t&&(o=UINT_CACHE[t])?o:(i=new Long(t,0>(0|t)?-1:0,!0),t>=0&&256>t&&(UINT_CACHE[t]=i),i)):(t=0|t,t>=-128&&128>t&&(o=INT_CACHE[t])?o:(i=new Long(t,0>t?-1:0,!1),t>=-128&&128>t&&(INT_CACHE[t]=i),i))},Long.fromNumber=function(t,n){return n=!!n,isNaN(t)||!isFinite(t)?Long.ZERO:!n&&-TWO_PWR_63_DBL>=t?Long.MIN_SIGNED_VALUE:n&&0>=t?Long.MIN_UNSIGNED_VALUE:!n&&t+1>=TWO_PWR_63_DBL?Long.MAX_SIGNED_VALUE:n&&t>=TWO_PWR_64_DBL?Long.MAX_UNSIGNED_VALUE:0>t?Long.fromNumber(-t,!1).negate():new Long(t%TWO_PWR_32_DBL|0,t/TWO_PWR_32_DBL|0,n)},Long.fromBits=function(t,n,i){return new Long(t,n,i)},Long.from28Bits=function(t,n,i,o){return Long.fromBits(t|n<<28,n>>>4|i<<24,o)},Long.fromString=function(t,n,i){if(0==t.length)throw new Error("number format error: empty string");if("NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return Long.ZERO;if("number"==typeof n&&(i=n,n=!1),i=i||10,2>i||i>36)throw new Error("radix out of range: "+i);if("-"==t.charAt(0))return Long.fromString(t.substring(1),n,i).negate();if(t.indexOf("-")>=0)throw new Error('number format error: interior "-" character: '+t);for(var o=Long.fromNumber(Math.pow(i,8)),r=Long.ZERO,e=0;e<t.length;e+=8){var g=Math.min(8,t.length-e),s=parseInt(t.substring(e,e+g),i);if(8>g){var h=Long.fromNumber(Math.pow(i,g));r=r.multiply(h).add(Long.fromNumber(s))}else r=r.multiply(o),r=r.add(Long.fromNumber(s))}return r};var TWO_PWR_16_DBL=65536,TWO_PWR_24_DBL=1<<24,TWO_PWR_32_DBL=TWO_PWR_16_DBL*TWO_PWR_16_DBL,TWO_PWR_31_DBL=TWO_PWR_32_DBL/2,TWO_PWR_48_DBL=TWO_PWR_32_DBL*TWO_PWR_16_DBL,TWO_PWR_64_DBL=TWO_PWR_32_DBL*TWO_PWR_32_DBL,TWO_PWR_63_DBL=TWO_PWR_64_DBL/2,TWO_PWR_24=Long.fromInt(1<<24);Long.ZERO=Long.fromInt(0),Long.ONE=Long.fromInt(1),Long.NEG_ONE=Long.fromInt(-1),Long.MAX_SIGNED_VALUE=Long.fromBits(-1,2147483647,!1),Long.MAX_UNSIGNED_VALUE=Long.fromBits(-1,-1,!0),Long.MAX_VALUE=Long.MAX_SIGNED_VALUE,Long.MIN_SIGNED_VALUE=Long.fromBits(0,-2147483648,!1),Long.MIN_UNSIGNED_VALUE=Long.fromBits(0,0,!0),Long.MIN_VALUE=Long.MIN_SIGNED_VALUE,Long.prototype.toInt=function(){return this.unsigned?this.low>>>0:this.low},Long.prototype.toNumber=function(){return this.unsigned?(this.high>>>0)*TWO_PWR_32_DBL+(this.low>>>0):this.high*TWO_PWR_32_DBL+(this.low>>>0)},Long.prototype.toString=function(t){if(t=t||10,2>t||t>36)throw new Error("radix out of range: "+t);if(this.isZero())return"0";var n;if(this.isNegative()){if(this.equals(Long.MIN_SIGNED_VALUE)){var i=Long.fromNumber(t),o=this.div(i);return n=o.multiply(i).subtract(this),o.toString(t)+n.toInt().toString(t)}return"-"+this.negate().toString(t)}var r=Long.fromNumber(Math.pow(t,6));n=this;for(var e="";;){var g=n.div(r),s=n.subtract(g.multiply(r)).toInt(),h=s.toString(t);if(n=g,n.isZero())return h+e;for(;h.length<6;)h="0"+h;e=""+h+e}},Long.prototype.getHighBits=function(){return this.high},Long.prototype.getHighBitsUnsigned=function(){return this.high>>>0},Long.prototype.getLowBits=function(){return this.low},Long.prototype.getLowBitsUnsigned=function(){return this.low>>>0},Long.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(Long.MIN_SIGNED_VALUE)?64:this.negate().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,n=31;n>0&&0==(t&1<<n);n--);return 0!=this.high?n+33:n+1},Long.prototype.isZero=function(){return 0==this.high&&0==this.low},Long.prototype.isNegative=function(){return!this.unsigned&&this.high<0},Long.prototype.isOdd=function(){return 1==(1&this.low)},Long.prototype.isEven=function(){return 0==(1&this.low)},Long.prototype.equals=function(t){return this.unsigned!=t.unsigned&&this.high>>>31!=t.high>>>31?!1:this.high==t.high&&this.low==t.low},Long.prototype.notEquals=function(t){return!this.equals(t)},Long.prototype.lessThan=function(t){return this.compare(t)<0},Long.prototype.lessThanOrEqual=function(t){return this.compare(t)<=0},Long.prototype.greaterThan=function(t){return this.compare(t)>0},Long.prototype.greaterThanOrEqual=function(t){return this.compare(t)>=0},Long.prototype.compare=function(t){if(this.equals(t))return 0;var n=this.isNegative(),i=t.isNegative();return n&&!i?-1:!n&&i?1:this.unsigned?t.high>>>0>this.high>>>0||t.high==this.high&&t.low>>>0>this.low>>>0?-1:1:this.subtract(t).isNegative()?-1:1},Long.prototype.negate=function(){return!this.unsigned&&this.equals(Long.MIN_SIGNED_VALUE)?Long.MIN_SIGNED_VALUE:this.not().add(Long.ONE)},Long.prototype.add=function(t){var n=this.high>>>16,i=65535&this.high,o=this.low>>>16,r=65535&this.low,e=t.high>>>16,g=65535&t.high,s=t.low>>>16,h=65535&t.low,u=0,L=0,f=0,a=0;return a+=r+h,f+=a>>>16,a&=65535,f+=o+s,L+=f>>>16,f&=65535,L+=i+g,u+=L>>>16,L&=65535,u+=n+e,u&=65535,Long.fromBits(f<<16|a,u<<16|L,this.unsigned)},Long.prototype.subtract=function(t){return this.add(t.negate())},Long.prototype.multiply=function(t){if(this.isZero())return Long.ZERO;if(t.isZero())return Long.ZERO;if(this.equals(Long.MIN_VALUE))return t.isOdd()?Long.MIN_VALUE:Long.ZERO;if(t.equals(Long.MIN_VALUE))return this.isOdd()?Long.MIN_VALUE:Long.ZERO;if(this.isNegative())return t.isNegative()?this.negate().multiply(t.negate()):this.negate().multiply(t).negate();if(t.isNegative())return this.multiply(t.negate()).negate();if(this.lessThan(TWO_PWR_24)&&t.lessThan(TWO_PWR_24))return Long.fromNumber(this.toNumber()*t.toNumber(),this.unsigned);var n=this.high>>>16,i=65535&this.high,o=this.low>>>16,r=65535&this.low,e=t.high>>>16,g=65535&t.high,s=t.low>>>16,h=65535&t.low,u=0,L=0,f=0,a=0;return a+=r*h,f+=a>>>16,a&=65535,f+=o*h,L+=f>>>16,f&=65535,f+=r*s,L+=f>>>16,f&=65535,L+=i*h,u+=L>>>16,L&=65535,L+=o*s,u+=L>>>16,L&=65535,L+=r*g,u+=L>>>16,L&=65535,u+=n*h+i*s+o*g+r*e,u&=65535,Long.fromBits(f<<16|a,u<<16|L,this.unsigned)},Long.prototype.div=function(t){if(t.isZero())throw new Error("division by zero");if(this.isZero())return Long.ZERO;if(this.equals(Long.MIN_SIGNED_VALUE)){if(t.equals(Long.ONE)||t.equals(Long.NEG_ONE))return min;if(t.equals(Long.MIN_VALUE))return Long.ONE;var n=this.shiftRight(1),i=n.div(t).shiftLeft(1);if(i.equals(Long.ZERO))return t.isNegative()?Long.ONE:Long.NEG_ONE;var o=this.subtract(t.multiply(i)),r=i.add(o.div(t));return r}if(t.equals(Long.MIN_VALUE))return Long.ZERO;if(this.isNegative())return t.isNegative()?this.negate().div(t.negate()):this.negate().div(t).negate();if(t.isNegative())return this.div(t.negate()).negate();for(var e=Long.ZERO,o=this;o.greaterThanOrEqual(t);){for(var i=Math.max(1,Math.floor(o.toNumber()/t.toNumber())),g=Math.ceil(Math.log(i)/Math.LN2),s=48>=g?1:Math.pow(2,g-48),h=Long.fromNumber(i,this.unsigned),u=h.multiply(t);u.isNegative()||u.greaterThan(o);)i-=s,h=Long.fromNumber(i,this.unsigned),u=h.multiply(t);h.isZero()&&(h=Long.ONE),e=e.add(h),o=o.subtract(u)}return e},Long.prototype.modulo=function(t){return this.subtract(this.div(t).multiply(t))},Long.prototype.not=function(){return Long.fromBits(~this.low,~this.high,this.unsigned)},Long.prototype.and=function(t){return Long.fromBits(this.low&t.low,this.high&t.high,this.unsigned)},Long.prototype.or=function(t){return Long.fromBits(this.low|t.low,this.high|t.high,this.unsigned)},Long.prototype.xor=function(t){return Long.fromBits(this.low^t.low,this.high^t.high,this.unsigned)},Long.prototype.shiftLeft=function(t){if(t&=63,0==t)return this;var n=this.low;if(32>t){var i=this.high;return Long.fromBits(n<<t,i<<t|n>>>32-t,this.unsigned)}return Long.fromBits(0,n<<t-32,this.unsigned)},Long.prototype.shiftRight=function(t){if(t&=63,0==t)return this;var n=this.high;if(32>t){var i=this.low;return Long.fromBits(i>>>t|n<<32-t,n>>t,this.unsigned)}return Long.fromBits(n>>t-32,n>=0?0:-1,this.unsigned)},Long.prototype.shiftRightUnsigned=function(t){if(t&=63,0==t)return this;var n=this.high;if(32>t){var i=this.low;return Long.fromBits(i>>>t|n<<32-t,n>>>t,this.unsigned)}return 32==t?Long.fromBits(n,0,this.unsigned):Long.fromBits(n>>>t-32,0,this.unsigned)},Long.prototype.toSigned=function(){var t=this.clone();return t.unsigned=!1,t},Long.prototype.toUnsigned=function(){var t=this.clone();return t.unsigned=!0,t},Long.prototype.clone=function(){return new Long(this.low,this.high,this.unsigned)},module.exports=Long;


},{}],182:[function(require,module,exports){
  function occurrences(n,e,r){for(var t=0,o=0;;){if(o=n.indexOf(e,o),-1===o||r&&!(r>o))break;t++,o+=e.length}return t}function nthChar(n,e,r){for(var t=0,o=0;r>t&&(o=n.indexOf(e,o)+1);)t++;return t==r?o-1:NaN}var clone=function n(e){function r(n,e,r){var t,o,c={};for(t in e)o=e[t],t in n&&(n[t]===o||t in c&&c[t]===o)||(n[t]=r?r(o):o);return n}if(!e||"object"!=typeof e||"[object Function]"===Object.prototype.toString.call(e))return e;if(e.nodeType&&"cloneNode"in e)return e.cloneNode(!0);if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return new RegExp(e);var t,o,c;if(e instanceof Array)for(t=[],o=0,c=e.length;c>o;++o)o in e&&t.push(n(e[o]));else t=e.constructor?new e.constructor:{};return r(t,e,n)},mr=function(n,e){return e?"bytes="+n+"-"+e:"bytes="+n+"-"},absolutizeURL=function(n,e){if(e.match(/^[a-z]*:\/\//))return e;var r;return"/"==e[0]&&(e=e.slice(1,e.length)),i=n.lastIndexOf("/"),i+1<=n.length&&(r=n.slice(0,i+1)),r+e},rmQueryArgs=function(n){var e=n.indexOf("?");return e>0?n.substr(0,e):n},asyncMap=function(n,e,r){var t=n.length,o=[];n.map(function(n,c){e(n,c,function(n,e){n?r(n):(t--,o[c]=e,0===t&&r(null,o))})})};module.exports={make_range:mr,absURL:absolutizeURL,clone:clone,rmQueryArgs:rmQueryArgs,asyncMap:asyncMap,occurrences:occurrences,nthChar:nthChar};


},{}],183:[function(require,module,exports){
  (function (global){
    (function(){function n(n,t){if(n!==t){var r=n===n,e=t===t;if(n>t||!r||"undefined"==typeof n&&e)return 1;if(t>n||!e||"undefined"==typeof t&&r)return-1}return 0}function t(n,t,r){if(t!==t)return h(n,r);for(var e=(r||0)-1,u=n.length;++e<u;)if(n[e]===t)return e;return-1}function r(n){return"function"==typeof n||!1}function e(n,t){var r=n.length;for(n.sort(t);r--;)n[r]=n[r].value;return n}function u(n){return"string"==typeof n?n:null==n?"":n+""}function o(n){return n.charCodeAt(0)}function i(n,t){for(var r=-1,e=n.length;++r<e&&t.indexOf(n.charAt(r))>-1;);return r}function a(n,t){for(var r=n.length;r--&&t.indexOf(n.charAt(r))>-1;);return r}function f(t,r){return n(t.criteria,r.criteria)||t.index-r.index}function c(t,r){for(var e=-1,u=t.criteria,o=r.criteria,i=u.length;++e<i;){var a=n(u[e],o[e]);if(a)return a}return t.index-r.index}function l(n){return Dn[n]}function s(n){return zn[n]}function p(n){return"\\"+Pn[n]}function h(n,t,r){for(var e=n.length,u=r?t||e:(t||0)-1;r?u--:++u<e;){var o=n[u];if(o!==o)return u}return-1}function v(n){return n&&"object"==typeof n||!1}function _(n){return 160>=n&&n>=9&&13>=n||32==n||160==n||5760==n||6158==n||n>=8192&&(8202>=n||8232==n||8233==n||8239==n||8287==n||12288==n||65279==n)}function g(n,t){for(var r=-1,e=n.length,u=-1,o=[];++r<e;)n[r]===t&&(n[r]=z,o[++u]=r);return o}function y(n,t){for(var r,e=-1,u=n.length,o=-1,i=[];++e<u;){var a=n[e],f=t?t(a,e,n):a;e&&r===f||(r=f,i[++o]=a)}return i}function d(n){for(var t=-1,r=n.length;++t<r&&_(n.charCodeAt(t)););return t}function m(n){for(var t=n.length;t--&&_(n.charCodeAt(t)););return t}function w(n){return Mn[n]}function b(_){function G(n){if(v(n)&&!Hi(n)&&!(n instanceof Dn)){if(n instanceof nn)return n;if(ri.call(n,"__chain__")&&ri.call(n,"__wrapped__"))return Lr(n)}return new nn(n)}function H(){}function nn(n,t,r){this.__wrapped__=n,this.__actions__=r||[],this.__chain__=!!t}function Dn(n){this.__wrapped__=n,this.__actions__=null,this.__dir__=1,this.__dropCount__=0,this.__filtered__=!1,this.__iteratees__=null,this.__takeCount__=Si,this.__views__=null}function zn(){var n=this.__actions__,t=this.__iteratees__,r=this.__views__,e=new Dn(this.__wrapped__);return e.__actions__=n?nt(n):null,e.__dir__=this.__dir__,e.__dropCount__=this.__dropCount__,e.__filtered__=this.__filtered__,e.__iteratees__=t?nt(t):null,e.__takeCount__=this.__takeCount__,e.__views__=r?nt(r):null,e}function Mn(){if(this.__filtered__){var n=new Dn(this);n.__dir__=-1,n.__filtered__=!0}else n=this.clone(),n.__dir__*=-1;return n}function qn(){var n=this.__wrapped__.value();if(!Hi(n))return Zt(n,this.__actions__);var t=this.__dir__,r=0>t,e=wr(0,n.length,this.__views__),u=e.start,o=e.end,i=o-u,a=this.__dropCount__,f=Ri(i,this.__takeCount__),c=r?o:u-1,l=this.__iteratees__,s=l?l.length:0,p=0,h=[];n:for(;i--&&f>p;){c+=t;for(var v=-1,_=n[c];++v<s;){var g=l[v],y=g.iteratee,d=y(_,c,n),m=g.type;if(m==$)_=d;else if(!d){if(m==L)continue n;break n}}a?a--:h[p++]=_}return h}function Pn(){this.__data__={}}function Vn(n){return this.has(n)&&delete this.__data__[n]}function Yn(n){return"__proto__"==n?x:this.__data__[n]}function Gn(n){return"__proto__"!=n&&ri.call(this.__data__,n)}function Jn(n,t){return"__proto__"!=n&&(this.__data__[n]=t),this}function Zn(n){var t=n?n.length:0;for(this.data={hash:xi(null),set:new _i};t--;)this.push(n[t])}function Hn(n,t){var r=n.data,e="string"==typeof t||ku(t)?r.set.has(t):r.hash[t];return e?0:-1}function Qn(n){var t=this.data;"string"==typeof n||ku(n)?t.set.add(n):t.hash[n]=!0}function nt(n,t){var r=-1,e=n.length;for(t||(t=zo(e));++r<e;)t[r]=n[r];return t}function tt(n,t){for(var r=-1,e=n.length;++r<e&&t(n[r],r,n)!==!1;);return n}function rt(n,t){for(var r=n.length;r--&&t(n[r],r,n)!==!1;);return n}function et(n,t){for(var r=-1,e=n.length;++r<e;)if(!t(n[r],r,n))return!1;return!0}function ut(n,t){for(var r=-1,e=n.length,u=-1,o=[];++r<e;){var i=n[r];t(i,r,n)&&(o[++u]=i)}return o}function ot(n,t){for(var r=-1,e=n.length,u=zo(e);++r<e;)u[r]=t(n[r],r,n);return u}function it(n){for(var t=-1,r=n.length,e=Ti;++t<r;){var u=n[t];u>e&&(e=u)}return e}function at(n){for(var t=-1,r=n.length,e=Si;++t<r;){var u=n[t];e>u&&(e=u)}return e}function ft(n,t,r,e){var u=-1,o=n.length;for(e&&o&&(r=n[++u]);++u<o;)r=t(r,n[u],u,n);return r}function ct(n,t,r,e){var u=n.length;for(e&&u&&(r=n[--u]);u--;)r=t(r,n[u],u,n);return r}function lt(n,t){for(var r=-1,e=n.length;++r<e;)if(t(n[r],r,n))return!0;return!1}function st(n,t){return"undefined"==typeof n?t:n}function pt(n,t,r,e){return"undefined"!=typeof n&&ri.call(e,r)?n:t}function ht(n,t,r){var e=ea(t);if(!r)return _t(t,n,e);for(var u=-1,o=e.length;++u<o;){var i=e[u],a=n[i],f=r(a,t[i],i,n,t);(f===f?f===a:a!==a)&&("undefined"!=typeof a||i in n)||(n[i]=f)}return n}function vt(n,t){for(var r=-1,e=n.length,u=Ir(e),o=t.length,i=zo(o);++r<o;){var a=t[r];u?(a=parseFloat(a),i[r]=Er(a,e)?n[a]:x):i[r]=n[a]}return i}function _t(n,t,r){r||(r=t,t={});for(var e=-1,u=r.length;++e<u;){var o=r[e];t[o]=n[o]}return t}function gt(n,t){for(var r=-1,e=t.length;++r<e;){var u=t[r];n[u]=hr(n[u],j,n)}return n}function yt(n,t,r){var e=typeof n;return"function"==e?"undefined"!=typeof t&&jr(n)?nr(n,t,r):n:null==n?Co:"object"==e?Bt(n):"undefined"==typeof t?qt(n+""):Dt(n+"",t)}function dt(n,t,r,e,u,o,i){var a;if(r&&(a=u?r(n,e,u):r(n)),"undefined"!=typeof a)return a;if(!ku(n))return n;var f=Hi(n);if(f){if(a=br(n),!t)return nt(n,a)}else{var c=ui.call(n),l=c==Y;if(c!=X&&c!=M&&(!l||u))return $n[c]?Ar(n,c,t):u?n:{};if(a=xr(l?{}:n),!t)return _t(n,a,ea(n))}o||(o=[]),i||(i=[]);for(var s=o.length;s--;)if(o[s]==n)return i[s];return o.push(n),i.push(a),(f?tt:Tt)(n,function(e,u){a[u]=dt(e,t,r,u,n,o,i)}),a}function mt(n,t,r,e){if("function"!=typeof n)throw new Xo(D);return gi(function(){n.apply(x,Yt(r,e))},t)}function wt(n,r){var e=n?n.length:0,u=[];if(!e)return u;var o=-1,i=mr(),a=i==t,f=a&&r.length>=200&&Mi(r),c=r.length;f&&(i=Hn,a=!1,r=f);n:for(;++o<e;){var l=n[o];if(a&&l===l){for(var s=c;s--;)if(r[s]===l)continue n;u.push(l)}else i(r,l)<0&&u.push(l)}return u}function bt(n,t){var r=n?n.length:0;if(!Ir(r))return Tt(n,t);for(var e=-1,u=Fr(n);++e<r&&t(u[e],e,u)!==!1;);return n}function xt(n,t){var r=n?n.length:0;if(!Ir(r))return St(n,t);for(var e=Fr(n);r--&&t(e[r],r,e)!==!1;);return n}function At(n,t){var r=!0;return bt(n,function(n,e,u){return r=!!t(n,e,u)}),r}function jt(n,t,r,e){var u=n.length;for(r=null==r?0:+r||0,0>r&&(r=-r>u?0:u+r),e="undefined"==typeof e||e>u?u:+e||0,0>e&&(e+=u),u=r>e?0:e>>>0,r>>>=0;u>r;)n[r++]=t;return n}function Et(n,t){var r=[];return bt(n,function(n,e,u){t(n,e,u)&&r.push(n)}),r}function Rt(n,t,r,e){var u;return r(n,function(n,r,o){return t(n,r,o)?(u=e?r:n,!1):void 0}),u}function It(n,t,r,e){for(var u=(e||0)-1,o=n.length,i=-1,a=[];++u<o;){var f=n[u];if(v(f)&&Ir(f.length)&&(Hi(f)||bu(f))){t&&(f=It(f,t,r));var c=-1,l=f.length;for(a.length+=l;++c<l;)a[++i]=f[c]}else r||(a[++i]=f)}return a}function kt(n,t,r){for(var e=-1,u=Fr(n),o=r(n),i=o.length;++e<i;){var a=o[e];if(t(u[a],a,u)===!1)break}return n}function Ot(n,t,r){for(var e=Fr(n),u=r(n),o=u.length;o--;){var i=u[o];if(t(e[i],i,e)===!1)break}return n}function Ct(n,t){return kt(n,t,Zu)}function Tt(n,t){return kt(n,t,ea)}function St(n,t){return Ot(n,t,ea)}function Nt(n,t){for(var r=-1,e=t.length,u=-1,o=[];++r<e;){var i=t[r];na(n[i])&&(o[++u]=i)}return o}function Ut(n,t,r){var e=-1,u="function"==typeof t,o=n?n.length:0,i=Ir(o)?zo(o):[];return bt(n,function(n){var o=u?t:null!=n&&n[t];i[++e]=o?o.apply(n,r):x}),i}function Wt(n,t,r,e,u,o){if(n===t)return 0!==n||1/n==1/t;var i=typeof n,a=typeof t;return"function"!=i&&"object"!=i&&"function"!=a&&"object"!=a||null==n||null==t?n!==n&&t!==t:Ft(n,t,Wt,r,e,u,o)}function Ft(n,t,r,e,u,o,i){var a=Hi(n),f=Hi(t),c=q,l=q;a||(c=ui.call(n),c==M?c=X:c!=X&&(a=Fu(n))),f||(l=ui.call(t),l==M?l=X:l!=X&&(f=Fu(t)));var s=c==X,p=l==X,h=c==l;if(h&&!a&&!s)return _r(n,t,c);var v=s&&ri.call(n,"__wrapped__"),_=p&&ri.call(t,"__wrapped__");if(v||_)return r(v?n.value():n,_?t.value():t,e,u,o,i);if(!h)return!1;o||(o=[]),i||(i=[]);for(var g=o.length;g--;)if(o[g]==n)return i[g]==t;o.push(n),i.push(t);var y=(a?vr:gr)(n,t,r,e,u,o,i);return o.pop(),i.pop(),y}function Lt(n,t,r,e,u){var o=t.length;if(null==n)return!o;for(var i=-1,a=!u;++i<o;)if(a&&e[i]?r[i]!==n[t[i]]:!ri.call(n,t[i]))return!1;for(i=-1;++i<o;){var f=t[i];if(a&&e[i])var c=ri.call(n,f);else{var l=n[f],s=r[i];c=u?u(l,s,f):x,"undefined"==typeof c&&(c=Wt(s,l,u,!0))}if(!c)return!1}return!0}function $t(n,t){var r=[];return bt(n,function(n,e,u){r.push(t(n,e,u))}),r}function Bt(n){var t=ea(n),r=t.length;if(1==r){var e=t[0],u=n[e];if(kr(u))return function(n){return null!=n&&n[e]===u&&ri.call(n,e)}}for(var o=zo(r),i=zo(r);r--;)u=n[t[r]],o[r]=u,i[r]=kr(u);return function(n){return Lt(n,t,o,i)}}function Dt(n,t){return kr(t)?function(r){return null!=r&&r[n]===t}:function(r){return null!=r&&Wt(t,r[n],null,!0)}}function zt(n,t,r,e,u){if(!ku(n))return n;var o=Ir(t.length)&&(Hi(t)||Fu(t));return(o?tt:Tt)(t,function(t,i,a){if(v(t))return e||(e=[]),u||(u=[]),Mt(n,a,i,zt,r,e,u);var f=n[i],c=r?r(f,t,i,n,a):x,l="undefined"==typeof c;l&&(c=t),!o&&"undefined"==typeof c||!l&&(c===c?c===f:f!==f)||(n[i]=c)}),n}function Mt(n,t,r,e,u,o,i){for(var a=o.length,f=t[r];a--;)if(o[a]==f)return void(n[r]=i[a]);var c=n[r],l=u?u(c,f,r,n,t):x,s="undefined"==typeof l;s&&(l=f,Ir(f.length)&&(Hi(f)||Fu(f))?l=Hi(c)?c:c?nt(c):[]:ta(f)||bu(f)?l=bu(c)?Bu(c):ta(c)?c:{}:s=!1),o.push(f),i.push(l),s?n[r]=e(l,f,u,o,i):(l===l?l!==c:c===c)&&(n[r]=l)}function qt(n){return function(t){return null==t?x:t[n]}}function Pt(t,r){var e=r.length,u=vt(t,r);for(r.sort(n);e--;){var o=parseFloat(r[e]);if(o!=i&&Er(o)){var i=o;yi.call(t,o,1)}}return u}function Kt(n,t){return n+si(Ci()*(t-n+1))}function Vt(n,t,r,e,u){return u(n,function(n,u,o){r=e?(e=!1,n):t(r,n,u,o)}),r}function Yt(n,t,r){var e=-1,u=n.length;t=null==t?0:+t||0,0>t&&(t=-t>u?0:u+t),r="undefined"==typeof r||r>u?u:+r||0,0>r&&(r+=u),u=t>r?0:r-t>>>0,t>>>=0;for(var o=zo(u);++e<u;)o[e]=n[e+t];return o}function Gt(n,t){var r;return bt(n,function(n,e,u){return r=t(n,e,u),!r}),!!r}function Jt(n,r){var e=-1,u=mr(),o=n.length,i=u==t,a=i&&o>=200,f=a&&Mi(),c=[];f?(u=Hn,i=!1):(a=!1,f=r?[]:c);n:for(;++e<o;){var l=n[e],s=r?r(l,e,n):l;if(i&&l===l){for(var p=f.length;p--;)if(f[p]===s)continue n;r&&f.push(s),c.push(l)}else u(f,s)<0&&((r||a)&&f.push(s),c.push(l))}return c}function Xt(n,t){for(var r=-1,e=t.length,u=zo(e);++r<e;)u[r]=n[t[r]];return u}function Zt(n,t){var r=n;r instanceof Dn&&(r=r.value());for(var e=-1,u=t.length;++e<u;){var o=[r],i=t[e];hi.apply(o,i.args),r=i.func.apply(i.thisArg,o)}return r}function Ht(n,t,r){var e=0,u=n?n.length:e;if("number"==typeof t&&t===t&&Wi>=u){for(;u>e;){var o=e+u>>>1,i=n[o];(r?t>=i:t>i)?e=o+1:u=o}return u}return Qt(n,t,Co,r)}function Qt(n,t,r,e){t=r(t);for(var u=0,o=n?n.length:0,i=t!==t,a="undefined"==typeof t;o>u;){var f=si((u+o)/2),c=r(n[f]),l=c===c;if(i)var s=l||e;else s=a?l&&(e||"undefined"!=typeof c):e?t>=c:t>c;s?u=f+1:o=f}return Ri(o,Ui)}function nr(n,t,r){if("function"!=typeof n)return Co;if("undefined"==typeof t)return n;switch(r){case 1:return function(r){return n.call(t,r)};case 3:return function(r,e,u){return n.call(t,r,e,u)};case 4:return function(r,e,u,o){return n.call(t,r,e,u,o)};case 5:return function(r,e,u,o,i){return n.call(t,r,e,u,o,i)}}return function(){return n.apply(t,arguments)}}function tr(n){return fi.call(n,0)}function rr(n,t,r){for(var e=r.length,u=-1,o=Ei(n.length-e,0),i=-1,a=t.length,f=zo(o+a);++i<a;)f[i]=t[i];for(;++u<e;)f[r[u]]=n[u];for(;o--;)f[i++]=n[u++];return f}function er(n,t,r){for(var e=-1,u=r.length,o=-1,i=Ei(n.length-u,0),a=-1,f=t.length,c=zo(i+f);++o<i;)c[o]=n[o];for(var l=o;++a<f;)c[l+a]=t[a];for(;++e<u;)c[l+r[e]]=n[o++];return c}function ur(n,t){return function(r,e,u){var o=t?t():{};if(e=dr(e,u,3),Hi(r))for(var i=-1,a=r.length;++i<a;){var f=r[i];n(o,f,e(f,i,r),r)}else bt(r,function(t,r,u){n(o,t,e(t,r,u),u)});return o}}function or(n){return function(){var t=arguments.length,r=arguments[0];if(2>t||null==r)return r;if(t>3&&Rr(arguments[1],arguments[2],arguments[3])&&(t=2),t>3&&"function"==typeof arguments[t-2])var e=nr(arguments[--t-1],arguments[t--],5);else t>2&&"function"==typeof arguments[t-1]&&(e=arguments[--t]);for(var u=0;++u<t;){var o=arguments[u];o&&n(r,o,e)}return r}}function ir(n,t){function r(){return(this instanceof r?e:n).apply(t,arguments)}var e=fr(n);return r}function ar(n){return function(t){for(var r=-1,e=Ro(co(t)),u=e.length,o="";++r<u;)o=n(o,e[r],r);return o}}function fr(n){return function(){var t=Di(n.prototype),r=n.apply(t,arguments);return ku(r)?r:t}}function cr(n,t){return function(r,e,u){u&&Rr(r,e,u)&&(e=null);var i=dr(),a=null==e;if(i===yt&&a||(a=!1,e=i(e,u,3)),a){var f=Hi(r);if(f||!Wu(r))return n(f?r:Wr(r));e=o}return yr(r,e,t)}}function lr(n,t,r,e,u,o,i,a,f,c){function l(){for(var w=arguments.length,b=w,x=zo(w);b--;)x[b]=arguments[b];if(e&&(x=rr(x,e,u)),o&&(x=er(x,o,i)),v||y){var A=l.placeholder,R=g(x,A);if(w-=R.length,c>w){var I=a?nt(a):null,k=Ei(c-w,0),T=v?R:null,S=v?null:R,N=v?x:null,U=v?null:x;t|=v?O:C,t&=~(v?C:O),_||(t&=~(j|E));var W=lr(n,t,r,N,T,U,S,I,f,k);return W.placeholder=A,W}}var F=p?r:this;return h&&(n=F[m]),a&&(x=Sr(x,a)),s&&f<x.length&&(x.length=f),(this instanceof l?d||fr(n):n).apply(F,x)}var s=t&S,p=t&j,h=t&E,v=t&I,_=t&R,y=t&k,d=!h&&fr(n),m=n;return l}function sr(n,t,r){var e=n.length;if(t=+t,e>=t||!Ai(t))return"";var u=t-e;return r=null==r?" ":r+"",yo(r,ci(u/r.length)).slice(0,u)}function pr(n,t,r,e){function u(){for(var t=-1,a=arguments.length,f=-1,c=e.length,l=zo(a+c);++f<c;)l[f]=e[f];for(;a--;)l[f++]=arguments[++t];return(this instanceof u?i:n).apply(o?r:this,l)}var o=t&j,i=fr(n);return u}function hr(n,t,r,e,u,o,i,a){var f=t&E;if(!f&&"function"!=typeof n)throw new Xo(D);var c=e?e.length:0;if(c||(t&=~(O|C),e=u=null),c-=u?u.length:0,t&C){var l=e,s=u;e=u=null}var p=!f&&qi(n),h=[n,t,r,e,u,l,s,o,i,a];if(p&&p!==!0&&(Or(h,p),t=h[1],a=h[9]),h[9]=null==a?f?0:n.length:Ei(a-c,0)||0,t==j)var v=ir(h[0],h[2]);else v=t!=O&&t!=(j|O)||h[4].length?lr.apply(x,h):pr.apply(x,h);var _=p?zi:Pi;return _(v,h)}function vr(n,t,r,e,u,o,i){var a=-1,f=n.length,c=t.length,l=!0;if(f!=c&&!(u&&c>f))return!1;for(;l&&++a<f;){var s=n[a],p=t[a];if(l=x,e&&(l=u?e(p,s,a):e(s,p,a)),"undefined"==typeof l)if(u)for(var h=c;h--&&(p=t[h],!(l=s&&s===p||r(s,p,e,u,o,i))););else l=s&&s===p||r(s,p,e,u,o,i)}return!!l}function _r(n,t,r){switch(r){case P:case K:return+n==+t;case V:return n.name==t.name&&n.message==t.message;case J:return n!=+n?t!=+t:0==n?1/n==1/t:n==+t;case Z:case Q:return n==t+""}return!1}function gr(n,t,r,e,u,o,i){var a=ea(n),f=a.length,c=ea(t),l=c.length;if(f!=l&&!u)return!1;for(var s,p=-1;++p<f;){var h=a[p],v=ri.call(t,h);if(v){var _=n[h],g=t[h];v=x,e&&(v=u?e(g,_,h):e(_,g,h)),"undefined"==typeof v&&(v=_&&_===g||r(_,g,e,u,o,i))}if(!v)return!1;s||(s="constructor"==h)}if(!s){var y=n.constructor,d=t.constructor;if(y!=d&&"constructor"in n&&"constructor"in t&&!("function"==typeof y&&y instanceof y&&"function"==typeof d&&d instanceof d))return!1}return!0}function yr(n,t,r){var e=r?Si:Ti,u=e,o=u;return bt(n,function(n,i,a){var f=t(n,i,a);((r?u>f:f>u)||f===e&&f===o)&&(u=f,o=n)}),o}function dr(n,t,r){var e=G.callback||ko;return e=e===ko?yt:e,r?e(n,t,r):e}function mr(n,r,e){var u=G.indexOf||Zr;return u=u===Zr?t:u,n?u(n,r,e):u}function wr(n,t,r){for(var e=-1,u=r?r.length:0;++e<u;){var o=r[e],i=o.size;switch(o.type){case"drop":n+=i;break;case"dropRight":t-=i;break;case"take":t=Ri(t,n+i);break;case"takeRight":n=Ei(n,t-i)}}return{start:n,end:t}}function br(n){var t=n.length,r=new n.constructor(t);return t&&"string"==typeof n[0]&&ri.call(n,"index")&&(r.index=n.index,r.input=n.input),r}function xr(n){var t=n.constructor;return"function"==typeof t&&t instanceof t||(t=Yo),new t}function Ar(n,t,r){var e=n.constructor;switch(t){case tn:return tr(n);case P:case K:return new e(+n);case rn:case en:case un:case on:case an:case fn:case cn:case ln:case sn:var u=n.buffer;return new e(r?tr(u):u,n.byteOffset,n.length);case J:case Q:return new e(n);case Z:var o=new e(n.source,An.exec(n));o.lastIndex=n.lastIndex}return o}function jr(n){var t=G.support,r=!(t.funcNames?n.name:t.funcDecomp);if(!r){var e=ni.call(n);t.funcNames||(r=!jn.test(e)),r||(r=Tn.test(e)||Tu(n),zi(n,r))}return r}function Er(n,t){return n=+n,t=null==t?Li:t,n>-1&&n%1==0&&t>n}function Rr(n,t,r){if(!ku(r))return!1;var e=typeof t;if("number"==e)var u=r.length,o=Ir(u)&&Er(t,u);else o="string"==e&&t in r;var i=r[t];return o&&(n===n?n===i:i!==i)}function Ir(n){return"number"==typeof n&&n>-1&&n%1==0&&Li>=n}function kr(n){return n===n&&(0===n?1/n>0:!ku(n))}function Or(n,t){var r=n[1],e=t[1],u=r|e,o=S|T,i=j|E,a=o|i|R|k,f=r&S&&!(e&S),c=r&T&&!(e&T),l=(c?n:t)[7],s=(f?n:t)[8],p=!(r>=T&&e>i||r>i&&e>=T),h=u>=o&&a>=u&&(T>r||(c||f)&&l.length<=s);if(!p&&!h)return n;e&j&&(n[2]=t[2],u|=r&j?0:R);var v=t[3];if(v){var _=n[3];n[3]=_?rr(_,v,t[4]):nt(v),n[4]=_?g(n[3],z):nt(t[4])}return v=t[5],v&&(_=n[5],n[5]=_?er(_,v,t[6]):nt(v),n[6]=_?g(n[5],z):nt(t[6])),v=t[7],v&&(n[7]=nt(v)),e&S&&(n[8]=null==n[8]?t[8]:Ri(n[8],t[8])),null==n[9]&&(n[9]=t[9]),n[0]=t[0],n[1]=u,n}function Cr(n,t){n=Fr(n);for(var r=-1,e=t.length,u={};++r<e;){var o=t[r];o in n&&(u[o]=n[o])}return u}function Tr(n,t){var r={};return Ct(n,function(n,e,u){t(n,e,u)&&(r[e]=n)}),r}function Sr(n,t){for(var r=n.length,e=Ri(t.length,r),u=nt(n);e--;){var o=t[e];n[e]=Er(o,r)?u[o]:x}return n}function Nr(n){var t;G.support;if(!v(n)||ui.call(n)!=X||!ri.call(n,"constructor")&&(t=n.constructor,"function"==typeof t&&!(t instanceof t)))return!1;var r;return Ct(n,function(n,t){r=t}),"undefined"==typeof r||ri.call(n,r)}function Ur(n){for(var t=Zu(n),r=t.length,e=r&&n.length,u=G.support,o=e&&Ir(e)&&(Hi(n)||u.nonEnumArgs&&bu(n)),i=-1,a=[];++i<r;){var f=t[i];(o&&Er(f,e)||ri.call(n,f))&&a.push(f)}return a}function Wr(n){return null==n?[]:Ir(n.length)?ku(n)?n:Yo(n):uo(n)}function Fr(n){return ku(n)?n:Yo(n)}function Lr(n){return n instanceof Dn?n.clone():new nn(n.__wrapped__,n.__chain__,nt(n.__actions__))}function $r(n,t,r){t=(r?Rr(n,t,r):null==t)?1:Ei(+t||1,1);for(var e=0,u=n?n.length:0,o=-1,i=zo(ci(u/t));u>e;)i[++o]=Yt(n,e,e+=t);return i}function Br(n){for(var t=-1,r=n?n.length:0,e=-1,u=[];++t<r;){var o=n[t];o&&(u[++e]=o)}return u}function Dr(){for(var n=-1,t=arguments.length;++n<t;){var r=arguments[n];if(Hi(r)||bu(r))break}return wt(r,It(arguments,!1,!0,++n))}function zr(n,t,r){var e=n?n.length:0;return e?((r?Rr(n,t,r):null==t)&&(t=1),Yt(n,0>t?0:t)):[]}function Mr(n,t,r){var e=n?n.length:0;return e?((r?Rr(n,t,r):null==t)&&(t=1),t=e-(+t||0),Yt(n,0,0>t?0:t)):[]}function qr(n,t,r){var e=n?n.length:0;if(!e)return[];for(t=dr(t,r,3);e--&&t(n[e],e,n););return Yt(n,0,e+1)}function Pr(n,t,r){var e=n?n.length:0;if(!e)return[];var u=-1;for(t=dr(t,r,3);++u<e&&t(n[u],u,n););return Yt(n,u)}function Kr(n,t,r,e){var u=n?n.length:0;return u?(r&&"number"!=typeof r&&Rr(n,t,r)&&(r=0,e=u),jt(n,t,r,e)):[]}function Vr(n,t,r){var e=-1,u=n?n.length:0;for(t=dr(t,r,3);++e<u;)if(t(n[e],e,n))return e;return-1}function Yr(n,t,r){var e=n?n.length:0;for(t=dr(t,r,3);e--;)if(t(n[e],e,n))return e;return-1}function Gr(n){return n?n[0]:x}function Jr(n,t,r){var e=n?n.length:0;return r&&Rr(n,t,r)&&(t=!1),e?It(n,t):[]}function Xr(n){var t=n?n.length:0;return t?It(n,!0):[]}function Zr(n,r,e){var u=n?n.length:0;if(!u)return-1;if("number"==typeof e)e=0>e?Ei(u+e,0):e||0;else if(e){var o=Ht(n,r),i=n[o];return(r===r?r===i:i!==i)?o:-1}return t(n,r,e)}function Hr(n){return Mr(n,1)}function Qr(){for(var n=[],r=-1,e=arguments.length,u=[],o=mr(),i=o==t;++r<e;){var a=arguments[r];(Hi(a)||bu(a))&&(n.push(a),u.push(i&&a.length>=120&&Mi(r&&a)))}e=n.length;var f=n[0],c=-1,l=f?f.length:0,s=[],p=u[0];n:for(;++c<l;)if(a=f[c],(p?Hn(p,a):o(s,a))<0){for(r=e;--r;){var h=u[r];if((h?Hn(h,a):o(n[r],a))<0)continue n}p&&p.push(a),s.push(a)}return s}function ne(n){var t=n?n.length:0;return t?n[t-1]:x}function te(n,t,r){var e=n?n.length:0;if(!e)return-1;var u=e;if("number"==typeof r)u=(0>r?Ei(e+r,0):Ri(r||0,e-1))+1;else if(r){u=Ht(n,t,!0)-1;var o=n[u];return(t===t?t===o:o!==o)?u:-1}if(t!==t)return h(n,u,!0);for(;u--;)if(n[u]===t)return u;return-1}function re(){var n=arguments[0];if(!n||!n.length)return n;for(var t=0,r=mr(),e=arguments.length;++t<e;)for(var u=0,o=arguments[t];(u=r(n,o,u))>-1;)yi.call(n,u,1);return n}function ee(n){return Pt(n||[],It(arguments,!1,!1,1))}function ue(n,t,r){var e=-1,u=n?n.length:0,o=[];for(t=dr(t,r,3);++e<u;){var i=n[e];t(i,e,n)&&(o.push(i),yi.call(n,e--,1),u--)}return o}function oe(n){return zr(n,1)}function ie(n,t,r){var e=n?n.length:0;return e?(r&&"number"!=typeof r&&Rr(n,t,r)&&(t=0,r=e),Yt(n,t,r)):[]}function ae(n,t,r,e){var u=dr(r);return u===yt&&null==r?Ht(n,t):Qt(n,t,u(r,e,1))}function fe(n,t,r,e){var u=dr(r);return u===yt&&null==r?Ht(n,t,!0):Qt(n,t,u(r,e,1),!0)}function ce(n,t,r){var e=n?n.length:0;return e?((r?Rr(n,t,r):null==t)&&(t=1),Yt(n,0,0>t?0:t)):[]}function le(n,t,r){var e=n?n.length:0;return e?((r?Rr(n,t,r):null==t)&&(t=1),t=e-(+t||0),Yt(n,0>t?0:t)):[]}function se(n,t,r){var e=n?n.length:0;if(!e)return[];for(t=dr(t,r,3);e--&&t(n[e],e,n););return Yt(n,e+1)}function pe(n,t,r){var e=n?n.length:0;if(!e)return[];var u=-1;for(t=dr(t,r,3);++u<e&&t(n[u],u,n););return Yt(n,0,u)}function he(){return Jt(It(arguments,!1,!0))}function ve(n,r,e,u){var o=n?n.length:0;if(!o)return[];null!=r&&"boolean"!=typeof r&&(u=e,e=Rr(n,r,u)?null:r,r=!1);var i=dr();return(i!==yt||null!=e)&&(e=i(e,u,3)),r&&mr()==t?y(n,e):Jt(n,e)}function _e(n){for(var t=-1,r=(n&&n.length&&it(ot(n,ti)))>>>0,e=zo(r);++t<r;)e[t]=ot(n,qt(t));return e}function ge(n){return wt(n,Yt(arguments,1))}function ye(){for(var n=-1,t=arguments.length;++n<t;){var r=arguments[n];if(Hi(r)||bu(r))var e=e?wt(e,r).concat(wt(r,e)):r}return e?Jt(e):[]}function de(){for(var n=arguments.length,t=zo(n);n--;)t[n]=arguments[n];return _e(t)}function me(n,t){var r=-1,e=n?n.length:0,u={};for(!e||t||Hi(n[0])||(t=[]);++r<e;){var o=n[r];t?u[o]=t[r]:o&&(u[o[0]]=o[1])}return u}function we(n){var t=G(n);return t.__chain__=!0,t}function be(n,t,r){return t.call(r,n),n}function xe(n,t,r){return t.call(r,n)}function Ae(){return we(this)}function je(){return new nn(this.value(),this.__chain__)}function Ee(n){for(var t,r=this;r instanceof H;){var e=Lr(r);t?u.__wrapped__=e:t=e;var u=e;r=r.__wrapped__}return u.__wrapped__=n,t}function Re(){var n=this.__wrapped__;return n instanceof Dn?(this.__actions__.length&&(n=new Dn(this)),new nn(n.reverse(),this.__chain__)):this.thru(function(n){return n.reverse()})}function Ie(){return this.value()+""}function ke(){return Zt(this.__wrapped__,this.__actions__)}function Oe(n){var t=n?n.length:0;return Ir(t)&&(n=Wr(n)),vt(n,It(arguments,!1,!1,1))}function Ce(n,t,r){var e=Hi(n)?et:At;return("function"!=typeof t||"undefined"!=typeof r)&&(t=dr(t,r,3)),e(n,t)}function Te(n,t,r){var e=Hi(n)?ut:Et;return t=dr(t,r,3),e(n,t)}function Se(n,t,r){if(Hi(n)){var e=Vr(n,t,r);return e>-1?n[e]:x}return t=dr(t,r,3),Rt(n,t,bt)}function Ne(n,t,r){return t=dr(t,r,3),Rt(n,t,xt)}function Ue(n,t){return Se(n,Bt(t))}function We(n,t,r){return"function"==typeof t&&"undefined"==typeof r&&Hi(n)?tt(n,t):bt(n,nr(t,r,3))}function Fe(n,t,r){return"function"==typeof t&&"undefined"==typeof r&&Hi(n)?rt(n,t):xt(n,nr(t,r,3))}function Le(n,t,r){var e=n?n.length:0;return Ir(e)||(n=uo(n),e=n.length),e?(r="number"==typeof r?0>r?Ei(e+r,0):r||0:0,"string"==typeof n||!Hi(n)&&Wu(n)?e>r&&n.indexOf(t,r)>-1:mr(n,t,r)>-1):!1}function $e(n,t){return Ut(n,t,Yt(arguments,2))}function Be(n,t,r){var e=Hi(n)?ot:$t;return t=dr(t,r,3),e(n,t)}function De(n,t){return Be(n,qt(t))}function ze(n,t,r,e){var u=Hi(n)?ft:Vt;return u(n,dr(t,e,4),r,arguments.length<3,bt)}function Me(n,t,r,e){var u=Hi(n)?ct:Vt;return u(n,dr(t,e,4),r,arguments.length<3,xt)}function qe(n,t,r){var e=Hi(n)?ut:Et;return t=dr(t,r,3),e(n,function(n,r,e){return!t(n,r,e)})}function Pe(n,t,r){if(r?Rr(n,t,r):null==t){n=Wr(n);var e=n.length;return e>0?n[Kt(0,e-1)]:x}var u=Ke(n);return u.length=Ri(0>t?0:+t||0,u.length),u}function Ke(n){n=Wr(n);for(var t=-1,r=n.length,e=zo(r);++t<r;){var u=Kt(0,t);t!=u&&(e[t]=e[u]),e[u]=n[t]}return e}function Ve(n){var t=n?n.length:0;return Ir(t)?t:ea(n).length}function Ye(n,t,r){var e=Hi(n)?lt:Gt;return("function"!=typeof t||"undefined"!=typeof r)&&(t=dr(t,r,3)),e(n,t)}function Ge(n,t,r){var u=-1,o=n?n.length:0,i=Ir(o)?zo(o):[];return r&&Rr(n,t,r)&&(t=null),t=dr(t,r,3),bt(n,function(n,r,e){i[++u]={criteria:t(n,r,e),index:u,value:n}}),e(i,f)}function Je(n){var t=arguments;t.length>3&&Rr(t[1],t[2],t[3])&&(t=[n,t[1]]);var r=-1,u=n?n.length:0,o=It(t,!1,!1,1),i=Ir(u)?zo(u):[];return bt(n,function(n){for(var t=o.length,e=zo(t);t--;)e[t]=null==n?x:n[o[t]];i[++r]={criteria:e,index:r,value:n}}),e(i,c)}function Xe(n,t){return Te(n,Bt(t))}function Ze(n,t){if("function"!=typeof t){if("function"!=typeof n)throw new Xo(D);var r=n;n=t,t=r}return n=Ai(n=+n)?n:0,function(){return--n<1?t.apply(this,arguments):void 0}}function He(n,t,r){return r&&Rr(n,t,r)&&(t=null),t=n&&null==t?n.length:Ei(+t||0,0),hr(n,S,null,null,null,null,t)}function Qe(n,t){var r;if("function"!=typeof t){if("function"!=typeof n)throw new Xo(D);var e=n;n=t,t=e}return function(){return--n>0?r=t.apply(this,arguments):t=null,r}}function nu(n,t){var r=j;if(arguments.length>2){var e=Yt(arguments,2),u=g(e,nu.placeholder);r|=O}return hr(n,r,t,e,u)}function tu(n){return gt(n,arguments.length>1?It(arguments,!1,!1,1):Gu(n))}function ru(n,t){var r=j|E;if(arguments.length>2){var e=Yt(arguments,2),u=g(e,ru.placeholder);r|=O}return hr(t,r,n,e,u)}function eu(n,t,r){r&&Rr(n,t,r)&&(t=null);var e=hr(n,I,null,null,null,null,null,t);return e.placeholder=eu.placeholder,e}function uu(n,t,r){r&&Rr(n,t,r)&&(t=null);var e=hr(n,k,null,null,null,null,null,t);return e.placeholder=uu.placeholder,e}function ou(n,t,r){function e(){p&&li(p),f&&li(f),f=p=h=x}function u(){var r=t-(Zi()-l);if(0>=r||r>t){f&&li(f);var e=h;f=p=h=x,e&&(v=Zi(),c=n.apply(s,a),p||f||(a=s=null))}else p=gi(u,r)}function o(){p&&li(p),f=p=h=x,(g||_!==t)&&(v=Zi(),c=n.apply(s,a),p||f||(a=s=null))}function i(){if(a=arguments,l=Zi(),s=this,h=g&&(p||!y),_===!1)var r=y&&!p;else{f||y||(v=l);var e=_-(l-v),i=0>=e||e>_;i?(f&&(f=li(f)),v=l,c=n.apply(s,a)):f||(f=gi(o,e))}return i&&p?p=li(p):p||t===_||(p=gi(u,t)),r&&(i=!0,c=n.apply(s,a)),!i||p||f||(a=s=null),c}var a,f,c,l,s,p,h,v=0,_=!1,g=!0;if("function"!=typeof n)throw new Xo(D);if(t=0>t?0:t,r===!0){var y=!0;g=!1}else ku(r)&&(y=r.leading,_="maxWait"in r&&Ei(+r.maxWait||0,t),g="trailing"in r?r.trailing:g);return i.cancel=e,i}function iu(n){return mt(n,1,arguments,1)}function au(n,t){return mt(n,t,arguments,2)}function fu(){var n=arguments,t=n.length;if(!t)return function(){return arguments[0]};if(!et(n,r))throw new Xo(D);return function(){for(var r=0,e=n[r].apply(this,arguments);++r<t;)e=n[r].call(this,e);return e}}function cu(){var n=arguments,t=n.length-1;if(0>t)return function(){return arguments[0]};if(!et(n,r))throw new Xo(D);return function(){for(var r=t,e=n[r].apply(this,arguments);r--;)e=n[r].call(this,e);return e}}function lu(n,t){if("function"!=typeof n||t&&"function"!=typeof t)throw new Xo(D);var r=function(){var e=r.cache,u=t?t.apply(this,arguments):arguments[0];if(e.has(u))return e.get(u);var o=n.apply(this,arguments);return e.set(u,o),o};return r.cache=new lu.Cache,r}function su(n){if("function"!=typeof n)throw new Xo(D);return function(){return!n.apply(this,arguments)}}function pu(n){return Qe(n,2)}function hu(n){var t=Yt(arguments,1),r=g(t,hu.placeholder);return hr(n,O,null,t,r)}function vu(n){var t=Yt(arguments,1),r=g(t,vu.placeholder);return hr(n,C,null,t,r)}function _u(n){var t=It(arguments,!1,!1,1);return hr(n,T,null,null,null,t)}function gu(n){if("function"!=typeof n)throw new Xo(D);return function(t){return n.apply(this,t)}}function yu(n,t,r){var e=!0,u=!0;if("function"!=typeof n)throw new Xo(D);return r===!1?e=!1:ku(r)&&(e="leading"in r?!!r.leading:e,u="trailing"in r?!!r.trailing:u),Bn.leading=e,Bn.maxWait=+t,Bn.trailing=u,ou(n,t,Bn)}function du(n,t){return t=null==t?Co:t,hr(t,O,null,[n],[])}function mu(n,t,r,e){return t&&"boolean"!=typeof t&&Rr(n,t,r)?t=!1:"function"==typeof t&&(e=r,r=t,t=!1),r="function"==typeof r&&nr(r,e,1),dt(n,t,r)}function wu(n,t,r){return t="function"==typeof t&&nr(t,r,1),dt(n,!0,t)}function bu(n){var t=v(n)?n.length:x;return Ir(t)&&ui.call(n)==M||!1}function xu(n){return n===!0||n===!1||v(n)&&ui.call(n)==P||!1}function Au(n){return v(n)&&ui.call(n)==K||!1}function ju(n){return n&&1===n.nodeType&&v(n)&&ui.call(n).indexOf("Element")>-1||!1}function Eu(n){if(null==n)return!0;var t=n.length;return Ir(t)&&(Hi(n)||Wu(n)||bu(n)||v(n)&&na(n.splice))?!t:!ea(n).length}function Ru(n,t,r,e){if(r="function"==typeof r&&nr(r,e,3),!r&&kr(n)&&kr(t))return n===t;var u=r?r(n,t):x;return"undefined"==typeof u?Wt(n,t,r):!!u}function Iu(n){return v(n)&&"string"==typeof n.message&&ui.call(n)==V||!1}function ku(n){var t=typeof n;return"function"==t||n&&"object"==t||!1}function Ou(n,t,r,e){var u=ea(t),o=u.length;if(r="function"==typeof r&&nr(r,e,3),!r&&1==o){var i=u[0],a=t[i];if(kr(a))return null!=n&&a===n[i]&&ri.call(n,i)}for(var f=zo(o),c=zo(o);o--;)a=f[o]=t[u[o]],c[o]=kr(a);return Lt(n,u,f,c,r)}function Cu(n){return Nu(n)&&n!=+n}function Tu(n){return null==n?!1:ui.call(n)==Y?ii.test(ni.call(n)):v(n)&&Rn.test(n)||!1}function Su(n){return null===n}function Nu(n){return"number"==typeof n||v(n)&&ui.call(n)==J||!1}function Uu(n){return v(n)&&ui.call(n)==Z||!1}function Wu(n){return"string"==typeof n||v(n)&&ui.call(n)==Q||!1}function Fu(n){return v(n)&&Ir(n.length)&&Ln[ui.call(n)]||!1}function Lu(n){return"undefined"==typeof n}function $u(n){var t=n?n.length:0;return Ir(t)?t?nt(n):[]:uo(n)}function Bu(n){return _t(n,Zu(n))}function Du(n,t,r){var e=Di(n);return r&&Rr(n,t,r)&&(t=null),t?_t(t,e,ea(t)):e}function zu(n){if(null==n)return n;var t=nt(arguments);return t.push(st),ra.apply(x,t)}function Mu(n,t,r){return t=dr(t,r,3),Rt(n,t,Tt,!0)}function qu(n,t,r){return t=dr(t,r,3),Rt(n,t,St,!0)}function Pu(n,t,r){return("function"!=typeof t||"undefined"!=typeof r)&&(t=nr(t,r,3)),kt(n,t,Zu)}function Ku(n,t,r){return t=nr(t,r,3),Ot(n,t,Zu)}function Vu(n,t,r){return("function"!=typeof t||"undefined"!=typeof r)&&(t=nr(t,r,3)),Tt(n,t)}function Yu(n,t,r){return t=nr(t,r,3),Ot(n,t,ea)}function Gu(n){return Nt(n,Zu(n))}function Ju(n,t){return n?ri.call(n,t):!1}function Xu(n,t,r){r&&Rr(n,t,r)&&(t=null);for(var e=-1,u=ea(n),o=u.length,i={};++e<o;){var a=u[e],f=n[a];t?ri.call(i,f)?i[f].push(a):i[f]=[a]:i[f]=a}return i}function Zu(n){if(null==n)return[];ku(n)||(n=Yo(n));var t=n.length;t=t&&Ir(t)&&(Hi(n)||Bi.nonEnumArgs&&bu(n))&&t||0;for(var r=n.constructor,e=-1,u="function"==typeof r&&r.prototype===n,o=zo(t),i=t>0;++e<t;)o[e]=e+"";for(var a in n)i&&Er(a,t)||"constructor"==a&&(u||!ri.call(n,a))||o.push(a);return o}function Hu(n,t,r){var e={};return t=dr(t,r,3),Tt(n,function(n,r,u){e[r]=t(n,r,u)}),e}function Qu(n,t,r){if(null==n)return{};if("function"!=typeof t){var e=ot(It(arguments,!1,!1,1),Jo);return Cr(n,wt(Zu(n),e))}return t=nr(t,r,3),Tr(n,function(n,r,e){return!t(n,r,e)})}function no(n){for(var t=-1,r=ea(n),e=r.length,u=zo(e);++t<e;){var o=r[t];u[t]=[o,n[o]]}return u}function to(n,t,r){return null==n?{}:"function"==typeof t?Tr(n,nr(t,r,3)):Cr(n,It(arguments,!1,!1,1))}function ro(n,t,r){var e=null==n?x:n[t];return"undefined"==typeof e&&(e=r),na(e)?e.call(n):e}function eo(n,t,r,e){var u=Hi(n)||Fu(n);if(t=dr(t,e,4),null==r)if(u||ku(n)){var o=n.constructor;r=u?Hi(n)?new o:[]:Di(na(o)&&o.prototype)}else r={};return(u?tt:Tt)(n,function(n,e,u){return t(r,n,e,u)}),r}function uo(n){return Xt(n,ea(n))}function oo(n){return Xt(n,Zu(n))}function io(n,t,r){return t=+t||0,"undefined"==typeof r?(r=t,t=0):r=+r||0,n>=t&&r>n}function ao(n,t,r){r&&Rr(n,t,r)&&(t=r=null);var e=null==n,u=null==t;if(null==r&&(u&&"boolean"==typeof n?(r=n,n=1):"boolean"==typeof t&&(r=t,u=!0)),e&&u&&(t=1,u=!1),n=+n||0,u?(t=n,n=0):t=+t||0,r||n%1||t%1){var o=Ci();return Ri(n+o*(t-n+parseFloat("1e-"+((o+"").length-1))),t)}return Kt(n,t)}function fo(n){return n=u(n),n&&n.charAt(0).toUpperCase()+n.slice(1)}function co(n){return n=u(n),n&&n.replace(In,l);
    }function lo(n,t,r){n=u(n),t+="";var e=n.length;return r=("undefined"==typeof r?e:Ri(0>r?0:+r||0,e))-t.length,r>=0&&n.indexOf(t,r)==r}function so(n){return n=u(n),n&&dn.test(n)?n.replace(gn,s):n}function po(n){return n=u(n),n&&Cn.test(n)?n.replace(On,"\\/*#replaceCode#*/"):n}function ho(n,t,r){n=u(n),t=+t;var e=n.length;if(e>=t||!Ai(t))return n;var o=(t-e)/2,i=si(o),a=ci(o);return r=sr("",a,r),r.slice(0,i)+n+r}function vo(n,t,r){return n=u(n),n&&sr(n,t,r)+n}function _o(n,t,r){return n=u(n),n&&n+sr(n,t,r)}function go(n,t,r){return r&&Rr(n,t,r)&&(t=0),Oi(n,t)}function yo(n,t){var r="";if(n=u(n),t=+t,1>t||!n||!Ai(t))return r;do t%2&&(r+=n),t=si(t/2),n+=n;while(t);return r}function mo(n,t,r){return n=u(n),r=null==r?0:Ri(0>r?0:+r||0,n.length),n.lastIndexOf(t,r)==r}function wo(n,t,r){var e=G.templateSettings;r&&Rr(n,t,r)&&(t=r=null),n=u(n),t=ht(ht({},r||t),e,pt);var o,i,a=ht(ht({},t.imports),e.imports,pt),f=ea(a),c=Xt(a,f),l=0,s=t.interpolate||kn,h="__p += '",v=Go((t.escape||kn).source+"|"+s.source+"|"+(s===bn?xn:kn).source+"|"+(t.evaluate||kn).source+"|$","g"),_="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++Fn+"]")+"\n";n.replace(v,function(t,r,e,u,a,f){return e||(e=u),h+=n.slice(l,f).replace(Sn,p),r&&(o=!0,h+="' +\n__e("+r+") +\n'"),a&&(i=!0,h+="';\n"+a+";\n__p += '"),e&&(h+="' +\n((__t = ("+e+")) == null ? '' : __t) +\n'"),l=f+t.length,t}),h+="';\n";var g=t.variable;g||(h="with (obj) {\n"+h+"\n}\n"),h=(i?h.replace(pn,""):h).replace(hn,"$1").replace(vn,"$1;"),h="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(i?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var y=Io(function(){return Po(f,_+"return "+h).apply(x,c)});if(y.source=h,Iu(y))throw y;return y}function bo(n,t,r){var e=n;return(n=u(n))?(r?Rr(e,t,r):null==t)?n.slice(d(n),m(n)+1):(t+="",n.slice(i(n,t),a(n,t)+1)):n}function xo(n,t,r){var e=n;return n=u(n),n?(r?Rr(e,t,r):null==t)?n.slice(d(n)):n.slice(i(n,t+"")):n}function Ao(n,t,r){var e=n;return n=u(n),n?(r?Rr(e,t,r):null==t)?n.slice(0,m(n)+1):n.slice(0,a(n,t+"")+1):n}function jo(n,t,r){r&&Rr(n,t,r)&&(t=null);var e=N,o=U;if(null!=t)if(ku(t)){var i="separator"in t?t.separator:i;e="length"in t?+t.length||0:e,o="omission"in t?u(t.omission):o}else e=+t||0;if(n=u(n),e>=n.length)return n;var a=e-o.length;if(1>a)return o;var f=n.slice(0,a);if(null==i)return f+o;if(Uu(i)){if(n.slice(a).search(i)){var c,l,s=n.slice(0,a);for(i.global||(i=Go(i.source,(An.exec(i)||"")+"g")),i.lastIndex=0;c=i.exec(s);)l=c.index;f=f.slice(0,null==l?a:l)}}else if(n.indexOf(i,a)!=a){var p=f.lastIndexOf(i);p>-1&&(f=f.slice(0,p))}return f+o}function Eo(n){return n=u(n),n&&yn.test(n)?n.replace(_n,w):n}function Ro(n,t,r){return r&&Rr(n,t,r)&&(t=null),n=u(n),n.match(t||Nn)||[]}function Io(){var n=arguments.length,t=arguments[0];try{for(var r=zo(n?n-1:0);--n>0;)r[n-1]=arguments[n];return t.apply(x,r)}catch(e){return Iu(e)?e:new qo(e)}}function ko(n,t,r){return r&&Rr(n,t,r)&&(t=null),v(n)?To(n):yt(n,t)}function Oo(n){return function(){return n}}function Co(n){return n}function To(n){return Bt(dt(n,!0))}function So(n,t){return Dt(n+"",dt(t,!0))}function No(n,t,r){if(null==r){var e=ku(t),u=e&&ea(t),o=u&&u.length&&Nt(t,u);(o?o.length:e)||(o=!1,r=t,t=n,n=this)}o||(o=Nt(t,ea(t)));var i=!0,a=-1,f=na(n),c=o.length;r===!1?i=!1:ku(r)&&"chain"in r&&(i=r.chain);for(;++a<c;){var l=o[a],s=t[l];n[l]=s,f&&(n.prototype[l]=function(t){return function(){var r=this.__chain__;if(i||r){var e=n(this.__wrapped__);return(e.__actions__=nt(this.__actions__)).push({func:t,args:arguments,thisArg:n}),e.__chain__=r,e}var u=[this.value()];return hi.apply(u,arguments),t.apply(n,u)}}(s))}return n}function Uo(){return _._=oi,this}function Wo(){}function Fo(n){return qt(n+"")}function Lo(n){return function(t){return null==n?x:n[t]}}function $o(n,t,r){r&&Rr(n,t,r)&&(t=r=null),n=+n||0,r=null==r?1:+r||0,null==t?(t=n,n=0):t=+t||0;for(var e=-1,u=Ei(ci((t-n)/(r||1)),0),o=zo(u);++e<u;)o[e]=n,n+=r;return o}function Bo(n,t,r){if(n=+n,1>n||!Ai(n))return[];var e=-1,u=zo(Ri(n,Ni));for(t=nr(t,r,1);++e<n;)Ni>e?u[e]=t(e):t(e);return u}function Do(n){var t=++ei;return u(n)+t}_=_?Xn.defaults(Kn.Object(),_,Xn.pick(Kn,Wn)):Kn;var zo=_.Array,Mo=_.Date,qo=_.Error,Po=_.Function,Ko=_.Math,Vo=_.Number,Yo=_.Object,Go=_.RegExp,Jo=_.String,Xo=_.TypeError,Zo=zo.prototype,Ho=Yo.prototype,Qo=(Qo=_.window)&&Qo.document,ni=Po.prototype.toString,ti=qt("length"),ri=Ho.hasOwnProperty,ei=0,ui=Ho.toString,oi=_._,ii=Go("^"+po(ui).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ai=Tu(ai=_.ArrayBuffer)&&ai,fi=Tu(fi=ai&&new ai(0).slice)&&fi,ci=Ko.ceil,li=_.clearTimeout,si=Ko.floor,pi=Tu(pi=Yo.getPrototypeOf)&&pi,hi=Zo.push,vi=Ho.propertyIsEnumerable,_i=Tu(_i=_.Set)&&_i,gi=_.setTimeout,yi=Zo.splice,di=Tu(di=_.Uint8Array)&&di,mi=Tu(mi=_.WeakMap)&&mi,wi=function(){try{var n=Tu(n=_.Float64Array)&&n,t=new n(new ai(10),0,1)&&n}catch(r){}return t}(),bi=Tu(bi=zo.isArray)&&bi,xi=Tu(xi=Yo.create)&&xi,Ai=_.isFinite,ji=Tu(ji=Yo.keys)&&ji,Ei=Ko.max,Ri=Ko.min,Ii=Tu(Ii=Mo.now)&&Ii,ki=Tu(ki=Vo.isFinite)&&ki,Oi=_.parseInt,Ci=Ko.random,Ti=Vo.NEGATIVE_INFINITY,Si=Vo.POSITIVE_INFINITY,Ni=Ko.pow(2,32)-1,Ui=Ni-1,Wi=Ni>>>1,Fi=wi?wi.BYTES_PER_ELEMENT:0,Li=Ko.pow(2,53)-1,$i=mi&&new mi,Bi=G.support={};!function(n){Bi.funcDecomp=!Tu(_.WinRTError)&&Tn.test(b),Bi.funcNames="string"==typeof Po.name;try{Bi.dom=11===Qo.createDocumentFragment().nodeType}catch(t){Bi.dom=!1}try{Bi.nonEnumArgs=!vi.call(arguments,1)}catch(t){Bi.nonEnumArgs=!0}}(0,0),G.templateSettings={escape:mn,evaluate:wn,interpolate:bn,variable:"",imports:{_:G}};var Di=function(){function n(){}return function(t){if(ku(t)){n.prototype=t;var r=new n;n.prototype=null}return r||_.Object()}}(),zi=$i?function(n,t){return $i.set(n,t),n}:Co;fi||(tr=ai&&di?function(n){var t=n.byteLength,r=wi?si(t/Fi):0,e=r*Fi,u=new ai(t);if(r){var o=new wi(u,0,r);o.set(new wi(n,0,r))}return t!=e&&(o=new di(u,e),o.set(new di(n,e))),u}:Oo(null));var Mi=xi&&_i?function(n){return new Zn(n)}:Oo(null),qi=$i?function(n){return $i.get(n)}:Wo,Pi=function(){var n=0,t=0;return function(r,e){var u=Zi(),o=F-(u-t);if(t=u,o>0){if(++n>=W)return r}else n=0;return zi(r,e)}}(),Ki=ur(function(n,t,r){ri.call(n,r)?++n[r]:n[r]=1}),Vi=ur(function(n,t,r){ri.call(n,r)?n[r].push(t):n[r]=[t]}),Yi=ur(function(n,t,r){n[r]=t}),Gi=cr(it),Ji=cr(at,!0),Xi=ur(function(n,t,r){n[r?0:1].push(t)},function(){return[[],[]]}),Zi=Ii||function(){return(new Mo).getTime()},Hi=bi||function(n){return v(n)&&Ir(n.length)&&ui.call(n)==q||!1};Bi.dom||(ju=function(n){return n&&1===n.nodeType&&v(n)&&!ta(n)||!1});var Qi=ki||function(n){return"number"==typeof n&&Ai(n)},na=r(/x/)||di&&!r(di)?function(n){return ui.call(n)==Y}:r,ta=pi?function(n){if(!n||ui.call(n)!=X)return!1;var t=n.valueOf,r=Tu(t)&&(r=pi(t))&&pi(r);return r?n==r||pi(n)==r:Nr(n)}:Nr,ra=or(ht),ea=ji?function(n){if(n)var t=n.constructor,r=n.length;return"function"==typeof t&&t.prototype===n||"function"!=typeof n&&r&&Ir(r)?Ur(n):ku(n)?ji(n):[]}:Ur,ua=or(zt),oa=ar(function(n,t,r){return t=t.toLowerCase(),n+(r?t.charAt(0).toUpperCase()+t.slice(1):t)}),ia=ar(function(n,t,r){return n+(r?"-":"")+t.toLowerCase()});8!=Oi(Un+"08")&&(go=function(n,t,r){return(r?Rr(n,t,r):null==t)?t=0:t&&(t=+t),n=bo(n),Oi(n,t||(En.test(n)?16:10))});var aa=ar(function(n,t,r){return n+(r?"_":"")+t.toLowerCase()}),fa=ar(function(n,t,r){return n+(r?" ":"")+(t.charAt(0).toUpperCase()+t.slice(1))});return G.prototype=H.prototype,nn.prototype=Di(H.prototype),nn.prototype.constructor=nn,Dn.prototype=Di(H.prototype),Dn.prototype.constructor=Dn,Pn.prototype["delete"]=Vn,Pn.prototype.get=Yn,Pn.prototype.has=Gn,Pn.prototype.set=Jn,Zn.prototype.push=Qn,lu.Cache=Pn,G.after=Ze,G.ary=He,G.assign=ra,G.at=Oe,G.before=Qe,G.bind=nu,G.bindAll=tu,G.bindKey=ru,G.callback=ko,G.chain=we,G.chunk=$r,G.compact=Br,G.constant=Oo,G.countBy=Ki,G.create=Du,G.curry=eu,G.curryRight=uu,G.debounce=ou,G.defaults=zu,G.defer=iu,G.delay=au,G.difference=Dr,G.drop=zr,G.dropRight=Mr,G.dropRightWhile=qr,G.dropWhile=Pr,G.fill=Kr,G.filter=Te,G.flatten=Jr,G.flattenDeep=Xr,G.flow=fu,G.flowRight=cu,G.forEach=We,G.forEachRight=Fe,G.forIn=Pu,G.forInRight=Ku,G.forOwn=Vu,G.forOwnRight=Yu,G.functions=Gu,G.groupBy=Vi,G.indexBy=Yi,G.initial=Hr,G.intersection=Qr,G.invert=Xu,G.invoke=$e,G.keys=ea,G.keysIn=Zu,G.map=Be,G.mapValues=Hu,G.matches=To,G.matchesProperty=So,G.memoize=lu,G.merge=ua,G.mixin=No,G.negate=su,G.omit=Qu,G.once=pu,G.pairs=no,G.partial=hu,G.partialRight=vu,G.partition=Xi,G.pick=to,G.pluck=De,G.property=Fo,G.propertyOf=Lo,G.pull=re,G.pullAt=ee,G.range=$o,G.rearg=_u,G.reject=qe,G.remove=ue,G.rest=oe,G.shuffle=Ke,G.slice=ie,G.sortBy=Ge,G.sortByAll=Je,G.spread=gu,G.take=ce,G.takeRight=le,G.takeRightWhile=se,G.takeWhile=pe,G.tap=be,G.throttle=yu,G.thru=xe,G.times=Bo,G.toArray=$u,G.toPlainObject=Bu,G.transform=eo,G.union=he,G.uniq=ve,G.unzip=_e,G.values=uo,G.valuesIn=oo,G.where=Xe,G.without=ge,G.wrap=du,G.xor=ye,G.zip=de,G.zipObject=me,G.backflow=cu,G.collect=Be,G.compose=cu,G.each=We,G.eachRight=Fe,G.extend=ra,G.iteratee=ko,G.methods=Gu,G.object=me,G.select=Te,G.tail=oe,G.unique=ve,No(G,G),G.attempt=Io,G.camelCase=oa,G.capitalize=fo,G.clone=mu,G.cloneDeep=wu,G.deburr=co,G.endsWith=lo,G.escape=so,G.escapeRegExp=po,G.every=Ce,G.find=Se,G.findIndex=Vr,G.findKey=Mu,G.findLast=Ne,G.findLastIndex=Yr,G.findLastKey=qu,G.findWhere=Ue,G.first=Gr,G.has=Ju,G.identity=Co,G.includes=Le,G.indexOf=Zr,G.inRange=io,G.isArguments=bu,G.isArray=Hi,G.isBoolean=xu,G.isDate=Au,G.isElement=ju,G.isEmpty=Eu,G.isEqual=Ru,G.isError=Iu,G.isFinite=Qi,G.isFunction=na,G.isMatch=Ou,G.isNaN=Cu,G.isNative=Tu,G.isNull=Su,G.isNumber=Nu,G.isObject=ku,G.isPlainObject=ta,G.isRegExp=Uu,G.isString=Wu,G.isTypedArray=Fu,G.isUndefined=Lu,G.kebabCase=ia,G.last=ne,G.lastIndexOf=te,G.max=Gi,G.min=Ji,G.noConflict=Uo,G.noop=Wo,G.now=Zi,G.pad=ho,G.padLeft=vo,G.padRight=_o,G.parseInt=go,G.random=ao,G.reduce=ze,G.reduceRight=Me,G.repeat=yo,G.result=ro,G.runInContext=b,G.size=Ve,G.snakeCase=aa,G.some=Ye,G.sortedIndex=ae,G.sortedLastIndex=fe,G.startCase=fa,G.startsWith=mo,G.template=wo,G.trim=bo,G.trimLeft=xo,G.trimRight=Ao,G.trunc=jo,G.unescape=Eo,G.uniqueId=Do,G.words=Ro,G.all=Ce,G.any=Ye,G.contains=Le,G.detect=Se,G.foldl=ze,G.foldr=Me,G.head=Gr,G.include=Le,G.inject=ze,No(G,function(){var n={};return Tt(G,function(t,r){G.prototype[r]||(n[r]=t)}),n}(),!1),G.sample=Pe,G.prototype.sample=function(n){return this.__chain__||null!=n?this.thru(function(t){return Pe(t,n)}):Pe(this.value())},G.VERSION=A,tt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(n){G[n].placeholder=G}),tt(["filter","map","takeWhile"],function(n,t){var r=t==L,e=t==B;Dn.prototype[n]=function(n,u){var o=this.clone(),i=o.__filtered__,a=o.__iteratees__||(o.__iteratees__=[]);return o.__filtered__=i||r||e&&o.__dir__<0,a.push({iteratee:dr(n,u,3),type:t}),o}}),tt(["drop","take"],function(n,t){var r="__"+n+"Count__",e=n+"While";Dn.prototype[n]=function(e){e=null==e?1:Ei(si(e)||0,0);var u=this.clone();if(u.__filtered__){var o=u[r];u[r]=t?Ri(o,e):o+e}else{var i=u.__views__||(u.__views__=[]);i.push({size:e,type:n+(u.__dir__<0?"Right":"")})}return u},Dn.prototype[n+"Right"]=function(t){return this.reverse()[n](t).reverse()},Dn.prototype[n+"RightWhile"]=function(n,t){return this.reverse()[e](n,t).reverse()}}),tt(["first","last"],function(n,t){var r="take"+(t?"Right":"");Dn.prototype[n]=function(){return this[r](1).value()[0]}}),tt(["initial","rest"],function(n,t){var r="drop"+(t?"":"Right");Dn.prototype[n]=function(){return this[r](1)}}),tt(["pluck","where"],function(n,t){var r=t?"filter":"map",e=t?Bt:qt;Dn.prototype[n]=function(n){return this[r](e(n))}}),Dn.prototype.compact=function(){return this.filter(Co)},Dn.prototype.dropWhile=function(n,t){var r;return n=dr(n,t,3),this.filter(function(t,e,u){return r||(r=!n(t,e,u))})},Dn.prototype.reject=function(n,t){return n=dr(n,t,3),this.filter(function(t,r,e){return!n(t,r,e)})},Dn.prototype.slice=function(n,t){n=null==n?0:+n||0;var r=0>n?this.takeRight(-n):this.drop(n);return"undefined"!=typeof t&&(t=+t||0,r=0>t?r.dropRight(-t):r.take(t-n)),r},Dn.prototype.toArray=function(){return this.drop(0)},Tt(Dn.prototype,function(n,t){var r=G[t],e=/^(?:first|last)$/.test(t);G.prototype[t]=function(){var t=this.__wrapped__,u=arguments,o=this.__chain__,i=!!this.__actions__.length,a=t instanceof Dn,f=a&&!i;if(e&&!o)return f?n.call(t):r.call(G,this.value());var c=function(n){var t=[n];return hi.apply(t,u),r.apply(G,t)};if(a||Hi(t)){var l=f?t:new Dn(this),s=n.apply(l,u);if(!e&&(i||s.__actions__)){var p=s.__actions__||(s.__actions__=[]);p.push({func:xe,args:[c],thisArg:G})}return new nn(s,o)}return this.thru(c)}}),tt(["concat","join","pop","push","shift","sort","splice","unshift"],function(n){var t=Zo[n],r=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",e=/^(?:join|pop|shift)$/.test(n);G.prototype[n]=function(){var n=arguments;return e&&!this.__chain__?t.apply(this.value(),n):this[r](function(r){return t.apply(r,n)})}}),Dn.prototype.clone=zn,Dn.prototype.reverse=Mn,Dn.prototype.value=qn,G.prototype.chain=Ae,G.prototype.commit=je,G.prototype.plant=Ee,G.prototype.reverse=Re,G.prototype.toString=Ie,G.prototype.run=G.prototype.toJSON=G.prototype.valueOf=G.prototype.value=ke,G.prototype.collect=G.prototype.map,G.prototype.head=G.prototype.first,G.prototype.select=G.prototype.filter,G.prototype.tail=G.prototype.rest,G}var x,A="3.3.0",j=1,E=2,R=4,I=8,k=16,O=32,C=64,T=128,S=256,N=30,U="...",W=150,F=16,L=0,$=1,B=2,D="Expected a function",z="__lodash_placeholder__",M="[object Arguments]",q="[object Array]",P="[object Boolean]",K="[object Date]",V="[object Error]",Y="[object Function]",G="[object Map]",J="[object Number]",X="[object Object]",Z="[object RegExp]",H="[object Set]",Q="[object String]",nn="[object WeakMap]",tn="[object ArrayBuffer]",rn="[object Float32Array]",en="[object Float64Array]",un="[object Int8Array]",on="[object Int16Array]",an="[object Int32Array]",fn="[object Uint8Array]",cn="[object Uint8ClampedArray]",ln="[object Uint16Array]",sn="[object Uint32Array]",pn=/\b__p \+= '';/g,hn=/\b(__p \+=) '' \+/g,vn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,_n=/&(?:amp|lt|gt|quot|#39|#96);/g,gn=/[&<>"'`]/g,yn=RegExp(_n.source),dn=RegExp(gn.source),mn=/<%-([\s\S]+?)%>/g,wn=/<%([\s\S]+?)%>/g,bn=/<%=([\s\S]+?)%>/g,xn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,An=/\w*$/,jn=/^\s*function[ \n\r\t]+\w/,En=/^0[xX]/,Rn=/^\[object .+?Constructor\]$/,In=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,kn=/($^)/,On=/[.*+?^${}()|[\]\/\\]/g,Cn=RegExp(On.source),Tn=/\bthis\b/,Sn=/['\n\r\u2028\u2029\\]/g,Nn=function(){var n="[A-Z\\xc0-\\xd6\\xd8-\\xde]",t="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(n+"{2,}(?="+n+t+")|"+n+"?"+t+"|"+n+"+|[0-9]+","g")}(),Un=" 	\fÂ \ufeff\n\r\u2028\u2029áš€á Žâ€€â€â€‚â€ƒâ€„â€…â€†â€‡â€ˆâ€‰â€Šâ€¯âŸã€€",Wn=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","document","isFinite","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","window","WinRTError"],Fn=-1,Ln={};Ln[rn]=Ln[en]=Ln[un]=Ln[on]=Ln[an]=Ln[fn]=Ln[cn]=Ln[ln]=Ln[sn]=!0,Ln[M]=Ln[q]=Ln[tn]=Ln[P]=Ln[K]=Ln[V]=Ln[Y]=Ln[G]=Ln[J]=Ln[X]=Ln[Z]=Ln[H]=Ln[Q]=Ln[nn]=!1;var $n={};$n[M]=$n[q]=$n[tn]=$n[P]=$n[K]=$n[rn]=$n[en]=$n[un]=$n[on]=$n[an]=$n[J]=$n[X]=$n[Z]=$n[Q]=$n[fn]=$n[cn]=$n[ln]=$n[sn]=!0,$n[V]=$n[Y]=$n[G]=$n[H]=$n[nn]=!1;var Bn={leading:!1,maxWait:0,trailing:!1},Dn={"Ã€":"A","Ã":"A","Ã‚":"A","Ãƒ":"A","Ã„":"A","Ã…":"A","Ã ":"a","Ã¡":"a","Ã¢":"a","Ã£":"a","Ã¤":"a","Ã¥":"a","Ã‡":"C","Ã§":"c","Ã":"D","Ã°":"d","Ãˆ":"E","Ã‰":"E","ÃŠ":"E","Ã‹":"E","Ã¨":"e","Ã©":"e","Ãª":"e","Ã«":"e","ÃŒ":"I","Ã":"I","ÃŽ":"I","Ã":"I","Ã¬":"i","Ã­":"i","Ã®":"i","Ã¯":"i","Ã‘":"N","Ã±":"n","Ã’":"O","Ã“":"O","Ã”":"O","Ã•":"O","Ã–":"O","Ã˜":"O","Ã²":"o","Ã³":"o","Ã´":"o","Ãµ":"o","Ã¶":"o","Ã¸":"o","Ã™":"U","Ãš":"U","Ã›":"U","Ãœ":"U","Ã¹":"u","Ãº":"u","Ã»":"u","Ã¼":"u","Ã":"Y","Ã½":"y","Ã¿":"y","Ã†":"Ae","Ã¦":"ae","Ãž":"Th","Ã¾":"th","ÃŸ":"ss"},zn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Mn={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},qn={"function":!0,object:!0},Pn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Kn=qn[typeof window]&&window!==(this&&this.window)?window:this,Vn=qn[typeof exports]&&exports&&!exports.nodeType&&exports,Yn=qn[typeof module]&&module&&!module.nodeType&&module,Gn=Vn&&Yn&&"object"==typeof global&&global;!Gn||Gn.global!==Gn&&Gn.window!==Gn&&Gn.self!==Gn||(Kn=Gn);var Jn=Yn&&Yn.exports===Vn&&Vn,Xn=b();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Kn._=Xn,define(function(){return Xn})):Vn&&Yn?Jn?(Yn.exports=Xn)._=Xn:Vn._=Xn:Kn._=Xn}).call(this);


  }).call(this,typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],184:[function(require,module,exports){
  "use strict";function initParams(e,t,r){return r=filterForCallback([t,r]),t=constructOptionsFrom(e,t),constructObject().extend({callback:r}).extend({options:t}).extend({uri:t.uri}).done()}function request(e,t,r){if("undefined"==typeof e)throw new Error("undefined is not a valid uri or options object.");var n=initParams(e,t,r);return t=n.options,t.callback=n.callback,t.uri=n.uri,new request.Request(t)}function requester(e){return"function"==typeof e.options._requester?e.options._requester:request}var extend=require("util")._extend,cookies=require("./lib/cookies"),helpers=require("./lib/helpers"),isFunction=helpers.isFunction,constructObject=helpers.constructObject,filterForCallback=helpers.filterForCallback,constructOptionsFrom=helpers.constructOptionsFrom,paramsHaveRequestBody=helpers.paramsHaveRequestBody;request.get=function(e,t,r){var n=initParams(e,t,r);return n.options.method="GET",requester(n)(n.uri||null,n.options,n.callback)},request.head=function(e,t,r){var n=initParams(e,t,r);if(n.options.method="HEAD",paramsHaveRequestBody(n))throw new Error("HTTP HEAD requests MUST NOT include a request body.");return requester(n)(n.uri||null,n.options,n.callback)},request.post=function(e,t,r){var n=initParams(e,t,r);return n.options.method="POST",requester(n)(n.uri||null,n.options,n.callback)},request.put=function(e,t,r){var n=initParams(e,t,r);return n.options.method="PUT",requester(n)(n.uri||null,n.options,n.callback)},request.patch=function(e,t,r){var n=initParams(e,t,r);return n.options.method="PATCH",requester(n)(n.uri||null,n.options,n.callback)},request.del=function(e,t,r){var n=initParams(e,t,r);return n.options.method="DELETE",requester(n)(n.uri||null,n.options,n.callback)},request.jar=function(e){return cookies.jar(e)},request.cookie=function(e){return cookies.parse(e)},request.defaults=function(e,t){var r=this,n=function(n){var o=function(e){return e=extend({},e),delete e.headers,e},u=function(e,t){return constructObject().extend(t.headers).extend(e.options.headers).done()};return function(s,i,a){var c=initParams(s,i,a);return c.options=extend(o(e),c.options),e.headers&&(c.options.headers=u(c,e)),isFunction(t)&&(n===r?n=t:c.options._requester=t),n(c.options,c.callback)}},o=n(r);return o.get=n(r.get),o.patch=n(r.patch),o.post=n(r.post),o.put=n(r.put),o.head=n(r.head),o.del=n(r.del),o.cookie=n(r.cookie),o.jar=r.jar,o.defaults=r.defaults,o},request.forever=function(e,t){var r=constructObject();return t&&r.extend(t),e&&(r.agentOptions=e),r.extend({forever:!0}),request.defaults(r.done())},module.exports=request,request.Request=require("./request"),request.initParams=initParams,Object.defineProperty(request,"debug",{enumerable:!0,get:function(){return request.Request.debug},set:function(e){request.Request.debug=e}});


},{"./lib/cookies":186,"./lib/helpers":189,"./request":244,"util":109}],185:[function(require,module,exports){
  "use strict";function Auth(){this.hasAuth=!1,this.sentAuth=!1,this.bearerToken=null,this.user=null,this.pass=null}var caseless=require("caseless"),uuid=require("node-uuid"),helpers=require("./helpers"),md5=helpers.md5,toBase64=helpers.toBase64;Auth.prototype.basic=function(e,r,t){var s=this;if("string"!=typeof e||void 0!==r&&"string"!=typeof r)throw new Error("auth() received invalid user or password");s.user=e,s.pass=r,s.hasAuth=!0;var u="undefined"!=typeof r?e+":"+r:e;if(t||"undefined"==typeof t){var a="Basic "+toBase64(u);return s.sentAuth=!0,a}},Auth.prototype.bearer=function(e,r){var t=this;if(t.bearerToken=e,t.hasAuth=!0,r||"undefined"==typeof r){"function"==typeof e&&(e=e());var s="Bearer "+e;return t.sentAuth=!0,s}},Auth.prototype.digest=function(e,r,t){for(var s=this,u={},a=/([a-z0-9_-]+)=(?:"([^"]+)"|([a-z0-9_-]+))/gi;;){var n=a.exec(t);if(!n)break;u[n[1]]=n[2]||n[3]}var i=md5(s.user+":"+u.realm+":"+s.pass),o=md5(e+":"+r),h=/(^|,)\s*auth\s*($|,)/.test(u.qop)&&"auth",p=h&&"00000001",c=h&&uuid().replace(/-/g,""),l=md5(h?i+":"+u.nonce+":"+p+":"+c+":"+h+":"+o:i+":"+u.nonce+":"+o),d={username:s.user,realm:u.realm,nonce:u.nonce,uri:r,qop:h,response:l,nc:p,cnonce:c,algorithm:u.algorithm,opaque:u.opaque};t=[];for(var f in d)d[f]&&("qop"===f||"nc"===f||"algorithm"===f?t.push(f+"="+d[f]):t.push(f+'="'+d[f]+'"'));return t="Digest "+t.join(", "),s.sentAuth=!0,t},Auth.prototype.response=function(e,r,t){var s=this;if(!s.hasAuth||s.sentAuth)return null;var u=caseless(t),a=u.get("www-authenticate"),n=a&&a.split(" ")[0].toLowerCase();switch(n){case"basic":return s.basic(s.user,s.pass,!0);case"bearer":return s.bearer(s.bearerToken,!0);case"digest":return s.digest(e,r,a)}},exports.Auth=Auth;


},{"./helpers":189,"caseless":201,"node-uuid":228}],186:[function(require,module,exports){
  "use strict";function RequestJar(e){var o=this;o._jar=new CookieJar(e)}var tough=require("tough-cookie"),Cookie=tough.Cookie,CookieJar=tough.CookieJar;exports.parse=function(e){if(e&&e.uri&&(e=e.uri),"string"!=typeof e)throw new Error("The cookie function only accepts STRING as param");return Cookie.parse(e)},RequestJar.prototype.setCookie=function(e,o,r){var t=this;return t._jar.setCookieSync(e,o,r||{})},RequestJar.prototype.getCookieString=function(e){var o=this;return o._jar.getCookieStringSync(e)},RequestJar.prototype.getCookies=function(e){var o=this;return o._jar.getCookiesSync(e)},exports.jar=function(e){return new RequestJar(e)};


},{"tough-cookie":236}],187:[function(require,module,exports){
  "use strict";module.exports=function(t){var e={};return Object.keys(t).forEach(function(r){e[r]=t[r]}),e};


},{}],188:[function(require,module,exports){
  (function (process){
    "use strict";function formatHostname(o){return o.replace(/^\.*/,".").toLowerCase()}function parseNoProxyZone(o){o=o.trim().toLowerCase();var r=o.split(":",2),t=formatHostname(r[0]),e=r[1],n=o.indexOf(":")>-1;return{hostname:t,port:e,hasPort:n}}function uriInNoProxy(o,r){var t=o.port||("https:"===o.protocol?"443":"80"),e=formatHostname(o.hostname),n=r.split(",");return n.map(parseNoProxyZone).some(function(o){var r=e.indexOf(o.hostname),n=r>-1&&r===e.length-o.hostname.length;return o.hasPort?t===o.port&&n:n})}function getProxyFromURI(o){var r=process.env.NO_PROXY||process.env.no_proxy||"";return"*"===r?null:""!==r&&uriInNoProxy(o,r)?null:"http:"===o.protocol?process.env.HTTP_PROXY||process.env.http_proxy||null:"https:"===o.protocol?process.env.HTTPS_PROXY||process.env.https_proxy||process.env.HTTP_PROXY||process.env.http_proxy||null:null}module.exports=getProxyFromURI;


  }).call(this,require("Zbi7gb"))
},{"Zbi7gb":95}],189:[function(require,module,exports){
  (function (process,Buffer){
    "use strict";function deferMethod(){return"undefined"==typeof setImmediate?process.nextTick:setImmediate}function constructObject(t){return t=t||{},{extend:function(e){return constructObject(extend(t,e))},done:function(){return t}}}function constructOptionsFrom(t,e){var r=constructObject();return"object"==typeof e?r.extend(e).extend({uri:t}):"string"==typeof t?r.extend({uri:t}):r.extend(t),r.done()}function isFunction(t){return"function"==typeof t}function filterForCallback(t){var e=t.filter(isFunction);return e[0]}function paramsHaveRequestBody(t){return t.options.body||t.options.requestBodyStream||t.options.json&&"boolean"!=typeof t.options.json||t.options.multipart}function safeStringify(t){var e;try{e=JSON.stringify(t)}catch(r){e=jsonSafeStringify(t)}return e}function md5(t){return crypto.createHash("md5").update(t).digest("hex")}function isReadStream(t){return t.readable&&t.path&&t.mode}function toBase64(t){return new Buffer(t||"","ascii").toString("base64")}var extend=require("util")._extend,jsonSafeStringify=require("json-stringify-safe"),crypto=require("crypto");exports.isFunction=isFunction,exports.constructObject=constructObject,exports.constructOptionsFrom=constructOptionsFrom,exports.filterForCallback=filterForCallback,exports.paramsHaveRequestBody=paramsHaveRequestBody,exports.safeStringify=safeStringify,exports.md5=md5,exports.isReadStream=isReadStream,exports.toBase64=toBase64,exports.defer=deferMethod();


  }).call(this,require("Zbi7gb"),require("buffer").Buffer)
},{"Zbi7gb":95,"buffer":78,"crypto":82,"json-stringify-safe":224,"util":109}],190:[function(require,module,exports){
  "use strict";var querystring=require("querystring"),qs=require("qs"),caseless=require("caseless"),uuid=require("node-uuid"),oauth=require("oauth-sign");exports.buildParams=function(e,t,r,a,o,u){var s={};for(var n in e)s["oauth_"+n]=e[n];s.oauth_version||(s.oauth_version="1.0"),s.oauth_timestamp||(s.oauth_timestamp=Math.floor(Date.now()/1e3).toString()),s.oauth_nonce||(s.oauth_nonce=uuid().replace(/-/g,"")),s.oauth_signature_method||(s.oauth_signature_method="HMAC-SHA1");var h=s.oauth_consumer_secret||s.oauth_private_key;delete s.oauth_consumer_secret,delete s.oauth_private_key;var i=s.oauth_token_secret;delete s.oauth_token_secret;var c=s.oauth_realm;delete s.oauth_realm,delete s.oauth_transport_method;var _=t.protocol+"//"+t.host+t.pathname,d=u.parse([].concat(a,o,u.stringify(s)).join("&"));return s.oauth_signature=oauth.sign(s.oauth_signature_method,r,_,d,h,i),c&&(s.realm=c),s},exports.concatParams=function(e,t,r){r=r||"";var a=Object.keys(e).filter(function(e){return"realm"!==e&&"oauth_signature"!==e}).sort();return e.realm&&a.splice(0,1,"realm"),a.push("oauth_signature"),a.map(function(t){return t+"="+r+oauth.rfc3986(e[t])+r}).join(t)},exports.oauth=function(e){var t,r,a=e.uri||{},o=e.method||"",u=caseless(e.headers),s=e.body||"",n=e.oauth||{},h=e.qsLib||qs,i=u.get("content-type")||"",c="application/x-www-form-urlencoded",_=n.transport_method||"header";if(i.slice(0,c.length)===c&&(i=c,t=s),a.query&&(r=a.query),"body"===_&&("POST"!==o||i!==c))throw new Error("oauth: transport_method of 'body' requires 'POST' and content-type '"+c+"'");var d,m=this.buildParams(n,a,o,r,t,h);switch(_){case"header":d="OAuth "+this.concatParams(m,",",'"');break;case"query":d=(r?"&":"?")+this.concatParams(m,"&");break;case"body":d=(t?t+"&":"")+this.concatParams(m,"&");break;default:throw new Error("oauth: transport_method invalid")}return{oauth:d,transport:_}};


},{"caseless":201,"node-uuid":228,"oauth-sign":229,"qs":230,"querystring":99}],191:[function(require,module,exports){
  function authorization(e){return"AWS "+e.key+":"+sign(e)}function hmacSha1(e){return crypto.createHmac("sha1",e.secret).update(e.message).digest("base64")}function sign(e){return e.message=stringToSign(e),hmacSha1(e)}function signQuery(e){return e.message=queryStringToSign(e),hmacSha1(e)}function stringToSign(e){var n=e.amazonHeaders||"";n&&(n+="\n");var r=[e.verb,e.md5,e.contentType,e.date?e.date.toUTCString():"",n+e.resource];return r.join("\n")}function queryStringToSign(e){return"GET\n\n\n"+e.date+"\n"+e.resource}function canonicalizeHeaders(e){for(var n=[],r=Object.keys(e),o=0,t=r.length;t>o;++o){var i=r[o],a=e[i],i=i.toLowerCase();0===i.indexOf("x-amz")&&n.push(i+":"+a)}return n.sort().join("\n")}function canonicalizeResource(e){var n=parse(e,!0),r=n.pathname,o=[];return Object.keys(n.query).forEach(function(e){if(~keys.indexOf(e)){var r=""==n.query[e]?"":"="+encodeURIComponent(n.query[e]);o.push(e+r)}}),r+(o.length?"?"+o.sort().join("&"):"")}var crypto=require("crypto"),parse=require("url").parse,keys=["acl","location","logging","notification","partNumber","policy","requestPayment","torrent","uploadId","uploads","versionId","versioning","versions","website"];module.exports=authorization,module.exports.authorization=authorization,module.exports.hmacSha1=hmacSha1,module.exports.sign=sign,module.exports.signQuery=signQuery,module.exports.queryStringToSign=stringToSign,module.exports.queryStringToSign=queryStringToSign,module.exports.canonicalizeHeaders=canonicalizeHeaders,module.exports.canonicalizeResource=canonicalizeResource;


},{"crypto":82,"url":266}],192:[function(require,module,exports){
  (function (Buffer){
    function BufferList(t){if(!(this instanceof BufferList))return new BufferList(t);if(this._bufs=[],this.length=0,"function"==typeof t){this._callback=t;var e=function(t){this._callback&&(this._callback(t),this._callback=null)}.bind(this);this.on("pipe",function(t){t.on("error",e)}),this.on("unpipe",function(t){t.removeListener("error",e)})}else Buffer.isBuffer(t)?this.append(t):Array.isArray(t)&&t.forEach(function(t){Buffer.isBuffer(t)&&this.append(t)}.bind(this));DuplexStream.call(this)}var DuplexStream=require("readable-stream/duplex"),util=require("util");util.inherits(BufferList,DuplexStream),BufferList.prototype._offset=function(t){for(var e,i=0,s=0;s<this._bufs.length;s++){if(e=i+this._bufs[s].length,e>t)return[s,t-i];i=e}},BufferList.prototype.append=function(t){var e=Buffer.isBuffer(t)||t instanceof BufferList;return this._bufs.push(e?t:new Buffer(t)),this.length+=t.length,this},BufferList.prototype._write=function(t,e,i){this.append(t),i&&i()},BufferList.prototype._read=function(t){return this.length?(t=Math.min(t,this.length),this.push(this.slice(0,t)),void this.consume(t)):this.push(null)},BufferList.prototype.end=function(t){DuplexStream.prototype.end.call(this,t),this._callback&&(this._callback(null,this.slice()),this._callback=null)},BufferList.prototype.get=function(t){return this.slice(t,t+1)[0]},BufferList.prototype.slice=function(t,e){return this.copy(null,0,t,e)},BufferList.prototype.copy=function(t,e,i,s){if(("number"!=typeof i||0>i)&&(i=0),("number"!=typeof s||s>this.length)&&(s=this.length),i>=this.length)return t||new Buffer(0);if(0>=s)return t||new Buffer(0);var r,f,n=!!t,u=this._offset(i),h=s-i,o=h,l=n&&e||0,a=u[1];if(0===i&&s==this.length){if(!n)return Buffer.concat(this._bufs);for(f=0;f<this._bufs.length;f++)this._bufs[f].copy(t,l),l+=this._bufs[f].length;return t}if(o<=this._bufs[u[0]].length-a)return n?this._bufs[u[0]].copy(t,e,a,a+o):this._bufs[u[0]].slice(a,a+o);for(n||(t=new Buffer(h)),f=u[0];f<this._bufs.length;f++){if(r=this._bufs[f].length-a,!(o>r)){this._bufs[f].copy(t,l,a,a+o);break}this._bufs[f].copy(t,l,a),l+=r,o-=r,a&&(a=0)}return t},BufferList.prototype.toString=function(t,e,i){return this.slice(e,i).toString(t)},BufferList.prototype.consume=function(t){for(;this._bufs.length;){if(!(t>this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(t),this.length-=t;break}t-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},BufferList.prototype.duplicate=function(){for(var t=0,e=new BufferList;t<this._bufs.length;t++)e.append(this._bufs[t]);return e},BufferList.prototype.destroy=function(){this._bufs.length=0,this.length=0,this.push(null)},function(){var t={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1};for(var e in t)!function(e){BufferList.prototype[e]=function(i){return this.slice(i,i+t[e])[e](0)}}(e)}(),module.exports=BufferList;


  }).call(this,require("buffer").Buffer)
},{"buffer":78,"readable-stream/duplex":193,"util":109}],193:[function(require,module,exports){
  module.exports=require("./lib/_stream_duplex.js");


},{"./lib/_stream_duplex.js":194}],194:[function(require,module,exports){
  (function (process){
    function Duplex(e){return this instanceof Duplex?(Readable.call(this,e),Writable.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",onend)):new Duplex(e)}function onend(){this.allowHalfOpen||this._writableState.ended||process.nextTick(this.end.bind(this))}function forEach(e,t){for(var i=0,r=e.length;r>i;i++)t(e[i],i)}module.exports=Duplex;var objectKeys=Object.keys||function(e){var t=[];for(var i in e)t.push(i);return t},util=require("core-util-is");util.inherits=require("inherits");var Readable=require("./_stream_readable"),Writable=require("./_stream_writable");util.inherits(Duplex,Readable),forEach(objectKeys(Writable.prototype),function(e){Duplex.prototype[e]||(Duplex.prototype[e]=Writable.prototype[e])});


  }).call(this,require("Zbi7gb"))
},{"./_stream_readable":195,"./_stream_writable":196,"Zbi7gb":95,"core-util-is":197,"inherits":198}],195:[function(require,module,exports){
  (function (process){
    function ReadableState(e,t){e=e||{};var n=e.highWaterMark;this.highWaterMark=n||0===n?n:16384,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=!1,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.calledRead=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!e.objectMode,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(StringDecoder||(StringDecoder=require("string_decoder/").StringDecoder),this.decoder=new StringDecoder(e.encoding),this.encoding=e.encoding)}function Readable(e){return this instanceof Readable?(this._readableState=new ReadableState(e,this),this.readable=!0,void Stream.call(this)):new Readable(e)}function readableAddChunk(e,t,n,r,i){var a=chunkInvalid(t,n);if(a)e.emit("error",a);else if(null===n||void 0===n)t.reading=!1,t.ended||onEofChunk(e,t);else if(t.objectMode||n&&n.length>0)if(t.ended&&!i){var d=new Error("stream.push() after EOF");e.emit("error",d)}else if(t.endEmitted&&i){var d=new Error("stream.unshift() after end event");e.emit("error",d)}else!t.decoder||i||r||(n=t.decoder.write(n)),t.length+=t.objectMode?1:n.length,i?t.buffer.unshift(n):(t.reading=!1,t.buffer.push(n)),t.needReadable&&emitReadable(e),maybeReadMore(e,t);else i||(t.reading=!1);return needMoreData(t)}function needMoreData(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function roundUpToNextPowerOf2(e){if(e>=MAX_HWM)e=MAX_HWM;else{e--;for(var t=1;32>t;t<<=1)e|=e>>t;e++}return e}function howMuchToRead(e,t){return 0===t.length&&t.ended?0:t.objectMode?0===e?0:1:null===e||isNaN(e)?t.flowing&&t.buffer.length?t.buffer[0].length:t.length:0>=e?0:(e>t.highWaterMark&&(t.highWaterMark=roundUpToNextPowerOf2(e)),e>t.length?t.ended?t.length:(t.needReadable=!0,0):e)}function chunkInvalid(e,t){var n=null;return Buffer.isBuffer(t)||"string"==typeof t||null===t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function onEofChunk(e,t){if(t.decoder&&!t.ended){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.length>0?emitReadable(e):endReadable(e)}function emitReadable(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,t.sync?process.nextTick(function(){emitReadable_(e)}):emitReadable_(e))}function emitReadable_(e){e.emit("readable")}function maybeReadMore(e,t){t.readingMore||(t.readingMore=!0,process.nextTick(function(){maybeReadMore_(e,t)}))}function maybeReadMore_(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function pipeOnDrain(e){return function(){var t=e._readableState;t.awaitDrain--,0===t.awaitDrain&&flow(e)}}function flow(e){function t(e,t,i){var a=e.write(n);!1===a&&r.awaitDrain++}var n,r=e._readableState;for(r.awaitDrain=0;r.pipesCount&&null!==(n=e.read());)if(1===r.pipesCount?t(r.pipes,0,null):forEach(r.pipes,t),e.emit("data",n),r.awaitDrain>0)return;return 0===r.pipesCount?(r.flowing=!1,void(EE.listenerCount(e,"data")>0&&emitDataEvents(e))):void(r.ranOut=!0)}function pipeOnReadable(){this._readableState.ranOut&&(this._readableState.ranOut=!1,flow(this))}function emitDataEvents(e,t){var n=e._readableState;if(n.flowing)throw new Error("Cannot switch to old mode now.");var r=t||!1,i=!1;e.readable=!0,e.pipe=Stream.prototype.pipe,e.on=e.addListener=Stream.prototype.on,e.on("readable",function(){i=!0;for(var t;!r&&null!==(t=e.read());)e.emit("data",t);null===t&&(i=!1,e._readableState.needReadable=!0)}),e.pause=function(){r=!0,this.emit("pause")},e.resume=function(){r=!1,i?process.nextTick(function(){e.emit("readable")}):this.read(0),this.emit("resume")},e.emit("readable")}function fromList(e,t){var n,r=t.buffer,i=t.length,a=!!t.decoder,d=!!t.objectMode;if(0===r.length)return null;if(0===i)n=null;else if(d)n=r.shift();else if(!e||e>=i)n=a?r.join(""):Buffer.concat(r,i),r.length=0;else if(e<r[0].length){var o=r[0];n=o.slice(0,e),r[0]=o.slice(e)}else if(e===r[0].length)n=r.shift();else{n=a?"":new Buffer(e);for(var l=0,s=0,u=r.length;u>s&&e>l;s++){var o=r[0],h=Math.min(e-l,o.length);a?n+=o.slice(0,h):o.copy(n,l,0,h),h<o.length?r[0]=o.slice(h):r.shift(),l+=h}}return n}function endReadable(e){var t=e._readableState;if(t.length>0)throw new Error("endReadable called on non-empty stream");!t.endEmitted&&t.calledRead&&(t.ended=!0,process.nextTick(function(){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}))}function forEach(e,t){for(var n=0,r=e.length;r>n;n++)t(e[n],n)}function indexOf(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1}module.exports=Readable;var isArray=require("isarray"),Buffer=require("buffer").Buffer;Readable.ReadableState=ReadableState;var EE=require("events").EventEmitter;EE.listenerCount||(EE.listenerCount=function(e,t){return e.listeners(t).length});var Stream=require("stream"),util=require("core-util-is");util.inherits=require("inherits");var StringDecoder;util.inherits(Readable,Stream),Readable.prototype.push=function(e,t){var n=this._readableState;return"string"!=typeof e||n.objectMode||(t=t||n.defaultEncoding,t!==n.encoding&&(e=new Buffer(e,t),t="")),readableAddChunk(this,n,e,t,!1)},Readable.prototype.unshift=function(e){var t=this._readableState;return readableAddChunk(this,t,e,"",!0)},Readable.prototype.setEncoding=function(e){StringDecoder||(StringDecoder=require("string_decoder/").StringDecoder),this._readableState.decoder=new StringDecoder(e),this._readableState.encoding=e};var MAX_HWM=8388608;Readable.prototype.read=function(e){var t=this._readableState;t.calledRead=!0;var n,r=e;if(("number"!=typeof e||e>0)&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return emitReadable(this),null;if(e=howMuchToRead(e,t),0===e&&t.ended)return n=null,t.length>0&&t.decoder&&(n=fromList(e,t),t.length-=n.length),0===t.length&&endReadable(this),n;var i=t.needReadable;return t.length-e<=t.highWaterMark&&(i=!0),(t.ended||t.reading)&&(i=!1),i&&(t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1),i&&!t.reading&&(e=howMuchToRead(r,t)),n=e>0?fromList(e,t):null,null===n&&(t.needReadable=!0,e=0),t.length-=e,0!==t.length||t.ended||(t.needReadable=!0),t.ended&&!t.endEmitted&&0===t.length&&endReadable(this),n},Readable.prototype._read=function(e){this.emit("error",new Error("not implemented"))},Readable.prototype.pipe=function(e,t){function n(e){e===s&&i()}function r(){e.end()}function i(){e.removeListener("close",d),e.removeListener("finish",o),e.removeListener("drain",p),e.removeListener("error",a),e.removeListener("unpipe",n),s.removeListener("end",r),s.removeListener("end",i),(!e._writableState||e._writableState.needDrain)&&p()}function a(t){l(),e.removeListener("error",a),0===EE.listenerCount(e,"error")&&e.emit("error",t)}function d(){e.removeListener("finish",o),l()}function o(){e.removeListener("close",d),l()}function l(){s.unpipe(e)}var s=this,u=this._readableState;switch(u.pipesCount){case 0:u.pipes=e;break;case 1:u.pipes=[u.pipes,e];break;default:u.pipes.push(e)}u.pipesCount+=1;var h=(!t||t.end!==!1)&&e!==process.stdout&&e!==process.stderr,f=h?r:i;u.endEmitted?process.nextTick(f):s.once("end",f),e.on("unpipe",n);var p=pipeOnDrain(s);return e.on("drain",p),e._events&&e._events.error?isArray(e._events.error)?e._events.error.unshift(a):e._events.error=[a,e._events.error]:e.on("error",a),e.once("close",d),e.once("finish",o),e.emit("pipe",s),u.flowing||(this.on("readable",pipeOnReadable),u.flowing=!0,process.nextTick(function(){flow(s)})),e},Readable.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,this.removeListener("readable",pipeOnReadable),t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var n=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,this.removeListener("readable",pipeOnReadable),t.flowing=!1;for(var i=0;r>i;i++)n[i].emit("unpipe",this);return this}var i=indexOf(t.pipes,e);return-1===i?this:(t.pipes.splice(i,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},Readable.prototype.on=function(e,t){var n=Stream.prototype.on.call(this,e,t);if("data"!==e||this._readableState.flowing||emitDataEvents(this),"readable"===e&&this.readable){var r=this._readableState;r.readableListening||(r.readableListening=!0,r.emittedReadable=!1,r.needReadable=!0,r.reading?r.length&&emitReadable(this,r):this.read(0))}return n},Readable.prototype.addListener=Readable.prototype.on,Readable.prototype.resume=function(){emitDataEvents(this),this.read(0),this.emit("resume")},Readable.prototype.pause=function(){emitDataEvents(this,!0),this.emit("pause")},Readable.prototype.wrap=function(e){var t=this._readableState,n=!1,r=this;e.on("end",function(){if(t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&r.push(e)}r.push(null)}),e.on("data",function(i){if(t.decoder&&(i=t.decoder.write(i)),(!t.objectMode||null!==i&&void 0!==i)&&(t.objectMode||i&&i.length)){var a=r.push(i);a||(n=!0,e.pause())}});for(var i in e)"function"==typeof e[i]&&"undefined"==typeof this[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));var a=["error","close","destroy","pause","resume"];return forEach(a,function(t){e.on(t,r.emit.bind(r,t))}),r._read=function(t){n&&(n=!1,e.resume())},r},Readable._fromList=fromList;


  }).call(this,require("Zbi7gb"))
},{"Zbi7gb":95,"buffer":78,"core-util-is":197,"events":87,"inherits":198,"isarray":199,"stream":101,"string_decoder/":200}],196:[function(require,module,exports){
  (function (process){
    function WriteReq(e,t,i){this.chunk=e,this.encoding=t,this.callback=i}function WritableState(e,t){e=e||{};var i=e.highWaterMark;this.highWaterMark=i||0===i?i:16384,this.objectMode=!!e.objectMode,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var r=e.decodeStrings===!1;this.decodeStrings=!r,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){onwrite(t,e)},this.writecb=null,this.writelen=0,this.buffer=[],this.errorEmitted=!1}function Writable(e){var t=require("./_stream_duplex");return this instanceof Writable||this instanceof t?(this._writableState=new WritableState(e,this),this.writable=!0,void Stream.call(this)):new Writable(e)}function writeAfterEnd(e,t,i){var r=new Error("write after end");e.emit("error",r),process.nextTick(function(){i(r)})}function validChunk(e,t,i,r){var n=!0;if(!Buffer.isBuffer(i)&&"string"!=typeof i&&null!==i&&void 0!==i&&!t.objectMode){var f=new TypeError("Invalid non-string/buffer chunk");e.emit("error",f),process.nextTick(function(){r(f)}),n=!1}return n}function decodeChunk(e,t,i){return e.objectMode||e.decodeStrings===!1||"string"!=typeof t||(t=new Buffer(t,i)),t}function writeOrBuffer(e,t,i,r,n){i=decodeChunk(t,i,r),Buffer.isBuffer(i)&&(r="buffer");var f=t.objectMode?1:i.length;t.length+=f;var o=t.length<t.highWaterMark;return o||(t.needDrain=!0),t.writing?t.buffer.push(new WriteReq(i,r,n)):doWrite(e,t,f,i,r,n),o}function doWrite(e,t,i,r,n,f){t.writelen=i,t.writecb=f,t.writing=!0,t.sync=!0,e._write(r,n,t.onwrite),t.sync=!1}function onwriteError(e,t,i,r,n){i?process.nextTick(function(){n(r)}):n(r),e._writableState.errorEmitted=!0,e.emit("error",r)}function onwriteStateUpdate(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function onwrite(e,t){var i=e._writableState,r=i.sync,n=i.writecb;if(onwriteStateUpdate(i),t)onwriteError(e,i,r,t,n);else{var f=needFinish(e,i);f||i.bufferProcessing||!i.buffer.length||clearBuffer(e,i),r?process.nextTick(function(){afterWrite(e,i,f,n)}):afterWrite(e,i,f,n)}}function afterWrite(e,t,i,r){i||onwriteDrain(e,t),r(),i&&finishMaybe(e,t)}function onwriteDrain(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function clearBuffer(e,t){t.bufferProcessing=!0;for(var i=0;i<t.buffer.length;i++){var r=t.buffer[i],n=r.chunk,f=r.encoding,o=r.callback,a=t.objectMode?1:n.length;if(doWrite(e,t,a,n,f,o),t.writing){i++;break}}t.bufferProcessing=!1,i<t.buffer.length?t.buffer=t.buffer.slice(i):t.buffer.length=0}function needFinish(e,t){return t.ending&&0===t.length&&!t.finished&&!t.writing}function finishMaybe(e,t){var i=needFinish(e,t);return i&&(t.finished=!0,e.emit("finish")),i}function endWritable(e,t,i){t.ending=!0,finishMaybe(e,t),i&&(t.finished?process.nextTick(i):e.once("finish",i)),t.ended=!0}module.exports=Writable;var Buffer=require("buffer").Buffer;Writable.WritableState=WritableState;var util=require("core-util-is");util.inherits=require("inherits");var Stream=require("stream");util.inherits(Writable,Stream),Writable.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},Writable.prototype.write=function(e,t,i){var r=this._writableState,n=!1;return"function"==typeof t&&(i=t,t=null),Buffer.isBuffer(e)?t="buffer":t||(t=r.defaultEncoding),"function"!=typeof i&&(i=function(){}),r.ended?writeAfterEnd(this,r,i):validChunk(this,r,e,i)&&(n=writeOrBuffer(this,r,e,t,i)),n},Writable.prototype._write=function(e,t,i){i(new Error("not implemented"))},Writable.prototype.end=function(e,t,i){var r=this._writableState;"function"==typeof e?(i=e,e=null,t=null):"function"==typeof t&&(i=t,t=null),"undefined"!=typeof e&&null!==e&&this.write(e,t),r.ending||r.finished||endWritable(this,r,i)};


  }).call(this,require("Zbi7gb"))
},{"./_stream_duplex":194,"Zbi7gb":95,"buffer":78,"core-util-is":197,"inherits":198,"stream":101}],197:[function(require,module,exports){
  (function (Buffer){
    function isArray(e){return Array.isArray(e)}function isBoolean(e){return"boolean"==typeof e}function isNull(e){return null===e}function isNullOrUndefined(e){return null==e}function isNumber(e){return"number"==typeof e}function isString(e){return"string"==typeof e}function isSymbol(e){return"symbol"==typeof e}function isUndefined(e){return void 0===e}function isRegExp(e){return isObject(e)&&"[object RegExp]"===objectToString(e)}function isObject(e){return"object"==typeof e&&null!==e}function isDate(e){return isObject(e)&&"[object Date]"===objectToString(e)}function isError(e){return isObject(e)&&("[object Error]"===objectToString(e)||e instanceof Error)}function isFunction(e){return"function"==typeof e}function isPrimitive(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function isBuffer(e){return Buffer.isBuffer(e)}function objectToString(e){return Object.prototype.toString.call(e)}exports.isArray=isArray,exports.isBoolean=isBoolean,exports.isNull=isNull,exports.isNullOrUndefined=isNullOrUndefined,exports.isNumber=isNumber,exports.isString=isString,exports.isSymbol=isSymbol,exports.isUndefined=isUndefined,exports.isRegExp=isRegExp,exports.isObject=isObject,exports.isDate=isDate,exports.isError=isError,exports.isFunction=isFunction,exports.isPrimitive=isPrimitive,exports.isBuffer=isBuffer;


  }).call(this,require("buffer").Buffer)
},{"buffer":78}],198:[function(require,module,exports){
  "function"==typeof Object.create?module.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:module.exports=function(t,e){t.super_=e;var o=function(){};o.prototype=e.prototype,t.prototype=new o,t.prototype.constructor=t};


},{}],199:[function(require,module,exports){
  module.exports=Array.isArray||function(r){return"[object Array]"==Object.prototype.toString.call(r)};


},{}],200:[function(require,module,exports){
  function assertEncoding(e){if(e&&!isBufferEncoding(e))throw new Error("Unknown encoding: "+e)}function passThroughWrite(e){return e.toString(this.encoding)}function utf16DetectIncompleteChar(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function base64DetectIncompleteChar(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}var Buffer=require("buffer").Buffer,isBufferEncoding=Buffer.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},StringDecoder=exports.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),assertEncoding(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=utf16DetectIncompleteChar;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=base64DetectIncompleteChar;break;default:return void(this.write=passThroughWrite)}this.charBuffer=new Buffer(6),this.charReceived=0,this.charLength=0};StringDecoder.prototype.write=function(e){for(var t="";this.charLength;){var r=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,r),this.charReceived+=r,this.charReceived<this.charLength)return"";e=e.slice(r,e.length),t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var h=t.charCodeAt(t.length-1);if(!(h>=55296&&56319>=h)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var i=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,i),i-=this.charReceived),t+=e.toString(this.encoding,0,i);var i=t.length-1,h=t.charCodeAt(i);if(h>=55296&&56319>=h){var c=this.surrogateSize;return this.charLength+=c,this.charReceived+=c,this.charBuffer.copy(this.charBuffer,c,0,c),e.copy(this.charBuffer,0,0,c),t.substring(0,i)}return t},StringDecoder.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var r=e[e.length-t];if(1==t&&r>>5==6){this.charLength=2;break}if(2>=t&&r>>4==14){this.charLength=3;break}if(3>=t&&r>>3==30){this.charLength=4;break}}this.charReceived=t},StringDecoder.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var r=this.charReceived,h=this.charBuffer,i=this.encoding;t+=h.slice(0,r).toString(i)}return t};


},{"buffer":78}],201:[function(require,module,exports){
  function Caseless(e){this.dict=e||{}}Caseless.prototype.set=function(e,t,s){if("object"!=typeof e){"undefined"==typeof s&&(s=!0);var r=this.has(e);return!s&&r?this.dict[r]=this.dict[r]+","+t:this.dict[r||e]=t,r}for(var n in e)this.set(n,e[n],t)},Caseless.prototype.has=function(e){for(var t=Object.keys(this.dict),e=e.toLowerCase(),s=0;s<t.length;s++)if(t[s].toLowerCase()===e)return t[s];return!1},Caseless.prototype.get=function(e){e=e.toLowerCase();var t,s,r=this.dict;return Object.keys(r).forEach(function(n){s=n.toLowerCase(),e===s&&(t=r[n])}),t},Caseless.prototype.swap=function(e){var t=this.has(e);if(!t)throw new Error('There is no header than matches "'+e+'"');this.dict[e]=this.dict[t],delete this.dict[t]},Caseless.prototype.del=function(e){var t=this.has(e);return delete this.dict[t||e]},module.exports=function(e){return new Caseless(e)},module.exports.httpify=function(e,t){var s=new Caseless(t);return e.setHeader=function(e,t,r){return s.set(e,t,r)},e.hasHeader=function(e){return s.has(e)},e.getHeader=function(e){return s.get(e)},e.removeHeader=function(e){return s.del(e)},e.headers=s.dict,s};


},{}],202:[function(require,module,exports){
  (function (Buffer){
    function CombinedStream(){this.writable=!1,this.readable=!0,this.dataSize=0,this.maxDataSize=2097152,this.pauseStreams=!0,this._released=!1,this._streams=[],this._currentStream=null}var util=require("util"),Stream=require("stream").Stream,DelayedStream=require("delayed-stream");module.exports=CombinedStream,util.inherits(CombinedStream,Stream),CombinedStream.create=function(t){var e=new this;t=t||{};for(var i in t)e[i]=t[i];return e},CombinedStream.isStreamLike=function(t){return"function"!=typeof t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t&&!Buffer.isBuffer(t)},CombinedStream.prototype.append=function(t){var e=CombinedStream.isStreamLike(t);if(e){if(!(t instanceof DelayedStream)){var i=DelayedStream.create(t,{maxDataSize:1/0,pauseStream:this.pauseStreams});t.on("data",this._checkDataSize.bind(this)),t=i}this._handleErrors(t),this.pauseStreams&&t.pause()}return this._streams.push(t),this},CombinedStream.prototype.pipe=function(t,e){return Stream.prototype.pipe.call(this,t,e),this.resume(),t},CombinedStream.prototype._getNext=function(){this._currentStream=null;var t=this._streams.shift();if("undefined"==typeof t)return void this.end();if("function"!=typeof t)return void this._pipeNext(t);var e=t;e(function(t){var e=CombinedStream.isStreamLike(t);e&&(t.on("data",this._checkDataSize.bind(this)),this._handleErrors(t)),this._pipeNext(t)}.bind(this))},CombinedStream.prototype._pipeNext=function(t){this._currentStream=t;var e=CombinedStream.isStreamLike(t);if(e)return t.on("end",this._getNext.bind(this)),void t.pipe(this,{end:!1});var i=t;this.write(i),this._getNext()},CombinedStream.prototype._handleErrors=function(t){var e=this;t.on("error",function(t){e._emitError(t)})},CombinedStream.prototype.write=function(t){this.emit("data",t)},CombinedStream.prototype.pause=function(){this.pauseStreams&&(this.pauseStreams&&this._currentStream&&"function"==typeof this._currentStream.pause&&this._currentStream.pause(),this.emit("pause"))},CombinedStream.prototype.resume=function(){this._released||(this._released=!0,this.writable=!0,this._getNext()),this.pauseStreams&&this._currentStream&&"function"==typeof this._currentStream.resume&&this._currentStream.resume(),this.emit("resume")},CombinedStream.prototype.end=function(){this._reset(),this.emit("end")},CombinedStream.prototype.destroy=function(){this._reset(),this.emit("close")},CombinedStream.prototype._reset=function(){this.writable=!1,this._streams=[],this._currentStream=null},CombinedStream.prototype._checkDataSize=function(){if(this._updateDataSize(),!(this.dataSize<=this.maxDataSize)){var t="DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded.";this._emitError(new Error(t))}},CombinedStream.prototype._updateDataSize=function(){this.dataSize=0;var t=this;this._streams.forEach(function(e){e.dataSize&&(t.dataSize+=e.dataSize)}),this._currentStream&&this._currentStream.dataSize&&(this.dataSize+=this._currentStream.dataSize)},CombinedStream.prototype._emitError=function(t){this._reset(),this.emit("error",t)};


  }).call(this,require("buffer").Buffer)
},{"buffer":78,"delayed-stream":203,"stream":101,"util":109}],203:[function(require,module,exports){
  function DelayedStream(){this.source=null,this.dataSize=0,this.maxDataSize=1048576,this.pauseStream=!0,this._maxDataSizeExceeded=!1,this._released=!1,this._bufferedEvents=[]}var Stream=require("stream").Stream,util=require("util");module.exports=DelayedStream,util.inherits(DelayedStream,Stream),DelayedStream.create=function(e,t){var a=new this;t=t||{};for(var r in t)a[r]=t[r];a.source=e;var i=e.emit;return e.emit=function(){return a._handleEmit(arguments),i.apply(e,arguments)},e.on("error",function(){}),a.pauseStream&&e.pause(),a},DelayedStream.prototype.__defineGetter__("readable",function(){return this.source.readable}),DelayedStream.prototype.resume=function(){this._released||this.release(),this.source.resume()},DelayedStream.prototype.pause=function(){this.source.pause()},DelayedStream.prototype.release=function(){this._released=!0,this._bufferedEvents.forEach(function(e){this.emit.apply(this,e)}.bind(this)),this._bufferedEvents=[]},DelayedStream.prototype.pipe=function(){var e=Stream.prototype.pipe.apply(this,arguments);return this.resume(),e},DelayedStream.prototype._handleEmit=function(e){return this._released?void this.emit.apply(this,e):("data"===e[0]&&(this.dataSize+=e[1].length,this._checkIfMaxDataSizeExceeded()),void this._bufferedEvents.push(e))},DelayedStream.prototype._checkIfMaxDataSizeExceeded=function(){if(!(this._maxDataSizeExceeded||this.dataSize<=this.maxDataSize)){this._maxDataSizeExceeded=!0;var e="DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded.";this.emit("error",new Error(e))}};


},{"stream":101,"util":109}],204:[function(require,module,exports){
  function ForeverAgent(e){var t=this;t.options=e||{},t.requests={},t.sockets={},t.freeSockets={},t.maxSockets=t.options.maxSockets||Agent.defaultMaxSockets,t.minSockets=t.options.minSockets||ForeverAgent.defaultMinSockets,t.on("free",function(e,o,r){var s=o+":"+r;if(t.requests[s]&&t.requests[s].length)t.requests[s].shift().onSocket(e);else if(t.sockets[s].length<t.minSockets){t.freeSockets[s]||(t.freeSockets[s]=[]),t.freeSockets[s].push(e);var n=function(){e.destroy()};e._onIdleError=n,e.on("error",n)}else e.destroy()})}function ForeverAgentSSL(e){ForeverAgent.call(this,e)}function createConnectionSSL(e,t,o){return o="object"==typeof e?e:"object"==typeof t?t:"object"==typeof o?o:{},"number"==typeof e&&(o.port=e),"string"==typeof t&&(o.host=t),tls.connect(o)}module.exports=ForeverAgent,ForeverAgent.SSL=ForeverAgentSSL;var util=require("util"),Agent=require("http").Agent,net=require("net"),tls=require("tls"),AgentSSL=require("https").Agent;util.inherits(ForeverAgent,Agent),ForeverAgent.defaultMinSockets=5,ForeverAgent.prototype.createConnection=net.createConnection,ForeverAgent.prototype.addRequestNoreuse=Agent.prototype.addRequest,ForeverAgent.prototype.addRequest=function(e,t,o){var r=t+":"+o;if(this.freeSockets[r]&&this.freeSockets[r].length>0&&!e.useChunkedEncodingByDefault){var s=this.freeSockets[r].pop();s.removeListener("error",s._onIdleError),delete s._onIdleError,e._reusedSocket=!0,e.onSocket(s)}else this.addRequestNoreuse(e,t,o)},ForeverAgent.prototype.removeSocket=function(e,t,o,r){if(this.sockets[t]){var s=this.sockets[t].indexOf(e);-1!==s&&this.sockets[t].splice(s,1)}else this.sockets[t]&&0===this.sockets[t].length&&(delete this.sockets[t],delete this.requests[t]);if(this.freeSockets[t]){var s=this.freeSockets[t].indexOf(e);-1!==s&&(this.freeSockets[t].splice(s,1),0===this.freeSockets[t].length&&delete this.freeSockets[t])}this.requests[t]&&this.requests[t].length&&this.createSocket(t,o,r).emit("free")},util.inherits(ForeverAgentSSL,ForeverAgent),ForeverAgentSSL.prototype.createConnection=createConnectionSSL,ForeverAgentSSL.prototype.addRequestNoreuse=AgentSSL.prototype.addRequest;


},{"http":88,"https":92,"net":63,"tls":63,"util":109}],205:[function(require,module,exports){
  (function (process,Buffer){
    function FormData(){this._overheadLength=0,this._valueLength=0,this._lengthRetrievers=[],CombinedStream.call(this)}function populate(t,e){for(var r in e)t[r]||(t[r]=e[r]);return t}var CombinedStream=require("combined-stream"),util=require("util"),path=require("path"),http=require("http"),https=require("https"),parseUrl=require("url").parse,fs=require("fs"),mime=require("mime-types"),async=require("async");module.exports=FormData,util.inherits(FormData,CombinedStream),FormData.LINE_BREAK="\r\n",FormData.prototype.append=function(t,e,r){r=r||{};var n=CombinedStream.prototype.append.bind(this);if("number"==typeof e&&(e=""+e),util.isArray(e))return void this._error(new Error("Arrays are not supported."));var a=this._multiPartHeader(t,e,r),o=this._multiPartFooter(t,e,r);n(a),n(e),n(o),this._trackLength(a,e,r)},FormData.prototype._trackLength=function(t,e,r){var n=0;null!=r.knownLength?n+=+r.knownLength:Buffer.isBuffer(e)?n=e.length:"string"==typeof e&&(n=Buffer.byteLength(e)),this._valueLength+=n,this._overheadLength+=Buffer.byteLength(t)+ +FormData.LINE_BREAK.length,e&&(e.path||e.readable&&e.hasOwnProperty("httpVersion"))&&(r.knownLength||this._lengthRetrievers.push(function(t){e.hasOwnProperty("fd")?void 0!=e.end&&e.end!=1/0&&void 0!=e.start?t(null,e.end+1-(e.start?e.start:0)):fs.stat(e.path,function(r,n){var a;return r?void t(r):(a=n.size-(e.start?e.start:0),void t(null,a))}):e.hasOwnProperty("httpVersion")?t(null,+e.headers["content-length"]):e.hasOwnProperty("httpModule")?(e.on("response",function(r){e.pause(),t(null,+r.headers["content-length"])}),e.resume()):t("Unknown stream")}))},FormData.prototype._multiPartHeader=function(t,e,r){var n=this.getBoundary(),a="";return null!=r.header?a=r.header:(a+="--"+n+FormData.LINE_BREAK+'Content-Disposition: form-data; name="'+t+'"',r.filename||e.path?a+='; filename="'+path.basename(r.filename||e.path)+'"'+FormData.LINE_BREAK+"Content-Type: "+(r.contentType||mime.lookup(r.filename||e.path)):e.readable&&e.hasOwnProperty("httpVersion")&&(a+='; filename="'+path.basename(e.client._httpMessage.path)+'"'+FormData.LINE_BREAK+"Content-Type: "+e.headers["content-type"]),a+=FormData.LINE_BREAK+FormData.LINE_BREAK),a},FormData.prototype._multiPartFooter=function(t,e,r){return function(t){var e=FormData.LINE_BREAK,r=0===this._streams.length;r&&(e+=this._lastBoundary()),t(e)}.bind(this)},FormData.prototype._lastBoundary=function(){return"--"+this.getBoundary()+"--"},FormData.prototype.getHeaders=function(t){var e={"content-type":"multipart/form-data; boundary="+this.getBoundary()};for(var r in t)e[r.toLowerCase()]=t[r];return e},FormData.prototype.getCustomHeaders=function(t){t=t?t:"multipart/form-data";var e={"content-type":t+"; boundary="+this.getBoundary(),"content-length":this.getLengthSync()};return e},FormData.prototype.getBoundary=function(){return this._boundary||this._generateBoundary(),this._boundary},FormData.prototype._generateBoundary=function(){for(var t="--------------------------",e=0;24>e;e++)t+=Math.floor(10*Math.random()).toString(16);this._boundary=t},FormData.prototype.getLengthSync=function(t){var e=this._overheadLength+this._valueLength;return this._streams.length&&(e+=this._lastBoundary().length),this._lengthRetrievers.length&&this._error(new Error("Cannot calculate proper length in synchronous way.")),e},FormData.prototype.getLength=function(t){var e=this._overheadLength+this._valueLength;return this._streams.length&&(e+=this._lastBoundary().length),this._lengthRetrievers.length?void async.parallel(this._lengthRetrievers,function(r,n){return r?void t(r):(n.forEach(function(t){e+=t}),void t(null,e))}):void process.nextTick(t.bind(this,null,e))},FormData.prototype.submit=function(t,e){var r,n,a={method:"post"};return"string"==typeof t?(t=parseUrl(t),n=populate({port:t.port,path:t.pathname,host:t.hostname},a)):(n=populate(t,a),n.port||(n.port="https:"==n.protocol?443:80)),n.headers=this.getHeaders(t.headers),r="https:"==t.protocol?https.request(n):http.request(n),this.getLength(function(t,n){r.setHeader("Content-Length",n),this.pipe(r),e&&(r.on("error",e),r.on("response",e.bind(this,null)))}.bind(this)),r},FormData.prototype._error=function(t){this.error||(this.error=t,this.pause(),this.emit("error",t))};


  }).call(this,require("Zbi7gb"),require("buffer").Buffer)
},{"Zbi7gb":95,"async":206,"buffer":78,"combined-stream":202,"fs":63,"http":88,"https":92,"mime-types":225,"path":94,"url":266,"util":109}],206:[function(require,module,exports){
  (function (process){
    !function(){function n(n){var e=!1;return function(){if(e)throw new Error("Callback was already called.");e=!0,n.apply(t,arguments)}}var t,e,r={};t=this,null!=t&&(e=t.async),r.noConflict=function(){return t.async=e,r};var u=Object.prototype.toString,i=Array.isArray||function(n){return"[object Array]"===u.call(n)},c=function(n,t){for(var e=0;e<n.length;e+=1)t(n[e],e,n)},a=function(n,t){if(n.map)return n.map(t);var e=[];return c(n,function(n,r,u){e.push(t(n,r,u))}),e},o=function(n,t,e){return n.reduce?n.reduce(t,e):(c(n,function(n,r,u){e=t(e,n,r,u)}),e)},l=function(n){if(Object.keys)return Object.keys(n);var t=[];for(var e in n)n.hasOwnProperty(e)&&t.push(e);return t};"undefined"!=typeof process&&process.nextTick?(r.nextTick=process.nextTick,"undefined"!=typeof setImmediate?r.setImmediate=function(n){setImmediate(n)}:r.setImmediate=r.nextTick):"function"==typeof setImmediate?(r.nextTick=function(n){setImmediate(n)},r.setImmediate=r.nextTick):(r.nextTick=function(n){setTimeout(n,0)},r.setImmediate=r.nextTick),r.each=function(t,e,r){function u(n){n?(r(n),r=function(){}):(i+=1,i>=t.length&&r())}if(r=r||function(){},!t.length)return r();var i=0;c(t,function(t){e(t,n(u))})},r.forEach=r.each,r.eachSeries=function(n,t,e){if(e=e||function(){},!n.length)return e();var r=0,u=function(){t(n[r],function(t){t?(e(t),e=function(){}):(r+=1,r>=n.length?e():u())})};u()},r.forEachSeries=r.eachSeries,r.eachLimit=function(n,t,e,r){var u=f(t);u.apply(null,[n,e,r])},r.forEachLimit=r.eachLimit;var f=function(n){return function(t,e,r){if(r=r||function(){},!t.length||0>=n)return r();var u=0,i=0,c=0;!function a(){if(u>=t.length)return r();for(;n>c&&i<t.length;)i+=1,c+=1,e(t[i-1],function(n){n?(r(n),r=function(){}):(u+=1,c-=1,u>=t.length?r():a())})}()}},s=function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(null,[r.each].concat(t))}},p=function(n,t){return function(){var e=Array.prototype.slice.call(arguments);return t.apply(null,[f(n)].concat(e))}},d=function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(null,[r.eachSeries].concat(t))}},y=function(n,t,e,r){if(t=a(t,function(n,t){return{index:t,value:n}}),r){var u=[];n(t,function(n,t){e(n.value,function(e,r){u[n.index]=r,t(e)})},function(n){r(n,u)})}else n(t,function(n,t){e(n.value,function(n){t(n)})})};r.map=s(y),r.mapSeries=d(y),r.mapLimit=function(n,t,e,r){return m(t)(n,e,r)};var m=function(n){return p(n,y)};r.reduce=function(n,t,e,u){r.eachSeries(n,function(n,r){e(t,n,function(n,e){t=e,r(n)})},function(n){u(n,t)})},r.inject=r.reduce,r.foldl=r.reduce,r.reduceRight=function(n,t,e,u){var i=a(n,function(n){return n}).reverse();r.reduce(i,t,e,u)},r.foldr=r.reduceRight;var v=function(n,t,e,r){var u=[];t=a(t,function(n,t){return{index:t,value:n}}),n(t,function(n,t){e(n.value,function(e){e&&u.push(n),t()})},function(n){r(a(u.sort(function(n,t){return n.index-t.index}),function(n){return n.value}))})};r.filter=s(v),r.filterSeries=d(v),r.select=r.filter,r.selectSeries=r.filterSeries;var h=function(n,t,e,r){var u=[];t=a(t,function(n,t){return{index:t,value:n}}),n(t,function(n,t){e(n.value,function(e){e||u.push(n),t()})},function(n){r(a(u.sort(function(n,t){return n.index-t.index}),function(n){return n.value}))})};r.reject=s(h),r.rejectSeries=d(h);var g=function(n,t,e,r){n(t,function(n,t){e(n,function(e){e?(r(n),r=function(){}):t()})},function(n){r()})};r.detect=s(g),r.detectSeries=d(g),r.some=function(n,t,e){r.each(n,function(n,r){t(n,function(n){n&&(e(!0),e=function(){}),r()})},function(n){e(!1)})},r.any=r.some,r.every=function(n,t,e){r.each(n,function(n,r){t(n,function(n){n||(e(!1),e=function(){}),r()})},function(n){e(!0)})},r.all=r.every,r.sortBy=function(n,t,e){r.map(n,function(n,e){t(n,function(t,r){t?e(t):e(null,{value:n,criteria:r})})},function(n,t){if(n)return e(n);var r=function(n,t){var e=n.criteria,r=t.criteria;return r>e?-1:e>r?1:0};e(null,a(t.sort(r),function(n){return n.value}))})},r.auto=function(n,t){t=t||function(){};var e=l(n),u=e.length;if(!u)return t();var a={},f=[],s=function(n){f.unshift(n)},p=function(n){for(var t=0;t<f.length;t+=1)if(f[t]===n)return void f.splice(t,1)},d=function(){u--,c(f.slice(0),function(n){n()})};s(function(){if(!u){var n=t;t=function(){},n(null,a)}}),c(e,function(e){var u=i(n[e])?n[e]:[n[e]],f=function(n){var u=Array.prototype.slice.call(arguments,1);if(u.length<=1&&(u=u[0]),n){var i={};c(l(a),function(n){i[n]=a[n]}),i[e]=u,t(n,i),t=function(){}}else a[e]=u,r.setImmediate(d)},y=u.slice(0,Math.abs(u.length-1))||[],m=function(){return o(y,function(n,t){return n&&a.hasOwnProperty(t)},!0)&&!a.hasOwnProperty(e)};if(m())u[u.length-1](f,a);else{var v=function(){m()&&(p(v),u[u.length-1](f,a))};s(v)}})},r.retry=function(n,t,e){var u=5,i=[];"function"==typeof n&&(e=t,t=n,n=u),n=parseInt(n,10)||u;var c=function(u,c){for(var a=function(n,t){return function(e){n(function(n,r){e(!n||t,{err:n,result:r})},c)}};n;)i.push(a(t,!(n-=1)));r.series(i,function(n,t){t=t[t.length-1],(u||e)(t.err,t.result)})};return e?c():c},r.waterfall=function(n,t){if(t=t||function(){},!i(n)){var e=new Error("First argument to waterfall must be an array of functions");return t(e)}if(!n.length)return t();var u=function(n){return function(e){if(e)t.apply(null,arguments),t=function(){};else{var i=Array.prototype.slice.call(arguments,1),c=n.next();c?i.push(u(c)):i.push(t),r.setImmediate(function(){n.apply(null,i)})}}};u(r.iterator(n))()};var k=function(n,t,e){if(e=e||function(){},i(t))n.map(t,function(n,t){n&&n(function(n){var e=Array.prototype.slice.call(arguments,1);e.length<=1&&(e=e[0]),t.call(null,n,e)})},e);else{var r={};n.each(l(t),function(n,e){t[n](function(t){var u=Array.prototype.slice.call(arguments,1);u.length<=1&&(u=u[0]),r[n]=u,e(t)})},function(n){e(n,r)})}};r.parallel=function(n,t){k({map:r.map,each:r.each},n,t)},r.parallelLimit=function(n,t,e){k({map:m(t),each:f(t)},n,e)},r.series=function(n,t){if(t=t||function(){},i(n))r.mapSeries(n,function(n,t){n&&n(function(n){var e=Array.prototype.slice.call(arguments,1);e.length<=1&&(e=e[0]),t.call(null,n,e)})},t);else{var e={};r.eachSeries(l(n),function(t,r){n[t](function(n){var u=Array.prototype.slice.call(arguments,1);u.length<=1&&(u=u[0]),e[t]=u,r(n)})},function(n){t(n,e)})}},r.iterator=function(n){var t=function(e){var r=function(){return n.length&&n[e].apply(null,arguments),r.next()};return r.next=function(){return e<n.length-1?t(e+1):null},r};return t(0)},r.apply=function(n){var t=Array.prototype.slice.call(arguments,1);return function(){return n.apply(null,t.concat(Array.prototype.slice.call(arguments)))}};var A=function(n,t,e,r){var u=[];n(t,function(n,t){e(n,function(n,e){u=u.concat(e||[]),t(n)})},function(n){r(n,u)})};r.concat=s(A),r.concatSeries=d(A),r.whilst=function(n,t,e){n()?t(function(u){return u?e(u):void r.whilst(n,t,e)}):e()},r.doWhilst=function(n,t,e){n(function(u){if(u)return e(u);var i=Array.prototype.slice.call(arguments,1);t.apply(null,i)?r.doWhilst(n,t,e):e()})},r.until=function(n,t,e){n()?e():t(function(u){return u?e(u):void r.until(n,t,e)})},r.doUntil=function(n,t,e){n(function(u){if(u)return e(u);var i=Array.prototype.slice.call(arguments,1);t.apply(null,i)?e():r.doUntil(n,t,e)})},r.queue=function(t,e){function u(n,t,e,u){return n.started||(n.started=!0),i(t)||(t=[t]),0==t.length?r.setImmediate(function(){n.drain&&n.drain()}):void c(t,function(t){var i={data:t,callback:"function"==typeof u?u:null};e?n.tasks.unshift(i):n.tasks.push(i),n.saturated&&n.tasks.length===n.concurrency&&n.saturated(),r.setImmediate(n.process)})}void 0===e&&(e=1);var a=0,o={tasks:[],concurrency:e,saturated:null,empty:null,drain:null,started:!1,paused:!1,push:function(n,t){u(o,n,!1,t)},kill:function(){o.drain=null,o.tasks=[]},unshift:function(n,t){u(o,n,!0,t)},process:function(){if(!o.paused&&a<o.concurrency&&o.tasks.length){var e=o.tasks.shift();o.empty&&0===o.tasks.length&&o.empty(),a+=1;var r=function(){a-=1,e.callback&&e.callback.apply(e,arguments),o.drain&&o.tasks.length+a===0&&o.drain(),o.process()},u=n(r);t(e.data,u)}},length:function(){return o.tasks.length},running:function(){return a},idle:function(){return o.tasks.length+a===0},pause:function(){o.paused!==!0&&(o.paused=!0)},resume:function(){if(o.paused!==!1){o.paused=!1;for(var n=1;n<=o.concurrency;n++)r.setImmediate(o.process)}}};return o},r.priorityQueue=function(n,t){function e(n,t){return n.priority-t.priority}function u(n,t,e){for(var r=-1,u=n.length-1;u>r;){var i=r+(u-r+1>>>1);e(t,n[i])>=0?r=i:u=i-1}return r}function a(n,t,a,o){return n.started||(n.started=!0),i(t)||(t=[t]),0==t.length?r.setImmediate(function(){n.drain&&n.drain()}):void c(t,function(t){var i={data:t,priority:a,callback:"function"==typeof o?o:null};n.tasks.splice(u(n.tasks,i,e)+1,0,i),n.saturated&&n.tasks.length===n.concurrency&&n.saturated(),r.setImmediate(n.process)})}var o=r.queue(n,t);return o.push=function(n,t,e){a(o,n,t,e)},delete o.unshift,o},r.cargo=function(n,t){var e=!1,u=[],o={tasks:u,payload:t,saturated:null,empty:null,drain:null,drained:!0,push:function(n,e){i(n)||(n=[n]),c(n,function(n){u.push({data:n,callback:"function"==typeof e?e:null}),o.drained=!1,o.saturated&&u.length===t&&o.saturated()}),r.setImmediate(o.process)},process:function l(){if(!e){if(0===u.length)return o.drain&&!o.drained&&o.drain(),void(o.drained=!0);var r="number"==typeof t?u.splice(0,t):u.splice(0,u.length),i=a(r,function(n){return n.data});o.empty&&o.empty(),e=!0,n(i,function(){e=!1;var n=arguments;c(r,function(t){t.callback&&t.callback.apply(null,n)}),l()})}},length:function(){return u.length},running:function(){return e}};return o};var x=function(n){return function(t){var e=Array.prototype.slice.call(arguments,1);t.apply(null,e.concat([function(t){var e=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(t?console.error&&0:console[n]&&c(e,function(t){0}))}]))}};r.log=x("log"),r.dir=x("dir"),r.memoize=function(n,t){var e={},u={};t=t||function(n){return n};var i=function(){var i=Array.prototype.slice.call(arguments),c=i.pop(),a=t.apply(null,i);a in e?r.nextTick(function(){c.apply(null,e[a])}):a in u?u[a].push(c):(u[a]=[c],n.apply(null,i.concat([function(){e[a]=arguments;var n=u[a];delete u[a];for(var t=0,r=n.length;r>t;t++)n[t].apply(null,arguments)}])))};return i.memo=e,i.unmemoized=n,i},r.unmemoize=function(n){return function(){return(n.unmemoized||n).apply(null,arguments)}},r.times=function(n,t,e){for(var u=[],i=0;n>i;i++)u.push(i);return r.map(u,t,e)},r.timesSeries=function(n,t,e){for(var u=[],i=0;n>i;i++)u.push(i);return r.mapSeries(u,t,e)},r.seq=function(){var n=arguments;return function(){var t=this,e=Array.prototype.slice.call(arguments),u=e.pop();r.reduce(n,e,function(n,e,r){e.apply(t,n.concat([function(){var n=arguments[0],t=Array.prototype.slice.call(arguments,1);r(n,t)}]))},function(n,e){u.apply(t,[n].concat(e))})}},r.compose=function(){return r.seq.apply(null,Array.prototype.reverse.call(arguments))};var S=function(n,t){var e=function(){var e=this,r=Array.prototype.slice.call(arguments),u=r.pop();return n(t,function(n,t){n.apply(e,r.concat([t]))},u)};if(arguments.length>2){var r=Array.prototype.slice.call(arguments,2);return e.apply(this,r)}return e};r.applyEach=s(S),r.applyEachSeries=d(S),r.forever=function(n,t){function e(r){if(r){if(t)return t(r);throw r}n(e)}e()},"undefined"!=typeof module&&module.exports?module.exports=r:"undefined"!=typeof define&&define.amd?define([],function(){return r}):t.async=r}();


  }).call(this,require("Zbi7gb"))
},{"Zbi7gb":95}],207:[function(require,module,exports){
  var hawk={internals:{}};hawk.client={header:function(t,e,r){var n={field:"",artifacts:{}};if(!t||"string"!=typeof t&&"object"!=typeof t||!e||"string"!=typeof e||!r||"object"!=typeof r)return n.err="Invalid argument type",n;var a=r.timestamp||hawk.utils.now(r.localtimeOffsetMsec),i=r.credentials;if(!(i&&i.id&&i.key&&i.algorithm))return n.err="Invalid credentials object",n;if(-1===hawk.crypto.algorithms.indexOf(i.algorithm))return n.err="Unknown algorithm",n;"string"==typeof t&&(t=hawk.utils.parseUri(t));var o={ts:a,nonce:r.nonce||hawk.utils.randomString(6),method:e,resource:t.relative,host:t.hostname,port:t.port,hash:r.hash,ext:r.ext,app:r.app,dlg:r.dlg};n.artifacts=o,o.hash||!r.payload&&""!==r.payload||(o.hash=hawk.crypto.calculatePayloadHash(r.payload,i.algorithm,r.contentType));var s=hawk.crypto.calculateMac("header",i,o),h=null!==o.ext&&void 0!==o.ext&&""!==o.ext,c='Hawk id="'+i.id+'", ts="'+o.ts+'", nonce="'+o.nonce+(o.hash?'", hash="'+o.hash:"")+(h?'", ext="'+hawk.utils.escapeHeaderAttribute(o.ext):"")+'", mac="'+s+'"';return o.app&&(c+=', app="'+o.app+(o.dlg?'", dlg="'+o.dlg:"")+'"'),n.field=c,n},bewit:function(t,e){if(!t||"string"!=typeof t||!e||"object"!=typeof e||!e.ttlSec)return"";e.ext=null===e.ext||void 0===e.ext?"":e.ext;var r=hawk.utils.now(e.localtimeOffsetMsec),n=e.credentials;if(!(n&&n.id&&n.key&&n.algorithm))return"";if(-1===hawk.crypto.algorithms.indexOf(n.algorithm))return"";t=hawk.utils.parseUri(t);var a=r+e.ttlSec,i=hawk.crypto.calculateMac("bewit",n,{ts:a,nonce:"",method:"GET",resource:t.relative,host:t.hostname,port:t.port,ext:e.ext}),o=n.id+"\\"+a+"\\"+i+"\\"+e.ext;return hawk.utils.base64urlEncode(o)},authenticate:function(t,e,r,n){n=n||{};var a=function(e){return t.getResponseHeader?t.getResponseHeader(e):t.getHeader(e)},i=a("www-authenticate");if(i){var o=hawk.utils.parseAuthorizationHeader(i,["ts","tsm","error"]);if(!o)return!1;if(o.ts){var s=hawk.crypto.calculateTsMac(o.ts,e);if(s!==o.tsm)return!1;hawk.utils.setNtpOffset(o.ts-Math.floor((new Date).getTime()/1e3))}}var h=a("server-authorization");if(!h&&!n.required)return!0;var o=hawk.utils.parseAuthorizationHeader(h,["mac","ext","hash"]);if(!o)return!1;var c={ts:r.ts,nonce:r.nonce,method:r.method,resource:r.resource,host:r.host,port:r.port,hash:o.hash,ext:o.ext,app:r.app,dlg:r.dlg},l=hawk.crypto.calculateMac("response",e,c);if(l!==o.mac)return!1;if(!n.payload&&""!==n.payload)return!0;if(!o.hash)return!1;var u=hawk.crypto.calculatePayloadHash(n.payload,e.algorithm,a("content-type"));return u===o.hash},message:function(t,e,r,n){if(!t||"string"!=typeof t||!e||"number"!=typeof e||null===r||void 0===r||"string"!=typeof r||!n||"object"!=typeof n)return null;var a=n.timestamp||hawk.utils.now(n.localtimeOffsetMsec),i=n.credentials;if(!(i&&i.id&&i.key&&i.algorithm))return null;if(-1===hawk.crypto.algorithms.indexOf(i.algorithm))return null;var o={ts:a,nonce:n.nonce||hawk.utils.randomString(6),host:t,port:e,hash:hawk.crypto.calculatePayloadHash(r,i.algorithm)},s={id:i.id,ts:o.ts,nonce:o.nonce,hash:o.hash,mac:hawk.crypto.calculateMac("message",i,o)};return s},authenticateTimestamp:function(t,e,r){var n=hawk.crypto.calculateTsMac(t.ts,e);return n!==t.tsm?!1:(r!==!1&&hawk.utils.setNtpOffset(t.ts-Math.floor((new Date).getTime()/1e3)),!0)}},hawk.crypto={headerVersion:"1",algorithms:["sha1","sha256"],calculateMac:function(t,e,r){var n=hawk.crypto.generateNormalizedString(t,r),a=CryptoJS["Hmac"+e.algorithm.toUpperCase()](n,e.key);return a.toString(CryptoJS.enc.Base64)},generateNormalizedString:function(t,e){var r="hawk."+hawk.crypto.headerVersion+"."+t+"\n"+e.ts+"\n"+e.nonce+"\n"+(e.method||"").toUpperCase()+"\n"+(e.resource||"")+"\n"+e.host.toLowerCase()+"\n"+e.port+"\n"+(e.hash||"")+"\n";return e.ext&&(r+=e.ext.replace("\\","\\\\").replace("\n","\\n")),r+="\n",e.app&&(r+=e.app+"\n"+(e.dlg||"")+"\n"),r},calculatePayloadHash:function(t,e,r){var n=CryptoJS.algo[e.toUpperCase()].create();return n.update("hawk."+hawk.crypto.headerVersion+".payload\n"),n.update(hawk.utils.parseContentType(r)+"\n"),n.update(t),n.update("\n"),n.finalize().toString(CryptoJS.enc.Base64)},calculateTsMac:function(t,e){var r=CryptoJS["Hmac"+e.algorithm.toUpperCase()]("hawk."+hawk.crypto.headerVersion+".ts\n"+t+"\n",e.key);return r.toString(CryptoJS.enc.Base64)}},hawk.internals.LocalStorage=function(){this._cache={},this.length=0,this.getItem=function(t){return this._cache.hasOwnProperty(t)?String(this._cache[t]):null},this.setItem=function(t,e){this._cache[t]=String(e),this.length=Object.keys(this._cache).length},this.removeItem=function(t){delete this._cache[t],this.length=Object.keys(this._cache).length},this.clear=function(){this._cache={},this.length=0},this.key=function(t){return Object.keys(this._cache)[t||0]}},hawk.utils={storage:new hawk.internals.LocalStorage,setStorage:function(t){var e=hawk.utils.storage.getItem("hawk_ntp_offset");hawk.utils.storage=t,e&&hawk.utils.setNtpOffset(e)},setNtpOffset:function(t){try{hawk.utils.storage.setItem("hawk_ntp_offset",t)}catch(e){0,0}},getNtpOffset:function(){var t=hawk.utils.storage.getItem("hawk_ntp_offset");return t?parseInt(t,10):0},now:function(t){return Math.floor(((new Date).getTime()+(t||0))/1e3)+hawk.utils.getNtpOffset()},escapeHeaderAttribute:function(t){return t.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')},parseContentType:function(t){return t?t.split(";")[0].replace(/^\s+|\s+$/g,"").toLowerCase():""},parseAuthorizationHeader:function(t,e){if(!t)return null;var r=t.match(/^(\w+)(?:\s+(.*))?$/);if(!r)return null;var n=r[1];if("hawk"!==n.toLowerCase())return null;var a=r[2];if(!a)return null;var i={},o=a.replace(/(\w+)="([^"\\]*)"\s*(?:,\s*|$)/g,function(t,r,n){return-1===e.indexOf(r)||null===n.match(/^[ \w\!#\$%&'\(\)\*\+,\-\.\/\:;<\=>\?@\[\]\^`\{\|\}~]+$/)||i.hasOwnProperty(r)?void 0:(i[r]=n,"")});return""!==o?null:i},randomString:function(t){for(var e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",r=e.length,n=[],a=0;t>a;++a)n[a]=e[Math.floor(Math.random()*r)];return n.join("")},parseUri:function(t){for(var e=["source","protocol","authority","userInfo","user","password","hostname","port","resource","relative","pathname","directory","file","query","fragment"],r=/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?)(?:#(.*))?)/,n=t.match(r),a={},i=0,o=e.length;o>i;++i)a[e[i]]=n[i]||"";return""===a.port&&(a.port="http"===a.protocol.toLowerCase()?"80":"https"===a.protocol.toLowerCase()?"443":""),a},base64urlEncode:function(t){var e=CryptoJS.enc.Utf8.parse(t),r=CryptoJS.enc.Base64.stringify(e);return r.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}};var CryptoJS=CryptoJS||function(t,e){var r={},n=r.lib={},a=function(){},i=n.Base={extend:function(t){a.prototype=this;var e=new a;return t&&e.mixIn(t),e.hasOwnProperty("init")||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},o=n.WordArray=i.extend({init:function(t,r){t=this.words=t||[],this.sigBytes=r!=e?r:4*t.length},toString:function(t){return(t||h).stringify(this)},concat:function(t){var e=this.words,r=t.words,n=this.sigBytes;if(t=t.sigBytes,this.clamp(),n%4)for(var a=0;t>a;a++)e[n+a>>>2]|=(r[a>>>2]>>>24-8*(a%4)&255)<<24-8*((n+a)%4);else if(65535<r.length)for(a=0;t>a;a+=4)e[n+a>>>2]=r[a>>>2];else e.push.apply(e,r);return this.sigBytes+=t,this},clamp:function(){var e=this.words,r=this.sigBytes;e[r>>>2]&=4294967295<<32-8*(r%4),e.length=t.ceil(r/4)},clone:function(){var t=i.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var r=[],n=0;e>n;n+=4)r.push(4294967296*t.random()|0);return new o.init(r,e)}}),s=r.enc={},h=s.Hex={stringify:function(t){var e=t.words;t=t.sigBytes;for(var r=[],n=0;t>n;n++){var a=e[n>>>2]>>>24-8*(n%4)&255;r.push((a>>>4).toString(16)),r.push((15&a).toString(16))}return r.join("")},parse:function(t){for(var e=t.length,r=[],n=0;e>n;n+=2)r[n>>>3]|=parseInt(t.substr(n,2),16)<<24-4*(n%8);return new o.init(r,e/2)}},c=s.Latin1={stringify:function(t){var e=t.words;t=t.sigBytes;for(var r=[],n=0;t>n;n++)r.push(String.fromCharCode(e[n>>>2]>>>24-8*(n%4)&255));return r.join("")},parse:function(t){for(var e=t.length,r=[],n=0;e>n;n++)r[n>>>2]|=(255&t.charCodeAt(n))<<24-8*(n%4);return new o.init(r,e)}},l=s.Utf8={stringify:function(t){try{return decodeURIComponent(escape(c.stringify(t)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(t){return c.parse(unescape(encodeURIComponent(t)))}},u=n.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=l.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var r=this._data,n=r.words,a=r.sigBytes,i=this.blockSize,s=a/(4*i),s=e?t.ceil(s):t.max((0|s)-this._minBufferSize,0);if(e=s*i,a=t.min(4*e,a),e){for(var h=0;e>h;h+=i)this._doProcessBlock(n,h);h=n.splice(0,e),r.sigBytes-=a}return new o.init(h,a)},clone:function(){var t=i.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0});n.Hasher=u.extend({cfg:i.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){u.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,r){return new t.init(r).finalize(e)}},_createHmacHelper:function(t){return function(e,r){return new f.HMAC.init(t,r).finalize(e)}}});var f=r.algo={};return r}(Math);!function(){var t=CryptoJS,e=t.lib,r=e.WordArray,n=e.Hasher,a=[],e=t.algo.SHA1=n.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var r=this._hash.words,n=r[0],i=r[1],o=r[2],s=r[3],h=r[4],c=0;80>c;c++){if(16>c)a[c]=0|t[e+c];else{var l=a[c-3]^a[c-8]^a[c-14]^a[c-16];a[c]=l<<1|l>>>31}l=(n<<5|n>>>27)+h+a[c],l=20>c?l+((i&o|~i&s)+1518500249):40>c?l+((i^o^s)+1859775393):60>c?l+((i&o|i&s|o&s)-1894007588):l+((i^o^s)-899497514),h=s,s=o,o=i<<30|i>>>2,i=n,n=l}r[0]=r[0]+n|0,r[1]=r[1]+i|0,r[2]=r[2]+o|0,r[3]=r[3]+s|0,r[4]=r[4]+h|0},_doFinalize:function(){var t=this._data,e=t.words,r=8*this._nDataBytes,n=8*t.sigBytes;return e[n>>>5]|=128<<24-n%32,e[(n+64>>>9<<4)+14]=Math.floor(r/4294967296),e[(n+64>>>9<<4)+15]=r,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=n.clone.call(this);return t._hash=this._hash.clone(),t}});t.SHA1=n._createHelper(e),t.HmacSHA1=n._createHmacHelper(e)}(),function(t){for(var e=CryptoJS,r=e.lib,n=r.WordArray,a=r.Hasher,r=e.algo,i=[],o=[],s=function(t){return 4294967296*(t-(0|t))|0},h=2,c=0;64>c;){var l;t:{l=h;for(var u=t.sqrt(l),f=2;u>=f;f++)if(!(l%f)){l=!1;break t}l=!0}l&&(8>c&&(i[c]=s(t.pow(h,.5))),o[c]=s(t.pow(h,1/3)),c++),h++}var p=[],r=r.SHA256=a.extend({_doReset:function(){this._hash=new n.init(i.slice(0))},_doProcessBlock:function(t,e){for(var r=this._hash.words,n=r[0],a=r[1],i=r[2],s=r[3],h=r[4],c=r[5],l=r[6],u=r[7],f=0;64>f;f++){if(16>f)p[f]=0|t[e+f];else{var d=p[f-15],g=p[f-2];p[f]=((d<<25|d>>>7)^(d<<14|d>>>18)^d>>>3)+p[f-7]+((g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10)+p[f-16]}d=u+((h<<26|h>>>6)^(h<<21|h>>>11)^(h<<7|h>>>25))+(h&c^~h&l)+o[f]+p[f],g=((n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22))+(n&a^n&i^a&i),u=l,l=c,c=h,h=s+d|0,s=i,i=a,a=n,n=d+g|0}r[0]=r[0]+n|0,r[1]=r[1]+a|0,r[2]=r[2]+i|0,r[3]=r[3]+s|0,r[4]=r[4]+h|0,r[5]=r[5]+c|0,r[6]=r[6]+l|0,r[7]=r[7]+u|0},_doFinalize:function(){var e=this._data,r=e.words,n=8*this._nDataBytes,a=8*e.sigBytes;return r[a>>>5]|=128<<24-a%32,r[(a+64>>>9<<4)+14]=t.floor(n/4294967296),r[(a+64>>>9<<4)+15]=n,e.sigBytes=4*r.length,this._process(),this._hash},clone:function(){var t=a.clone.call(this);return t._hash=this._hash.clone(),t}});e.SHA256=a._createHelper(r),e.HmacSHA256=a._createHmacHelper(r)}(Math),function(){var t=CryptoJS,e=t.enc.Utf8;t.algo.HMAC=t.lib.Base.extend({init:function(t,r){t=this._hasher=new t.init,"string"==typeof r&&(r=e.parse(r));var n=t.blockSize,a=4*n;r.sigBytes>a&&(r=t.finalize(r)),r.clamp();for(var i=this._oKey=r.clone(),o=this._iKey=r.clone(),s=i.words,h=o.words,c=0;n>c;c++)s[c]^=1549556828,h[c]^=909522486;i.sigBytes=o.sigBytes=a,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher;return t=e.finalize(t),e.reset(),e.finalize(this._oKey.clone().concat(t))}})}(),function(){var t=CryptoJS,e=t.lib.WordArray;t.enc.Base64={stringify:function(t){var e=t.words,r=t.sigBytes,n=this._map;t.clamp(),t=[];for(var a=0;r>a;a+=3)for(var i=(e[a>>>2]>>>24-8*(a%4)&255)<<16|(e[a+1>>>2]>>>24-8*((a+1)%4)&255)<<8|e[a+2>>>2]>>>24-8*((a+2)%4)&255,o=0;4>o&&r>a+.75*o;o++)t.push(n.charAt(i>>>6*(3-o)&63));if(e=n.charAt(64))for(;t.length%4;)t.push(e);return t.join("")},parse:function(t){var r=t.length,n=this._map,a=n.charAt(64);a&&(a=t.indexOf(a),-1!=a&&(r=a));for(var a=[],i=0,o=0;r>o;o++)if(o%4){var s=n.indexOf(t.charAt(o-1))<<2*(o%4),h=n.indexOf(t.charAt(o))>>>6-2*(o%4);a[i>>>2]|=(s|h)<<24-8*(i%4),i++}return e.create(a,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),hawk.crypto.internals=CryptoJS,"undefined"!=typeof module&&module.exports&&(module.exports=hawk);


},{}],208:[function(require,module,exports){
  var parser=require("./parser"),signer=require("./signer"),verify=require("./verify"),util=require("./util");module.exports={parse:parser.parseRequest,parseRequest:parser.parseRequest,sign:signer.signRequest,signRequest:signer.signRequest,sshKeyToPEM:util.sshKeyToPEM,sshKeyFingerprint:util.fingerprint,pemToRsaSSHKey:util.pemToRsaSSHKey,verify:verify.verifySignature,verifySignature:verify.verifySignature};


},{"./parser":209,"./signer":210,"./util":211,"./verify":212}],209:[function(require,module,exports){
  function HttpSignatureError(r,a){Error.captureStackTrace&&Error.captureStackTrace(this,a||HttpSignatureError),this.message=r,this.name=a.name}function ExpiredRequestError(r){HttpSignatureError.call(this,r,ExpiredRequestError)}function InvalidHeaderError(r){HttpSignatureError.call(this,r,InvalidHeaderError)}function InvalidParamsError(r){HttpSignatureError.call(this,r,InvalidParamsError)}function MissingHeaderError(r){HttpSignatureError.call(this,r,MissingHeaderError)}var assert=require("assert-plus"),util=require("util"),Algorithms={"rsa-sha1":!0,"rsa-sha256":!0,"rsa-sha512":!0,"dsa-sha1":!0,"hmac-sha1":!0,"hmac-sha256":!0,"hmac-sha512":!0},State={New:0,Params:1},ParamsState={Name:0,Quote:1,Value:2,Comma:3};util.inherits(HttpSignatureError,Error),util.inherits(ExpiredRequestError,HttpSignatureError),util.inherits(InvalidHeaderError,HttpSignatureError),util.inherits(InvalidParamsError,HttpSignatureError),util.inherits(MissingHeaderError,HttpSignatureError),module.exports={parseRequest:function(r,a){if(assert.object(r,"request"),assert.object(r.headers,"request.headers"),void 0===a&&(a={}),void 0===a.headers&&(a.headers=[r.headers["x-date"]?"x-date":"date"]),assert.object(a,"options"),assert.arrayOfString(a.headers,"options.headers"),assert.optionalNumber(a.clockSkew,"options.clockSkew"),!r.headers.authorization)throw new MissingHeaderError("no authorization header present in the request");a.clockSkew=a.clockSkew||300;var e=0,t=State.New,s=ParamsState.Name,i="",o="",n={scheme:"",params:{},signingString:"",get algorithm(){return this.params.algorithm.toUpperCase()},get keyId(){return this.params.keyId}},h=r.headers.authorization;for(e=0;e<h.length;e++){var d=h.charAt(e);switch(Number(t)){case State.New:" "!==d?n.scheme+=d:t=State.Params;break;case State.Params:switch(Number(s)){case ParamsState.Name:var m=d.charCodeAt(0);if(m>=65&&90>=m||m>=97&&122>=m)i+=d;else{if("="!==d)throw new InvalidHeaderError("bad param format");if(0===i.length)throw new InvalidHeaderError("bad param format");s=ParamsState.Quote}break;case ParamsState.Quote:if('"'!==d)throw new InvalidHeaderError("bad param format");o="",s=ParamsState.Value;break;case ParamsState.Value:'"'===d?(n.params[i]=o,s=ParamsState.Comma):o+=d;break;case ParamsState.Comma:if(","!==d)throw new InvalidHeaderError("bad param format");i="",s=ParamsState.Name;break;default:throw new Error("Invalid substate")}break;default:throw new Error("Invalid substate")}}if(n.params.headers&&""!==n.params.headers?n.params.headers=n.params.headers.split(" "):r.headers["x-date"]?n.params.headers=["x-date"]:n.params.headers=["date"],!n.scheme||"Signature"!==n.scheme)throw new InvalidHeaderError('scheme was not "Signature"');if(!n.params.keyId)throw new InvalidHeaderError("keyId was not specified");if(!n.params.algorithm)throw new InvalidHeaderError("algorithm was not specified");if(!n.params.signature)throw new InvalidHeaderError("signature was not specified");if(n.params.algorithm=n.params.algorithm.toLowerCase(),!Algorithms[n.params.algorithm])throw new InvalidParamsError(n.params.algorithm+" is not supported");for(e=0;e<n.params.headers.length;e++){var l=n.params.headers[e].toLowerCase();if(n.params.headers[e]=l,"request-line"!==l){var u=r.headers[l];if(!u)throw new MissingHeaderError(l+" was not in the request");n.signingString+=l+": "+u}else n.signingString+=r.method+" "+r.url+" HTTP/"+r.httpVersion;e+1<n.params.headers.length&&(n.signingString+="\n")}var p;if(r.headers.date||r.headers["x-date"]){p=r.headers["x-date"]?new Date(r.headers["x-date"]):new Date(r.headers.date);var c=new Date,g=Math.abs(c.getTime()-p.getTime());if(g>1e3*a.clockSkew)throw new ExpiredRequestError("clock skew of "+g/1e3+"s was greater than "+a.clockSkew+"s")}if(a.headers.forEach(function(r){if(n.params.headers.indexOf(r)<0)throw new MissingHeaderError(r+" was not a signed header")}),a.algorithms&&-1===a.algorithms.indexOf(n.params.algorithm))throw new InvalidParamsError(n.params.algorithm+" is not a supported algorithm");return n}};


},{"assert-plus":219,"util":109}],210:[function(require,module,exports){
  function MissingHeaderError(r){this.name="MissingHeaderError",this.message=r,this.stack=(new Error).stack}function InvalidAlgorithmError(r){this.name="InvalidAlgorithmError",this.message=r,this.stack=(new Error).stack}function _pad(r){return parseInt(r,10)<10&&(r="0"+r),r}function _rfc1123(){var r=new Date,e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],t=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return t[r.getUTCDay()]+", "+_pad(r.getUTCDate())+" "+e[r.getUTCMonth()]+" "+r.getUTCFullYear()+" "+_pad(r.getUTCHours())+":"+_pad(r.getUTCMinutes())+":"+_pad(r.getUTCSeconds())+" GMT"}var assert=require("assert-plus"),crypto=require("crypto"),http=require("http"),sprintf=require("util").format,Algorithms={"rsa-sha1":!0,"rsa-sha256":!0,"rsa-sha512":!0,"dsa-sha1":!0,"hmac-sha1":!0,"hmac-sha256":!0,"hmac-sha512":!0},Authorization='Signature keyId="%s",algorithm="%s",headers="%s",signature="%s"';MissingHeaderError.prototype=new Error,InvalidAlgorithmError.prototype=new Error,module.exports={signRequest:function(r,e){if(assert.object(r,"request"),assert.object(e,"options"),assert.optionalString(e.algorithm,"options.algorithm"),assert.string(e.keyId,"options.keyId"),assert.optionalArrayOfString(e.headers,"options.headers"),assert.optionalString(e.httpVersion,"options.httpVersion"),r.getHeader("Date")||r.setHeader("Date",_rfc1123()),e.headers||(e.headers=["date"]),e.algorithm||(e.algorithm="rsa-sha256"),e.httpVersion||(e.httpVersion="1.1"),e.algorithm=e.algorithm.toLowerCase(),!Algorithms[e.algorithm])throw new InvalidAlgorithmError(e.algorithm+" is not supported");var t,a="";for(t=0;t<e.headers.length;t++){if("string"!=typeof e.headers[t])throw new TypeError("options.headers must be an array of Strings");var s=e.headers[t].toLowerCase();if("request-line"!==s){var o=r.getHeader(s);if(!o)throw new MissingHeaderError(s+" was not in the request");a+=s+": "+o}else a+=r.method+" "+r.path+" HTTP/"+e.httpVersion;t+1<e.headers.length&&(a+="\n")}var i,n=e.algorithm.match(/(hmac|rsa)-(\w+)/);if("hmac"===n[1]){var h=crypto.createHmac(n[2].toUpperCase(),e.key);h.update(a),i=h.digest("base64")}else{var g=crypto.createSign(e.algorithm.toUpperCase());g.update(a),i=g.sign(e.key,"base64")}return r.setHeader("Authorization",sprintf(Authorization,e.keyId,e.algorithm,e.headers.join(" "),i)),!0}};


},{"assert-plus":219,"crypto":82,"http":88,"util":109}],211:[function(require,module,exports){
  (function (Buffer){
    function readNext(e,t){var r=ctype.ruint32(e,"big",t);t+=4;var n=t+r;return{data:e.slice(t,n),offset:n}}function writeInt(e,t){e.writeByte(2),e.writeLength(t.length);for(var r=0;r<t.length;r++)e.writeByte(t[r]);return e}function rsaToPEM(e){var t,r,n,a,s,o,f,i="",u=0;try{if(t=new Buffer(e.split(" ")[1],"base64"),f=readNext(t,u),o=f.data.toString(),u=f.offset,"ssh-rsa"!==o)throw new Error("Invalid ssh key type: "+o);f=readNext(t,u),n=f.data,u=f.offset,f=readNext(t,u),s=f.data}catch(d){throw new Error("Invalid ssh key: "+e)}for(r=new asn1.BerWriter,r.startSequence(),r.startSequence(),r.writeOID("1.2.840.113549.1.1.1"),r.writeNull(),r.endSequence(),r.startSequence(3),r.writeByte(0),r.startSequence(),writeInt(r,s),writeInt(r,n),r.endSequence(),r.endSequence(),r.endSequence(),f=r.buffer.toString("base64"),a=0;a<f.length;a++)a%64===0&&(i+="\n"),i+=f.charAt(a);return/\\n$/.test(i)||(i+="\n"),"-----BEGIN PUBLIC KEY-----"+i+"-----END PUBLIC KEY-----\n"}function dsaToPEM(e){var t,r,n,a,s,o,f,i,u=0,d="";try{if(t=new Buffer(e.split(" ")[1],"base64"),r=readNext(t,u),a=r.data.toString(),u=r.offset,!/^ssh-ds[as].*/.test(a))throw new Error("Invalid ssh key type: "+a);r=readNext(t,u),s=r.data,u=r.offset,r=readNext(t,u),o=r.data,u=r.offset,r=readNext(t,u),f=r.data,u=r.offset,r=readNext(t,u),i=r.data}catch(c){throw 0,new Error("Invalid ssh key: "+e)}n=new asn1.BerWriter,n.startSequence(),n.startSequence(),n.writeOID("1.2.840.10040.4.1"),n.startSequence(),writeInt(n,s),writeInt(n,o),writeInt(n,f),n.endSequence(),n.endSequence(),n.startSequence(3),n.writeByte(0),writeInt(n,i),n.endSequence(),n.endSequence(),r=n.buffer.toString("base64");for(var h=0;h<r.length;h++)h%64===0&&(d+="\n"),d+=r.charAt(h);return/\\n$/.test(d)||(d+="\n"),"-----BEGIN PUBLIC KEY-----"+d+"-----END PUBLIC KEY-----\n"}var assert=require("assert-plus"),crypto=require("crypto"),asn1=require("asn1"),ctype=require("ctype");module.exports={sshKeyToPEM:function(e){if(assert.string(e,"ssh_key"),/^ssh-rsa.*/.test(e))return rsaToPEM(e);if(/^ssh-ds[as].*/.test(e))return dsaToPEM(e);throw new Error("Only RSA and DSA public keys are allowed")},fingerprint:function(e){assert.string(e,"ssh_key");var t=e.split(" ");if(!t||!t.length||t.length<2)throw new Error("invalid ssh key");var r=new Buffer(t[1],"base64"),n=crypto.createHash("md5");n.update(r);for(var a=n.digest("hex"),s="",o=0;o<a.length;o++)o&&o%2===0&&(s+=":"),s+=a[o];return s},pemToRsaSSHKey:function(e,t){assert.equal("string",typeof e,"typeof pem");var r=e.split("\n").slice(1,-2).join(""),n=new Buffer(r,"base64"),a=new asn1.BerReader(n);a.readSequence(),a.readSequence();var s=a.readOID();assert.equal(s,"1.2.840.113549.1.1.1","pem not in RSA format"),a.readByte(),a.readByte(),a.readSequence(3),a.readByte(),a.readSequence(),assert.equal(a.peek(),asn1.Ber.Integer,"modulus not an integer"),a._offset=a.readLength(a.offset+1);var o=a._buf.slice(a.offset,a.offset+a.length);a._offset+=a.length,assert.equal(a.peek(),asn1.Ber.Integer,"exponent not an integer"),a._offset=a.readLength(a.offset+1);var f=a._buf.slice(a.offset,a.offset+a.length);a._offset+=a.length;var i=new Buffer("ssh-rsa"),u=new Buffer(4+i.length+4+o.length+4+f.length),d=0;u.writeUInt32BE(i.length,d),d+=4,i.copy(u,d),d+=i.length,u.writeUInt32BE(f.length,d),d+=4,f.copy(u,d),d+=f.length,u.writeUInt32BE(o.length,d),d+=4,o.copy(u,d),d+=o.length;var c=i.toString()+" "+u.toString("base64")+" "+(t||"");return c}};


  }).call(this,require("buffer").Buffer)
},{"asn1":218,"assert-plus":219,"buffer":78,"crypto":82,"ctype":222}],212:[function(require,module,exports){
  var assert=require("assert-plus"),crypto=require("crypto");module.exports={verifySignature:function(r,e){assert.object(r,"parsedSignature"),assert.string(e,"key");var t=r.algorithm.match(/(HMAC|RSA|DSA)-(\w+)/);if(!t||3!==t.length)throw new TypeError("parsedSignature: unsupported algorithm "+r.algorithm);if("HMAC"===t[1]){var a=crypto.createHmac(t[2].toUpperCase(),e);return a.update(r.signingString),a.digest("base64")===r.params.signature}var i=crypto.createVerify(t[0]);return i.update(r.signingString),i.verify(e,r.params.signature,"base64")}};


},{"assert-plus":219,"crypto":82}],213:[function(require,module,exports){
  module.exports={newInvalidAsn1Error:function(r){var n=new Error;return n.name="InvalidAsn1Error",n.message=r||"",n}};


},{}],214:[function(require,module,exports){
  var errors=require("./errors"),types=require("./types"),Reader=require("./reader"),Writer=require("./writer");module.exports={Reader:Reader,Writer:Writer};for(var t in types)types.hasOwnProperty(t)&&(module.exports[t]=types[t]);for(var e in errors)errors.hasOwnProperty(e)&&(module.exports[e]=errors[e]);


},{"./errors":213,"./reader":215,"./types":216,"./writer":217}],215:[function(require,module,exports){
  (function (Buffer){
    function Reader(t){if(!t||!Buffer.isBuffer(t))throw new TypeError("data must be a node Buffer");this._buf=t,this._size=t.length,this._len=0,this._offset=0;var e=this;this.__defineGetter__("length",function(){return e._len}),this.__defineGetter__("offset",function(){return e._offset}),this.__defineGetter__("remain",function(){return e._size-e._offset}),this.__defineGetter__("buffer",function(){return e._buf.slice(e._offset)})}var assert=require("assert"),ASN1=require("./types"),errors=require("./errors"),newInvalidAsn1Error=errors.newInvalidAsn1Error;Reader.prototype.readByte=function(t){if(this._size-this._offset<1)return null;var e=255&this._buf[this._offset];return t||(this._offset+=1),e},Reader.prototype.peek=function(){return this.readByte(!0)},Reader.prototype.readLength=function(t){if(void 0===t&&(t=this._offset),t>=this._size)return null;var e=255&this._buf[t++];if(null===e)return null;if(128==(128&e)){if(e&=127,0==e)throw newInvalidAsn1Error("Indefinite length not supported");if(e>4)throw newInvalidAsn1Error("encoding too long");if(this._size-t<e)return null;this._len=0;for(var r=0;e>r;r++)this._len=(this._len<<8)+(255&this._buf[t++])}else this._len=e;return t},Reader.prototype.readSequence=function(t){var e=this.peek();if(null===e)return null;if(void 0!==t&&t!==e)throw newInvalidAsn1Error("Expected 0x"+t.toString(16)+": got 0x"+e.toString(16));var r=this.readLength(this._offset+1);return null===r?null:(this._offset=r,e)},Reader.prototype.readInt=function(){return this._readTag(ASN1.Integer)},Reader.prototype.readBoolean=function(){return 0===this._readTag(ASN1.Boolean)?!1:!0},Reader.prototype.readEnumeration=function(){return this._readTag(ASN1.Enumeration)},Reader.prototype.readString=function(t,e){t||(t=ASN1.OctetString);var r=this.peek();if(null===r)return null;if(r!==t)throw newInvalidAsn1Error("Expected 0x"+t.toString(16)+": got 0x"+r.toString(16));var n=this.readLength(this._offset+1);if(null===n)return null;if(this.length>this._size-n)return null;if(this._offset=n,0===this.length)return"";var i=this._buf.slice(this._offset,this._offset+this.length);return this._offset+=this.length,e?i:i.toString("utf8")},Reader.prototype.readOID=function(t){t||(t=ASN1.OID);var e=this.peek();if(null===e)return null;if(e!==t)throw newInvalidAsn1Error("Expected 0x"+t.toString(16)+": got 0x"+e.toString(16));var r=this.readLength(this._offset+1);if(null===r)return null;if(this.length>this._size-r)return null;this._offset=r;for(var n=[],i=0,s=0;s<this.length;s++){var o=255&this._buf[this._offset++];i<<=7,i+=127&o,0==(128&o)&&(n.push(i),i=0)}return i=n.shift(),n.unshift(i%40),n.unshift(i/40>>0),n.join(".")},Reader.prototype._readTag=function(t){assert.ok(void 0!==t);var e=this.peek();if(null===e)return null;if(e!==t)throw newInvalidAsn1Error("Expected 0x"+t.toString(16)+": got 0x"+e.toString(16));var r=this.readLength(this._offset+1);if(null===r)return null;if(this.length>4)throw newInvalidAsn1Error("Integer too long: "+this.length);if(this.length>this._size-r)return null;this._offset=r;var n=this._buf[this._offset++],i=0;i=127&n;for(var s=1;s<this.length;s++)i<<=8,i|=255&this._buf[this._offset++];return 128==(128&n)&&(i=-i),i},module.exports=Reader;


  }).call(this,require("buffer").Buffer)
},{"./errors":213,"./types":216,"assert":64,"buffer":78}],216:[function(require,module,exports){
  module.exports={EOC:0,Boolean:1,Integer:2,BitString:3,OctetString:4,Null:5,OID:6,ObjectDescriptor:7,External:8,Real:9,Enumeration:10,PDV:11,Utf8String:12,RelativeOID:13,Sequence:16,Set:17,NumericString:18,PrintableString:19,T61String:20,VideotexString:21,IA5String:22,UTCTime:23,GeneralizedTime:24,GraphicString:25,VisibleString:26,GeneralString:28,UniversalString:29,CharacterString:30,BMPString:31,Constructor:32,Context:128};


},{}],217:[function(require,module,exports){
  (function (Buffer){
    function merge(t,e){assert.ok(t),assert.equal(typeof t,"object"),assert.ok(e),assert.equal(typeof e,"object");var r=Object.getOwnPropertyNames(t);return r.forEach(function(r){if(!e[r]){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,s)}}),e}function Writer(t){t=merge(DEFAULT_OPTS,t||{}),this._buf=new Buffer(t.size||1024),this._size=this._buf.length,this._offset=0,this._options=t,this._seq=[];var e=this;this.__defineGetter__("buffer",function(){if(e._seq.length)throw new InvalidAsn1Error(e._seq.length+" unended sequence(s)");return e._buf.slice(0,e._offset)})}var assert=require("assert"),ASN1=require("./types"),errors=require("./errors"),newInvalidAsn1Error=errors.newInvalidAsn1Error,DEFAULT_OPTS={size:1024,growthFactor:8};Writer.prototype.writeByte=function(t){if("number"!=typeof t)throw new TypeError("argument must be a Number");this._ensure(1),this._buf[this._offset++]=t},Writer.prototype.writeInt=function(t,e){if("number"!=typeof t)throw new TypeError("argument must be a Number");"number"!=typeof e&&(e=ASN1.Integer);for(var r=4;(0===(4286578688&t)||4286578688===(4286578688&t))&&r>1;)r--,t<<=8;if(r>4)throw new InvalidAsn1Error("BER ints cannot be > 0xffffffff");for(this._ensure(2+r),this._buf[this._offset++]=e,this._buf[this._offset++]=r;r-->0;)this._buf[this._offset++]=(4278190080&t)>>24,t<<=8},Writer.prototype.writeNull=function(){this.writeByte(ASN1.Null),this.writeByte(0)},Writer.prototype.writeEnumeration=function(t,e){if("number"!=typeof t)throw new TypeError("argument must be a Number");return"number"!=typeof e&&(e=ASN1.Enumeration),this.writeInt(t,e)},Writer.prototype.writeBoolean=function(t,e){if("boolean"!=typeof t)throw new TypeError("argument must be a Boolean");"number"!=typeof e&&(e=ASN1.Boolean),this._ensure(3),this._buf[this._offset++]=e,this._buf[this._offset++]=1,this._buf[this._offset++]=t?255:0},Writer.prototype.writeString=function(t,e){if("string"!=typeof t)throw new TypeError("argument must be a string (was: "+typeof t+")");"number"!=typeof e&&(e=ASN1.OctetString);var r=Buffer.byteLength(t);this.writeByte(e),this.writeLength(r),r&&(this._ensure(r),this._buf.write(t,this._offset),this._offset+=r)},Writer.prototype.writeBuffer=function(t,e){if("number"!=typeof e)throw new TypeError("tag must be a number");if(!Buffer.isBuffer(t))throw new TypeError("argument must be a buffer");this.writeByte(e),this.writeLength(t.length),this._ensure(t.length),t.copy(this._buf,this._offset,0,t.length),this._offset+=t.length},Writer.prototype.writeStringArray=function(t){if(!t instanceof Array)throw new TypeError("argument must be an Array[String]");var e=this;t.forEach(function(t){e.writeString(t)})},Writer.prototype.writeOID=function(t,e){function r(t,e){128>e?t.push(e):16384>e?(t.push(e>>>7|128),t.push(127&e)):2097152>e?(t.push(e>>>14|128),t.push(255&(e>>>7|128)),t.push(127&e)):268435456>e?(t.push(e>>>21|128),t.push(255&(e>>>14|128)),t.push(255&(e>>>7|128)),t.push(127&e)):(t.push(255&(e>>>28|128)),t.push(255&(e>>>21|128)),t.push(255&(e>>>14|128)),t.push(255&(e>>>7|128)),t.push(127&e))}if("string"!=typeof t)throw new TypeError("argument must be a string");if("number"!=typeof e&&(e=ASN1.OID),!/^([0-9]+\.){3,}[0-9]+$/.test(t))throw new Error("argument is not a valid OID string");var s=t.split("."),i=[];i.push(40*parseInt(s[0],10)+parseInt(s[1],10)),s.slice(2).forEach(function(t){r(i,parseInt(t,10))});var f=this;this._ensure(2+i.length),this.writeByte(e),this.writeLength(i.length),i.forEach(function(t){f.writeByte(t)})},Writer.prototype.writeLength=function(t){if("number"!=typeof t)throw new TypeError("argument must be a Number");if(this._ensure(4),127>=t)this._buf[this._offset++]=t;else if(255>=t)this._buf[this._offset++]=129,this._buf[this._offset++]=t;else if(65535>=t)this._buf[this._offset++]=130,this._buf[this._offset++]=t>>8,this._buf[this._offset++]=t;else{if(!(16777215>=t))throw new InvalidAsn1ERror("Length too long (> 4 bytes)");this._shift(start,t,1),this._buf[this._offset++]=131,this._buf[this._offset++]=t>>16,this._buf[this._offset++]=t>>8,this._buf[this._offset++]=t}},Writer.prototype.startSequence=function(t){"number"!=typeof t&&(t=ASN1.Sequence|ASN1.Constructor),this.writeByte(t),this._seq.push(this._offset),this._ensure(3),this._offset+=3},Writer.prototype.endSequence=function(){var t=this._seq.pop(),e=t+3,r=this._offset-e;if(127>=r)this._shift(e,r,-2),this._buf[t]=r;else if(255>=r)this._shift(e,r,-1),this._buf[t]=129,this._buf[t+1]=r;else if(65535>=r)this._buf[t]=130,this._buf[t+1]=r>>8,this._buf[t+2]=r;else{if(!(16777215>=r))throw new InvalidAsn1Error("Sequence too long");this._shift(e,r,1),this._buf[t]=131,this._buf[t+1]=r>>16,this._buf[t+2]=r>>8,this._buf[t+3]=r}},Writer.prototype._shift=function(t,e,r){assert.ok(void 0!==t),assert.ok(void 0!==e),assert.ok(r),this._buf.copy(this._buf,t+r,t,t+e),this._offset+=r},Writer.prototype._ensure=function(t){if(assert.ok(t),this._size-this._offset<t){var e=this._size*this._options.growthFactor;e-this._offset<t&&(e+=t);var r=new Buffer(e);this._buf.copy(r,0,0,this._offset),this._buf=r,this._size=e}},module.exports=Writer;


  }).call(this,require("buffer").Buffer)
},{"./errors":213,"./types":216,"assert":64,"buffer":78}],218:[function(require,module,exports){
  var Ber=require("./ber/index");module.exports={Ber:Ber,BerReader:Ber.Reader,BerWriter:Ber.Writer};


},{"./ber/index":214}],219:[function(require,module,exports){
  (function (process,Buffer){
    function capitalize(e){return e.charAt(0).toUpperCase()+e.slice(1)}function uncapitalize(e){return e.charAt(0).toLowerCase()+e.slice(1)}function _(){return util.format.apply(util,arguments)}function _assert(e,r,t,a){if(!NDEBUG){t=t||r,a=a||_assert.caller;var n=typeof e;if(n!==r)throw new assert.AssertionError({message:_(TYPE_REQUIRED,t,r),actual:n,expected:r,operator:"===",stackStartFunction:a})}}function _instanceof(e,r,t,a){if(!(NDEBUG||(t=t||r,a=a||_instanceof.caller,e instanceof r)))throw new assert.AssertionError({message:_(TYPE_REQUIRED,t,r.name),actual:_getClass(e),expected:r.name,operator:"instanceof",stackStartFunction:a})}function _getClass(e){return Object.prototype.toString.call(e).slice(8,-1)}function array(e,r,t){if(!NDEBUG){if(t=t||r,!Array.isArray(e))throw new assert.AssertionError({message:_(ARRAY_TYPE_REQUIRED,t,r),actual:typeof e,expected:"array",operator:"Array.isArray",stackStartFunction:array.caller});for(var a=0;a<e.length;a++)_assert(e[a],r,t,array)}}function bool(e,r){_assert(e,"boolean",r,bool)}function buffer(e,r){if(!Buffer.isBuffer(e))throw new assert.AssertionError({message:_(TYPE_REQUIRED,r||"","Buffer"),actual:typeof e,expected:"buffer",operator:"Buffer.isBuffer",stackStartFunction:buffer})}function func(e,r){_assert(e,"function",r)}function number(e,r){if(_assert(e,"number",r),!NDEBUG&&(isNaN(e)||!isFinite(e)))throw new assert.AssertionError({message:_(TYPE_REQUIRED,r,"number"),actual:e,expected:"number",operator:"isNaN",stackStartFunction:number})}function object(e,r){_assert(e,"object",r)}function stream(e,r){_instanceof(e,Stream,r)}function date(e,r){_instanceof(e,Date,r)}function regexp(e,r){_instanceof(e,RegExp,r)}function string(e,r){_assert(e,"string",r)}function uuid(e,r){if(string(e,r),!NDEBUG&&!UUID_REGEXP.test(e))throw new assert.AssertionError({message:_(TYPE_REQUIRED,r,"uuid"),actual:"string",expected:"uuid",operator:"test",stackStartFunction:uuid})}var assert=require("assert"),Stream=require("stream").Stream,util=require("util"),NDEBUG=process.env.NODE_NDEBUG||!1,UUID_REGEXP=/^[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}$/,ARRAY_TYPE_REQUIRED="%s ([%s]) required",TYPE_REQUIRED="%s (%s) is required";module.exports={bool:bool,buffer:buffer,date:date,func:func,number:number,object:object,regexp:regexp,stream:stream,string:string,uuid:uuid},Object.keys(module.exports).forEach(function(e){if("buffer"!==e){var r="arrayOf"+capitalize(e);"bool"===e&&(e="boolean"),"func"===e&&(e="function"),module.exports[r]=function(r,t){array(r,e,t)}}}),Object.keys(module.exports).forEach(function(e){var r="optional"+capitalize(e),t=uncapitalize(e.replace("arrayOf",""));"bool"===t&&(t="boolean"),"func"===t&&(t="function"),-1!==e.indexOf("arrayOf")?module.exports[r]=function(e,r){NDEBUG||void 0===e||array(e,t,r)}:module.exports[r]=function(e,r){NDEBUG||void 0===e||_assert(e,t,r)}}),Object.keys(assert).forEach(function(e){return"AssertionError"===e?void(module.exports[e]=assert[e]):void(module.exports[e]=function(){NDEBUG||assert[e].apply(assert[e],arguments)})});


  }).call(this,require("Zbi7gb"),require("buffer").Buffer)
},{"Zbi7gb":95,"assert":64,"buffer":78,"stream":101,"util":109}],220:[function(require,module,exports){
  function ctfParseInteger(t,e){var r,n,i,o;if(r=t.name,!("signed"in t.integer))throw new Error("Malformed CTF JSON: integer missing signed value");if(!("length"in t.integer))throw new Error("Malformed CTF JSON: integer missing length value");if(n=t.integer.signed,i=t.integer.length,o=null,n&&1==i?o="int8_t":1==i?o="uint8_t":n&&2==i?o="int16_t":2==i?o="uint16_t":n&&4==i?o="int32_t":4==i?o="uint32_t":n&&8==i?o="int64_t":8==i&&(o="uint64_t"),null===o)throw new Error("Malformed CTF JSON: integer has unsupported length and sign - "+i+"/"+n);return r!=o?"char"==r?void ASSERT("int8_t"==o):void e.typedef(r,o):void 0}function ctfParseFloat(t,e){var r,n;if(r=t.name,!("length"in t["float"]))throw new Error("Malformed CTF JSON: float missing length value");if(n=t["float"].length,4!=n&&8!=n)throw new Error("Malformed CTF JSON: float has invalid length value");if(4==n){if("float"==r)return;e.typedef(r,"float")}else if(8==n){if("double"==r)return;e.typedef(r,"double")}}function ctfParseTypedef(t,e){var r,n,i;if(r=t.name,"string"!=typeof t.typedef)throw new Error("Malformed CTF JSON: typedef value in not a string");for(n=t.typedef,i=0;i<ctf_deftypes.length;i++)if(r==ctf_deftypes[i])return;e.typedef(r,n)}function ctfParseStruct(t,e){var r,n,i,o,a,f,s;if(f=[],!Array.isArray(t.struct))throw new Error("Malformed CTF JSON: struct value is not an array");for(i=0;i<t.struct.length;i++){if(o=t.struct[i],!("name"in o))throw new Error("Malformed CTF JSON: struct member missing name");if(!("type"in o))throw new Error("Malformed CTF JSON: struct member missing type");if("string"!=typeof o.name)throw new Error("Malformed CTF JSON: struct member name isn't a string");if("string"!=typeof o.type)throw new Error("Malformed CTF JSON: struct member type isn't a string");r=o.name,n=o.type,a=n.indexOf(" ["),-1!=a&&(n=n.substring(0,a)+n.substring(a+1,n.length)),s={},s[r]={type:n},f.push(s)}r=t.name,e.typedef(r,f)}function ctfParseEntry(t,e){var r,n;if(!("name"in t))throw new Error('Malformed CTF JSON: entry missing "name" section');for(r=0;r<ctf_entries.length;r++)ctf_entries[r]in t&&n++;if(0===n)throw new Error("Malformed CTF JSON: found no entries");if(n>=2)throw new Error("Malformed CTF JSON: found more than one entry");return"integer"in t?void ctfParseInteger(t,e):"float"in t?void ctfParseFloat(t,e):"typedef"in t?void ctfParseTypedef(t,e):"struct"in t?void ctfParseStruct(t,e):void ASSERT(!1,"shouldn't reach here")}function ctfParseJson(t,e){var r,n;if(ASSERT(t),ASSERT(e),!("metadata"in t))throw new Error("Invalid CTF JSON: missing metadata section");if(!("ctf2json_version"in t.metadata))throw new Error("Invalid CTF JSON: missing ctf2json_version");for(r=t.metadata.ctf2json_version,n=0;n<ctf_versions.length&&ctf_versions[n]!=r;n++);if(n==ctf_versions.length)throw new Error("Unsuported ctf2json_version: "+r);if(!("data"in t))throw new Error("Invalid CTF JSON: missing data section");if(!Array.isArray(t.data))throw new Error("Malformed CTF JSON: data section is not an array");for(n=0;n<t.data.length;n++)ctfParseEntry(t.data[n],e)}var mod_assert=require("assert"),ASSERT=mod_assert.ok,ctf_versions=["1.0"],ctf_entries=["integer","float","typedef","struct"],ctf_deftypes=["int8_t","uint8_t","int16_t","uint16_t","int32_t","uint32_t","float","double"];exports.ctfParseJson=ctfParseJson;


},{"assert":64}],221:[function(require,module,exports){
  function ruint8(r,n,i){if(void 0===n)throw new Error("missing endian");if(void 0===r)throw new Error("missing buffer");if(void 0===i)throw new Error("missing offset");if(i>=r.length)throw new Error("Trying to read beyond buffer length");return r[i]}function rgint16(r,n,i){var o=0;return"big"==n?(o=r[i]<<8,o|=r[i+1]):(o=r[i],o|=r[i+1]<<8),o}function ruint16(r,n,i){if(void 0===n)throw new Error("missing endian");if(void 0===r)throw new Error("missing buffer");if(void 0===i)throw new Error("missing offset");if(i+1>=r.length)throw new Error("Trying to read beyond buffer length");return rgint16(r,n,i)}function rgint32(r,n,i){var o=0;return"big"==n?(o=r[i+1]<<16,o|=r[i+2]<<8,o|=r[i+3],o+=r[i]<<24>>>0):(o=r[i+2]<<16,o|=r[i+1]<<8,o|=r[i],o+=r[i+3]<<24>>>0),o}function ruint32(r,n,i){if(void 0===n)throw new Error("missing endian");if(void 0===r)throw new Error("missing buffer");if(void 0===i)throw new Error("missing offset");if(i+3>=r.length)throw new Error("Trying to read beyond buffer length");return rgint32(r,n,i)}function rgint64(r,n,i){var o=new Array(2);return"big"==n?(o[0]=ruint32(r,n,i),o[1]=ruint32(r,n,i+4)):(o[0]=ruint32(r,n,i+4),o[1]=ruint32(r,n,i)),o}function ruint64(r,n,i){if(void 0===n)throw new Error("missing endian");if(void 0===r)throw new Error("missing buffer");if(void 0===i)throw new Error("missing offset");if(i+7>=r.length)throw new Error("Trying to read beyond buffer length");return rgint64(r,n,i)}function rsint8(r,n,i){var o;if(void 0===n)throw new Error("missing endian");if(void 0===r)throw new Error("missing buffer");if(void 0===i)throw new Error("missing offset");if(i>=r.length)throw new Error("Trying to read beyond buffer length");return o=128&r[i],o?-1*(255-r[i]+1):r[i]}function rsint16(r,n,i){var o,e;if(void 0===n)throw new Error("missing endian");if(void 0===r)throw new Error("missing buffer");if(void 0===i)throw new Error("missing offset");if(i+1>=r.length)throw new Error("Trying to read beyond buffer length");return e=rgint16(r,n,i),o=32768&e,o?-1*(65535-e+1):e}function rsint32(r,n,i){var o,e;if(void 0===n)throw new Error("missing endian");if(void 0===r)throw new Error("missing buffer");if(void 0===i)throw new Error("missing offset");if(i+3>=r.length)throw new Error("Trying to read beyond buffer length");return e=rgint32(r,n,i),o=2147483648&e,o?-1*(4294967295-e+1):e}function rsint64(r,n,i){var o,e;if(void 0===n)throw new Error("missing endian");if(void 0===r)throw new Error("missing buffer");if(void 0===i)throw new Error("missing offset");if(i+3>=r.length)throw new Error("Trying to read beyond buffer length");return e=rgint64(r,n,i),(o=2147483648&e[0])?(e[0]=-1*(4294967295-e[0]),e[1]=-1*(4294967295-e[1]+1),mod_assert.ok(e[1]<=4294967296),-4294967296==e[1]&&(e[1]=0,e[0]--),e):e}function rfloat(r,n,i){var o,e,t,f,w=[],s=127,u=255;if(void 0===n)throw new Error("missing endian");if(void 0===r)throw new Error("missing buffer");if(void 0===i)throw new Error("missing offset");if(i+3>=r.length)throw new Error("Trying to read beyond buffer length");return"big"==n?(w[0]=r[i],w[1]=r[i+1],w[2]=r[i+2],w[3]=r[i+3]):(w[3]=r[i],w[2]=r[i+1],w[1]=r[i+2],w[0]=r[i+3]),o=128&w[0],e=(127&w[0])<<1,e|=(128&w[1])>>>7,t=(127&w[1])<<16,t|=w[2]<<8,t|=w[3],o||e!=u||0!==t?o&&e==u&&0===t?Number.NEGATIVE_INFINITY:e==u&&0!==t?Number.NaN:0===e&&0===t?0:(e-=s,e==-s?(e++,f=0):f=1,f=(f+t*Math.pow(2,-23))*Math.pow(2,e),o&&(f*=-1),f):Number.POSITIVE_INFINITY}function rdouble(r,n,i){var o,e,t,f,w,s=[],u=1023,a=2047;if(void 0===n)throw new Error("missing endian");if(void 0===r)throw new Error("missing buffer");if(void 0===i)throw new Error("missing offset");if(i+7>=r.length)throw new Error("Trying to read beyond buffer length");return"big"==n?(s[0]=r[i],s[1]=r[i+1],s[2]=r[i+2],s[3]=r[i+3],s[4]=r[i+4],s[5]=r[i+5],s[6]=r[i+6],s[7]=r[i+7]):(s[7]=r[i],s[6]=r[i+1],s[5]=r[i+2],s[4]=r[i+3],s[3]=r[i+4],s[2]=r[i+5],s[1]=r[i+6],s[0]=r[i+7]),o=128&s[0],e=(127&s[0])<<4,e|=(240&s[1])>>>4,w=s[7],w|=s[6]<<8,w|=s[5]<<16,t=s[4],t|=s[3]<<8,t|=s[2]<<16,t|=(15&s[1])<<24,t*=Math.pow(2,24),t+=w,o||e!=a||0!==t?o&&e==a&&0===t?Number.NEGATIVE_INFINITY:e==a&&0!==t?Number.NaN:0===e&&0===t?0:(e-=u,e==-u?(e++,f=0):f=1,f=(f+t*Math.pow(2,-52))*Math.pow(2,e),o&&(f*=-1),f):Number.POSITIVE_INFINITY}function prepuint(r,n){if("number"!=typeof r)throw new(Error("cannot write a non-number as a number"));if(0>r)throw new Error("specified a negative value for writing an unsigned value");if(r>n)throw new Error("value is larger than maximum value for type");if(Math.floor(r)!==r)throw new Error("value has a fractional component");return r}function wuint8(r,n,i,o){var e;if(void 0===r)throw new Error("missing value");if(void 0===n)throw new Error("missing endian");if(void 0===i)throw new Error("missing buffer");if(void 0===o)throw new Error("missing offset");if(o>=i.length)throw new Error("Trying to read beyond buffer length");e=prepuint(r,255),i[o]=e}function wgint16(r,n,i,o){"big"==n?(i[o]=(65280&r)>>>8,i[o+1]=255&r):(i[o+1]=(65280&r)>>>8,i[o]=255&r)}function wuint16(r,n,i,o){var e;if(void 0===r)throw new Error("missing value");if(void 0===n)throw new Error("missing endian");if(void 0===i)throw new Error("missing buffer");if(void 0===o)throw new Error("missing offset");if(o+1>=i.length)throw new Error("Trying to read beyond buffer length");e=prepuint(r,65535),wgint16(e,n,i,o)}function wgint32(r,n,i,o){"big"==n?(i[o]=(r-(16777215&r))/Math.pow(2,24),i[o+1]=r>>>16&255,i[o+2]=r>>>8&255,i[o+3]=255&r):(i[o+3]=(r-(16777215&r))/Math.pow(2,24),i[o+2]=r>>>16&255,i[o+1]=r>>>8&255,i[o]=255&r)}function wuint32(r,n,i,o){var e;if(void 0===r)throw new Error("missing value");if(void 0===n)throw new Error("missing endian");if(void 0===i)throw new Error("missing buffer");if(void 0===o)throw new Error("missing offset");if(o+3>=i.length)throw new Error("Trying to read beyond buffer length");e=prepuint(r,4294967295),wgint32(e,n,i,o)}function wgint64(r,n,i,o){"big"==n?(wgint32(r[0],n,i,o),wgint32(r[1],n,i,o+4)):(wgint32(r[0],n,i,o+4),wgint32(r[1],n,i,o))}function wuint64(r,n,i,o){if(void 0===r)throw new Error("missing value");if(!(r instanceof Array))throw new Error("value must be an array");if(2!=r.length)throw new Error("value must be an array of length 2");if(void 0===n)throw new Error("missing endian");if(void 0===i)throw new Error("missing buffer");if(void 0===o)throw new Error("missing offset");if(o+7>=i.length)throw new Error("Trying to read beyond buffer length");prepuint(r[0],4294967295),prepuint(r[1],4294967295),wgint64(r,n,i,o)}function prepsint(r,n,i){if("number"!=typeof r)throw new(Error("cannot write a non-number as a number"));if(r>n)throw new Error("value larger than maximum allowed value");if(i>r)throw new Error("value smaller than minimum allowed value");if(Math.floor(r)!==r)throw new Error("value has a fractional component");return r}function wsint8(r,n,i,o){var e;if(void 0===r)throw new Error("missing value");if(void 0===n)throw new Error("missing endian");if(void 0===i)throw new Error("missing buffer");if(void 0===o)throw new Error("missing offset");if(o>=i.length)throw new Error("Trying to read beyond buffer length");e=prepsint(r,127,-128),e>=0?wuint8(e,n,i,o):wuint8(255+e+1,n,i,o)}function wsint16(r,n,i,o){var e;if(void 0===r)throw new Error("missing value");if(void 0===n)throw new Error("missing endian");if(void 0===i)throw new Error("missing buffer");if(void 0===o)throw new Error("missing offset");if(o+1>=i.length)throw new Error("Trying to read beyond buffer length");e=prepsint(r,32767,-32768),e>=0?wgint16(e,n,i,o):wgint16(65535+e+1,n,i,o)}function wsint32(r,n,i,o){var e;if(void 0===r)throw new Error("missing value");if(void 0===n)throw new Error("missing endian");if(void 0===i)throw new Error("missing buffer");if(void 0===o)throw new Error("missing offset");if(o+3>=i.length)throw new Error("Trying to read beyond buffer length");e=prepsint(r,2147483647,-2147483648),e>=0?wgint32(e,n,i,o):wgint32(4294967295+e+1,n,i,o)}function wsint64(r,n,i,o){var e,t,f=new Array(2);if(void 0===r)throw new Error("missing value");if(!(r instanceof Array))throw new Error("value must be an array");if(2!=r.length)throw new Error("value must be an array of length 2");if(void 0===n)throw new Error("missing endian");if(void 0===i)throw new Error("missing buffer");if(void 0===o)throw new Error("missing offset");if(o+7>=i.length)throw new Error("Trying to read beyond buffer length");if(e=r[0]*Number.POSITIVE_INFINITY==Number.POSITIVE_INFINITY,t=r[1]*Number.POSITIVE_INFINITY==Number.POSITIVE_INFINITY,0!=r[0]&&0!=r[1]&&e!=t)throw new Error("Both entries in the array must have the same sign");if(e)prepuint(r[0],2147483647),prepuint(r[1],4294967295);else if(prepsint(r[0],0,-2147483648),prepsint(r[1],0,-4294967295),-2147483648==r[0]&&0!=r[1])throw new Error("value smaller than minimum allowed value");r[0]<0||r[1]<0?(f[0]=4294967295-Math.abs(r[0]),f[1]=4294967296-Math.abs(r[1]),4294967296==f[1]&&(f[1]=0,f[0]++)):(f[0]=r[0],f[1]=r[1]),wgint64(f,n,i,o)}function log2(r){return Math.log(r)/Math.log(2)}function intexp(r){return Math.floor(log2(r))}function fracexp(r){return Math.floor(log2(r))}function wfloat(r,n,i,o){var e,t,f,w,s=[];if(void 0===r)throw new Error("missing value");if(void 0===n)throw new Error("missing endian");if(void 0===i)throw new Error("missing buffer");if(void 0===o)throw new Error("missing offset");if(o+3>=i.length)throw new Error("Trying to read beyond buffer length");isNaN(r)?(e=0,t=255,f=23):r==Number.POSITIVE_INFINITY?(e=0,t=255,f=0):r==Number.NEGATIVE_INFINITY?(e=1,t=255,f=0):(0>r?(e=1,r=Math.abs(r)):e=0,w=1>r?fracexp(r):intexp(r),-127>=w?(t=0,f=r*Math.pow(2,149)&8388607):(t=127+w,f=r*Math.pow(2,23-w),f&=8388607)),s[0]=e<<7|(254&t)>>>1,s[1]=(1&t)<<7|(8323072&f)>>>16,s[2]=(65280&f)>>>8,s[3]=255&f,"big"==n?(i[o]=s[0],i[o+1]=s[1],i[o+2]=s[2],i[o+3]=s[3]):(i[o]=s[3],i[o+1]=s[2],i[o+2]=s[1],i[o+3]=s[0])}function wdouble(r,n,i,o){var e,t,f,w,s=[];if(void 0===r)throw new Error("missing value");if(void 0===n)throw new Error("missing endian");if(void 0===i)throw new Error("missing buffer");if(void 0===o)throw new Error("missing offset");if(o+7>=i.length)throw new Error("Trying to read beyond buffer length");isNaN(r)?(e=0,t=2047,f=23):r==Number.POSITIVE_INFINITY?(e=0,t=2047,f=0):r==Number.NEGATIVE_INFINITY?(e=1,t=2047,f=0):(0>r?(e=1,r=Math.abs(r)):e=0,w=1>r?fracexp(r):intexp(r),2.225073858507201e-308>=r||-1023>=w?(t=0,f=r*Math.pow(2,1023)*Math.pow(2,51),f%=Math.pow(2,52)):(w>1023&&(w=1023),t=1023+w,f=r*Math.pow(2,-w),f*=Math.pow(2,52),f%=Math.pow(2,52))),s[7]=255&f,s[6]=f>>>8&255,s[5]=f>>>16&255,f=(f-(16777215&f))/Math.pow(2,24),s[4]=255&f,s[3]=f>>>8&255,s[2]=f>>>16&255,s[1]=(15&t)<<4|f>>>24,s[0]=e<<7|(2032&t)>>>4,"big"==n?(i[o]=s[0],i[o+1]=s[1],i[o+2]=s[2],i[o+3]=s[3],i[o+4]=s[4],i[o+5]=s[5],i[o+6]=s[6],i[o+7]=s[7]):(i[o+7]=s[0],i[o+6]=s[1],i[o+5]=s[2],i[o+4]=s[3],i[o+3]=s[4],i[o+2]=s[5],i[o+1]=s[6],i[o]=s[7])}var mod_assert=require("assert");exports.ruint8=ruint8,exports.ruint16=ruint16,exports.ruint32=ruint32,exports.ruint64=ruint64,exports.wuint8=wuint8,exports.wuint16=wuint16,exports.wuint32=wuint32,exports.wuint64=wuint64,exports.rsint8=rsint8,exports.rsint16=rsint16,exports.rsint32=rsint32,exports.rsint64=rsint64,exports.wsint8=wsint8,exports.wsint16=wsint16,exports.wsint32=wsint32,exports.wsint64=wsint64,exports.rfloat=rfloat,exports.rdouble=rdouble,exports.wfloat=wfloat,exports.wdouble=wdouble;


},{"assert":64}],222:[function(require,module,exports){
  (function (Buffer){
    function ctReadUint8(t,r,e){var i=mod_ctio.ruint8(r,t,e);return{value:i,size:1}}function ctReadUint16(t,r,e){var i=mod_ctio.ruint16(r,t,e);return{value:i,size:2}}function ctReadUint32(t,r,e){var i=mod_ctio.ruint32(r,t,e);return{value:i,size:4}}function ctReadUint64(t,r,e){var i=mod_ctio.ruint64(r,t,e);return{value:i,size:8}}function ctReadSint8(t,r,e){var i=mod_ctio.rsint8(r,t,e);return{value:i,size:1}}function ctReadSint16(t,r,e){var i=mod_ctio.rsint16(r,t,e);return{value:i,size:2}}function ctReadSint32(t,r,e){var i=mod_ctio.rsint32(r,t,e);return{value:i,size:4}}function ctReadSint64(t,r,e){var i=mod_ctio.rsint64(r,t,e);return{value:i,size:8}}function ctReadFloat(t,r,e){var i=mod_ctio.rfloat(r,t,e);return{value:i,size:4}}function ctReadDouble(t,r,e){var i=mod_ctio.rdouble(r,t,e);return{value:i,size:8}}function ctReadChar(t,r,e){var i=new Buffer(1);return i[0]=mod_ctio.ruint8(r,t,e),{value:i,size:1}}function ctReadCharArray(t,r,e,i){var n,o=new Buffer(t);for(n=0;t>n;n++)o[n]=mod_ctio.ruint8(e,r,i+n);return{value:o,size:t}}function ctWriteUint8(t,r,e,i){return mod_ctio.wuint8(t,r,e,i),1}function ctWriteUint16(t,r,e,i){return mod_ctio.wuint16(t,r,e,i),2}function ctWriteUint32(t,r,e,i){return mod_ctio.wuint32(t,r,e,i),4}function ctWriteUint64(t,r,e,i){return mod_ctio.wuint64(t,r,e,i),8}function ctWriteSint8(t,r,e,i){return mod_ctio.wsint8(t,r,e,i),1}function ctWriteSint16(t,r,e,i){return mod_ctio.wsint16(t,r,e,i),2}function ctWriteSint32(t,r,e,i){return mod_ctio.wsint32(t,r,e,i),4}function ctWriteSint64(t,r,e,i){return mod_ctio.wsint64(t,r,e,i),8}function ctWriteFloat(t,r,e,i){return mod_ctio.wfloat(t,r,e,i),4}function ctWriteDouble(t,r,e,i){return mod_ctio.wdouble(t,r,e,i),8}function ctWriteChar(t,r,e,i){if(!(t instanceof Buffer))throw new Error("Input must be a buffer");return mod_ctio.ruint8(t[0],r,e,i),1}function ctWriteCharArray(t,r,e,i,n){var o;if(!(t instanceof Buffer))throw new Error("Input must be a buffer");if(t.length>r)throw new Error("value length greater than array length");for(o=0;o<t.length&&r>o;o++)mod_ctio.wuint8(t[o],e,i,n+o);for(;r>o;o++)mod_ctio.wuint8(0,e,n+o);return r}function ctGetBasicTypes(){var t,r={};for(t in deftypes)r[t]=deftypes[t];return r}function ctParseType(t){var r,e,i,n;if("string"!=typeof t)throw new Error("type must be a Javascript string");if(e=t.lastIndexOf("]"),-1==e){if(-1!=t.lastIndexOf("["))throw new Error("found invalid type with '[' but no corresponding ']'");return{type:t}}if(r=t.lastIndexOf("["),-1==r)throw new Error("found invalid type with ']' but no corresponding '['");if(r>=e)throw new Error("malformed type, ']' appears before '['");return i=t.substring(0,r),n=t.substring(r+1,e),{type:i,len:n}}function ctCheckReq(t,r,e){var i,n,o,a,s,u={};if(!(t instanceof Array))throw new Error("definition is not an array");if(0===t.length)throw new Error("definition must have at least one element");for(i=0;i<t.length;i++){if(o=t[i],!(o instanceof Object))throw new Error("definition must be an array ofobjects");if(a=Object.keys(o),1!=a.length)throw new Error("definition entry must only have one key");if(a[0]in u)throw new Error("Specified name already specified: "+a[0]);if(!("type"in o[a[0]]))throw new Error("missing required type definition");for(s=ctParseType(o[a[0]].type);void 0!==s.len;){if(isNaN(parseInt(s.len,10))&&!(s.len in u))throw new Error("Given an array length without a matching type");s=ctParseType(s.type)}if(!(s.type in r))throw new Error("type not found or typdefed: "+s.type);if(void 0!==e)for(n=0;n<e.length;n++)if(!(e[n]in o[a[0]]))throw new Error("Missing required field: "+e[n]);u[a[0]]=!0}}function CTypeParser(t){if(!t)throw new Error("missing required argument");if(!("endian"in t))throw new Error("missing required endian value");if("big"!=t.endian&&"little"!=t.endian)throw new Error("Invalid endian type");if("char-type"in t&&"uint8"!=t["char-type"]&&"int8"!=t["char-type"])throw new Error("invalid option for char-type: "+t["char-type"]);this.endian=t.endian,this.types=ctGetBasicTypes(),"char-type"in t&&"uint8"==t["char-type"]&&(this.types["char"]=this.types.uint8_t),"char-type"in t&&"int8"==t["char-type"]&&(this.types["char"]=this.types.int8_t)}function ctResolveArray(t,r){for(var e="",i=ctParseType(t);void 0!==i.len;){if(isNaN(parseInt(i.len,10))){if("number"!=typeof r[i.len])throw new Error("cannot sawp in non-number for array value");e="["+r[i.len]+"]"+e}else e="["+i.len+"]"+e;i=ctParseType(i.type)}return e=i.type+e}function getValues(t){var r,e,i;for(e=[],r=0;r<t.length;r++)i=Object.keys(t[r])[0],mod_assert.ok("value"in t[r][i]),e.push(t[r][i].value);return e}function toAbs64(t){if(void 0===t)throw new Error("missing required arg: value");if(!Array.isArray(t))throw new Error("value must be an array");if(2!=t.length)throw new Error("value must be an array of length 2");if(t[0]>=1048576)throw new Error("value would become approximated");return t[0]*Math.pow(2,32)+t[1]}function toApprox64(t){if(void 0===t)throw new Error("missing required arg: value");if(!Array.isArray(t))throw new Error("value must be an array");if(2!=t.length)throw new Error("value must be an array of length 2");return Math.pow(2,32)*t[0]+t[1]}function parseCTF(t,r){var e=new CTypeParser(r);return mod_ctf.ctfParseJson(t,e),e}var mod_ctf=require("./ctf.js"),mod_ctio=require("./ctio.js"),mod_assert=require("assert"),deftypes={uint8_t:{read:ctReadUint8,write:ctWriteUint8},uint16_t:{read:ctReadUint16,write:ctWriteUint16},uint32_t:{read:ctReadUint32,write:ctWriteUint32},uint64_t:{read:ctReadUint64,write:ctWriteUint64},int8_t:{read:ctReadSint8,write:ctWriteSint8},int16_t:{read:ctReadSint16,write:ctWriteSint16},int32_t:{read:ctReadSint32,write:ctWriteSint32},int64_t:{read:ctReadSint64,write:ctWriteSint64},"float":{read:ctReadFloat,write:ctWriteFloat},"double":{read:ctReadDouble,write:ctWriteDouble},"char":{read:ctReadChar,write:ctWriteChar},"char[]":{read:ctReadCharArray,write:ctWriteCharArray}};CTypeParser.prototype.setEndian=function(t){if("big"!=t&&"little"!=t)throw new Error("invalid endian type, must be big or little");this.endian=t},CTypeParser.prototype.getEndian=function(){return this.endian},CTypeParser.prototype.typedef=function(t,r){var e;if(void 0===t)throw new(Error("missing required typedef argument: name"));if(void 0===r)throw new(Error("missing required typedef argument: value"));if("string"!=typeof t)throw new(Error("the name of a type must be a string"));if(e=ctParseType(t),void 0!==e.len)throw new Error("Cannot have an array in the typedef name");if(t in this.types)throw new Error("typedef name already present: "+t);if("string"!=typeof r&&!(r instanceof Array))throw new Error("typedef value must either be a string or struct");if("string"==typeof r){if(e=ctParseType(r),void 0!==e.len&&isNaN(parseInt(e.len,10)))throw new(Error("typedef value must use fixed size array when outside of a struct"));this.types[t]=r}else ctCheckReq(r,this.types),this.types[t]=r},CTypeParser.prototype.lstypes=function(){var t,r={};for(t in this.types)t in deftypes||(r[t]=this.types[t]);return r},CTypeParser.prototype.resolveTypedef=function(t,r,e,i,n){var o;if(mod_assert.ok(t in this.types),"string"==typeof this.types[t]){if(o=ctParseType(this.types[t]),"read"==r)return this.readEntry(o,e,i);if("write"==r)return this.writeEntry(n,o,e,i);throw new Error("invalid dispatch type to resolveTypedef")}if("read"==r)return this.readStruct(this.types[t],e,i);if("write"==r)return this.writeStruct(n,this.types[t],e,i);throw new Error("invalid dispatch type to resolveTypedef")},CTypeParser.prototype.readEntry=function(t,r,e){var i,n;if(void 0!==t.len){if(n=parseInt(t.len,10),isNaN(n))throw new Error("somehow got a non-numeric length");i="char"==t.type?this.types["char[]"].read(n,this.endian,r,e):this.readArray(t.type,n,r,e)}else i=t.type in deftypes?this.types[t.type].read(this.endian,r,e):this.resolveTypedef(t.type,"read",r,e);return i},CTypeParser.prototype.readArray=function(t,r,e,i){var n,o,a,s=i,u=new Array(r);for(a=ctParseType(t),n=0;r>n;n++)o=this.readEntry(a,e,i),i+=o.size,u[n]=o.value;return{value:u,size:i-s}},CTypeParser.prototype.readStruct=function(t,r,e){var i,n,o,a,s,u=e,c={};for(n=0;n<t.length;n++)s=Object.keys(t[n])[0],a=t[n][s],o=ctParseType(ctResolveArray(a.type,c)),"offset"in a&&(e=u+a.offset),i=this.readEntry(o,r,e),e+=i.size,c[s]=i.value;return{value:c,size:e-u}},CTypeParser.prototype.readData=function(t,r,e){if(void 0===t)throw new Error("missing definition for what we should beparsing");if(void 0===r)throw new Error("missing buffer for what we should be parsing");if(void 0===e)throw new Error("missing offset for what we should be parsing");return ctCheckReq(t,this.types),this.readStruct(t,r,e).value},CTypeParser.prototype.writeArray=function(t,r,e,i,n){var o,a,s=n;if(!(t instanceof Array))throw new Error("asked to write an array, but value is not an array");if(t.length!=e)throw new Error("asked to write array of length "+e+" but that does not match value length: "+t.length);for(a=ctParseType(r),o=0;e>o;o++)n+=this.writeEntry(t[o],a,i,n);return n-s},CTypeParser.prototype.writeEntry=function(t,r,e,i){var n,o;if(void 0!==r.len){if(n=parseInt(r.len,10),isNaN(n))throw new Error("somehow got a non-numeric length");o="char"==r.type?this.types["char[]"].write(t,n,this.endian,e,i):this.writeArray(t,r.type,n,e,i)}else o=r.type in deftypes?this.types[r.type].write(t,this.endian,e,i):this.resolveTypedef(r.type,"write",e,i,t);return o},CTypeParser.prototype.writeStruct=function(t,r,e,i){var n,o,a,s,u=i,c={};for(n=0;n<r.length;n++)s=Object.keys(r[n])[0],o=r[n][s],a=ctParseType(ctResolveArray(o.type,c)),"offset"in o&&(i=u+o.offset),i+=this.writeEntry(t[n],a,e,i),c[s]=t[n];return i},CTypeParser.prototype.writeData=function(t,r,e,i){var n;if(void 0===t)throw new Error("missing definition for what we should beparsing");if(void 0===r)throw new Error("missing buffer for what we should be parsing");if(void 0===e)throw new Error("missing offset for what we should be parsing");if(n=null!=i&&void 0!=i){if(!Array.isArray(i))throw new Error("missing values for writing");ctCheckReq(t,this.types)}else ctCheckReq(t,this.types,["value"]);this.writeStruct(n?i:getValues(t),t,r,e)},exports.Parser=CTypeParser,exports.toAbs64=toAbs64,exports.toApprox64=toApprox64,exports.parseCTF=parseCTF,exports.ruint8=mod_ctio.ruint8,exports.ruint16=mod_ctio.ruint16,exports.ruint32=mod_ctio.ruint32,exports.ruint64=mod_ctio.ruint64,exports.wuint8=mod_ctio.wuint8,exports.wuint16=mod_ctio.wuint16,exports.wuint32=mod_ctio.wuint32,exports.wuint64=mod_ctio.wuint64,exports.rsint8=mod_ctio.rsint8,exports.rsint16=mod_ctio.rsint16,exports.rsint32=mod_ctio.rsint32,exports.rsint64=mod_ctio.rsint64,exports.wsint8=mod_ctio.wsint8,exports.wsint16=mod_ctio.wsint16,exports.wsint32=mod_ctio.wsint32,exports.wsint64=mod_ctio.wsint64,exports.rfloat=mod_ctio.rfloat,exports.rdouble=mod_ctio.rdouble,exports.wfloat=mod_ctio.wfloat,exports.wdouble=mod_ctio.wdouble;


  }).call(this,require("buffer").Buffer)
},{"./ctf.js":220,"./ctio.js":221,"assert":64,"buffer":78}],223:[function(require,module,exports){
  function isStream(e){return e instanceof stream.Stream}function isReadable(e){return isStream(e)&&"function"==typeof e._read&&"object"==typeof e._readableState}function isWritable(e){return isStream(e)&&"function"==typeof e._write&&"object"==typeof e._writableState}function isDuplex(e){return isReadable(e)&&isWritable(e)}var stream=require("stream");module.exports=isStream,module.exports.isReadable=isReadable,module.exports.isWritable=isWritable,module.exports.isDuplex=isDuplex;


},{"stream":101}],224:[function(require,module,exports){
  function stringify(i,r,e,n){return JSON.stringify(i,serializer(r,n),e)}function serializer(i,r){var e=[],n=[];return null==r&&(r=function(i,r){return e[0]===r?"[Circular ~]":"[Circular ~."+n.slice(0,e.indexOf(r)).join(".")+"]"}),function(l,s){if(e.length>0){var t=e.indexOf(this);~t?e.splice(t+1):e.push(this),~t?n.splice(t,1/0,l):n.push(l),~e.indexOf(s)&&(s=r.call(this,l,s))}else e.push(s);return null==i?s:i.call(this,l,s)}}exports=module.exports=stringify,exports.getSerialize=serializer;


},{}],225:[function(require,module,exports){
  var db=require("mime-db");exports.types=Object.create(null),exports.extensions=Object.create(null),Object.keys(db).forEach(function(e){var t=db[e],r=t.extensions;r&&r.length&&(exports.extensions[e]=r,r.forEach(function(t){exports.types[t]=e}))}),exports.lookup=function(e){return e&&"string"==typeof e?(e=e.replace(/.*[\.\/\\]/,"").toLowerCase(),e?exports.types[e]||!1:!1):!1},exports.extension=function(e){if(!e||"string"!=typeof e)return!1;if(e=e.match(/^\s*([^;\s]*)(?:;|\s|$)/),!e)return!1;var t=exports.extensions[e[1].toLowerCase()];return t&&t.length?t[0]:!1},exports.charset=function(e){var t=db[e];return t&&t.charset?t.charset:/^text\//.test(e)?"UTF-8":!1},exports.charsets={lookup:exports.charset},exports.contentType=function(e){if(!e||"string"!=typeof e)return!1;if(~e.indexOf("/")||(e=exports.lookup(e)),!e)return!1;if(!~e.indexOf("charset")){var t=exports.charset(e);t&&(e+="; charset="+t.toLowerCase())}return e};


},{"mime-db":227}],226:[function(require,module,exports){
  module.exports={
    "application/1d-interleaved-parityfec": {
      "source": "iana"
    },
    "application/3gpdash-qoe-report+xml": {
      "source": "iana"
    },
    "application/3gpp-ims+xml": {
      "source": "iana"
    },
    "application/a2l": {
      "source": "iana"
    },
    "application/activemessage": {
      "source": "iana"
    },
    "application/alto-costmap+json": {
      "source": "iana",
      "compressible": true
    },
    "application/alto-costmapfilter+json": {
      "source": "iana",
      "compressible": true
    },
    "application/alto-directory+json": {
      "source": "iana",
      "compressible": true
    },
    "application/alto-endpointcost+json": {
      "source": "iana",
      "compressible": true
    },
    "application/alto-endpointcostparams+json": {
      "source": "iana",
      "compressible": true
    },
    "application/alto-endpointprop+json": {
      "source": "iana",
      "compressible": true
    },
    "application/alto-endpointpropparams+json": {
      "source": "iana",
      "compressible": true
    },
    "application/alto-error+json": {
      "source": "iana",
      "compressible": true
    },
    "application/alto-networkmap+json": {
      "source": "iana",
      "compressible": true
    },
    "application/alto-networkmapfilter+json": {
      "source": "iana",
      "compressible": true
    },
    "application/aml": {
      "source": "iana"
    },
    "application/andrew-inset": {
      "source": "iana",
      "extensions": ["ez"]
    },
    "application/applefile": {
      "source": "iana"
    },
    "application/applixware": {
      "source": "apache",
      "extensions": ["aw"]
    },
    "application/atf": {
      "source": "iana"
    },
    "application/atfx": {
      "source": "iana"
    },
    "application/atom+xml": {
      "source": "iana",
      "compressible": true,
      "extensions": ["atom"]
    },
    "application/atomcat+xml": {
      "source": "iana",
      "extensions": ["atomcat"]
    },
    "application/atomdeleted+xml": {
      "source": "iana"
    },
    "application/atomicmail": {
      "source": "iana"
    },
    "application/atomsvc+xml": {
      "source": "iana",
      "extensions": ["atomsvc"]
    },
    "application/atxml": {
      "source": "iana"
    },
    "application/auth-policy+xml": {
      "source": "iana"
    },
    "application/bacnet-xdd+zip": {
      "source": "iana"
    },
    "application/batch-smtp": {
      "source": "iana"
    },
    "application/bdoc": {
      "compressible": false,
      "extensions": ["bdoc"]
    },
    "application/beep+xml": {
      "source": "iana"
    },
    "application/calendar+json": {
      "source": "iana",
      "compressible": true
    },
    "application/calendar+xml": {
      "source": "iana"
    },
    "application/call-completion": {
      "source": "iana"
    },
    "application/cals-1840": {
      "source": "iana"
    },
    "application/cbor": {
      "source": "iana"
    },
    "application/ccmp+xml": {
      "source": "iana"
    },
    "application/ccxml+xml": {
      "source": "iana",
      "extensions": ["ccxml"]
    },
    "application/cdfx+xml": {
      "source": "iana"
    },
    "application/cdmi-capability": {
      "source": "iana",
      "extensions": ["cdmia"]
    },
    "application/cdmi-container": {
      "source": "iana",
      "extensions": ["cdmic"]
    },
    "application/cdmi-domain": {
      "source": "iana",
      "extensions": ["cdmid"]
    },
    "application/cdmi-object": {
      "source": "iana",
      "extensions": ["cdmio"]
    },
    "application/cdmi-queue": {
      "source": "iana",
      "extensions": ["cdmiq"]
    },
    "application/cea": {
      "source": "iana"
    },
    "application/cea-2018+xml": {
      "source": "iana"
    },
    "application/cellml+xml": {
      "source": "iana"
    },
    "application/cfw": {
      "source": "iana"
    },
    "application/cms": {
      "source": "iana"
    },
    "application/cnrp+xml": {
      "source": "iana"
    },
    "application/coap-group+json": {
      "source": "iana",
      "compressible": true
    },
    "application/commonground": {
      "source": "iana"
    },
    "application/conference-info+xml": {
      "source": "iana"
    },
    "application/cpl+xml": {
      "source": "iana"
    },
    "application/csrattrs": {
      "source": "iana"
    },
    "application/csta+xml": {
      "source": "iana"
    },
    "application/cstadata+xml": {
      "source": "iana"
    },
    "application/cu-seeme": {
      "source": "apache",
      "extensions": ["cu"]
    },
    "application/cybercash": {
      "source": "iana"
    },
    "application/dart": {
      "compressible": true
    },
    "application/dash+xml": {
      "source": "iana",
      "extensions": ["mdp"]
    },
    "application/dashdelta": {
      "source": "iana"
    },
    "application/davmount+xml": {
      "source": "iana",
      "extensions": ["davmount"]
    },
    "application/dca-rft": {
      "source": "iana"
    },
    "application/dcd": {
      "source": "iana"
    },
    "application/dec-dx": {
      "source": "iana"
    },
    "application/dialog-info+xml": {
      "source": "iana"
    },
    "application/dicom": {
      "source": "iana"
    },
    "application/dii": {
      "source": "iana"
    },
    "application/dit": {
      "source": "iana"
    },
    "application/dns": {
      "source": "iana"
    },
    "application/docbook+xml": {
      "source": "apache",
      "extensions": ["dbk"]
    },
    "application/dskpp+xml": {
      "source": "iana"
    },
    "application/dssc+der": {
      "source": "iana",
      "extensions": ["dssc"]
    },
    "application/dssc+xml": {
      "source": "iana",
      "extensions": ["xdssc"]
    },
    "application/dvcs": {
      "source": "iana"
    },
    "application/ecmascript": {
      "source": "iana",
      "compressible": true,
      "extensions": ["ecma"]
    },
    "application/edi-consent": {
      "source": "iana"
    },
    "application/edi-x12": {
      "source": "iana",
      "compressible": false
    },
    "application/edifact": {
      "source": "iana",
      "compressible": false
    },
    "application/emma+xml": {
      "source": "iana",
      "extensions": ["emma"]
    },
    "application/emotionml+xml": {
      "source": "iana"
    },
    "application/encaprtp": {
      "source": "iana"
    },
    "application/epp+xml": {
      "source": "iana"
    },
    "application/epub+zip": {
      "source": "iana",
      "extensions": ["epub"]
    },
    "application/eshop": {
      "source": "iana"
    },
    "application/exi": {
      "source": "iana",
      "extensions": ["exi"]
    },
    "application/fastinfoset": {
      "source": "iana"
    },
    "application/fastsoap": {
      "source": "iana"
    },
    "application/fdt+xml": {
      "source": "iana"
    },
    "application/fits": {
      "source": "iana"
    },
    "application/font-sfnt": {
      "source": "iana"
    },
    "application/font-tdpfr": {
      "source": "iana",
      "extensions": ["pfr"]
    },
    "application/font-woff": {
      "source": "iana",
      "compressible": false,
      "extensions": ["woff"]
    },
    "application/font-woff2": {
      "compressible": false,
      "extensions": ["woff2"]
    },
    "application/framework-attributes+xml": {
      "source": "iana"
    },
    "application/gml+xml": {
      "source": "apache",
      "extensions": ["gml"]
    },
    "application/gpx+xml": {
      "source": "apache",
      "extensions": ["gpx"]
    },
    "application/gxf": {
      "source": "apache",
      "extensions": ["gxf"]
    },
    "application/gzip": {
      "source": "iana",
      "compressible": false
    },
    "application/h224": {
      "source": "iana"
    },
    "application/held+xml": {
      "source": "iana"
    },
    "application/http": {
      "source": "iana"
    },
    "application/hyperstudio": {
      "source": "iana",
      "extensions": ["stk"]
    },
    "application/ibe-key-request+xml": {
      "source": "iana"
    },
    "application/ibe-pkg-reply+xml": {
      "source": "iana"
    },
    "application/ibe-pp-data": {
      "source": "iana"
    },
    "application/iges": {
      "source": "iana"
    },
    "application/im-iscomposing+xml": {
      "source": "iana"
    },
    "application/index": {
      "source": "iana"
    },
    "application/index.cmd": {
      "source": "iana"
    },
    "application/index.obj": {
      "source": "iana"
    },
    "application/index.response": {
      "source": "iana"
    },
    "application/index.vnd": {
      "source": "iana"
    },
    "application/inkml+xml": {
      "source": "iana",
      "extensions": ["ink","inkml"]
    },
    "application/iotp": {
      "source": "iana"
    },
    "application/ipfix": {
      "source": "iana",
      "extensions": ["ipfix"]
    },
    "application/ipp": {
      "source": "iana"
    },
    "application/isup": {
      "source": "iana"
    },
    "application/its+xml": {
      "source": "iana"
    },
    "application/java-archive": {
      "source": "apache",
      "compressible": false,
      "extensions": ["jar"]
    },
    "application/java-serialized-object": {
      "source": "apache",
      "compressible": false,
      "extensions": ["ser"]
    },
    "application/java-vm": {
      "source": "apache",
      "compressible": false,
      "extensions": ["class"]
    },
    "application/javascript": {
      "source": "iana",
      "charset": "UTF-8",
      "compressible": true,
      "extensions": ["js"]
    },
    "application/jose": {
      "source": "iana"
    },
    "application/jose+json": {
      "source": "iana",
      "compressible": true
    },
    "application/jrd+json": {
      "source": "iana",
      "compressible": true
    },
    "application/json": {
      "source": "iana",
      "charset": "UTF-8",
      "compressible": true,
      "extensions": ["json","map"]
    },
    "application/json-patch+json": {
      "source": "iana",
      "compressible": true
    },
    "application/json-seq": {
      "source": "iana"
    },
    "application/json5": {
      "extensions": ["json5"]
    },
    "application/jsonml+json": {
      "source": "apache",
      "compressible": true,
      "extensions": ["jsonml"]
    },
    "application/jwk+json": {
      "source": "iana",
      "compressible": true
    },
    "application/jwk-set+json": {
      "source": "iana",
      "compressible": true
    },
    "application/jwt": {
      "source": "iana"
    },
    "application/kpml-request+xml": {
      "source": "iana"
    },
    "application/kpml-response+xml": {
      "source": "iana"
    },
    "application/ld+json": {
      "source": "iana",
      "compressible": true,
      "extensions": ["jsonld"]
    },
    "application/link-format": {
      "source": "iana"
    },
    "application/load-control+xml": {
      "source": "iana"
    },
    "application/lost+xml": {
      "source": "iana",
      "extensions": ["lostxml"]
    },
    "application/lostsync+xml": {
      "source": "iana"
    },
    "application/lxf": {
      "source": "iana"
    },
    "application/mac-binhex40": {
      "source": "iana",
      "extensions": ["hqx"]
    },
    "application/mac-compactpro": {
      "source": "apache",
      "extensions": ["cpt"]
    },
    "application/macwriteii": {
      "source": "iana"
    },
    "application/mads+xml": {
      "source": "iana",
      "extensions": ["mads"]
    },
    "application/manifest+json": {
      "charset": "UTF-8",
      "compressible": true,
      "extensions": ["webmanifest"]
    },
    "application/marc": {
      "source": "iana",
      "extensions": ["mrc"]
    },
    "application/marcxml+xml": {
      "source": "iana",
      "extensions": ["mrcx"]
    },
    "application/mathematica": {
      "source": "iana",
      "extensions": ["ma","nb","mb"]
    },
    "application/mathml+xml": {
      "source": "iana",
      "extensions": ["mathml"]
    },
    "application/mathml-content+xml": {
      "source": "iana"
    },
    "application/mathml-presentation+xml": {
      "source": "iana"
    },
    "application/mbms-associated-procedure-description+xml": {
      "source": "iana"
    },
    "application/mbms-deregister+xml": {
      "source": "iana"
    },
    "application/mbms-envelope+xml": {
      "source": "iana"
    },
    "application/mbms-msk+xml": {
      "source": "iana"
    },
    "application/mbms-msk-response+xml": {
      "source": "iana"
    },
    "application/mbms-protection-description+xml": {
      "source": "iana"
    },
    "application/mbms-reception-report+xml": {
      "source": "iana"
    },
    "application/mbms-register+xml": {
      "source": "iana"
    },
    "application/mbms-register-response+xml": {
      "source": "iana"
    },
    "application/mbms-schedule+xml": {
      "source": "iana"
    },
    "application/mbms-user-service-description+xml": {
      "source": "iana"
    },
    "application/mbox": {
      "source": "iana",
      "extensions": ["mbox"]
    },
    "application/media-policy-dataset+xml": {
      "source": "iana"
    },
    "application/media_control+xml": {
      "source": "iana"
    },
    "application/mediaservercontrol+xml": {
      "source": "iana",
      "extensions": ["mscml"]
    },
    "application/merge-patch+json": {
      "source": "iana",
      "compressible": true
    },
    "application/metalink+xml": {
      "source": "apache",
      "extensions": ["metalink"]
    },
    "application/metalink4+xml": {
      "source": "iana",
      "extensions": ["meta4"]
    },
    "application/mets+xml": {
      "source": "iana",
      "extensions": ["mets"]
    },
    "application/mf4": {
      "source": "iana"
    },
    "application/mikey": {
      "source": "iana"
    },
    "application/mods+xml": {
      "source": "iana",
      "extensions": ["mods"]
    },
    "application/moss-keys": {
      "source": "iana"
    },
    "application/moss-signature": {
      "source": "iana"
    },
    "application/mosskey-data": {
      "source": "iana"
    },
    "application/mosskey-request": {
      "source": "iana"
    },
    "application/mp21": {
      "source": "iana",
      "extensions": ["m21","mp21"]
    },
    "application/mp4": {
      "source": "iana",
      "extensions": ["mp4s","m4p"]
    },
    "application/mpeg4-generic": {
      "source": "iana"
    },
    "application/mpeg4-iod": {
      "source": "iana"
    },
    "application/mpeg4-iod-xmt": {
      "source": "iana"
    },
    "application/mrb-consumer+xml": {
      "source": "iana"
    },
    "application/mrb-publish+xml": {
      "source": "iana"
    },
    "application/msc-ivr+xml": {
      "source": "iana"
    },
    "application/msc-mixer+xml": {
      "source": "iana"
    },
    "application/msword": {
      "source": "iana",
      "compressible": false,
      "extensions": ["doc","dot"]
    },
    "application/mxf": {
      "source": "iana",
      "extensions": ["mxf"]
    },
    "application/nasdata": {
      "source": "iana"
    },
    "application/news-checkgroups": {
      "source": "iana"
    },
    "application/news-groupinfo": {
      "source": "iana"
    },
    "application/news-transmission": {
      "source": "iana"
    },
    "application/nlsml+xml": {
      "source": "iana"
    },
    "application/nss": {
      "source": "iana"
    },
    "application/ocsp-request": {
      "source": "iana"
    },
    "application/ocsp-response": {
      "source": "iana"
    },
    "application/octet-stream": {
      "source": "iana",
      "compressible": false,
      "extensions": ["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","buffer"]
    },
    "application/oda": {
      "source": "iana",
      "extensions": ["oda"]
    },
    "application/odx": {
      "source": "iana"
    },
    "application/oebps-package+xml": {
      "source": "iana",
      "extensions": ["opf"]
    },
    "application/ogg": {
      "source": "iana",
      "compressible": false,
      "extensions": ["ogx"]
    },
    "application/omdoc+xml": {
      "source": "apache",
      "extensions": ["omdoc"]
    },
    "application/onenote": {
      "source": "apache",
      "extensions": ["onetoc","onetoc2","onetmp","onepkg"]
    },
    "application/oxps": {
      "source": "iana",
      "extensions": ["oxps"]
    },
    "application/p2p-overlay+xml": {
      "source": "iana"
    },
    "application/parityfec": {
      "source": "iana"
    },
    "application/patch-ops-error+xml": {
      "source": "iana",
      "extensions": ["xer"]
    },
    "application/pdf": {
      "source": "iana",
      "compressible": false,
      "extensions": ["pdf"]
    },
    "application/pdx": {
      "source": "iana"
    },
    "application/pgp-encrypted": {
      "source": "iana",
      "compressible": false,
      "extensions": ["pgp"]
    },
    "application/pgp-keys": {
      "source": "iana"
    },
    "application/pgp-signature": {
      "source": "iana",
      "extensions": ["asc","sig"]
    },
    "application/pics-rules": {
      "source": "apache",
      "extensions": ["prf"]
    },
    "application/pidf+xml": {
      "source": "iana"
    },
    "application/pidf-diff+xml": {
      "source": "iana"
    },
    "application/pkcs10": {
      "source": "iana",
      "extensions": ["p10"]
    },
    "application/pkcs7-mime": {
      "source": "iana",
      "extensions": ["p7m","p7c"]
    },
    "application/pkcs7-signature": {
      "source": "iana",
      "extensions": ["p7s"]
    },
    "application/pkcs8": {
      "source": "iana",
      "extensions": ["p8"]
    },
    "application/pkix-attr-cert": {
      "source": "iana",
      "extensions": ["ac"]
    },
    "application/pkix-cert": {
      "source": "iana",
      "extensions": ["cer"]
    },
    "application/pkix-crl": {
      "source": "iana",
      "extensions": ["crl"]
    },
    "application/pkix-pkipath": {
      "source": "iana",
      "extensions": ["pkipath"]
    },
    "application/pkixcmp": {
      "source": "iana",
      "extensions": ["pki"]
    },
    "application/pls+xml": {
      "source": "iana",
      "extensions": ["pls"]
    },
    "application/poc-settings+xml": {
      "source": "iana"
    },
    "application/postscript": {
      "source": "iana",
      "compressible": true,
      "extensions": ["ai","eps","ps"]
    },
    "application/provenance+xml": {
      "source": "iana"
    },
    "application/prs.alvestrand.titrax-sheet": {
      "source": "iana"
    },
    "application/prs.cww": {
      "source": "iana",
      "extensions": ["cww"]
    },
    "application/prs.hpub+zip": {
      "source": "iana"
    },
    "application/prs.nprend": {
      "source": "iana"
    },
    "application/prs.plucker": {
      "source": "iana"
    },
    "application/prs.rdf-xml-crypt": {
      "source": "iana"
    },
    "application/prs.xsf+xml": {
      "source": "iana"
    },
    "application/pskc+xml": {
      "source": "iana",
      "extensions": ["pskcxml"]
    },
    "application/qsig": {
      "source": "iana"
    },
    "application/raptorfec": {
      "source": "iana"
    },
    "application/rdap+json": {
      "source": "iana",
      "compressible": true
    },
    "application/rdf+xml": {
      "source": "iana",
      "compressible": true,
      "extensions": ["rdf"]
    },
    "application/reginfo+xml": {
      "source": "iana",
      "extensions": ["rif"]
    },
    "application/relax-ng-compact-syntax": {
      "source": "iana",
      "extensions": ["rnc"]
    },
    "application/remote-printing": {
      "source": "iana"
    },
    "application/reputon+json": {
      "source": "iana",
      "compressible": true
    },
    "application/resource-lists+xml": {
      "source": "iana",
      "extensions": ["rl"]
    },
    "application/resource-lists-diff+xml": {
      "source": "iana",
      "extensions": ["rld"]
    },
    "application/riscos": {
      "source": "iana"
    },
    "application/rlmi+xml": {
      "source": "iana"
    },
    "application/rls-services+xml": {
      "source": "iana",
      "extensions": ["rs"]
    },
    "application/rpki-ghostbusters": {
      "source": "iana",
      "extensions": ["gbr"]
    },
    "application/rpki-manifest": {
      "source": "iana",
      "extensions": ["mft"]
    },
    "application/rpki-roa": {
      "source": "iana",
      "extensions": ["roa"]
    },
    "application/rpki-updown": {
      "source": "iana"
    },
    "application/rsd+xml": {
      "source": "apache",
      "extensions": ["rsd"]
    },
    "application/rss+xml": {
      "source": "apache",
      "compressible": true,
      "extensions": ["rss"]
    },
    "application/rtf": {
      "source": "iana",
      "compressible": true,
      "extensions": ["rtf"]
    },
    "application/rtploopback": {
      "source": "iana"
    },
    "application/rtx": {
      "source": "iana"
    },
    "application/samlassertion+xml": {
      "source": "iana"
    },
    "application/samlmetadata+xml": {
      "source": "iana"
    },
    "application/sbml+xml": {
      "source": "iana",
      "extensions": ["sbml"]
    },
    "application/scaip+xml": {
      "source": "iana"
    },
    "application/scvp-cv-request": {
      "source": "iana",
      "extensions": ["scq"]
    },
    "application/scvp-cv-response": {
      "source": "iana",
      "extensions": ["scs"]
    },
    "application/scvp-vp-request": {
      "source": "iana",
      "extensions": ["spq"]
    },
    "application/scvp-vp-response": {
      "source": "iana",
      "extensions": ["spp"]
    },
    "application/sdp": {
      "source": "iana",
      "extensions": ["sdp"]
    },
    "application/sep+xml": {
      "source": "iana"
    },
    "application/sep-exi": {
      "source": "iana"
    },
    "application/session-info": {
      "source": "iana"
    },
    "application/set-payment": {
      "source": "iana"
    },
    "application/set-payment-initiation": {
      "source": "iana",
      "extensions": ["setpay"]
    },
    "application/set-registration": {
      "source": "iana"
    },
    "application/set-registration-initiation": {
      "source": "iana",
      "extensions": ["setreg"]
    },
    "application/sgml": {
      "source": "iana"
    },
    "application/sgml-open-catalog": {
      "source": "iana"
    },
    "application/shf+xml": {
      "source": "iana",
      "extensions": ["shf"]
    },
    "application/sieve": {
      "source": "iana"
    },
    "application/simple-filter+xml": {
      "source": "iana"
    },
    "application/simple-message-summary": {
      "source": "iana"
    },
    "application/simplesymbolcontainer": {
      "source": "iana"
    },
    "application/slate": {
      "source": "iana"
    },
    "application/smil": {
      "source": "iana"
    },
    "application/smil+xml": {
      "source": "iana",
      "extensions": ["smi","smil"]
    },
    "application/smpte336m": {
      "source": "iana"
    },
    "application/soap+fastinfoset": {
      "source": "iana"
    },
    "application/soap+xml": {
      "source": "iana",
      "compressible": true
    },
    "application/sparql-query": {
      "source": "iana",
      "extensions": ["rq"]
    },
    "application/sparql-results+xml": {
      "source": "iana",
      "extensions": ["srx"]
    },
    "application/spirits-event+xml": {
      "source": "iana"
    },
    "application/sql": {
      "source": "iana"
    },
    "application/srgs": {
      "source": "iana",
      "extensions": ["gram"]
    },
    "application/srgs+xml": {
      "source": "iana",
      "extensions": ["grxml"]
    },
    "application/sru+xml": {
      "source": "iana",
      "extensions": ["sru"]
    },
    "application/ssdl+xml": {
      "source": "apache",
      "extensions": ["ssdl"]
    },
    "application/ssml+xml": {
      "source": "iana",
      "extensions": ["ssml"]
    },
    "application/tamp-apex-update": {
      "source": "iana"
    },
    "application/tamp-apex-update-confirm": {
      "source": "iana"
    },
    "application/tamp-community-update": {
      "source": "iana"
    },
    "application/tamp-community-update-confirm": {
      "source": "iana"
    },
    "application/tamp-error": {
      "source": "iana"
    },
    "application/tamp-sequence-adjust": {
      "source": "iana"
    },
    "application/tamp-sequence-adjust-confirm": {
      "source": "iana"
    },
    "application/tamp-status-query": {
      "source": "iana"
    },
    "application/tamp-status-response": {
      "source": "iana"
    },
    "application/tamp-update": {
      "source": "iana"
    },
    "application/tamp-update-confirm": {
      "source": "iana"
    },
    "application/tar": {
      "compressible": true
    },
    "application/tei+xml": {
      "source": "iana",
      "extensions": ["tei","teicorpus"]
    },
    "application/thraud+xml": {
      "source": "iana",
      "extensions": ["tfi"]
    },
    "application/timestamp-query": {
      "source": "iana"
    },
    "application/timestamp-reply": {
      "source": "iana"
    },
    "application/timestamped-data": {
      "source": "iana",
      "extensions": ["tsd"]
    },
    "application/ttml+xml": {
      "source": "iana"
    },
    "application/tve-trigger": {
      "source": "iana"
    },
    "application/ulpfec": {
      "source": "iana"
    },
    "application/urc-grpsheet+xml": {
      "source": "iana"
    },
    "application/urc-ressheet+xml": {
      "source": "iana"
    },
    "application/urc-targetdesc+xml": {
      "source": "iana"
    },
    "application/urc-uisocketdesc+xml": {
      "source": "iana"
    },
    "application/vcard+json": {
      "source": "iana",
      "compressible": true
    },
    "application/vcard+xml": {
      "source": "iana"
    },
    "application/vemmi": {
      "source": "iana"
    },
    "application/vividence.scriptfile": {
      "source": "apache"
    },
    "application/vnd.3gpp.bsf+xml": {
      "source": "iana"
    },
    "application/vnd.3gpp.pic-bw-large": {
      "source": "iana",
      "extensions": ["plb"]
    },
    "application/vnd.3gpp.pic-bw-small": {
      "source": "iana",
      "extensions": ["psb"]
    },
    "application/vnd.3gpp.pic-bw-var": {
      "source": "iana",
      "extensions": ["pvb"]
    },
    "application/vnd.3gpp.sms": {
      "source": "iana"
    },
    "application/vnd.3gpp2.bcmcsinfo+xml": {
      "source": "iana"
    },
    "application/vnd.3gpp2.sms": {
      "source": "iana"
    },
    "application/vnd.3gpp2.tcap": {
      "source": "iana",
      "extensions": ["tcap"]
    },
    "application/vnd.3m.post-it-notes": {
      "source": "iana",
      "extensions": ["pwn"]
    },
    "application/vnd.accpac.simply.aso": {
      "source": "iana",
      "extensions": ["aso"]
    },
    "application/vnd.accpac.simply.imp": {
      "source": "iana",
      "extensions": ["imp"]
    },
    "application/vnd.acucobol": {
      "source": "iana",
      "extensions": ["acu"]
    },
    "application/vnd.acucorp": {
      "source": "iana",
      "extensions": ["atc","acutc"]
    },
    "application/vnd.adobe.air-application-installer-package+zip": {
      "source": "apache",
      "extensions": ["air"]
    },
    "application/vnd.adobe.flash.movie": {
      "source": "iana"
    },
    "application/vnd.adobe.formscentral.fcdt": {
      "source": "iana",
      "extensions": ["fcdt"]
    },
    "application/vnd.adobe.fxp": {
      "source": "iana",
      "extensions": ["fxp","fxpl"]
    },
    "application/vnd.adobe.partial-upload": {
      "source": "iana"
    },
    "application/vnd.adobe.xdp+xml": {
      "source": "iana",
      "extensions": ["xdp"]
    },
    "application/vnd.adobe.xfdf": {
      "source": "iana",
      "extensions": ["xfdf"]
    },
    "application/vnd.aether.imp": {
      "source": "iana"
    },
    "application/vnd.ah-barcode": {
      "source": "iana"
    },
    "application/vnd.ahead.space": {
      "source": "iana",
      "extensions": ["ahead"]
    },
    "application/vnd.airzip.filesecure.azf": {
      "source": "iana",
      "extensions": ["azf"]
    },
    "application/vnd.airzip.filesecure.azs": {
      "source": "iana",
      "extensions": ["azs"]
    },
    "application/vnd.amazon.ebook": {
      "source": "apache",
      "extensions": ["azw"]
    },
    "application/vnd.americandynamics.acc": {
      "source": "iana",
      "extensions": ["acc"]
    },
    "application/vnd.amiga.ami": {
      "source": "iana",
      "extensions": ["ami"]
    },
    "application/vnd.amundsen.maze+xml": {
      "source": "iana"
    },
    "application/vnd.android.package-archive": {
      "source": "apache",
      "compressible": false,
      "extensions": ["apk"]
    },
    "application/vnd.anser-web-certificate-issue-initiation": {
      "source": "iana",
      "extensions": ["cii"]
    },
    "application/vnd.anser-web-funds-transfer-initiation": {
      "source": "apache",
      "extensions": ["fti"]
    },
    "application/vnd.antix.game-component": {
      "source": "iana",
      "extensions": ["atx"]
    },
    "application/vnd.apache.thrift.binary": {
      "source": "iana"
    },
    "application/vnd.apache.thrift.compact": {
      "source": "iana"
    },
    "application/vnd.apache.thrift.json": {
      "source": "iana"
    },
    "application/vnd.api+json": {
      "source": "iana",
      "compressible": true
    },
    "application/vnd.apple.installer+xml": {
      "source": "iana",
      "extensions": ["mpkg"]
    },
    "application/vnd.apple.mpegurl": {
      "source": "iana",
      "extensions": ["m3u8"]
    },
    "application/vnd.arastra.swi": {
      "source": "iana"
    },
    "application/vnd.aristanetworks.swi": {
      "source": "iana",
      "extensions": ["swi"]
    },
    "application/vnd.artsquare": {
      "source": "iana"
    },
    "application/vnd.astraea-software.iota": {
      "source": "iana",
      "extensions": ["iota"]
    },
    "application/vnd.audiograph": {
      "source": "iana",
      "extensions": ["aep"]
    },
    "application/vnd.autopackage": {
      "source": "iana"
    },
    "application/vnd.avistar+xml": {
      "source": "iana"
    },
    "application/vnd.balsamiq.bmml+xml": {
      "source": "iana"
    },
    "application/vnd.balsamiq.bmpr": {
      "source": "iana"
    },
    "application/vnd.bekitzur-stech+json": {
      "source": "iana",
      "compressible": true
    },
    "application/vnd.blueice.multipass": {
      "source": "iana",
      "extensions": ["mpm"]
    },
    "application/vnd.bluetooth.ep.oob": {
      "source": "iana"
    },
    "application/vnd.bluetooth.le.oob": {
      "source": "iana"
    },
    "application/vnd.bmi": {
      "source": "iana",
      "extensions": ["bmi"]
    },
    "application/vnd.businessobjects": {
      "source": "iana",
      "extensions": ["rep"]
    },
    "application/vnd.cab-jscript": {
      "source": "iana"
    },
    "application/vnd.canon-cpdl": {
      "source": "iana"
    },
    "application/vnd.canon-lips": {
      "source": "iana"
    },
    "application/vnd.cendio.thinlinc.clientconf": {
      "source": "iana"
    },
    "application/vnd.century-systems.tcp_stream": {
      "source": "iana"
    },
    "application/vnd.chemdraw+xml": {
      "source": "iana",
      "extensions": ["cdxml"]
    },
    "application/vnd.chipnuts.karaoke-mmd": {
      "source": "iana",
      "extensions": ["mmd"]
    },
    "application/vnd.cinderella": {
      "source": "iana",
      "extensions": ["cdy"]
    },
    "application/vnd.cirpack.isdn-ext": {
      "source": "iana"
    },
    "application/vnd.citationstyles.style+xml": {
      "source": "iana"
    },
    "application/vnd.claymore": {
      "source": "iana",
      "extensions": ["cla"]
    },
    "application/vnd.cloanto.rp9": {
      "source": "iana",
      "extensions": ["rp9"]
    },
    "application/vnd.clonk.c4group": {
      "source": "iana",
      "extensions": ["c4g","c4d","c4f","c4p","c4u"]
    },
    "application/vnd.cluetrust.cartomobile-config": {
      "source": "iana",
      "extensions": ["c11amc"]
    },
    "application/vnd.cluetrust.cartomobile-config-pkg": {
      "source": "iana",
      "extensions": ["c11amz"]
    },
    "application/vnd.coffeescript": {
      "source": "iana"
    },
    "application/vnd.collection+json": {
      "source": "iana",
      "compressible": true
    },
    "application/vnd.collection.doc+json": {
      "source": "iana",
      "compressible": true
    },
    "application/vnd.collection.next+json": {
      "source": "iana",
      "compressible": true
    },
    "application/vnd.commerce-battelle": {
      "source": "iana"
    },
    "application/vnd.commonspace": {
      "source": "iana",
      "extensions": ["csp"]
    },
    "application/vnd.contact.cmsg": {
      "source": "iana",
      "extensions": ["cdbcmsg"]
    },
    "application/vnd.cosmocaller": {
      "source": "iana",
      "extensions": ["cmc"]
    },
    "application/vnd.crick.clicker": {
      "source": "iana",
      "extensions": ["clkx"]
    },
    "application/vnd.crick.clicker.keyboard": {
      "source": "iana",
      "extensions": ["clkk"]
    },
    "application/vnd.crick.clicker.palette": {
      "source": "iana",
      "extensions": ["clkp"]
    },
    "application/vnd.crick.clicker.template": {
      "source": "iana",
      "extensions": ["clkt"]
    },
    "application/vnd.crick.clicker.wordbank": {
      "source": "iana",
      "extensions": ["clkw"]
    },
    "application/vnd.criticaltools.wbs+xml": {
      "source": "iana",
      "extensions": ["wbs"]
    },
    "application/vnd.ctc-posml": {
      "source": "iana",
      "extensions": ["pml"]
    },
    "application/vnd.ctct.ws+xml": {
      "source": "iana"
    },
    "application/vnd.cups-pdf": {
      "source": "iana"
    },
    "application/vnd.cups-postscript": {
      "source": "iana"
    },
    "application/vnd.cups-ppd": {
      "source": "iana",
      "extensions": ["ppd"]
    },
    "application/vnd.cups-raster": {
      "source": "iana"
    },
    "application/vnd.cups-raw": {
      "source": "iana"
    },
    "application/vnd.curl": {
      "source": "iana"
    },
    "application/vnd.curl.car": {
      "source": "apache",
      "extensions": ["car"]
    },
    "application/vnd.curl.pcurl": {
      "source": "apache",
      "extensions": ["pcurl"]
    },
    "application/vnd.cyan.dean.root+xml": {
      "source": "iana"
    },
    "application/vnd.cybank": {
      "source": "iana"
    },
    "application/vnd.dart": {
      "source": "iana",
      "compressible": true,
      "extensions": ["dart"]
    },
    "application/vnd.data-vision.rdz": {
      "source": "iana",
      "extensions": ["rdz"]
    },
    "application/vnd.debian.binary-package": {
      "source": "iana"
    },
    "application/vnd.dece.data": {
      "source": "iana",
      "extensions": ["uvf","uvvf","uvd","uvvd"]
    },
    "application/vnd.dece.ttml+xml": {
      "source": "iana",
      "extensions": ["uvt","uvvt"]
    },
    "application/vnd.dece.unspecified": {
      "source": "iana",
      "extensions": ["uvx","uvvx"]
    },
    "application/vnd.dece.zip": {
      "source": "iana",
      "extensions": ["uvz","uvvz"]
    },
    "application/vnd.denovo.fcselayout-link": {
      "source": "iana",
      "extensions": ["fe_launch"]
    },
    "application/vnd.desmume-movie": {
      "source": "iana"
    },
    "application/vnd.dir-bi.plate-dl-nosuffix": {
      "source": "iana"
    },
    "application/vnd.dm.delegation+xml": {
      "source": "iana"
    },
    "application/vnd.dna": {
      "source": "iana",
      "extensions": ["dna"]
    },
    "application/vnd.document+json": {
      "source": "iana",
      "compressible": true
    },
    "application/vnd.dolby.mlp": {
      "source": "apache",
      "extensions": ["mlp"]
    },
    "application/vnd.dolby.mobile.1": {
      "source": "iana"
    },
    "application/vnd.dolby.mobile.2": {
      "source": "iana"
    },
    "application/vnd.doremir.scorecloud-binary-document": {
      "source": "iana"
    },
    "application/vnd.dpgraph": {
      "source": "iana",
      "extensions": ["dpg"]
    },
    "application/vnd.dreamfactory": {
      "source": "iana",
      "extensions": ["dfac"]
    },
    "application/vnd.ds-keypoint": {
      "source": "apache",
      "extensions": ["kpxx"]
    },
    "application/vnd.dtg.local": {
      "source": "iana"
    },
    "application/vnd.dtg.local.flash": {
      "source": "iana"
    },
    "application/vnd.dtg.local.html": {
      "source": "iana"
    },
    "application/vnd.dvb.ait": {
      "source": "iana",
      "extensions": ["ait"]
    },
    "application/vnd.dvb.dvbj": {
      "source": "iana"
    },
    "application/vnd.dvb.esgcontainer": {
      "source": "iana"
    },
    "application/vnd.dvb.ipdcdftnotifaccess": {
      "source": "iana"
    },
    "application/vnd.dvb.ipdcesgaccess": {
      "source": "iana"
    },
    "application/vnd.dvb.ipdcesgaccess2": {
      "source": "iana"
    },
    "application/vnd.dvb.ipdcesgpdd": {
      "source": "iana"
    },
    "application/vnd.dvb.ipdcroaming": {
      "source": "iana"
    },
    "application/vnd.dvb.iptv.alfec-base": {
      "source": "iana"
    },
    "application/vnd.dvb.iptv.alfec-enhancement": {
      "source": "iana"
    },
    "application/vnd.dvb.notif-aggregate-root+xml": {
      "source": "iana"
    },
    "application/vnd.dvb.notif-container+xml": {
      "source": "iana"
    },
    "application/vnd.dvb.notif-generic+xml": {
      "source": "iana"
    },
    "application/vnd.dvb.notif-ia-msglist+xml": {
      "source": "iana"
    },
    "application/vnd.dvb.notif-ia-registration-request+xml": {
      "source": "iana"
    },
    "application/vnd.dvb.notif-ia-registration-response+xml": {
      "source": "iana"
    },
    "application/vnd.dvb.notif-init+xml": {
      "source": "iana"
    },
    "application/vnd.dvb.pfr": {
      "source": "iana"
    },
    "application/vnd.dvb.service": {
      "source": "iana",
      "extensions": ["svc"]
    },
    "application/vnd.dxr": {
      "source": "iana"
    },
    "application/vnd.dynageo": {
      "source": "iana",
      "extensions": ["geo"]
    },
    "application/vnd.dzr": {
      "source": "iana"
    },
    "application/vnd.easykaraoke.cdgdownload": {
      "source": "iana"
    },
    "application/vnd.ecdis-update": {
      "source": "iana"
    },
    "application/vnd.ecowin.chart": {
      "source": "iana",
      "extensions": ["mag"]
    },
    "application/vnd.ecowin.filerequest": {
      "source": "iana"
    },
    "application/vnd.ecowin.fileupdate": {
      "source": "iana"
    },
    "application/vnd.ecowin.series": {
      "source": "iana"
    },
    "application/vnd.ecowin.seriesrequest": {
      "source": "iana"
    },
    "application/vnd.ecowin.seriesupdate": {
      "source": "iana"
    },
    "application/vnd.emclient.accessrequest+xml": {
      "source": "iana"
    },
    "application/vnd.enliven": {
      "source": "iana",
      "extensions": ["nml"]
    },
    "application/vnd.enphase.envoy": {
      "source": "iana"
    },
    "application/vnd.eprints.data+xml": {
      "source": "iana"
    },
    "application/vnd.epson.esf": {
      "source": "iana",
      "extensions": ["esf"]
    },
    "application/vnd.epson.msf": {
      "source": "iana",
      "extensions": ["msf"]
    },
    "application/vnd.epson.quickanime": {
      "source": "iana",
      "extensions": ["qam"]
    },
    "application/vnd.epson.salt": {
      "source": "iana",
      "extensions": ["slt"]
    },
    "application/vnd.epson.ssf": {
      "source": "iana",
      "extensions": ["ssf"]
    },
    "application/vnd.ericsson.quickcall": {
      "source": "iana"
    },
    "application/vnd.eszigno3+xml": {
      "source": "iana",
      "extensions": ["es3","et3"]
    },
    "application/vnd.etsi.aoc+xml": {
      "source": "iana"
    },
    "application/vnd.etsi.asic-e+zip": {
      "source": "iana"
    },
    "application/vnd.etsi.asic-s+zip": {
      "source": "iana"
    },
    "application/vnd.etsi.cug+xml": {
      "source": "iana"
    },
    "application/vnd.etsi.iptvcommand+xml": {
      "source": "iana"
    },
    "application/vnd.etsi.iptvdiscovery+xml": {
      "source": "iana"
    },
    "application/vnd.etsi.iptvprofile+xml": {
      "source": "iana"
    },
    "application/vnd.etsi.iptvsad-bc+xml": {
      "source": "iana"
    },
    "application/vnd.etsi.iptvsad-cod+xml": {
      "source": "iana"
    },
    "application/vnd.etsi.iptvsad-npvr+xml": {
      "source": "iana"
    },
    "application/vnd.etsi.iptvservice+xml": {
      "source": "iana"
    },
    "application/vnd.etsi.iptvsync+xml": {
      "source": "iana"
    },
    "application/vnd.etsi.iptvueprofile+xml": {
      "source": "iana"
    },
    "application/vnd.etsi.mcid+xml": {
      "source": "iana"
    },
    "application/vnd.etsi.mheg5": {
      "source": "iana"
    },
    "application/vnd.etsi.overload-control-policy-dataset+xml": {
      "source": "iana"
    },
    "application/vnd.etsi.pstn+xml": {
      "source": "iana"
    },
    "application/vnd.etsi.sci+xml": {
      "source": "iana"
    },
    "application/vnd.etsi.simservs+xml": {
      "source": "iana"
    },
    "application/vnd.etsi.timestamp-token": {
      "source": "iana"
    },
    "application/vnd.etsi.tsl+xml": {
      "source": "iana"
    },
    "application/vnd.etsi.tsl.der": {
      "source": "iana"
    },
    "application/vnd.eudora.data": {
      "source": "iana"
    },
    "application/vnd.ezpix-album": {
      "source": "iana",
      "extensions": ["ez2"]
    },
    "application/vnd.ezpix-package": {
      "source": "iana",
      "extensions": ["ez3"]
    },
    "application/vnd.f-secure.mobile": {
      "source": "iana"
    },
    "application/vnd.fastcopy-disk-image": {
      "source": "iana"
    },
    "application/vnd.fdf": {
      "source": "iana",
      "extensions": ["fdf"]
    },
    "application/vnd.fdsn.mseed": {
      "source": "iana",
      "extensions": ["mseed"]
    },
    "application/vnd.fdsn.seed": {
      "source": "iana",
      "extensions": ["seed","dataless"]
    },
    "application/vnd.ffsns": {
      "source": "iana"
    },
    "application/vnd.fints": {
      "source": "iana"
    },
    "application/vnd.flographit": {
      "source": "iana",
      "extensions": ["gph"]
    },
    "application/vnd.fluxtime.clip": {
      "source": "iana",
      "extensions": ["ftc"]
    },
    "application/vnd.font-fontforge-sfd": {
      "source": "iana"
    },
    "application/vnd.framemaker": {
      "source": "iana",
      "extensions": ["fm","frame","maker","book"]
    },
    "application/vnd.frogans.fnc": {
      "source": "iana",
      "extensions": ["fnc"]
    },
    "application/vnd.frogans.ltf": {
      "source": "iana",
      "extensions": ["ltf"]
    },
    "application/vnd.fsc.weblaunch": {
      "source": "iana",
      "extensions": ["fsc"]
    },
    "application/vnd.fujitsu.oasys": {
      "source": "iana",
      "extensions": ["oas"]
    },
    "application/vnd.fujitsu.oasys2": {
      "source": "iana",
      "extensions": ["oa2"]
    },
    "application/vnd.fujitsu.oasys3": {
      "source": "iana",
      "extensions": ["oa3"]
    },
    "application/vnd.fujitsu.oasysgp": {
      "source": "iana",
      "extensions": ["fg5"]
    },
    "application/vnd.fujitsu.oasysprs": {
      "source": "iana",
      "extensions": ["bh2"]
    },
    "application/vnd.fujixerox.art-ex": {
      "source": "iana"
    },
    "application/vnd.fujixerox.art4": {
      "source": "iana"
    },
    "application/vnd.fujixerox.ddd": {
      "source": "iana",
      "extensions": ["ddd"]
    },
    "application/vnd.fujixerox.docuworks": {
      "source": "iana",
      "extensions": ["xdw"]
    },
    "application/vnd.fujixerox.docuworks.binder": {
      "source": "iana",
      "extensions": ["xbd"]
    },
    "application/vnd.fujixerox.docuworks.container": {
      "source": "iana"
    },
    "application/vnd.fujixerox.hbpl": {
      "source": "iana"
    },
    "application/vnd.fut-misnet": {
      "source": "iana"
    },
    "application/vnd.fuzzysheet": {
      "source": "iana",
      "extensions": ["fzs"]
    },
    "application/vnd.genomatix.tuxedo": {
      "source": "iana",
      "extensions": ["txd"]
    },
    "application/vnd.geo+json": {
      "source": "iana",
      "compressible": true
    },
    "application/vnd.geocube+xml": {
      "source": "iana"
    },
    "application/vnd.geogebra.file": {
      "source": "iana",
      "extensions": ["ggb"]
    },
    "application/vnd.geogebra.tool": {
      "source": "iana",
      "extensions": ["ggt"]
    },
    "application/vnd.geometry-explorer": {
      "source": "iana",
      "extensions": ["gex","gre"]
    },
    "application/vnd.geonext": {
      "source": "iana",
      "extensions": ["gxt"]
    },
    "application/vnd.geoplan": {
      "source": "iana",
      "extensions": ["g2w"]
    },
    "application/vnd.geospace": {
      "source": "iana",
      "extensions": ["g3w"]
    },
    "application/vnd.gerber": {
      "source": "iana"
    },
    "application/vnd.globalplatform.card-content-mgt": {
      "source": "iana"
    },
    "application/vnd.globalplatform.card-content-mgt-response": {
      "source": "iana"
    },
    "application/vnd.gmx": {
      "source": "iana",
      "extensions": ["gmx"]
    },
    "application/vnd.google-earth.kml+xml": {
      "source": "iana",
      "compressible": true,
      "extensions": ["kml"]
    },
    "application/vnd.google-earth.kmz": {
      "source": "iana",
      "compressible": false,
      "extensions": ["kmz"]
    },
    "application/vnd.gov.sk.e-form+xml": {
      "source": "iana"
    },
    "application/vnd.gov.sk.e-form+zip": {
      "source": "iana"
    },
    "application/vnd.gov.sk.xmldatacontainer+xml": {
      "source": "iana"
    },
    "application/vnd.grafeq": {
      "source": "iana",
      "extensions": ["gqf","gqs"]
    },
    "application/vnd.gridmp": {
      "source": "iana"
    },
    "application/vnd.groove-account": {
      "source": "iana",
      "extensions": ["gac"]
    },
    "application/vnd.groove-help": {
      "source": "iana",
      "extensions": ["ghf"]
    },
    "application/vnd.groove-identity-message": {
      "source": "iana",
      "extensions": ["gim"]
    },
    "application/vnd.groove-injector": {
      "source": "iana",
      "extensions": ["grv"]
    },
    "application/vnd.groove-tool-message": {
      "source": "iana",
      "extensions": ["gtm"]
    },
    "application/vnd.groove-tool-template": {
      "source": "iana",
      "extensions": ["tpl"]
    },
    "application/vnd.groove-vcard": {
      "source": "iana",
      "extensions": ["vcg"]
    },
    "application/vnd.hal+json": {
      "source": "iana",
      "compressible": true
    },
    "application/vnd.hal+xml": {
      "source": "iana",
      "extensions": ["hal"]
    },
    "application/vnd.handheld-entertainment+xml": {
      "source": "iana",
      "extensions": ["zmm"]
    },
    "application/vnd.hbci": {
      "source": "iana",
      "extensions": ["hbci"]
    },
    "application/vnd.hcl-bireports": {
      "source": "iana"
    },
    "application/vnd.heroku+json": {
      "source": "iana",
      "compressible": true
    },
    "application/vnd.hhe.lesson-player": {
      "source": "iana",
      "extensions": ["les"]
    },
    "application/vnd.hp-hpgl": {
      "source": "iana",
      "extensions": ["hpgl"]
    },
    "application/vnd.hp-hpid": {
      "source": "iana",
      "extensions": ["hpid"]
    },
    "application/vnd.hp-hps": {
      "source": "iana",
      "extensions": ["hps"]
    },
    "application/vnd.hp-jlyt": {
      "source": "iana",
      "extensions": ["jlt"]
    },
    "application/vnd.hp-pcl": {
      "source": "iana",
      "extensions": ["pcl"]
    },
    "application/vnd.hp-pclxl": {
      "source": "iana",
      "extensions": ["pclxl"]
    },
    "application/vnd.httphone": {
      "source": "iana"
    },
    "application/vnd.hydrostatix.sof-data": {
      "source": "iana",
      "extensions": ["sfd-hdstx"]
    },
    "application/vnd.hyperdrive+json": {
      "source": "iana",
      "compressible": true
    },
    "application/vnd.hzn-3d-crossword": {
      "source": "iana"
    },
    "application/vnd.ibm.afplinedata": {
      "source": "iana"
    },
    "application/vnd.ibm.electronic-media": {
      "source": "iana"
    },
    "application/vnd.ibm.minipay": {
      "source": "iana",
      "extensions": ["mpy"]
    },
    "application/vnd.ibm.modcap": {
      "source": "iana",
      "extensions": ["afp","listafp","list3820"]
    },
    "application/vnd.ibm.rights-management": {
      "source": "iana",
      "extensions": ["irm"]
    },
    "application/vnd.ibm.secure-container": {
      "source": "iana",
      "extensions": ["sc"]
    },
    "application/vnd.iccprofile": {
      "source": "iana",
      "extensions": ["icc","icm"]
    },
    "application/vnd.ieee.1905": {
      "source": "iana"
    },
    "application/vnd.igloader": {
      "source": "iana",
      "extensions": ["igl"]
    },
    "application/vnd.immervision-ivp": {
      "source": "iana",
      "extensions": ["ivp"]
    },
    "application/vnd.immervision-ivu": {
      "source": "iana",
      "extensions": ["ivu"]
    },
    "application/vnd.ims.imsccv1p1": {
      "source": "iana"
    },
    "application/vnd.ims.imsccv1p2": {
      "source": "iana"
    },
    "application/vnd.ims.imsccv1p3": {
      "source": "iana"
    },
    "application/vnd.ims.lis.v2.result+json": {
      "source": "iana",
      "compressible": true
    },
    "application/vnd.ims.lti.v2.toolconsumerprofile+json": {
      "source": "iana",
      "compressible": true
    },
    "application/vnd.ims.lti.v2.toolproxy+json": {
      "source": "iana",
      "compressible": true
    },
    "application/vnd.ims.lti.v2.toolproxy.id+json": {
      "source": "iana",
      "compressible": true
    },
    "application/vnd.ims.lti.v2.toolsettings+json": {
      "source": "iana",
      "compressible": true
    },
    "application/vnd.ims.lti.v2.toolsettings.simple+json": {
      "source": "iana",
      "compressible": true
    },
    "application/vnd.informedcontrol.rms+xml": {
      "source": "iana"
    },
    "application/vnd.informix-visionary": {
      "source": "iana"
    },
    "application/vnd.infotech.project": {
      "source": "iana"
    },
    "application/vnd.infotech.project+xml": {
      "source": "iana"
    },
    "application/vnd.innopath.wamp.notification": {
      "source": "iana"
    },
    "application/vnd.insors.igm": {
      "source": "iana",
      "extensions": ["igm"]
    },
    "application/vnd.intercon.formnet": {
      "source": "iana",
      "extensions": ["xpw","xpx"]
    },
    "application/vnd.intergeo": {
      "source": "iana",
      "extensions": ["i2g"]
    },
    "application/vnd.intertrust.digibox": {
      "source": "iana"
    },
    "application/vnd.intertrust.nncp": {
      "source": "iana"
    },
    "application/vnd.intu.qbo": {
      "source": "iana",
      "extensions": ["qbo"]
    },
    "application/vnd.intu.qfx": {
      "source": "iana",
      "extensions": ["qfx"]
    },
    "application/vnd.iptc.g2.catalogitem+xml": {
      "source": "iana"
    },
    "application/vnd.iptc.g2.conceptitem+xml": {
      "source": "iana"
    },
    "application/vnd.iptc.g2.knowledgeitem+xml": {
      "source": "iana"
    },
    "application/vnd.iptc.g2.newsitem+xml": {
      "source": "iana"
    },
    "application/vnd.iptc.g2.newsmessage+xml": {
      "source": "iana"
    },
    "application/vnd.iptc.g2.packageitem+xml": {
      "source": "iana"
    },
    "application/vnd.iptc.g2.planningitem+xml": {
      "source": "iana"
    },
    "application/vnd.ipunplugged.rcprofile": {
      "source": "iana",
      "extensions": ["rcprofile"]
    },
    "application/vnd.irepository.package+xml": {
      "source": "iana",
      "extensions": ["irp"]
    },
    "application/vnd.is-xpr": {
      "source": "iana",
      "extensions": ["xpr"]
    },
    "application/vnd.isac.fcs": {
      "source": "iana",
      "extensions": ["fcs"]
    },
    "application/vnd.jam": {
      "source": "iana",
      "extensions": ["jam"]
    },
    "application/vnd.japannet-directory-service": {
      "source": "iana"
    },
    "application/vnd.japannet-jpnstore-wakeup": {
      "source": "iana"
    },
    "application/vnd.japannet-payment-wakeup": {
      "source": "iana"
    },
    "application/vnd.japannet-registration": {
      "source": "iana"
    },
    "application/vnd.japannet-registration-wakeup": {
      "source": "iana"
    },
    "application/vnd.japannet-setstore-wakeup": {
      "source": "iana"
    },
    "application/vnd.japannet-verification": {
      "source": "iana"
    },
    "application/vnd.japannet-verification-wakeup": {
      "source": "iana"
    },
    "application/vnd.jcp.javame.midlet-rms": {
      "source": "iana",
      "extensions": ["rms"]
    },
    "application/vnd.jisp": {
      "source": "iana",
      "extensions": ["jisp"]
    },
    "application/vnd.joost.joda-archive": {
      "source": "iana",
      "extensions": ["joda"]
    },
    "application/vnd.jsk.isdn-ngn": {
      "source": "iana"
    },
    "application/vnd.kahootz": {
      "source": "iana",
      "extensions": ["ktz","ktr"]
    },
    "application/vnd.kde.karbon": {
      "source": "iana",
      "extensions": ["karbon"]
    },
    "application/vnd.kde.kchart": {
      "source": "iana",
      "extensions": ["chrt"]
    },
    "application/vnd.kde.kformula": {
      "source": "iana",
      "extensions": ["kfo"]
    },
    "application/vnd.kde.kivio": {
      "source": "iana",
      "extensions": ["flw"]
    },
    "application/vnd.kde.kontour": {
      "source": "iana",
      "extensions": ["kon"]
    },
    "application/vnd.kde.kpresenter": {
      "source": "iana",
      "extensions": ["kpr","kpt"]
    },
    "application/vnd.kde.kspread": {
      "source": "iana",
      "extensions": ["ksp"]
    },
    "application/vnd.kde.kword": {
      "source": "iana",
      "extensions": ["kwd","kwt"]
    },
    "application/vnd.kenameaapp": {
      "source": "iana",
      "extensions": ["htke"]
    },
    "application/vnd.kidspiration": {
      "source": "iana",
      "extensions": ["kia"]
    },
    "application/vnd.kinar": {
      "source": "iana",
      "extensions": ["kne","knp"]
    },
    "application/vnd.koan": {
      "source": "iana",
      "extensions": ["skp","skd","skt","skm"]
    },
    "application/vnd.kodak-descriptor": {
      "source": "iana",
      "extensions": ["sse"]
    },
    "application/vnd.las.las+xml": {
      "source": "iana",
      "extensions": ["lasxml"]
    },
    "application/vnd.liberty-request+xml": {
      "source": "iana"
    },
    "application/vnd.llamagraphics.life-balance.desktop": {
      "source": "iana",
      "extensions": ["lbd"]
    },
    "application/vnd.llamagraphics.life-balance.exchange+xml": {
      "source": "iana",
      "extensions": ["lbe"]
    },
    "application/vnd.lotus-1-2-3": {
      "source": "iana",
      "extensions": ["123"]
    },
    "application/vnd.lotus-approach": {
      "source": "iana",
      "extensions": ["apr"]
    },
    "application/vnd.lotus-freelance": {
      "source": "iana",
      "extensions": ["pre"]
    },
    "application/vnd.lotus-notes": {
      "source": "iana",
      "extensions": ["nsf"]
    },
    "application/vnd.lotus-organizer": {
      "source": "iana",
      "extensions": ["org"]
    },
    "application/vnd.lotus-screencam": {
      "source": "iana",
      "extensions": ["scm"]
    },
    "application/vnd.lotus-wordpro": {
      "source": "iana",
      "extensions": ["lwp"]
    },
    "application/vnd.macports.portpkg": {
      "source": "iana",
      "extensions": ["portpkg"]
    },
    "application/vnd.marlin.drm.actiontoken+xml": {
      "source": "iana"
    },
    "application/vnd.marlin.drm.conftoken+xml": {
      "source": "iana"
    },
    "application/vnd.marlin.drm.license+xml": {
      "source": "iana"
    },
    "application/vnd.marlin.drm.mdcf": {
      "source": "iana"
    },
    "application/vnd.mason+json": {
      "source": "iana",
      "compressible": true
    },
    "application/vnd.maxmind.maxmind-db": {
      "source": "iana"
    },
    "application/vnd.mcd": {
      "source": "iana",
      "extensions": ["mcd"]
    },
    "application/vnd.medcalcdata": {
      "source": "iana",
      "extensions": ["mc1"]
    },
    "application/vnd.mediastation.cdkey": {
      "source": "iana",
      "extensions": ["cdkey"]
    },
    "application/vnd.meridian-slingshot": {
      "source": "iana"
    },
    "application/vnd.mfer": {
      "source": "iana",
      "extensions": ["mwf"]
    },
    "application/vnd.mfmp": {
      "source": "iana",
      "extensions": ["mfm"]
    },
    "application/vnd.micro+json": {
      "source": "iana",
      "compressible": true
    },
    "application/vnd.micrografx.flo": {
      "source": "iana",
      "extensions": ["flo"]
    },
    "application/vnd.micrografx.igx": {
      "source": "iana",
      "extensions": ["igx"]
    },
    "application/vnd.microsoft.portable-executable": {
      "source": "iana"
    },
    "application/vnd.miele+json": {
      "source": "iana",
      "compressible": true
    },
    "application/vnd.mif": {
      "source": "iana",
      "extensions": ["mif"]
    },
    "application/vnd.minisoft-hp3000-save": {
      "source": "iana"
    },
    "application/vnd.mitsubishi.misty-guard.trustweb": {
      "source": "iana"
    },
    "application/vnd.mobius.daf": {
      "source": "iana",
      "extensions": ["daf"]
    },
    "application/vnd.mobius.dis": {
      "source": "iana",
      "extensions": ["dis"]
    },
    "application/vnd.mobius.mbk": {
      "source": "iana",
      "extensions": ["mbk"]
    },
    "application/vnd.mobius.mqy": {
      "source": "iana",
      "extensions": ["mqy"]
    },
    "application/vnd.mobius.msl": {
      "source": "iana",
      "extensions": ["msl"]
    },
    "application/vnd.mobius.plc": {
      "source": "iana",
      "extensions": ["plc"]
    },
    "application/vnd.mobius.txf": {
      "source": "iana",
      "extensions": ["txf"]
    },
    "application/vnd.mophun.application": {
      "source": "iana",
      "extensions": ["mpn"]
    },
    "application/vnd.mophun.certificate": {
      "source": "iana",
      "extensions": ["mpc"]
    },
    "application/vnd.motorola.flexsuite": {
      "source": "iana"
    },
    "application/vnd.motorola.flexsuite.adsi": {
      "source": "iana"
    },
    "application/vnd.motorola.flexsuite.fis": {
      "source": "iana"
    },
    "application/vnd.motorola.flexsuite.gotap": {
      "source": "iana"
    },
    "application/vnd.motorola.flexsuite.kmr": {
      "source": "iana"
    },
    "application/vnd.motorola.flexsuite.ttc": {
      "source": "iana"
    },
    "application/vnd.motorola.flexsuite.wem": {
      "source": "iana"
    },
    "application/vnd.motorola.iprm": {
      "source": "iana"
    },
    "application/vnd.mozilla.xul+xml": {
      "source": "iana",
      "compressible": true,
      "extensions": ["xul"]
    },
    "application/vnd.ms-3mfdocument": {
      "source": "iana"
    },
    "application/vnd.ms-artgalry": {
      "source": "iana",
      "extensions": ["cil"]
    },
    "application/vnd.ms-asf": {
      "source": "iana"
    },
    "application/vnd.ms-cab-compressed": {
      "source": "iana",
      "extensions": ["cab"]
    },
    "application/vnd.ms-color.iccprofile": {
      "source": "apache"
    },
    "application/vnd.ms-excel": {
      "source": "iana",
      "compressible": false,
      "extensions": ["xls","xlm","xla","xlc","xlt","xlw"]
    },
    "application/vnd.ms-excel.addin.macroenabled.12": {
      "source": "iana",
      "extensions": ["xlam"]
    },
    "application/vnd.ms-excel.sheet.binary.macroenabled.12": {
      "source": "iana",
      "extensions": ["xlsb"]
    },
    "application/vnd.ms-excel.sheet.macroenabled.12": {
      "source": "iana",
      "extensions": ["xlsm"]
    },
    "application/vnd.ms-excel.template.macroenabled.12": {
      "source": "iana",
      "extensions": ["xltm"]
    },
    "application/vnd.ms-fontobject": {
      "source": "iana",
      "compressible": true,
      "extensions": ["eot"]
    },
    "application/vnd.ms-htmlhelp": {
      "source": "iana",
      "extensions": ["chm"]
    },
    "application/vnd.ms-ims": {
      "source": "iana",
      "extensions": ["ims"]
    },
    "application/vnd.ms-lrm": {
      "source": "iana",
      "extensions": ["lrm"]
    },
    "application/vnd.ms-office.activex+xml": {
      "source": "iana"
    },
    "application/vnd.ms-officetheme": {
      "source": "iana",
      "extensions": ["thmx"]
    },
    "application/vnd.ms-opentype": {
      "source": "apache",
      "compressible": true
    },
    "application/vnd.ms-package.obfuscated-opentype": {
      "source": "apache"
    },
    "application/vnd.ms-pki.seccat": {
      "source": "apache",
      "extensions": ["cat"]
    },
    "application/vnd.ms-pki.stl": {
      "source": "apache",
      "extensions": ["stl"]
    },
    "application/vnd.ms-playready.initiator+xml": {
      "source": "iana"
    },
    "application/vnd.ms-powerpoint": {
      "source": "iana",
      "compressible": false,
      "extensions": ["ppt","pps","pot"]
    },
    "application/vnd.ms-powerpoint.addin.macroenabled.12": {
      "source": "iana",
      "extensions": ["ppam"]
    },
    "application/vnd.ms-powerpoint.presentation.macroenabled.12": {
      "source": "iana",
      "extensions": ["pptm"]
    },
    "application/vnd.ms-powerpoint.slide.macroenabled.12": {
      "source": "iana",
      "extensions": ["sldm"]
    },
    "application/vnd.ms-powerpoint.slideshow.macroenabled.12": {
      "source": "iana",
      "extensions": ["ppsm"]
    },
    "application/vnd.ms-powerpoint.template.macroenabled.12": {
      "source": "iana",
      "extensions": ["potm"]
    },
    "application/vnd.ms-printing.printticket+xml": {
      "source": "apache"
    },
    "application/vnd.ms-project": {
      "source": "iana",
      "extensions": ["mpp","mpt"]
    },
    "application/vnd.ms-tnef": {
      "source": "iana"
    },
    "application/vnd.ms-windows.printerpairing": {
      "source": "iana"
    },
    "application/vnd.ms-wmdrm.lic-chlg-req": {
      "source": "iana"
    },
    "application/vnd.ms-wmdrm.lic-resp": {
      "source": "iana"
    },
    "application/vnd.ms-wmdrm.meter-chlg-req": {
      "source": "iana"
    },
    "application/vnd.ms-wmdrm.meter-resp": {
      "source": "iana"
    },
    "application/vnd.ms-word.document.macroenabled.12": {
      "source": "iana",
      "extensions": ["docm"]
    },
    "application/vnd.ms-word.template.macroenabled.12": {
      "source": "iana",
      "extensions": ["dotm"]
    },
    "application/vnd.ms-works": {
      "source": "iana",
      "extensions": ["wps","wks","wcm","wdb"]
    },
    "application/vnd.ms-wpl": {
      "source": "iana",
      "extensions": ["wpl"]
    },
    "application/vnd.ms-xpsdocument": {
      "source": "iana",
      "compressible": false,
      "extensions": ["xps"]
    },
    "application/vnd.msa-disk-image": {
      "source": "iana"
    },
    "application/vnd.mseq": {
      "source": "iana",
      "extensions": ["mseq"]
    },
    "application/vnd.msign": {
      "source": "iana"
    },
    "application/vnd.multiad.creator": {
      "source": "iana"
    },
    "application/vnd.multiad.creator.cif": {
      "source": "iana"
    },
    "application/vnd.music-niff": {
      "source": "iana"
    },
    "application/vnd.musician": {
      "source": "iana",
      "extensions": ["mus"]
    },
    "application/vnd.muvee.style": {
      "source": "iana",
      "extensions": ["msty"]
    },
    "application/vnd.mynfc": {
      "source": "iana",
      "extensions": ["taglet"]
    },
    "application/vnd.ncd.control": {
      "source": "iana"
    },
    "application/vnd.ncd.reference": {
      "source": "iana"
    },
    "application/vnd.nervana": {
      "source": "iana"
    },
    "application/vnd.netfpx": {
      "source": "iana"
    },
    "application/vnd.neurolanguage.nlu": {
      "source": "iana",
      "extensions": ["nlu"]
    },
    "application/vnd.nintendo.nitro.rom": {
      "source": "iana"
    },
    "application/vnd.nintendo.snes.rom": {
      "source": "iana"
    },
    "application/vnd.nitf": {
      "source": "iana",
      "extensions": ["ntf","nitf"]
    },
    "application/vnd.noblenet-directory": {
      "source": "iana",
      "extensions": ["nnd"]
    },
    "application/vnd.noblenet-sealer": {
      "source": "iana",
      "extensions": ["nns"]
    },
    "application/vnd.noblenet-web": {
      "source": "iana",
      "extensions": ["nnw"]
    },
    "application/vnd.nokia.catalogs": {
      "source": "iana"
    },
    "application/vnd.nokia.conml+wbxml": {
      "source": "iana"
    },
    "application/vnd.nokia.conml+xml": {
      "source": "iana"
    },
    "application/vnd.nokia.iptv.config+xml": {
      "source": "iana"
    },
    "application/vnd.nokia.isds-radio-presets": {
      "source": "iana"
    },
    "application/vnd.nokia.landmark+wbxml": {
      "source": "iana"
    },
    "application/vnd.nokia.landmark+xml": {
      "source": "iana"
    },
    "application/vnd.nokia.landmarkcollection+xml": {
      "source": "iana"
    },
    "application/vnd.nokia.n-gage.ac+xml": {
      "source": "iana"
    },
    "application/vnd.nokia.n-gage.data": {
      "source": "iana",
      "extensions": ["ngdat"]
    },
    "application/vnd.nokia.n-gage.symbian.install": {
      "source": "iana",
      "extensions": ["n-gage"]
    },
    "application/vnd.nokia.ncd": {
      "source": "iana"
    },
    "application/vnd.nokia.pcd+wbxml": {
      "source": "iana"
    },
    "application/vnd.nokia.pcd+xml": {
      "source": "iana"
    },
    "application/vnd.nokia.radio-preset": {
      "source": "iana",
      "extensions": ["rpst"]
    },
    "application/vnd.nokia.radio-presets": {
      "source": "iana",
      "extensions": ["rpss"]
    },
    "application/vnd.novadigm.edm": {
      "source": "iana",
      "extensions": ["edm"]
    },
    "application/vnd.novadigm.edx": {
      "source": "iana",
      "extensions": ["edx"]
    },
    "application/vnd.novadigm.ext": {
      "source": "iana",
      "extensions": ["ext"]
    },
    "application/vnd.ntt-local.content-share": {
      "source": "iana"
    },
    "application/vnd.ntt-local.file-transfer": {
      "source": "iana"
    },
    "application/vnd.ntt-local.ogw_remote-access": {
      "source": "iana"
    },
    "application/vnd.ntt-local.sip-ta_remote": {
      "source": "iana"
    },
    "application/vnd.ntt-local.sip-ta_tcp_stream": {
      "source": "iana"
    },
    "application/vnd.oasis.opendocument.chart": {
      "source": "iana",
      "extensions": ["odc"]
    },
    "application/vnd.oasis.opendocument.chart-template": {
      "source": "iana",
      "extensions": ["otc"]
    },
    "application/vnd.oasis.opendocument.database": {
      "source": "iana",
      "extensions": ["odb"]
    },
    "application/vnd.oasis.opendocument.formula": {
      "source": "iana",
      "extensions": ["odf"]
    },
    "application/vnd.oasis.opendocument.formula-template": {
      "source": "iana",
      "extensions": ["odft"]
    },
    "application/vnd.oasis.opendocument.graphics": {
      "source": "iana",
      "compressible": false,
      "extensions": ["odg"]
    },
    "application/vnd.oasis.opendocument.graphics-template": {
      "source": "iana",
      "extensions": ["otg"]
    },
    "application/vnd.oasis.opendocument.image": {
      "source": "iana",
      "extensions": ["odi"]
    },
    "application/vnd.oasis.opendocument.image-template": {
      "source": "iana",
      "extensions": ["oti"]
    },
    "application/vnd.oasis.opendocument.presentation": {
      "source": "iana",
      "compressible": false,
      "extensions": ["odp"]
    },
    "application/vnd.oasis.opendocument.presentation-template": {
      "source": "iana",
      "extensions": ["otp"]
    },
    "application/vnd.oasis.opendocument.spreadsheet": {
      "source": "iana",
      "compressible": false,
      "extensions": ["ods"]
    },
    "application/vnd.oasis.opendocument.spreadsheet-template": {
      "source": "iana",
      "extensions": ["ots"]
    },
    "application/vnd.oasis.opendocument.text": {
      "source": "iana",
      "compressible": false,
      "extensions": ["odt"]
    },
    "application/vnd.oasis.opendocument.text-master": {
      "source": "iana",
      "extensions": ["odm"]
    },
    "application/vnd.oasis.opendocument.text-template": {
      "source": "iana",
      "extensions": ["ott"]
    },
    "application/vnd.oasis.opendocument.text-web": {
      "source": "iana",
      "extensions": ["oth"]
    },
    "application/vnd.obn": {
      "source": "iana"
    },
    "application/vnd.oftn.l10n+json": {
      "source": "iana",
      "compressible": true
    },
    "application/vnd.oipf.contentaccessdownload+xml": {
      "source": "iana"
    },
    "application/vnd.oipf.contentaccessstreaming+xml": {
      "source": "iana"
    },
    "application/vnd.oipf.cspg-hexbinary": {
      "source": "iana"
    },
    "application/vnd.oipf.dae.svg+xml": {
      "source": "iana"
    },
    "application/vnd.oipf.dae.xhtml+xml": {
      "source": "iana"
    },
    "application/vnd.oipf.mippvcontrolmessage+xml": {
      "source": "iana"
    },
    "application/vnd.oipf.pae.gem": {
      "source": "iana"
    },
    "application/vnd.oipf.spdiscovery+xml": {
      "source": "iana"
    },
    "application/vnd.oipf.spdlist+xml": {
      "source": "iana"
    },
    "application/vnd.oipf.ueprofile+xml": {
      "source": "iana"
    },
    "application/vnd.oipf.userprofile+xml": {
      "source": "iana"
    },
    "application/vnd.olpc-sugar": {
      "source": "iana",
      "extensions": ["xo"]
    },
    "application/vnd.oma-scws-config": {
      "source": "iana"
    },
    "application/vnd.oma-scws-http-request": {
      "source": "iana"
    },
    "application/vnd.oma-scws-http-response": {
      "source": "iana"
    },
    "application/vnd.oma.bcast.associated-procedure-parameter+xml": {
      "source": "iana"
    },
    "application/vnd.oma.bcast.drm-trigger+xml": {
      "source": "iana"
    },
    "application/vnd.oma.bcast.imd+xml": {
      "source": "iana"
    },
    "application/vnd.oma.bcast.ltkm": {
      "source": "iana"
    },
    "application/vnd.oma.bcast.notification+xml": {
      "source": "iana"
    },
    "application/vnd.oma.bcast.provisioningtrigger": {
      "source": "iana"
    },
    "application/vnd.oma.bcast.sgboot": {
      "source": "iana"
    },
    "application/vnd.oma.bcast.sgdd+xml": {
      "source": "iana"
    },
    "application/vnd.oma.bcast.sgdu": {
      "source": "iana"
    },
    "application/vnd.oma.bcast.simple-symbol-container": {
      "source": "iana"
    },
    "application/vnd.oma.bcast.smartcard-trigger+xml": {
      "source": "iana"
    },
    "application/vnd.oma.bcast.sprov+xml": {
      "source": "iana"
    },
    "application/vnd.oma.bcast.stkm": {
      "source": "iana"
    },
    "application/vnd.oma.cab-address-book+xml": {
      "source": "iana"
    },
    "application/vnd.oma.cab-feature-handler+xml": {
      "source": "iana"
    },
    "application/vnd.oma.cab-pcc+xml": {
      "source": "iana"
    },
    "application/vnd.oma.cab-subs-invite+xml": {
      "source": "iana"
    },
    "application/vnd.oma.cab-user-prefs+xml": {
      "source": "iana"
    },
    "application/vnd.oma.dcd": {
      "source": "iana"
    },
    "application/vnd.oma.dcdc": {
      "source": "iana"
    },
    "application/vnd.oma.dd2+xml": {
      "source": "iana",
      "extensions": ["dd2"]
    },
    "application/vnd.oma.drm.risd+xml": {
      "source": "iana"
    },
    "application/vnd.oma.group-usage-list+xml": {
      "source": "iana"
    },
    "application/vnd.oma.pal+xml": {
      "source": "iana"
    },
    "application/vnd.oma.poc.detailed-progress-report+xml": {
      "source": "iana"
    },
    "application/vnd.oma.poc.final-report+xml": {
      "source": "iana"
    },
    "application/vnd.oma.poc.groups+xml": {
      "source": "iana"
    },
    "application/vnd.oma.poc.invocation-descriptor+xml": {
      "source": "iana"
    },
    "application/vnd.oma.poc.optimized-progress-report+xml": {
      "source": "iana"
    },
    "application/vnd.oma.push": {
      "source": "iana"
    },
    "application/vnd.oma.scidm.messages+xml": {
      "source": "iana"
    },
    "application/vnd.oma.xcap-directory+xml": {
      "source": "iana"
    },
    "application/vnd.omads-email+xml": {
      "source": "iana"
    },
    "application/vnd.omads-file+xml": {
      "source": "iana"
    },
    "application/vnd.omads-folder+xml": {
      "source": "iana"
    },
    "application/vnd.omaloc-supl-init": {
      "source": "iana"
    },
    "application/vnd.openeye.oeb": {
      "source": "iana"
    },
    "application/vnd.openofficeorg.extension": {
      "source": "apache",
      "extensions": ["oxt"]
    },
    "application/vnd.openxmlformats-officedocument.custom-properties+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.customxmlproperties+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.drawing+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.drawingml.chart+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.drawingml.diagramcolors+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.drawingml.diagramdata+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.drawingml.diagramlayout+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.drawingml.diagramstyle+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.extended-properties+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.presentationml-template": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.presentationml.commentauthors+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.presentationml.comments+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.presentationml.handoutmaster+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.presentationml.notesmaster+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.presentationml.notesslide+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.presentationml.presentation": {
      "source": "iana",
      "compressible": false,
      "extensions": ["pptx"]
    },
    "application/vnd.openxmlformats-officedocument.presentationml.presentation.main+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.presentationml.presprops+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.presentationml.slide": {
      "source": "iana",
      "extensions": ["sldx"]
    },
    "application/vnd.openxmlformats-officedocument.presentationml.slide+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.presentationml.slidelayout+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.presentationml.slidemaster+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.presentationml.slideshow": {
      "source": "iana",
      "extensions": ["ppsx"]
    },
    "application/vnd.openxmlformats-officedocument.presentationml.slideshow.main+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.presentationml.slideupdateinfo+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.presentationml.tablestyles+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.presentationml.tags+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.presentationml.template": {
      "source": "apache",
      "extensions": ["potx"]
    },
    "application/vnd.openxmlformats-officedocument.presentationml.template.main+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.presentationml.viewprops+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml-template": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml.calcchain+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml.externallink+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcachedefinition+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcacherecords+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml.pivottable+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml.querytable+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml.revisionheaders+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml.revisionlog+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml.sharedstrings+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet": {
      "source": "iana",
      "compressible": false,
      "extensions": ["xlsx"]
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml.sheetmetadata+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml.tablesinglecells+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml.template": {
      "source": "apache",
      "extensions": ["xltx"]
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml.usernames+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml.volatiledependencies+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.theme+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.themeoverride+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.vmldrawing": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.wordprocessingml-template": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.wordprocessingml.document": {
      "source": "iana",
      "compressible": false,
      "extensions": ["docx"]
    },
    "application/vnd.openxmlformats-officedocument.wordprocessingml.document.glossary+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.wordprocessingml.endnotes+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.wordprocessingml.fonttable+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.wordprocessingml.template": {
      "source": "apache",
      "extensions": ["dotx"]
    },
    "application/vnd.openxmlformats-officedocument.wordprocessingml.template.main+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.wordprocessingml.websettings+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-package.core-properties+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-package.digital-signature-xmlsignature+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-package.relationships+xml": {
      "source": "iana"
    },
    "application/vnd.oracle.resource+json": {
      "source": "iana",
      "compressible": true
    },
    "application/vnd.orange.indata": {
      "source": "iana"
    },
    "application/vnd.osa.netdeploy": {
      "source": "iana"
    },
    "application/vnd.osgeo.mapguide.package": {
      "source": "iana",
      "extensions": ["mgp"]
    },
    "application/vnd.osgi.bundle": {
      "source": "iana"
    },
    "application/vnd.osgi.dp": {
      "source": "iana",
      "extensions": ["dp"]
    },
    "application/vnd.osgi.subsystem": {
      "source": "iana",
      "extensions": ["esa"]
    },
    "application/vnd.otps.ct-kip+xml": {
      "source": "iana"
    },
    "application/vnd.palm": {
      "source": "iana",
      "extensions": ["pdb","pqa","oprc"]
    },
    "application/vnd.panoply": {
      "source": "iana"
    },
    "application/vnd.paos+xml": {
      "source": "iana"
    },
    "application/vnd.paos.xml": {
      "source": "apache"
    },
    "application/vnd.pawaafile": {
      "source": "iana",
      "extensions": ["paw"]
    },
    "application/vnd.pcos": {
      "source": "iana"
    },
    "application/vnd.pg.format": {
      "source": "iana",
      "extensions": ["str"]
    },
    "application/vnd.pg.osasli": {
      "source": "iana",
      "extensions": ["ei6"]
    },
    "application/vnd.piaccess.application-licence": {
      "source": "iana"
    },
    "application/vnd.picsel": {
      "source": "iana",
      "extensions": ["efif"]
    },
    "application/vnd.pmi.widget": {
      "source": "iana",
      "extensions": ["wg"]
    },
    "application/vnd.poc.group-advertisement+xml": {
      "source": "iana"
    },
    "application/vnd.pocketlearn": {
      "source": "iana",
      "extensions": ["plf"]
    },
    "application/vnd.powerbuilder6": {
      "source": "iana",
      "extensions": ["pbd"]
    },
    "application/vnd.powerbuilder6-s": {
      "source": "iana"
    },
    "application/vnd.powerbuilder7": {
      "source": "iana"
    },
    "application/vnd.powerbuilder7-s": {
      "source": "iana"
    },
    "application/vnd.powerbuilder75": {
      "source": "iana"
    },
    "application/vnd.powerbuilder75-s": {
      "source": "iana"
    },
    "application/vnd.preminet": {
      "source": "iana"
    },
    "application/vnd.previewsystems.box": {
      "source": "iana",
      "extensions": ["box"]
    },
    "application/vnd.proteus.magazine": {
      "source": "iana",
      "extensions": ["mgz"]
    },
    "application/vnd.publishare-delta-tree": {
      "source": "iana",
      "extensions": ["qps"]
    },
    "application/vnd.pvi.ptid1": {
      "source": "iana",
      "extensions": ["ptid"]
    },
    "application/vnd.pwg-multiplexed": {
      "source": "iana"
    },
    "application/vnd.pwg-xhtml-print+xml": {
      "source": "iana"
    },
    "application/vnd.qualcomm.brew-app-res": {
      "source": "iana"
    },
    "application/vnd.quark.quarkxpress": {
      "source": "iana",
      "extensions": ["qxd","qxt","qwd","qwt","qxl","qxb"]
    },
    "application/vnd.quobject-quoxdocument": {
      "source": "iana"
    },
    "application/vnd.radisys.moml+xml": {
      "source": "iana"
    },
    "application/vnd.radisys.msml+xml": {
      "source": "iana"
    },
    "application/vnd.radisys.msml-audit+xml": {
      "source": "iana"
    },
    "application/vnd.radisys.msml-audit-conf+xml": {
      "source": "iana"
    },
    "application/vnd.radisys.msml-audit-conn+xml": {
      "source": "iana"
    },
    "application/vnd.radisys.msml-audit-dialog+xml": {
      "source": "iana"
    },
    "application/vnd.radisys.msml-audit-stream+xml": {
      "source": "iana"
    },
    "application/vnd.radisys.msml-conf+xml": {
      "source": "iana"
    },
    "application/vnd.radisys.msml-dialog+xml": {
      "source": "iana"
    },
    "application/vnd.radisys.msml-dialog-base+xml": {
      "source": "iana"
    },
    "application/vnd.radisys.msml-dialog-fax-detect+xml": {
      "source": "iana"
    },
    "application/vnd.radisys.msml-dialog-fax-sendrecv+xml": {
      "source": "iana"
    },
    "application/vnd.radisys.msml-dialog-group+xml": {
      "source": "iana"
    },
    "application/vnd.radisys.msml-dialog-speech+xml": {
      "source": "iana"
    },
    "application/vnd.radisys.msml-dialog-transform+xml": {
      "source": "iana"
    },
    "application/vnd.rainstor.data": {
      "source": "iana"
    },
    "application/vnd.rapid": {
      "source": "iana"
    },
    "application/vnd.realvnc.bed": {
      "source": "iana",
      "extensions": ["bed"]
    },
    "application/vnd.recordare.musicxml": {
      "source": "iana",
      "extensions": ["mxl"]
    },
    "application/vnd.recordare.musicxml+xml": {
      "source": "iana",
      "extensions": ["musicxml"]
    },
    "application/vnd.renlearn.rlprint": {
      "source": "iana"
    },
    "application/vnd.rig.cryptonote": {
      "source": "iana",
      "extensions": ["cryptonote"]
    },
    "application/vnd.rim.cod": {
      "source": "apache",
      "extensions": ["cod"]
    },
    "application/vnd.rn-realmedia": {
      "source": "apache",
      "extensions": ["rm"]
    },
    "application/vnd.rn-realmedia-vbr": {
      "source": "apache",
      "extensions": ["rmvb"]
    },
    "application/vnd.route66.link66+xml": {
      "source": "iana",
      "extensions": ["link66"]
    },
    "application/vnd.rs-274x": {
      "source": "iana"
    },
    "application/vnd.ruckus.download": {
      "source": "iana"
    },
    "application/vnd.s3sms": {
      "source": "iana"
    },
    "application/vnd.sailingtracker.track": {
      "source": "iana",
      "extensions": ["st"]
    },
    "application/vnd.sbm.cid": {
      "source": "iana"
    },
    "application/vnd.sbm.mid2": {
      "source": "iana"
    },
    "application/vnd.scribus": {
      "source": "iana"
    },
    "application/vnd.sealed.3df": {
      "source": "iana"
    },
    "application/vnd.sealed.csf": {
      "source": "iana"
    },
    "application/vnd.sealed.doc": {
      "source": "iana"
    },
    "application/vnd.sealed.eml": {
      "source": "iana"
    },
    "application/vnd.sealed.mht": {
      "source": "iana"
    },
    "application/vnd.sealed.net": {
      "source": "iana"
    },
    "application/vnd.sealed.ppt": {
      "source": "iana"
    },
    "application/vnd.sealed.tiff": {
      "source": "iana"
    },
    "application/vnd.sealed.xls": {
      "source": "iana"
    },
    "application/vnd.sealedmedia.softseal.html": {
      "source": "iana"
    },
    "application/vnd.sealedmedia.softseal.pdf": {
      "source": "iana"
    },
    "application/vnd.seemail": {
      "source": "iana",
      "extensions": ["see"]
    },
    "application/vnd.sema": {
      "source": "iana",
      "extensions": ["sema"]
    },
    "application/vnd.semd": {
      "source": "iana",
      "extensions": ["semd"]
    },
    "application/vnd.semf": {
      "source": "iana",
      "extensions": ["semf"]
    },
    "application/vnd.shana.informed.formdata": {
      "source": "iana",
      "extensions": ["ifm"]
    },
    "application/vnd.shana.informed.formtemplate": {
      "source": "iana",
      "extensions": ["itp"]
    },
    "application/vnd.shana.informed.interchange": {
      "source": "iana",
      "extensions": ["iif"]
    },
    "application/vnd.shana.informed.package": {
      "source": "iana",
      "extensions": ["ipk"]
    },
    "application/vnd.simtech-mindmapper": {
      "source": "iana",
      "extensions": ["twd","twds"]
    },
    "application/vnd.siren+json": {
      "source": "iana",
      "compressible": true
    },
    "application/vnd.smaf": {
      "source": "iana",
      "extensions": ["mmf"]
    },
    "application/vnd.smart.notebook": {
      "source": "iana"
    },
    "application/vnd.smart.teacher": {
      "source": "iana",
      "extensions": ["teacher"]
    },
    "application/vnd.software602.filler.form+xml": {
      "source": "iana"
    },
    "application/vnd.software602.filler.form-xml-zip": {
      "source": "iana"
    },
    "application/vnd.solent.sdkm+xml": {
      "source": "iana",
      "extensions": ["sdkm","sdkd"]
    },
    "application/vnd.spotfire.dxp": {
      "source": "iana",
      "extensions": ["dxp"]
    },
    "application/vnd.spotfire.sfs": {
      "source": "iana",
      "extensions": ["sfs"]
    },
    "application/vnd.sss-cod": {
      "source": "iana"
    },
    "application/vnd.sss-dtf": {
      "source": "iana"
    },
    "application/vnd.sss-ntf": {
      "source": "iana"
    },
    "application/vnd.stardivision.calc": {
      "source": "apache",
      "extensions": ["sdc"]
    },
    "application/vnd.stardivision.draw": {
      "source": "apache",
      "extensions": ["sda"]
    },
    "application/vnd.stardivision.impress": {
      "source": "apache",
      "extensions": ["sdd"]
    },
    "application/vnd.stardivision.math": {
      "source": "apache",
      "extensions": ["smf"]
    },
    "application/vnd.stardivision.writer": {
      "source": "apache",
      "extensions": ["sdw","vor"]
    },
    "application/vnd.stardivision.writer-global": {
      "source": "apache",
      "extensions": ["sgl"]
    },
    "application/vnd.stepmania.package": {
      "source": "iana",
      "extensions": ["smzip"]
    },
    "application/vnd.stepmania.stepchart": {
      "source": "iana",
      "extensions": ["sm"]
    },
    "application/vnd.street-stream": {
      "source": "iana"
    },
    "application/vnd.sun.wadl+xml": {
      "source": "iana"
    },
    "application/vnd.sun.xml.calc": {
      "source": "apache",
      "extensions": ["sxc"]
    },
    "application/vnd.sun.xml.calc.template": {
      "source": "apache",
      "extensions": ["stc"]
    },
    "application/vnd.sun.xml.draw": {
      "source": "apache",
      "extensions": ["sxd"]
    },
    "application/vnd.sun.xml.draw.template": {
      "source": "apache",
      "extensions": ["std"]
    },
    "application/vnd.sun.xml.impress": {
      "source": "apache",
      "extensions": ["sxi"]
    },
    "application/vnd.sun.xml.impress.template": {
      "source": "apache",
      "extensions": ["sti"]
    },
    "application/vnd.sun.xml.math": {
      "source": "apache",
      "extensions": ["sxm"]
    },
    "application/vnd.sun.xml.writer": {
      "source": "apache",
      "extensions": ["sxw"]
    },
    "application/vnd.sun.xml.writer.global": {
      "source": "apache",
      "extensions": ["sxg"]
    },
    "application/vnd.sun.xml.writer.template": {
      "source": "apache",
      "extensions": ["stw"]
    },
    "application/vnd.sus-calendar": {
      "source": "iana",
      "extensions": ["sus","susp"]
    },
    "application/vnd.svd": {
      "source": "iana",
      "extensions": ["svd"]
    },
    "application/vnd.swiftview-ics": {
      "source": "iana"
    },
    "application/vnd.symbian.install": {
      "source": "apache",
      "extensions": ["sis","sisx"]
    },
    "application/vnd.syncml+xml": {
      "source": "iana",
      "extensions": ["xsm"]
    },
    "application/vnd.syncml.dm+wbxml": {
      "source": "iana",
      "extensions": ["bdm"]
    },
    "application/vnd.syncml.dm+xml": {
      "source": "iana",
      "extensions": ["xdm"]
    },
    "application/vnd.syncml.dm.notification": {
      "source": "iana"
    },
    "application/vnd.syncml.dmddf+wbxml": {
      "source": "iana"
    },
    "application/vnd.syncml.dmddf+xml": {
      "source": "iana"
    },
    "application/vnd.syncml.dmtnds+wbxml": {
      "source": "iana"
    },
    "application/vnd.syncml.dmtnds+xml": {
      "source": "iana"
    },
    "application/vnd.syncml.ds.notification": {
      "source": "iana"
    },
    "application/vnd.tao.intent-module-archive": {
      "source": "iana",
      "extensions": ["tao"]
    },
    "application/vnd.tcpdump.pcap": {
      "source": "iana",
      "extensions": ["pcap","cap","dmp"]
    },
    "application/vnd.tmd.mediaflex.api+xml": {
      "source": "iana"
    },
    "application/vnd.tmobile-livetv": {
      "source": "iana",
      "extensions": ["tmo"]
    },
    "application/vnd.trid.tpt": {
      "source": "iana",
      "extensions": ["tpt"]
    },
    "application/vnd.triscape.mxs": {
      "source": "iana",
      "extensions": ["mxs"]
    },
    "application/vnd.trueapp": {
      "source": "iana",
      "extensions": ["tra"]
    },
    "application/vnd.truedoc": {
      "source": "iana"
    },
    "application/vnd.ubisoft.webplayer": {
      "source": "iana"
    },
    "application/vnd.ufdl": {
      "source": "iana",
      "extensions": ["ufd","ufdl"]
    },
    "application/vnd.uiq.theme": {
      "source": "iana",
      "extensions": ["utz"]
    },
    "application/vnd.umajin": {
      "source": "iana",
      "extensions": ["umj"]
    },
    "application/vnd.unity": {
      "source": "iana",
      "extensions": ["unityweb"]
    },
    "application/vnd.uoml+xml": {
      "source": "iana",
      "extensions": ["uoml"]
    },
    "application/vnd.uplanet.alert": {
      "source": "iana"
    },
    "application/vnd.uplanet.alert-wbxml": {
      "source": "iana"
    },
    "application/vnd.uplanet.bearer-choice": {
      "source": "iana"
    },
    "application/vnd.uplanet.bearer-choice-wbxml": {
      "source": "iana"
    },
    "application/vnd.uplanet.cacheop": {
      "source": "iana"
    },
    "application/vnd.uplanet.cacheop-wbxml": {
      "source": "iana"
    },
    "application/vnd.uplanet.channel": {
      "source": "iana"
    },
    "application/vnd.uplanet.channel-wbxml": {
      "source": "iana"
    },
    "application/vnd.uplanet.list": {
      "source": "iana"
    },
    "application/vnd.uplanet.list-wbxml": {
      "source": "iana"
    },
    "application/vnd.uplanet.listcmd": {
      "source": "iana"
    },
    "application/vnd.uplanet.listcmd-wbxml": {
      "source": "iana"
    },
    "application/vnd.uplanet.signal": {
      "source": "iana"
    },
    "application/vnd.valve.source.material": {
      "source": "iana"
    },
    "application/vnd.vcx": {
      "source": "iana",
      "extensions": ["vcx"]
    },
    "application/vnd.vd-study": {
      "source": "iana"
    },
    "application/vnd.vectorworks": {
      "source": "iana"
    },
    "application/vnd.verimatrix.vcas": {
      "source": "iana"
    },
    "application/vnd.vidsoft.vidconference": {
      "source": "iana"
    },
    "application/vnd.visio": {
      "source": "iana",
      "extensions": ["vsd","vst","vss","vsw"]
    },
    "application/vnd.visionary": {
      "source": "iana",
      "extensions": ["vis"]
    },
    "application/vnd.vividence.scriptfile": {
      "source": "iana"
    },
    "application/vnd.vsf": {
      "source": "iana",
      "extensions": ["vsf"]
    },
    "application/vnd.wap.sic": {
      "source": "iana"
    },
    "application/vnd.wap.slc": {
      "source": "iana"
    },
    "application/vnd.wap.wbxml": {
      "source": "iana",
      "extensions": ["wbxml"]
    },
    "application/vnd.wap.wmlc": {
      "source": "iana",
      "extensions": ["wmlc"]
    },
    "application/vnd.wap.wmlscriptc": {
      "source": "iana",
      "extensions": ["wmlsc"]
    },
    "application/vnd.webturbo": {
      "source": "iana",
      "extensions": ["wtb"]
    },
    "application/vnd.wfa.p2p": {
      "source": "iana"
    },
    "application/vnd.wfa.wsc": {
      "source": "iana"
    },
    "application/vnd.windows.devicepairing": {
      "source": "iana"
    },
    "application/vnd.wmc": {
      "source": "iana"
    },
    "application/vnd.wmf.bootstrap": {
      "source": "iana"
    },
    "application/vnd.wolfram.mathematica": {
      "source": "iana"
    },
    "application/vnd.wolfram.mathematica.package": {
      "source": "iana"
    },
    "application/vnd.wolfram.player": {
      "source": "iana",
      "extensions": ["nbp"]
    },
    "application/vnd.wordperfect": {
      "source": "iana",
      "extensions": ["wpd"]
    },
    "application/vnd.wqd": {
      "source": "iana",
      "extensions": ["wqd"]
    },
    "application/vnd.wrq-hp3000-labelled": {
      "source": "iana"
    },
    "application/vnd.wt.stf": {
      "source": "iana",
      "extensions": ["stf"]
    },
    "application/vnd.wv.csp+wbxml": {
      "source": "iana"
    },
    "application/vnd.wv.csp+xml": {
      "source": "iana"
    },
    "application/vnd.wv.ssp+xml": {
      "source": "iana"
    },
    "application/vnd.xacml+json": {
      "source": "iana",
      "compressible": true
    },
    "application/vnd.xara": {
      "source": "iana",
      "extensions": ["xar"]
    },
    "application/vnd.xfdl": {
      "source": "iana",
      "extensions": ["xfdl"]
    },
    "application/vnd.xfdl.webform": {
      "source": "iana"
    },
    "application/vnd.xmi+xml": {
      "source": "iana"
    },
    "application/vnd.xmpie.cpkg": {
      "source": "iana"
    },
    "application/vnd.xmpie.dpkg": {
      "source": "iana"
    },
    "application/vnd.xmpie.plan": {
      "source": "iana"
    },
    "application/vnd.xmpie.ppkg": {
      "source": "iana"
    },
    "application/vnd.xmpie.xlim": {
      "source": "iana"
    },
    "application/vnd.yamaha.hv-dic": {
      "source": "iana",
      "extensions": ["hvd"]
    },
    "application/vnd.yamaha.hv-script": {
      "source": "iana",
      "extensions": ["hvs"]
    },
    "application/vnd.yamaha.hv-voice": {
      "source": "iana",
      "extensions": ["hvp"]
    },
    "application/vnd.yamaha.openscoreformat": {
      "source": "iana",
      "extensions": ["osf"]
    },
    "application/vnd.yamaha.openscoreformat.osfpvg+xml": {
      "source": "iana",
      "extensions": ["osfpvg"]
    },
    "application/vnd.yamaha.remote-setup": {
      "source": "iana"
    },
    "application/vnd.yamaha.smaf-audio": {
      "source": "iana",
      "extensions": ["saf"]
    },
    "application/vnd.yamaha.smaf-phrase": {
      "source": "iana",
      "extensions": ["spf"]
    },
    "application/vnd.yamaha.through-ngn": {
      "source": "iana"
    },
    "application/vnd.yamaha.tunnel-udpencap": {
      "source": "iana"
    },
    "application/vnd.yaoweme": {
      "source": "iana"
    },
    "application/vnd.yellowriver-custom-menu": {
      "source": "iana",
      "extensions": ["cmp"]
    },
    "application/vnd.zul": {
      "source": "iana",
      "extensions": ["zir","zirz"]
    },
    "application/vnd.zzazz.deck+xml": {
      "source": "iana",
      "extensions": ["zaz"]
    },
    "application/voicexml+xml": {
      "source": "iana",
      "extensions": ["vxml"]
    },
    "application/vq-rtcpxr": {
      "source": "iana"
    },
    "application/watcherinfo+xml": {
      "source": "iana"
    },
    "application/whoispp-query": {
      "source": "iana"
    },
    "application/whoispp-response": {
      "source": "iana"
    },
    "application/widget": {
      "source": "iana",
      "extensions": ["wgt"]
    },
    "application/winhlp": {
      "source": "apache",
      "extensions": ["hlp"]
    },
    "application/wita": {
      "source": "iana"
    },
    "application/wordperfect5.1": {
      "source": "iana"
    },
    "application/wsdl+xml": {
      "source": "iana",
      "extensions": ["wsdl"]
    },
    "application/wspolicy+xml": {
      "source": "iana",
      "extensions": ["wspolicy"]
    },
    "application/x-7z-compressed": {
      "source": "apache",
      "compressible": false,
      "extensions": ["7z"]
    },
    "application/x-abiword": {
      "source": "apache",
      "extensions": ["abw"]
    },
    "application/x-ace-compressed": {
      "source": "apache",
      "extensions": ["ace"]
    },
    "application/x-amf": {
      "source": "apache"
    },
    "application/x-apple-diskimage": {
      "source": "apache",
      "extensions": ["dmg"]
    },
    "application/x-authorware-bin": {
      "source": "apache",
      "extensions": ["aab","x32","u32","vox"]
    },
    "application/x-authorware-map": {
      "source": "apache",
      "extensions": ["aam"]
    },
    "application/x-authorware-seg": {
      "source": "apache",
      "extensions": ["aas"]
    },
    "application/x-bcpio": {
      "source": "apache",
      "extensions": ["bcpio"]
    },
    "application/x-bdoc": {
      "compressible": false,
      "extensions": ["bdoc"]
    },
    "application/x-bittorrent": {
      "source": "apache",
      "extensions": ["torrent"]
    },
    "application/x-blorb": {
      "source": "apache",
      "extensions": ["blb","blorb"]
    },
    "application/x-bzip": {
      "source": "apache",
      "compressible": false,
      "extensions": ["bz"]
    },
    "application/x-bzip2": {
      "source": "apache",
      "compressible": false,
      "extensions": ["bz2","boz"]
    },
    "application/x-cbr": {
      "source": "apache",
      "extensions": ["cbr","cba","cbt","cbz","cb7"]
    },
    "application/x-cdlink": {
      "source": "apache",
      "extensions": ["vcd"]
    },
    "application/x-cfs-compressed": {
      "source": "apache",
      "extensions": ["cfs"]
    },
    "application/x-chat": {
      "source": "apache",
      "extensions": ["chat"]
    },
    "application/x-chess-pgn": {
      "source": "apache",
      "extensions": ["pgn"]
    },
    "application/x-chrome-extension": {
      "extensions": ["crx"]
    },
    "application/x-compress": {
      "source": "apache"
    },
    "application/x-conference": {
      "source": "apache",
      "extensions": ["nsc"]
    },
    "application/x-cpio": {
      "source": "apache",
      "extensions": ["cpio"]
    },
    "application/x-csh": {
      "source": "apache",
      "extensions": ["csh"]
    },
    "application/x-deb": {
      "compressible": false
    },
    "application/x-debian-package": {
      "source": "apache",
      "extensions": ["deb","udeb"]
    },
    "application/x-dgc-compressed": {
      "source": "apache",
      "extensions": ["dgc"]
    },
    "application/x-director": {
      "source": "apache",
      "extensions": ["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"]
    },
    "application/x-doom": {
      "source": "apache",
      "extensions": ["wad"]
    },
    "application/x-dtbncx+xml": {
      "source": "apache",
      "extensions": ["ncx"]
    },
    "application/x-dtbook+xml": {
      "source": "apache",
      "extensions": ["dtb"]
    },
    "application/x-dtbresource+xml": {
      "source": "apache",
      "extensions": ["res"]
    },
    "application/x-dvi": {
      "source": "apache",
      "compressible": false,
      "extensions": ["dvi"]
    },
    "application/x-envoy": {
      "source": "apache",
      "extensions": ["evy"]
    },
    "application/x-eva": {
      "source": "apache",
      "extensions": ["eva"]
    },
    "application/x-font-bdf": {
      "source": "apache",
      "extensions": ["bdf"]
    },
    "application/x-font-dos": {
      "source": "apache"
    },
    "application/x-font-framemaker": {
      "source": "apache"
    },
    "application/x-font-ghostscript": {
      "source": "apache",
      "extensions": ["gsf"]
    },
    "application/x-font-libgrx": {
      "source": "apache"
    },
    "application/x-font-linux-psf": {
      "source": "apache",
      "extensions": ["psf"]
    },
    "application/x-font-otf": {
      "source": "apache",
      "compressible": true,
      "extensions": ["otf"]
    },
    "application/x-font-pcf": {
      "source": "apache",
      "extensions": ["pcf"]
    },
    "application/x-font-snf": {
      "source": "apache",
      "extensions": ["snf"]
    },
    "application/x-font-speedo": {
      "source": "apache"
    },
    "application/x-font-sunos-news": {
      "source": "apache"
    },
    "application/x-font-ttf": {
      "source": "apache",
      "compressible": true,
      "extensions": ["ttf","ttc"]
    },
    "application/x-font-type1": {
      "source": "apache",
      "extensions": ["pfa","pfb","pfm","afm"]
    },
    "application/x-font-vfont": {
      "source": "apache"
    },
    "application/x-freearc": {
      "source": "apache",
      "extensions": ["arc"]
    },
    "application/x-futuresplash": {
      "source": "apache",
      "extensions": ["spl"]
    },
    "application/x-gca-compressed": {
      "source": "apache",
      "extensions": ["gca"]
    },
    "application/x-glulx": {
      "source": "apache",
      "extensions": ["ulx"]
    },
    "application/x-gnumeric": {
      "source": "apache",
      "extensions": ["gnumeric"]
    },
    "application/x-gramps-xml": {
      "source": "apache",
      "extensions": ["gramps"]
    },
    "application/x-gtar": {
      "source": "apache",
      "extensions": ["gtar"]
    },
    "application/x-gzip": {
      "source": "apache"
    },
    "application/x-hdf": {
      "source": "apache",
      "extensions": ["hdf"]
    },
    "application/x-install-instructions": {
      "source": "apache",
      "extensions": ["install"]
    },
    "application/x-iso9660-image": {
      "source": "apache",
      "extensions": ["iso"]
    },
    "application/x-java-jnlp-file": {
      "source": "apache",
      "compressible": false,
      "extensions": ["jnlp"]
    },
    "application/x-javascript": {
      "compressible": true
    },
    "application/x-latex": {
      "source": "apache",
      "compressible": false,
      "extensions": ["latex"]
    },
    "application/x-lua-bytecode": {
      "extensions": ["luac"]
    },
    "application/x-lzh-compressed": {
      "source": "apache",
      "extensions": ["lzh","lha"]
    },
    "application/x-mie": {
      "source": "apache",
      "extensions": ["mie"]
    },
    "application/x-mobipocket-ebook": {
      "source": "apache",
      "extensions": ["prc","mobi"]
    },
    "application/x-mpegurl": {
      "compressible": false
    },
    "application/x-ms-application": {
      "source": "apache",
      "extensions": ["application"]
    },
    "application/x-ms-shortcut": {
      "source": "apache",
      "extensions": ["lnk"]
    },
    "application/x-ms-wmd": {
      "source": "apache",
      "extensions": ["wmd"]
    },
    "application/x-ms-wmz": {
      "source": "apache",
      "extensions": ["wmz"]
    },
    "application/x-ms-xbap": {
      "source": "apache",
      "extensions": ["xbap"]
    },
    "application/x-msaccess": {
      "source": "apache",
      "extensions": ["mdb"]
    },
    "application/x-msbinder": {
      "source": "apache",
      "extensions": ["obd"]
    },
    "application/x-mscardfile": {
      "source": "apache",
      "extensions": ["crd"]
    },
    "application/x-msclip": {
      "source": "apache",
      "extensions": ["clp"]
    },
    "application/x-msdownload": {
      "source": "apache",
      "extensions": ["exe","dll","com","bat","msi"]
    },
    "application/x-msmediaview": {
      "source": "apache",
      "extensions": ["mvb","m13","m14"]
    },
    "application/x-msmetafile": {
      "source": "apache",
      "extensions": ["wmf","wmz","emf","emz"]
    },
    "application/x-msmoney": {
      "source": "apache",
      "extensions": ["mny"]
    },
    "application/x-mspublisher": {
      "source": "apache",
      "extensions": ["pub"]
    },
    "application/x-msschedule": {
      "source": "apache",
      "extensions": ["scd"]
    },
    "application/x-msterminal": {
      "source": "apache",
      "extensions": ["trm"]
    },
    "application/x-mswrite": {
      "source": "apache",
      "extensions": ["wri"]
    },
    "application/x-netcdf": {
      "source": "apache",
      "extensions": ["nc","cdf"]
    },
    "application/x-ns-proxy-autoconfig": {
      "compressible": true,
      "extensions": ["pac"]
    },
    "application/x-nzb": {
      "source": "apache",
      "extensions": ["nzb"]
    },
    "application/x-pkcs12": {
      "source": "apache",
      "compressible": false,
      "extensions": ["p12","pfx"]
    },
    "application/x-pkcs7-certificates": {
      "source": "apache",
      "extensions": ["p7b","spc"]
    },
    "application/x-pkcs7-certreqresp": {
      "source": "apache",
      "extensions": ["p7r"]
    },
    "application/x-rar-compressed": {
      "source": "apache",
      "compressible": false,
      "extensions": ["rar"]
    },
    "application/x-research-info-systems": {
      "source": "apache",
      "extensions": ["ris"]
    },
    "application/x-sh": {
      "source": "apache",
      "compressible": true,
      "extensions": ["sh"]
    },
    "application/x-shar": {
      "source": "apache",
      "extensions": ["shar"]
    },
    "application/x-shockwave-flash": {
      "source": "apache",
      "compressible": false,
      "extensions": ["swf"]
    },
    "application/x-silverlight-app": {
      "source": "apache",
      "extensions": ["xap"]
    },
    "application/x-sql": {
      "source": "apache",
      "extensions": ["sql"]
    },
    "application/x-stuffit": {
      "source": "apache",
      "compressible": false,
      "extensions": ["sit"]
    },
    "application/x-stuffitx": {
      "source": "apache",
      "extensions": ["sitx"]
    },
    "application/x-subrip": {
      "source": "apache",
      "extensions": ["srt"]
    },
    "application/x-sv4cpio": {
      "source": "apache",
      "extensions": ["sv4cpio"]
    },
    "application/x-sv4crc": {
      "source": "apache",
      "extensions": ["sv4crc"]
    },
    "application/x-t3vm-image": {
      "source": "apache",
      "extensions": ["t3"]
    },
    "application/x-tads": {
      "source": "apache",
      "extensions": ["gam"]
    },
    "application/x-tar": {
      "source": "apache",
      "compressible": true,
      "extensions": ["tar"]
    },
    "application/x-tcl": {
      "source": "apache",
      "extensions": ["tcl"]
    },
    "application/x-tex": {
      "source": "apache",
      "extensions": ["tex"]
    },
    "application/x-tex-tfm": {
      "source": "apache",
      "extensions": ["tfm"]
    },
    "application/x-texinfo": {
      "source": "apache",
      "extensions": ["texinfo","texi"]
    },
    "application/x-tgif": {
      "source": "apache",
      "extensions": ["obj"]
    },
    "application/x-ustar": {
      "source": "apache",
      "extensions": ["ustar"]
    },
    "application/x-wais-source": {
      "source": "apache",
      "extensions": ["src"]
    },
    "application/x-web-app-manifest+json": {
      "compressible": true,
      "extensions": ["webapp"]
    },
    "application/x-www-form-urlencoded": {
      "source": "iana",
      "compressible": true
    },
    "application/x-x509-ca-cert": {
      "source": "apache",
      "extensions": ["der","crt"]
    },
    "application/x-xfig": {
      "source": "apache",
      "extensions": ["fig"]
    },
    "application/x-xliff+xml": {
      "source": "apache",
      "extensions": ["xlf"]
    },
    "application/x-xpinstall": {
      "source": "apache",
      "compressible": false,
      "extensions": ["xpi"]
    },
    "application/x-xz": {
      "source": "apache",
      "extensions": ["xz"]
    },
    "application/x-zmachine": {
      "source": "apache",
      "extensions": ["z1","z2","z3","z4","z5","z6","z7","z8"]
    },
    "application/x400-bp": {
      "source": "iana"
    },
    "application/xacml+xml": {
      "source": "iana"
    },
    "application/xaml+xml": {
      "source": "apache",
      "extensions": ["xaml"]
    },
    "application/xcap-att+xml": {
      "source": "iana"
    },
    "application/xcap-caps+xml": {
      "source": "iana"
    },
    "application/xcap-diff+xml": {
      "source": "iana",
      "extensions": ["xdf"]
    },
    "application/xcap-el+xml": {
      "source": "iana"
    },
    "application/xcap-error+xml": {
      "source": "iana"
    },
    "application/xcap-ns+xml": {
      "source": "iana"
    },
    "application/xcon-conference-info+xml": {
      "source": "iana"
    },
    "application/xcon-conference-info-diff+xml": {
      "source": "iana"
    },
    "application/xenc+xml": {
      "source": "iana",
      "extensions": ["xenc"]
    },
    "application/xhtml+xml": {
      "source": "iana",
      "compressible": true,
      "extensions": ["xhtml","xht"]
    },
    "application/xhtml-voice+xml": {
      "source": "apache"
    },
    "application/xml": {
      "source": "iana",
      "compressible": true,
      "extensions": ["xml","xsl","xsd"]
    },
    "application/xml-dtd": {
      "source": "iana",
      "compressible": true,
      "extensions": ["dtd"]
    },
    "application/xml-external-parsed-entity": {
      "source": "iana"
    },
    "application/xml-patch+xml": {
      "source": "iana"
    },
    "application/xmpp+xml": {
      "source": "iana"
    },
    "application/xop+xml": {
      "source": "iana",
      "compressible": true,
      "extensions": ["xop"]
    },
    "application/xproc+xml": {
      "source": "apache",
      "extensions": ["xpl"]
    },
    "application/xslt+xml": {
      "source": "iana",
      "extensions": ["xslt"]
    },
    "application/xspf+xml": {
      "source": "apache",
      "extensions": ["xspf"]
    },
    "application/xv+xml": {
      "source": "iana",
      "extensions": ["mxml","xhvml","xvml","xvm"]
    },
    "application/yang": {
      "source": "iana",
      "extensions": ["yang"]
    },
    "application/yin+xml": {
      "source": "iana",
      "extensions": ["yin"]
    },
    "application/zip": {
      "source": "iana",
      "compressible": false,
      "extensions": ["zip"]
    },
    "application/zlib": {
      "source": "iana"
    },
    "audio/1d-interleaved-parityfec": {
      "source": "iana"
    },
    "audio/32kadpcm": {
      "source": "iana"
    },
    "audio/3gpp": {
      "source": "iana"
    },
    "audio/3gpp2": {
      "source": "iana"
    },
    "audio/ac3": {
      "source": "iana"
    },
    "audio/adpcm": {
      "source": "apache",
      "extensions": ["adp"]
    },
    "audio/amr": {
      "source": "iana"
    },
    "audio/amr-wb": {
      "source": "iana"
    },
    "audio/amr-wb+": {
      "source": "iana"
    },
    "audio/aptx": {
      "source": "iana"
    },
    "audio/asc": {
      "source": "iana"
    },
    "audio/atrac-advanced-lossless": {
      "source": "iana"
    },
    "audio/atrac-x": {
      "source": "iana"
    },
    "audio/atrac3": {
      "source": "iana"
    },
    "audio/basic": {
      "source": "iana",
      "compressible": false,
      "extensions": ["au","snd"]
    },
    "audio/bv16": {
      "source": "iana"
    },
    "audio/bv32": {
      "source": "iana"
    },
    "audio/clearmode": {
      "source": "iana"
    },
    "audio/cn": {
      "source": "iana"
    },
    "audio/dat12": {
      "source": "iana"
    },
    "audio/dls": {
      "source": "iana"
    },
    "audio/dsr-es201108": {
      "source": "iana"
    },
    "audio/dsr-es202050": {
      "source": "iana"
    },
    "audio/dsr-es202211": {
      "source": "iana"
    },
    "audio/dsr-es202212": {
      "source": "iana"
    },
    "audio/dv": {
      "source": "iana"
    },
    "audio/dvi4": {
      "source": "iana"
    },
    "audio/eac3": {
      "source": "iana"
    },
    "audio/encaprtp": {
      "source": "iana"
    },
    "audio/evrc": {
      "source": "iana"
    },
    "audio/evrc-qcp": {
      "source": "iana"
    },
    "audio/evrc0": {
      "source": "iana"
    },
    "audio/evrc1": {
      "source": "iana"
    },
    "audio/evrcb": {
      "source": "iana"
    },
    "audio/evrcb0": {
      "source": "iana"
    },
    "audio/evrcb1": {
      "source": "iana"
    },
    "audio/evrcnw": {
      "source": "iana"
    },
    "audio/evrcnw0": {
      "source": "iana"
    },
    "audio/evrcnw1": {
      "source": "iana"
    },
    "audio/evrcwb": {
      "source": "iana"
    },
    "audio/evrcwb0": {
      "source": "iana"
    },
    "audio/evrcwb1": {
      "source": "iana"
    },
    "audio/fwdred": {
      "source": "iana"
    },
    "audio/g719": {
      "source": "iana"
    },
    "audio/g722": {
      "source": "iana"
    },
    "audio/g7221": {
      "source": "iana"
    },
    "audio/g723": {
      "source": "iana"
    },
    "audio/g726-16": {
      "source": "iana"
    },
    "audio/g726-24": {
      "source": "iana"
    },
    "audio/g726-32": {
      "source": "iana"
    },
    "audio/g726-40": {
      "source": "iana"
    },
    "audio/g728": {
      "source": "iana"
    },
    "audio/g729": {
      "source": "iana"
    },
    "audio/g7291": {
      "source": "iana"
    },
    "audio/g729d": {
      "source": "iana"
    },
    "audio/g729e": {
      "source": "iana"
    },
    "audio/gsm": {
      "source": "iana"
    },
    "audio/gsm-efr": {
      "source": "iana"
    },
    "audio/gsm-hr-08": {
      "source": "iana"
    },
    "audio/ilbc": {
      "source": "iana"
    },
    "audio/ip-mr_v2.5": {
      "source": "iana"
    },
    "audio/isac": {
      "source": "apache"
    },
    "audio/l16": {
      "source": "iana"
    },
    "audio/l20": {
      "source": "iana"
    },
    "audio/l24": {
      "source": "iana",
      "compressible": false
    },
    "audio/l8": {
      "source": "iana"
    },
    "audio/lpc": {
      "source": "iana"
    },
    "audio/midi": {
      "source": "apache",
      "extensions": ["mid","midi","kar","rmi"]
    },
    "audio/mobile-xmf": {
      "source": "iana"
    },
    "audio/mp4": {
      "source": "iana",
      "compressible": false,
      "extensions": ["mp4a","m4a"]
    },
    "audio/mp4a-latm": {
      "source": "iana"
    },
    "audio/mpa": {
      "source": "iana"
    },
    "audio/mpa-robust": {
      "source": "iana"
    },
    "audio/mpeg": {
      "source": "iana",
      "compressible": false,
      "extensions": ["mpga","mp2","mp2a","mp3","m2a","m3a"]
    },
    "audio/mpeg4-generic": {
      "source": "iana"
    },
    "audio/musepack": {
      "source": "apache"
    },
    "audio/ogg": {
      "source": "iana",
      "compressible": false,
      "extensions": ["oga","ogg","spx"]
    },
    "audio/opus": {
      "source": "iana"
    },
    "audio/parityfec": {
      "source": "iana"
    },
    "audio/pcma": {
      "source": "iana"
    },
    "audio/pcma-wb": {
      "source": "iana"
    },
    "audio/pcmu": {
      "source": "iana"
    },
    "audio/pcmu-wb": {
      "source": "iana"
    },
    "audio/prs.sid": {
      "source": "iana"
    },
    "audio/qcelp": {
      "source": "iana"
    },
    "audio/raptorfec": {
      "source": "iana"
    },
    "audio/red": {
      "source": "iana"
    },
    "audio/rtp-enc-aescm128": {
      "source": "iana"
    },
    "audio/rtp-midi": {
      "source": "iana"
    },
    "audio/rtploopback": {
      "source": "iana"
    },
    "audio/rtx": {
      "source": "iana"
    },
    "audio/s3m": {
      "source": "apache",
      "extensions": ["s3m"]
    },
    "audio/silk": {
      "source": "apache",
      "extensions": ["sil"]
    },
    "audio/smv": {
      "source": "iana"
    },
    "audio/smv-qcp": {
      "source": "iana"
    },
    "audio/smv0": {
      "source": "iana"
    },
    "audio/sp-midi": {
      "source": "iana"
    },
    "audio/speex": {
      "source": "iana"
    },
    "audio/t140c": {
      "source": "iana"
    },
    "audio/t38": {
      "source": "iana"
    },
    "audio/telephone-event": {
      "source": "iana"
    },
    "audio/tone": {
      "source": "iana"
    },
    "audio/uemclip": {
      "source": "iana"
    },
    "audio/ulpfec": {
      "source": "iana"
    },
    "audio/vdvi": {
      "source": "iana"
    },
    "audio/vmr-wb": {
      "source": "iana"
    },
    "audio/vnd.3gpp.iufp": {
      "source": "iana"
    },
    "audio/vnd.4sb": {
      "source": "iana"
    },
    "audio/vnd.audiokoz": {
      "source": "iana"
    },
    "audio/vnd.celp": {
      "source": "iana"
    },
    "audio/vnd.cisco.nse": {
      "source": "iana"
    },
    "audio/vnd.cmles.radio-events": {
      "source": "iana"
    },
    "audio/vnd.cns.anp1": {
      "source": "iana"
    },
    "audio/vnd.cns.inf1": {
      "source": "iana"
    },
    "audio/vnd.dece.audio": {
      "source": "iana",
      "extensions": ["uva","uvva"]
    },
    "audio/vnd.digital-winds": {
      "source": "iana",
      "extensions": ["eol"]
    },
    "audio/vnd.dlna.adts": {
      "source": "iana"
    },
    "audio/vnd.dolby.heaac.1": {
      "source": "iana"
    },
    "audio/vnd.dolby.heaac.2": {
      "source": "iana"
    },
    "audio/vnd.dolby.mlp": {
      "source": "iana"
    },
    "audio/vnd.dolby.mps": {
      "source": "iana"
    },
    "audio/vnd.dolby.pl2": {
      "source": "iana"
    },
    "audio/vnd.dolby.pl2x": {
      "source": "iana"
    },
    "audio/vnd.dolby.pl2z": {
      "source": "iana"
    },
    "audio/vnd.dolby.pulse.1": {
      "source": "iana"
    },
    "audio/vnd.dra": {
      "source": "iana",
      "extensions": ["dra"]
    },
    "audio/vnd.dts": {
      "source": "iana",
      "extensions": ["dts"]
    },
    "audio/vnd.dts.hd": {
      "source": "iana",
      "extensions": ["dtshd"]
    },
    "audio/vnd.dvb.file": {
      "source": "iana"
    },
    "audio/vnd.everad.plj": {
      "source": "iana"
    },
    "audio/vnd.hns.audio": {
      "source": "iana"
    },
    "audio/vnd.lucent.voice": {
      "source": "iana",
      "extensions": ["lvp"]
    },
    "audio/vnd.ms-playready.media.pya": {
      "source": "iana",
      "extensions": ["pya"]
    },
    "audio/vnd.nokia.mobile-xmf": {
      "source": "iana"
    },
    "audio/vnd.nortel.vbk": {
      "source": "iana"
    },
    "audio/vnd.nuera.ecelp4800": {
      "source": "iana",
      "extensions": ["ecelp4800"]
    },
    "audio/vnd.nuera.ecelp7470": {
      "source": "iana",
      "extensions": ["ecelp7470"]
    },
    "audio/vnd.nuera.ecelp9600": {
      "source": "iana",
      "extensions": ["ecelp9600"]
    },
    "audio/vnd.octel.sbc": {
      "source": "iana"
    },
    "audio/vnd.qcelp": {
      "source": "iana"
    },
    "audio/vnd.rhetorex.32kadpcm": {
      "source": "iana"
    },
    "audio/vnd.rip": {
      "source": "iana",
      "extensions": ["rip"]
    },
    "audio/vnd.rn-realaudio": {
      "compressible": false
    },
    "audio/vnd.sealedmedia.softseal.mpeg": {
      "source": "iana"
    },
    "audio/vnd.vmx.cvsd": {
      "source": "iana"
    },
    "audio/vnd.wave": {
      "compressible": false
    },
    "audio/vorbis": {
      "source": "iana",
      "compressible": false
    },
    "audio/vorbis-config": {
      "source": "iana"
    },
    "audio/wav": {
      "compressible": false,
      "extensions": ["wav"]
    },
    "audio/wave": {
      "compressible": false,
      "extensions": ["wav"]
    },
    "audio/webm": {
      "source": "apache",
      "compressible": false,
      "extensions": ["weba"]
    },
    "audio/x-aac": {
      "source": "apache",
      "compressible": false,
      "extensions": ["aac"]
    },
    "audio/x-aiff": {
      "source": "apache",
      "extensions": ["aif","aiff","aifc"]
    },
    "audio/x-caf": {
      "source": "apache",
      "compressible": false,
      "extensions": ["caf"]
    },
    "audio/x-flac": {
      "source": "apache",
      "extensions": ["flac"]
    },
    "audio/x-matroska": {
      "source": "apache",
      "extensions": ["mka"]
    },
    "audio/x-mpegurl": {
      "source": "apache",
      "extensions": ["m3u"]
    },
    "audio/x-ms-wax": {
      "source": "apache",
      "extensions": ["wax"]
    },
    "audio/x-ms-wma": {
      "source": "apache",
      "extensions": ["wma"]
    },
    "audio/x-pn-realaudio": {
      "source": "apache",
      "extensions": ["ram","ra"]
    },
    "audio/x-pn-realaudio-plugin": {
      "source": "apache",
      "extensions": ["rmp"]
    },
    "audio/x-tta": {
      "source": "apache"
    },
    "audio/x-wav": {
      "source": "apache",
      "extensions": ["wav"]
    },
    "audio/xm": {
      "source": "apache",
      "extensions": ["xm"]
    },
    "chemical/x-cdx": {
      "source": "apache",
      "extensions": ["cdx"]
    },
    "chemical/x-cif": {
      "source": "apache",
      "extensions": ["cif"]
    },
    "chemical/x-cmdf": {
      "source": "apache",
      "extensions": ["cmdf"]
    },
    "chemical/x-cml": {
      "source": "apache",
      "extensions": ["cml"]
    },
    "chemical/x-csml": {
      "source": "apache",
      "extensions": ["csml"]
    },
    "chemical/x-pdb": {
      "source": "apache"
    },
    "chemical/x-xyz": {
      "source": "apache",
      "extensions": ["xyz"]
    },
    "font/opentype": {
      "compressible": true,
      "extensions": ["otf"]
    },
    "image/bmp": {
      "source": "apache",
      "compressible": true,
      "extensions": ["bmp"]
    },
    "image/cgm": {
      "source": "iana",
      "extensions": ["cgm"]
    },
    "image/fits": {
      "source": "iana"
    },
    "image/g3fax": {
      "source": "iana",
      "extensions": ["g3"]
    },
    "image/gif": {
      "source": "iana",
      "compressible": false,
      "extensions": ["gif"]
    },
    "image/ief": {
      "source": "iana",
      "extensions": ["ief"]
    },
    "image/jp2": {
      "source": "iana"
    },
    "image/jpeg": {
      "source": "iana",
      "compressible": false,
      "extensions": ["jpeg","jpg","jpe"]
    },
    "image/jpm": {
      "source": "iana"
    },
    "image/jpx": {
      "source": "iana"
    },
    "image/ktx": {
      "source": "iana",
      "extensions": ["ktx"]
    },
    "image/naplps": {
      "source": "iana"
    },
    "image/pjpeg": {
      "compressible": false
    },
    "image/png": {
      "source": "iana",
      "compressible": false,
      "extensions": ["png"]
    },
    "image/prs.btif": {
      "source": "iana",
      "extensions": ["btif"]
    },
    "image/prs.pti": {
      "source": "iana"
    },
    "image/pwg-raster": {
      "source": "iana"
    },
    "image/sgi": {
      "source": "apache",
      "extensions": ["sgi"]
    },
    "image/svg+xml": {
      "source": "iana",
      "compressible": true,
      "extensions": ["svg","svgz"]
    },
    "image/t38": {
      "source": "iana"
    },
    "image/tiff": {
      "source": "iana",
      "compressible": false,
      "extensions": ["tiff","tif"]
    },
    "image/tiff-fx": {
      "source": "iana"
    },
    "image/vnd.adobe.photoshop": {
      "source": "iana",
      "compressible": true,
      "extensions": ["psd"]
    },
    "image/vnd.airzip.accelerator.azv": {
      "source": "iana"
    },
    "image/vnd.cns.inf2": {
      "source": "iana"
    },
    "image/vnd.dece.graphic": {
      "source": "iana",
      "extensions": ["uvi","uvvi","uvg","uvvg"]
    },
    "image/vnd.djvu": {
      "source": "iana",
      "extensions": ["djvu","djv"]
    },
    "image/vnd.dvb.subtitle": {
      "source": "iana",
      "extensions": ["sub"]
    },
    "image/vnd.dwg": {
      "source": "iana",
      "extensions": ["dwg"]
    },
    "image/vnd.dxf": {
      "source": "iana",
      "extensions": ["dxf"]
    },
    "image/vnd.fastbidsheet": {
      "source": "iana",
      "extensions": ["fbs"]
    },
    "image/vnd.fpx": {
      "source": "iana",
      "extensions": ["fpx"]
    },
    "image/vnd.fst": {
      "source": "iana",
      "extensions": ["fst"]
    },
    "image/vnd.fujixerox.edmics-mmr": {
      "source": "iana",
      "extensions": ["mmr"]
    },
    "image/vnd.fujixerox.edmics-rlc": {
      "source": "iana",
      "extensions": ["rlc"]
    },
    "image/vnd.globalgraphics.pgb": {
      "source": "iana"
    },
    "image/vnd.microsoft.icon": {
      "source": "iana"
    },
    "image/vnd.mix": {
      "source": "iana"
    },
    "image/vnd.ms-modi": {
      "source": "iana",
      "extensions": ["mdi"]
    },
    "image/vnd.ms-photo": {
      "source": "apache",
      "extensions": ["wdp"]
    },
    "image/vnd.net-fpx": {
      "source": "iana",
      "extensions": ["npx"]
    },
    "image/vnd.radiance": {
      "source": "iana"
    },
    "image/vnd.sealed.png": {
      "source": "iana"
    },
    "image/vnd.sealedmedia.softseal.gif": {
      "source": "iana"
    },
    "image/vnd.sealedmedia.softseal.jpg": {
      "source": "iana"
    },
    "image/vnd.svf": {
      "source": "iana"
    },
    "image/vnd.tencent.tap": {
      "source": "iana"
    },
    "image/vnd.valve.source.texture": {
      "source": "iana"
    },
    "image/vnd.wap.wbmp": {
      "source": "iana",
      "extensions": ["wbmp"]
    },
    "image/vnd.xiff": {
      "source": "iana",
      "extensions": ["xif"]
    },
    "image/vnd.zbrush.pcx": {
      "source": "iana"
    },
    "image/webp": {
      "source": "apache",
      "extensions": ["webp"]
    },
    "image/x-3ds": {
      "source": "apache",
      "extensions": ["3ds"]
    },
    "image/x-cmu-raster": {
      "source": "apache",
      "extensions": ["ras"]
    },
    "image/x-cmx": {
      "source": "apache",
      "extensions": ["cmx"]
    },
    "image/x-freehand": {
      "source": "apache",
      "extensions": ["fh","fhc","fh4","fh5","fh7"]
    },
    "image/x-icon": {
      "source": "apache",
      "compressible": true,
      "extensions": ["ico"]
    },
    "image/x-mrsid-image": {
      "source": "apache",
      "extensions": ["sid"]
    },
    "image/x-ms-bmp": {
      "compressible": true,
      "extensions": ["bmp"]
    },
    "image/x-pcx": {
      "source": "apache",
      "extensions": ["pcx"]
    },
    "image/x-pict": {
      "source": "apache",
      "extensions": ["pic","pct"]
    },
    "image/x-portable-anymap": {
      "source": "apache",
      "extensions": ["pnm"]
    },
    "image/x-portable-bitmap": {
      "source": "apache",
      "extensions": ["pbm"]
    },
    "image/x-portable-graymap": {
      "source": "apache",
      "extensions": ["pgm"]
    },
    "image/x-portable-pixmap": {
      "source": "apache",
      "extensions": ["ppm"]
    },
    "image/x-rgb": {
      "source": "apache",
      "extensions": ["rgb"]
    },
    "image/x-tga": {
      "source": "apache",
      "extensions": ["tga"]
    },
    "image/x-xbitmap": {
      "source": "apache",
      "extensions": ["xbm"]
    },
    "image/x-xcf": {
      "compressible": false
    },
    "image/x-xpixmap": {
      "source": "apache",
      "extensions": ["xpm"]
    },
    "image/x-xwindowdump": {
      "source": "apache",
      "extensions": ["xwd"]
    },
    "message/cpim": {
      "source": "iana"
    },
    "message/delivery-status": {
      "source": "iana"
    },
    "message/disposition-notification": {
      "source": "iana"
    },
    "message/external-body": {
      "source": "iana"
    },
    "message/feedback-report": {
      "source": "iana"
    },
    "message/global": {
      "source": "iana"
    },
    "message/global-delivery-status": {
      "source": "iana"
    },
    "message/global-disposition-notification": {
      "source": "iana"
    },
    "message/global-headers": {
      "source": "iana"
    },
    "message/http": {
      "source": "iana",
      "compressible": false
    },
    "message/imdn+xml": {
      "source": "iana",
      "compressible": true
    },
    "message/news": {
      "source": "iana"
    },
    "message/partial": {
      "source": "iana",
      "compressible": false
    },
    "message/rfc822": {
      "source": "iana",
      "compressible": true,
      "extensions": ["eml","mime"]
    },
    "message/s-http": {
      "source": "iana"
    },
    "message/sip": {
      "source": "iana"
    },
    "message/sipfrag": {
      "source": "iana"
    },
    "message/tracking-status": {
      "source": "iana"
    },
    "message/vnd.si.simp": {
      "source": "iana"
    },
    "message/vnd.wfa.wsc": {
      "source": "iana"
    },
    "model/iges": {
      "source": "iana",
      "compressible": false,
      "extensions": ["igs","iges"]
    },
    "model/mesh": {
      "source": "iana",
      "compressible": false,
      "extensions": ["msh","mesh","silo"]
    },
    "model/vnd.collada+xml": {
      "source": "iana",
      "extensions": ["dae"]
    },
    "model/vnd.dwf": {
      "source": "iana",
      "extensions": ["dwf"]
    },
    "model/vnd.flatland.3dml": {
      "source": "iana"
    },
    "model/vnd.gdl": {
      "source": "iana",
      "extensions": ["gdl"]
    },
    "model/vnd.gs-gdl": {
      "source": "apache"
    },
    "model/vnd.gs.gdl": {
      "source": "iana"
    },
    "model/vnd.gtw": {
      "source": "iana",
      "extensions": ["gtw"]
    },
    "model/vnd.moml+xml": {
      "source": "iana"
    },
    "model/vnd.mts": {
      "source": "iana",
      "extensions": ["mts"]
    },
    "model/vnd.opengex": {
      "source": "iana"
    },
    "model/vnd.parasolid.transmit.binary": {
      "source": "iana"
    },
    "model/vnd.parasolid.transmit.text": {
      "source": "iana"
    },
    "model/vnd.valve.source.compiled-map": {
      "source": "iana"
    },
    "model/vnd.vtu": {
      "source": "iana",
      "extensions": ["vtu"]
    },
    "model/vrml": {
      "source": "iana",
      "compressible": false,
      "extensions": ["wrl","vrml"]
    },
    "model/x3d+binary": {
      "source": "apache",
      "compressible": false,
      "extensions": ["x3db","x3dbz"]
    },
    "model/x3d+fastinfoset": {
      "source": "iana"
    },
    "model/x3d+vrml": {
      "source": "apache",
      "compressible": false,
      "extensions": ["x3dv","x3dvz"]
    },
    "model/x3d+xml": {
      "source": "iana",
      "compressible": true,
      "extensions": ["x3d","x3dz"]
    },
    "model/x3d-vrml": {
      "source": "iana"
    },
    "multipart/alternative": {
      "source": "iana",
      "compressible": false
    },
    "multipart/appledouble": {
      "source": "iana"
    },
    "multipart/byteranges": {
      "source": "iana"
    },
    "multipart/digest": {
      "source": "iana"
    },
    "multipart/encrypted": {
      "source": "iana",
      "compressible": false
    },
    "multipart/form-data": {
      "source": "iana",
      "compressible": false
    },
    "multipart/header-set": {
      "source": "iana"
    },
    "multipart/mixed": {
      "source": "iana",
      "compressible": false
    },
    "multipart/parallel": {
      "source": "iana"
    },
    "multipart/related": {
      "source": "iana",
      "compressible": false
    },
    "multipart/report": {
      "source": "iana"
    },
    "multipart/signed": {
      "source": "iana",
      "compressible": false
    },
    "multipart/voice-message": {
      "source": "iana"
    },
    "multipart/x-mixed-replace": {
      "source": "iana"
    },
    "text/1d-interleaved-parityfec": {
      "source": "iana"
    },
    "text/cache-manifest": {
      "source": "iana",
      "compressible": true,
      "extensions": ["appcache","manifest"]
    },
    "text/calendar": {
      "source": "iana",
      "extensions": ["ics","ifb"]
    },
    "text/calender": {
      "compressible": true
    },
    "text/cmd": {
      "compressible": true
    },
    "text/coffeescript": {
      "extensions": ["coffee","litcoffee"]
    },
    "text/css": {
      "source": "iana",
      "compressible": true,
      "extensions": ["css"]
    },
    "text/csv": {
      "source": "iana",
      "compressible": true,
      "extensions": ["csv"]
    },
    "text/csv-schema": {
      "source": "iana"
    },
    "text/directory": {
      "source": "iana"
    },
    "text/dns": {
      "source": "iana"
    },
    "text/ecmascript": {
      "source": "iana"
    },
    "text/encaprtp": {
      "source": "iana"
    },
    "text/enriched": {
      "source": "iana"
    },
    "text/fwdred": {
      "source": "iana"
    },
    "text/grammar-ref-list": {
      "source": "iana"
    },
    "text/hjson": {
      "extensions": ["hjson"]
    },
    "text/html": {
      "source": "iana",
      "compressible": true,
      "extensions": ["html","htm"]
    },
    "text/jade": {
      "extensions": ["jade"]
    },
    "text/javascript": {
      "source": "iana",
      "compressible": true
    },
    "text/jcr-cnd": {
      "source": "iana"
    },
    "text/jsx": {
      "compressible": true,
      "extensions": ["jsx"]
    },
    "text/less": {
      "extensions": ["less"]
    },
    "text/markdown": {
      "source": "iana"
    },
    "text/mizar": {
      "source": "iana"
    },
    "text/n3": {
      "source": "iana",
      "compressible": true,
      "extensions": ["n3"]
    },
    "text/parameters": {
      "source": "iana"
    },
    "text/parityfec": {
      "source": "iana"
    },
    "text/plain": {
      "source": "iana",
      "compressible": true,
      "extensions": ["txt","text","conf","def","list","log","in","ini"]
    },
    "text/provenance-notation": {
      "source": "iana"
    },
    "text/prs.fallenstein.rst": {
      "source": "iana"
    },
    "text/prs.lines.tag": {
      "source": "iana",
      "extensions": ["dsc"]
    },
    "text/raptorfec": {
      "source": "iana"
    },
    "text/red": {
      "source": "iana"
    },
    "text/rfc822-headers": {
      "source": "iana"
    },
    "text/richtext": {
      "source": "iana",
      "compressible": true,
      "extensions": ["rtx"]
    },
    "text/rtf": {
      "source": "iana",
      "compressible": true,
      "extensions": ["rtf"]
    },
    "text/rtp-enc-aescm128": {
      "source": "iana"
    },
    "text/rtploopback": {
      "source": "iana"
    },
    "text/rtx": {
      "source": "iana"
    },
    "text/sgml": {
      "source": "iana",
      "extensions": ["sgml","sgm"]
    },
    "text/stylus": {
      "extensions": ["stylus","styl"]
    },
    "text/t140": {
      "source": "iana"
    },
    "text/tab-separated-values": {
      "source": "iana",
      "compressible": true,
      "extensions": ["tsv"]
    },
    "text/troff": {
      "source": "iana",
      "extensions": ["t","tr","roff","man","me","ms"]
    },
    "text/turtle": {
      "source": "iana",
      "extensions": ["ttl"]
    },
    "text/ulpfec": {
      "source": "iana"
    },
    "text/uri-list": {
      "source": "iana",
      "compressible": true,
      "extensions": ["uri","uris","urls"]
    },
    "text/vcard": {
      "source": "iana",
      "compressible": true,
      "extensions": ["vcard"]
    },
    "text/vnd.a": {
      "source": "iana"
    },
    "text/vnd.abc": {
      "source": "iana"
    },
    "text/vnd.curl": {
      "source": "iana",
      "extensions": ["curl"]
    },
    "text/vnd.curl.dcurl": {
      "source": "apache",
      "extensions": ["dcurl"]
    },
    "text/vnd.curl.mcurl": {
      "source": "apache",
      "extensions": ["mcurl"]
    },
    "text/vnd.curl.scurl": {
      "source": "apache",
      "extensions": ["scurl"]
    },
    "text/vnd.debian.copyright": {
      "source": "iana"
    },
    "text/vnd.dmclientscript": {
      "source": "iana"
    },
    "text/vnd.dvb.subtitle": {
      "source": "iana",
      "extensions": ["sub"]
    },
    "text/vnd.esmertec.theme-descriptor": {
      "source": "iana"
    },
    "text/vnd.fly": {
      "source": "iana",
      "extensions": ["fly"]
    },
    "text/vnd.fmi.flexstor": {
      "source": "iana",
      "extensions": ["flx"]
    },
    "text/vnd.graphviz": {
      "source": "iana",
      "extensions": ["gv"]
    },
    "text/vnd.in3d.3dml": {
      "source": "iana",
      "extensions": ["3dml"]
    },
    "text/vnd.in3d.spot": {
      "source": "iana",
      "extensions": ["spot"]
    },
    "text/vnd.iptc.newsml": {
      "source": "iana"
    },
    "text/vnd.iptc.nitf": {
      "source": "iana"
    },
    "text/vnd.latex-z": {
      "source": "iana"
    },
    "text/vnd.motorola.reflex": {
      "source": "iana"
    },
    "text/vnd.ms-mediapackage": {
      "source": "iana"
    },
    "text/vnd.net2phone.commcenter.command": {
      "source": "iana"
    },
    "text/vnd.radisys.msml-basic-layout": {
      "source": "iana"
    },
    "text/vnd.si.uricatalogue": {
      "source": "iana"
    },
    "text/vnd.sun.j2me.app-descriptor": {
      "source": "iana",
      "extensions": ["jad"]
    },
    "text/vnd.trolltech.linguist": {
      "source": "iana"
    },
    "text/vnd.wap.si": {
      "source": "iana"
    },
    "text/vnd.wap.sl": {
      "source": "iana"
    },
    "text/vnd.wap.wml": {
      "source": "iana",
      "extensions": ["wml"]
    },
    "text/vnd.wap.wmlscript": {
      "source": "iana",
      "extensions": ["wmls"]
    },
    "text/vtt": {
      "charset": "UTF-8",
      "compressible": true,
      "extensions": ["vtt"]
    },
    "text/x-asm": {
      "source": "apache",
      "extensions": ["s","asm"]
    },
    "text/x-c": {
      "source": "apache",
      "extensions": ["c","cc","cxx","cpp","h","hh","dic"]
    },
    "text/x-component": {
      "extensions": ["htc"]
    },
    "text/x-fortran": {
      "source": "apache",
      "extensions": ["f","for","f77","f90"]
    },
    "text/x-gwt-rpc": {
      "compressible": true
    },
    "text/x-handlebars-template": {
      "extensions": ["hbs"]
    },
    "text/x-java-source": {
      "source": "apache",
      "extensions": ["java"]
    },
    "text/x-jquery-tmpl": {
      "compressible": true
    },
    "text/x-lua": {
      "extensions": ["lua"]
    },
    "text/x-markdown": {
      "compressible": true,
      "extensions": ["markdown","md","mkd"]
    },
    "text/x-nfo": {
      "source": "apache",
      "extensions": ["nfo"]
    },
    "text/x-opml": {
      "source": "apache",
      "extensions": ["opml"]
    },
    "text/x-pascal": {
      "source": "apache",
      "extensions": ["p","pas"]
    },
    "text/x-sass": {
      "extensions": ["sass"]
    },
    "text/x-scss": {
      "extensions": ["scss"]
    },
    "text/x-setext": {
      "source": "apache",
      "extensions": ["etx"]
    },
    "text/x-sfv": {
      "source": "apache",
      "extensions": ["sfv"]
    },
    "text/x-uuencode": {
      "source": "apache",
      "extensions": ["uu"]
    },
    "text/x-vcalendar": {
      "source": "apache",
      "extensions": ["vcs"]
    },
    "text/x-vcard": {
      "source": "apache",
      "extensions": ["vcf"]
    },
    "text/xml": {
      "source": "iana",
      "compressible": true
    },
    "text/xml-external-parsed-entity": {
      "source": "iana"
    },
    "text/yaml": {
      "extensions": ["yaml","yml"]
    },
    "video/1d-interleaved-parityfec": {
      "source": "apache"
    },
    "video/3gpp": {
      "source": "apache",
      "extensions": ["3gp"]
    },
    "video/3gpp-tt": {
      "source": "apache"
    },
    "video/3gpp2": {
      "source": "apache",
      "extensions": ["3g2"]
    },
    "video/bmpeg": {
      "source": "apache"
    },
    "video/bt656": {
      "source": "apache"
    },
    "video/celb": {
      "source": "apache"
    },
    "video/dv": {
      "source": "apache"
    },
    "video/h261": {
      "source": "apache",
      "extensions": ["h261"]
    },
    "video/h263": {
      "source": "apache",
      "extensions": ["h263"]
    },
    "video/h263-1998": {
      "source": "apache"
    },
    "video/h263-2000": {
      "source": "apache"
    },
    "video/h264": {
      "source": "apache",
      "extensions": ["h264"]
    },
    "video/h264-rcdo": {
      "source": "apache"
    },
    "video/h264-svc": {
      "source": "apache"
    },
    "video/jpeg": {
      "source": "apache",
      "extensions": ["jpgv"]
    },
    "video/jpeg2000": {
      "source": "apache"
    },
    "video/jpm": {
      "source": "apache",
      "extensions": ["jpm","jpgm"]
    },
    "video/mj2": {
      "source": "apache",
      "extensions": ["mj2","mjp2"]
    },
    "video/mp1s": {
      "source": "apache"
    },
    "video/mp2p": {
      "source": "apache"
    },
    "video/mp2t": {
      "source": "apache",
      "extensions": ["ts"]
    },
    "video/mp4": {
      "source": "apache",
      "compressible": false,
      "extensions": ["mp4","mp4v","mpg4"]
    },
    "video/mp4v-es": {
      "source": "apache"
    },
    "video/mpeg": {
      "source": "apache",
      "compressible": false,
      "extensions": ["mpeg","mpg","mpe","m1v","m2v"]
    },
    "video/mpeg4-generic": {
      "source": "apache"
    },
    "video/mpv": {
      "source": "apache"
    },
    "video/nv": {
      "source": "apache"
    },
    "video/ogg": {
      "source": "apache",
      "compressible": false,
      "extensions": ["ogv"]
    },
    "video/parityfec": {
      "source": "apache"
    },
    "video/pointer": {
      "source": "apache"
    },
    "video/quicktime": {
      "source": "apache",
      "compressible": false,
      "extensions": ["qt","mov"]
    },
    "video/raw": {
      "source": "apache"
    },
    "video/rtp-enc-aescm128": {
      "source": "apache"
    },
    "video/rtx": {
      "source": "apache"
    },
    "video/smpte292m": {
      "source": "apache"
    },
    "video/ulpfec": {
      "source": "apache"
    },
    "video/vc1": {
      "source": "apache"
    },
    "video/vnd.cctv": {
      "source": "apache"
    },
    "video/vnd.dece.hd": {
      "source": "apache",
      "extensions": ["uvh","uvvh"]
    },
    "video/vnd.dece.mobile": {
      "source": "apache",
      "extensions": ["uvm","uvvm"]
    },
    "video/vnd.dece.mp4": {
      "source": "apache"
    },
    "video/vnd.dece.pd": {
      "source": "apache",
      "extensions": ["uvp","uvvp"]
    },
    "video/vnd.dece.sd": {
      "source": "apache",
      "extensions": ["uvs","uvvs"]
    },
    "video/vnd.dece.video": {
      "source": "apache",
      "extensions": ["uvv","uvvv"]
    },
    "video/vnd.directv.mpeg": {
      "source": "apache"
    },
    "video/vnd.directv.mpeg-tts": {
      "source": "apache"
    },
    "video/vnd.dlna.mpeg-tts": {
      "source": "apache"
    },
    "video/vnd.dvb.file": {
      "source": "apache",
      "extensions": ["dvb"]
    },
    "video/vnd.fvt": {
      "source": "apache",
      "extensions": ["fvt"]
    },
    "video/vnd.hns.video": {
      "source": "apache"
    },
    "video/vnd.iptvforum.1dparityfec-1010": {
      "source": "apache"
    },
    "video/vnd.iptvforum.1dparityfec-2005": {
      "source": "apache"
    },
    "video/vnd.iptvforum.2dparityfec-1010": {
      "source": "apache"
    },
    "video/vnd.iptvforum.2dparityfec-2005": {
      "source": "apache"
    },
    "video/vnd.iptvforum.ttsavc": {
      "source": "apache"
    },
    "video/vnd.iptvforum.ttsmpeg2": {
      "source": "apache"
    },
    "video/vnd.motorola.video": {
      "source": "apache"
    },
    "video/vnd.motorola.videop": {
      "source": "apache"
    },
    "video/vnd.mpegurl": {
      "source": "apache",
      "extensions": ["mxu","m4u"]
    },
    "video/vnd.ms-playready.media.pyv": {
      "source": "apache",
      "extensions": ["pyv"]
    },
    "video/vnd.nokia.interleaved-multimedia": {
      "source": "apache"
    },
    "video/vnd.nokia.videovoip": {
      "source": "apache"
    },
    "video/vnd.objectvideo": {
      "source": "apache"
    },
    "video/vnd.sealed.mpeg1": {
      "source": "apache"
    },
    "video/vnd.sealed.mpeg4": {
      "source": "apache"
    },
    "video/vnd.sealed.swf": {
      "source": "apache"
    },
    "video/vnd.sealedmedia.softseal.mov": {
      "source": "apache"
    },
    "video/vnd.uvvu.mp4": {
      "source": "apache",
      "extensions": ["uvu","uvvu"]
    },
    "video/vnd.vivo": {
      "source": "apache",
      "extensions": ["viv"]
    },
    "video/webm": {
      "source": "apache",
      "compressible": false,
      "extensions": ["webm"]
    },
    "video/x-f4v": {
      "source": "apache",
      "extensions": ["f4v"]
    },
    "video/x-fli": {
      "source": "apache",
      "extensions": ["fli"]
    },
    "video/x-flv": {
      "source": "apache",
      "compressible": false,
      "extensions": ["flv"]
    },
    "video/x-m4v": {
      "source": "apache",
      "extensions": ["m4v"]
    },
    "video/x-matroska": {
      "source": "apache",
      "compressible": false,
      "extensions": ["mkv","mk3d","mks"]
    },
    "video/x-mng": {
      "source": "apache",
      "extensions": ["mng"]
    },
    "video/x-ms-asf": {
      "source": "apache",
      "extensions": ["asf","asx"]
    },
    "video/x-ms-vob": {
      "source": "apache",
      "extensions": ["vob"]
    },
    "video/x-ms-wm": {
      "source": "apache",
      "extensions": ["wm"]
    },
    "video/x-ms-wmv": {
      "source": "apache",
      "compressible": false,
      "extensions": ["wmv"]
    },
    "video/x-ms-wmx": {
      "source": "apache",
      "extensions": ["wmx"]
    },
    "video/x-ms-wvx": {
      "source": "apache",
      "extensions": ["wvx"]
    },
    "video/x-msvideo": {
      "source": "apache",
      "extensions": ["avi"]
    },
    "video/x-sgi-movie": {
      "source": "apache",
      "extensions": ["movie"]
    },
    "video/x-smv": {
      "source": "apache",
      "extensions": ["smv"]
    },
    "x-conference/x-cooltalk": {
      "source": "apache",
      "extensions": ["ice"]
    },
    "x-shader/x-fragment": {
      "compressible": true
    },
    "x-shader/x-vertex": {
      "compressible": true
    }
  }

},{}],227:[function(require,module,exports){
  module.exports=require("./db.json");


},{"./db.json":226}],228:[function(require,module,exports){
  (function(){function r(r,e,n){var t=e&&n||0,u=0;for(e=e||[],r.toLowerCase().replace(/[0-9a-f]{2}/g,function(r){16>u&&(e[t+u++]=v[r])});16>u;)e[t+u++]=0;return e}function e(r,e){var n=e||0,t=l;return t[r[n++]]+t[r[n++]]+t[r[n++]]+t[r[n++]]+"-"+t[r[n++]]+t[r[n++]]+"-"+t[r[n++]]+t[r[n++]]+"-"+t[r[n++]]+t[r[n++]]+"-"+t[r[n++]]+t[r[n++]]+t[r[n++]]+t[r[n++]]+t[r[n++]]+t[r[n++]]}function n(r,n,t){var u=n&&t||0,o=n||[];r=r||{};var a=null!=r.clockseq?r.clockseq:m,f=null!=r.msecs?r.msecs:(new Date).getTime(),i=null!=r.nsecs?r.nsecs:w+1,c=f-g+(i-w)/1e4;if(0>c&&null==r.clockseq&&(a=a+1&16383),(0>c||f>g)&&null==r.nsecs&&(i=0),i>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");g=f,w=i,m=a,f+=122192928e5;var s=(1e4*(268435455&f)+i)%4294967296;o[u++]=s>>>24&255,o[u++]=s>>>16&255,o[u++]=s>>>8&255,o[u++]=255&s;var l=f/4294967296*1e4&268435455;o[u++]=l>>>8&255,o[u++]=255&l,o[u++]=l>>>24&15|16,o[u++]=l>>>16&255,o[u++]=a>>>8|128,o[u++]=255&a;for(var v=r.node||p,d=0;6>d;d++)o[u+d]=v[d];return n?n:e(o)}function t(r,n,t){var o=n&&t||0;"string"==typeof r&&(n="binary"==r?new s(16):null,r=null),r=r||{};var a=r.random||(r.rng||u)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,n)for(var f=0;16>f;f++)n[o+f]=a[f];return n||e(a)}var u,o=this;if("function"==typeof o.require)try{var a=o.require("crypto").randomBytes;u=a&&function(){return a(16)}}catch(f){}if(!u&&o.crypto&&crypto.getRandomValues){var i=new Uint8Array(16);u=function(){return crypto.getRandomValues(i),i}}if(!u){var c=new Array(16);u=function(){for(var r,e=0;16>e;e++)0===(3&e)&&(r=4294967296*Math.random()),c[e]=r>>>((3&e)<<3)&255;return c}}for(var s="function"==typeof o.Buffer?o.Buffer:Array,l=[],v={},d=0;256>d;d++)l[d]=(d+256).toString(16).substr(1),v[l[d]]=d;var y=u(),p=[1|y[0],y[1],y[2],y[3],y[4],y[5]],m=16383&(y[6]<<8|y[7]),g=0,w=0,h=t;if(h.v1=n,h.v4=t,h.parse=r,h.unparse=e,h.BufferClass=s,"undefined"!=typeof module&&module.exports)module.exports=h;else if("function"==typeof define&&define.amd)define(function(){return h});else{var q=o.uuid;h.noConflict=function(){return o.uuid=q,h},o.uuid=h}}).call(this);


},{}],229:[function(require,module,exports){
  function sha1(r,e){return crypto.createHmac("sha1",r).update(e).digest("base64")}function rsa(r,e){return crypto.createSign("RSA-SHA1").update(e).sign(r,"base64")}function rfc3986(r){return encodeURIComponent(r).replace(/!/g,"%21").replace(/\*/g,"%2A").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/'/g,"%27")}function map(r){var e,n,a=[];for(e in r)if(n=r[e],Array.isArray(n))for(var t=0;t<n.length;t++)a.push([e,n[t]]);else a.push([e,n]);return a}function compare(r,e){return r>e?1:e>r?-1:0}function generateBase(r,e,n){var a=map(n).map(function(r){return[rfc3986(r[0]),rfc3986(r[1]||"")]}).sort(function(r,e){return compare(r[0],e[0])||compare(r[1],e[1])}).map(function(r){return r.join("=")}).join("&"),t=[rfc3986(r?r.toUpperCase():"GET"),rfc3986(e),rfc3986(a)].join("&");return t}function hmacsign(r,e,n,a,t){var c=generateBase(r,e,n),s=[a||"",t||""].map(rfc3986).join("&");return sha1(s,c)}function rsasign(r,e,n,a,t){var c=generateBase(r,e,n),s=a||"";return rsa(s,c)}function plaintext(r,e){var n=[r||"",e||""].map(rfc3986).join("&");return n}function sign(r,e,n,a,t,c){var s,i=1;switch(r){case"RSA-SHA1":s=rsasign;break;case"HMAC-SHA1":s=hmacsign;break;case"PLAINTEXT":s=plaintext,i=4;break;default:throw new Error("Signature method not supported: "+r)}return s.apply(null,[].slice.call(arguments,i))}var crypto=require("crypto"),qs=require("querystring");exports.hmacsign=hmacsign,exports.rsasign=rsasign,exports.plaintext=plaintext,exports.sign=sign,exports.rfc3986=rfc3986;


},{"crypto":82,"querystring":99}],230:[function(require,module,exports){
  module.exports=require("./lib/");


},{"./lib/":231}],231:[function(require,module,exports){
  var Stringify=require("./stringify"),Parse=require("./parse"),internals={};module.exports={stringify:Stringify,parse:Parse};


},{"./parse":232,"./stringify":233}],232:[function(require,module,exports){
  var Utils=require("./utils"),internals={delimiter:"&",depth:5,arrayLimit:20,parameterLimit:1e3};internals.parseValues=function(e,r){for(var t={},i=e.split(r.delimiter,r.parameterLimit===1/0?void 0:r.parameterLimit),a=0,n=i.length;n>a;++a){var s=i[a],l=-1===s.indexOf("]=")?s.indexOf("="):s.indexOf("]=")+1;if(-1===l)t[Utils.decode(s)]="";else{var p=Utils.decode(s.slice(0,l)),m=Utils.decode(s.slice(l+1));t.hasOwnProperty(p)?t[p]=[].concat(t[p]).concat(m):t[p]=m}}return t},internals.parseObject=function(e,r,t){if(!e.length)return r;var i=e.shift(),a={};if("[]"===i)a=[],a=a.concat(internals.parseObject(e,r,t));else{var n="["===i[0]&&"]"===i[i.length-1]?i.slice(1,i.length-1):i,s=parseInt(n,10),l=""+s;!isNaN(s)&&i!==n&&l===n&&s>=0&&s<=t.arrayLimit?(a=[],a[s]=internals.parseObject(e,r,t)):a[n]=internals.parseObject(e,r,t)}return a},internals.parseKeys=function(e,r,t){if(e){var i=/^([^\[\]]*)/,a=/(\[[^\[\]]*\])/g,n=i.exec(e);if(!Object.prototype.hasOwnProperty(n[1])){var s=[];n[1]&&s.push(n[1]);for(var l=0;null!==(n=a.exec(e))&&l<t.depth;)++l,Object.prototype.hasOwnProperty(n[1].replace(/\[|\]/g,""))||s.push(n[1]);return n&&s.push("["+e.slice(n.index)+"]"),internals.parseObject(s,r,t)}}},module.exports=function(e,r){if(""===e||null===e||"undefined"==typeof e)return{};r=r||{},r.delimiter="string"==typeof r.delimiter||Utils.isRegExp(r.delimiter)?r.delimiter:internals.delimiter,r.depth="number"==typeof r.depth?r.depth:internals.depth,r.arrayLimit="number"==typeof r.arrayLimit?r.arrayLimit:internals.arrayLimit,r.parameterLimit="number"==typeof r.parameterLimit?r.parameterLimit:internals.parameterLimit;for(var t="string"==typeof e?internals.parseValues(e,r):e,i={},a=Object.keys(t),n=0,s=a.length;s>n;++n){var l=a[n],p=internals.parseKeys(l,t[l],r);i=Utils.merge(i,p)}return Utils.compact(i)};


},{"./utils":234}],233:[function(require,module,exports){
  var Utils=require("./utils"),internals={delimiter:"&",indices:!0};internals.stringify=function(e,n,i){if(Utils.isBuffer(e)?e=e.toString():e instanceof Date?e=e.toISOString():null===e&&(e=""),"string"==typeof e||"number"==typeof e||"boolean"==typeof e)return[encodeURIComponent(n)+"="+encodeURIComponent(e)];var t=[];if("undefined"==typeof e)return t;for(var r=Object.keys(e),o=0,s=r.length;s>o;++o){var a=r[o];t=!i.indices&&Array.isArray(e)?t.concat(internals.stringify(e[a],n,i)):t.concat(internals.stringify(e[a],n+"["+a+"]",i))}return t},module.exports=function(e,n){n=n||{};var i="undefined"==typeof n.delimiter?internals.delimiter:n.delimiter;n.indices="boolean"==typeof n.indices?n.indices:internals.indices;var t=[];if("object"!=typeof e||null===e)return"";for(var r=Object.keys(e),o=0,s=r.length;s>o;++o){var a=r[o];t=t.concat(internals.stringify(e[a],a,n))}return t.join(i)};


},{"./utils":234}],234:[function(require,module,exports){
  var internals={};exports.arrayToObject=function(r){for(var e={},t=0,n=r.length;n>t;++t)"undefined"!=typeof r[t]&&(e[t]=r[t]);return e},exports.merge=function(r,e){if(!e)return r;if("object"!=typeof e)return Array.isArray(r)?r.push(e):r[e]=!0,r;if("object"!=typeof r)return r=[r].concat(e);Array.isArray(r)&&!Array.isArray(e)&&(r=exports.arrayToObject(r));for(var t=Object.keys(e),n=0,o=t.length;o>n;++n){var c=t[n],u=e[c];r[c]?r[c]=exports.merge(r[c],u):r[c]=u}return r},exports.decode=function(r){try{return decodeURIComponent(r.replace(/\+/g," "))}catch(e){return r}},exports.compact=function(r,e){if("object"!=typeof r||null===r)return r;e=e||[];var t=e.indexOf(r);if(-1!==t)return e[t];if(e.push(r),Array.isArray(r)){for(var n=[],o=0,c=r.length;c>o;++o)"undefined"!=typeof r[o]&&n.push(r[o]);return n}var u=Object.keys(r);for(o=0,c=u.length;c>o;++o){var f=u[o];r[f]=exports.compact(r[f],e)}return r},exports.isRegExp=function(r){return"[object RegExp]"===Object.prototype.toString.call(r)},exports.isBuffer=function(r){return null===r||"undefined"==typeof r?!1:!!(r.constructor&&r.constructor.isBuffer&&r.constructor.isBuffer(r))};


},{}],235:[function(require,module,exports){
  (function (Buffer){
    function StringStream(t,e){return this instanceof StringStream?(Stream.call(this),null==t&&(t="utf8"),this.readable=this.writable=!0,this.paused=!1,this.toEncoding=null==e?t:e,this.fromEncoding=null==e?"":t,void(this.decoder=new AlignedStringDecoder(this.toEncoding))):new StringStream(t,e)}function AlignedStringDecoder(t){switch(StringDecoder.call(this,t),this.encoding){case"base64":this.write=alignedWrite,this.alignedBuffer=new Buffer(3),this.alignedBytes=0}}function alignedWrite(t){var e=(this.alignedBytes+t.length)%this.alignedBuffer.length;if(!e&&!this.alignedBytes)return t.toString(this.encoding);var i=new Buffer(this.alignedBytes+t.length-e);return this.alignedBuffer.copy(i,0,0,this.alignedBytes),t.copy(i,this.alignedBytes,0,t.length-e),t.copy(this.alignedBuffer,0,t.length-e,t.length),this.alignedBytes=e,i.toString(this.encoding)}var util=require("util"),Stream=require("stream"),StringDecoder=require("string_decoder").StringDecoder;module.exports=StringStream,module.exports.AlignedStringDecoder=AlignedStringDecoder,util.inherits(StringStream,Stream),StringStream.prototype.write=function(t){if(!this.writable){var e=new Error("stream not writable");return e.code="EPIPE",this.emit("error",e),!1}this.fromEncoding&&(Buffer.isBuffer(t)&&(t=t.toString()),t=new Buffer(t,this.fromEncoding));var i=this.decoder.write(t);return i.length&&this.emit("data",i),!this.paused},StringStream.prototype.flush=function(){if(this.decoder.flush){var t=this.decoder.flush();t.length&&this.emit("data",t)}},StringStream.prototype.end=function(){(this.writable||this.readable)&&(this.flush(),this.emit("end"),this.writable=this.readable=!1,this.destroy())},StringStream.prototype.destroy=function(){this.decoder=null,this.writable=this.readable=!1,this.emit("close")},StringStream.prototype.pause=function(){this.paused=!0},StringStream.prototype.resume=function(){this.paused&&this.emit("drain"),this.paused=!1},util.inherits(AlignedStringDecoder,StringDecoder),AlignedStringDecoder.prototype.flush=function(){if(!this.alignedBuffer||!this.alignedBytes)return"";var t=this.alignedBuffer.toString(this.encoding,0,this.alignedBytes);return this.alignedBytes=0,t};


  }).call(this,require("buffer").Buffer)
},{"buffer":78,"stream":101,"string_decoder":107,"util":109}],236:[function(require,module,exports){
  "use strict";function parseDate(e){if(e){var t=e.split(DATE_DELIM);if(t){for(var o=null,r=null,i=null,n=null,a=null,s=null,u=0;u<t.length;u++){var l=t[u].trim();if(l.length){var p;if(null===i&&(p=TIME.exec(l))){if(o=parseInt(p[1],10),r=parseInt(p[2],10),i=parseInt(p[3],10),o>23||r>59||i>59)return}else if(null===n&&(p=DAY_OF_MONTH.exec(l))){if(n=parseInt(p,10),1>n||n>31)return}else if(null===a&&(p=MONTH.exec(l)))a=MONTH_TO_NUM[p[1].toLowerCase()];else if(null===s&&(p=YEAR.exec(l),p&&(s=parseInt(p[0],10),s>=70&&99>=s?s+=1900:s>=0&&69>=s&&(s+=2e3),1601>s)))return}}if(null!==i&&null!==n&&null!==a&&null!==s)return new Date(Date.UTC(s,a,n,o,r,i))}}}function formatDate(e){var t=e.getUTCDate();t=t>=10?t:"0"+t;var o=e.getUTCHours();o=o>=10?o:"0"+o;var r=e.getUTCMinutes();r=r>=10?r:"0"+r;var i=e.getUTCSeconds();return i=i>=10?i:"0"+i,NUM_TO_DAY[e.getUTCDay()]+", "+t+" "+NUM_TO_MONTH[e.getUTCMonth()]+" "+e.getUTCFullYear()+" "+o+":"+r+":"+i+" GMT"}function canonicalDomain(e){return null==e?null:(e=e.trim().replace(/^\./,""),punycode&&/[^\u0001-\u007f]/.test(e)&&(e=punycode.toASCII(e)),e.toLowerCase())}function domainMatch(e,t,o){if(null==e||null==t)return null;if(o!==!1&&(e=canonicalDomain(e),t=canonicalDomain(t)),e==t)return!0;if(net.isIP(e))return!1;var r=e.indexOf(t);return 0>=r?!1:e.length!==t.length+r?!1:"."!==e.substr(r-1,1)?!1:!0}function defaultPath(e){if(!e||"/"!==e.substr(0,1))return"/";if("/"===e)return e;var t=e.lastIndexOf("/");return 0===t?"/":e.slice(0,t)}function parse(e){e=e.trim();var t=TRAILING_SEMICOLON.exec(e);t&&(e=e.slice(0,t.index));var o=e.indexOf(";"),r=COOKIE_PAIR.exec(-1===o?e:e.substr(0,o));if(r){var i=new Cookie;if(i.key=r[1].trim(),i.value=r[2].trim(),-1===o)return i;var n=e.slice(o).replace(/^\s*;\s*/,"").trim();if(0===n.length)return i;for(var a=n.split(/\s*;\s*/);a.length;){var s,u,l=a.shift(),p=l.indexOf("=");switch(-1===p?(s=l,u=null):(s=l.substr(0,p),u=l.substr(p+1)),s=s.trim().toLowerCase(),u&&(u=u.trim()),s){case"expires":if(u){var c=parseDate(u);c&&(i.expires=c)}break;case"max-age":if(u&&/^-?[0-9]+$/.test(u)){var f=parseInt(u,10);i.setMaxAge(f)}break;case"domain":if(u){var h=u.trim().replace(/^\./,"");h&&(i.domain=h.toLowerCase())}break;case"path":i.path=u&&"/"===u[0]?u:null;break;case"secure":i.secure=!0;break;case"httponly":i.httpOnly=!0;break;default:i.extensions=i.extensions||[],i.extensions.push(l)}}return i}}function jsonParse(e){var t;try{t=JSON.parse(e)}catch(o){return o}return t}function fromJSON(e){if(!e)return null;var t;if("string"==typeof e){if(t=jsonParse(e),t instanceof Error)return null}else t=e;for(var o=new Cookie,r=0;r<Cookie.serializableProperties.length;r++){var i=Cookie.serializableProperties[r];void 0!==t[i]&&t[i]!==Cookie.prototype[i]&&("expires"===i||"creation"===i||"lastAccessed"===i?null===t[i]?o[i]=null:o[i]="Infinity"==t[i]?"Infinity":new Date(t[i]):o[i]=t[i])}return o}function cookieCompare(e,t){var o=0,r=e.path?e.path.length:0,i=t.path?t.path.length:0;if(o=i-r,0!==o)return o;var n=e.creation?e.creation.getTime():MAX_TIME,a=t.creation?t.creation.getTime():MAX_TIME;return o=n-a,0!==o?o:o=e.creationIndex-t.creationIndex}function permutePath(e){if("/"===e)return["/"];e.lastIndexOf("/")===e.length-1&&(e=e.substr(0,e.length-1));for(var t=[e];e.length>1;){var o=e.lastIndexOf("/");if(0===o)break;e=e.substr(0,o),t.push(e)}return t.push("/"),t}function getCookieContext(e){if(e instanceof Object)return e;try{e=decodeURI(e)}catch(t){}return urlParse(e)}function Cookie(e){e=e||{},Object.keys(e).forEach(function(t){Cookie.prototype.hasOwnProperty(t)&&Cookie.prototype[t]!==e[t]&&"_"!==t.substr(0,1)&&(this[t]=e[t])},this),this.creation=this.creation||new Date,Object.defineProperty(this,"creationIndex",{configurable:!1,enumerable:!1,writable:!0,value:++Cookie.cookiesCreated})}function CookieJar(e,t){null!=t&&(this.rejectPublicSuffixes=t),e||(e=new MemoryCookieStore),this.store=e}function syncWrap(e){return function(){if(!this.store.synchronous)throw new Error("CookieJar store is not synchronous; use async API instead.");var t,o,r=Array.prototype.slice.call(arguments);if(r.push(function(e,r){t=e,o=r}),this[e].apply(this,r),t)throw t;return o}}var net=require("net"),urlParse=require("url").parse,pubsuffix=require("./pubsuffix"),Store=require("./store").Store,MemoryCookieStore=require("./memstore").MemoryCookieStore,pathMatch=require("./pathMatch").pathMatch,VERSION=require("../package.json").version,punycode;try{punycode=require("punycode")}catch(e){0}var DATE_DELIM=/[\x09\x20-\x2F\x3B-\x40\x5B-\x60\x7B-\x7E]/,COOKIE_OCTET=/[\x21\x23-\x2B\x2D-\x3A\x3C-\x5B\x5D-\x7E]/,COOKIE_OCTETS=new RegExp("^"+COOKIE_OCTET.source+"$"),COOKIE_PAIR=/^([^=;]+)\s*=\s*(("?)[^\n\r\0]*\3)/,PATH_VALUE=/[\x20-\x3A\x3C-\x7E]+/,TRAILING_SEMICOLON=/;+$/,DAY_OF_MONTH=/^(\d{1,2})[^\d]*$/,TIME=/^(\d{1,2})[^\d]*:(\d{1,2})[^\d]*:(\d{1,2})[^\d]*$/,MONTH=/^(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)/i,MONTH_TO_NUM={jan:0,feb:1,mar:2,apr:3,may:4,jun:5,jul:6,aug:7,sep:8,oct:9,nov:10,dec:11},NUM_TO_MONTH=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],NUM_TO_DAY=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],YEAR=/^(\d{2}|\d{4})$/,MAX_TIME=2147483647e3,MIN_TIME=0;Cookie.cookiesCreated=0,Cookie.parse=parse,Cookie.fromJSON=fromJSON,Cookie.prototype.key="",Cookie.prototype.value="",Cookie.prototype.expires="Infinity",Cookie.prototype.maxAge=null,Cookie.prototype.domain=null,Cookie.prototype.path=null,Cookie.prototype.secure=!1,Cookie.prototype.httpOnly=!1,Cookie.prototype.extensions=null,Cookie.prototype.hostOnly=null,Cookie.prototype.pathIsDefault=null,Cookie.prototype.creation=null,Cookie.prototype.lastAccessed=null,Object.defineProperty(Cookie.prototype,"creationIndex",{configurable:!0,enumerable:!1,writable:!0,value:0}),Cookie.serializableProperties=Object.keys(Cookie.prototype).filter(function(e){return!(Cookie.prototype[e]instanceof Function||"creationIndex"===e||"_"===e.substr(0,1))}),Cookie.prototype.inspect=function(){var e=Date.now();return'Cookie="'+this.toString()+"; hostOnly="+(null!=this.hostOnly?this.hostOnly:"?")+"; aAge="+(this.lastAccessed?e-this.lastAccessed.getTime()+"ms":"?")+"; cAge="+(this.creation?e-this.creation.getTime()+"ms":"?")+'"'},Cookie.prototype.toJSON=function(){for(var e={},t=Cookie.serializableProperties,o=0;o<t.length;o++){var r=t[o];this[r]!==Cookie.prototype[r]&&("expires"===r||"creation"===r||"lastAccessed"===r?null===this[r]?e[r]=null:e[r]="Infinity"==this[r]?"Infinity":this[r].toISOString():"maxAge"===r?null!==this[r]&&(e[r]=this[r]==1/0||this[r]==-(1/0)?this[r].toString():this[r]):this[r]!==Cookie.prototype[r]&&(e[r]=this[r]))}return e},Cookie.prototype.clone=function(){return fromJSON(this.toJSON())},Cookie.prototype.validate=function(){if(!COOKIE_OCTETS.test(this.value))return!1;if(!(this.expires==1/0||this.expires instanceof Date||parseDate(this.expires)))return!1;if(null!=this.maxAge&&this.maxAge<=0)return!1;if(null!=this.path&&!PATH_VALUE.test(this.path))return!1;var e=this.cdomain();if(e){if(e.match(/\.$/))return!1;var t=pubsuffix.getPublicSuffix(e);if(null==t)return!1}return!0},Cookie.prototype.setExpires=function(e){e instanceof Date?this.expires=e:this.expires=parseDate(e)||"Infinity"},Cookie.prototype.setMaxAge=function(e){e===1/0||e===-(1/0)?this.maxAge=e.toString():this.maxAge=e},Cookie.prototype.cookieString=function(){var e=this.value;return null==e&&(e=""),this.key+"="+e},Cookie.prototype.toString=function(){var e=this.cookieString();return this.expires!=1/0&&(e+=this.expires instanceof Date?"; Expires="+formatDate(this.expires):"; Expires="+this.expires),null!=this.maxAge&&this.maxAge!=1/0&&(e+="; Max-Age="+this.maxAge),this.domain&&!this.hostOnly&&(e+="; Domain="+this.domain),this.path&&(e+="; Path="+this.path),this.secure&&(e+="; Secure"),this.httpOnly&&(e+="; HttpOnly"),this.extensions&&this.extensions.forEach(function(t){e+="; "+t}),e},Cookie.prototype.TTL=function(e){if(null!=this.maxAge)return this.maxAge<=0?0:1e3*this.maxAge;var t=this.expires;return t!=1/0?(t instanceof Date||(t=parseDate(t)||1/0),t==1/0?1/0:t.getTime()-(e||Date.now())):1/0},Cookie.prototype.expiryTime=function(e){if(null!=this.maxAge){var t=e||this.creation||new Date,o=this.maxAge<=0?-(1/0):1e3*this.maxAge;return t.getTime()+o}return this.expires==1/0?1/0:this.expires.getTime()},Cookie.prototype.expiryDate=function(e){var t=this.expiryTime(e);return t==1/0?new Date(MAX_TIME):t==-(1/0)?new Date(MIN_TIME):new Date(t)},Cookie.prototype.isPersistent=function(){return null!=this.maxAge||this.expires!=1/0},Cookie.prototype.cdomain=Cookie.prototype.canonicalizedDomain=function(){return null==this.domain?null:canonicalDomain(this.domain)},CookieJar.prototype.store=null,CookieJar.prototype.rejectPublicSuffixes=!0;var CAN_BE_SYNC=[];CAN_BE_SYNC.push("setCookie"),CookieJar.prototype.setCookie=function(e,t,o,r){function i(t,i){if(t)return r(t);var n=function(t){return t?r(t):void r(null,e)};if(i){if(o.http===!1&&i.httpOnly)return t=new Error("old Cookie is HttpOnly and this isn't an HTTP API"),r(o.ignoreError?null:t);e.creation=i.creation,e.creationIndex=i.creationIndex,e.lastAccessed=u,p.updateCookie(i,e,n)}else e.creation=e.lastAccessed=u,p.putCookie(e,n)}var n,a=getCookieContext(t);o instanceof Function&&(r=o,o={});var s=canonicalDomain(a.hostname);if(e instanceof Cookie||(e=Cookie.parse(e)),!e)return n=new Error("Cookie failed to parse"),r(o.ignoreError?null:n);var u=o.now||new Date;if(this.rejectPublicSuffixes&&e.domain){var l=pubsuffix.getPublicSuffix(e.cdomain());if(null==l)return n=new Error("Cookie has domain set to a public suffix"),r(o.ignoreError?null:n)}if(e.domain){if(!domainMatch(s,e.cdomain(),!1))return n=new Error("Cookie not in this host's domain. Cookie:"+e.cdomain()+" Request:"+s),r(o.ignoreError?null:n);null==e.hostOnly&&(e.hostOnly=!1)}else e.hostOnly=!0,e.domain=s;if(e.path&&"/"===e.path[0]||(e.path=defaultPath(a.pathname),e.pathIsDefault=!0),o.http===!1&&e.httpOnly)return n=new Error("Cookie is HttpOnly and this isn't an HTTP API"),r(o.ignoreError?null:n);var p=this.store;p.updateCookie||(p.updateCookie=function(e,t,o){this.putCookie(t,o)}),p.findCookie(e.domain,e.path,e.key,i)},CAN_BE_SYNC.push("getCookies"),CookieJar.prototype.getCookies=function(e,t,o){function r(e){if(e.hostOnly){if(e.domain!=n)return!1}else if(!domainMatch(n,e.domain,!1))return!1;return c||pathMatch(a,e.path)?e.secure&&!s?!1:e.httpOnly&&!u?!1:p&&e.expiryTime()<=l?(f.removeCookie(e.domain,e.path,e.key,function(){}),!1):!0:!1}var i=getCookieContext(e);t instanceof Function&&(o=t,t={});var n=canonicalDomain(i.hostname),a=i.pathname||"/",s=t.secure;null!=s||!i.protocol||"https:"!=i.protocol&&"wss:"!=i.protocol||(s=!0);var u=t.http;null==u&&(u=!0);var l=t.now||Date.now(),p=t.expire!==!1,c=!!t.allPaths,f=this.store;f.findCookies(n,c?null:a,function(e,i){if(e)return o(e);i=i.filter(r),t.sort!==!1&&(i=i.sort(cookieCompare));var n=new Date;i.forEach(function(e){e.lastAccessed=n}),o(null,i)})},CAN_BE_SYNC.push("getCookieString"),CookieJar.prototype.getCookieString=function(){var e=Array.prototype.slice.call(arguments,0),t=e.pop(),o=function(e,o){e?t(e):t(null,o.sort(cookieCompare).map(function(e){return e.cookieString()}).join("; "))};e.push(o),this.getCookies.apply(this,e)},CAN_BE_SYNC.push("getSetCookieStrings"),CookieJar.prototype.getSetCookieStrings=function(){var e=Array.prototype.slice.call(arguments,0),t=e.pop(),o=function(e,o){e?t(e):t(null,o.map(function(e){return e.toString()}))};e.push(o),this.getCookies.apply(this,e)},CAN_BE_SYNC.push("serialize"),CookieJar.prototype.serialize=function(e){var t=this.store.constructor.name;"Object"===t&&(t=null);var o={version:"tough-cookie@"+VERSION,storeType:t,rejectPublicSuffixes:!!this.rejectPublicSuffixes,cookies:[]};return this.store.getAllCookies&&"function"==typeof this.store.getAllCookies?void this.store.getAllCookies(function(t,r){return t?e(t):(o.cookies=r.map(function(e){return e=e instanceof Cookie?e.toJSON():e,delete e.creationIndex,e}),e(null,o))}):e(new Error("store does not support getAllCookies and cannot be serialized"))},CookieJar.prototype.toJSON=function(){return this.serializeSync()},CAN_BE_SYNC.push("_importCookies"),CookieJar.prototype._importCookies=function(e,t){function o(e){if(e)return t(e);if(!i.length)return t(e,r);var n;try{n=fromJSON(i.shift())}catch(a){return t(a)}return null===n?o(null):void r.store.putCookie(n,o)}var r=this,i=e.cookies;return i&&Array.isArray(i)?void o():t(new Error("serialized jar has no cookies array"))},CookieJar.deserialize=function(e,t,o){3!==arguments.length&&(o=t,t=null);var r;if("string"==typeof e){if(r=jsonParse(e),r instanceof Error)return o(r)}else r=e;var i=new CookieJar(t,r.rejectPublicSuffixes);i._importCookies(r,function(e){return e?o(e):void o(null,i)})},CookieJar.fromJSON=CookieJar.deserializeSync,CookieJar.deserializeSync=function(e,t){var o="string"==typeof e?JSON.parse(e):e,r=new CookieJar(t,o.rejectPublicSuffixes);if(!r.store.synchronous)throw new Error("CookieJar store is not synchronous; use async API instead.");return r._importCookiesSync(o),r},CAN_BE_SYNC.push("clone"),CookieJar.prototype.clone=function(e,t){1===arguments.length&&(t=e,e=null),this.serialize(function(o,r){return o?t(o):void CookieJar.deserialize(e,r,t)})},CAN_BE_SYNC.forEach(function(e){CookieJar.prototype[e+"Sync"]=syncWrap(e)}),module.exports={CookieJar:CookieJar,Cookie:Cookie,Store:Store,MemoryCookieStore:MemoryCookieStore,parseDate:parseDate,formatDate:formatDate,parse:parse,fromJSON:fromJSON,domainMatch:domainMatch,defaultPath:defaultPath,pathMatch:pathMatch,getPublicSuffix:pubsuffix.getPublicSuffix,cookieCompare:cookieCompare,permuteDomain:require("./permuteDomain").permuteDomain,permutePath:permutePath,canonicalDomain:canonicalDomain};


},{"../package.json":242,"./memstore":237,"./pathMatch":238,"./permuteDomain":239,"./pubsuffix":240,"./store":241,"net":63,"punycode":96,"url":266}],237:[function(require,module,exports){
  "use strict";function MemoryCookieStore(){Store.call(this),this.idx={}}var Store=require("./store").Store,permuteDomain=require("./permuteDomain").permuteDomain,pathMatch=require("./pathMatch").pathMatch,util=require("util");util.inherits(MemoryCookieStore,Store),exports.MemoryCookieStore=MemoryCookieStore,MemoryCookieStore.prototype.idx=null,MemoryCookieStore.prototype.synchronous=!0,MemoryCookieStore.prototype.inspect=function(){return"{ idx: "+util.inspect(this.idx,!1,2)+" }"},MemoryCookieStore.prototype.findCookie=function(o,t,e,i){return this.idx[o]&&this.idx[o][t]?i(null,this.idx[o][t][e]||null):i(null,void 0)},MemoryCookieStore.prototype.findCookies=function(o,t,e){var i=[];if(!o)return e(null,[]);var r;r=t?function(o){Object.keys(o).forEach(function(e){if(pathMatch(t,e)){var r=o[e];for(var n in r)i.push(r[n])}})}:function(o){for(var t in o){var e=o[t];for(var r in e)i.push(e[r])}};var n=permuteDomain(o)||[o],u=this.idx;n.forEach(function(o){var t=u[o];t&&r(t)}),e(null,i)},MemoryCookieStore.prototype.putCookie=function(o,t){this.idx[o.domain]||(this.idx[o.domain]={}),this.idx[o.domain][o.path]||(this.idx[o.domain][o.path]={}),this.idx[o.domain][o.path][o.key]=o,t(null)},MemoryCookieStore.prototype.updateCookie=function(o,t,e){this.putCookie(t,e)},MemoryCookieStore.prototype.removeCookie=function(o,t,e,i){this.idx[o]&&this.idx[o][t]&&this.idx[o][t][e]&&delete this.idx[o][t][e],i(null)},MemoryCookieStore.prototype.removeCookies=function(o,t,e){return this.idx[o]&&(t?delete this.idx[o][t]:delete this.idx[o]),e(null)},MemoryCookieStore.prototype.getAllCookies=function(o){var t=[],e=this.idx,i=Object.keys(e);i.forEach(function(o){var i=Object.keys(e[o]);i.forEach(function(i){var r=Object.keys(e[o][i]);r.forEach(function(r){null!==r&&t.push(e[o][i][r])})})}),t.sort(function(o,t){return(o.creationIndex||0)-(t.creationIndex||0)}),o(null,t)};


},{"./pathMatch":238,"./permuteDomain":239,"./store":241,"util":109}],238:[function(require,module,exports){
  "use strict";function pathMatch(t,r){if(r===t)return!0;var e=t.indexOf(r);if(0===e){if("/"===r.substr(-1))return!0;if("/"===t.substr(r.length,1))return!0}return!1}exports.pathMatch=pathMatch;


},{}],239:[function(require,module,exports){
  "use strict";function permuteDomain(e){var r=pubsuffix.getPublicSuffix(e);if(!r)return null;if(r==e)return[e];for(var u=e.slice(0,-(r.length+1)),i=u.split(".").reverse(),t=r,f=[t];i.length;)t=i.shift()+"."+t,f.push(t);return f}var pubsuffix=require("./pubsuffix");exports.permuteDomain=permuteDomain;


},{"./pubsuffix":240}],240:[function(require,module,exports){
  "use strict";var punycode=require("punycode");module.exports.getPublicSuffix=function(a){if(!a)return null;if(a.match(/^\./))return null;var o=punycode.toASCII(a),i=!1;if(o!==a&&(a=o,i=!0),index[a])return null;a=a.toLowerCase();for(var n=a.split(".").reverse(),s="",e=0,m=0;m<n.length;m++){var u=n[m],t="*"+s,r=u+s;index[t]?(e=m+1,index[r]===!1&&e--):index[r]&&(e=m+1),s="."+r}if(index["*"+s])return null;if(e=e||1,n.length>e){var p=n.slice(0,e+1).reverse().join(".");return i?punycode.toUnicode(p):p}return null};var index=module.exports.index=Object.freeze({ac:!0,"com.ac":!0,"edu.ac":!0,"gov.ac":!0,"net.ac":!0,"mil.ac":!0,"org.ac":!0,ad:!0,"nom.ad":!0,ae:!0,"co.ae":!0,"net.ae":!0,"org.ae":!0,"sch.ae":!0,"ac.ae":!0,"gov.ae":!0,"mil.ae":!0,aero:!0,"accident-investigation.aero":!0,"accident-prevention.aero":!0,"aerobatic.aero":!0,"aeroclub.aero":!0,"aerodrome.aero":!0,"agents.aero":!0,"aircraft.aero":!0,"airline.aero":!0,"airport.aero":!0,"air-surveillance.aero":!0,"airtraffic.aero":!0,"air-traffic-control.aero":!0,"ambulance.aero":!0,"amusement.aero":!0,"association.aero":!0,"author.aero":!0,"ballooning.aero":!0,"broker.aero":!0,"caa.aero":!0,"cargo.aero":!0,"catering.aero":!0,"certification.aero":!0,"championship.aero":!0,"charter.aero":!0,"civilaviation.aero":!0,"club.aero":!0,"conference.aero":!0,"consultant.aero":!0,"consulting.aero":!0,"control.aero":!0,"council.aero":!0,"crew.aero":!0,"design.aero":!0,"dgca.aero":!0,"educator.aero":!0,"emergency.aero":!0,"engine.aero":!0,"engineer.aero":!0,"entertainment.aero":!0,"equipment.aero":!0,"exchange.aero":!0,"express.aero":!0,"federation.aero":!0,"flight.aero":!0,"freight.aero":!0,"fuel.aero":!0,"gliding.aero":!0,"government.aero":!0,"groundhandling.aero":!0,"group.aero":!0,"hanggliding.aero":!0,"homebuilt.aero":!0,"insurance.aero":!0,"journal.aero":!0,"journalist.aero":!0,"leasing.aero":!0,"logistics.aero":!0,"magazine.aero":!0,"maintenance.aero":!0,"marketplace.aero":!0,"media.aero":!0,"microlight.aero":!0,"modelling.aero":!0,"navigation.aero":!0,"parachuting.aero":!0,"paragliding.aero":!0,"passenger-association.aero":!0,"pilot.aero":!0,"press.aero":!0,"production.aero":!0,"recreation.aero":!0,"repbody.aero":!0,"res.aero":!0,"research.aero":!0,"rotorcraft.aero":!0,"safety.aero":!0,"scientist.aero":!0,"services.aero":!0,"show.aero":!0,"skydiving.aero":!0,"software.aero":!0,"student.aero":!0,"taxi.aero":!0,"trader.aero":!0,"trading.aero":!0,"trainer.aero":!0,"union.aero":!0,"workinggroup.aero":!0,"works.aero":!0,af:!0,"gov.af":!0,"com.af":!0,"org.af":!0,"net.af":!0,"edu.af":!0,ag:!0,"com.ag":!0,"org.ag":!0,"net.ag":!0,"co.ag":!0,"nom.ag":!0,ai:!0,"off.ai":!0,"com.ai":!0,"net.ai":!0,"org.ai":!0,al:!0,"com.al":!0,"edu.al":!0,"gov.al":!0,"mil.al":!0,"net.al":!0,"org.al":!0,am:!0,an:!0,"com.an":!0,"net.an":!0,"org.an":!0,"edu.an":!0,ao:!0,"ed.ao":!0,"gv.ao":!0,"og.ao":!0,"co.ao":!0,"pb.ao":!0,"it.ao":!0,aq:!0,ar:!0,"com.ar":!0,"edu.ar":!0,"gob.ar":!0,"gov.ar":!0,"int.ar":!0,"mil.ar":!0,"net.ar":!0,"org.ar":!0,"tur.ar":!0,arpa:!0,"e164.arpa":!0,"in-addr.arpa":!0,"ip6.arpa":!0,"iris.arpa":!0,"uri.arpa":!0,"urn.arpa":!0,as:!0,"gov.as":!0,asia:!0,at:!0,"ac.at":!0,"co.at":!0,"gv.at":!0,"or.at":!0,au:!0,"com.au":!0,"net.au":!0,"org.au":!0,"edu.au":!0,"gov.au":!0,"asn.au":!0,"id.au":!0,"info.au":!0,"conf.au":!0,"oz.au":!0,"act.au":!0,"nsw.au":!0,"nt.au":!0,"qld.au":!0,"sa.au":!0,"tas.au":!0,"vic.au":!0,"wa.au":!0,"act.edu.au":!0,"nsw.edu.au":!0,"nt.edu.au":!0,"qld.edu.au":!0,"sa.edu.au":!0,"tas.edu.au":!0,"vic.edu.au":!0,"wa.edu.au":!0,"qld.gov.au":!0,"sa.gov.au":!0,"tas.gov.au":!0,"vic.gov.au":!0,"wa.gov.au":!0,aw:!0,"com.aw":!0,ax:!0,az:!0,"com.az":!0,"net.az":!0,"int.az":!0,"gov.az":!0,"org.az":!0,"edu.az":!0,"info.az":!0,"pp.az":!0,"mil.az":!0,"name.az":!0,"pro.az":!0,"biz.az":!0,ba:!0,"org.ba":!0,"net.ba":!0,"edu.ba":!0,"gov.ba":!0,"mil.ba":!0,"unsa.ba":!0,"unbi.ba":!0,"co.ba":!0,"com.ba":!0,"rs.ba":!0,bb:!0,"biz.bb":!0,"co.bb":!0,"com.bb":!0,"edu.bb":!0,"gov.bb":!0,"info.bb":!0,"net.bb":!0,"org.bb":!0,"store.bb":!0,"tv.bb":!0,"*.bd":!0,be:!0,"ac.be":!0,bf:!0,"gov.bf":!0,bg:!0,"a.bg":!0,"b.bg":!0,"c.bg":!0,"d.bg":!0,"e.bg":!0,"f.bg":!0,"g.bg":!0,"h.bg":!0,"i.bg":!0,"j.bg":!0,"k.bg":!0,"l.bg":!0,"m.bg":!0,"n.bg":!0,"o.bg":!0,"p.bg":!0,"q.bg":!0,"r.bg":!0,"s.bg":!0,"t.bg":!0,"u.bg":!0,"v.bg":!0,"w.bg":!0,"x.bg":!0,"y.bg":!0,"z.bg":!0,"0.bg":!0,"1.bg":!0,"2.bg":!0,"3.bg":!0,"4.bg":!0,"5.bg":!0,"6.bg":!0,"7.bg":!0,"8.bg":!0,"9.bg":!0,bh:!0,"com.bh":!0,"edu.bh":!0,"net.bh":!0,"org.bh":!0,"gov.bh":!0,bi:!0,"co.bi":!0,"com.bi":!0,"edu.bi":!0,"or.bi":!0,"org.bi":!0,biz:!0,bj:!0,"asso.bj":!0,"barreau.bj":!0,"gouv.bj":!0,bm:!0,"com.bm":!0,"edu.bm":!0,"gov.bm":!0,"net.bm":!0,"org.bm":!0,"*.bn":!0,bo:!0,"com.bo":!0,"edu.bo":!0,"gov.bo":!0,"gob.bo":!0,"int.bo":!0,"org.bo":!0,"net.bo":!0,"mil.bo":!0,"tv.bo":!0,br:!0,"adm.br":!0,"adv.br":!0,"agr.br":!0,"am.br":!0,"arq.br":!0,"art.br":!0,"ato.br":!0,"b.br":!0,"bio.br":!0,"blog.br":!0,"bmd.br":!0,"cim.br":!0,"cng.br":!0,"cnt.br":!0,"com.br":!0,"coop.br":!0,"ecn.br":!0,"eco.br":!0,"edu.br":!0,"emp.br":!0,"eng.br":!0,"esp.br":!0,"etc.br":!0,"eti.br":!0,"far.br":!0,"flog.br":!0,"fm.br":!0,"fnd.br":!0,"fot.br":!0,"fst.br":!0,"g12.br":!0,"ggf.br":!0,"gov.br":!0,"imb.br":!0,"ind.br":!0,"inf.br":!0,"jor.br":!0,"jus.br":!0,"leg.br":!0,"lel.br":!0,"mat.br":!0,"med.br":!0,"mil.br":!0,"mp.br":!0,"mus.br":!0,"net.br":!0,"*.nom.br":!0,"not.br":!0,"ntr.br":!0,"odo.br":!0,"org.br":!0,"ppg.br":!0,"pro.br":!0,"psc.br":!0,"psi.br":!0,"qsl.br":!0,"radio.br":!0,"rec.br":!0,"slg.br":!0,"srv.br":!0,"taxi.br":!0,"teo.br":!0,"tmp.br":!0,"trd.br":!0,"tur.br":!0,"tv.br":!0,"vet.br":!0,"vlog.br":!0,"wiki.br":!0,"zlg.br":!0,bs:!0,"com.bs":!0,"net.bs":!0,"org.bs":!0,"edu.bs":!0,"gov.bs":!0,bt:!0,"com.bt":!0,"edu.bt":!0,"gov.bt":!0,"net.bt":!0,"org.bt":!0,bv:!0,bw:!0,"co.bw":!0,"org.bw":!0,by:!0,"gov.by":!0,"mil.by":!0,"com.by":!0,"of.by":!0,bz:!0,"com.bz":!0,"net.bz":!0,"org.bz":!0,"edu.bz":!0,"gov.bz":!0,ca:!0,"ab.ca":!0,"bc.ca":!0,"mb.ca":!0,"nb.ca":!0,"nf.ca":!0,"nl.ca":!0,"ns.ca":!0,"nt.ca":!0,"nu.ca":!0,"on.ca":!0,"pe.ca":!0,"qc.ca":!0,"sk.ca":!0,"yk.ca":!0,"gc.ca":!0,cat:!0,cc:!0,cd:!0,"gov.cd":!0,cf:!0,cg:!0,ch:!0,ci:!0,"org.ci":!0,"or.ci":!0,"com.ci":!0,"co.ci":!0,"edu.ci":!0,"ed.ci":!0,"ac.ci":!0,"net.ci":!0,"go.ci":!0,"asso.ci":!0,"xn--aroport-bya.ci":!0,"int.ci":!0,"presse.ci":!0,"md.ci":!0,"gouv.ci":!0,"*.ck":!0,"www.ck":!1,cl:!0,"gov.cl":!0,"gob.cl":!0,"co.cl":!0,"mil.cl":!0,cm:!0,"co.cm":!0,"com.cm":!0,"gov.cm":!0,"net.cm":!0,cn:!0,"ac.cn":!0,"com.cn":!0,"edu.cn":!0,"gov.cn":!0,"net.cn":!0,"org.cn":!0,"mil.cn":!0,"xn--55qx5d.cn":!0,"xn--io0a7i.cn":!0,"xn--od0alg.cn":!0,"ah.cn":!0,"bj.cn":!0,"cq.cn":!0,"fj.cn":!0,"gd.cn":!0,"gs.cn":!0,"gz.cn":!0,"gx.cn":!0,"ha.cn":!0,"hb.cn":!0,"he.cn":!0,"hi.cn":!0,"hl.cn":!0,"hn.cn":!0,"jl.cn":!0,"js.cn":!0,"jx.cn":!0,"ln.cn":!0,"nm.cn":!0,"nx.cn":!0,"qh.cn":!0,"sc.cn":!0,"sd.cn":!0,"sh.cn":!0,"sn.cn":!0,"sx.cn":!0,"tj.cn":!0,"xj.cn":!0,"xz.cn":!0,"yn.cn":!0,"zj.cn":!0,"hk.cn":!0,"mo.cn":!0,"tw.cn":!0,co:!0,"arts.co":!0,"com.co":!0,"edu.co":!0,"firm.co":!0,"gov.co":!0,"info.co":!0,"int.co":!0,"mil.co":!0,"net.co":!0,"nom.co":!0,"org.co":!0,"rec.co":!0,"web.co":!0,com:!0,coop:!0,cr:!0,"ac.cr":!0,"co.cr":!0,"ed.cr":!0,"fi.cr":!0,"go.cr":!0,"or.cr":!0,"sa.cr":!0,cu:!0,"com.cu":!0,"edu.cu":!0,"org.cu":!0,"net.cu":!0,"gov.cu":!0,"inf.cu":!0,cv:!0,cw:!0,"com.cw":!0,"edu.cw":!0,"net.cw":!0,"org.cw":!0,cx:!0,"gov.cx":!0,"*.cy":!0,cz:!0,de:!0,dj:!0,dk:!0,dm:!0,"com.dm":!0,"net.dm":!0,"org.dm":!0,"edu.dm":!0,"gov.dm":!0,"do":!0,"art.do":!0,"com.do":!0,"edu.do":!0,"gob.do":!0,"gov.do":!0,"mil.do":!0,"net.do":!0,"org.do":!0,"sld.do":!0,"web.do":!0,dz:!0,"com.dz":!0,"org.dz":!0,"net.dz":!0,"gov.dz":!0,"edu.dz":!0,"asso.dz":!0,"pol.dz":!0,"art.dz":!0,ec:!0,"com.ec":!0,"info.ec":!0,"net.ec":!0,"fin.ec":!0,"k12.ec":!0,"med.ec":!0,"pro.ec":!0,"org.ec":!0,"edu.ec":!0,"gov.ec":!0,"gob.ec":!0,"mil.ec":!0,edu:!0,ee:!0,"edu.ee":!0,"gov.ee":!0,"riik.ee":!0,"lib.ee":!0,"med.ee":!0,"com.ee":!0,"pri.ee":!0,"aip.ee":!0,"org.ee":!0,"fie.ee":!0,eg:!0,"com.eg":!0,"edu.eg":!0,"eun.eg":!0,"gov.eg":!0,"mil.eg":!0,"name.eg":!0,"net.eg":!0,"org.eg":!0,"sci.eg":!0,"*.er":!0,es:!0,"com.es":!0,"nom.es":!0,"org.es":!0,"gob.es":!0,"edu.es":!0,et:!0,"com.et":!0,"gov.et":!0,"org.et":!0,"edu.et":!0,"biz.et":!0,"name.et":!0,"info.et":!0,eu:!0,fi:!0,"aland.fi":!0,"*.fj":!0,"*.fk":!0,fm:!0,fo:!0,fr:!0,"com.fr":!0,"asso.fr":!0,"nom.fr":!0,"prd.fr":!0,"presse.fr":!0,"tm.fr":!0,"aeroport.fr":!0,"assedic.fr":!0,"avocat.fr":!0,"avoues.fr":!0,"cci.fr":!0,"chambagri.fr":!0,"chirurgiens-dentistes.fr":!0,"experts-comptables.fr":!0,"geometre-expert.fr":!0,"gouv.fr":!0,"greta.fr":!0,"huissier-justice.fr":!0,"medecin.fr":!0,"notaires.fr":!0,"pharmacien.fr":!0,"port.fr":!0,"veterinaire.fr":!0,ga:!0,gb:!0,gd:!0,ge:!0,"com.ge":!0,"edu.ge":!0,"gov.ge":!0,"org.ge":!0,"mil.ge":!0,"net.ge":!0,"pvt.ge":!0,gf:!0,gg:!0,"co.gg":!0,"net.gg":!0,"org.gg":!0,gh:!0,"com.gh":!0,"edu.gh":!0,"gov.gh":!0,"org.gh":!0,"mil.gh":!0,gi:!0,"com.gi":!0,"ltd.gi":!0,"gov.gi":!0,"mod.gi":!0,"edu.gi":!0,"org.gi":!0,gl:!0,gm:!0,gn:!0,"ac.gn":!0,"com.gn":!0,"edu.gn":!0,"gov.gn":!0,"org.gn":!0,"net.gn":!0,gov:!0,gp:!0,"com.gp":!0,"net.gp":!0,"mobi.gp":!0,"edu.gp":!0,"org.gp":!0,"asso.gp":!0,gq:!0,gr:!0,"com.gr":!0,"edu.gr":!0,"net.gr":!0,"org.gr":!0,"gov.gr":!0,gs:!0,gt:!0,"com.gt":!0,"edu.gt":!0,"gob.gt":!0,"ind.gt":!0,"mil.gt":!0,"net.gt":!0,"org.gt":!0,"*.gu":!0,gw:!0,gy:!0,"co.gy":!0,"com.gy":!0,"net.gy":!0,hk:!0,"com.hk":!0,"edu.hk":!0,"gov.hk":!0,"idv.hk":!0,"net.hk":!0,"org.hk":!0,"xn--55qx5d.hk":!0,"xn--wcvs22d.hk":!0,"xn--lcvr32d.hk":!0,"xn--mxtq1m.hk":!0,"xn--gmqw5a.hk":!0,"xn--ciqpn.hk":!0,"xn--gmq050i.hk":!0,"xn--zf0avx.hk":!0,"xn--io0a7i.hk":!0,"xn--mk0axi.hk":!0,"xn--od0alg.hk":!0,"xn--od0aq3b.hk":!0,"xn--tn0ag.hk":!0,"xn--uc0atv.hk":!0,"xn--uc0ay4a.hk":!0,hm:!0,hn:!0,"com.hn":!0,"edu.hn":!0,"org.hn":!0,"net.hn":!0,"mil.hn":!0,"gob.hn":!0,hr:!0,"iz.hr":!0,"from.hr":!0,"name.hr":!0,"com.hr":!0,ht:!0,"com.ht":!0,"shop.ht":!0,"firm.ht":!0,"info.ht":!0,"adult.ht":!0,"net.ht":!0,"pro.ht":!0,"org.ht":!0,"med.ht":!0,"art.ht":!0,"coop.ht":!0,"pol.ht":!0,"asso.ht":!0,"edu.ht":!0,"rel.ht":!0,"gouv.ht":!0,"perso.ht":!0,hu:!0,"co.hu":!0,"info.hu":!0,"org.hu":!0,"priv.hu":!0,"sport.hu":!0,"tm.hu":!0,"2000.hu":!0,"agrar.hu":!0,"bolt.hu":!0,"casino.hu":!0,"city.hu":!0,"erotica.hu":!0,"erotika.hu":!0,"film.hu":!0,"forum.hu":!0,"games.hu":!0,"hotel.hu":!0,"ingatlan.hu":!0,"jogasz.hu":!0,"konyvelo.hu":!0,"lakas.hu":!0,"media.hu":!0,"news.hu":!0,"reklam.hu":!0,"sex.hu":!0,"shop.hu":!0,"suli.hu":!0,"szex.hu":!0,"tozsde.hu":!0,"utazas.hu":!0,"video.hu":!0,id:!0,"ac.id":!0,"biz.id":!0,"co.id":!0,"desa.id":!0,"go.id":!0,"mil.id":!0,"my.id":!0,"net.id":!0,"or.id":!0,"sch.id":!0,"web.id":!0,ie:!0,"gov.ie":!0,"*.il":!0,im:!0,"ac.im":!0,"co.im":!0,"com.im":!0,"ltd.co.im":!0,"net.im":!0,"org.im":!0,"plc.co.im":!0,"tt.im":!0,"tv.im":!0,"in":!0,"co.in":!0,"firm.in":!0,"net.in":!0,"org.in":!0,"gen.in":!0,"ind.in":!0,"nic.in":!0,"ac.in":!0,"edu.in":!0,"res.in":!0,"gov.in":!0,"mil.in":!0,info:!0,"int":!0,"eu.int":!0,io:!0,"com.io":!0,iq:!0,"gov.iq":!0,"edu.iq":!0,"mil.iq":!0,"com.iq":!0,"org.iq":!0,"net.iq":!0,ir:!0,"ac.ir":!0,"co.ir":!0,"gov.ir":!0,"id.ir":!0,"net.ir":!0,"org.ir":!0,"sch.ir":!0,"xn--mgba3a4f16a.ir":!0,"xn--mgba3a4fra.ir":!0,is:!0,"net.is":!0,"com.is":!0,"edu.is":!0,"gov.is":!0,"org.is":!0,"int.is":!0,it:!0,"gov.it":!0,"edu.it":!0,"abr.it":!0,"abruzzo.it":!0,"aosta-valley.it":!0,"aostavalley.it":!0,"bas.it":!0,"basilicata.it":!0,"cal.it":!0,"calabria.it":!0,"cam.it":!0,"campania.it":!0,"emilia-romagna.it":!0,"emiliaromagna.it":!0,"emr.it":!0,"friuli-v-giulia.it":!0,"friuli-ve-giulia.it":!0,"friuli-vegiulia.it":!0,"friuli-venezia-giulia.it":!0,"friuli-veneziagiulia.it":!0,"friuli-vgiulia.it":!0,"friuliv-giulia.it":!0,"friulive-giulia.it":!0,"friulivegiulia.it":!0,"friulivenezia-giulia.it":!0,"friuliveneziagiulia.it":!0,"friulivgiulia.it":!0,"fvg.it":!0,"laz.it":!0,"lazio.it":!0,"lig.it":!0,"liguria.it":!0,"lom.it":!0,"lombardia.it":!0,"lombardy.it":!0,"lucania.it":!0,"mar.it":!0,"marche.it":!0,"mol.it":!0,"molise.it":!0,"piedmont.it":!0,"piemonte.it":!0,"pmn.it":!0,"pug.it":!0,"puglia.it":!0,"sar.it":!0,"sardegna.it":!0,"sardinia.it":!0,"sic.it":!0,"sicilia.it":!0,"sicily.it":!0,"taa.it":!0,"tos.it":!0,"toscana.it":!0,"trentino-a-adige.it":!0,"trentino-aadige.it":!0,"trentino-alto-adige.it":!0,"trentino-altoadige.it":!0,"trentino-s-tirol.it":!0,"trentino-stirol.it":!0,"trentino-sud-tirol.it":!0,"trentino-sudtirol.it":!0,"trentino-sued-tirol.it":!0,"trentino-suedtirol.it":!0,"trentinoa-adige.it":!0,"trentinoaadige.it":!0,"trentinoalto-adige.it":!0,"trentinoaltoadige.it":!0,"trentinos-tirol.it":!0,"trentinostirol.it":!0,"trentinosud-tirol.it":!0,"trentinosudtirol.it":!0,"trentinosued-tirol.it":!0,"trentinosuedtirol.it":!0,"tuscany.it":!0,"umb.it":!0,"umbria.it":!0,"val-d-aosta.it":!0,"val-daosta.it":!0,"vald-aosta.it":!0,"valdaosta.it":!0,"valle-aosta.it":!0,"valle-d-aosta.it":!0,"valle-daosta.it":!0,"valleaosta.it":!0,"valled-aosta.it":!0,"valledaosta.it":!0,"vallee-aoste.it":!0,"valleeaoste.it":!0,"vao.it":!0,"vda.it":!0,"ven.it":!0,"veneto.it":!0,"ag.it":!0,"agrigento.it":!0,"al.it":!0,"alessandria.it":!0,"alto-adige.it":!0,"altoadige.it":!0,"an.it":!0,"ancona.it":!0,"andria-barletta-trani.it":!0,"andria-trani-barletta.it":!0,"andriabarlettatrani.it":!0,"andriatranibarletta.it":!0,"ao.it":!0,"aosta.it":!0,"aoste.it":!0,"ap.it":!0,"aq.it":!0,"aquila.it":!0,"ar.it":!0,"arezzo.it":!0,"ascoli-piceno.it":!0,"ascolipiceno.it":!0,"asti.it":!0,"at.it":!0,"av.it":!0,"avellino.it":!0,"ba.it":!0,"balsan.it":!0,"bari.it":!0,"barletta-trani-andria.it":!0,"barlettatraniandria.it":!0,"belluno.it":!0,"benevento.it":!0,"bergamo.it":!0,"bg.it":!0,"bi.it":!0,"biella.it":!0,"bl.it":!0,"bn.it":!0,"bo.it":!0,"bologna.it":!0,"bolzano.it":!0,"bozen.it":!0,"br.it":!0,"brescia.it":!0,"brindisi.it":!0,"bs.it":!0,"bt.it":!0,"bz.it":!0,"ca.it":!0,"cagliari.it":!0,"caltanissetta.it":!0,"campidano-medio.it":!0,"campidanomedio.it":!0,"campobasso.it":!0,"carbonia-iglesias.it":!0,"carboniaiglesias.it":!0,"carrara-massa.it":!0,"carraramassa.it":!0,"caserta.it":!0,"catania.it":!0,"catanzaro.it":!0,"cb.it":!0,"ce.it":!0,"cesena-forli.it":!0,"cesenaforli.it":!0,"ch.it":!0,"chieti.it":!0,"ci.it":!0,"cl.it":!0,"cn.it":!0,"co.it":!0,"como.it":!0,"cosenza.it":!0,"cr.it":!0,"cremona.it":!0,"crotone.it":!0,"cs.it":!0,"ct.it":!0,"cuneo.it":!0,"cz.it":!0,"dell-ogliastra.it":!0,"dellogliastra.it":!0,"en.it":!0,"enna.it":!0,"fc.it":!0,"fe.it":!0,"fermo.it":!0,"ferrara.it":!0,"fg.it":!0,"fi.it":!0,"firenze.it":!0,"florence.it":!0,"fm.it":!0,"foggia.it":!0,"forli-cesena.it":!0,"forlicesena.it":!0,"fr.it":!0,"frosinone.it":!0,"ge.it":!0,"genoa.it":!0,"genova.it":!0,"go.it":!0,"gorizia.it":!0,"gr.it":!0,"grosseto.it":!0,"iglesias-carbonia.it":!0,"iglesiascarbonia.it":!0,"im.it":!0,"imperia.it":!0,"is.it":!0,"isernia.it":!0,"kr.it":!0,"la-spezia.it":!0,"laquila.it":!0,"laspezia.it":!0,"latina.it":!0,"lc.it":!0,"le.it":!0,"lecce.it":!0,"lecco.it":!0,"li.it":!0,"livorno.it":!0,"lo.it":!0,"lodi.it":!0,"lt.it":!0,"lu.it":!0,"lucca.it":!0,"macerata.it":!0,"mantova.it":!0,"massa-carrara.it":!0,"massacarrara.it":!0,"matera.it":!0,"mb.it":!0,"mc.it":!0,"me.it":!0,"medio-campidano.it":!0,"mediocampidano.it":!0,"messina.it":!0,"mi.it":!0,"milan.it":!0,"milano.it":!0,"mn.it":!0,"mo.it":!0,"modena.it":!0,"monza-brianza.it":!0,"monza-e-della-brianza.it":!0,"monza.it":!0,"monzabrianza.it":!0,"monzaebrianza.it":!0,"monzaedellabrianza.it":!0,"ms.it":!0,"mt.it":!0,"na.it":!0,"naples.it":!0,"napoli.it":!0,"no.it":!0,"novara.it":!0,"nu.it":!0,"nuoro.it":!0,"og.it":!0,"ogliastra.it":!0,"olbia-tempio.it":!0,"olbiatempio.it":!0,"or.it":!0,"oristano.it":!0,"ot.it":!0,"pa.it":!0,"padova.it":!0,"padua.it":!0,"palermo.it":!0,"parma.it":!0,"pavia.it":!0,"pc.it":!0,"pd.it":!0,"pe.it":!0,"perugia.it":!0,"pesaro-urbino.it":!0,"pesarourbino.it":!0,"pescara.it":!0,"pg.it":!0,"pi.it":!0,"piacenza.it":!0,"pisa.it":!0,"pistoia.it":!0,"pn.it":!0,"po.it":!0,"pordenone.it":!0,"potenza.it":!0,"pr.it":!0,"prato.it":!0,"pt.it":!0,"pu.it":!0,"pv.it":!0,"pz.it":!0,"ra.it":!0,"ragusa.it":!0,"ravenna.it":!0,"rc.it":!0,"re.it":!0,"reggio-calabria.it":!0,"reggio-emilia.it":!0,"reggiocalabria.it":!0,"reggioemilia.it":!0,"rg.it":!0,"ri.it":!0,"rieti.it":!0,"rimini.it":!0,"rm.it":!0,"rn.it":!0,"ro.it":!0,"roma.it":!0,"rome.it":!0,"rovigo.it":!0,"sa.it":!0,"salerno.it":!0,"sassari.it":!0,"savona.it":!0,"si.it":!0,"siena.it":!0,"siracusa.it":!0,"so.it":!0,"sondrio.it":!0,"sp.it":!0,"sr.it":!0,"ss.it":!0,"suedtirol.it":!0,"sv.it":!0,"ta.it":!0,"taranto.it":!0,"te.it":!0,"tempio-olbia.it":!0,"tempioolbia.it":!0,"teramo.it":!0,"terni.it":!0,"tn.it":!0,"to.it":!0,"torino.it":!0,"tp.it":!0,"tr.it":!0,"trani-andria-barletta.it":!0,"trani-barletta-andria.it":!0,"traniandriabarletta.it":!0,"tranibarlettaandria.it":!0,"trapani.it":!0,"trentino.it":!0,"trento.it":!0,"treviso.it":!0,"trieste.it":!0,"ts.it":!0,"turin.it":!0,"tv.it":!0,"ud.it":!0,"udine.it":!0,"urbino-pesaro.it":!0,"urbinopesaro.it":!0,"va.it":!0,"varese.it":!0,"vb.it":!0,"vc.it":!0,"ve.it":!0,"venezia.it":!0,"venice.it":!0,"verbania.it":!0,"vercelli.it":!0,"verona.it":!0,"vi.it":!0,"vibo-valentia.it":!0,"vibovalentia.it":!0,"vicenza.it":!0,"viterbo.it":!0,"vr.it":!0,"vs.it":!0,"vt.it":!0,"vv.it":!0,je:!0,"co.je":!0,"net.je":!0,"org.je":!0,"*.jm":!0,jo:!0,"com.jo":!0,"org.jo":!0,"net.jo":!0,"edu.jo":!0,"sch.jo":!0,"gov.jo":!0,"mil.jo":!0,"name.jo":!0,jobs:!0,jp:!0,"ac.jp":!0,"ad.jp":!0,"co.jp":!0,"ed.jp":!0,"go.jp":!0,"gr.jp":!0,"lg.jp":!0,"ne.jp":!0,"or.jp":!0,"aichi.jp":!0,"akita.jp":!0,"aomori.jp":!0,"chiba.jp":!0,"ehime.jp":!0,"fukui.jp":!0,"fukuoka.jp":!0,"fukushima.jp":!0,"gifu.jp":!0,"gunma.jp":!0,"hiroshima.jp":!0,"hokkaido.jp":!0,"hyogo.jp":!0,"ibaraki.jp":!0,"ishikawa.jp":!0,"iwate.jp":!0,"kagawa.jp":!0,"kagoshima.jp":!0,"kanagawa.jp":!0,"kochi.jp":!0,"kumamoto.jp":!0,"kyoto.jp":!0,"mie.jp":!0,"miyagi.jp":!0,"miyazaki.jp":!0,"nagano.jp":!0,"nagasaki.jp":!0,"nara.jp":!0,"niigata.jp":!0,"oita.jp":!0,"okayama.jp":!0,"okinawa.jp":!0,"osaka.jp":!0,"saga.jp":!0,"saitama.jp":!0,"shiga.jp":!0,"shimane.jp":!0,"shizuoka.jp":!0,"tochigi.jp":!0,"tokushima.jp":!0,"tokyo.jp":!0,"tottori.jp":!0,"toyama.jp":!0,"wakayama.jp":!0,"yamagata.jp":!0,"yamaguchi.jp":!0,"yamanashi.jp":!0,"xn--4pvxs.jp":!0,"xn--vgu402c.jp":!0,"xn--c3s14m.jp":!0,"xn--f6qx53a.jp":!0,"xn--8pvr4u.jp":!0,"xn--uist22h.jp":!0,"xn--djrs72d6uy.jp":!0,"xn--mkru45i.jp":!0,"xn--0trq7p7nn.jp":!0,"xn--8ltr62k.jp":!0,"xn--2m4a15e.jp":!0,"xn--efvn9s.jp":!0,"xn--32vp30h.jp":!0,"xn--4it797k.jp":!0,"xn--1lqs71d.jp":!0,"xn--5rtp49c.jp":!0,"xn--5js045d.jp":!0,"xn--ehqz56n.jp":!0,"xn--1lqs03n.jp":!0,"xn--qqqt11m.jp":!0,"xn--kbrq7o.jp":!0,"xn--pssu33l.jp":!0,"xn--ntsq17g.jp":!0,"xn--uisz3g.jp":!0,"xn--6btw5a.jp":!0,"xn--1ctwo.jp":!0,"xn--6orx2r.jp":!0,"xn--rht61e.jp":!0,"xn--rht27z.jp":!0,"xn--djty4k.jp":!0,"xn--nit225k.jp":!0,"xn--rht3d.jp":!0,"xn--klty5x.jp":!0,"xn--kltx9a.jp":!0,"xn--kltp7d.jp":!0,"xn--uuwu58a.jp":!0,"xn--zbx025d.jp":!0,"xn--ntso0iqx3a.jp":!0,"xn--elqq16h.jp":!0,"xn--4it168d.jp":!0,"xn--klt787d.jp":!0,"xn--rny31h.jp":!0,"xn--7t0a264c.jp":!0,"xn--5rtq34k.jp":!0,"xn--k7yn95e.jp":!0,"xn--tor131o.jp":!0,"xn--d5qv7z876c.jp":!0,"*.kawasaki.jp":!0,"*.kitakyushu.jp":!0,"*.kobe.jp":!0,"*.nagoya.jp":!0,"*.sapporo.jp":!0,"*.sendai.jp":!0,"*.yokohama.jp":!0,"city.kawasaki.jp":!1,"city.kitakyushu.jp":!1,"city.kobe.jp":!1,"city.nagoya.jp":!1,"city.sapporo.jp":!1,"city.sendai.jp":!1,"city.yokohama.jp":!1,"aisai.aichi.jp":!0,"ama.aichi.jp":!0,"anjo.aichi.jp":!0,"asuke.aichi.jp":!0,"chiryu.aichi.jp":!0,"chita.aichi.jp":!0,"fuso.aichi.jp":!0,"gamagori.aichi.jp":!0,"handa.aichi.jp":!0,"hazu.aichi.jp":!0,"hekinan.aichi.jp":!0,"higashiura.aichi.jp":!0,"ichinomiya.aichi.jp":!0,"inazawa.aichi.jp":!0,"inuyama.aichi.jp":!0,"isshiki.aichi.jp":!0,"iwakura.aichi.jp":!0,"kanie.aichi.jp":!0,"kariya.aichi.jp":!0,"kasugai.aichi.jp":!0,"kira.aichi.jp":!0,"kiyosu.aichi.jp":!0,"komaki.aichi.jp":!0,"konan.aichi.jp":!0,"kota.aichi.jp":!0,"mihama.aichi.jp":!0,"miyoshi.aichi.jp":!0,"nishio.aichi.jp":!0,"nisshin.aichi.jp":!0,"obu.aichi.jp":!0,"oguchi.aichi.jp":!0,"oharu.aichi.jp":!0,"okazaki.aichi.jp":!0,"owariasahi.aichi.jp":!0,"seto.aichi.jp":!0,"shikatsu.aichi.jp":!0,"shinshiro.aichi.jp":!0,"shitara.aichi.jp":!0,"tahara.aichi.jp":!0,"takahama.aichi.jp":!0,"tobishima.aichi.jp":!0,"toei.aichi.jp":!0,"togo.aichi.jp":!0,"tokai.aichi.jp":!0,"tokoname.aichi.jp":!0,"toyoake.aichi.jp":!0,"toyohashi.aichi.jp":!0,"toyokawa.aichi.jp":!0,"toyone.aichi.jp":!0,"toyota.aichi.jp":!0,"tsushima.aichi.jp":!0,"yatomi.aichi.jp":!0,"akita.akita.jp":!0,"daisen.akita.jp":!0,"fujisato.akita.jp":!0,"gojome.akita.jp":!0,"hachirogata.akita.jp":!0,"happou.akita.jp":!0,"higashinaruse.akita.jp":!0,"honjo.akita.jp":!0,"honjyo.akita.jp":!0,"ikawa.akita.jp":!0,"kamikoani.akita.jp":!0,"kamioka.akita.jp":!0,"katagami.akita.jp":!0,"kazuno.akita.jp":!0,"kitaakita.akita.jp":!0,"kosaka.akita.jp":!0,"kyowa.akita.jp":!0,"misato.akita.jp":!0,"mitane.akita.jp":!0,"moriyoshi.akita.jp":!0,"nikaho.akita.jp":!0,"noshiro.akita.jp":!0,"odate.akita.jp":!0,"oga.akita.jp":!0,"ogata.akita.jp":!0,"semboku.akita.jp":!0,"yokote.akita.jp":!0,"yurihonjo.akita.jp":!0,"aomori.aomori.jp":!0,"gonohe.aomori.jp":!0,"hachinohe.aomori.jp":!0,"hashikami.aomori.jp":!0,"hiranai.aomori.jp":!0,"hirosaki.aomori.jp":!0,"itayanagi.aomori.jp":!0,"kuroishi.aomori.jp":!0,"misawa.aomori.jp":!0,"mutsu.aomori.jp":!0,"nakadomari.aomori.jp":!0,"noheji.aomori.jp":!0,"oirase.aomori.jp":!0,"owani.aomori.jp":!0,"rokunohe.aomori.jp":!0,"sannohe.aomori.jp":!0,"shichinohe.aomori.jp":!0,"shingo.aomori.jp":!0,"takko.aomori.jp":!0,"towada.aomori.jp":!0,"tsugaru.aomori.jp":!0,"tsuruta.aomori.jp":!0,"abiko.chiba.jp":!0,"asahi.chiba.jp":!0,"chonan.chiba.jp":!0,"chosei.chiba.jp":!0,"choshi.chiba.jp":!0,"chuo.chiba.jp":!0,"funabashi.chiba.jp":!0,"futtsu.chiba.jp":!0,"hanamigawa.chiba.jp":!0,"ichihara.chiba.jp":!0,"ichikawa.chiba.jp":!0,"ichinomiya.chiba.jp":!0,"inzai.chiba.jp":!0,"isumi.chiba.jp":!0,"kamagaya.chiba.jp":!0,"kamogawa.chiba.jp":!0,"kashiwa.chiba.jp":!0,"katori.chiba.jp":!0,"katsuura.chiba.jp":!0,"kimitsu.chiba.jp":!0,"kisarazu.chiba.jp":!0,"kozaki.chiba.jp":!0,"kujukuri.chiba.jp":!0,"kyonan.chiba.jp":!0,"matsudo.chiba.jp":!0,"midori.chiba.jp":!0,"mihama.chiba.jp":!0,"minamiboso.chiba.jp":!0,"mobara.chiba.jp":!0,"mutsuzawa.chiba.jp":!0,"nagara.chiba.jp":!0,"nagareyama.chiba.jp":!0,"narashino.chiba.jp":!0,"narita.chiba.jp":!0,"noda.chiba.jp":!0,"oamishirasato.chiba.jp":!0,"omigawa.chiba.jp":!0,"onjuku.chiba.jp":!0,"otaki.chiba.jp":!0,"sakae.chiba.jp":!0,"sakura.chiba.jp":!0,"shimofusa.chiba.jp":!0,"shirako.chiba.jp":!0,"shiroi.chiba.jp":!0,"shisui.chiba.jp":!0,"sodegaura.chiba.jp":!0,"sosa.chiba.jp":!0,"tako.chiba.jp":!0,"tateyama.chiba.jp":!0,"togane.chiba.jp":!0,"tohnosho.chiba.jp":!0,"tomisato.chiba.jp":!0,"urayasu.chiba.jp":!0,"yachimata.chiba.jp":!0,"yachiyo.chiba.jp":!0,"yokaichiba.chiba.jp":!0,"yokoshibahikari.chiba.jp":!0,"yotsukaido.chiba.jp":!0,"ainan.ehime.jp":!0,"honai.ehime.jp":!0,"ikata.ehime.jp":!0,"imabari.ehime.jp":!0,"iyo.ehime.jp":!0,"kamijima.ehime.jp":!0,"kihoku.ehime.jp":!0,"kumakogen.ehime.jp":!0,"masaki.ehime.jp":!0,"matsuno.ehime.jp":!0,"matsuyama.ehime.jp":!0,"namikata.ehime.jp":!0,"niihama.ehime.jp":!0,"ozu.ehime.jp":!0,"saijo.ehime.jp":!0,"seiyo.ehime.jp":!0,"shikokuchuo.ehime.jp":!0,"tobe.ehime.jp":!0,"toon.ehime.jp":!0,"uchiko.ehime.jp":!0,"uwajima.ehime.jp":!0,"yawatahama.ehime.jp":!0,"echizen.fukui.jp":!0,"eiheiji.fukui.jp":!0,"fukui.fukui.jp":!0,"ikeda.fukui.jp":!0,"katsuyama.fukui.jp":!0,"mihama.fukui.jp":!0,"minamiechizen.fukui.jp":!0,"obama.fukui.jp":!0,"ohi.fukui.jp":!0,"ono.fukui.jp":!0,"sabae.fukui.jp":!0,"sakai.fukui.jp":!0,"takahama.fukui.jp":!0,"tsuruga.fukui.jp":!0,"wakasa.fukui.jp":!0,"ashiya.fukuoka.jp":!0,"buzen.fukuoka.jp":!0,"chikugo.fukuoka.jp":!0,"chikuho.fukuoka.jp":!0,"chikujo.fukuoka.jp":!0,"chikushino.fukuoka.jp":!0,"chikuzen.fukuoka.jp":!0,"chuo.fukuoka.jp":!0,"dazaifu.fukuoka.jp":!0,"fukuchi.fukuoka.jp":!0,"hakata.fukuoka.jp":!0,"higashi.fukuoka.jp":!0,"hirokawa.fukuoka.jp":!0,"hisayama.fukuoka.jp":!0,"iizuka.fukuoka.jp":!0,"inatsuki.fukuoka.jp":!0,"kaho.fukuoka.jp":!0,"kasuga.fukuoka.jp":!0,"kasuya.fukuoka.jp":!0,"kawara.fukuoka.jp":!0,"keisen.fukuoka.jp":!0,"koga.fukuoka.jp":!0,"kurate.fukuoka.jp":!0,"kurogi.fukuoka.jp":!0,"kurume.fukuoka.jp":!0,"minami.fukuoka.jp":!0,"miyako.fukuoka.jp":!0,"miyama.fukuoka.jp":!0,"miyawaka.fukuoka.jp":!0,"mizumaki.fukuoka.jp":!0,"munakata.fukuoka.jp":!0,"nakagawa.fukuoka.jp":!0,"nakama.fukuoka.jp":!0,"nishi.fukuoka.jp":!0,"nogata.fukuoka.jp":!0,"ogori.fukuoka.jp":!0,"okagaki.fukuoka.jp":!0,"okawa.fukuoka.jp":!0,"oki.fukuoka.jp":!0,"omuta.fukuoka.jp":!0,"onga.fukuoka.jp":!0,"onojo.fukuoka.jp":!0,"oto.fukuoka.jp":!0,"saigawa.fukuoka.jp":!0,"sasaguri.fukuoka.jp":!0,"shingu.fukuoka.jp":!0,"shinyoshitomi.fukuoka.jp":!0,"shonai.fukuoka.jp":!0,"soeda.fukuoka.jp":!0,"sue.fukuoka.jp":!0,"tachiarai.fukuoka.jp":!0,"tagawa.fukuoka.jp":!0,"takata.fukuoka.jp":!0,"toho.fukuoka.jp":!0,"toyotsu.fukuoka.jp":!0,"tsuiki.fukuoka.jp":!0,"ukiha.fukuoka.jp":!0,"umi.fukuoka.jp":!0,"usui.fukuoka.jp":!0,"yamada.fukuoka.jp":!0,"yame.fukuoka.jp":!0,"yanagawa.fukuoka.jp":!0,"yukuhashi.fukuoka.jp":!0,"aizubange.fukushima.jp":!0,"aizumisato.fukushima.jp":!0,"aizuwakamatsu.fukushima.jp":!0,"asakawa.fukushima.jp":!0,"bandai.fukushima.jp":!0,"date.fukushima.jp":!0,"fukushima.fukushima.jp":!0,"furudono.fukushima.jp":!0,"futaba.fukushima.jp":!0,"hanawa.fukushima.jp":!0,"higashi.fukushima.jp":!0,"hirata.fukushima.jp":!0,"hirono.fukushima.jp":!0,"iitate.fukushima.jp":!0,"inawashiro.fukushima.jp":!0,"ishikawa.fukushima.jp":!0,"iwaki.fukushima.jp":!0,"izumizaki.fukushima.jp":!0,"kagamiishi.fukushima.jp":!0,"kaneyama.fukushima.jp":!0,"kawamata.fukushima.jp":!0,"kitakata.fukushima.jp":!0,"kitashiobara.fukushima.jp":!0,"koori.fukushima.jp":!0,"koriyama.fukushima.jp":!0,"kunimi.fukushima.jp":!0,"miharu.fukushima.jp":!0,"mishima.fukushima.jp":!0,"namie.fukushima.jp":!0,"nango.fukushima.jp":!0,"nishiaizu.fukushima.jp":!0,"nishigo.fukushima.jp":!0,"okuma.fukushima.jp":!0,"omotego.fukushima.jp":!0,"ono.fukushima.jp":!0,"otama.fukushima.jp":!0,"samegawa.fukushima.jp":!0,"shimogo.fukushima.jp":!0,"shirakawa.fukushima.jp":!0,"showa.fukushima.jp":!0,"soma.fukushima.jp":!0,"sukagawa.fukushima.jp":!0,"taishin.fukushima.jp":!0,"tamakawa.fukushima.jp":!0,"tanagura.fukushima.jp":!0,"tenei.fukushima.jp":!0,"yabuki.fukushima.jp":!0,"yamato.fukushima.jp":!0,"yamatsuri.fukushima.jp":!0,"yanaizu.fukushima.jp":!0,"yugawa.fukushima.jp":!0,"anpachi.gifu.jp":!0,"ena.gifu.jp":!0,"gifu.gifu.jp":!0,"ginan.gifu.jp":!0,"godo.gifu.jp":!0,"gujo.gifu.jp":!0,"hashima.gifu.jp":!0,"hichiso.gifu.jp":!0,"hida.gifu.jp":!0,"higashishirakawa.gifu.jp":!0,"ibigawa.gifu.jp":!0,"ikeda.gifu.jp":!0,"kakamigahara.gifu.jp":!0,"kani.gifu.jp":!0,"kasahara.gifu.jp":!0,"kasamatsu.gifu.jp":!0,"kawaue.gifu.jp":!0,"kitagata.gifu.jp":!0,"mino.gifu.jp":!0,"minokamo.gifu.jp":!0,"mitake.gifu.jp":!0,"mizunami.gifu.jp":!0,"motosu.gifu.jp":!0,"nakatsugawa.gifu.jp":!0,"ogaki.gifu.jp":!0,"sakahogi.gifu.jp":!0,"seki.gifu.jp":!0,"sekigahara.gifu.jp":!0,"shirakawa.gifu.jp":!0,"tajimi.gifu.jp":!0,"takayama.gifu.jp":!0,"tarui.gifu.jp":!0,"toki.gifu.jp":!0,"tomika.gifu.jp":!0,"wanouchi.gifu.jp":!0,"yamagata.gifu.jp":!0,"yaotsu.gifu.jp":!0,"yoro.gifu.jp":!0,"annaka.gunma.jp":!0,"chiyoda.gunma.jp":!0,"fujioka.gunma.jp":!0,"higashiagatsuma.gunma.jp":!0,"isesaki.gunma.jp":!0,"itakura.gunma.jp":!0,"kanna.gunma.jp":!0,"kanra.gunma.jp":!0,"katashina.gunma.jp":!0,"kawaba.gunma.jp":!0,"kiryu.gunma.jp":!0,"kusatsu.gunma.jp":!0,"maebashi.gunma.jp":!0,"meiwa.gunma.jp":!0,"midori.gunma.jp":!0,"minakami.gunma.jp":!0,"naganohara.gunma.jp":!0,"nakanojo.gunma.jp":!0,"nanmoku.gunma.jp":!0,"numata.gunma.jp":!0,"oizumi.gunma.jp":!0,"ora.gunma.jp":!0,"ota.gunma.jp":!0,"shibukawa.gunma.jp":!0,"shimonita.gunma.jp":!0,"shinto.gunma.jp":!0,"showa.gunma.jp":!0,"takasaki.gunma.jp":!0,"takayama.gunma.jp":!0,"tamamura.gunma.jp":!0,"tatebayashi.gunma.jp":!0,"tomioka.gunma.jp":!0,"tsukiyono.gunma.jp":!0,"tsumagoi.gunma.jp":!0,"ueno.gunma.jp":!0,"yoshioka.gunma.jp":!0,"asaminami.hiroshima.jp":!0,"daiwa.hiroshima.jp":!0,"etajima.hiroshima.jp":!0,"fuchu.hiroshima.jp":!0,"fukuyama.hiroshima.jp":!0,"hatsukaichi.hiroshima.jp":!0,"higashihiroshima.hiroshima.jp":!0,"hongo.hiroshima.jp":!0,"jinsekikogen.hiroshima.jp":!0,"kaita.hiroshima.jp":!0,"kui.hiroshima.jp":!0,"kumano.hiroshima.jp":!0,"kure.hiroshima.jp":!0,"mihara.hiroshima.jp":!0,"miyoshi.hiroshima.jp":!0,"naka.hiroshima.jp":!0,"onomichi.hiroshima.jp":!0,"osakikamijima.hiroshima.jp":!0,"otake.hiroshima.jp":!0,"saka.hiroshima.jp":!0,"sera.hiroshima.jp":!0,"seranishi.hiroshima.jp":!0,"shinichi.hiroshima.jp":!0,"shobara.hiroshima.jp":!0,"takehara.hiroshima.jp":!0,"abashiri.hokkaido.jp":!0,"abira.hokkaido.jp":!0,"aibetsu.hokkaido.jp":!0,"akabira.hokkaido.jp":!0,"akkeshi.hokkaido.jp":!0,"asahikawa.hokkaido.jp":!0,"ashibetsu.hokkaido.jp":!0,"ashoro.hokkaido.jp":!0,"assabu.hokkaido.jp":!0,"atsuma.hokkaido.jp":!0,"bibai.hokkaido.jp":!0,"biei.hokkaido.jp":!0,"bifuka.hokkaido.jp":!0,"bihoro.hokkaido.jp":!0,"biratori.hokkaido.jp":!0,"chippubetsu.hokkaido.jp":!0,"chitose.hokkaido.jp":!0,"date.hokkaido.jp":!0,"ebetsu.hokkaido.jp":!0,"embetsu.hokkaido.jp":!0,"eniwa.hokkaido.jp":!0,"erimo.hokkaido.jp":!0,"esan.hokkaido.jp":!0,"esashi.hokkaido.jp":!0,"fukagawa.hokkaido.jp":!0,"fukushima.hokkaido.jp":!0,"furano.hokkaido.jp":!0,"furubira.hokkaido.jp":!0,"haboro.hokkaido.jp":!0,"hakodate.hokkaido.jp":!0,"hamatonbetsu.hokkaido.jp":!0,"hidaka.hokkaido.jp":!0,"higashikagura.hokkaido.jp":!0,"higashikawa.hokkaido.jp":!0,"hiroo.hokkaido.jp":!0,"hokuryu.hokkaido.jp":!0,"hokuto.hokkaido.jp":!0,"honbetsu.hokkaido.jp":!0,"horokanai.hokkaido.jp":!0,"horonobe.hokkaido.jp":!0,"ikeda.hokkaido.jp":!0,"imakane.hokkaido.jp":!0,"ishikari.hokkaido.jp":!0,"iwamizawa.hokkaido.jp":!0,"iwanai.hokkaido.jp":!0,"kamifurano.hokkaido.jp":!0,"kamikawa.hokkaido.jp":!0,"kamishihoro.hokkaido.jp":!0,"kamisunagawa.hokkaido.jp":!0,"kamoenai.hokkaido.jp":!0,"kayabe.hokkaido.jp":!0,"kembuchi.hokkaido.jp":!0,"kikonai.hokkaido.jp":!0,"kimobetsu.hokkaido.jp":!0,"kitahiroshima.hokkaido.jp":!0,"kitami.hokkaido.jp":!0,"kiyosato.hokkaido.jp":!0,"koshimizu.hokkaido.jp":!0,"kunneppu.hokkaido.jp":!0,"kuriyama.hokkaido.jp":!0,"kuromatsunai.hokkaido.jp":!0,"kushiro.hokkaido.jp":!0,"kutchan.hokkaido.jp":!0,"kyowa.hokkaido.jp":!0,"mashike.hokkaido.jp":!0,"matsumae.hokkaido.jp":!0,"mikasa.hokkaido.jp":!0,"minamifurano.hokkaido.jp":!0,"mombetsu.hokkaido.jp":!0,"moseushi.hokkaido.jp":!0,"mukawa.hokkaido.jp":!0,"muroran.hokkaido.jp":!0,"naie.hokkaido.jp":!0,"nakagawa.hokkaido.jp":!0,"nakasatsunai.hokkaido.jp":!0,"nakatombetsu.hokkaido.jp":!0,"nanae.hokkaido.jp":!0,"nanporo.hokkaido.jp":!0,"nayoro.hokkaido.jp":!0,"nemuro.hokkaido.jp":!0,"niikappu.hokkaido.jp":!0,"niki.hokkaido.jp":!0,"nishiokoppe.hokkaido.jp":!0,"noboribetsu.hokkaido.jp":!0,"numata.hokkaido.jp":!0,"obihiro.hokkaido.jp":!0,"obira.hokkaido.jp":!0,"oketo.hokkaido.jp":!0,"okoppe.hokkaido.jp":!0,"otaru.hokkaido.jp":!0,"otobe.hokkaido.jp":!0,"otofuke.hokkaido.jp":!0,"otoineppu.hokkaido.jp":!0,"oumu.hokkaido.jp":!0,"ozora.hokkaido.jp":!0,"pippu.hokkaido.jp":!0,"rankoshi.hokkaido.jp":!0,"rebun.hokkaido.jp":!0,"rikubetsu.hokkaido.jp":!0,"rishiri.hokkaido.jp":!0,"rishirifuji.hokkaido.jp":!0,"saroma.hokkaido.jp":!0,"sarufutsu.hokkaido.jp":!0,"shakotan.hokkaido.jp":!0,"shari.hokkaido.jp":!0,"shibecha.hokkaido.jp":!0,"shibetsu.hokkaido.jp":!0,"shikabe.hokkaido.jp":!0,"shikaoi.hokkaido.jp":!0,"shimamaki.hokkaido.jp":!0,"shimizu.hokkaido.jp":!0,"shimokawa.hokkaido.jp":!0,"shinshinotsu.hokkaido.jp":!0,"shintoku.hokkaido.jp":!0,"shiranuka.hokkaido.jp":!0,"shiraoi.hokkaido.jp":!0,"shiriuchi.hokkaido.jp":!0,"sobetsu.hokkaido.jp":!0,"sunagawa.hokkaido.jp":!0,"taiki.hokkaido.jp":!0,"takasu.hokkaido.jp":!0,"takikawa.hokkaido.jp":!0,
    "takinoue.hokkaido.jp":!0,"teshikaga.hokkaido.jp":!0,"tobetsu.hokkaido.jp":!0,"tohma.hokkaido.jp":!0,"tomakomai.hokkaido.jp":!0,"tomari.hokkaido.jp":!0,"toya.hokkaido.jp":!0,"toyako.hokkaido.jp":!0,"toyotomi.hokkaido.jp":!0,"toyoura.hokkaido.jp":!0,"tsubetsu.hokkaido.jp":!0,"tsukigata.hokkaido.jp":!0,"urakawa.hokkaido.jp":!0,"urausu.hokkaido.jp":!0,"uryu.hokkaido.jp":!0,"utashinai.hokkaido.jp":!0,"wakkanai.hokkaido.jp":!0,"wassamu.hokkaido.jp":!0,"yakumo.hokkaido.jp":!0,"yoichi.hokkaido.jp":!0,"aioi.hyogo.jp":!0,"akashi.hyogo.jp":!0,"ako.hyogo.jp":!0,"amagasaki.hyogo.jp":!0,"aogaki.hyogo.jp":!0,"asago.hyogo.jp":!0,"ashiya.hyogo.jp":!0,"awaji.hyogo.jp":!0,"fukusaki.hyogo.jp":!0,"goshiki.hyogo.jp":!0,"harima.hyogo.jp":!0,"himeji.hyogo.jp":!0,"ichikawa.hyogo.jp":!0,"inagawa.hyogo.jp":!0,"itami.hyogo.jp":!0,"kakogawa.hyogo.jp":!0,"kamigori.hyogo.jp":!0,"kamikawa.hyogo.jp":!0,"kasai.hyogo.jp":!0,"kasuga.hyogo.jp":!0,"kawanishi.hyogo.jp":!0,"miki.hyogo.jp":!0,"minamiawaji.hyogo.jp":!0,"nishinomiya.hyogo.jp":!0,"nishiwaki.hyogo.jp":!0,"ono.hyogo.jp":!0,"sanda.hyogo.jp":!0,"sannan.hyogo.jp":!0,"sasayama.hyogo.jp":!0,"sayo.hyogo.jp":!0,"shingu.hyogo.jp":!0,"shinonsen.hyogo.jp":!0,"shiso.hyogo.jp":!0,"sumoto.hyogo.jp":!0,"taishi.hyogo.jp":!0,"taka.hyogo.jp":!0,"takarazuka.hyogo.jp":!0,"takasago.hyogo.jp":!0,"takino.hyogo.jp":!0,"tamba.hyogo.jp":!0,"tatsuno.hyogo.jp":!0,"toyooka.hyogo.jp":!0,"yabu.hyogo.jp":!0,"yashiro.hyogo.jp":!0,"yoka.hyogo.jp":!0,"yokawa.hyogo.jp":!0,"ami.ibaraki.jp":!0,"asahi.ibaraki.jp":!0,"bando.ibaraki.jp":!0,"chikusei.ibaraki.jp":!0,"daigo.ibaraki.jp":!0,"fujishiro.ibaraki.jp":!0,"hitachi.ibaraki.jp":!0,"hitachinaka.ibaraki.jp":!0,"hitachiomiya.ibaraki.jp":!0,"hitachiota.ibaraki.jp":!0,"ibaraki.ibaraki.jp":!0,"ina.ibaraki.jp":!0,"inashiki.ibaraki.jp":!0,"itako.ibaraki.jp":!0,"iwama.ibaraki.jp":!0,"joso.ibaraki.jp":!0,"kamisu.ibaraki.jp":!0,"kasama.ibaraki.jp":!0,"kashima.ibaraki.jp":!0,"kasumigaura.ibaraki.jp":!0,"koga.ibaraki.jp":!0,"miho.ibaraki.jp":!0,"mito.ibaraki.jp":!0,"moriya.ibaraki.jp":!0,"naka.ibaraki.jp":!0,"namegata.ibaraki.jp":!0,"oarai.ibaraki.jp":!0,"ogawa.ibaraki.jp":!0,"omitama.ibaraki.jp":!0,"ryugasaki.ibaraki.jp":!0,"sakai.ibaraki.jp":!0,"sakuragawa.ibaraki.jp":!0,"shimodate.ibaraki.jp":!0,"shimotsuma.ibaraki.jp":!0,"shirosato.ibaraki.jp":!0,"sowa.ibaraki.jp":!0,"suifu.ibaraki.jp":!0,"takahagi.ibaraki.jp":!0,"tamatsukuri.ibaraki.jp":!0,"tokai.ibaraki.jp":!0,"tomobe.ibaraki.jp":!0,"tone.ibaraki.jp":!0,"toride.ibaraki.jp":!0,"tsuchiura.ibaraki.jp":!0,"tsukuba.ibaraki.jp":!0,"uchihara.ibaraki.jp":!0,"ushiku.ibaraki.jp":!0,"yachiyo.ibaraki.jp":!0,"yamagata.ibaraki.jp":!0,"yawara.ibaraki.jp":!0,"yuki.ibaraki.jp":!0,"anamizu.ishikawa.jp":!0,"hakui.ishikawa.jp":!0,"hakusan.ishikawa.jp":!0,"kaga.ishikawa.jp":!0,"kahoku.ishikawa.jp":!0,"kanazawa.ishikawa.jp":!0,"kawakita.ishikawa.jp":!0,"komatsu.ishikawa.jp":!0,"nakanoto.ishikawa.jp":!0,"nanao.ishikawa.jp":!0,"nomi.ishikawa.jp":!0,"nonoichi.ishikawa.jp":!0,"noto.ishikawa.jp":!0,"shika.ishikawa.jp":!0,"suzu.ishikawa.jp":!0,"tsubata.ishikawa.jp":!0,"tsurugi.ishikawa.jp":!0,"uchinada.ishikawa.jp":!0,"wajima.ishikawa.jp":!0,"fudai.iwate.jp":!0,"fujisawa.iwate.jp":!0,"hanamaki.iwate.jp":!0,"hiraizumi.iwate.jp":!0,"hirono.iwate.jp":!0,"ichinohe.iwate.jp":!0,"ichinoseki.iwate.jp":!0,"iwaizumi.iwate.jp":!0,"iwate.iwate.jp":!0,"joboji.iwate.jp":!0,"kamaishi.iwate.jp":!0,"kanegasaki.iwate.jp":!0,"karumai.iwate.jp":!0,"kawai.iwate.jp":!0,"kitakami.iwate.jp":!0,"kuji.iwate.jp":!0,"kunohe.iwate.jp":!0,"kuzumaki.iwate.jp":!0,"miyako.iwate.jp":!0,"mizusawa.iwate.jp":!0,"morioka.iwate.jp":!0,"ninohe.iwate.jp":!0,"noda.iwate.jp":!0,"ofunato.iwate.jp":!0,"oshu.iwate.jp":!0,"otsuchi.iwate.jp":!0,"rikuzentakata.iwate.jp":!0,"shiwa.iwate.jp":!0,"shizukuishi.iwate.jp":!0,"sumita.iwate.jp":!0,"tanohata.iwate.jp":!0,"tono.iwate.jp":!0,"yahaba.iwate.jp":!0,"yamada.iwate.jp":!0,"ayagawa.kagawa.jp":!0,"higashikagawa.kagawa.jp":!0,"kanonji.kagawa.jp":!0,"kotohira.kagawa.jp":!0,"manno.kagawa.jp":!0,"marugame.kagawa.jp":!0,"mitoyo.kagawa.jp":!0,"naoshima.kagawa.jp":!0,"sanuki.kagawa.jp":!0,"tadotsu.kagawa.jp":!0,"takamatsu.kagawa.jp":!0,"tonosho.kagawa.jp":!0,"uchinomi.kagawa.jp":!0,"utazu.kagawa.jp":!0,"zentsuji.kagawa.jp":!0,"akune.kagoshima.jp":!0,"amami.kagoshima.jp":!0,"hioki.kagoshima.jp":!0,"isa.kagoshima.jp":!0,"isen.kagoshima.jp":!0,"izumi.kagoshima.jp":!0,"kagoshima.kagoshima.jp":!0,"kanoya.kagoshima.jp":!0,"kawanabe.kagoshima.jp":!0,"kinko.kagoshima.jp":!0,"kouyama.kagoshima.jp":!0,"makurazaki.kagoshima.jp":!0,"matsumoto.kagoshima.jp":!0,"minamitane.kagoshima.jp":!0,"nakatane.kagoshima.jp":!0,"nishinoomote.kagoshima.jp":!0,"satsumasendai.kagoshima.jp":!0,"soo.kagoshima.jp":!0,"tarumizu.kagoshima.jp":!0,"yusui.kagoshima.jp":!0,"aikawa.kanagawa.jp":!0,"atsugi.kanagawa.jp":!0,"ayase.kanagawa.jp":!0,"chigasaki.kanagawa.jp":!0,"ebina.kanagawa.jp":!0,"fujisawa.kanagawa.jp":!0,"hadano.kanagawa.jp":!0,"hakone.kanagawa.jp":!0,"hiratsuka.kanagawa.jp":!0,"isehara.kanagawa.jp":!0,"kaisei.kanagawa.jp":!0,"kamakura.kanagawa.jp":!0,"kiyokawa.kanagawa.jp":!0,"matsuda.kanagawa.jp":!0,"minamiashigara.kanagawa.jp":!0,"miura.kanagawa.jp":!0,"nakai.kanagawa.jp":!0,"ninomiya.kanagawa.jp":!0,"odawara.kanagawa.jp":!0,"oi.kanagawa.jp":!0,"oiso.kanagawa.jp":!0,"sagamihara.kanagawa.jp":!0,"samukawa.kanagawa.jp":!0,"tsukui.kanagawa.jp":!0,"yamakita.kanagawa.jp":!0,"yamato.kanagawa.jp":!0,"yokosuka.kanagawa.jp":!0,"yugawara.kanagawa.jp":!0,"zama.kanagawa.jp":!0,"zushi.kanagawa.jp":!0,"aki.kochi.jp":!0,"geisei.kochi.jp":!0,"hidaka.kochi.jp":!0,"higashitsuno.kochi.jp":!0,"ino.kochi.jp":!0,"kagami.kochi.jp":!0,"kami.kochi.jp":!0,"kitagawa.kochi.jp":!0,"kochi.kochi.jp":!0,"mihara.kochi.jp":!0,"motoyama.kochi.jp":!0,"muroto.kochi.jp":!0,"nahari.kochi.jp":!0,"nakamura.kochi.jp":!0,"nankoku.kochi.jp":!0,"nishitosa.kochi.jp":!0,"niyodogawa.kochi.jp":!0,"ochi.kochi.jp":!0,"okawa.kochi.jp":!0,"otoyo.kochi.jp":!0,"otsuki.kochi.jp":!0,"sakawa.kochi.jp":!0,"sukumo.kochi.jp":!0,"susaki.kochi.jp":!0,"tosa.kochi.jp":!0,"tosashimizu.kochi.jp":!0,"toyo.kochi.jp":!0,"tsuno.kochi.jp":!0,"umaji.kochi.jp":!0,"yasuda.kochi.jp":!0,"yusuhara.kochi.jp":!0,"amakusa.kumamoto.jp":!0,"arao.kumamoto.jp":!0,"aso.kumamoto.jp":!0,"choyo.kumamoto.jp":!0,"gyokuto.kumamoto.jp":!0,"hitoyoshi.kumamoto.jp":!0,"kamiamakusa.kumamoto.jp":!0,"kashima.kumamoto.jp":!0,"kikuchi.kumamoto.jp":!0,"kosa.kumamoto.jp":!0,"kumamoto.kumamoto.jp":!0,"mashiki.kumamoto.jp":!0,"mifune.kumamoto.jp":!0,"minamata.kumamoto.jp":!0,"minamioguni.kumamoto.jp":!0,"nagasu.kumamoto.jp":!0,"nishihara.kumamoto.jp":!0,"oguni.kumamoto.jp":!0,"ozu.kumamoto.jp":!0,"sumoto.kumamoto.jp":!0,"takamori.kumamoto.jp":!0,"uki.kumamoto.jp":!0,"uto.kumamoto.jp":!0,"yamaga.kumamoto.jp":!0,"yamato.kumamoto.jp":!0,"yatsushiro.kumamoto.jp":!0,"ayabe.kyoto.jp":!0,"fukuchiyama.kyoto.jp":!0,"higashiyama.kyoto.jp":!0,"ide.kyoto.jp":!0,"ine.kyoto.jp":!0,"joyo.kyoto.jp":!0,"kameoka.kyoto.jp":!0,"kamo.kyoto.jp":!0,"kita.kyoto.jp":!0,"kizu.kyoto.jp":!0,"kumiyama.kyoto.jp":!0,"kyotamba.kyoto.jp":!0,"kyotanabe.kyoto.jp":!0,"kyotango.kyoto.jp":!0,"maizuru.kyoto.jp":!0,"minami.kyoto.jp":!0,"minamiyamashiro.kyoto.jp":!0,"miyazu.kyoto.jp":!0,"muko.kyoto.jp":!0,"nagaokakyo.kyoto.jp":!0,"nakagyo.kyoto.jp":!0,"nantan.kyoto.jp":!0,"oyamazaki.kyoto.jp":!0,"sakyo.kyoto.jp":!0,"seika.kyoto.jp":!0,"tanabe.kyoto.jp":!0,"uji.kyoto.jp":!0,"ujitawara.kyoto.jp":!0,"wazuka.kyoto.jp":!0,"yamashina.kyoto.jp":!0,"yawata.kyoto.jp":!0,"asahi.mie.jp":!0,"inabe.mie.jp":!0,"ise.mie.jp":!0,"kameyama.mie.jp":!0,"kawagoe.mie.jp":!0,"kiho.mie.jp":!0,"kisosaki.mie.jp":!0,"kiwa.mie.jp":!0,"komono.mie.jp":!0,"kumano.mie.jp":!0,"kuwana.mie.jp":!0,"matsusaka.mie.jp":!0,"meiwa.mie.jp":!0,"mihama.mie.jp":!0,"minamiise.mie.jp":!0,"misugi.mie.jp":!0,"miyama.mie.jp":!0,"nabari.mie.jp":!0,"shima.mie.jp":!0,"suzuka.mie.jp":!0,"tado.mie.jp":!0,"taiki.mie.jp":!0,"taki.mie.jp":!0,"tamaki.mie.jp":!0,"toba.mie.jp":!0,"tsu.mie.jp":!0,"udono.mie.jp":!0,"ureshino.mie.jp":!0,"watarai.mie.jp":!0,"yokkaichi.mie.jp":!0,"furukawa.miyagi.jp":!0,"higashimatsushima.miyagi.jp":!0,"ishinomaki.miyagi.jp":!0,"iwanuma.miyagi.jp":!0,"kakuda.miyagi.jp":!0,"kami.miyagi.jp":!0,"kawasaki.miyagi.jp":!0,"kesennuma.miyagi.jp":!0,"marumori.miyagi.jp":!0,"matsushima.miyagi.jp":!0,"minamisanriku.miyagi.jp":!0,"misato.miyagi.jp":!0,"murata.miyagi.jp":!0,"natori.miyagi.jp":!0,"ogawara.miyagi.jp":!0,"ohira.miyagi.jp":!0,"onagawa.miyagi.jp":!0,"osaki.miyagi.jp":!0,"rifu.miyagi.jp":!0,"semine.miyagi.jp":!0,"shibata.miyagi.jp":!0,"shichikashuku.miyagi.jp":!0,"shikama.miyagi.jp":!0,"shiogama.miyagi.jp":!0,"shiroishi.miyagi.jp":!0,"tagajo.miyagi.jp":!0,"taiwa.miyagi.jp":!0,"tome.miyagi.jp":!0,"tomiya.miyagi.jp":!0,"wakuya.miyagi.jp":!0,"watari.miyagi.jp":!0,"yamamoto.miyagi.jp":!0,"zao.miyagi.jp":!0,"aya.miyazaki.jp":!0,"ebino.miyazaki.jp":!0,"gokase.miyazaki.jp":!0,"hyuga.miyazaki.jp":!0,"kadogawa.miyazaki.jp":!0,"kawaminami.miyazaki.jp":!0,"kijo.miyazaki.jp":!0,"kitagawa.miyazaki.jp":!0,"kitakata.miyazaki.jp":!0,"kitaura.miyazaki.jp":!0,"kobayashi.miyazaki.jp":!0,"kunitomi.miyazaki.jp":!0,"kushima.miyazaki.jp":!0,"mimata.miyazaki.jp":!0,"miyakonojo.miyazaki.jp":!0,"miyazaki.miyazaki.jp":!0,"morotsuka.miyazaki.jp":!0,"nichinan.miyazaki.jp":!0,"nishimera.miyazaki.jp":!0,"nobeoka.miyazaki.jp":!0,"saito.miyazaki.jp":!0,"shiiba.miyazaki.jp":!0,"shintomi.miyazaki.jp":!0,"takaharu.miyazaki.jp":!0,"takanabe.miyazaki.jp":!0,"takazaki.miyazaki.jp":!0,"tsuno.miyazaki.jp":!0,"achi.nagano.jp":!0,"agematsu.nagano.jp":!0,"anan.nagano.jp":!0,"aoki.nagano.jp":!0,"asahi.nagano.jp":!0,"azumino.nagano.jp":!0,"chikuhoku.nagano.jp":!0,"chikuma.nagano.jp":!0,"chino.nagano.jp":!0,"fujimi.nagano.jp":!0,"hakuba.nagano.jp":!0,"hara.nagano.jp":!0,"hiraya.nagano.jp":!0,"iida.nagano.jp":!0,"iijima.nagano.jp":!0,"iiyama.nagano.jp":!0,"iizuna.nagano.jp":!0,"ikeda.nagano.jp":!0,"ikusaka.nagano.jp":!0,"ina.nagano.jp":!0,"karuizawa.nagano.jp":!0,"kawakami.nagano.jp":!0,"kiso.nagano.jp":!0,"kisofukushima.nagano.jp":!0,"kitaaiki.nagano.jp":!0,"komagane.nagano.jp":!0,"komoro.nagano.jp":!0,"matsukawa.nagano.jp":!0,"matsumoto.nagano.jp":!0,"miasa.nagano.jp":!0,"minamiaiki.nagano.jp":!0,"minamimaki.nagano.jp":!0,"minamiminowa.nagano.jp":!0,"minowa.nagano.jp":!0,"miyada.nagano.jp":!0,"miyota.nagano.jp":!0,"mochizuki.nagano.jp":!0,"nagano.nagano.jp":!0,"nagawa.nagano.jp":!0,"nagiso.nagano.jp":!0,"nakagawa.nagano.jp":!0,"nakano.nagano.jp":!0,"nozawaonsen.nagano.jp":!0,"obuse.nagano.jp":!0,"ogawa.nagano.jp":!0,"okaya.nagano.jp":!0,"omachi.nagano.jp":!0,"omi.nagano.jp":!0,"ookuwa.nagano.jp":!0,"ooshika.nagano.jp":!0,"otaki.nagano.jp":!0,"otari.nagano.jp":!0,"sakae.nagano.jp":!0,"sakaki.nagano.jp":!0,"saku.nagano.jp":!0,"sakuho.nagano.jp":!0,"shimosuwa.nagano.jp":!0,"shinanomachi.nagano.jp":!0,"shiojiri.nagano.jp":!0,"suwa.nagano.jp":!0,"suzaka.nagano.jp":!0,"takagi.nagano.jp":!0,"takamori.nagano.jp":!0,"takayama.nagano.jp":!0,"tateshina.nagano.jp":!0,"tatsuno.nagano.jp":!0,"togakushi.nagano.jp":!0,"togura.nagano.jp":!0,"tomi.nagano.jp":!0,"ueda.nagano.jp":!0,"wada.nagano.jp":!0,"yamagata.nagano.jp":!0,"yamanouchi.nagano.jp":!0,"yasaka.nagano.jp":!0,"yasuoka.nagano.jp":!0,"chijiwa.nagasaki.jp":!0,"futsu.nagasaki.jp":!0,"goto.nagasaki.jp":!0,"hasami.nagasaki.jp":!0,"hirado.nagasaki.jp":!0,"iki.nagasaki.jp":!0,"isahaya.nagasaki.jp":!0,"kawatana.nagasaki.jp":!0,"kuchinotsu.nagasaki.jp":!0,"matsuura.nagasaki.jp":!0,"nagasaki.nagasaki.jp":!0,"obama.nagasaki.jp":!0,"omura.nagasaki.jp":!0,"oseto.nagasaki.jp":!0,"saikai.nagasaki.jp":!0,"sasebo.nagasaki.jp":!0,"seihi.nagasaki.jp":!0,"shimabara.nagasaki.jp":!0,"shinkamigoto.nagasaki.jp":!0,"togitsu.nagasaki.jp":!0,"tsushima.nagasaki.jp":!0,"unzen.nagasaki.jp":!0,"ando.nara.jp":!0,"gose.nara.jp":!0,"heguri.nara.jp":!0,"higashiyoshino.nara.jp":!0,"ikaruga.nara.jp":!0,"ikoma.nara.jp":!0,"kamikitayama.nara.jp":!0,"kanmaki.nara.jp":!0,"kashiba.nara.jp":!0,"kashihara.nara.jp":!0,"katsuragi.nara.jp":!0,"kawai.nara.jp":!0,"kawakami.nara.jp":!0,"kawanishi.nara.jp":!0,"koryo.nara.jp":!0,"kurotaki.nara.jp":!0,"mitsue.nara.jp":!0,"miyake.nara.jp":!0,"nara.nara.jp":!0,"nosegawa.nara.jp":!0,"oji.nara.jp":!0,"ouda.nara.jp":!0,"oyodo.nara.jp":!0,"sakurai.nara.jp":!0,"sango.nara.jp":!0,"shimoichi.nara.jp":!0,"shimokitayama.nara.jp":!0,"shinjo.nara.jp":!0,"soni.nara.jp":!0,"takatori.nara.jp":!0,"tawaramoto.nara.jp":!0,"tenkawa.nara.jp":!0,"tenri.nara.jp":!0,"uda.nara.jp":!0,"yamatokoriyama.nara.jp":!0,"yamatotakada.nara.jp":!0,"yamazoe.nara.jp":!0,"yoshino.nara.jp":!0,"aga.niigata.jp":!0,"agano.niigata.jp":!0,"gosen.niigata.jp":!0,"itoigawa.niigata.jp":!0,"izumozaki.niigata.jp":!0,"joetsu.niigata.jp":!0,"kamo.niigata.jp":!0,"kariwa.niigata.jp":!0,"kashiwazaki.niigata.jp":!0,"minamiuonuma.niigata.jp":!0,"mitsuke.niigata.jp":!0,"muika.niigata.jp":!0,"murakami.niigata.jp":!0,"myoko.niigata.jp":!0,"nagaoka.niigata.jp":!0,"niigata.niigata.jp":!0,"ojiya.niigata.jp":!0,"omi.niigata.jp":!0,"sado.niigata.jp":!0,"sanjo.niigata.jp":!0,"seiro.niigata.jp":!0,"seirou.niigata.jp":!0,"sekikawa.niigata.jp":!0,"shibata.niigata.jp":!0,"tagami.niigata.jp":!0,"tainai.niigata.jp":!0,"tochio.niigata.jp":!0,"tokamachi.niigata.jp":!0,"tsubame.niigata.jp":!0,"tsunan.niigata.jp":!0,"uonuma.niigata.jp":!0,"yahiko.niigata.jp":!0,"yoita.niigata.jp":!0,"yuzawa.niigata.jp":!0,"beppu.oita.jp":!0,"bungoono.oita.jp":!0,"bungotakada.oita.jp":!0,"hasama.oita.jp":!0,"hiji.oita.jp":!0,"himeshima.oita.jp":!0,"hita.oita.jp":!0,"kamitsue.oita.jp":!0,"kokonoe.oita.jp":!0,"kuju.oita.jp":!0,"kunisaki.oita.jp":!0,"kusu.oita.jp":!0,"oita.oita.jp":!0,"saiki.oita.jp":!0,"taketa.oita.jp":!0,"tsukumi.oita.jp":!0,"usa.oita.jp":!0,"usuki.oita.jp":!0,"yufu.oita.jp":!0,"akaiwa.okayama.jp":!0,"asakuchi.okayama.jp":!0,"bizen.okayama.jp":!0,"hayashima.okayama.jp":!0,"ibara.okayama.jp":!0,"kagamino.okayama.jp":!0,"kasaoka.okayama.jp":!0,"kibichuo.okayama.jp":!0,"kumenan.okayama.jp":!0,"kurashiki.okayama.jp":!0,"maniwa.okayama.jp":!0,"misaki.okayama.jp":!0,"nagi.okayama.jp":!0,"niimi.okayama.jp":!0,"nishiawakura.okayama.jp":!0,"okayama.okayama.jp":!0,"satosho.okayama.jp":!0,"setouchi.okayama.jp":!0,"shinjo.okayama.jp":!0,"shoo.okayama.jp":!0,"soja.okayama.jp":!0,"takahashi.okayama.jp":!0,"tamano.okayama.jp":!0,"tsuyama.okayama.jp":!0,"wake.okayama.jp":!0,"yakage.okayama.jp":!0,"aguni.okinawa.jp":!0,"ginowan.okinawa.jp":!0,"ginoza.okinawa.jp":!0,"gushikami.okinawa.jp":!0,"haebaru.okinawa.jp":!0,"higashi.okinawa.jp":!0,"hirara.okinawa.jp":!0,"iheya.okinawa.jp":!0,"ishigaki.okinawa.jp":!0,"ishikawa.okinawa.jp":!0,"itoman.okinawa.jp":!0,"izena.okinawa.jp":!0,"kadena.okinawa.jp":!0,"kin.okinawa.jp":!0,"kitadaito.okinawa.jp":!0,"kitanakagusuku.okinawa.jp":!0,"kumejima.okinawa.jp":!0,"kunigami.okinawa.jp":!0,"minamidaito.okinawa.jp":!0,"motobu.okinawa.jp":!0,"nago.okinawa.jp":!0,"naha.okinawa.jp":!0,"nakagusuku.okinawa.jp":!0,"nakijin.okinawa.jp":!0,"nanjo.okinawa.jp":!0,"nishihara.okinawa.jp":!0,"ogimi.okinawa.jp":!0,"okinawa.okinawa.jp":!0,"onna.okinawa.jp":!0,"shimoji.okinawa.jp":!0,"taketomi.okinawa.jp":!0,"tarama.okinawa.jp":!0,"tokashiki.okinawa.jp":!0,"tomigusuku.okinawa.jp":!0,"tonaki.okinawa.jp":!0,"urasoe.okinawa.jp":!0,"uruma.okinawa.jp":!0,"yaese.okinawa.jp":!0,"yomitan.okinawa.jp":!0,"yonabaru.okinawa.jp":!0,"yonaguni.okinawa.jp":!0,"zamami.okinawa.jp":!0,"abeno.osaka.jp":!0,"chihayaakasaka.osaka.jp":!0,"chuo.osaka.jp":!0,"daito.osaka.jp":!0,"fujiidera.osaka.jp":!0,"habikino.osaka.jp":!0,"hannan.osaka.jp":!0,"higashiosaka.osaka.jp":!0,"higashisumiyoshi.osaka.jp":!0,"higashiyodogawa.osaka.jp":!0,"hirakata.osaka.jp":!0,"ibaraki.osaka.jp":!0,"ikeda.osaka.jp":!0,"izumi.osaka.jp":!0,"izumiotsu.osaka.jp":!0,"izumisano.osaka.jp":!0,"kadoma.osaka.jp":!0,"kaizuka.osaka.jp":!0,"kanan.osaka.jp":!0,"kashiwara.osaka.jp":!0,"katano.osaka.jp":!0,"kawachinagano.osaka.jp":!0,"kishiwada.osaka.jp":!0,"kita.osaka.jp":!0,"kumatori.osaka.jp":!0,"matsubara.osaka.jp":!0,"minato.osaka.jp":!0,"minoh.osaka.jp":!0,"misaki.osaka.jp":!0,"moriguchi.osaka.jp":!0,"neyagawa.osaka.jp":!0,"nishi.osaka.jp":!0,"nose.osaka.jp":!0,"osakasayama.osaka.jp":!0,"sakai.osaka.jp":!0,"sayama.osaka.jp":!0,"sennan.osaka.jp":!0,"settsu.osaka.jp":!0,"shijonawate.osaka.jp":!0,"shimamoto.osaka.jp":!0,"suita.osaka.jp":!0,"tadaoka.osaka.jp":!0,"taishi.osaka.jp":!0,"tajiri.osaka.jp":!0,"takaishi.osaka.jp":!0,"takatsuki.osaka.jp":!0,"tondabayashi.osaka.jp":!0,"toyonaka.osaka.jp":!0,"toyono.osaka.jp":!0,"yao.osaka.jp":!0,"ariake.saga.jp":!0,"arita.saga.jp":!0,"fukudomi.saga.jp":!0,"genkai.saga.jp":!0,"hamatama.saga.jp":!0,"hizen.saga.jp":!0,"imari.saga.jp":!0,"kamimine.saga.jp":!0,"kanzaki.saga.jp":!0,"karatsu.saga.jp":!0,"kashima.saga.jp":!0,"kitagata.saga.jp":!0,"kitahata.saga.jp":!0,"kiyama.saga.jp":!0,"kouhoku.saga.jp":!0,"kyuragi.saga.jp":!0,"nishiarita.saga.jp":!0,"ogi.saga.jp":!0,"omachi.saga.jp":!0,"ouchi.saga.jp":!0,"saga.saga.jp":!0,"shiroishi.saga.jp":!0,"taku.saga.jp":!0,"tara.saga.jp":!0,"tosu.saga.jp":!0,"yoshinogari.saga.jp":!0,"arakawa.saitama.jp":!0,"asaka.saitama.jp":!0,"chichibu.saitama.jp":!0,"fujimi.saitama.jp":!0,"fujimino.saitama.jp":!0,"fukaya.saitama.jp":!0,"hanno.saitama.jp":!0,"hanyu.saitama.jp":!0,"hasuda.saitama.jp":!0,"hatogaya.saitama.jp":!0,"hatoyama.saitama.jp":!0,"hidaka.saitama.jp":!0,"higashichichibu.saitama.jp":!0,"higashimatsuyama.saitama.jp":!0,"honjo.saitama.jp":!0,"ina.saitama.jp":!0,"iruma.saitama.jp":!0,"iwatsuki.saitama.jp":!0,"kamiizumi.saitama.jp":!0,"kamikawa.saitama.jp":!0,"kamisato.saitama.jp":!0,"kasukabe.saitama.jp":!0,"kawagoe.saitama.jp":!0,"kawaguchi.saitama.jp":!0,"kawajima.saitama.jp":!0,"kazo.saitama.jp":!0,"kitamoto.saitama.jp":!0,"koshigaya.saitama.jp":!0,"kounosu.saitama.jp":!0,"kuki.saitama.jp":!0,"kumagaya.saitama.jp":!0,"matsubushi.saitama.jp":!0,"minano.saitama.jp":!0,"misato.saitama.jp":!0,"miyashiro.saitama.jp":!0,"miyoshi.saitama.jp":!0,"moroyama.saitama.jp":!0,"nagatoro.saitama.jp":!0,"namegawa.saitama.jp":!0,"niiza.saitama.jp":!0,"ogano.saitama.jp":!0,"ogawa.saitama.jp":!0,"ogose.saitama.jp":!0,"okegawa.saitama.jp":!0,"omiya.saitama.jp":!0,"otaki.saitama.jp":!0,"ranzan.saitama.jp":!0,"ryokami.saitama.jp":!0,"saitama.saitama.jp":!0,"sakado.saitama.jp":!0,"satte.saitama.jp":!0,"sayama.saitama.jp":!0,"shiki.saitama.jp":!0,"shiraoka.saitama.jp":!0,"soka.saitama.jp":!0,"sugito.saitama.jp":!0,"toda.saitama.jp":!0,"tokigawa.saitama.jp":!0,"tokorozawa.saitama.jp":!0,"tsurugashima.saitama.jp":!0,"urawa.saitama.jp":!0,"warabi.saitama.jp":!0,"yashio.saitama.jp":!0,"yokoze.saitama.jp":!0,"yono.saitama.jp":!0,"yorii.saitama.jp":!0,"yoshida.saitama.jp":!0,"yoshikawa.saitama.jp":!0,"yoshimi.saitama.jp":!0,"aisho.shiga.jp":!0,"gamo.shiga.jp":!0,"higashiomi.shiga.jp":!0,"hikone.shiga.jp":!0,"koka.shiga.jp":!0,"konan.shiga.jp":!0,"kosei.shiga.jp":!0,"koto.shiga.jp":!0,"kusatsu.shiga.jp":!0,"maibara.shiga.jp":!0,"moriyama.shiga.jp":!0,"nagahama.shiga.jp":!0,"nishiazai.shiga.jp":!0,"notogawa.shiga.jp":!0,"omihachiman.shiga.jp":!0,"otsu.shiga.jp":!0,"ritto.shiga.jp":!0,"ryuoh.shiga.jp":!0,"takashima.shiga.jp":!0,"takatsuki.shiga.jp":!0,"torahime.shiga.jp":!0,"toyosato.shiga.jp":!0,"yasu.shiga.jp":!0,"akagi.shimane.jp":!0,"ama.shimane.jp":!0,"gotsu.shimane.jp":!0,"hamada.shimane.jp":!0,"higashiizumo.shimane.jp":!0,"hikawa.shimane.jp":!0,"hikimi.shimane.jp":!0,"izumo.shimane.jp":!0,"kakinoki.shimane.jp":!0,"masuda.shimane.jp":!0,"matsue.shimane.jp":!0,"misato.shimane.jp":!0,"nishinoshima.shimane.jp":!0,"ohda.shimane.jp":!0,"okinoshima.shimane.jp":!0,"okuizumo.shimane.jp":!0,"shimane.shimane.jp":!0,"tamayu.shimane.jp":!0,"tsuwano.shimane.jp":!0,"unnan.shimane.jp":!0,"yakumo.shimane.jp":!0,"yasugi.shimane.jp":!0,"yatsuka.shimane.jp":!0,"arai.shizuoka.jp":!0,"atami.shizuoka.jp":!0,"fuji.shizuoka.jp":!0,"fujieda.shizuoka.jp":!0,"fujikawa.shizuoka.jp":!0,"fujinomiya.shizuoka.jp":!0,"fukuroi.shizuoka.jp":!0,"gotemba.shizuoka.jp":!0,"haibara.shizuoka.jp":!0,"hamamatsu.shizuoka.jp":!0,"higashiizu.shizuoka.jp":!0,"ito.shizuoka.jp":!0,"iwata.shizuoka.jp":!0,"izu.shizuoka.jp":!0,"izunokuni.shizuoka.jp":!0,"kakegawa.shizuoka.jp":!0,"kannami.shizuoka.jp":!0,"kawanehon.shizuoka.jp":!0,"kawazu.shizuoka.jp":!0,"kikugawa.shizuoka.jp":!0,"kosai.shizuoka.jp":!0,"makinohara.shizuoka.jp":!0,"matsuzaki.shizuoka.jp":!0,"minamiizu.shizuoka.jp":!0,"mishima.shizuoka.jp":!0,"morimachi.shizuoka.jp":!0,"nishiizu.shizuoka.jp":!0,"numazu.shizuoka.jp":!0,"omaezaki.shizuoka.jp":!0,"shimada.shizuoka.jp":!0,"shimizu.shizuoka.jp":!0,"shimoda.shizuoka.jp":!0,"shizuoka.shizuoka.jp":!0,"susono.shizuoka.jp":!0,"yaizu.shizuoka.jp":!0,"yoshida.shizuoka.jp":!0,"ashikaga.tochigi.jp":!0,"bato.tochigi.jp":!0,"haga.tochigi.jp":!0,"ichikai.tochigi.jp":!0,"iwafune.tochigi.jp":!0,"kaminokawa.tochigi.jp":!0,"kanuma.tochigi.jp":!0,"karasuyama.tochigi.jp":!0,"kuroiso.tochigi.jp":!0,"mashiko.tochigi.jp":!0,"mibu.tochigi.jp":!0,"moka.tochigi.jp":!0,"motegi.tochigi.jp":!0,"nasu.tochigi.jp":!0,"nasushiobara.tochigi.jp":!0,"nikko.tochigi.jp":!0,"nishikata.tochigi.jp":!0,"nogi.tochigi.jp":!0,"ohira.tochigi.jp":!0,"ohtawara.tochigi.jp":!0,"oyama.tochigi.jp":!0,"sakura.tochigi.jp":!0,"sano.tochigi.jp":!0,"shimotsuke.tochigi.jp":!0,"shioya.tochigi.jp":!0,"takanezawa.tochigi.jp":!0,"tochigi.tochigi.jp":!0,"tsuga.tochigi.jp":!0,"ujiie.tochigi.jp":!0,"utsunomiya.tochigi.jp":!0,"yaita.tochigi.jp":!0,"aizumi.tokushima.jp":!0,"anan.tokushima.jp":!0,"ichiba.tokushima.jp":!0,"itano.tokushima.jp":!0,"kainan.tokushima.jp":!0,"komatsushima.tokushima.jp":!0,"matsushige.tokushima.jp":!0,"mima.tokushima.jp":!0,"minami.tokushima.jp":!0,"miyoshi.tokushima.jp":!0,"mugi.tokushima.jp":!0,"nakagawa.tokushima.jp":!0,"naruto.tokushima.jp":!0,"sanagochi.tokushima.jp":!0,"shishikui.tokushima.jp":!0,"tokushima.tokushima.jp":!0,"wajiki.tokushima.jp":!0,"adachi.tokyo.jp":!0,"akiruno.tokyo.jp":!0,"akishima.tokyo.jp":!0,"aogashima.tokyo.jp":!0,"arakawa.tokyo.jp":!0,"bunkyo.tokyo.jp":!0,"chiyoda.tokyo.jp":!0,"chofu.tokyo.jp":!0,"chuo.tokyo.jp":!0,"edogawa.tokyo.jp":!0,"fuchu.tokyo.jp":!0,"fussa.tokyo.jp":!0,"hachijo.tokyo.jp":!0,"hachioji.tokyo.jp":!0,"hamura.tokyo.jp":!0,"higashikurume.tokyo.jp":!0,"higashimurayama.tokyo.jp":!0,"higashiyamato.tokyo.jp":!0,"hino.tokyo.jp":!0,"hinode.tokyo.jp":!0,"hinohara.tokyo.jp":!0,"inagi.tokyo.jp":!0,"itabashi.tokyo.jp":!0,"katsushika.tokyo.jp":!0,"kita.tokyo.jp":!0,"kiyose.tokyo.jp":!0,"kodaira.tokyo.jp":!0,"koganei.tokyo.jp":!0,"kokubunji.tokyo.jp":!0,"komae.tokyo.jp":!0,"koto.tokyo.jp":!0,"kouzushima.tokyo.jp":!0,"kunitachi.tokyo.jp":!0,"machida.tokyo.jp":!0,"meguro.tokyo.jp":!0,"minato.tokyo.jp":!0,"mitaka.tokyo.jp":!0,"mizuho.tokyo.jp":!0,"musashimurayama.tokyo.jp":!0,"musashino.tokyo.jp":!0,"nakano.tokyo.jp":!0,"nerima.tokyo.jp":!0,"ogasawara.tokyo.jp":!0,"okutama.tokyo.jp":!0,"ome.tokyo.jp":!0,"oshima.tokyo.jp":!0,"ota.tokyo.jp":!0,"setagaya.tokyo.jp":!0,"shibuya.tokyo.jp":!0,"shinagawa.tokyo.jp":!0,"shinjuku.tokyo.jp":!0,"suginami.tokyo.jp":!0,"sumida.tokyo.jp":!0,"tachikawa.tokyo.jp":!0,"taito.tokyo.jp":!0,"tama.tokyo.jp":!0,"toshima.tokyo.jp":!0,"chizu.tottori.jp":!0,"hino.tottori.jp":!0,"kawahara.tottori.jp":!0,"koge.tottori.jp":!0,"kotoura.tottori.jp":!0,"misasa.tottori.jp":!0,"nanbu.tottori.jp":!0,"nichinan.tottori.jp":!0,"sakaiminato.tottori.jp":!0,"tottori.tottori.jp":!0,"wakasa.tottori.jp":!0,"yazu.tottori.jp":!0,"yonago.tottori.jp":!0,"asahi.toyama.jp":!0,"fuchu.toyama.jp":!0,"fukumitsu.toyama.jp":!0,"funahashi.toyama.jp":!0,"himi.toyama.jp":!0,"imizu.toyama.jp":!0,"inami.toyama.jp":!0,"johana.toyama.jp":!0,"kamiichi.toyama.jp":!0,"kurobe.toyama.jp":!0,"nakaniikawa.toyama.jp":!0,"namerikawa.toyama.jp":!0,"nanto.toyama.jp":!0,"nyuzen.toyama.jp":!0,"oyabe.toyama.jp":!0,"taira.toyama.jp":!0,"takaoka.toyama.jp":!0,"tateyama.toyama.jp":!0,"toga.toyama.jp":!0,"tonami.toyama.jp":!0,"toyama.toyama.jp":!0,"unazuki.toyama.jp":!0,"uozu.toyama.jp":!0,"yamada.toyama.jp":!0,"arida.wakayama.jp":!0,"aridagawa.wakayama.jp":!0,"gobo.wakayama.jp":!0,"hashimoto.wakayama.jp":!0,"hidaka.wakayama.jp":!0,"hirogawa.wakayama.jp":!0,"inami.wakayama.jp":!0,"iwade.wakayama.jp":!0,"kainan.wakayama.jp":!0,"kamitonda.wakayama.jp":!0,"katsuragi.wakayama.jp":!0,"kimino.wakayama.jp":!0,"kinokawa.wakayama.jp":!0,"kitayama.wakayama.jp":!0,"koya.wakayama.jp":!0,"koza.wakayama.jp":!0,"kozagawa.wakayama.jp":!0,"kudoyama.wakayama.jp":!0,"kushimoto.wakayama.jp":!0,"mihama.wakayama.jp":!0,"misato.wakayama.jp":!0,"nachikatsuura.wakayama.jp":!0,"shingu.wakayama.jp":!0,"shirahama.wakayama.jp":!0,"taiji.wakayama.jp":!0,"tanabe.wakayama.jp":!0,"wakayama.wakayama.jp":!0,"yuasa.wakayama.jp":!0,"yura.wakayama.jp":!0,"asahi.yamagata.jp":!0,"funagata.yamagata.jp":!0,"higashine.yamagata.jp":!0,"iide.yamagata.jp":!0,"kahoku.yamagata.jp":!0,"kaminoyama.yamagata.jp":!0,"kaneyama.yamagata.jp":!0,"kawanishi.yamagata.jp":!0,"mamurogawa.yamagata.jp":!0,"mikawa.yamagata.jp":!0,"murayama.yamagata.jp":!0,"nagai.yamagata.jp":!0,"nakayama.yamagata.jp":!0,"nanyo.yamagata.jp":!0,"nishikawa.yamagata.jp":!0,"obanazawa.yamagata.jp":!0,"oe.yamagata.jp":!0,"oguni.yamagata.jp":!0,"ohkura.yamagata.jp":!0,"oishida.yamagata.jp":!0,"sagae.yamagata.jp":!0,"sakata.yamagata.jp":!0,"sakegawa.yamagata.jp":!0,"shinjo.yamagata.jp":!0,"shirataka.yamagata.jp":!0,"shonai.yamagata.jp":!0,"takahata.yamagata.jp":!0,"tendo.yamagata.jp":!0,"tozawa.yamagata.jp":!0,"tsuruoka.yamagata.jp":!0,"yamagata.yamagata.jp":!0,"yamanobe.yamagata.jp":!0,"yonezawa.yamagata.jp":!0,"yuza.yamagata.jp":!0,"abu.yamaguchi.jp":!0,"hagi.yamaguchi.jp":!0,"hikari.yamaguchi.jp":!0,"hofu.yamaguchi.jp":!0,"iwakuni.yamaguchi.jp":!0,"kudamatsu.yamaguchi.jp":!0,"mitou.yamaguchi.jp":!0,"nagato.yamaguchi.jp":!0,"oshima.yamaguchi.jp":!0,"shimonoseki.yamaguchi.jp":!0,"shunan.yamaguchi.jp":!0,"tabuse.yamaguchi.jp":!0,"tokuyama.yamaguchi.jp":!0,"toyota.yamaguchi.jp":!0,"ube.yamaguchi.jp":!0,"yuu.yamaguchi.jp":!0,"chuo.yamanashi.jp":!0,"doshi.yamanashi.jp":!0,"fuefuki.yamanashi.jp":!0,"fujikawa.yamanashi.jp":!0,"fujikawaguchiko.yamanashi.jp":!0,"fujiyoshida.yamanashi.jp":!0,"hayakawa.yamanashi.jp":!0,"hokuto.yamanashi.jp":!0,"ichikawamisato.yamanashi.jp":!0,"kai.yamanashi.jp":!0,"kofu.yamanashi.jp":!0,"koshu.yamanashi.jp":!0,"kosuge.yamanashi.jp":!0,"minami-alps.yamanashi.jp":!0,"minobu.yamanashi.jp":!0,"nakamichi.yamanashi.jp":!0,"nanbu.yamanashi.jp":!0,"narusawa.yamanashi.jp":!0,"nirasaki.yamanashi.jp":!0,"nishikatsura.yamanashi.jp":!0,"oshino.yamanashi.jp":!0,"otsuki.yamanashi.jp":!0,"showa.yamanashi.jp":!0,"tabayama.yamanashi.jp":!0,"tsuru.yamanashi.jp":!0,"uenohara.yamanashi.jp":!0,"yamanakako.yamanashi.jp":!0,"yamanashi.yamanashi.jp":!0,"*.ke":!0,kg:!0,"org.kg":!0,"net.kg":!0,"com.kg":!0,"edu.kg":!0,"gov.kg":!0,"mil.kg":!0,"*.kh":!0,ki:!0,"edu.ki":!0,"biz.ki":!0,"net.ki":!0,"org.ki":!0,"gov.ki":!0,"info.ki":!0,"com.ki":!0,km:!0,"org.km":!0,"nom.km":!0,"gov.km":!0,"prd.km":!0,"tm.km":!0,"edu.km":!0,"mil.km":!0,"ass.km":!0,"com.km":!0,"coop.km":!0,"asso.km":!0,"presse.km":!0,"medecin.km":!0,"notaires.km":!0,"pharmaciens.km":!0,"veterinaire.km":!0,"gouv.km":!0,kn:!0,"net.kn":!0,"org.kn":!0,"edu.kn":!0,"gov.kn":!0,kp:!0,"com.kp":!0,"edu.kp":!0,"gov.kp":!0,"org.kp":!0,"rep.kp":!0,"tra.kp":!0,kr:!0,"ac.kr":!0,"co.kr":!0,"es.kr":!0,"go.kr":!0,"hs.kr":!0,"kg.kr":!0,"mil.kr":!0,"ms.kr":!0,"ne.kr":!0,"or.kr":!0,"pe.kr":!0,"re.kr":!0,"sc.kr":!0,"busan.kr":!0,"chungbuk.kr":!0,"chungnam.kr":!0,"daegu.kr":!0,"daejeon.kr":!0,"gangwon.kr":!0,"gwangju.kr":!0,"gyeongbuk.kr":!0,"gyeonggi.kr":!0,"gyeongnam.kr":!0,"incheon.kr":!0,"jeju.kr":!0,"jeonbuk.kr":!0,"jeonnam.kr":!0,"seoul.kr":!0,"ulsan.kr":!0,"*.kw":!0,ky:!0,"edu.ky":!0,"gov.ky":!0,"com.ky":!0,"org.ky":!0,"net.ky":!0,kz:!0,"org.kz":!0,"edu.kz":!0,"net.kz":!0,"gov.kz":!0,"mil.kz":!0,"com.kz":!0,la:!0,"int.la":!0,"net.la":!0,"info.la":!0,"edu.la":!0,"gov.la":!0,"per.la":!0,"com.la":!0,"org.la":!0,lb:!0,"com.lb":!0,"edu.lb":!0,"gov.lb":!0,"net.lb":!0,"org.lb":!0,lc:!0,"com.lc":!0,"net.lc":!0,"co.lc":!0,"org.lc":!0,"edu.lc":!0,"gov.lc":!0,li:!0,lk:!0,"gov.lk":!0,"sch.lk":!0,"net.lk":!0,"int.lk":!0,"com.lk":!0,"org.lk":!0,"edu.lk":!0,"ngo.lk":!0,"soc.lk":!0,"web.lk":!0,"ltd.lk":!0,"assn.lk":!0,"grp.lk":!0,"hotel.lk":!0,lr:!0,"com.lr":!0,"edu.lr":!0,"gov.lr":!0,"org.lr":!0,"net.lr":!0,ls:!0,"co.ls":!0,"org.ls":!0,lt:!0,"gov.lt":!0,lu:!0,lv:!0,"com.lv":!0,"edu.lv":!0,"gov.lv":!0,"org.lv":!0,"mil.lv":!0,"id.lv":!0,"net.lv":!0,"asn.lv":!0,"conf.lv":!0,ly:!0,"com.ly":!0,"net.ly":!0,"gov.ly":!0,"plc.ly":!0,"edu.ly":!0,"sch.ly":!0,"med.ly":!0,"org.ly":!0,"id.ly":!0,ma:!0,"co.ma":!0,"net.ma":!0,"gov.ma":!0,"org.ma":!0,"ac.ma":!0,"press.ma":!0,mc:!0,"tm.mc":!0,"asso.mc":!0,md:!0,me:!0,"co.me":!0,"net.me":!0,"org.me":!0,"edu.me":!0,"ac.me":!0,"gov.me":!0,"its.me":!0,"priv.me":!0,mg:!0,"org.mg":!0,"nom.mg":!0,"gov.mg":!0,"prd.mg":!0,"tm.mg":!0,"edu.mg":!0,"mil.mg":!0,"com.mg":!0,mh:!0,mil:!0,mk:!0,"com.mk":!0,"org.mk":!0,"net.mk":!0,"edu.mk":!0,"gov.mk":!0,"inf.mk":!0,"name.mk":!0,ml:!0,"com.ml":!0,"edu.ml":!0,"gouv.ml":!0,"gov.ml":!0,"net.ml":!0,"org.ml":!0,"presse.ml":!0,"*.mm":!0,mn:!0,"gov.mn":!0,"edu.mn":!0,"org.mn":!0,mo:!0,"com.mo":!0,"net.mo":!0,"org.mo":!0,"edu.mo":!0,"gov.mo":!0,mobi:!0,mp:!0,mq:!0,mr:!0,"gov.mr":!0,ms:!0,"com.ms":!0,"edu.ms":!0,"gov.ms":!0,"net.ms":!0,"org.ms":!0,mt:!0,"com.mt":!0,"edu.mt":!0,"net.mt":!0,"org.mt":!0,mu:!0,"com.mu":!0,"net.mu":!0,"org.mu":!0,"gov.mu":!0,"ac.mu":!0,"co.mu":!0,"or.mu":!0,museum:!0,"academy.museum":!0,"agriculture.museum":!0,"air.museum":!0,"airguard.museum":!0,"alabama.museum":!0,"alaska.museum":!0,"amber.museum":!0,"ambulance.museum":!0,"american.museum":!0,"americana.museum":!0,"americanantiques.museum":!0,"americanart.museum":!0,"amsterdam.museum":!0,"and.museum":!0,"annefrank.museum":!0,"anthro.museum":!0,"anthropology.museum":!0,"antiques.museum":!0,"aquarium.museum":!0,"arboretum.museum":!0,"archaeological.museum":!0,"archaeology.museum":!0,"architecture.museum":!0,"art.museum":!0,"artanddesign.museum":!0,"artcenter.museum":!0,"artdeco.museum":!0,"arteducation.museum":!0,"artgallery.museum":!0,"arts.museum":!0,"artsandcrafts.museum":!0,"asmatart.museum":!0,"assassination.museum":!0,"assisi.museum":!0,"association.museum":!0,"astronomy.museum":!0,"atlanta.museum":!0,"austin.museum":!0,"australia.museum":!0,"automotive.museum":!0,"aviation.museum":!0,"axis.museum":!0,"badajoz.museum":!0,"baghdad.museum":!0,"bahn.museum":!0,"bale.museum":!0,"baltimore.museum":!0,"barcelona.museum":!0,"baseball.museum":!0,"basel.museum":!0,"baths.museum":!0,"bauern.museum":!0,"beauxarts.museum":!0,"beeldengeluid.museum":!0,"bellevue.museum":!0,"bergbau.museum":!0,"berkeley.museum":!0,"berlin.museum":!0,"bern.museum":!0,"bible.museum":!0,"bilbao.museum":!0,"bill.museum":!0,"birdart.museum":!0,"birthplace.museum":!0,"bonn.museum":!0,"boston.museum":!0,"botanical.museum":!0,"botanicalgarden.museum":!0,"botanicgarden.museum":!0,"botany.museum":!0,"brandywinevalley.museum":!0,"brasil.museum":!0,"bristol.museum":!0,"british.museum":!0,"britishcolumbia.museum":!0,"broadcast.museum":!0,"brunel.museum":!0,"brussel.museum":!0,"brussels.museum":!0,"bruxelles.museum":!0,"building.museum":!0,"burghof.museum":!0,"bus.museum":!0,"bushey.museum":!0,"cadaques.museum":!0,"california.museum":!0,"cambridge.museum":!0,"can.museum":!0,"canada.museum":!0,"capebreton.museum":!0,"carrier.museum":!0,"cartoonart.museum":!0,"casadelamoneda.museum":!0,"castle.museum":!0,"castres.museum":!0,"celtic.museum":!0,"center.museum":!0,"chattanooga.museum":!0,"cheltenham.museum":!0,"chesapeakebay.museum":!0,"chicago.museum":!0,"children.museum":!0,"childrens.museum":!0,"childrensgarden.museum":!0,"chiropractic.museum":!0,"chocolate.museum":!0,"christiansburg.museum":!0,"cincinnati.museum":!0,"cinema.museum":!0,"circus.museum":!0,"civilisation.museum":!0,"civilization.museum":!0,"civilwar.museum":!0,"clinton.museum":!0,"clock.museum":!0,"coal.museum":!0,"coastaldefence.museum":!0,"cody.museum":!0,"coldwar.museum":!0,"collection.museum":!0,"colonialwilliamsburg.museum":!0,"coloradoplateau.museum":!0,"columbia.museum":!0,"columbus.museum":!0,"communication.museum":!0,
    "communications.museum":!0,"community.museum":!0,"computer.museum":!0,"computerhistory.museum":!0,"xn--comunicaes-v6a2o.museum":!0,"contemporary.museum":!0,"contemporaryart.museum":!0,"convent.museum":!0,"copenhagen.museum":!0,"corporation.museum":!0,"xn--correios-e-telecomunicaes-ghc29a.museum":!0,"corvette.museum":!0,"costume.museum":!0,"countryestate.museum":!0,"county.museum":!0,"crafts.museum":!0,"cranbrook.museum":!0,"creation.museum":!0,"cultural.museum":!0,"culturalcenter.museum":!0,"culture.museum":!0,"cyber.museum":!0,"cymru.museum":!0,"dali.museum":!0,"dallas.museum":!0,"database.museum":!0,"ddr.museum":!0,"decorativearts.museum":!0,"delaware.museum":!0,"delmenhorst.museum":!0,"denmark.museum":!0,"depot.museum":!0,"design.museum":!0,"detroit.museum":!0,"dinosaur.museum":!0,"discovery.museum":!0,"dolls.museum":!0,"donostia.museum":!0,"durham.museum":!0,"eastafrica.museum":!0,"eastcoast.museum":!0,"education.museum":!0,"educational.museum":!0,"egyptian.museum":!0,"eisenbahn.museum":!0,"elburg.museum":!0,"elvendrell.museum":!0,"embroidery.museum":!0,"encyclopedic.museum":!0,"england.museum":!0,"entomology.museum":!0,"environment.museum":!0,"environmentalconservation.museum":!0,"epilepsy.museum":!0,"essex.museum":!0,"estate.museum":!0,"ethnology.museum":!0,"exeter.museum":!0,"exhibition.museum":!0,"family.museum":!0,"farm.museum":!0,"farmequipment.museum":!0,"farmers.museum":!0,"farmstead.museum":!0,"field.museum":!0,"figueres.museum":!0,"filatelia.museum":!0,"film.museum":!0,"fineart.museum":!0,"finearts.museum":!0,"finland.museum":!0,"flanders.museum":!0,"florida.museum":!0,"force.museum":!0,"fortmissoula.museum":!0,"fortworth.museum":!0,"foundation.museum":!0,"francaise.museum":!0,"frankfurt.museum":!0,"franziskaner.museum":!0,"freemasonry.museum":!0,"freiburg.museum":!0,"fribourg.museum":!0,"frog.museum":!0,"fundacio.museum":!0,"furniture.museum":!0,"gallery.museum":!0,"garden.museum":!0,"gateway.museum":!0,"geelvinck.museum":!0,"gemological.museum":!0,"geology.museum":!0,"georgia.museum":!0,"giessen.museum":!0,"glas.museum":!0,"glass.museum":!0,"gorge.museum":!0,"grandrapids.museum":!0,"graz.museum":!0,"guernsey.museum":!0,"halloffame.museum":!0,"hamburg.museum":!0,"handson.museum":!0,"harvestcelebration.museum":!0,"hawaii.museum":!0,"health.museum":!0,"heimatunduhren.museum":!0,"hellas.museum":!0,"helsinki.museum":!0,"hembygdsforbund.museum":!0,"heritage.museum":!0,"histoire.museum":!0,"historical.museum":!0,"historicalsociety.museum":!0,"historichouses.museum":!0,"historisch.museum":!0,"historisches.museum":!0,"history.museum":!0,"historyofscience.museum":!0,"horology.museum":!0,"house.museum":!0,"humanities.museum":!0,"illustration.museum":!0,"imageandsound.museum":!0,"indian.museum":!0,"indiana.museum":!0,"indianapolis.museum":!0,"indianmarket.museum":!0,"intelligence.museum":!0,"interactive.museum":!0,"iraq.museum":!0,"iron.museum":!0,"isleofman.museum":!0,"jamison.museum":!0,"jefferson.museum":!0,"jerusalem.museum":!0,"jewelry.museum":!0,"jewish.museum":!0,"jewishart.museum":!0,"jfk.museum":!0,"journalism.museum":!0,"judaica.museum":!0,"judygarland.museum":!0,"juedisches.museum":!0,"juif.museum":!0,"karate.museum":!0,"karikatur.museum":!0,"kids.museum":!0,"koebenhavn.museum":!0,"koeln.museum":!0,"kunst.museum":!0,"kunstsammlung.museum":!0,"kunstunddesign.museum":!0,"labor.museum":!0,"labour.museum":!0,"lajolla.museum":!0,"lancashire.museum":!0,"landes.museum":!0,"lans.museum":!0,"xn--lns-qla.museum":!0,"larsson.museum":!0,"lewismiller.museum":!0,"lincoln.museum":!0,"linz.museum":!0,"living.museum":!0,"livinghistory.museum":!0,"localhistory.museum":!0,"london.museum":!0,"losangeles.museum":!0,"louvre.museum":!0,"loyalist.museum":!0,"lucerne.museum":!0,"luxembourg.museum":!0,"luzern.museum":!0,"mad.museum":!0,"madrid.museum":!0,"mallorca.museum":!0,"manchester.museum":!0,"mansion.museum":!0,"mansions.museum":!0,"manx.museum":!0,"marburg.museum":!0,"maritime.museum":!0,"maritimo.museum":!0,"maryland.museum":!0,"marylhurst.museum":!0,"media.museum":!0,"medical.museum":!0,"medizinhistorisches.museum":!0,"meeres.museum":!0,"memorial.museum":!0,"mesaverde.museum":!0,"michigan.museum":!0,"midatlantic.museum":!0,"military.museum":!0,"mill.museum":!0,"miners.museum":!0,"mining.museum":!0,"minnesota.museum":!0,"missile.museum":!0,"missoula.museum":!0,"modern.museum":!0,"moma.museum":!0,"money.museum":!0,"monmouth.museum":!0,"monticello.museum":!0,"montreal.museum":!0,"moscow.museum":!0,"motorcycle.museum":!0,"muenchen.museum":!0,"muenster.museum":!0,"mulhouse.museum":!0,"muncie.museum":!0,"museet.museum":!0,"museumcenter.museum":!0,"museumvereniging.museum":!0,"music.museum":!0,"national.museum":!0,"nationalfirearms.museum":!0,"nationalheritage.museum":!0,"nativeamerican.museum":!0,"naturalhistory.museum":!0,"naturalhistorymuseum.museum":!0,"naturalsciences.museum":!0,"nature.museum":!0,"naturhistorisches.museum":!0,"natuurwetenschappen.museum":!0,"naumburg.museum":!0,"naval.museum":!0,"nebraska.museum":!0,"neues.museum":!0,"newhampshire.museum":!0,"newjersey.museum":!0,"newmexico.museum":!0,"newport.museum":!0,"newspaper.museum":!0,"newyork.museum":!0,"niepce.museum":!0,"norfolk.museum":!0,"north.museum":!0,"nrw.museum":!0,"nuernberg.museum":!0,"nuremberg.museum":!0,"nyc.museum":!0,"nyny.museum":!0,"oceanographic.museum":!0,"oceanographique.museum":!0,"omaha.museum":!0,"online.museum":!0,"ontario.museum":!0,"openair.museum":!0,"oregon.museum":!0,"oregontrail.museum":!0,"otago.museum":!0,"oxford.museum":!0,"pacific.museum":!0,"paderborn.museum":!0,"palace.museum":!0,"paleo.museum":!0,"palmsprings.museum":!0,"panama.museum":!0,"paris.museum":!0,"pasadena.museum":!0,"pharmacy.museum":!0,"philadelphia.museum":!0,"philadelphiaarea.museum":!0,"philately.museum":!0,"phoenix.museum":!0,"photography.museum":!0,"pilots.museum":!0,"pittsburgh.museum":!0,"planetarium.museum":!0,"plantation.museum":!0,"plants.museum":!0,"plaza.museum":!0,"portal.museum":!0,"portland.museum":!0,"portlligat.museum":!0,"posts-and-telecommunications.museum":!0,"preservation.museum":!0,"presidio.museum":!0,"press.museum":!0,"project.museum":!0,"public.museum":!0,"pubol.museum":!0,"quebec.museum":!0,"railroad.museum":!0,"railway.museum":!0,"research.museum":!0,"resistance.museum":!0,"riodejaneiro.museum":!0,"rochester.museum":!0,"rockart.museum":!0,"roma.museum":!0,"russia.museum":!0,"saintlouis.museum":!0,"salem.museum":!0,"salvadordali.museum":!0,"salzburg.museum":!0,"sandiego.museum":!0,"sanfrancisco.museum":!0,"santabarbara.museum":!0,"santacruz.museum":!0,"santafe.museum":!0,"saskatchewan.museum":!0,"satx.museum":!0,"savannahga.museum":!0,"schlesisches.museum":!0,"schoenbrunn.museum":!0,"schokoladen.museum":!0,"school.museum":!0,"schweiz.museum":!0,"science.museum":!0,"scienceandhistory.museum":!0,"scienceandindustry.museum":!0,"sciencecenter.museum":!0,"sciencecenters.museum":!0,"science-fiction.museum":!0,"sciencehistory.museum":!0,"sciences.museum":!0,"sciencesnaturelles.museum":!0,"scotland.museum":!0,"seaport.museum":!0,"settlement.museum":!0,"settlers.museum":!0,"shell.museum":!0,"sherbrooke.museum":!0,"sibenik.museum":!0,"silk.museum":!0,"ski.museum":!0,"skole.museum":!0,"society.museum":!0,"sologne.museum":!0,"soundandvision.museum":!0,"southcarolina.museum":!0,"southwest.museum":!0,"space.museum":!0,"spy.museum":!0,"square.museum":!0,"stadt.museum":!0,"stalbans.museum":!0,"starnberg.museum":!0,"state.museum":!0,"stateofdelaware.museum":!0,"station.museum":!0,"steam.museum":!0,"steiermark.museum":!0,"stjohn.museum":!0,"stockholm.museum":!0,"stpetersburg.museum":!0,"stuttgart.museum":!0,"suisse.museum":!0,"surgeonshall.museum":!0,"surrey.museum":!0,"svizzera.museum":!0,"sweden.museum":!0,"sydney.museum":!0,"tank.museum":!0,"tcm.museum":!0,"technology.museum":!0,"telekommunikation.museum":!0,"television.museum":!0,"texas.museum":!0,"textile.museum":!0,"theater.museum":!0,"time.museum":!0,"timekeeping.museum":!0,"topology.museum":!0,"torino.museum":!0,"touch.museum":!0,"town.museum":!0,"transport.museum":!0,"tree.museum":!0,"trolley.museum":!0,"trust.museum":!0,"trustee.museum":!0,"uhren.museum":!0,"ulm.museum":!0,"undersea.museum":!0,"university.museum":!0,"usa.museum":!0,"usantiques.museum":!0,"usarts.museum":!0,"uscountryestate.museum":!0,"usculture.museum":!0,"usdecorativearts.museum":!0,"usgarden.museum":!0,"ushistory.museum":!0,"ushuaia.museum":!0,"uslivinghistory.museum":!0,"utah.museum":!0,"uvic.museum":!0,"valley.museum":!0,"vantaa.museum":!0,"versailles.museum":!0,"viking.museum":!0,"village.museum":!0,"virginia.museum":!0,"virtual.museum":!0,"virtuel.museum":!0,"vlaanderen.museum":!0,"volkenkunde.museum":!0,"wales.museum":!0,"wallonie.museum":!0,"war.museum":!0,"washingtondc.museum":!0,"watchandclock.museum":!0,"watch-and-clock.museum":!0,"western.museum":!0,"westfalen.museum":!0,"whaling.museum":!0,"wildlife.museum":!0,"williamsburg.museum":!0,"windmill.museum":!0,"workshop.museum":!0,"york.museum":!0,"yorkshire.museum":!0,"yosemite.museum":!0,"youth.museum":!0,"zoological.museum":!0,"zoology.museum":!0,"xn--9dbhblg6di.museum":!0,"xn--h1aegh.museum":!0,mv:!0,"aero.mv":!0,"biz.mv":!0,"com.mv":!0,"coop.mv":!0,"edu.mv":!0,"gov.mv":!0,"info.mv":!0,"int.mv":!0,"mil.mv":!0,"museum.mv":!0,"name.mv":!0,"net.mv":!0,"org.mv":!0,"pro.mv":!0,mw:!0,"ac.mw":!0,"biz.mw":!0,"co.mw":!0,"com.mw":!0,"coop.mw":!0,"edu.mw":!0,"gov.mw":!0,"int.mw":!0,"museum.mw":!0,"net.mw":!0,"org.mw":!0,mx:!0,"com.mx":!0,"org.mx":!0,"gob.mx":!0,"edu.mx":!0,"net.mx":!0,my:!0,"com.my":!0,"net.my":!0,"org.my":!0,"gov.my":!0,"edu.my":!0,"mil.my":!0,"name.my":!0,"*.mz":!0,"teledata.mz":!1,na:!0,"info.na":!0,"pro.na":!0,"name.na":!0,"school.na":!0,"or.na":!0,"dr.na":!0,"us.na":!0,"mx.na":!0,"ca.na":!0,"in.na":!0,"cc.na":!0,"tv.na":!0,"ws.na":!0,"mobi.na":!0,"co.na":!0,"com.na":!0,"org.na":!0,name:!0,nc:!0,"asso.nc":!0,ne:!0,net:!0,nf:!0,"com.nf":!0,"net.nf":!0,"per.nf":!0,"rec.nf":!0,"web.nf":!0,"arts.nf":!0,"firm.nf":!0,"info.nf":!0,"other.nf":!0,"store.nf":!0,ng:!0,"com.ng":!0,"edu.ng":!0,"name.ng":!0,"net.ng":!0,"org.ng":!0,"sch.ng":!0,"gov.ng":!0,"mil.ng":!0,"mobi.ng":!0,"*.ni":!0,nl:!0,"bv.nl":!0,no:!0,"fhs.no":!0,"vgs.no":!0,"fylkesbibl.no":!0,"folkebibl.no":!0,"museum.no":!0,"idrett.no":!0,"priv.no":!0,"mil.no":!0,"stat.no":!0,"dep.no":!0,"kommune.no":!0,"herad.no":!0,"aa.no":!0,"ah.no":!0,"bu.no":!0,"fm.no":!0,"hl.no":!0,"hm.no":!0,"jan-mayen.no":!0,"mr.no":!0,"nl.no":!0,"nt.no":!0,"of.no":!0,"ol.no":!0,"oslo.no":!0,"rl.no":!0,"sf.no":!0,"st.no":!0,"svalbard.no":!0,"tm.no":!0,"tr.no":!0,"va.no":!0,"vf.no":!0,"gs.aa.no":!0,"gs.ah.no":!0,"gs.bu.no":!0,"gs.fm.no":!0,"gs.hl.no":!0,"gs.hm.no":!0,"gs.jan-mayen.no":!0,"gs.mr.no":!0,"gs.nl.no":!0,"gs.nt.no":!0,"gs.of.no":!0,"gs.ol.no":!0,"gs.oslo.no":!0,"gs.rl.no":!0,"gs.sf.no":!0,"gs.st.no":!0,"gs.svalbard.no":!0,"gs.tm.no":!0,"gs.tr.no":!0,"gs.va.no":!0,"gs.vf.no":!0,"akrehamn.no":!0,"xn--krehamn-dxa.no":!0,"algard.no":!0,"xn--lgrd-poac.no":!0,"arna.no":!0,"brumunddal.no":!0,"bryne.no":!0,"bronnoysund.no":!0,"xn--brnnysund-m8ac.no":!0,"drobak.no":!0,"xn--drbak-wua.no":!0,"egersund.no":!0,"fetsund.no":!0,"floro.no":!0,"xn--flor-jra.no":!0,"fredrikstad.no":!0,"hokksund.no":!0,"honefoss.no":!0,"xn--hnefoss-q1a.no":!0,"jessheim.no":!0,"jorpeland.no":!0,"xn--jrpeland-54a.no":!0,"kirkenes.no":!0,"kopervik.no":!0,"krokstadelva.no":!0,"langevag.no":!0,"xn--langevg-jxa.no":!0,"leirvik.no":!0,"mjondalen.no":!0,"xn--mjndalen-64a.no":!0,"mo-i-rana.no":!0,"mosjoen.no":!0,"xn--mosjen-eya.no":!0,"nesoddtangen.no":!0,"orkanger.no":!0,"osoyro.no":!0,"xn--osyro-wua.no":!0,"raholt.no":!0,"xn--rholt-mra.no":!0,"sandnessjoen.no":!0,"xn--sandnessjen-ogb.no":!0,"skedsmokorset.no":!0,"slattum.no":!0,"spjelkavik.no":!0,"stathelle.no":!0,"stavern.no":!0,"stjordalshalsen.no":!0,"xn--stjrdalshalsen-sqb.no":!0,"tananger.no":!0,"tranby.no":!0,"vossevangen.no":!0,"afjord.no":!0,"xn--fjord-lra.no":!0,"agdenes.no":!0,"al.no":!0,"xn--l-1fa.no":!0,"alesund.no":!0,"xn--lesund-hua.no":!0,"alstahaug.no":!0,"alta.no":!0,"xn--lt-liac.no":!0,"alaheadju.no":!0,"xn--laheadju-7ya.no":!0,"alvdal.no":!0,"amli.no":!0,"xn--mli-tla.no":!0,"amot.no":!0,"xn--mot-tla.no":!0,"andebu.no":!0,"andoy.no":!0,"xn--andy-ira.no":!0,"andasuolo.no":!0,"ardal.no":!0,"xn--rdal-poa.no":!0,"aremark.no":!0,"arendal.no":!0,"xn--s-1fa.no":!0,"aseral.no":!0,"xn--seral-lra.no":!0,"asker.no":!0,"askim.no":!0,"askvoll.no":!0,"askoy.no":!0,"xn--asky-ira.no":!0,"asnes.no":!0,"xn--snes-poa.no":!0,"audnedaln.no":!0,"aukra.no":!0,"aure.no":!0,"aurland.no":!0,"aurskog-holand.no":!0,"xn--aurskog-hland-jnb.no":!0,"austevoll.no":!0,"austrheim.no":!0,"averoy.no":!0,"xn--avery-yua.no":!0,"balestrand.no":!0,"ballangen.no":!0,"balat.no":!0,"xn--blt-elab.no":!0,"balsfjord.no":!0,"bahccavuotna.no":!0,"xn--bhccavuotna-k7a.no":!0,"bamble.no":!0,"bardu.no":!0,"beardu.no":!0,"beiarn.no":!0,"bajddar.no":!0,"xn--bjddar-pta.no":!0,"baidar.no":!0,"xn--bidr-5nac.no":!0,"berg.no":!0,"bergen.no":!0,"berlevag.no":!0,"xn--berlevg-jxa.no":!0,"bearalvahki.no":!0,"xn--bearalvhki-y4a.no":!0,"bindal.no":!0,"birkenes.no":!0,"bjarkoy.no":!0,"xn--bjarky-fya.no":!0,"bjerkreim.no":!0,"bjugn.no":!0,"bodo.no":!0,"xn--bod-2na.no":!0,"badaddja.no":!0,"xn--bdddj-mrabd.no":!0,"budejju.no":!0,"bokn.no":!0,"bremanger.no":!0,"bronnoy.no":!0,"xn--brnny-wuac.no":!0,"bygland.no":!0,"bykle.no":!0,"barum.no":!0,"xn--brum-voa.no":!0,"bo.telemark.no":!0,"xn--b-5ga.telemark.no":!0,"bo.nordland.no":!0,"xn--b-5ga.nordland.no":!0,"bievat.no":!0,"xn--bievt-0qa.no":!0,"bomlo.no":!0,"xn--bmlo-gra.no":!0,"batsfjord.no":!0,"xn--btsfjord-9za.no":!0,"bahcavuotna.no":!0,"xn--bhcavuotna-s4a.no":!0,"dovre.no":!0,"drammen.no":!0,"drangedal.no":!0,"dyroy.no":!0,"xn--dyry-ira.no":!0,"donna.no":!0,"xn--dnna-gra.no":!0,"eid.no":!0,"eidfjord.no":!0,"eidsberg.no":!0,"eidskog.no":!0,"eidsvoll.no":!0,"eigersund.no":!0,"elverum.no":!0,"enebakk.no":!0,"engerdal.no":!0,"etne.no":!0,"etnedal.no":!0,"evenes.no":!0,"evenassi.no":!0,"xn--eveni-0qa01ga.no":!0,"evje-og-hornnes.no":!0,"farsund.no":!0,"fauske.no":!0,"fuossko.no":!0,"fuoisku.no":!0,"fedje.no":!0,"fet.no":!0,"finnoy.no":!0,"xn--finny-yua.no":!0,"fitjar.no":!0,"fjaler.no":!0,"fjell.no":!0,"flakstad.no":!0,"flatanger.no":!0,"flekkefjord.no":!0,"flesberg.no":!0,"flora.no":!0,"fla.no":!0,"xn--fl-zia.no":!0,"folldal.no":!0,"forsand.no":!0,"fosnes.no":!0,"frei.no":!0,"frogn.no":!0,"froland.no":!0,"frosta.no":!0,"frana.no":!0,"xn--frna-woa.no":!0,"froya.no":!0,"xn--frya-hra.no":!0,"fusa.no":!0,"fyresdal.no":!0,"forde.no":!0,"xn--frde-gra.no":!0,"gamvik.no":!0,"gangaviika.no":!0,"xn--ggaviika-8ya47h.no":!0,"gaular.no":!0,"gausdal.no":!0,"gildeskal.no":!0,"xn--gildeskl-g0a.no":!0,"giske.no":!0,"gjemnes.no":!0,"gjerdrum.no":!0,"gjerstad.no":!0,"gjesdal.no":!0,"gjovik.no":!0,"xn--gjvik-wua.no":!0,"gloppen.no":!0,"gol.no":!0,"gran.no":!0,"grane.no":!0,"granvin.no":!0,"gratangen.no":!0,"grimstad.no":!0,"grong.no":!0,"kraanghke.no":!0,"xn--kranghke-b0a.no":!0,"grue.no":!0,"gulen.no":!0,"hadsel.no":!0,"halden.no":!0,"halsa.no":!0,"hamar.no":!0,"hamaroy.no":!0,"habmer.no":!0,"xn--hbmer-xqa.no":!0,"hapmir.no":!0,"xn--hpmir-xqa.no":!0,"hammerfest.no":!0,"hammarfeasta.no":!0,"xn--hmmrfeasta-s4ac.no":!0,"haram.no":!0,"hareid.no":!0,"harstad.no":!0,"hasvik.no":!0,"aknoluokta.no":!0,"xn--koluokta-7ya57h.no":!0,"hattfjelldal.no":!0,"aarborte.no":!0,"haugesund.no":!0,"hemne.no":!0,"hemnes.no":!0,"hemsedal.no":!0,"heroy.more-og-romsdal.no":!0,"xn--hery-ira.xn--mre-og-romsdal-qqb.no":!0,"heroy.nordland.no":!0,"xn--hery-ira.nordland.no":!0,"hitra.no":!0,"hjartdal.no":!0,"hjelmeland.no":!0,"hobol.no":!0,"xn--hobl-ira.no":!0,"hof.no":!0,"hol.no":!0,"hole.no":!0,"holmestrand.no":!0,"holtalen.no":!0,"xn--holtlen-hxa.no":!0,"hornindal.no":!0,"horten.no":!0,"hurdal.no":!0,"hurum.no":!0,"hvaler.no":!0,"hyllestad.no":!0,"hagebostad.no":!0,"xn--hgebostad-g3a.no":!0,"hoyanger.no":!0,"xn--hyanger-q1a.no":!0,"hoylandet.no":!0,"xn--hylandet-54a.no":!0,"ha.no":!0,"xn--h-2fa.no":!0,"ibestad.no":!0,"inderoy.no":!0,"xn--indery-fya.no":!0,"iveland.no":!0,"jevnaker.no":!0,"jondal.no":!0,"jolster.no":!0,"xn--jlster-bya.no":!0,"karasjok.no":!0,"karasjohka.no":!0,"xn--krjohka-hwab49j.no":!0,"karlsoy.no":!0,"galsa.no":!0,"xn--gls-elac.no":!0,"karmoy.no":!0,"xn--karmy-yua.no":!0,"kautokeino.no":!0,"guovdageaidnu.no":!0,"klepp.no":!0,"klabu.no":!0,"xn--klbu-woa.no":!0,"kongsberg.no":!0,"kongsvinger.no":!0,"kragero.no":!0,"xn--krager-gya.no":!0,"kristiansand.no":!0,"kristiansund.no":!0,"krodsherad.no":!0,"xn--krdsherad-m8a.no":!0,"kvalsund.no":!0,"rahkkeravju.no":!0,"xn--rhkkervju-01af.no":!0,"kvam.no":!0,"kvinesdal.no":!0,"kvinnherad.no":!0,"kviteseid.no":!0,"kvitsoy.no":!0,"xn--kvitsy-fya.no":!0,"kvafjord.no":!0,"xn--kvfjord-nxa.no":!0,"giehtavuoatna.no":!0,"kvanangen.no":!0,"xn--kvnangen-k0a.no":!0,"navuotna.no":!0,"xn--nvuotna-hwa.no":!0,"kafjord.no":!0,"xn--kfjord-iua.no":!0,"gaivuotna.no":!0,"xn--givuotna-8ya.no":!0,"larvik.no":!0,"lavangen.no":!0,"lavagis.no":!0,"loabat.no":!0,"xn--loabt-0qa.no":!0,"lebesby.no":!0,"davvesiida.no":!0,"leikanger.no":!0,"leirfjord.no":!0,"leka.no":!0,"leksvik.no":!0,"lenvik.no":!0,"leangaviika.no":!0,"xn--leagaviika-52b.no":!0,"lesja.no":!0,"levanger.no":!0,"lier.no":!0,"lierne.no":!0,"lillehammer.no":!0,"lillesand.no":!0,"lindesnes.no":!0,"lindas.no":!0,"xn--linds-pra.no":!0,"lom.no":!0,"loppa.no":!0,"lahppi.no":!0,"xn--lhppi-xqa.no":!0,"lund.no":!0,"lunner.no":!0,"luroy.no":!0,"xn--lury-ira.no":!0,"luster.no":!0,"lyngdal.no":!0,"lyngen.no":!0,"ivgu.no":!0,"lardal.no":!0,"lerdal.no":!0,"xn--lrdal-sra.no":!0,"lodingen.no":!0,"xn--ldingen-q1a.no":!0,"lorenskog.no":!0,"xn--lrenskog-54a.no":!0,"loten.no":!0,"xn--lten-gra.no":!0,"malvik.no":!0,"masoy.no":!0,"xn--msy-ula0h.no":!0,"muosat.no":!0,"xn--muost-0qa.no":!0,"mandal.no":!0,"marker.no":!0,"marnardal.no":!0,"masfjorden.no":!0,"meland.no":!0,"meldal.no":!0,"melhus.no":!0,"meloy.no":!0,"xn--mely-ira.no":!0,"meraker.no":!0,"xn--merker-kua.no":!0,"moareke.no":!0,"xn--moreke-jua.no":!0,"midsund.no":!0,"midtre-gauldal.no":!0,"modalen.no":!0,"modum.no":!0,"molde.no":!0,"moskenes.no":!0,"moss.no":!0,"mosvik.no":!0,"malselv.no":!0,"xn--mlselv-iua.no":!0,"malatvuopmi.no":!0,"xn--mlatvuopmi-s4a.no":!0,"namdalseid.no":!0,"aejrie.no":!0,"namsos.no":!0,"namsskogan.no":!0,"naamesjevuemie.no":!0,"xn--nmesjevuemie-tcba.no":!0,"laakesvuemie.no":!0,"nannestad.no":!0,"narvik.no":!0,"narviika.no":!0,"naustdal.no":!0,"nedre-eiker.no":!0,"nes.akershus.no":!0,"nes.buskerud.no":!0,"nesna.no":!0,"nesodden.no":!0,"nesseby.no":!0,"unjarga.no":!0,"xn--unjrga-rta.no":!0,"nesset.no":!0,"nissedal.no":!0,"nittedal.no":!0,"nord-aurdal.no":!0,"nord-fron.no":!0,"nord-odal.no":!0,"norddal.no":!0,"nordkapp.no":!0,"davvenjarga.no":!0,"xn--davvenjrga-y4a.no":!0,"nordre-land.no":!0,"nordreisa.no":!0,"raisa.no":!0,"xn--risa-5na.no":!0,"nore-og-uvdal.no":!0,"notodden.no":!0,"naroy.no":!0,"xn--nry-yla5g.no":!0,"notteroy.no":!0,"xn--nttery-byae.no":!0,"odda.no":!0,"oksnes.no":!0,"xn--ksnes-uua.no":!0,"oppdal.no":!0,"oppegard.no":!0,"xn--oppegrd-ixa.no":!0,"orkdal.no":!0,"orland.no":!0,"xn--rland-uua.no":!0,"orskog.no":!0,"xn--rskog-uua.no":!0,"orsta.no":!0,"xn--rsta-fra.no":!0,"os.hedmark.no":!0,"os.hordaland.no":!0,"osen.no":!0,"osteroy.no":!0,"xn--ostery-fya.no":!0,"ostre-toten.no":!0,"xn--stre-toten-zcb.no":!0,"overhalla.no":!0,"ovre-eiker.no":!0,"xn--vre-eiker-k8a.no":!0,"oyer.no":!0,"xn--yer-zna.no":!0,"oygarden.no":!0,"xn--ygarden-p1a.no":!0,"oystre-slidre.no":!0,"xn--ystre-slidre-ujb.no":!0,"porsanger.no":!0,"porsangu.no":!0,"xn--porsgu-sta26f.no":!0,"porsgrunn.no":!0,"radoy.no":!0,"xn--rady-ira.no":!0,"rakkestad.no":!0,"rana.no":!0,"ruovat.no":!0,"randaberg.no":!0,"rauma.no":!0,"rendalen.no":!0,"rennebu.no":!0,"rennesoy.no":!0,"xn--rennesy-v1a.no":!0,"rindal.no":!0,"ringebu.no":!0,"ringerike.no":!0,"ringsaker.no":!0,"rissa.no":!0,"risor.no":!0,"xn--risr-ira.no":!0,"roan.no":!0,"rollag.no":!0,"rygge.no":!0,"ralingen.no":!0,"xn--rlingen-mxa.no":!0,"rodoy.no":!0,"xn--rdy-0nab.no":!0,"romskog.no":!0,"xn--rmskog-bya.no":!0,"roros.no":!0,"xn--rros-gra.no":!0,"rost.no":!0,"xn--rst-0na.no":!0,"royken.no":!0,"xn--ryken-vua.no":!0,"royrvik.no":!0,"xn--ryrvik-bya.no":!0,"rade.no":!0,"xn--rde-ula.no":!0,"salangen.no":!0,"siellak.no":!0,"saltdal.no":!0,"salat.no":!0,"xn--slt-elab.no":!0,"xn--slat-5na.no":!0,"samnanger.no":!0,"sande.more-og-romsdal.no":!0,"sande.xn--mre-og-romsdal-qqb.no":!0,"sande.vestfold.no":!0,"sandefjord.no":!0,"sandnes.no":!0,"sandoy.no":!0,"xn--sandy-yua.no":!0,"sarpsborg.no":!0,"sauda.no":!0,"sauherad.no":!0,"sel.no":!0,"selbu.no":!0,"selje.no":!0,"seljord.no":!0,"sigdal.no":!0,"siljan.no":!0,"sirdal.no":!0,"skaun.no":!0,"skedsmo.no":!0,"ski.no":!0,"skien.no":!0,"skiptvet.no":!0,"skjervoy.no":!0,"xn--skjervy-v1a.no":!0,"skierva.no":!0,"xn--skierv-uta.no":!0,"skjak.no":!0,"xn--skjk-soa.no":!0,"skodje.no":!0,"skanland.no":!0,"xn--sknland-fxa.no":!0,"skanit.no":!0,"xn--sknit-yqa.no":!0,"smola.no":!0,"xn--smla-hra.no":!0,"snillfjord.no":!0,"snasa.no":!0,"xn--snsa-roa.no":!0,"snoasa.no":!0,"snaase.no":!0,"xn--snase-nra.no":!0,"sogndal.no":!0,"sokndal.no":!0,"sola.no":!0,"solund.no":!0,"songdalen.no":!0,"sortland.no":!0,"spydeberg.no":!0,"stange.no":!0,"stavanger.no":!0,"steigen.no":!0,"steinkjer.no":!0,"stjordal.no":!0,"xn--stjrdal-s1a.no":!0,"stokke.no":!0,"stor-elvdal.no":!0,"stord.no":!0,"stordal.no":!0,"storfjord.no":!0,"omasvuotna.no":!0,"strand.no":!0,"stranda.no":!0,"stryn.no":!0,"sula.no":!0,"suldal.no":!0,"sund.no":!0,"sunndal.no":!0,"surnadal.no":!0,"sveio.no":!0,"svelvik.no":!0,"sykkylven.no":!0,"sogne.no":!0,"xn--sgne-gra.no":!0,"somna.no":!0,"xn--smna-gra.no":!0,"sondre-land.no":!0,"xn--sndre-land-0cb.no":!0,"sor-aurdal.no":!0,"xn--sr-aurdal-l8a.no":!0,"sor-fron.no":!0,"xn--sr-fron-q1a.no":!0,"sor-odal.no":!0,"xn--sr-odal-q1a.no":!0,"sor-varanger.no":!0,"xn--sr-varanger-ggb.no":!0,"matta-varjjat.no":!0,"xn--mtta-vrjjat-k7af.no":!0,"sorfold.no":!0,"xn--srfold-bya.no":!0,"sorreisa.no":!0,"xn--srreisa-q1a.no":!0,"sorum.no":!0,"xn--srum-gra.no":!0,"tana.no":!0,"deatnu.no":!0,"time.no":!0,"tingvoll.no":!0,"tinn.no":!0,"tjeldsund.no":!0,"dielddanuorri.no":!0,"tjome.no":!0,"xn--tjme-hra.no":!0,"tokke.no":!0,"tolga.no":!0,"torsken.no":!0,"tranoy.no":!0,"xn--trany-yua.no":!0,"tromso.no":!0,"xn--troms-zua.no":!0,"tromsa.no":!0,"romsa.no":!0,"trondheim.no":!0,"troandin.no":!0,"trysil.no":!0,"trana.no":!0,"xn--trna-woa.no":!0,"trogstad.no":!0,"xn--trgstad-r1a.no":!0,"tvedestrand.no":!0,"tydal.no":!0,"tynset.no":!0,"tysfjord.no":!0,"divtasvuodna.no":!0,"divttasvuotna.no":!0,"tysnes.no":!0,"tysvar.no":!0,"xn--tysvr-vra.no":!0,"tonsberg.no":!0,"xn--tnsberg-q1a.no":!0,"ullensaker.no":!0,"ullensvang.no":!0,"ulvik.no":!0,"utsira.no":!0,"vadso.no":!0,"xn--vads-jra.no":!0,"cahcesuolo.no":!0,"xn--hcesuolo-7ya35b.no":!0,"vaksdal.no":!0,"valle.no":!0,"vang.no":!0,"vanylven.no":!0,"vardo.no":!0,"xn--vard-jra.no":!0,"varggat.no":!0,"xn--vrggt-xqad.no":!0,"vefsn.no":!0,"vaapste.no":!0,"vega.no":!0,"vegarshei.no":!0,"xn--vegrshei-c0a.no":!0,"vennesla.no":!0,"verdal.no":!0,"verran.no":!0,"vestby.no":!0,"vestnes.no":!0,"vestre-slidre.no":!0,"vestre-toten.no":!0,"vestvagoy.no":!0,"xn--vestvgy-ixa6o.no":!0,"vevelstad.no":!0,"vik.no":!0,"vikna.no":!0,"vindafjord.no":!0,"volda.no":!0,"voss.no":!0,"varoy.no":!0,"xn--vry-yla5g.no":!0,"vagan.no":!0,"xn--vgan-qoa.no":!0,"voagat.no":!0,"vagsoy.no":!0,"xn--vgsy-qoa0j.no":!0,"vaga.no":!0,"xn--vg-yiab.no":!0,"valer.ostfold.no":!0,"xn--vler-qoa.xn--stfold-9xa.no":!0,"valer.hedmark.no":!0,"xn--vler-qoa.hedmark.no":!0,"*.np":!0,nr:!0,"biz.nr":!0,"info.nr":!0,"gov.nr":!0,"edu.nr":!0,"org.nr":!0,"net.nr":!0,"com.nr":!0,nu:!0,nz:!0,"ac.nz":!0,"co.nz":!0,"cri.nz":!0,"geek.nz":!0,"gen.nz":!0,"govt.nz":!0,"health.nz":!0,"iwi.nz":!0,"kiwi.nz":!0,"maori.nz":!0,"mil.nz":!0,"xn--mori-qsa.nz":!0,"net.nz":!0,"org.nz":!0,"parliament.nz":!0,"school.nz":!0,om:!0,"co.om":!0,"com.om":!0,"edu.om":!0,"gov.om":!0,"med.om":!0,"museum.om":!0,"net.om":!0,"org.om":!0,"pro.om":!0,org:!0,pa:!0,"ac.pa":!0,"gob.pa":!0,"com.pa":!0,"org.pa":!0,"sld.pa":!0,"edu.pa":!0,"net.pa":!0,"ing.pa":!0,"abo.pa":!0,"med.pa":!0,"nom.pa":!0,pe:!0,"edu.pe":!0,"gob.pe":!0,"nom.pe":!0,"mil.pe":!0,"org.pe":!0,"com.pe":!0,"net.pe":!0,pf:!0,"com.pf":!0,"org.pf":!0,"edu.pf":!0,"*.pg":!0,ph:!0,"com.ph":!0,"net.ph":!0,"org.ph":!0,"gov.ph":!0,"edu.ph":!0,"ngo.ph":!0,"mil.ph":!0,"i.ph":!0,pk:!0,"com.pk":!0,"net.pk":!0,"edu.pk":!0,"org.pk":!0,"fam.pk":!0,"biz.pk":!0,"web.pk":!0,"gov.pk":!0,"gob.pk":!0,"gok.pk":!0,"gon.pk":!0,"gop.pk":!0,"gos.pk":!0,"info.pk":!0,pl:!0,"com.pl":!0,"net.pl":!0,"org.pl":!0,"info.pl":!0,"waw.pl":!0,"gov.pl":!0,"aid.pl":!0,"agro.pl":!0,"atm.pl":!0,"auto.pl":!0,"biz.pl":!0,"edu.pl":!0,"gmina.pl":!0,"gsm.pl":!0,"mail.pl":!0,"miasta.pl":!0,"media.pl":!0,"mil.pl":!0,"nieruchomosci.pl":!0,"nom.pl":!0,"pc.pl":!0,"powiat.pl":!0,"priv.pl":!0,"realestate.pl":!0,"rel.pl":!0,"sex.pl":!0,"shop.pl":!0,"sklep.pl":!0,"sos.pl":!0,"szkola.pl":!0,"targi.pl":!0,"tm.pl":!0,"tourism.pl":!0,"travel.pl":!0,"turystyka.pl":!0,"uw.gov.pl":!0,"um.gov.pl":!0,"ug.gov.pl":!0,"upow.gov.pl":!0,"starostwo.gov.pl":!0,"so.gov.pl":!0,"sr.gov.pl":!0,"po.gov.pl":!0,"pa.gov.pl":!0,"augustow.pl":!0,"babia-gora.pl":!0,"bedzin.pl":!0,"beskidy.pl":!0,"bialowieza.pl":!0,"bialystok.pl":!0,"bielawa.pl":!0,"bieszczady.pl":!0,"boleslawiec.pl":!0,"bydgoszcz.pl":!0,"bytom.pl":!0,"cieszyn.pl":!0,"czeladz.pl":!0,"czest.pl":!0,"dlugoleka.pl":!0,"elblag.pl":!0,"elk.pl":!0,"glogow.pl":!0,"gniezno.pl":!0,"gorlice.pl":!0,"grajewo.pl":!0,"ilawa.pl":!0,"jaworzno.pl":!0,"jelenia-gora.pl":!0,"jgora.pl":!0,"kalisz.pl":!0,"kazimierz-dolny.pl":!0,"karpacz.pl":!0,"kartuzy.pl":!0,"kaszuby.pl":!0,"katowice.pl":!0,"kepno.pl":!0,"ketrzyn.pl":!0,"klodzko.pl":!0,"kobierzyce.pl":!0,"kolobrzeg.pl":!0,"konin.pl":!0,"konskowola.pl":!0,"kutno.pl":!0,"lapy.pl":!0,"lebork.pl":!0,"legnica.pl":!0,"lezajsk.pl":!0,"limanowa.pl":!0,"lomza.pl":!0,"lowicz.pl":!0,"lubin.pl":!0,"lukow.pl":!0,"malbork.pl":!0,"malopolska.pl":!0,"mazowsze.pl":!0,"mazury.pl":!0,"mielec.pl":!0,"mielno.pl":!0,"mragowo.pl":!0,"naklo.pl":!0,"nowaruda.pl":!0,"nysa.pl":!0,"olawa.pl":!0,"olecko.pl":!0,"olkusz.pl":!0,"olsztyn.pl":!0,"opoczno.pl":!0,"opole.pl":!0,"ostroda.pl":!0,"ostroleka.pl":!0,"ostrowiec.pl":!0,"ostrowwlkp.pl":!0,"pila.pl":!0,"pisz.pl":!0,"podhale.pl":!0,"podlasie.pl":!0,"polkowice.pl":!0,"pomorze.pl":!0,"pomorskie.pl":!0,"prochowice.pl":!0,"pruszkow.pl":!0,"przeworsk.pl":!0,"pulawy.pl":!0,"radom.pl":!0,"rawa-maz.pl":!0,"rybnik.pl":!0,"rzeszow.pl":!0,"sanok.pl":!0,"sejny.pl":!0,"slask.pl":!0,"slupsk.pl":!0,"sosnowiec.pl":!0,"stalowa-wola.pl":!0,"skoczow.pl":!0,"starachowice.pl":!0,"stargard.pl":!0,"suwalki.pl":!0,"swidnica.pl":!0,"swiebodzin.pl":!0,"swinoujscie.pl":!0,"szczecin.pl":!0,"szczytno.pl":!0,"tarnobrzeg.pl":!0,"tgory.pl":!0,"turek.pl":!0,"tychy.pl":!0,"ustka.pl":!0,"walbrzych.pl":!0,"warmia.pl":!0,"warszawa.pl":!0,"wegrow.pl":!0,"wielun.pl":!0,"wlocl.pl":!0,"wloclawek.pl":!0,"wodzislaw.pl":!0,"wolomin.pl":!0,"wroclaw.pl":!0,"zachpomor.pl":!0,"zagan.pl":!0,"zarow.pl":!0,"zgora.pl":!0,"zgorzelec.pl":!0,pm:!0,pn:!0,"gov.pn":!0,"co.pn":!0,"org.pn":!0,"edu.pn":!0,"net.pn":!0,post:!0,pr:!0,"com.pr":!0,"net.pr":!0,"org.pr":!0,"gov.pr":!0,"edu.pr":!0,"isla.pr":!0,"pro.pr":!0,"biz.pr":!0,"info.pr":!0,"name.pr":!0,"est.pr":!0,"prof.pr":!0,"ac.pr":!0,pro:!0,"aca.pro":!0,"bar.pro":!0,"cpa.pro":!0,"jur.pro":!0,"law.pro":!0,"med.pro":!0,"eng.pro":!0,ps:!0,"edu.ps":!0,"gov.ps":!0,"sec.ps":!0,"plo.ps":!0,"com.ps":!0,"org.ps":!0,"net.ps":!0,pt:!0,"net.pt":!0,"gov.pt":!0,"org.pt":!0,"edu.pt":!0,"int.pt":!0,"publ.pt":!0,"com.pt":!0,"nome.pt":!0,pw:!0,"co.pw":!0,"ne.pw":!0,"or.pw":!0,"ed.pw":!0,"go.pw":!0,"belau.pw":!0,py:!0,"com.py":!0,"coop.py":!0,"edu.py":!0,"gov.py":!0,"mil.py":!0,"net.py":!0,"org.py":!0,qa:!0,"com.qa":!0,"edu.qa":!0,"gov.qa":!0,"mil.qa":!0,"name.qa":!0,"net.qa":!0,"org.qa":!0,"sch.qa":!0,re:!0,"com.re":!0,"asso.re":!0,"nom.re":!0,ro:!0,"com.ro":!0,"org.ro":!0,"tm.ro":!0,"nt.ro":!0,"nom.ro":!0,"info.ro":!0,"rec.ro":!0,"arts.ro":!0,"firm.ro":!0,"store.ro":!0,"www.ro":!0,rs:!0,"co.rs":!0,"org.rs":!0,"edu.rs":!0,"ac.rs":!0,"gov.rs":!0,"in.rs":!0,ru:!0,"ac.ru":!0,"com.ru":!0,"edu.ru":!0,"int.ru":!0,"net.ru":!0,"org.ru":!0,"pp.ru":!0,"adygeya.ru":!0,"altai.ru":!0,"amur.ru":!0,"arkhangelsk.ru":!0,"astrakhan.ru":!0,"bashkiria.ru":!0,"belgorod.ru":!0,"bir.ru":!0,"bryansk.ru":!0,"buryatia.ru":!0,"cbg.ru":!0,"chel.ru":!0,"chelyabinsk.ru":!0,"chita.ru":!0,"chukotka.ru":!0,"chuvashia.ru":!0,"dagestan.ru":!0,"dudinka.ru":!0,"e-burg.ru":!0,"grozny.ru":!0,"irkutsk.ru":!0,"ivanovo.ru":!0,"izhevsk.ru":!0,"jar.ru":!0,"joshkar-ola.ru":!0,"kalmykia.ru":!0,"kaluga.ru":!0,"kamchatka.ru":!0,"karelia.ru":!0,"kazan.ru":!0,"kchr.ru":!0,"kemerovo.ru":!0,"khabarovsk.ru":!0,"khakassia.ru":!0,"khv.ru":!0,"kirov.ru":!0,"koenig.ru":!0,"komi.ru":!0,"kostroma.ru":!0,"krasnoyarsk.ru":!0,"kuban.ru":!0,"kurgan.ru":!0,"kursk.ru":!0,"lipetsk.ru":!0,"magadan.ru":!0,"mari.ru":!0,"mari-el.ru":!0,"marine.ru":!0,"mordovia.ru":!0,"msk.ru":!0,"murmansk.ru":!0,"nalchik.ru":!0,"nnov.ru":!0,"nov.ru":!0,"novosibirsk.ru":!0,"nsk.ru":!0,"omsk.ru":!0,"orenburg.ru":!0,"oryol.ru":!0,"palana.ru":!0,"penza.ru":!0,"perm.ru":!0,"ptz.ru":!0,"rnd.ru":!0,"ryazan.ru":!0,"sakhalin.ru":!0,"samara.ru":!0,"saratov.ru":!0,"simbirsk.ru":!0,"smolensk.ru":!0,"spb.ru":!0,"stavropol.ru":!0,"stv.ru":!0,"surgut.ru":!0,"tambov.ru":!0,"tatarstan.ru":!0,"tom.ru":!0,"tomsk.ru":!0,"tsaritsyn.ru":!0,"tsk.ru":!0,"tula.ru":!0,"tuva.ru":!0,"tver.ru":!0,"tyumen.ru":!0,"udm.ru":!0,"udmurtia.ru":!0,"ulan-ude.ru":!0,"vladikavkaz.ru":!0,"vladimir.ru":!0,"vladivostok.ru":!0,"volgograd.ru":!0,"vologda.ru":!0,"voronezh.ru":!0,"vrn.ru":!0,"vyatka.ru":!0,"yakutia.ru":!0,"yamal.ru":!0,"yaroslavl.ru":!0,"yekaterinburg.ru":!0,"yuzhno-sakhalinsk.ru":!0,"amursk.ru":!0,"baikal.ru":!0,"cmw.ru":!0,"fareast.ru":!0,"jamal.ru":!0,"kms.ru":!0,"k-uralsk.ru":!0,"kustanai.ru":!0,"kuzbass.ru":!0,"magnitka.ru":!0,"mytis.ru":!0,"nakhodka.ru":!0,"nkz.ru":!0,"norilsk.ru":!0,"oskol.ru":!0,"pyatigorsk.ru":!0,"rubtsovsk.ru":!0,"snz.ru":!0,"syzran.ru":!0,"vdonsk.ru":!0,"zgrad.ru":!0,"gov.ru":!0,"mil.ru":!0,"test.ru":!0,rw:!0,"gov.rw":!0,"net.rw":!0,"edu.rw":!0,"ac.rw":!0,"com.rw":!0,"co.rw":!0,"int.rw":!0,"mil.rw":!0,"gouv.rw":!0,sa:!0,"com.sa":!0,"net.sa":!0,"org.sa":!0,"gov.sa":!0,"med.sa":!0,"pub.sa":!0,"edu.sa":!0,"sch.sa":!0,sb:!0,"com.sb":!0,"edu.sb":!0,"gov.sb":!0,"net.sb":!0,"org.sb":!0,sc:!0,"com.sc":!0,"gov.sc":!0,"net.sc":!0,"org.sc":!0,"edu.sc":!0,sd:!0,"com.sd":!0,"net.sd":!0,"org.sd":!0,"edu.sd":!0,"med.sd":!0,"tv.sd":!0,"gov.sd":!0,"info.sd":!0,se:!0,"a.se":!0,"ac.se":!0,"b.se":!0,"bd.se":!0,"brand.se":!0,"c.se":!0,"d.se":!0,"e.se":!0,"f.se":!0,"fh.se":!0,"fhsk.se":!0,"fhv.se":!0,"g.se":!0,"h.se":!0,"i.se":!0,"k.se":!0,"komforb.se":!0,"kommunalforbund.se":!0,"komvux.se":!0,"l.se":!0,"lanbib.se":!0,"m.se":!0,"n.se":!0,"naturbruksgymn.se":!0,"o.se":!0,"org.se":!0,"p.se":!0,"parti.se":!0,"pp.se":!0,"press.se":!0,"r.se":!0,"s.se":!0,"t.se":!0,"tm.se":!0,"u.se":!0,"w.se":!0,"x.se":!0,"y.se":!0,"z.se":!0,sg:!0,"com.sg":!0,"net.sg":!0,"org.sg":!0,"gov.sg":!0,"edu.sg":!0,"per.sg":!0,sh:!0,"com.sh":!0,"net.sh":!0,"gov.sh":!0,"org.sh":!0,"mil.sh":!0,si:!0,sj:!0,sk:!0,sl:!0,"com.sl":!0,"net.sl":!0,"edu.sl":!0,"gov.sl":!0,"org.sl":!0,sm:!0,sn:!0,"art.sn":!0,"com.sn":!0,"edu.sn":!0,"gouv.sn":!0,"org.sn":!0,"perso.sn":!0,"univ.sn":!0,so:!0,"com.so":!0,"net.so":!0,"org.so":!0,sr:!0,st:!0,"co.st":!0,"com.st":!0,"consulado.st":!0,"edu.st":!0,"embaixada.st":!0,"gov.st":!0,"mil.st":!0,"net.st":!0,"org.st":!0,"principe.st":!0,"saotome.st":!0,"store.st":!0,su:!0,"adygeya.su":!0,"arkhangelsk.su":!0,"balashov.su":!0,"bashkiria.su":!0,"bryansk.su":!0,"dagestan.su":!0,"grozny.su":!0,"ivanovo.su":!0,"kalmykia.su":!0,"kaluga.su":!0,"karelia.su":!0,"khakassia.su":!0,"krasnodar.su":!0,"kurgan.su":!0,"lenug.su":!0,"mordovia.su":!0,"msk.su":!0,"murmansk.su":!0,"nalchik.su":!0,"nov.su":!0,"obninsk.su":!0,"penza.su":!0,"pokrovsk.su":!0,"sochi.su":!0,"spb.su":!0,"togliatti.su":!0,"troitsk.su":!0,
    "tula.su":!0,"tuva.su":!0,"vladikavkaz.su":!0,"vladimir.su":!0,"vologda.su":!0,sv:!0,"com.sv":!0,"edu.sv":!0,"gob.sv":!0,"org.sv":!0,"red.sv":!0,sx:!0,"gov.sx":!0,sy:!0,"edu.sy":!0,"gov.sy":!0,"net.sy":!0,"mil.sy":!0,"com.sy":!0,"org.sy":!0,sz:!0,"co.sz":!0,"ac.sz":!0,"org.sz":!0,tc:!0,td:!0,tel:!0,tf:!0,tg:!0,th:!0,"ac.th":!0,"co.th":!0,"go.th":!0,"in.th":!0,"mi.th":!0,"net.th":!0,"or.th":!0,tj:!0,"ac.tj":!0,"biz.tj":!0,"co.tj":!0,"com.tj":!0,"edu.tj":!0,"go.tj":!0,"gov.tj":!0,"int.tj":!0,"mil.tj":!0,"name.tj":!0,"net.tj":!0,"nic.tj":!0,"org.tj":!0,"test.tj":!0,"web.tj":!0,tk:!0,tl:!0,"gov.tl":!0,tm:!0,"com.tm":!0,"co.tm":!0,"org.tm":!0,"net.tm":!0,"nom.tm":!0,"gov.tm":!0,"mil.tm":!0,"edu.tm":!0,tn:!0,"com.tn":!0,"ens.tn":!0,"fin.tn":!0,"gov.tn":!0,"ind.tn":!0,"intl.tn":!0,"nat.tn":!0,"net.tn":!0,"org.tn":!0,"info.tn":!0,"perso.tn":!0,"tourism.tn":!0,"edunet.tn":!0,"rnrt.tn":!0,"rns.tn":!0,"rnu.tn":!0,"mincom.tn":!0,"agrinet.tn":!0,"defense.tn":!0,"turen.tn":!0,to:!0,"com.to":!0,"gov.to":!0,"net.to":!0,"org.to":!0,"edu.to":!0,"mil.to":!0,tp:!0,tr:!0,"com.tr":!0,"info.tr":!0,"biz.tr":!0,"net.tr":!0,"org.tr":!0,"web.tr":!0,"gen.tr":!0,"tv.tr":!0,"av.tr":!0,"dr.tr":!0,"bbs.tr":!0,"name.tr":!0,"tel.tr":!0,"gov.tr":!0,"bel.tr":!0,"pol.tr":!0,"mil.tr":!0,"k12.tr":!0,"edu.tr":!0,"kep.tr":!0,"nc.tr":!0,"gov.nc.tr":!0,travel:!0,tt:!0,"co.tt":!0,"com.tt":!0,"org.tt":!0,"net.tt":!0,"biz.tt":!0,"info.tt":!0,"pro.tt":!0,"int.tt":!0,"coop.tt":!0,"jobs.tt":!0,"mobi.tt":!0,"travel.tt":!0,"museum.tt":!0,"aero.tt":!0,"name.tt":!0,"gov.tt":!0,"edu.tt":!0,tv:!0,tw:!0,"edu.tw":!0,"gov.tw":!0,"mil.tw":!0,"com.tw":!0,"net.tw":!0,"org.tw":!0,"idv.tw":!0,"game.tw":!0,"ebiz.tw":!0,"club.tw":!0,"xn--zf0ao64a.tw":!0,"xn--uc0atv.tw":!0,"xn--czrw28b.tw":!0,tz:!0,"ac.tz":!0,"co.tz":!0,"go.tz":!0,"hotel.tz":!0,"info.tz":!0,"me.tz":!0,"mil.tz":!0,"mobi.tz":!0,"ne.tz":!0,"or.tz":!0,"sc.tz":!0,"tv.tz":!0,ua:!0,"com.ua":!0,"edu.ua":!0,"gov.ua":!0,"in.ua":!0,"net.ua":!0,"org.ua":!0,"cherkassy.ua":!0,"cherkasy.ua":!0,"chernigov.ua":!0,"chernihiv.ua":!0,"chernivtsi.ua":!0,"chernovtsy.ua":!0,"ck.ua":!0,"cn.ua":!0,"cr.ua":!0,"crimea.ua":!0,"cv.ua":!0,"dn.ua":!0,"dnepropetrovsk.ua":!0,"dnipropetrovsk.ua":!0,"dominic.ua":!0,"donetsk.ua":!0,"dp.ua":!0,"if.ua":!0,"ivano-frankivsk.ua":!0,"kh.ua":!0,"kharkiv.ua":!0,"kharkov.ua":!0,"kherson.ua":!0,"khmelnitskiy.ua":!0,"khmelnytskyi.ua":!0,"kiev.ua":!0,"kirovograd.ua":!0,"km.ua":!0,"kr.ua":!0,"krym.ua":!0,"ks.ua":!0,"kv.ua":!0,"kyiv.ua":!0,"lg.ua":!0,"lt.ua":!0,"lugansk.ua":!0,"lutsk.ua":!0,"lv.ua":!0,"lviv.ua":!0,"mk.ua":!0,"mykolaiv.ua":!0,"nikolaev.ua":!0,"od.ua":!0,"odesa.ua":!0,"odessa.ua":!0,"pl.ua":!0,"poltava.ua":!0,"rivne.ua":!0,"rovno.ua":!0,"rv.ua":!0,"sb.ua":!0,"sebastopol.ua":!0,"sevastopol.ua":!0,"sm.ua":!0,"sumy.ua":!0,"te.ua":!0,"ternopil.ua":!0,"uz.ua":!0,"uzhgorod.ua":!0,"vinnica.ua":!0,"vinnytsia.ua":!0,"vn.ua":!0,"volyn.ua":!0,"yalta.ua":!0,"zaporizhzhe.ua":!0,"zaporizhzhia.ua":!0,"zhitomir.ua":!0,"zhytomyr.ua":!0,"zp.ua":!0,"zt.ua":!0,"co.ua":!0,"pp.ua":!0,ug:!0,"co.ug":!0,"or.ug":!0,"ac.ug":!0,"sc.ug":!0,"go.ug":!0,"ne.ug":!0,"com.ug":!0,"org.ug":!0,uk:!0,"ac.uk":!0,"co.uk":!0,"gov.uk":!0,"ltd.uk":!0,"me.uk":!0,"net.uk":!0,"nhs.uk":!0,"org.uk":!0,"plc.uk":!0,"police.uk":!0,"*.sch.uk":!0,us:!0,"dni.us":!0,"fed.us":!0,"isa.us":!0,"kids.us":!0,"nsn.us":!0,"ak.us":!0,"al.us":!0,"ar.us":!0,"as.us":!0,"az.us":!0,"ca.us":!0,"co.us":!0,"ct.us":!0,"dc.us":!0,"de.us":!0,"fl.us":!0,"ga.us":!0,"gu.us":!0,"hi.us":!0,"ia.us":!0,"id.us":!0,"il.us":!0,"in.us":!0,"ks.us":!0,"ky.us":!0,"la.us":!0,"ma.us":!0,"md.us":!0,"me.us":!0,"mi.us":!0,"mn.us":!0,"mo.us":!0,"ms.us":!0,"mt.us":!0,"nc.us":!0,"nd.us":!0,"ne.us":!0,"nh.us":!0,"nj.us":!0,"nm.us":!0,"nv.us":!0,"ny.us":!0,"oh.us":!0,"ok.us":!0,"or.us":!0,"pa.us":!0,"pr.us":!0,"ri.us":!0,"sc.us":!0,"sd.us":!0,"tn.us":!0,"tx.us":!0,"ut.us":!0,"vi.us":!0,"vt.us":!0,"va.us":!0,"wa.us":!0,"wi.us":!0,"wv.us":!0,"wy.us":!0,"k12.ak.us":!0,"k12.al.us":!0,"k12.ar.us":!0,"k12.as.us":!0,"k12.az.us":!0,"k12.ca.us":!0,"k12.co.us":!0,"k12.ct.us":!0,"k12.dc.us":!0,"k12.de.us":!0,"k12.fl.us":!0,"k12.ga.us":!0,"k12.gu.us":!0,"k12.ia.us":!0,"k12.id.us":!0,"k12.il.us":!0,"k12.in.us":!0,"k12.ks.us":!0,"k12.ky.us":!0,"k12.la.us":!0,"k12.ma.us":!0,"k12.md.us":!0,"k12.me.us":!0,"k12.mi.us":!0,"k12.mn.us":!0,"k12.mo.us":!0,"k12.ms.us":!0,"k12.mt.us":!0,"k12.nc.us":!0,"k12.ne.us":!0,"k12.nh.us":!0,"k12.nj.us":!0,"k12.nm.us":!0,"k12.nv.us":!0,"k12.ny.us":!0,"k12.oh.us":!0,"k12.ok.us":!0,"k12.or.us":!0,"k12.pa.us":!0,"k12.pr.us":!0,"k12.ri.us":!0,"k12.sc.us":!0,"k12.tn.us":!0,"k12.tx.us":!0,"k12.ut.us":!0,"k12.vi.us":!0,"k12.vt.us":!0,"k12.va.us":!0,"k12.wa.us":!0,"k12.wi.us":!0,"k12.wy.us":!0,"cc.ak.us":!0,"cc.al.us":!0,"cc.ar.us":!0,"cc.as.us":!0,"cc.az.us":!0,"cc.ca.us":!0,"cc.co.us":!0,"cc.ct.us":!0,"cc.dc.us":!0,"cc.de.us":!0,"cc.fl.us":!0,"cc.ga.us":!0,"cc.gu.us":!0,"cc.hi.us":!0,"cc.ia.us":!0,"cc.id.us":!0,"cc.il.us":!0,"cc.in.us":!0,"cc.ks.us":!0,"cc.ky.us":!0,"cc.la.us":!0,"cc.ma.us":!0,"cc.md.us":!0,"cc.me.us":!0,"cc.mi.us":!0,"cc.mn.us":!0,"cc.mo.us":!0,"cc.ms.us":!0,"cc.mt.us":!0,"cc.nc.us":!0,"cc.nd.us":!0,"cc.ne.us":!0,"cc.nh.us":!0,"cc.nj.us":!0,"cc.nm.us":!0,"cc.nv.us":!0,"cc.ny.us":!0,"cc.oh.us":!0,"cc.ok.us":!0,"cc.or.us":!0,"cc.pa.us":!0,"cc.pr.us":!0,"cc.ri.us":!0,"cc.sc.us":!0,"cc.sd.us":!0,"cc.tn.us":!0,"cc.tx.us":!0,"cc.ut.us":!0,"cc.vi.us":!0,"cc.vt.us":!0,"cc.va.us":!0,"cc.wa.us":!0,"cc.wi.us":!0,"cc.wv.us":!0,"cc.wy.us":!0,"lib.ak.us":!0,"lib.al.us":!0,"lib.ar.us":!0,"lib.as.us":!0,"lib.az.us":!0,"lib.ca.us":!0,"lib.co.us":!0,"lib.ct.us":!0,"lib.dc.us":!0,"lib.de.us":!0,"lib.fl.us":!0,"lib.ga.us":!0,"lib.gu.us":!0,"lib.hi.us":!0,"lib.ia.us":!0,"lib.id.us":!0,"lib.il.us":!0,"lib.in.us":!0,"lib.ks.us":!0,"lib.ky.us":!0,"lib.la.us":!0,"lib.ma.us":!0,"lib.md.us":!0,"lib.me.us":!0,"lib.mi.us":!0,"lib.mn.us":!0,"lib.mo.us":!0,"lib.ms.us":!0,"lib.mt.us":!0,"lib.nc.us":!0,"lib.nd.us":!0,"lib.ne.us":!0,"lib.nh.us":!0,"lib.nj.us":!0,"lib.nm.us":!0,"lib.nv.us":!0,"lib.ny.us":!0,"lib.oh.us":!0,"lib.ok.us":!0,"lib.or.us":!0,"lib.pa.us":!0,"lib.pr.us":!0,"lib.ri.us":!0,"lib.sc.us":!0,"lib.sd.us":!0,"lib.tn.us":!0,"lib.tx.us":!0,"lib.ut.us":!0,"lib.vi.us":!0,"lib.vt.us":!0,"lib.va.us":!0,"lib.wa.us":!0,"lib.wi.us":!0,"lib.wy.us":!0,"pvt.k12.ma.us":!0,"chtr.k12.ma.us":!0,"paroch.k12.ma.us":!0,uy:!0,"com.uy":!0,"edu.uy":!0,"gub.uy":!0,"mil.uy":!0,"net.uy":!0,"org.uy":!0,uz:!0,"co.uz":!0,"com.uz":!0,"net.uz":!0,"org.uz":!0,va:!0,vc:!0,"com.vc":!0,"net.vc":!0,"org.vc":!0,"gov.vc":!0,"mil.vc":!0,"edu.vc":!0,ve:!0,"arts.ve":!0,"co.ve":!0,"com.ve":!0,"e12.ve":!0,"edu.ve":!0,"firm.ve":!0,"gob.ve":!0,"gov.ve":!0,"info.ve":!0,"int.ve":!0,"mil.ve":!0,"net.ve":!0,"org.ve":!0,"rec.ve":!0,"store.ve":!0,"tec.ve":!0,"web.ve":!0,vg:!0,vi:!0,"co.vi":!0,"com.vi":!0,"k12.vi":!0,"net.vi":!0,"org.vi":!0,vn:!0,"com.vn":!0,"net.vn":!0,"org.vn":!0,"edu.vn":!0,"gov.vn":!0,"int.vn":!0,"ac.vn":!0,"biz.vn":!0,"info.vn":!0,"name.vn":!0,"pro.vn":!0,"health.vn":!0,vu:!0,"com.vu":!0,"edu.vu":!0,"net.vu":!0,"org.vu":!0,wf:!0,ws:!0,"com.ws":!0,"net.ws":!0,"org.ws":!0,"gov.ws":!0,"edu.ws":!0,yt:!0,"xn--mgbaam7a8h":!0,"xn--54b7fta0cc":!0,"xn--fiqs8s":!0,"xn--fiqz9s":!0,"xn--lgbbat1ad8j":!0,"xn--wgbh1c":!0,"xn--node":!0,"xn--j6w193g":!0,"xn--h2brj9c":!0,"xn--mgbbh1a71e":!0,"xn--fpcrj9c3d":!0,"xn--gecrj9c":!0,"xn--s9brj9c":!0,"xn--45brj9c":!0,"xn--xkc2dl3a5ee0h":!0,"xn--mgba3a4f16a":!0,"xn--mgba3a4fra":!0,"xn--mgbayh7gpa":!0,"xn--3e0b707e":!0,"xn--80ao21a":!0,"xn--fzc2c9e2c":!0,"xn--xkc2al3hye2a":!0,"xn--mgbc0a9azcg":!0,"xn--l1acc":!0,"xn--mgbx4cd0ab":!0,"xn--mgb9awbf":!0,"xn--ygbi2ammx":!0,"xn--90a3ac":!0,"xn--o1ac.xn--90a3ac":!0,"xn--c1avg.xn--90a3ac":!0,"xn--90azh.xn--90a3ac":!0,"xn--d1at.xn--90a3ac":!0,"xn--o1ach.xn--90a3ac":!0,"xn--80au.xn--90a3ac":!0,"xn--p1ai":!0,"xn--wgbl6a":!0,"xn--mgberp4a5d4ar":!0,"xn--mgberp4a5d4a87g":!0,"xn--mgbqly7c0a67fbc":!0,"xn--mgbqly7cvafr":!0,"xn--ogbpf8fl":!0,"xn--mgbtf8fl":!0,"xn--yfro4i67o":!0,"xn--clchc0ea0b2g2a9gcd":!0,"xn--o3cw4h":!0,"xn--pgbs0dh":!0,"xn--kpry57d":!0,"xn--kprw13d":!0,"xn--nnx388a":!0,"xn--j1amh":!0,"xn--mgb2ddes":!0,xxx:!0,"*.ye":!0,"*.za":!0,"*.zm":!0,"*.zw":!0,aaa:!0,abb:!0,abbott:!0,abogado:!0,academy:!0,accenture:!0,accountant:!0,accountants:!0,aco:!0,active:!0,actor:!0,ads:!0,adult:!0,aeg:!0,afl:!0,africa:!0,africamagic:!0,agency:!0,aig:!0,airforce:!0,airtel:!0,alibaba:!0,alipay:!0,allfinanz:!0,alsace:!0,amsterdam:!0,analytics:!0,android:!0,anquan:!0,apartments:!0,aquarelle:!0,aramco:!0,archi:!0,army:!0,arte:!0,associates:!0,attorney:!0,auction:!0,audio:!0,author:!0,auto:!0,autos:!0,avianca:!0,axa:!0,azure:!0,baidu:!0,band:!0,bank:!0,bar:!0,barcelona:!0,barclaycard:!0,barclays:!0,bargains:!0,bauhaus:!0,bayern:!0,bbc:!0,bbva:!0,bcg:!0,bcn:!0,beer:!0,bentley:!0,berlin:!0,best:!0,bharti:!0,bible:!0,bid:!0,bike:!0,bing:!0,bingo:!0,bio:!0,black:!0,blackfriday:!0,bloomberg:!0,blue:!0,bms:!0,bmw:!0,bnl:!0,bnpparibas:!0,boats:!0,bom:!0,bond:!0,boo:!0,boots:!0,bot:!0,boutique:!0,bradesco:!0,bridgestone:!0,broadway:!0,broker:!0,brother:!0,brussels:!0,budapest:!0,build:!0,builders:!0,business:!0,buy:!0,buzz:!0,bzh:!0,cab:!0,cafe:!0,cal:!0,call:!0,camera:!0,camp:!0,cancerresearch:!0,canon:!0,capetown:!0,capital:!0,car:!0,caravan:!0,cards:!0,care:!0,career:!0,careers:!0,cars:!0,cartier:!0,casa:!0,cash:!0,casino:!0,catering:!0,cba:!0,cbn:!0,center:!0,ceo:!0,cern:!0,cfa:!0,cfd:!0,channel:!0,chat:!0,cheap:!0,chloe:!0,christmas:!0,chrome:!0,church:!0,cipriani:!0,circle:!0,cisco:!0,citic:!0,city:!0,cityeats:!0,claims:!0,cleaning:!0,click:!0,clinic:!0,clothing:!0,club:!0,coach:!0,codes:!0,coffee:!0,college:!0,cologne:!0,commbank:!0,community:!0,company:!0,computer:!0,comsec:!0,condos:!0,construction:!0,consulting:!0,contact:!0,contractors:!0,cooking:!0,cool:!0,corsica:!0,country:!0,coupon:!0,coupons:!0,courses:!0,credit:!0,creditcard:!0,creditunion:!0,cricket:!0,crown:!0,crs:!0,cruises:!0,csc:!0,cuisinella:!0,cymru:!0,cyou:!0,dabur:!0,dad:!0,dance:!0,date:!0,dating:!0,datsun:!0,day:!0,dclk:!0,dealer:!0,deals:!0,degree:!0,delivery:!0,dell:!0,delta:!0,democrat:!0,dental:!0,dentist:!0,desi:!0,design:!0,dev:!0,diamonds:!0,diet:!0,digital:!0,direct:!0,directory:!0,discount:!0,dnp:!0,docs:!0,dog:!0,doha:!0,domains:!0,doosan:!0,download:!0,drive:!0,dstv:!0,dubai:!0,durban:!0,dvag:!0,earth:!0,eat:!0,edeka:!0,education:!0,email:!0,emerck:!0,energy:!0,engineer:!0,engineering:!0,enterprises:!0,epson:!0,equipment:!0,erni:!0,esq:!0,estate:!0,eurovision:!0,eus:!0,events:!0,everbank:!0,exchange:!0,expert:!0,exposed:!0,express:!0,fage:!0,fail:!0,fairwinds:!0,faith:!0,family:!0,fan:!0,fans:!0,farm:!0,fashion:!0,fast:!0,feedback:!0,ferrero:!0,film:!0,"final":!0,finance:!0,financial:!0,firestone:!0,firmdale:!0,fish:!0,fishing:!0,fit:!0,fitness:!0,flickr:!0,flights:!0,florist:!0,flowers:!0,flsmidth:!0,fly:!0,foo:!0,football:!0,ford:!0,forex:!0,forsale:!0,forum:!0,foundation:!0,frl:!0,frogans:!0,frontier:!0,fund:!0,furniture:!0,futbol:!0,fyi:!0,gal:!0,gallery:!0,gallup:!0,garden:!0,gbiz:!0,gdn:!0,gea:!0,gent:!0,genting:!0,ggee:!0,gift:!0,gifts:!0,gives:!0,giving:!0,glass:!0,gle:!0,global:!0,globo:!0,gmail:!0,gmo:!0,gmx:!0,gold:!0,goldpoint:!0,golf:!0,goo:!0,goog:!0,google:!0,gop:!0,got:!0,gotv:!0,graphics:!0,gratis:!0,green:!0,gripe:!0,group:!0,gucci:!0,guge:!0,guide:!0,guitars:!0,guru:!0,hamburg:!0,hangout:!0,haus:!0,hdfcbank:!0,health:!0,healthcare:!0,help:!0,helsinki:!0,here:!0,hermes:!0,hiphop:!0,hitachi:!0,hiv:!0,hockey:!0,holdings:!0,holiday:!0,homedepot:!0,homes:!0,honda:!0,horse:!0,host:!0,hosting:!0,hoteles:!0,hotmail:!0,house:!0,how:!0,hsbc:!0,htc:!0,ibm:!0,icbc:!0,ice:!0,icu:!0,ifm:!0,iinet:!0,immo:!0,immobilien:!0,industries:!0,infiniti:!0,ing:!0,ink:!0,institute:!0,insurance:!0,insure:!0,international:!0,investments:!0,ipiranga:!0,irish:!0,iselect:!0,ist:!0,istanbul:!0,itau:!0,iwc:!0,jaguar:!0,java:!0,jcb:!0,jetzt:!0,jewelry:!0,jio:!0,jlc:!0,jll:!0,jmp:!0,joburg:!0,jot:!0,joy:!0,jprs:!0,juegos:!0,kaufen:!0,kddi:!0,kfh:!0,kim:!0,kinder:!0,kitchen:!0,kiwi:!0,koeln:!0,komatsu:!0,kpn:!0,krd:!0,kred:!0,kyknet:!0,kyoto:!0,lacaixa:!0,lancaster:!0,land:!0,landrover:!0,lasalle:!0,lat:!0,latrobe:!0,law:!0,lawyer:!0,lds:!0,lease:!0,leclerc:!0,legal:!0,lgbt:!0,liaison:!0,lidl:!0,life:!0,lifeinsurance:!0,lifestyle:!0,lighting:!0,like:!0,limited:!0,limo:!0,lincoln:!0,linde:!0,link:!0,live:!0,lixil:!0,loan:!0,loans:!0,lol:!0,london:!0,lotte:!0,lotto:!0,love:!0,ltd:!0,ltda:!0,lupin:!0,luxe:!0,luxury:!0,madrid:!0,maif:!0,maison:!0,makeup:!0,man:!0,management:!0,mango:!0,market:!0,marketing:!0,markets:!0,marriott:!0,mba:!0,media:!0,meet:!0,melbourne:!0,meme:!0,memorial:!0,men:!0,menu:!0,meo:!0,miami:!0,microsoft:!0,mini:!0,mma:!0,mnet:!0,mobily:!0,moda:!0,moe:!0,moi:!0,monash:!0,money:!0,montblanc:!0,mormon:!0,mortgage:!0,moscow:!0,motorcycles:!0,mov:!0,movie:!0,movistar:!0,mtn:!0,mtpc:!0,mtr:!0,multichoice:!0,mutual:!0,mzansimagic:!0,nadex:!0,nagoya:!0,naspers:!0,natura:!0,navy:!0,nec:!0,netbank:!0,network:!0,neustar:!0,"new":!0,news:!0,nexus:!0,ngo:!0,nhk:!0,nico:!0,ninja:!0,nissan:!0,nokia:!0,norton:!0,nowruz:!0,nra:!0,nrw:!0,ntt:!0,nyc:!0,obi:!0,office:!0,okinawa:!0,omega:!0,one:!0,ong:!0,onl:!0,online:!0,ooo:!0,oracle:!0,orange:!0,organic:!0,orientexpress:!0,osaka:!0,otsuka:!0,ovh:!0,page:!0,pamperedchef:!0,panerai:!0,paris:!0,pars:!0,partners:!0,parts:!0,party:!0,passagens:!0,payu:!0,pharmacy:!0,philips:!0,photo:!0,photography:!0,photos:!0,physio:!0,piaget:!0,pics:!0,pictet:!0,pictures:!0,pid:!0,pin:!0,pink:!0,pizza:!0,place:!0,play:!0,plumbing:!0,plus:!0,pohl:!0,poker:!0,porn:!0,praxi:!0,press:!0,prod:!0,productions:!0,prof:!0,promo:!0,properties:!0,property:!0,pub:!0,qpon:!0,quebec:!0,quest:!0,racing:!0,read:!0,realtor:!0,realty:!0,recipes:!0,red:!0,redstone:!0,redumbrella:!0,rehab:!0,reise:!0,reisen:!0,reit:!0,reliance:!0,ren:!0,rent:!0,rentals:!0,repair:!0,report:!0,republican:!0,rest:!0,restaurant:!0,review:!0,reviews:!0,rich:!0,ricoh:!0,ril:!0,rio:!0,rip:!0,rocher:!0,rocks:!0,rodeo:!0,room:!0,rsvp:!0,ruhr:!0,run:!0,rwe:!0,ryukyu:!0,saarland:!0,safe:!0,safety:!0,sakura:!0,sale:!0,salon:!0,samsung:!0,sandvik:!0,sandvikcoromant:!0,sanofi:!0,sap:!0,sapo:!0,sarl:!0,sas:!0,saxo:!0,sbi:!0,sbs:!0,sca:!0,scb:!0,schmidt:!0,scholarships:!0,school:!0,schule:!0,schwarz:!0,science:!0,scor:!0,scot:!0,seat:!0,seek:!0,sener:!0,services:!0,sew:!0,sex:!0,sexy:!0,sharp:!0,shia:!0,shiksha:!0,shoes:!0,shouji:!0,show:!0,shriram:!0,sina:!0,singles:!0,site:!0,skin:!0,sky:!0,skype:!0,smile:!0,sncf:!0,soccer:!0,social:!0,software:!0,sohu:!0,solar:!0,solutions:!0,song:!0,sony:!0,soy:!0,space:!0,spiegel:!0,spot:!0,spreadbetting:!0,stada:!0,star:!0,starhub:!0,statebank:!0,statoil:!0,stc:!0,stcgroup:!0,stockholm:!0,storage:!0,studio:!0,study:!0,style:!0,sucks:!0,supersport:!0,supplies:!0,supply:!0,support:!0,surf:!0,surgery:!0,suzuki:!0,swatch:!0,swiss:!0,sydney:!0,symantec:!0,systems:!0,tab:!0,taipei:!0,taobao:!0,tatamotors:!0,tatar:!0,tattoo:!0,tax:!0,taxi:!0,tci:!0,team:!0,tech:!0,technology:!0,telecity:!0,telefonica:!0,temasek:!0,tennis:!0,thd:!0,theater:!0,tickets:!0,tienda:!0,tiffany:!0,tips:!0,tires:!0,tirol:!0,tmall:!0,today:!0,tokyo:!0,tools:!0,top:!0,toray:!0,toshiba:!0,tours:!0,town:!0,toys:!0,trade:!0,trading:!0,training:!0,travelers:!0,travelersinsurance:!0,trust:!0,trv:!0,tui:!0,tunes:!0,tushu:!0,tvs:!0,ubs:!0,university:!0,uno:!0,uol:!0,vacations:!0,vana:!0,vegas:!0,ventures:!0,versicherung:!0,vet:!0,viajes:!0,video:!0,viking:!0,villas:!0,vip:!0,virgin:!0,vision:!0,vista:!0,vistaprint:!0,viva:!0,vlaanderen:!0,vodka:!0,vote:!0,voting:!0,voto:!0,voyage:!0,vuelos:!0,wales:!0,walter:!0,wang:!0,wanggou:!0,watch:!0,watches:!0,weather:!0,weatherchannel:!0,webcam:!0,website:!0,wed:!0,wedding:!0,weibo:!0,weir:!0,whoswho:!0,wien:!0,wiki:!0,williamhill:!0,win:!0,windows:!0,wme:!0,work:!0,works:!0,world:!0,wtc:!0,wtf:!0,xbox:!0,xerox:!0,xihuan:!0,xin:!0,"xn--11b4c3d":!0,"xn--1ck2e1b":!0,"xn--1qqw23a":!0,"xn--30rr7y":!0,"xn--3bst00m":!0,"xn--3ds443g":!0,"xn--3pxu8k":!0,"xn--42c2d9a":!0,"xn--45q11c":!0,"xn--4gbrim":!0,"xn--55qw42g":!0,"xn--55qx5d":!0,"xn--5tzm5g":!0,"xn--6frz82g":!0,"xn--6qq986b3xl":!0,"xn--80adxhks":!0,"xn--80asehdb":!0,"xn--80aswg":!0,"xn--8y0a063a":!0,"xn--9dbq2a":!0,"xn--9et52u":!0,"xn--9krt00a":!0,"xn--b4w605ferd":!0,"xn--bck1b9a5dre4c":!0,"xn--c1avg":!0,"xn--c2br7g":!0,"xn--cck2b3b":!0,"xn--cg4bki":!0,"xn--czr694b":!0,"xn--czrs0t":!0,"xn--czru2d":!0,"xn--d1acj3b":!0,"xn--eckvdtc9d":!0,"xn--efvy88h":!0,"xn--estv75g":!0,"xn--fhbei":!0,"xn--fiq228c5hs":!0,"xn--fiq64b":!0,"xn--fjq720a":!0,"xn--flw351e":!0,"xn--g2xx48c":!0,"xn--gckr3f0f":!0,"xn--hxt814e":!0,"xn--i1b6b1a6a2e":!0,"xn--imr513n":!0,"xn--io0a7i":!0,"xn--j1aef":!0,"xn--jlq61u9w7b":!0,"xn--jvr189m":!0,"xn--kcrx77d1x4a":!0,"xn--kpu716f":!0,"xn--kput3i":!0,"xn--mgba3a3ejt":!0,"xn--mgbab2bd":!0,"xn--mgbb9fbpob":!0,"xn--mgbt3dhd":!0,"xn--mk1bu44c":!0,"xn--mxtq1m":!0,"xn--ngbc5azd":!0,"xn--ngbe9e0a":!0,"xn--nqv7f":!0,"xn--nqv7fs00ema":!0,"xn--nyqy26a":!0,"xn--p1acf":!0,"xn--pbt977c":!0,"xn--pssy2u":!0,"xn--q9jyb4c":!0,"xn--qcka1pmc":!0,"xn--rhqv96g":!0,"xn--rovu88b":!0,"xn--ses554g":!0,"xn--t60b56a":!0,"xn--tckwe":!0,"xn--unup4y":!0,"xn--vermgensberater-ctb":!0,"xn--vermgensberatung-pwb":!0,"xn--vhquv":!0,"xn--vuq861b":!0,"xn--xhq521b":!0,"xn--zfr164b":!0,xyz:!0,yachts:!0,yahoo:!0,yamaxun:!0,yandex:!0,yodobashi:!0,yoga:!0,yokohama:!0,youtube:!0,yun:!0,zara:!0,zero:!0,zip:!0,zone:!0,zuerich:!0,"cloudfront.net":!0,"ap-northeast-1.compute.amazonaws.com":!0,"ap-southeast-1.compute.amazonaws.com":!0,"ap-southeast-2.compute.amazonaws.com":!0,"cn-north-1.compute.amazonaws.cn":!0,"compute.amazonaws.cn":!0,"compute.amazonaws.com":!0,"compute-1.amazonaws.com":!0,"eu-west-1.compute.amazonaws.com":!0,"eu-central-1.compute.amazonaws.com":!0,"sa-east-1.compute.amazonaws.com":!0,"us-east-1.amazonaws.com":!0,"us-gov-west-1.compute.amazonaws.com":!0,"us-west-1.compute.amazonaws.com":!0,"us-west-2.compute.amazonaws.com":!0,"z-1.compute-1.amazonaws.com":!0,"z-2.compute-1.amazonaws.com":!0,"elasticbeanstalk.com":!0,"elb.amazonaws.com":!0,"s3.amazonaws.com":!0,"s3-us-west-2.amazonaws.com":!0,"s3-us-west-1.amazonaws.com":!0,"s3-eu-west-1.amazonaws.com":!0,"s3-ap-southeast-1.amazonaws.com":!0,"s3-ap-southeast-2.amazonaws.com":!0,"s3-ap-northeast-1.amazonaws.com":!0,"s3-sa-east-1.amazonaws.com":!0,"s3-us-gov-west-1.amazonaws.com":!0,"s3-fips-us-gov-west-1.amazonaws.com":!0,"s3-website-us-east-1.amazonaws.com":!0,"s3-website-us-west-2.amazonaws.com":!0,"s3-website-us-west-1.amazonaws.com":!0,"s3-website-eu-west-1.amazonaws.com":!0,"s3-website-ap-southeast-1.amazonaws.com":!0,"s3-website-ap-southeast-2.amazonaws.com":!0,"s3-website-ap-northeast-1.amazonaws.com":!0,"s3-website-sa-east-1.amazonaws.com":!0,"s3-website-us-gov-west-1.amazonaws.com":!0,"betainabox.com":!0,"ae.org":!0,"ar.com":!0,"br.com":!0,"cn.com":!0,"com.de":!0,"com.se":!0,"de.com":!0,"eu.com":!0,"gb.com":!0,"gb.net":!0,"hu.com":!0,"hu.net":!0,"jp.net":!0,"jpn.com":!0,"kr.com":!0,"mex.com":!0,"no.com":!0,"qc.com":!0,"ru.com":!0,"sa.com":!0,"se.com":!0,"se.net":!0,"uk.com":!0,"uk.net":!0,"us.com":!0,"uy.com":!0,"za.bz":!0,"za.com":!0,"africa.com":!0,"gr.com":!0,"in.net":!0,"us.org":!0,"co.com":!0,"c.la":!0,"cloudcontrolled.com":!0,"cloudcontrolapp.com":!0,"co.ca":!0,"co.nl":!0,"co.no":!0,"*.platform.sh":!0,"cupcake.is":!0,"dreamhosters.com":!0,"dyndns-at-home.com":!0,"dyndns-at-work.com":!0,"dyndns-blog.com":!0,"dyndns-free.com":!0,"dyndns-home.com":!0,"dyndns-ip.com":!0,"dyndns-mail.com":!0,"dyndns-office.com":!0,"dyndns-pics.com":!0,"dyndns-remote.com":!0,"dyndns-server.com":!0,"dyndns-web.com":!0,"dyndns-wiki.com":!0,"dyndns-work.com":!0,"dyndns.biz":!0,"dyndns.info":!0,"dyndns.org":!0,"dyndns.tv":!0,"at-band-camp.net":!0,"ath.cx":!0,"barrel-of-knowledge.info":!0,"barrell-of-knowledge.info":!0,"better-than.tv":!0,"blogdns.com":!0,"blogdns.net":!0,"blogdns.org":!0,"blogsite.org":!0,"boldlygoingnowhere.org":!0,"broke-it.net":!0,"buyshouses.net":!0,"cechire.com":!0,"dnsalias.com":!0,"dnsalias.net":!0,"dnsalias.org":!0,"dnsdojo.com":!0,"dnsdojo.net":!0,"dnsdojo.org":!0,"does-it.net":!0,"doesntexist.com":!0,"doesntexist.org":!0,"dontexist.com":!0,"dontexist.net":!0,"dontexist.org":!0,"doomdns.com":!0,"doomdns.org":!0,"dvrdns.org":!0,"dyn-o-saur.com":!0,"dynalias.com":!0,"dynalias.net":!0,"dynalias.org":!0,"dynathome.net":!0,"dyndns.ws":!0,"endofinternet.net":!0,"endofinternet.org":!0,"endoftheinternet.org":!0,"est-a-la-maison.com":!0,"est-a-la-masion.com":!0,"est-le-patron.com":!0,"est-mon-blogueur.com":!0,"for-better.biz":!0,"for-more.biz":!0,"for-our.info":!0,"for-some.biz":!0,"for-the.biz":!0,"forgot.her.name":!0,"forgot.his.name":!0,"from-ak.com":!0,"from-al.com":!0,"from-ar.com":!0,"from-az.net":!0,"from-ca.com":!0,"from-co.net":!0,"from-ct.com":!0,"from-dc.com":!0,"from-de.com":!0,"from-fl.com":!0,"from-ga.com":!0,"from-hi.com":!0,"from-ia.com":!0,"from-id.com":!0,"from-il.com":!0,"from-in.com":!0,"from-ks.com":!0,"from-ky.com":!0,"from-la.net":!0,"from-ma.com":!0,"from-md.com":!0,"from-me.org":!0,"from-mi.com":!0,"from-mn.com":!0,"from-mo.com":!0,"from-ms.com":!0,"from-mt.com":!0,"from-nc.com":!0,"from-nd.com":!0,"from-ne.com":!0,"from-nh.com":!0,"from-nj.com":!0,"from-nm.com":!0,"from-nv.com":!0,"from-ny.net":!0,"from-oh.com":!0,"from-ok.com":!0,"from-or.com":!0,"from-pa.com":!0,"from-pr.com":!0,"from-ri.com":!0,"from-sc.com":!0,"from-sd.com":!0,"from-tn.com":!0,"from-tx.com":!0,"from-ut.com":!0,"from-va.com":!0,"from-vt.com":!0,"from-wa.com":!0,"from-wi.com":!0,"from-wv.com":!0,"from-wy.com":!0,"ftpaccess.cc":!0,"fuettertdasnetz.de":!0,"game-host.org":!0,"game-server.cc":!0,"getmyip.com":!0,"gets-it.net":!0,"go.dyndns.org":!0,"gotdns.com":!0,"gotdns.org":!0,"groks-the.info":!0,"groks-this.info":!0,"ham-radio-op.net":!0,"here-for-more.info":!0,"hobby-site.com":!0,"hobby-site.org":!0,"home.dyndns.org":!0,"homedns.org":!0,"homeftp.net":!0,"homeftp.org":!0,"homeip.net":!0,"homelinux.com":!0,"homelinux.net":!0,"homelinux.org":!0,"homeunix.com":!0,"homeunix.net":!0,"homeunix.org":!0,"iamallama.com":!0,"in-the-band.net":!0,"is-a-anarchist.com":!0,"is-a-blogger.com":!0,"is-a-bookkeeper.com":!0,"is-a-bruinsfan.org":!0,"is-a-bulls-fan.com":!0,"is-a-candidate.org":!0,"is-a-caterer.com":!0,"is-a-celticsfan.org":!0,"is-a-chef.com":!0,"is-a-chef.net":!0,"is-a-chef.org":!0,"is-a-conservative.com":!0,"is-a-cpa.com":!0,"is-a-cubicle-slave.com":!0,"is-a-democrat.com":!0,"is-a-designer.com":!0,"is-a-doctor.com":!0,"is-a-financialadvisor.com":!0,"is-a-geek.com":!0,"is-a-geek.net":!0,"is-a-geek.org":!0,"is-a-green.com":!0,"is-a-guru.com":!0,"is-a-hard-worker.com":!0,"is-a-hunter.com":!0,"is-a-knight.org":!0,"is-a-landscaper.com":!0,"is-a-lawyer.com":!0,"is-a-liberal.com":!0,"is-a-libertarian.com":!0,"is-a-linux-user.org":!0,"is-a-llama.com":!0,"is-a-musician.com":!0,"is-a-nascarfan.com":!0,"is-a-nurse.com":!0,"is-a-painter.com":!0,"is-a-patsfan.org":!0,"is-a-personaltrainer.com":!0,"is-a-photographer.com":!0,"is-a-player.com":!0,"is-a-republican.com":!0,"is-a-rockstar.com":!0,"is-a-socialist.com":!0,"is-a-soxfan.org":!0,"is-a-student.com":!0,"is-a-teacher.com":!0,"is-a-techie.com":!0,"is-a-therapist.com":!0,"is-an-accountant.com":!0,"is-an-actor.com":!0,"is-an-actress.com":!0,"is-an-anarchist.com":!0,"is-an-artist.com":!0,"is-an-engineer.com":!0,"is-an-entertainer.com":!0,"is-by.us":!0,"is-certified.com":!0,"is-found.org":!0,"is-gone.com":!0,"is-into-anime.com":!0,"is-into-cars.com":!0,"is-into-cartoons.com":!0,"is-into-games.com":!0,"is-leet.com":!0,"is-lost.org":!0,"is-not-certified.com":!0,"is-saved.org":!0,"is-slick.com":!0,"is-uberleet.com":!0,"is-very-bad.org":!0,"is-very-evil.org":!0,"is-very-good.org":!0,"is-very-nice.org":!0,"is-very-sweet.org":!0,"is-with-theband.com":!0,"isa-geek.com":!0,"isa-geek.net":!0,"isa-geek.org":!0,"isa-hockeynut.com":!0,"issmarterthanyou.com":!0,"isteingeek.de":!0,"istmein.de":!0,"kicks-ass.net":!0,"kicks-ass.org":!0,"knowsitall.info":!0,"land-4-sale.us":!0,"lebtimnetz.de":!0,"leitungsen.de":!0,"likes-pie.com":!0,"likescandy.com":!0,"merseine.nu":!0,"mine.nu":!0,"misconfused.org":!0,"mypets.ws":!0,"myphotos.cc":!0,"neat-url.com":!0,"office-on-the.net":!0,"on-the-web.tv":!0,"podzone.net":!0,"podzone.org":!0,"readmyblog.org":!0,"saves-the-whales.com":!0,"scrapper-site.net":!0,"scrapping.cc":!0,"selfip.biz":!0,"selfip.com":!0,"selfip.info":!0,"selfip.net":!0,"selfip.org":!0,"sells-for-less.com":!0,"sells-for-u.com":!0,"sells-it.net":!0,"sellsyourhome.org":!0,"servebbs.com":!0,"servebbs.net":!0,"servebbs.org":!0,"serveftp.net":!0,"serveftp.org":!0,"servegame.org":!0,"shacknet.nu":!0,"simple-url.com":!0,"space-to-rent.com":!0,"stuff-4-sale.org":!0,"stuff-4-sale.us":!0,"teaches-yoga.com":!0,"thruhere.net":!0,"traeumtgerade.de":!0,"webhop.biz":!0,"webhop.info":!0,"webhop.net":!0,"webhop.org":!0,"worse-than.tv":!0,"writesthisblog.com":!0,"a.ssl.fastly.net":!0,"b.ssl.fastly.net":!0,"global.ssl.fastly.net":!0,"a.prod.fastly.net":!0,"global.prod.fastly.net":!0,"firebaseapp.com":!0,"flynnhub.com":!0,"service.gov.uk":!0,"github.io":!0,"githubusercontent.com":!0,"ro.com":!0,"appspot.com":!0,"blogspot.ae":!0,"blogspot.be":!0,"blogspot.bj":!0,"blogspot.ca":!0,"blogspot.cf":!0,"blogspot.ch":!0,"blogspot.co.at":!0,"blogspot.co.il":!0,"blogspot.co.nz":!0,"blogspot.co.uk":!0,"blogspot.com":!0,"blogspot.com.ar":!0,"blogspot.com.au":!0,"blogspot.com.br":!0,"blogspot.com.es":!0,"blogspot.com.tr":!0,"blogspot.cv":!0,"blogspot.cz":!0,"blogspot.de":!0,"blogspot.dk":!0,"blogspot.fi":!0,"blogspot.fr":!0,"blogspot.gr":!0,"blogspot.hk":!0,"blogspot.hu":!0,"blogspot.ie":!0,"blogspot.in":!0,"blogspot.it":!0,"blogspot.jp":!0,"blogspot.kr":!0,"blogspot.mr":!0,"blogspot.mx":!0,"blogspot.nl":!0,"blogspot.no":!0,"blogspot.pt":!0,"blogspot.re":!0,"blogspot.ro":!0,"blogspot.ru":!0,"blogspot.se":!0,"blogspot.sg":!0,"blogspot.sk":!0,"blogspot.td":!0,"blogspot.tw":!0,"codespot.com":!0,"googleapis.com":!0,"googlecode.com":!0,"pagespeedmobilizer.com":!0,"withgoogle.com":!0,"herokuapp.com":!0,"herokussl.com":!0,"iki.fi":!0,"biz.at":!0,"info.at":!0,"co.pl":!0,"azurewebsites.net":!0,"azure-mobile.net":!0,"cloudapp.net":!0,"nfshost.com":!0,"nyc.mn":!0,"nid.io":!0,"operaunite.com":!0,"outsystemscloud.com":!0,"art.pl":!0,"gliwice.pl":!0,"krakow.pl":!0,"poznan.pl":!0,"wroc.pl":!0,"zakopane.pl":!0,"priv.at":!0,"rhcloud.com":!0,"sinaapp.com":!0,"vipsinaapp.com":!0,"1kapp.com":!0,"gda.pl":!0,"gdansk.pl":!0,"gdynia.pl":!0,"med.pl":!0,"sopot.pl":!0,"hk.com":!0,"hk.org":!0,"ltd.hk":!0,"inc.hk":!0,"yolasite.com":!0,"za.net":!0,"za.org":!0});


},{"punycode":96}],241:[function(require,module,exports){
  "use strict";function Store(){}exports.Store=Store,Store.prototype.synchronous=!1,Store.prototype.findCookie=function(o,e,t,r){throw new Error("findCookie is not implemented")},Store.prototype.findCookies=function(o,e,t){throw new Error("findCookies is not implemented")},Store.prototype.putCookie=function(o,e){throw new Error("putCookie is not implemented")},Store.prototype.updateCookie=function(o,e,t){throw new Error("updateCookie is not implemented")},Store.prototype.removeCookie=function(o,e,t,r){throw new Error("removeCookie is not implemented")},Store.prototype.removeCookies=function(o,e,t){throw new Error("removeCookies is not implemented")},Store.prototype.getAllCookies=function(o){throw new Error("getAllCookies is not implemented (therefore jar cannot be serialized)")};


},{}],242:[function(require,module,exports){
  module.exports={
    "author": {
      "name": "Jeremy Stashewsky",
      "email": "jstashewsky@salesforce.com"
    },
    "license": "BSD-3-Clause",
    "name": "tough-cookie",
    "description": "RFC6265 Cookies and Cookie Jar for node.js",
    "keywords": [
      "HTTP",
      "cookie",
      "cookies",
      "set-cookie",
      "cookiejar",
      "jar",
      "RFC6265",
      "RFC2965"
    ],
    "version": "2.0.0",
    "homepage": "https://github.com/SalesforceEng/tough-cookie",
    "repository": {
      "type": "git",
      "url": "git://github.com/SalesforceEng/tough-cookie.git"
    },
    "bugs": {
      "url": "https://github.com/SalesforceEng/tough-cookie/issues"
    },
    "main": "./lib/cookie",
    "scripts": {
      "test": "vows test/*_test.js"
    },
    "engines": {
      "node": ">=0.10.0"
    },
    "devDependencies": {
      "vows": "0.7.0",
      "async": ">=0.1.12"
    },
    "gitHead": "a3af6104da7787c23bb98910109b0e0e8a10153c",
    "_id": "tough-cookie@2.0.0",
    "_shasum": "41ce08720b35cf90beb044dd2609fb19e928718f",
    "_from": "tough-cookie@>=0.12.0",
    "_npmVersion": "2.7.4",
    "_nodeVersion": "0.12.2",
    "_npmUser": {
      "name": "jstash",
      "email": "jstash@gmail.com"
    },
    "dist": {
      "shasum": "41ce08720b35cf90beb044dd2609fb19e928718f",
      "tarball": "http://54.194.16.76:4873/tough-cookie/-/tough-cookie-2.0.0.tgz"
    },
    "maintainers": [
      {
        "name": "jstash",
        "email": "jeremy@goinstant.com"
      },
      {
        "name": "goinstant",
        "email": "services@goinstant.com"
      }
    ],
    "directories": {},
    "_resolved": "http://54.194.16.76:4873/tough-cookie/-/tough-cookie-2.0.0.tgz",
    "readme": "ERROR: No README data found!"
  }

},{}],243:[function(require,module,exports){
  (function (process,Buffer){
    "use strict";function httpOverHttp(e){var t=new TunnelingAgent(e);return t.request=http.request,t}function httpsOverHttp(e){var t=new TunnelingAgent(e);return t.request=http.request,t.createSocket=createSecureSocket,t}function httpOverHttps(e){var t=new TunnelingAgent(e);return t.request=https.request,t}function httpsOverHttps(e){var t=new TunnelingAgent(e);return t.request=https.request,t.createSocket=createSecureSocket,t}function TunnelingAgent(e){var t=this;t.options=e||{},t.proxyOptions=t.options.proxy||{},t.maxSockets=t.options.maxSockets||http.Agent.defaultMaxSockets,t.requests=[],t.sockets=[],t.on("free",function(e,r,n){for(var s=0,o=t.requests.length;o>s;++s){var u=t.requests[s];if(u.host===r&&u.port===n)return t.requests.splice(s,1),void u.request.onSocket(e)}e.destroy(),t.removeSocket(e)})}function createSecureSocket(e,t){var r=this;TunnelingAgent.prototype.createSocket.call(r,e,function(n){var s=tls.connect(0,mergeOptions({},r.options,{servername:e.host,socket:n}));t(s)})}function mergeOptions(e){for(var t=1,r=arguments.length;r>t;++t){var n=arguments[t];if("object"==typeof n)for(var s=Object.keys(n),o=0,u=s.length;u>o;++o){var i=s[o];void 0!==n[i]&&(e[i]=n[i])}}return e}var net=require("net"),tls=require("tls"),http=require("http"),https=require("https"),events=require("events"),assert=require("assert"),util=require("util");exports.httpOverHttp=httpOverHttp,exports.httpsOverHttp=httpsOverHttp,exports.httpOverHttps=httpOverHttps,exports.httpsOverHttps=httpsOverHttps,util.inherits(TunnelingAgent,events.EventEmitter),TunnelingAgent.prototype.addRequest=function(e,t){var r=this;return"string"==typeof t&&(t={host:t,port:arguments[2],path:arguments[3]}),r.sockets.length>=this.maxSockets?void r.requests.push({host:host,port:port,request:e}):void r.createSocket({host:t.host,port:t.port,request:e},function(n){function s(){r.emit("free",n,t.host,t.port)}function o(e){r.removeSocket(),n.removeListener("free",s),n.removeListener("close",o),n.removeListener("agentRemove",o)}n.on("free",s),n.on("close",o),n.on("agentRemove",o),e.onSocket(n)})},TunnelingAgent.prototype.createSocket=function(e,t){function r(e){e.upgrade=!0}function n(e,t,r){process.nextTick(function(){s(e,t,r)})}function s(r,n,s){if(p.removeAllListeners(),n.removeAllListeners(),200===r.statusCode)assert.equal(s.length,0),debug("tunneling connection has established"),u.sockets[u.sockets.indexOf(i)]=n,t(n);else{debug("tunneling socket could not be established, statusCode=%d",r.statusCode);var o=new Error("tunneling socket could not be established, statusCode="+r.statusCode);o.code="ECONNRESET",e.request.emit("error",o),u.removeSocket(i)}}function o(t){p.removeAllListeners(),debug("tunneling socket could not be established, cause=%s\n",t.message,t.stack);var r=new Error("tunneling socket could not be established, cause="+t.message);r.code="ECONNRESET",e.request.emit("error",r),u.removeSocket(i)}var u=this,i={};u.sockets.push(i);var c=mergeOptions({},u.proxyOptions,{method:"CONNECT",path:e.host+":"+e.port,agent:!1});c.proxyAuth&&(c.headers=c.headers||{},c.headers["Proxy-Authorization"]="Basic "+new Buffer(c.proxyAuth).toString("base64")),debug("making CONNECT request");var p=u.request(c);p.useChunkedEncodingByDefault=!1,p.once("response",r),p.once("upgrade",n),p.once("connect",s),p.once("error",o),p.end()},TunnelingAgent.prototype.removeSocket=function(e){var t=this.sockets.indexOf(e);if(-1!==t){this.sockets.splice(t,1);var r=this.requests.shift();r&&this.createSocket(r,function(e){r.request.onSocket(e)})}};var debug;debug=process.env.NODE_DEBUG&&/\btunnel\b/.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments);"string"==typeof e[0]?e[0]="TUNNEL: "+e[0]:e.unshift("TUNNEL:"),console.error.apply(console,e)}:function(){},exports.debug=debug;


  }).call(this,require("Zbi7gb"),require("buffer").Buffer)
},{"Zbi7gb":95,"assert":64,"buffer":78,"events":87,"http":88,"https":92,"net":63,"tls":63,"util":109}],244:[function(require,module,exports){
  (function (process,Buffer){
    "use strict";function filterForNonReserved(e,t){var r={};for(var o in t){var n=-1===e.indexOf(o);n&&(r[o]=t[o])}return r}function filterOutReservedFunctions(e,t){var r={};for(var o in t){var n=!(-1===e.indexOf(o)),a="function"==typeof t[o];n&&a||(r[o]=t[o])}return r}function constructProxyHost(e){var t=e.portA,r=e.protocol,o=e.hostname+":";return o+=t?t:"https:"===r?"443":"80"}function constructProxyHeaderWhiteList(e,t){var r=t.reduce(function(e,t){return e[t.toLowerCase()]=!0,e},{});return Object.keys(e).filter(function(e){return r[e.toLowerCase()]}).reduce(function(t,r){return t[r]=e[r],t},{})}function getTunnelOption(e,t){return"undefined"!=typeof e.tunnel?e.tunnel:"undefined"!=typeof t.tunnel?t.tunnel:"https:"===e.uri.protocol?!0:void 0}function constructTunnelOptions(e){var t=e.proxy,r={proxy:{host:t.hostname,port:+t.port,proxyAuth:t.auth,headers:e.proxyHeaders},headers:e.headers,ca:e.ca,cert:e.cert,key:e.key,passphrase:e.passphrase,pfx:e.pfx,ciphers:e.ciphers,rejectUnauthorized:e.rejectUnauthorized,secureOptions:e.secureOptions,secureProtocol:e.secureProtocol};return r}function constructTunnelFnName(e,t){var r="https:"===e.protocol?"https":"http",o="https:"===t.protocol?"Https":"Http";return[r,o].join("Over")}function getTunnelFn(e){var t=e.uri,r=e.proxy,o=constructTunnelFnName(t,r);return tunnel[o]}function connectionErrorHandler(e){var t=this;t.res?t.res.request?t.res.request.emit("error",e):t.res.emit("error",e):t._httpMessage.emit("error",e)}function requestToJSON(){var e=this;return{uri:e.uri,method:e.method,headers:e.headers}}function responseToJSON(){var e=this;return{statusCode:e.statusCode,body:e.body,headers:e.headers,request:requestToJSON.call(e.request)}}function rfc3986(e){return e.replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function Request(e){var t=this;stream.Stream.call(t);var r=Object.keys(Request.prototype),o=filterForNonReserved(r,e);stream.Stream.call(t),util._extend(t,o),e=filterOutReservedFunctions(r,e),t.readable=!0,t.writable=!0,e.method&&(t.explicitMethod=!0),t.init(e)}function debug(){Request.debug&&0}var http=require("http"),https=require("https"),url=require("url"),util=require("util"),stream=require("stream"),qs=require("qs"),querystring=require("querystring"),zlib=require("zlib"),helpers=require("./lib/helpers"),bl=require("bl"),hawk=require("hawk"),aws=require("aws-sign2"),httpSignature=require("http-signature"),uuid=require("node-uuid"),mime=require("mime-types"),tunnel=require("tunnel-agent"),stringstream=require("stringstream"),caseless=require("caseless"),ForeverAgent=require("forever-agent"),FormData=require("form-data"),cookies=require("./lib/cookies"),copy=require("./lib/copy"),net=require("net"),CombinedStream=require("combined-stream"),isstream=require("isstream"),getProxyFromURI=require("./lib/getProxyFromURI"),Auth=require("./lib/auth").Auth,oauth=require("./lib/oauth"),safeStringify=helpers.safeStringify,md5=helpers.md5,isReadStream=helpers.isReadStream,toBase64=helpers.toBase64,defer=helpers.defer,globalCookieJar=cookies.jar(),globalPool={},isUrl=/^https?:/,defaultProxyHeaderWhiteList=["accept","accept-charset","accept-encoding","accept-language","accept-ranges","cache-control","content-encoding","content-language","content-length","content-location","content-md5","content-range","content-type","connection","date","expect","max-forwards","pragma","referer","te","transfer-encoding","user-agent","via"],defaultProxyHeaderExclusiveList=["proxy-authorization"];util.inherits(Request,stream.Stream),Request.debug=process.env.NODE_DEBUG&&/\brequest\b/.test(process.env.NODE_DEBUG),Request.prototype.setupTunnel=function(){var e=this;if("string"==typeof e.proxy&&(e.proxy=url.parse(e.proxy)),!e.proxy||!e.tunnel)return!1;e.proxyHeaderExclusiveList=e.proxyHeaderExclusiveList||[],e.proxyHeaderWhiteList=e.proxyHeaderWhiteList||defaultProxyHeaderWhiteList;var t=e.proxyHeaderExclusiveList.concat(defaultProxyHeaderExclusiveList),r=e.proxyHeaderWhiteList.concat(t);e.proxyHeaders=constructProxyHeaderWhiteList(e.headers,r),e.proxyHeaders.host=constructProxyHost(e.uri),t.forEach(e.removeHeader,e);var o=getTunnelFn(e),n=constructTunnelOptions(e);return e.agent=o(n),!0},Request.prototype.init=function(e){var t=this;if(e||(e={}),t.headers=t.headers?copy(t.headers):{},caseless.httpify(t,t.headers),t.method||(t.method=e.method||"GET"),t.localAddress=e.localAddress,t.qsLib||(t.qsLib=e.useQuerystring?querystring:qs),debug(e),t.pool||t.pool===!1||(t.pool=globalPool),t.dests=t.dests||[],t.__isRequestRequest=!0,!t._callback&&t.callback&&(t._callback=t.callback,t.callback=function(){t._callbackCalled||(t._callbackCalled=!0,t._callback.apply(t,arguments))},t.on("error",t.callback.bind()),t.on("complete",t.callback.bind(t,null))),!t.uri&&t.url&&(t.uri=t.url,delete t.url),!t.uri)return t.emit("error",new Error("options.uri is a required argument"));if("string"==typeof t.uri&&(t.uri=url.parse(t.uri)),"unix:"===t.uri.protocol)return t.emit("error",new Error("`unix://` URL scheme is no longer supported. Please use the format `http://unix:SOCKET:PATH`"));if("unix"===t.uri.host){var r=t.uri.path.split(":"),o=r[0],n=r[1];t.socketPath=o,t.uri.pathname=n,t.uri.path=n,t.uri.host=o,t.uri.hostname=o,t.uri.isUnix=!0}if(t.strictSSL===!1&&(t.rejectUnauthorized=!1),t.hasOwnProperty("proxy")||(t.proxy=getProxyFromURI(t.uri)),t.tunnel=getTunnelOption(t,e),t.proxy&&t.setupTunnel(),t.uri.pathname||(t.uri.pathname="/"),!(t.uri.host||t.uri.hostname&&t.uri.port||t.uri.isUnix)){var a=url.format(t.uri),s='Invalid URI "'+a+'"';return 0===Object.keys(e).length&&(s+=". This can be caused by a crappy redirection."),t.emit("error",new Error(s))}if(t._redirectsFollowed=t._redirectsFollowed||0,t.maxRedirects=void 0!==t.maxRedirects?t.maxRedirects:10,t.allowRedirect="function"==typeof t.followRedirect?t.followRedirect:function(e){return!0},t.followRedirects=void 0!==t.followRedirect?!!t.followRedirect:!0,t.followAllRedirects=void 0!==t.followAllRedirects?t.followAllRedirects:!1,(t.followRedirects||t.followAllRedirects)&&(t.redirects=t.redirects||[]),t.setHost=!1,!t.hasHeader("host")){var i=t.originalHostHeaderName||"host";t.setHeader(i,t.uri.hostname),t.uri.port&&(80===t.uri.port&&"http:"===t.uri.protocol||443===t.uri.port&&"https:"===t.uri.protocol||t.setHeader(i,t.getHeader("host")+(":"+t.uri.port))),t.setHost=!0}if(t.jar(t._jar||e.jar),t.uri.port||("http:"===t.uri.protocol?t.uri.port=80:"https:"===t.uri.protocol&&(t.uri.port=443)),t.proxy&&!t.tunnel?(t.port=t.proxy.port,t.host=t.proxy.hostname):(t.port=t.uri.port,t.host=t.uri.hostname),e.form&&t.form(e.form),e.formData){var u=e.formData,d=t.form(),c=function(e,t){t.hasOwnProperty("value")&&t.hasOwnProperty("options")?d.append(e,t.value,t.options):d.append(e,t)};for(var p in u)if(u.hasOwnProperty(p)){var l=u[p];if(l instanceof Array)for(var h=0;h<l.length;h++)c(p,l[h]);else c(p,l)}}if(e.qs&&t.qs(e.qs),t.uri.path?t.path=t.uri.path:t.path=t.uri.pathname+(t.uri.search||""),0===t.path.length&&(t.path="/"),t._auth=new Auth,e.oauth&&t.oauth(e.oauth),e.aws&&t.aws(e.aws),e.hawk&&t.hawk(e.hawk),e.httpSignature&&t.httpSignature(e.httpSignature),e.auth&&(Object.prototype.hasOwnProperty.call(e.auth,"username")&&(e.auth.user=e.auth.username),Object.prototype.hasOwnProperty.call(e.auth,"password")&&(e.auth.pass=e.auth.password),t.auth(e.auth.user,e.auth.pass,e.auth.sendImmediately,e.auth.bearer)),t.gzip&&!t.hasHeader("accept-encoding")&&t.setHeader("accept-encoding","gzip"),t.uri.auth&&!t.hasHeader("authorization")){var f=t.uri.auth.split(":").map(function(e){return querystring.unescape(e)});t.auth(f[0],f.slice(1).join(":"),!0)}if(!t.tunnel&&t.proxy&&t.proxy.auth&&!t.hasHeader("proxy-authorization")){var g=t.proxy.auth.split(":").map(function(e){return querystring.unescape(e)}),y="Basic "+toBase64(g.join(":"));t.setHeader("proxy-authorization",y)}if(t.proxy&&!t.tunnel&&(t.path=t.uri.protocol+"//"+t.uri.host+t.path),e.json&&t.json(e.json),e.multipart&&(t.boundary=uuid(),t.multipart(e.multipart)),t.body){var m=0;if(Buffer.isBuffer(t.body))m=t.body.length;else if(Array.isArray(t.body))for(var b=0;b<t.body.length;b++)m+=t.body[b].length;else t.body=new Buffer(t.body),m=t.body.length;if(!m)throw new Error("Argument error, options.body.");t.hasHeader("content-length")||t.setHeader("content-length",m)}var v=t.proxy&&!t.tunnel?t.proxy.protocol:t.uri.protocol,q={"http:":http,"https:":https},H=t.httpModules||{};return t.httpModule=H[v]||q[v],t.httpModule?(e.ca&&(t.ca=e.ca),t.agent||(e.agentOptions&&(t.agentOptions=e.agentOptions),e.agentClass?t.agentClass=e.agentClass:e.forever?t.agentClass="http:"===v?ForeverAgent:ForeverAgent.SSL:t.agentClass=t.httpModule.Agent),t.pool===!1?t.agent=!1:t.agent=t.agent||t.getNewAgent(),t.on("pipe",function(e){if(t.ntick&&t._started)throw new Error("You cannot pipe to this stream after the outbound request has started.");if(t.src=e,isReadStream(e))t.hasHeader("content-type")||t.setHeader("content-type",mime.lookup(e.path));else{if(e.headers)for(var r in e.headers)t.hasHeader(r)||t.setHeader(r,e.headers[r]);t._json&&!t.hasHeader("content-type")&&t.setHeader("content-type","application/json"),e.method&&!t.explicitMethod&&(t.method=e.method)}}),void defer(function(){if(!t._aborted){var e=function(){t._form&&t._form.pipe(t),t._multipart&&t._multipart.pipe(t),t.body?(Array.isArray(t.body)?t.body.forEach(function(e){t.write(e)}):t.write(t.body),t.end()):t.requestBodyStream?(0,t.requestBodyStream.pipe(t)):t.src||("GET"!==t.method&&"undefined"!=typeof t.method&&t.setHeader("content-length",0),t.end())};t._form&&!t.hasHeader("content-length")?(t.setHeader(t._form.getHeaders()),t._form.getLength(function(r,o){r||t.setHeader("content-length",o),e()})):e(),t.ntick=!0}})):t.emit("error",new Error("Invalid protocol: "+v))},Request.prototype._updateProtocol=function(){var e=this,t=e.uri.protocol;if("https:"===t||e.tunnel){if(e.proxy&&e.setupTunnel())return;switch(e.httpModule=https,e.agentClass){case ForeverAgent:e.agentClass=ForeverAgent.SSL;break;case http.Agent:e.agentClass=https.Agent;break;default:return}e.agent&&(e.agent=e.getNewAgent())}else{switch(e.httpModule=http,e.agentClass){case ForeverAgent.SSL:e.agentClass=ForeverAgent;break;case https.Agent:e.agentClass=http.Agent;break;default:return}e.agent&&(e.agent=null,e.agent=e.getNewAgent())}},Request.prototype.getNewAgent=function(){var e=this,t=e.agentClass,r={};if(e.agentOptions)for(var o in e.agentOptions)r[o]=e.agentOptions[o];e.ca&&(r.ca=e.ca),e.ciphers&&(r.ciphers=e.ciphers),e.secureProtocol&&(r.secureProtocol=e.secureProtocol),e.secureOptions&&(r.secureOptions=e.secureOptions),"undefined"!=typeof e.rejectUnauthorized&&(r.rejectUnauthorized=e.rejectUnauthorized),e.cert&&e.key&&(r.key=e.key,r.cert=e.cert),e.pfx&&(r.pfx=e.pfx),e.passphrase&&(r.passphrase=e.passphrase);var n="";t!==e.httpModule.Agent&&(n+=t.name);var a=e.proxy;"string"==typeof a&&(a=url.parse(a));var s=a&&"https:"===a.protocol||"https:"===this.uri.protocol;return s&&(r.ca&&(n&&(n+=":"),n+=r.ca),"undefined"!=typeof r.rejectUnauthorized&&(n&&(n+=":"),n+=r.rejectUnauthorized),r.cert&&(n&&(n+=":"),n+=r.cert.toString("ascii")+r.key.toString("ascii")),r.pfx&&(n&&(n+=":"),n+=r.pfx.toString("ascii")),r.ciphers&&(n&&(n+=":"),n+=r.ciphers),r.secureProtocol&&(n&&(n+=":"),n+=r.secureProtocol),r.secureOptions&&(n&&(n+=":"),n+=r.secureOptions)),e.pool===globalPool&&!n&&0===Object.keys(r).length&&e.httpModule.globalAgent?e.httpModule.globalAgent:(n=e.uri.protocol+n,e.pool[n]||(e.pool[n]=new t(r),e.pool.maxSockets&&(e.pool[n].maxSockets=e.pool.maxSockets)),e.pool[n])},Request.prototype.start=function(){var e=this;if(!e._aborted){e._started=!0,e.method=e.method||"GET",e.href=e.uri.href,e.src&&e.src.stat&&e.src.stat.size&&!e.hasHeader("content-length")&&e.setHeader("content-length",e.src.stat.size),e._aws&&e.aws(e._aws,!0);var t=copy(e);delete t.auth,debug("make request",e.uri.href),e.req=e.httpModule.request(t),e.timeout&&!e.timeoutTimer&&(e.timeoutTimer=setTimeout(function(){e.abort();var t=new Error("ETIMEDOUT");t.code="ETIMEDOUT",e.emit("error",t)},e.timeout),e.req.setTimeout&&e.req.setTimeout(e.timeout,function(){if(e.req){e.req.abort();var t=new Error("ESOCKETTIMEDOUT");t.code="ESOCKETTIMEDOUT",e.emit("error",t)}})),e.req.on("response",e.onRequestResponse.bind(e)),e.req.on("error",e.onRequestError.bind(e)),e.req.on("drain",function(){e.emit("drain")}),e.req.on("socket",function(t){e.emit("socket",t)}),e.on("end",function(){e.req.connection&&e.req.connection.removeListener("error",connectionErrorHandler)}),e.emit("request",e.req)}},Request.prototype.onRequestError=function(e){var t=this;if(!t._aborted){if(t.req&&t.req._reusedSocket&&"ECONNRESET"===e.code&&t.agent.addRequestNoreuse)return t.agent={addRequest:t.agent.addRequestNoreuse.bind(t.agent)},t.start(),void t.req.end();t.timeout&&t.timeoutTimer&&(clearTimeout(t.timeoutTimer),t.timeoutTimer=null),t.emit("error",e)}},Request.prototype.onRequestResponse=function(e){var t=this;if(debug("onRequestResponse",t.uri.href,e.statusCode,e.headers),e.on("end",function(){debug("response end",t.uri.href,e.statusCode,e.headers)}),e.connection&&-1===e.connection.listeners("error").indexOf(connectionErrorHandler)&&(e.connection.setMaxListeners(0),e.connection.once("error",connectionErrorHandler)),t._aborted)return debug("aborted",t.uri.href),void e.resume();if(t._paused?e.pause():e.resume&&e.resume(),t.response=e,e.request=t,e.toJSON=responseToJSON,t.httpModule===https&&t.strictSSL&&(!e.hasOwnProperty("client")||!e.client.authorized)){debug("strict ssl error",t.uri.href);var r=e.hasOwnProperty("client")?e.client.authorizationError:t.uri.href+" does not support SSL";return void t.emit("error",new Error("SSL Error: "+r))}t.originalHost=t.getHeader("host"),t.originalHostHeaderName||(t.originalHostHeaderName=t.hasHeader("host")),t.setHost&&t.removeHeader("host"),t.timeout&&t.timeoutTimer&&(clearTimeout(t.timeoutTimer),t.timeoutTimer=null);var o=t._jar&&t._jar.setCookie?t._jar:globalCookieJar,n=function(e){try{o.setCookie(e,t.uri.href,{ignoreError:!0})}catch(r){t.emit("error",r)}};if(e.caseless=caseless(e.headers),e.caseless.has("set-cookie")&&!t._disableCookies){var a=e.caseless.has("set-cookie");Array.isArray(e.headers[a])?e.headers[a].forEach(n):n(e.headers[a])}var s=null;if(e.statusCode>=300&&e.statusCode<400&&e.caseless.has("location")){var i=e.caseless.get("location");if(debug("redirect",i),t.followAllRedirects)s=i;else if(t.followRedirects)switch(t.method){case"PATCH":case"PUT":case"POST":case"DELETE":break;default:s=i}}else if(401===e.statusCode){var u=t._auth.response(t.method,t.uri.path,e.headers);u&&(t.setHeader("authorization",u),s=t.uri)}if(s&&t.allowRedirect.call(t,e)){if(debug("redirect to",s),t._paused&&e.resume(),t._redirectsFollowed>=t.maxRedirects)return void t.emit("error",new Error("Exceeded maxRedirects. Probably stuck in a redirect loop "+t.uri.href));t._redirectsFollowed+=1,isUrl.test(s)||(s=url.resolve(t.uri.href,s));var d=t.uri;return t.uri=url.parse(s),t.uri.protocol!==d.protocol&&t._updateProtocol(),t.redirects.push({statusCode:e.statusCode,redirectUri:s}),t.followAllRedirects&&401!==e.statusCode&&307!==e.statusCode&&(t.method="GET"),delete t.src,delete t.req,delete t.agent,delete t._started,401!==e.statusCode&&307!==e.statusCode&&(delete t.body,delete t._form,t.headers&&(t.removeHeader("host"),t.removeHeader("content-type"),t.removeHeader("content-length"),t.uri.hostname!==t.originalHost.split(":")[0]&&t.removeHeader("authorization"))),t.emit("redirect"),void t.init()}t._redirectsFollowed=t._redirectsFollowed||0,e.on("close",function(){t._ended||t.response.emit("end")}),e.on("end",function(){t._ended=!0});var c;if(t.gzip){var p=e.headers["content-encoding"]||"identity";p=p.trim().toLowerCase(),"gzip"===p?(c=zlib.createGunzip(),e.pipe(c)):("identity"!==p&&debug("ignoring unrecognized Content-Encoding "+p),c=e)}else c=e;if(t.encoding&&(0!==t.dests.length?0:c.setEncoding?c.setEncoding(t.encoding):c=c.pipe(stringstream(t.encoding))),t.emit("response",e),t.dests.forEach(function(e){t.pipeDest(e)}),c.on("data",function(e){t._destdata=!0,t.emit("data",e)}),c.on("end",function(e){t.emit("end",e)}),c.on("error",function(e){t.emit("error",e)}),c.on("close",function(){t.emit("close")}),t.callback){var l=bl(),h=[];t.on("data",function(e){Buffer.isBuffer(e)?l.append(e):h.push(e)}),t.on("end",function(){if(debug("end event",t.uri.href),t._aborted)return void debug("aborted",t.uri.href);if(l.length?(debug("has body",t.uri.href,l.length),null===t.encoding?e.body=l.slice():e.body=l.toString(t.encoding)):h.length&&("utf8"===t.encoding&&h[0].length>0&&"\ufeff"===h[0][0]&&(h[0]=h[0].substring(1)),e.body=h.join("")),t._json)try{e.body=JSON.parse(e.body,t._jsonReviver)}catch(r){}debug("emitting complete",t.uri.href),"undefined"!=typeof e.body||t._json||(e.body=null===t.encoding?new Buffer(0):""),t.emit("complete",e,e.body)})}else t.on("end",function(){return t._aborted?void debug("aborted",t.uri.href):void t.emit("complete",e)});debug("finish init function",t.uri.href)},Request.prototype.abort=function(){var e=this;e._aborted=!0,e.req?e.req.abort():e.response&&e.response.abort(),e.emit("abort")},Request.prototype.pipeDest=function(e){var t=this,r=t.response;if(e.headers&&!e.headersSent){if(r.caseless.has("content-type")){var o=r.caseless.has("content-type");e.setHeader?e.setHeader(o,r.headers[o]):e.headers[o]=r.headers[o]}if(r.caseless.has("content-length")){var n=r.caseless.has("content-length");e.setHeader?e.setHeader(n,r.headers[n]):e.headers[n]=r.headers[n]}}if(e.setHeader&&!e.headersSent){for(var a in r.headers)t.gzip&&"content-encoding"===a||e.setHeader(a,r.headers[a]);e.statusCode=r.statusCode}t.pipefilter&&t.pipefilter(r,e)},Request.prototype.qs=function(e,t){var r,o=this;r=!t&&o.uri.query?o.qsLib.parse(o.uri.query):{};for(var n in e)r[n]=e[n];if(""===o.qsLib.stringify(r))return o;var a=o.qsLib.stringify(r);return o.uri=url.parse(o.uri.href.split("?")[0]+"?"+rfc3986(a)),o.url=o.uri,o.path=o.uri.path,o},Request.prototype.form=function(e){var t=this;return e?(t.setHeader("content-type","application/x-www-form-urlencoded"),t.body="string"==typeof e?e.toString("utf8"):t.qsLib.stringify(e).toString("utf8"),t.body=rfc3986(t.body),t):(t._form=new FormData,t._form.on("error",function(e){e.message="form-data: "+e.message,t.emit("error",e),t.abort()}),t._form)},Request.prototype.multipart=function(e){function t(e){return o?s.append(e):s.push(new Buffer(e))}var r=this,o=!1,n=e.data||e;if(!n.forEach)throw new Error("Argument error, options.multipart.");"chunked"===r.getHeader("transfer-encoding")&&(o=!0),void 0!==e.chunked&&(o=e.chunked),o||n.forEach(function(e){if("undefined"==typeof e.body)throw new Error("Body attribute missing in multipart.");isstream(e.body)&&(o=!0)}),o&&!r.hasHeader("transfer-encoding")&&r.setHeader("transfer-encoding","chunked");var a=r.hasHeader("content-type");a&&-1!==r.headers[a].indexOf("multipart")?r.setHeader(a,r.headers[a].split(";")[0]+"; boundary="+r.boundary):r.setHeader("content-type","multipart/related; boundary="+r.boundary);var s=o?new CombinedStream:[];return r.preambleCRLF&&t("\r\n"),n.forEach(function(e){var o=e.body,n="--"+r.boundary+"\r\n";Object.keys(e).forEach(function(t){"body"!==t&&(n+=t+": "+e[t]+"\r\n")}),n+="\r\n",t(n),t(o),t("\r\n")}),t("--"+r.boundary+"--"),r.postambleCRLF&&t("\r\n"),r[o?"_multipart":"body"]=s,r},Request.prototype.json=function(e){var t=this;return t.hasHeader("accept")||t.setHeader("accept","application/json"),t._json=!0,"boolean"==typeof e?void 0!==t.body&&(/^application\/x-www-form-urlencoded\b/.test(t.getHeader("content-type"))?t.body=rfc3986(t.body):t.body=safeStringify(t.body),t.hasHeader("content-type")||t.setHeader("content-type","application/json")):(t.body=safeStringify(e),t.hasHeader("content-type")||t.setHeader("content-type","application/json")),"function"==typeof t.jsonReviver&&(t._jsonReviver=t.jsonReviver),t},Request.prototype.getHeader=function(e,t){var r,o,n,a=this;return t||(t=a.headers),Object.keys(t).forEach(function(a){a.length===e.length&&(o=new RegExp(e,"i"),n=a.match(o),n&&(r=t[a]))}),r};var getHeader=Request.prototype.getHeader;Request.prototype.auth=function(e,t,r,o){var n,a=this;return n=void 0!==o?a._auth.bearer(o,r):a._auth.basic(e,t,r),n&&a.setHeader("authorization",n),a},Request.prototype.aws=function(e,t){var r=this;if(!t)return r._aws=e,r;var o=new Date;r.setHeader("date",o.toUTCString());var n={key:e.key,secret:e.secret,verb:r.method.toUpperCase(),date:o,contentType:r.getHeader("content-type")||"",md5:r.getHeader("content-md5")||"",amazonHeaders:aws.canonicalizeHeaders(r.headers)},a=r.uri.path;return e.bucket&&a?n.resource="/"+e.bucket+a:e.bucket&&!a?n.resource="/"+e.bucket:!e.bucket&&a?n.resource=a:e.bucket||a||(n.resource="/"),n.resource=aws.canonicalizeResource(n.resource),r.setHeader("authorization",aws.authorization(n)),r},Request.prototype.httpSignature=function(e){var t=this;return httpSignature.signRequest({getHeader:function(e){return getHeader(e,t.headers)},setHeader:function(e,r){t.setHeader(e,r)},method:t.method,path:t.path},e),debug("httpSignature authorization",t.getHeader("authorization")),t},Request.prototype.hawk=function(e){var t=this;t.setHeader("Authorization",hawk.client.header(t.uri,t.method,e).field)},Request.prototype.oauth=function(e){var t=this,r=oauth.oauth({uri:t.uri,method:t.method,headers:t.headers,body:t.body,oauth:e,qsLib:t.qsLib});return"header"===r.transport?t.setHeader("Authorization",r.oauth):"query"===r.transport?t.path+=r.oauth:"body"===r.transport&&(t.body=r.oauth),t},Request.prototype.jar=function(e){var t,r=this;if(0===r._redirectsFollowed&&(r.originalCookieHeader=r.getHeader("cookie")),e){var o=e&&e.getCookieString?e:globalCookieJar,n=r.uri.href;o&&(t=o.getCookieString(n))}else t=!1,r._disableCookies=!0;return t&&t.length&&(r.originalCookieHeader?r.setHeader("cookie",r.originalCookieHeader+"; "+t):r.setHeader("cookie",t)),r._jar=e,r},Request.prototype.pipe=function(e,t){var r=this;if(r.response){if(r._destdata)throw new Error("You cannot pipe after data has been emitted from the response.");if(r._ended)throw new Error("You cannot pipe after the response has been ended.");return stream.Stream.prototype.pipe.call(r,e,t),r.pipeDest(e),e}return r.dests.push(e),stream.Stream.prototype.pipe.call(r,e,t),e},Request.prototype.write=function(){var e=this;return e._started||e.start(),e.req.write.apply(e.req,arguments)},Request.prototype.end=function(e){var t=this;e&&t.write(e),t._started||t.start(),t.req.end()},Request.prototype.pause=function(){var e=this;e.response?e.response.pause.apply(e.response,arguments):e._paused=!0},Request.prototype.resume=function(){var e=this;e.response?e.response.resume.apply(e.response,arguments):e._paused=!1},Request.prototype.destroy=function(){var e=this;e._ended?e.response&&e.response.destroy():e.end()},Request.defaultProxyHeaderWhiteList=defaultProxyHeaderWhiteList.slice(),Request.defaultProxyHeaderExclusiveList=defaultProxyHeaderExclusiveList.slice(),Request.prototype.toJSON=requestToJSON,module.exports=Request;


  }).call(this,require("Zbi7gb"),require("buffer").Buffer)
},{"./lib/auth":185,"./lib/cookies":186,"./lib/copy":187,"./lib/getProxyFromURI":188,"./lib/helpers":189,"./lib/oauth":190,"Zbi7gb":95,"aws-sign2":191,"bl":192,"buffer":78,"caseless":201,"combined-stream":202,"forever-agent":204,"form-data":205,"hawk":207,"http":88,"http-signature":208,"https":92,"isstream":223,"mime-types":225,"net":63,"node-uuid":228,"qs":230,"querystring":99,"stream":101,"stringstream":235,"tunnel-agent":243,"url":266,"util":109,"zlib":77}],245:[function(require,module,exports){
  "use strict";var XHRDownloader=require("./lib/XHRDownloader"),NodeDownloader=require("./lib/NodeDownloader"),Downloader=require("./lib/Downloader");module.exports={XHRDownloader:XHRDownloader,NodeDownloader:NodeDownloader,Downloader:Downloader};


},{"./lib/Downloader":247,"./lib/NodeDownloader":248,"./lib/XHRDownloader":249}],246:[function(require,module,exports){
  var uuid=require("uuid"),AbstractDownloader=function(o,n){if(!(this instanceof AbstractDownloader))throw new Error("XHRDownloader should be called as a constructor.");n&&n.hasOwnProperty("cancelCDNDownloadById")&&n.cancelCDNDownloadById instanceof Function?this.downloadManager=n:this.downloadManager={cancelCDNDownloadById:function(){}},this.downloading=!1,this.id=o||uuid.v4(),this.downloadRequest=null};AbstractDownloader.prototype._makeRange=function(o,n){var t=o||0;return n?"bytes="+t+"-"+n:"bytes="+t+"-"},AbstractDownloader.prototype.abort=function(){this.downloading&&this.downloadRequest&&(this.downloading=!1,this.downloadRequest.abort())},module.exports=AbstractDownloader;


},{"uuid":251}],247:[function(require,module,exports){
  "use strict";var Downloader;Downloader="undefined"!=typeof window&&window.XMLHttpRequest&&window.XMLHttpRequest instanceof Function?require("./XHRDownloader"):require("./NodeDownloader"),module.exports=Downloader;


},{"./NodeDownloader":248,"./XHRDownloader":249}],248:[function(require,module,exports){
  "use strict";var request=require("request"),AbstractDownloader=require("./AbstractDownloader"),NodeDownloader=function(e,r){AbstractDownloader.call(this,e,r)};NodeDownloader.prototype=Object.create(AbstractDownloader.prototype),NodeDownloader.prototype.constructor=NodeDownloader,NodeDownloader.prototype._toArrayBuffer=function(e){for(var r=e||[],o=new ArrayBuffer(r.length),a=new Uint8Array(o),t=0;t<r.length;++t)a[t]=r[t];return o},NodeDownloader.prototype.getURL=function(e,r){var o=this;o.downloading=!0;var a,t,n,d=r||function(){},s={url:e.url,headers:{}};switch(e.responseType&&(a=e.responseType.toLowerCase()),a){case"buffer":case"arraybuffer":s.encoding=null;break;case"text":s.encoding="utf8";break;default:s.encoding="utf8"}e.range&&(s.headers.Range=o._makeRange(e.range.start,e.range.end)),t=Date.now(),o.downloadRequest=request.get(s,function(r,s,u){if(n=Date.now(),r)return o.downloading=!1,o.downloadManager.cancelCDNDownloadById(o.id),void d(r);if("4"===s.statusCode[0]||"5"===s.statusCode[0])return o.downloading=!1,o.downloadManager.cancelCDNDownloadById(o.id),void d(new Error("Server returned a 4XX or 5XX error code."));var l;switch(a){case"buffer":case"text":l=u;break;case"arraybuffer":l=o._toArrayBuffer(u);break;default:l=u}d(null,{response:l,pptes:e.pptes,startTimestamp:t,endTimestamp:n})})},module.exports=NodeDownloader;


},{"./AbstractDownloader":246,"request":184}],249:[function(require,module,exports){
  "use strict";var AbstractDownloader=require("./AbstractDownloader"),XHRDownloader=function(t,e){AbstractDownloader.call(this,t,e)};XHRDownloader.prototype=Object.create(AbstractDownloader.prototype),XHRDownloader.prototype.constructor=XHRDownloader,XHRDownloader.prototype._generateArrayBufferView=function(t){return new Uint8Array(t)},XHRDownloader.prototype._onLoadStart=function(t){this.downloading=!0,this.startDownloadTimestamp=Date.now()},XHRDownloader.prototype._onLoaded=function(t){if(this.downloading=!1,this.endDownloadTimestamp=Date.now(),!(t.target.status>=200&&t.target.status<=299))return void this._onLoadError(t);var e;"arraybuffer"===t.target.responseType&&(e=this._generateArrayBufferView(t.target.response)),t.target._cb(null,{response:t.target.response,pptes:t.target._pptes,startTimestamp:this.startDownloadTimestamp,endTimestamp:this.endDownloadTimestamp,arrayBufferView:e})},XHRDownloader.prototype._onLoadError=function(t){var e;0,this.downloading=!1,this.downloadManager.cancelCDNDownloadById(this.id),e=new Error("Error when processing the request."),e.status=t.target.status,t.target._cb(e)},XHRDownloader.prototype.getURL=function(t,e){var o=e||function(){};this.url_infos=t,this.downloadRequest=new XMLHttpRequest,this.downloadRequest.onloadstart=this._onLoadStart.bind(this),this.downloadRequest.onerror=this._onLoadError.bind(this),this.downloadRequest.onloadend=this._onLoaded.bind(this),this.downloadRequest._pptes=t.pptes,this.downloadRequest._cb=o,this.downloadRequest.open("GET",t.url),t.range&&this.downloadRequest.setRequestHeader("Range",this._makeRange(t.range.start,t.range.end)),t.responseType&&(this.downloadRequest.responseType=t.responseType),this.downloadRequest.send()},module.exports=XHRDownloader;


},{"./AbstractDownloader":246}],250:[function(require,module,exports){
  (function (global){
    var rng;if(global.crypto&&crypto.getRandomValues){var _rnds8=new Uint8Array(16);rng=function(){return crypto.getRandomValues(_rnds8),_rnds8}}if(!rng){var _rnds=new Array(16);rng=function(){for(var r,n=0;16>n;n++)0===(3&n)&&(r=4294967296*Math.random()),_rnds[n]=r>>>((3&n)<<3)&255;return _rnds}}module.exports=rng;


  }).call(this,typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],251:[function(require,module,exports){
  function parse(e,s,r){var t=s&&r||0,n=0;for(s=s||[],e.toLowerCase().replace(/[0-9a-f]{2}/g,function(e){16>n&&(s[t+n++]=_hexToByte[e])});16>n;)s[t+n++]=0;return s}function unparse(e,s){var r=s||0,t=_byteToHex;return t[e[r++]]+t[e[r++]]+t[e[r++]]+t[e[r++]]+"-"+t[e[r++]]+t[e[r++]]+"-"+t[e[r++]]+t[e[r++]]+"-"+t[e[r++]]+t[e[r++]]+"-"+t[e[r++]]+t[e[r++]]+t[e[r++]]+t[e[r++]]+t[e[r++]]+t[e[r++]]}function v1(e,s,r){var t=s&&r||0,n=s||[];e=e||{};var o=void 0!==e.clockseq?e.clockseq:_clockseq,a=void 0!==e.msecs?e.msecs:(new Date).getTime(),u=void 0!==e.nsecs?e.nsecs:_lastNSecs+1,c=a-_lastMSecs+(u-_lastNSecs)/1e4;if(0>c&&void 0===e.clockseq&&(o=o+1&16383),(0>c||a>_lastMSecs)&&void 0===e.nsecs&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");_lastMSecs=a,_lastNSecs=u,_clockseq=o,a+=122192928e5;var i=(1e4*(268435455&a)+u)%4294967296;n[t++]=i>>>24&255,n[t++]=i>>>16&255,n[t++]=i>>>8&255,n[t++]=255&i;var _=a/4294967296*1e4&268435455;n[t++]=_>>>8&255,n[t++]=255&_,n[t++]=_>>>24&15|16,n[t++]=_>>>16&255,n[t++]=o>>>8|128,n[t++]=255&o;for(var d=e.node||_nodeId,v=0;6>v;v++)n[t+v]=d[v];return s?s:unparse(n)}function v4(e,s,r){var t=s&&r||0;"string"==typeof e&&(s="binary"==e?new Array(16):null,e=null),e=e||{};var n=e.random||(e.rng||_rng)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,s)for(var o=0;16>o;o++)s[t+o]=n[o];return s||unparse(n)}for(var _rng=require("./rng"),_byteToHex=[],_hexToByte={},i=0;256>i;i++)_byteToHex[i]=(i+256).toString(16).substr(1),_hexToByte[_byteToHex[i]]=i;var _seedBytes=_rng(),_nodeId=[1|_seedBytes[0],_seedBytes[1],_seedBytes[2],_seedBytes[3],_seedBytes[4],_seedBytes[5]],_clockseq=16383&(_seedBytes[6]<<8|_seedBytes[7]),_lastMSecs=0,_lastNSecs=0,uuid=v4;uuid.v1=v1,uuid.v4=v4,uuid.parse=parse,uuid.unparse=unparse,module.exports=uuid;


},{"./rng":250}],252:[function(require,module,exports){
  var M3U = module.exports = function M3U() {
    this.items = {
      PlaylistItem: [],
      StreamItem: [],
      IframeStreamItem: [],
      MediaItem: []
    };
    this.properties = {};
  };

  M3U.PlaylistItem     = require('./m3u/PlaylistItem');
  M3U.MediaItem        = require('./m3u/MediaItem');
  M3U.StreamItem       = require('./m3u/StreamItem');
  M3U.IframeStreamItem = require('./m3u/IframeStreamItem');

  var Item = require('./m3u/Item');

  M3U.create = function createM3U() {
    return new M3U;
  };

  M3U.prototype.get = function getProperty(key) {
    return this.properties[key];
  };

  M3U.prototype.set = function setProperty(key, value) {
    var tagKey = propertyMap.findByTag(key);
    if (tagKey) key = tagKey.key;
    this.properties[key] = coerce[dataTypes[key] || 'unknown'](value);

    return this;
  };

  M3U.prototype.addItem = function addItem(item) {
    var itemClassName = item.constructor.name || item.getClassName();
    this.items[itemClassName].push(item);

    return this;
  };

  M3U.prototype.addPlaylistItem = function addPlaylistItem(data) {
    this.items.PlaylistItem.push(M3U.PlaylistItem.create(data));
  };

  M3U.prototype.addMediaItem = function addMediaItem(data) {
    this.items.MediaItem.push(M3U.MediaItem.create(data));
  };

  M3U.prototype.addStreamItem = function addStreamItem(data) {
    this.items.StreamItem.push(M3U.StreamItem.create(data));
  };

  M3U.prototype.addIframeStreamItem = function addIframeStreamItem(data) {
    this.items.IframeStreamItem.push(M3U.IframeStreamItem.create(data));
  };

  M3U.prototype.domainDurations = function domainDurations() {
    var index = 0;
    return this.items.PlaylistItem.reduce(function(duration, item) {
      if (item.get('discontinuity')) {
        index = duration.push(0) - 1;
      }

      duration[index] += item.get('duration');
      return duration;
    }, [0]);
  };

  M3U.prototype.totalDuration = function totalDuration() {
    return this.items.PlaylistItem.reduce(function(duration, item) {
      return duration + item.get('duration');
    }, 0);
  };

  M3U.prototype.merge = function merge(m3u) {
    if (m3u.get('targetDuration') > this.get('targetDuration')) {
      this.set('targetDuration', m3u.get('targetDuration'));
    }
    m3u.items.PlaylistItem[0].set('discontinuity', true);
    this.items.PlaylistItem = this.items.PlaylistItem.concat(m3u.items.PlaylistItem);

    return this;
  };

  M3U.prototype.toString = function toString() {
    var self   = this;
    var output = ['#EXTM3U'];
    Object.keys(this.properties).forEach(function(key) {
      var tagKey = propertyMap.findByKey(key);
      var tag = tagKey ? tagKey.tag : key;

      if (dataTypes[key] == 'boolean') {
        output.push('#' + tag);
      } else {
        output.push('#' + tag + ':' + self.get(key));
      }
    });

    if (this.items.PlaylistItem.length) {
      output.push(this.items.PlaylistItem.map(itemToString).join('\n'));

      if (this.get('playlistType') === 'VOD') {
        output.push('#EXT-X-ENDLIST');
      }
    } else {
      if (this.items.StreamItem.length) {
        output.push(this.items.StreamItem.map(itemToString).join('\n') + '\n');
      }
      if (this.items.IframeStreamItem.length) {
        output.push(this.items.IframeStreamItem.map(itemToString).join('\n') + '\n');
      }
      if (this.items.MediaItem.length) {
        output.push(this.items.MediaItem.map(itemToString).join('\n') + '\n');
      }
    }

    return output.join('\n') + '\n';
  };

  M3U.prototype.serialize = function serialize() {
    var object = { properties: this.properties, items: {} };
    var self   = this;
    Object.keys(this.items).forEach(function(constructor) {
      object.items[constructor] = self.items[constructor].map(serializeItem);
    });
    return object;
  };

  M3U.unserialize = function unserialize(object) {
    var m3u = new M3U;
    m3u.properties = object.properties;
    Object.keys(object.items).forEach(function(constructor) {
      m3u.items[constructor] = object.items[constructor].map(
        Item.unserialize.bind(null, M3U[constructor])
      );
    });
    return m3u;
  };

  function itemToString(item) {
    return item.toString();
  }

  function serializeItem(item) {
    return item.serialize();
  }

  var coerce = {
    boolean: function coerceBoolean(value) {
      return true;
    },
    integer: function coerceInteger(value) {
      return parseInt(value, 10);
    },
    unknown: function coerceUnknown(value) {
      return value;
    }
  };

  var dataTypes = {
    iframesOnly    : 'boolean',
    targetDuration : 'integer',
    mediaSequence  : 'integer',
    version        : 'integer'
  };

  var propertyMap = [
    { tag: 'EXT-X-ALLOW-CACHE',    key: 'allowCache' },
    { tag: 'EXT-X-I-FRAMES-ONLY',  key: 'iframesOnly' },
    { tag: 'EXT-X-MEDIA-SEQUENCE', key: 'mediaSequence' },
    { tag: 'EXT-X-PLAYLIST-TYPE',  key: 'playlistType' },
    { tag: 'EXT-X-TARGETDURATION', key: 'targetDuration' },
    { tag: 'EXT-X-VERSION',        key: 'version' }
  ];

  propertyMap.findByTag = function findByTag(tag) {
    return propertyMap[propertyMap.map(function(tagKey) {
      return tagKey.tag;
    }).indexOf(tag)];
  };

  propertyMap.findByKey = function findByKey(key) {
    return propertyMap[propertyMap.map(function(tagKey) {
      return tagKey.key;
    }).indexOf(key)];
  };

},{"./m3u/IframeStreamItem":254,"./m3u/Item":255,"./m3u/MediaItem":256,"./m3u/PlaylistItem":257,"./m3u/StreamItem":258}],253:[function(require,module,exports){
  var AttributeList = module.exports = function AttributeList(attributes) {
    this.attributes = {};
    this.mergeAttributes(attributes);
  };

  var dataTypes = AttributeList.dataTypes = {
    'audio'      : 'quoted-string',
    'autoselect' : 'boolean',
    'bandwidth'  : 'decimal-integer',
    'byterange'  : 'enumerated-string',
    'codecs'     : 'quoted-string',
    'default'    : 'boolean',
    'duration'   : 'decimal-floating-point',
    'forced'     : 'boolean',
    'group-id'   : 'quoted-string',
    'language'   : 'quoted-string',
    'name'       : 'quoted-string',
    'program-id' : 'decimal-integer',
    'resolution' : 'decimal-resolution',
    'subtitles'  : 'quoted-string',
    'title'      : 'enumerated-string',
    'type'       : 'enumerated-string',
    'uri'        : 'quoted-string',
    'video'      : 'quoted-string'
  };

  AttributeList.prototype.mergeAttributes = function mergeAttributes(attributes) {
    var self = this;
    if (Array.isArray(attributes)) {
      attributes.forEach(function(attribute) {
        self.set(attribute.key, attribute.value);
      });
    }
  };

  AttributeList.prototype.get = function getValue(key) {
    return this.attributes[key];
  };

  AttributeList.prototype.set = function setValue(key, value) {
    key = key.toLowerCase();
    this.attributes[key] = parse[dataTypes[key] || 'unknown'](value, key);

    return this;
  };

  AttributeList.prototype.getCoerced = function getCoerced(key) {
    return coerce[dataTypes[key] || 'unknown'](this.get(key));
  };

  AttributeList.prototype.toString = function toString() {
    var self = this;
    return Object.keys(this.attributes).map(function(key) {
      return [key.toUpperCase(), self.getCoerced(key)].join('=');
    }).join(',');
  };

  AttributeList.prototype.serialize = function serialize() {
    return this.attributes;
  };

  AttributeList.unserialize = function unserialize(object) {
    var list = new AttributeList;
    list.attributes = object;
    return list;
  };

  var coerce = {
    'boolean': function coerceBoolean(value) {
      return value ? 'YES' : 'NO';
    },
    'decimal-floating-point': parseFloat,
    'decimal-integer': function coerceDecimalInteger(value) {
      return parseInt(value, 10);
    },
    'decimal-resolution': function coerceDecimalResolution(value) {
      if (Array.isArray(value)) {
        return value.join('x');
      } else {
        return value;
      }
    },
    'enumerated-string': function coerceEnumeratedString(value) {
      return value;
    },
    'quoted-string': function coerceQuotedString(value) {
      return '"' + value.replace(/"/g, '\\"') + '"';
    },
    'unknown': function coerceUnknown(value) {
      return value;
    }
  };

  var parse = {
    'boolean': function parseBoolean(value) {
      return typeof value == 'boolean'
        ? value
        : (value == 'YES' ? true : false);
    },
    'decimal-floating-point': parseFloat,
    'decimal-integer': function parseDecimalInteger(value) {
      return parseInt(value, 10);
    },
    'decimal-resolution': function coerceDecimalResolution(value) {
      return value.split('x').map(parse['decimal-integer']);
    },
    'enumerated-string': function parseEnumeratedString(value) {
      return value;
    },
    'quoted-string': function parseQuotedString(value) {
      if (Array.isArray(value)) {
        return value.join(',');
      } else if (value.indexOf('"') === 0 &&
        value.lastIndexOf('"') == value.length - 1) {
        return value.slice(1,-1);
      } else {
        return value;
      }
    },
    'unknown': function parseUnknown(value, key) {
      0;
      return value;
    }
  };
},{}],254:[function(require,module,exports){
  var util       = require('util'),
    StreamItem = require('./StreamItem');

  var IframeStreamItem = module.exports = function IframeStreamItem(attributes) {
    StreamItem.apply(this, arguments);

    delete this.properties['uri'];
  };

  util.inherits(IframeStreamItem, StreamItem);

  IframeStreamItem.create = function createIframeStreamItem(data) {
    var item =  new IframeStreamItem();
    item.setData(data);
    return item;
  };

  IframeStreamItem.prototype.toString = function toString() {
    return '#EXT-X-I-FRAME-STREAM-INF:' + this.attributes.toString();
  };
},{"./StreamItem":258,"util":109}],255:[function(require,module,exports){
  var AttributeList    = require('./AttributeList');

  var Item = module.exports = function Item(attributes) {
    this.attributes = new AttributeList(attributes);
    this.properties = {
      byteRange     : null,
      date          : null,
      discontinuity : null,
      duration      : null,
      title         : null,
      uri           : null
    };
  };

  Item.prototype.get = function get(key) {
    if (this.propertiesHasKey(key)) {
      return this.properties[key];
    } else {
      return this.attributes.get(key);
    }
  };

  Item.prototype.set = function set(key, value) {
    if (this.propertiesHasKey(key)) {
      this.properties[key] = value;
    } else {
      this.attributes.set(key, value);
    }

    return this;
  };

  Item.prototype.serialize = function serialize() {
    return {
      attributes  : this.attributes.serialize(),
      properties  : this.properties
    }
  };

  Item.unserialize = function unserialize(constructor, object) {
    var item = new constructor;
    item.attributes = AttributeList.unserialize(object.attributes);
    item.properties = object.properties;
    return item;
  };

  Item.prototype.setData = function setData(data) {
    var self = this;
    Object.keys(data).forEach(function(key) {
      self.set(key, data[key]);
    });
  };

  Item.prototype.propertiesHasKey = function hasKey(key) {
    return Object.keys(this.properties).indexOf(key) > -1;
  };

  Item.prototype.getClassName = function getName() {
    return this.constructor.toString().match(/function (\w*)/)[1];
  };

},{"./AttributeList":253}],256:[function(require,module,exports){
  var util = require('util'),
    Item = require('./Item');

  var MediaItem = module.exports = function MediaItem(attributes) {
    Item.apply(this, arguments);

    delete this.properties['uri'];
  };

  util.inherits(MediaItem, Item);

  MediaItem.create = function createMediaItem(data) {
    var item = new MediaItem();
    item.setData(data);
    return item;
  };

  MediaItem.prototype.toString = function toString() {
    return '#EXT-X-MEDIA:' + this.attributes.toString();
  };
},{"./Item":255,"util":109}],257:[function(require,module,exports){
  var util = require('util'),
    Item = require('./Item');

  var PlaylistItem = module.exports = function PlaylistItem() {
    Item.call(this);
    this.properties.key = null;
  };

  util.inherits(PlaylistItem, Item);

  PlaylistItem.create = function createPlaylistItem(data) {
    var item = new PlaylistItem();
    item.setData(data);
    return item;
  };

  PlaylistItem.prototype.toString = function toString() {
    var output = [];
    if (this.get('discontinuity')) {
      output.push('#EXT-X-DISCONTINUITY');
    }
    if (this.get('date')) {
      var date = this.get('date');
      if (date.getMonth) {
        date = date.toISOString();
      }
      output.push('#EXT-X-PROGRAM-DATE-TIME:' + date);
    }
    if (this.get('duration') != null || this.get('title') != null) {
      output.push(
        '#EXTINF:' + [this.get('duration').toFixed(4), this.get('title')].join(',')
      );
    }
    if (this.get('byteRange') != null) {
      output.push('#EXT-X-BYTERANGE:' + this.get('byteRange'));
    }
    output.push(this.get('uri'));

    return output.join('\n');
  };

},{"./Item":255,"util":109}],258:[function(require,module,exports){
  var util = require('util'),
    Item = require('./Item'),
    AttributeList = require('./AttributeList');

  var StreamItem = module.exports = function StreamItem(attributes) {
    Item.apply(this, arguments);
  };

  util.inherits(StreamItem, Item);

  StreamItem.create = function createStreamItem(data) {
    var item = new StreamItem();
    item.setData(data);
    return item;
  };

  StreamItem.prototype.toString = function toString() {
    var output = [];
    output.push('#EXT-X-STREAM-INF:' + this.attributes.toString());
    output.push(this.get('uri'));

    return output.join('\n');
  };
},{"./AttributeList":253,"./Item":255,"util":109}],259:[function(require,module,exports){
  /*!
   * ChunkedStream
   * Copyright(c) 2012 Daniel D. Shaw <dshaw@dshaw.com>
   * MIT Licensed
   */

  /**
   * Module dependencies.
   */

  var Stream = require('stream').Stream
    , util = require('util')

  /**
   * Exports.
   */

  module.exports = ChunkedStream

  /**
   * Chunked Stream
   *
   * - Buffers and rechunks on a specific character, by default '\n'.
   */


  function ChunkedStream (matcher, passEmpty) {
    if (!(this instanceof ChunkedStream)) return new ChunkedStream(matcher, passEmpty)

    if (typeof matcher === 'undefined') {
      matcher = '\n'
    }

    this.matcher = matcher
    this.passEmpty = passEmpty
    this.buffer = ''

    this.writable = true
    this.readable = true
  }

  util.inherits(ChunkedStream, Stream)


  ChunkedStream.prototype.write = function (chunk) {
    chunk = chunk.toString()
    var len = chunk.length
      , i = 0

    while (i < len) {
      var char = chunk[i].toString()
      this.buffer += char
      if (char == this.matcher) {
        var data = this.buffer
        this.buffer = ''
        if (!this.passEmpty && data == this.matcher) {
          return true // skip
        }
        this.emit('data', data)
      }
      i++
    }
    return true
  }

  ChunkedStream.prototype.end = function () {
    if (this.buffer) {
      this.emit('data', this.buffer)
    }
    this.emit('end')
  }

},{"stream":101,"util":109}],260:[function(require,module,exports){
  var util = require('util'),
    ChunkedStream = require('chunked-stream'),
    M3U = require('./m3u'),
    PlaylistItem = require('./m3u/PlaylistItem'),
    StreamItem = require('./m3u/StreamItem'),
    IframeStreamItem = require('./m3u/IframeStreamItem'),
    MediaItem = require('./m3u/MediaItem');

// used for splitting strings by commas not within double quotes
  var NON_QUOTED_COMMA = /,(?=(?:[^"]|"[^"]*")*$)/;

  var REG = /METHOD=([^,]*)(?:,URI="([^"]*)"(?:,IV=0[xX](.*))?)?/;

  var m3uParser = module.exports = function m3uParser() {
    ChunkedStream.apply(this, ['\n', true]);

    this.linesRead = 0;
    this.m3u = new M3U;

    this.on('data', this.parse.bind(this));
    var self = this;
    this.on('end', function() {
      self.emit('m3u', self.m3u);
    });
  };

  util.inherits(m3uParser, ChunkedStream);

  m3uParser.M3U = M3U;

  m3uParser.createStream = function() {
    return new m3uParser;
  };

  m3uParser.prototype.parse = function parse(line) {
    line = line.trim();
    if (this.linesRead == 0) {
      if (line != '#EXTM3U') {
        return this.emit('error', new Error(
          'Non-valid M3U file. First line: ' + line
        ));
      }
      this.linesRead++;
      return true;
    }
    if ([''].indexOf(line) > -1) return true;
    if (['#EXT-X-ENDLIST'].indexOf(line) > -1){
      this.m3u.set("EXT-X-PLAYLIST-TYPE", "VOD");
      return true;
    }
    if (line.indexOf('#') == 0) {
      this.parseLine(line);
    } else {
      if (this.currentItem.attributes.uri != undefined) {
        this.addItem(new PlaylistItem);
      }
      this.currentItem.set('uri', line);
      this.emit('item', this.currentItem);
    }
    this.linesRead++;
  };

  m3uParser.prototype.parseLine = function parseLine(line) {
    var parts = line.slice(1).split(/:(.*)/);
    var tag   = parts[0];
    var data  = parts[1];
    if (typeof this[tag] == 'function') {
      this[tag](data, tag);
    } else {
      this.m3u.set(tag, data);
    }
  };

  m3uParser.prototype.addItem = function addItem(item) {
    this.m3u.addItem(item);
    this.currentItem = item;
    return item;
  };

  m3uParser.prototype['EXTINF'] = function parseInf(data) {
    this.addItem(new PlaylistItem);
    if(this.currentKey){
      this.currentItem.set('key',this.currentKey);
    }
    data = data.split(',');
    this.currentItem.set('duration', parseFloat(data[0]));
    this.currentItem.set('title', data[1]);
  };


  m3uParser.prototype['EXT-X-KEY'] = function parseInf(data) {

    var method = data.replace(REG,"$1");
    var uri = data.replace(REG,"$2");
    var ivString = data.replace(REG,"$3");
    var iv;

    //TODO: replace the raw JavaScript object by a Object inheriting from Item
    this.currentKey = {
      method: method
    };
    if(uri.length){
      this.currentKey.url= uri;
    }

    if(ivString.length){
      iv = new Uint8Array(16);
      for(var i=0; i<32; i+=2){
        var byteString = ivString.substr(i, 2);
        var byteInt = parseInt(byteString, 16);
        iv.set([byteInt],i/2);
      }
      this.currentKey.iv= iv;
    }
  };

  m3uParser.prototype['EXT-X-BYTERANGE'] = function parseByteRange(data) {
    this.currentItem.set('byteRange', data);
  };

  m3uParser.prototype['EXT-X-STREAM-INF'] = function(data) {
    this.addItem(new StreamItem(this.parseAttributes(data)));
  };

  m3uParser.prototype['EXT-X-I-FRAME-STREAM-INF'] = function(data) {
    this.addItem(new IframeStreamItem(this.parseAttributes(data)));
    this.emit('item', this.currentItem);
  };

  m3uParser.prototype['EXT-X-MEDIA'] = function(data) {
    this.addItem(new MediaItem(this.parseAttributes(data)));
    this.emit('item', this.currentItem);
  };

  m3uParser.prototype.parseAttributes = function parseAttributes(data) {
    data = data.split(NON_QUOTED_COMMA);
    var self = this;
    return data.map(function(attribute) {
      var keyValue = attribute.split(/=(.+)/).map(function(str) {
        return str.trim();
      });
      return {
        key   : keyValue[0],
        value : keyValue[1]
      };
    });
  };

},{"./m3u":252,"./m3u/IframeStreamItem":254,"./m3u/MediaItem":256,"./m3u/PlaylistItem":257,"./m3u/StreamItem":258,"chunked-stream":259,"util":109}],261:[function(require,module,exports){
  function DOMParser(t){this.options=t||{locator:{}}}function buildErrorHandler(t,e,n){function r(e){var r=t[e];if(!r)if(i)r=2==t.length?function(n){t(e,n)}:t;else for(var a=arguments.length;--a&&!(r=t[arguments[a]]););o[e]=r&&function(t){r(t+_locator(n))}||function(){}}if(!t){if(e instanceof DOMHandler)return e;t=e}var o={},i=t instanceof Function;return n=n||{},r("warning","warn"),r("error","warn","warning"),r("fatalError","warn","warning","error"),o}function DOMHandler(){this.cdata=!1}function position(t,e){e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber}function _locator(t){return t?"\n@"+(t.systemId||"")+"#[line:"+t.lineNumber+",col:"+t.columnNumber+"]":void 0}function _toString(t,e,n){return"string"==typeof t?t.substr(e,n):t.length>=e+n||e?new java.lang.String(t,e,n)+"":t}function appendElement(t,e){t.currentElement?t.currentElement.appendChild(e):t.document.appendChild(e)}if(DOMParser.prototype.parseFromString=function(t,e){var n=this.options,r=new XMLReader,o=n.domBuilder||new DOMHandler,i=n.errorHandler,a=n.locator,c=n.xmlns||{},l={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return a&&o.setDocumentLocator(a),r.errorHandler=buildErrorHandler(i,o,a),r.domBuilder=n.domBuilder||o,/\/x?html?$/.test(e)&&(l.nbsp="Â ",l.copy="Â©",c[""]="http://www.w3.org/1999/xhtml"),t?r.parse(t,c,l):r.errorHandler.error("invalid document source"),o.document},DOMHandler.prototype={startDocument:function(){this.document=(new DOMImplementation).createDocument(null,null,null),this.locator&&(this.document.documentURI=this.locator.systemId)},startElement:function(t,e,n,r){var o=this.document,i=o.createElementNS(t,n||e),a=r.length;appendElement(this,i),this.currentElement=i,this.locator&&position(this.locator,i);for(var c=0;a>c;c++){var t=r.getURI(c),l=r.getValue(c),n=r.getQName(c),s=o.createAttributeNS(t,n);s.getOffset&&position(s.getOffset(1),s),s.value=s.nodeValue=l,i.setAttributeNode(s)}},endElement:function(t,e,n){var r=this.currentElement;r.tagName;this.currentElement=r.parentNode},startPrefixMapping:function(t,e){},endPrefixMapping:function(t){},processingInstruction:function(t,e){var n=this.document.createProcessingInstruction(t,e);this.locator&&position(this.locator,n),appendElement(this,n)},ignorableWhitespace:function(t,e,n){},characters:function(t,e,n){if(t=_toString.apply(this,arguments),this.currentElement&&t){if(this.cdata){var r=this.document.createCDATASection(t);this.currentElement.appendChild(r)}else{var r=this.document.createTextNode(t);this.currentElement.appendChild(r)}this.locator&&position(this.locator,r)}},skippedEntity:function(t){},endDocument:function(){this.document.normalize()},setDocumentLocator:function(t){(this.locator=t)&&(t.lineNumber=0)},comment:function(t,e,n){t=_toString.apply(this,arguments);var r=this.document.createComment(t);this.locator&&position(this.locator,r),appendElement(this,r)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(t,e,n){var r=this.document.implementation;if(r&&r.createDocumentType){var o=r.createDocumentType(t,e,n);this.locator&&position(this.locator,o),appendElement(this,o)}},warning:function(t){0},error:function(t){0},fatalError:function(t){throw 0,t}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(t){DOMHandler.prototype[t]=function(){return null}}),"function"==typeof require){var XMLReader=require("./sax").XMLReader,DOMImplementation=exports.DOMImplementation=require("./dom").DOMImplementation;exports.XMLSerializer=require("./dom").XMLSerializer,exports.DOMParser=DOMParser}


},{"./dom":262,"./sax":263}],262:[function(require,module,exports){
  function copy(e,t){for(var n in e)t[n]=e[n]}function _extends(e,t){function n(){}var o=e.prototype;if(Object.create){var i=Object.create(t.prototype);o.__proto__=i}o instanceof t||(n.prototype=t.prototype,n=new n,copy(o,n),e.prototype=o=n),o.constructor!=e&&("function"!=typeof e&&0,o.constructor=e)}function DOMException(e,t){if(t instanceof Error)var n=t;else n=this,Error.call(this,ExceptionMessage[e]),this.message=ExceptionMessage[e],Error.captureStackTrace&&Error.captureStackTrace(this,DOMException);return n.code=e,t&&(this.message=this.message+": "+t),n}function NodeList(){}function LiveNodeList(e,t){this._node=e,this._refresh=t,_updateLiveList(this)}function _updateLiveList(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!=t){var n=e._refresh(e._node);__set__(e,"length",n.length),copy(n,e),e._inc=t}}function NamedNodeMap(){}function _findNodeIndex(e,t){for(var n=e.length;n--;)if(e[n]===t)return n}function _addNamedNode(e,t,n,o){if(o?t[_findNodeIndex(t,o)]=n:t[t.length++]=n,e){n.ownerElement=e;var i=e.ownerDocument;i&&(o&&_onRemoveAttribute(i,e,o),_onAddAttribute(i,e,n))}}function _removeNamedNode(e,t,n){var o=_findNodeIndex(t,n);if(!(o>=0))throw DOMException(NOT_FOUND_ERR,new Error);for(var i=t.length-1;i>o;)t[o]=t[++o];if(t.length=i,e){var r=e.ownerDocument;r&&(_onRemoveAttribute(r,e,n),n.ownerElement=null)}}function DOMImplementation(e){if(this._features={},e)for(var t in e)this._features=e[t]}function Node(){}function _xmlEncoder(e){return"<"==e&&"&lt;"||">"==e&&"&gt;"||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function _visitNode(e,t){if(t(e))return!0;if(e=e.firstChild)do if(_visitNode(e,t))return!0;while(e=e.nextSibling)}function Document(){}function _onAddAttribute(e,t,n){e&&e._inc++;var o=n.namespaceURI;"http://www.w3.org/2000/xmlns/"==o&&(t._nsMap[n.prefix?n.localName:""]=n.value)}function _onRemoveAttribute(e,t,n,o){e&&e._inc++;var i=n.namespaceURI;"http://www.w3.org/2000/xmlns/"==i&&delete t._nsMap[n.prefix?n.localName:""]}function _onUpdateChild(e,t,n){if(e&&e._inc){e._inc++;var o=t.childNodes;if(n)o[o.length++]=n;else{for(var i=t.firstChild,r=0;i;)o[r++]=i,i=i.nextSibling;o.length=r}}}function _removeChild(e,t){var n=t.previousSibling,o=t.nextSibling;return n?n.nextSibling=o:e.firstChild=o,o?o.previousSibling=n:e.lastChild=n,_onUpdateChild(e.ownerDocument,e),t}function _insertBefore(e,t,n){var o=t.parentNode;if(o&&o.removeChild(t),t.nodeType===DOCUMENT_FRAGMENT_NODE){var i=t.firstChild;if(null==i)return t;var r=t.lastChild}else i=r=t;var a=n?n.previousSibling:e.lastChild;i.previousSibling=a,r.nextSibling=n,a?a.nextSibling=i:e.firstChild=i,null==n?e.lastChild=r:n.previousSibling=r;do i.parentNode=e;while(i!==r&&(i=i.nextSibling));return _onUpdateChild(e.ownerDocument||e,e),t.nodeType==DOCUMENT_FRAGMENT_NODE&&(t.firstChild=t.lastChild=null),t}function _appendSingleChild(e,t){var n=t.parentNode;if(n){var o=e.lastChild;n.removeChild(t);var o=e.lastChild}var o=e.lastChild;return t.parentNode=e,t.previousSibling=o,t.nextSibling=null,o?o.nextSibling=t:e.firstChild=t,e.lastChild=t,_onUpdateChild(e.ownerDocument,e,t),t}function Element(){this._nsMap={}}function Attr(){}function CharacterData(){}function Text(){}function Comment(){}function CDATASection(){}function DocumentType(){}function Notation(){}function Entity(){}function EntityReference(){}function DocumentFragment(){}function ProcessingInstruction(){}function XMLSerializer(){}function serializeToString(e,t){switch(e.nodeType){case ELEMENT_NODE:var n=e.attributes,o=n.length,i=e.firstChild,r=e.tagName,a=htmlns===e.namespaceURI;t.push("<",r);for(var s=0;o>s;s++)serializeToString(n.item(s),t,a);if(i||a&&!/^(?:meta|link|img|br|hr|input)$/i.test(r)){if(t.push(">"),a&&/^script$/i.test(r))i&&t.push(i.data);else for(;i;)serializeToString(i,t),i=i.nextSibling;t.push("</",r,">")}else t.push("/>");return;case DOCUMENT_NODE:case DOCUMENT_FRAGMENT_NODE:for(var i=e.firstChild;i;)serializeToString(i,t),i=i.nextSibling;return;case ATTRIBUTE_NODE:return t.push(" ",e.name,'="',e.value.replace(/[<&"]/g,_xmlEncoder),'"');case TEXT_NODE:return t.push(e.data.replace(/[<&]/g,_xmlEncoder));case CDATA_SECTION_NODE:return t.push("<![CDATA[",e.data,"]]>");case COMMENT_NODE:return t.push("<!--",e.data,"-->");case DOCUMENT_TYPE_NODE:var u=e.publicId,d=e.systemId;if(t.push("<!DOCTYPE ",e.name),u)t.push(' PUBLIC "',u),d&&"."!=d&&t.push('" "',d),t.push('">');else if(d&&"."!=d)t.push(' SYSTEM "',d,'">');else{var c=e.internalSubset;c&&t.push(" [",c,"]"),t.push(">")}return;case PROCESSING_INSTRUCTION_NODE:return t.push("<?",e.target," ",e.data,"?>");case ENTITY_REFERENCE_NODE:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function importNode(e,t,n){var o;switch(t.nodeType){case ELEMENT_NODE:o=t.cloneNode(!1),o.ownerDocument=e;case DOCUMENT_FRAGMENT_NODE:break;case ATTRIBUTE_NODE:n=!0}if(o||(o=t.cloneNode(!1)),o.ownerDocument=e,o.parentNode=null,n)for(var i=t.firstChild;i;)o.appendChild(importNode(e,i,n)),i=i.nextSibling;return o}function cloneNode(e,t,n){var o=new t.constructor;for(var i in t){var r=t[i];"object"!=typeof r&&r!=o[i]&&(o[i]=r)}switch(t.childNodes&&(o.childNodes=new NodeList),o.ownerDocument=e,o.nodeType){case ELEMENT_NODE:var a=t.attributes,s=o.attributes=new NamedNodeMap,u=a.length;s._ownerElement=o;for(var d=0;u>d;d++)o.setAttributeNode(cloneNode(e,a.item(d),!0));break;case ATTRIBUTE_NODE:n=!0}if(n)for(var c=t.firstChild;c;)o.appendChild(cloneNode(e,c,n)),c=c.nextSibling;return o}function __set__(e,t,n){e[t]=n}function getTextContent(e){switch(e.nodeType){case 1:case 11:var t=[];for(e=e.firstChild;e;)7!==e.nodeType&&8!==e.nodeType&&t.push(getTextContent(e)),e=e.nextSibling;return t.join("");default:return e.nodeValue}}var htmlns="http://www.w3.org/1999/xhtml",NodeType={},ELEMENT_NODE=NodeType.ELEMENT_NODE=1,ATTRIBUTE_NODE=NodeType.ATTRIBUTE_NODE=2,TEXT_NODE=NodeType.TEXT_NODE=3,CDATA_SECTION_NODE=NodeType.CDATA_SECTION_NODE=4,ENTITY_REFERENCE_NODE=NodeType.ENTITY_REFERENCE_NODE=5,ENTITY_NODE=NodeType.ENTITY_NODE=6,PROCESSING_INSTRUCTION_NODE=NodeType.PROCESSING_INSTRUCTION_NODE=7,COMMENT_NODE=NodeType.COMMENT_NODE=8,DOCUMENT_NODE=NodeType.DOCUMENT_NODE=9,DOCUMENT_TYPE_NODE=NodeType.DOCUMENT_TYPE_NODE=10,DOCUMENT_FRAGMENT_NODE=NodeType.DOCUMENT_FRAGMENT_NODE=11,NOTATION_NODE=NodeType.NOTATION_NODE=12,ExceptionCode={},ExceptionMessage={},INDEX_SIZE_ERR=ExceptionCode.INDEX_SIZE_ERR=(ExceptionMessage[1]="Index size error",1),DOMSTRING_SIZE_ERR=ExceptionCode.DOMSTRING_SIZE_ERR=(ExceptionMessage[2]="DOMString size error",2),HIERARCHY_REQUEST_ERR=ExceptionCode.HIERARCHY_REQUEST_ERR=(ExceptionMessage[3]="Hierarchy request error",3),WRONG_DOCUMENT_ERR=ExceptionCode.WRONG_DOCUMENT_ERR=(ExceptionMessage[4]="Wrong document",4),INVALID_CHARACTER_ERR=ExceptionCode.INVALID_CHARACTER_ERR=(ExceptionMessage[5]="Invalid character",5),NO_DATA_ALLOWED_ERR=ExceptionCode.NO_DATA_ALLOWED_ERR=(ExceptionMessage[6]="No data allowed",6),NO_MODIFICATION_ALLOWED_ERR=ExceptionCode.NO_MODIFICATION_ALLOWED_ERR=(ExceptionMessage[7]="No modification allowed",7),NOT_FOUND_ERR=ExceptionCode.NOT_FOUND_ERR=(ExceptionMessage[8]="Not found",8),NOT_SUPPORTED_ERR=ExceptionCode.NOT_SUPPORTED_ERR=(ExceptionMessage[9]="Not supported",9),INUSE_ATTRIBUTE_ERR=ExceptionCode.INUSE_ATTRIBUTE_ERR=(ExceptionMessage[10]="Attribute in use",10),INVALID_STATE_ERR=ExceptionCode.INVALID_STATE_ERR=(ExceptionMessage[11]="Invalid state",11),SYNTAX_ERR=ExceptionCode.SYNTAX_ERR=(ExceptionMessage[12]="Syntax error",12),INVALID_MODIFICATION_ERR=ExceptionCode.INVALID_MODIFICATION_ERR=(ExceptionMessage[13]="Invalid modification",13),NAMESPACE_ERR=ExceptionCode.NAMESPACE_ERR=(ExceptionMessage[14]="Invalid namespace",14),INVALID_ACCESS_ERR=ExceptionCode.INVALID_ACCESS_ERR=(ExceptionMessage[15]="Invalid access",15);DOMException.prototype=Error.prototype,copy(ExceptionCode,DOMException),NodeList.prototype={length:0,item:function(e){return this[e]||null}},LiveNodeList.prototype.item=function(e){return _updateLiveList(this),this[e]},_extends(LiveNodeList,NodeList),NamedNodeMap.prototype={length:0,item:NodeList.prototype.item,getNamedItem:function(e){for(var t=this.length;t--;){var n=this[t];if(n.nodeName==e)return n}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new DOMException(INUSE_ATTRIBUTE_ERR);var n=this.getNamedItem(e.nodeName);return _addNamedNode(this._ownerElement,this,e,n),n},setNamedItemNS:function(e){var t,n=e.ownerElement;if(n&&n!=this._ownerElement)throw new DOMException(INUSE_ATTRIBUTE_ERR);return t=this.getNamedItemNS(e.namespaceURI,e.localName),_addNamedNode(this._ownerElement,this,e,t),t},removeNamedItem:function(e){var t=this.getNamedItem(e);return _removeNamedNode(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var n=this.getNamedItemNS(e,t);return _removeNamedNode(this._ownerElement,this,n),n},getNamedItemNS:function(e,t){for(var n=this.length;n--;){var o=this[n];if(o.localName==t&&o.namespaceURI==e)return o}return null}},DOMImplementation.prototype={hasFeature:function(e,t){var n=this._features[e.toLowerCase()];return n&&(!t||t in n)?!0:!1},createDocument:function(e,t,n){var o=new Document;if(o.doctype=n,n&&o.appendChild(n),o.implementation=this,o.childNodes=new NodeList,t){var i=o.createElementNS(e,t);o.appendChild(i)}return o},createDocumentType:function(e,t,n){var o=new DocumentType;return o.name=e,o.nodeName=e,o.publicId=t,o.systemId=n,o}},Node.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return _insertBefore(this,e,t)},replaceChild:function(e,t){this.insertBefore(e,t),t&&this.removeChild(t)},removeChild:function(e){return _removeChild(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return cloneNode(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&t.nodeType==TEXT_NODE&&e.nodeType==TEXT_NODE?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(e){for(var t=this;t;){var n=t._nsMap;if(n)for(var o in n)if(n[o]==e)return o;t=2==t.nodeType?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var n=t._nsMap;if(n&&e in n)return n[e];t=2==t.nodeType?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){var t=this.lookupPrefix(e);return null==t}},copy(NodeType,Node),copy(NodeType,Node.prototype),Document.prototype={nodeName:"#document",nodeType:DOCUMENT_NODE,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType==DOCUMENT_FRAGMENT_NODE){for(var n=e.firstChild;n;){var o=n.nextSibling;this.insertBefore(n,t),n=o}return e}return null==this.documentElement&&1==e.nodeType&&(this.documentElement=e),_insertBefore(this,e,t),e.ownerDocument=this,e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),_removeChild(this,e)},importNode:function(e,t){return importNode(this,e,t)},getElementById:function(e){var t=null;return _visitNode(this.documentElement,function(n){return 1==n.nodeType&&n.getAttribute("id")==e?(t=n,!0):void 0}),t},createElement:function(e){var t=new Element;t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.childNodes=new NodeList;var n=t.attributes=new NamedNodeMap;return n._ownerElement=t,t},createDocumentFragment:function(){var e=new DocumentFragment;return e.ownerDocument=this,e.childNodes=new NodeList,e},createTextNode:function(e){var t=new Text;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new Comment;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new CDATASection;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var n=new ProcessingInstruction;return n.ownerDocument=this,n.tagName=n.target=e,n.nodeValue=n.data=t,n},createAttribute:function(e){var t=new Attr;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new EntityReference;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var n=new Element,o=t.split(":"),i=n.attributes=new NamedNodeMap;return n.childNodes=new NodeList,n.ownerDocument=this,n.nodeName=t,n.tagName=t,n.namespaceURI=e,2==o.length?(n.prefix=o[0],n.localName=o[1]):n.localName=t,i._ownerElement=n,n},createAttributeNS:function(e,t){var n=new Attr,o=t.split(":");return n.ownerDocument=this,n.nodeName=t,n.name=t,n.namespaceURI=e,n.specified=!0,2==o.length?(n.prefix=o[0],n.localName=o[1]):n.localName=t,n}},_extends(Document,Node),Element.prototype={nodeType:ELEMENT_NODE,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var n=this.ownerDocument.createAttribute(e);n.value=n.nodeValue=""+t,this.setAttributeNode(n)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){return e.nodeType===DOCUMENT_FRAGMENT_NODE?this.insertBefore(e,null):_appendSingleChild(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);n&&this.removeAttributeNode(n)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);return n&&n.value||""},setAttributeNS:function(e,t,n){var o=this.ownerDocument.createAttributeNS(e,t);o.value=o.nodeValue=n,this.setAttributeNode(o)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new LiveNodeList(this,function(t){var n=[];return _visitNode(t,function(o){o===t||o.nodeType!=ELEMENT_NODE||"*"!==e&&o.tagName!=e||n.push(o)}),n})},getElementsByTagNameNS:function(e,t){return new LiveNodeList(this,function(n){var o=[];return _visitNode(n,function(i){i===n||i.nodeType!==ELEMENT_NODE||i.namespaceURI!==e||"*"!==t&&i.localName!=t||o.push(i)}),o})}},Document.prototype.getElementsByTagName=Element.prototype.getElementsByTagName,Document.prototype.getElementsByTagNameNS=Element.prototype.getElementsByTagNameNS,_extends(Element,Node),Attr.prototype.nodeType=ATTRIBUTE_NODE,_extends(Attr,Node),CharacterData.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(e){throw new Error(ExceptionMessage[3])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,n){var o=this.data.substring(0,e),i=this.data.substring(e+t);n=o+n+i,this.nodeValue=this.data=n,this.length=n.length}},_extends(CharacterData,Node),Text.prototype={nodeName:"#text",nodeType:TEXT_NODE,splitText:function(e){var t=this.data,n=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;var o=this.ownerDocument.createTextNode(n);return this.parentNode&&this.parentNode.insertBefore(o,this.nextSibling),o}},_extends(Text,CharacterData),Comment.prototype={nodeName:"#comment",nodeType:COMMENT_NODE},_extends(Comment,CharacterData),CDATASection.prototype={nodeName:"#cdata-section",nodeType:CDATA_SECTION_NODE},_extends(CDATASection,CharacterData),DocumentType.prototype.nodeType=DOCUMENT_TYPE_NODE,_extends(DocumentType,Node),Notation.prototype.nodeType=NOTATION_NODE,_extends(Notation,Node),Entity.prototype.nodeType=ENTITY_NODE,_extends(Entity,Node),EntityReference.prototype.nodeType=ENTITY_REFERENCE_NODE,_extends(EntityReference,Node),DocumentFragment.prototype.nodeName="#document-fragment",DocumentFragment.prototype.nodeType=DOCUMENT_FRAGMENT_NODE,_extends(DocumentFragment,Node),ProcessingInstruction.prototype.nodeType=PROCESSING_INSTRUCTION_NODE,_extends(ProcessingInstruction,Node),XMLSerializer.prototype.serializeToString=function(e){var t=[];return serializeToString(e,t),t.join("")},Node.prototype.toString=function(){return XMLSerializer.prototype.serializeToString(this)};try{Object.defineProperty&&(Object.defineProperty(LiveNodeList.prototype,"length",{get:function(){return _updateLiveList(this),this.$length}}),Object.defineProperty(Node.prototype,"textContent",{get:function(){return getTextContent(this)},set:function(e){switch(this.nodeType){case 1:case 11:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=value,this.nodeValue=e}}}),__set__=function(e,t,n){e["$"+t]=n})}catch(e){}"function"==typeof require&&(exports.DOMImplementation=DOMImplementation,exports.XMLSerializer=XMLSerializer);


},{}],263:[function(require,module,exports){
//[4]   	NameStartChar	   ::=   	":" | [A-Z] | "_" | [a-z] | [#xC0-#xD6] | [#xD8-#xF6] | [#xF8-#x2FF] | [#x370-#x37D] | [#x37F-#x1FFF] | [#x200C-#x200D] | [#x2070-#x218F] | [#x2C00-#x2FEF] | [#x3001-#xD7FF] | [#xF900-#xFDCF] | [#xFDF0-#xFFFD] | [#x10000-#xEFFFF]
//[4a]   	NameChar	   ::=   	NameStartChar | "-" | "." | [0-9] | #xB7 | [#x0300-#x036F] | [#x203F-#x2040]
//[5]   	Name	   ::=   	NameStartChar (NameChar)*
  var nameStartChar = /[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]///\u10000-\uEFFFF
  var nameChar = new RegExp("[\\-\\.0-9"+nameStartChar.source.slice(1,-1)+"\u00B7\u0300-\u036F\\ux203F-\u2040]");
  var tagNamePattern = new RegExp('^'+nameStartChar.source+nameChar.source+'*(?:\:'+nameStartChar.source+nameChar.source+'*)?
  return videojs;
}));
);
//var tagNamePattern = /^[a-zA-Z_][\w\-\.]*(?:\:[a-zA-Z_][\w\-\.]*)?$/
//var handlers = 'resolveEntity,getExternalSubset,characters,endDocument,endElement,endPrefixMapping,ignorableWhitespace,processingInstruction,setDocumentLocator,skippedEntity,startDocument,startElement,startPrefixMapping,notationDecl,unparsedEntityDecl,error,fatalError,warning,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,comment,endCDATA,endDTD,endEntity,startCDATA,startDTD,startEntity'.split(',')

//S_TAG,	S_ATTR,	S_EQ,	S_V
//S_ATTR_S,	S_E,	S_S,	S_C
  var S_TAG = 0;//tag name offerring
  var S_ATTR = 1;//attr name offerring 
  var S_ATTR_S=2;//attr name end and space offer
  var S_EQ = 3;//=space?
  var S_V = 4;//attr value(no quot value only)
  var S_E = 5;//attr value end and no space(quot end)
  var S_S = 6;//(attr value end || tag end ) && (space offer)
  var S_C = 7;//closed el<el />

  function XMLReader(){

  }

  XMLReader.prototype = {
    parse:function(source,defaultNSMap,entityMap){
      var domBuilder = this.domBuilder;
      domBuilder.startDocument();
      _copy(defaultNSMap ,defaultNSMap = {})
      parse(source,defaultNSMap,entityMap,
        domBuilder,this.errorHandler);
      domBuilder.endDocument();
    }
  }
  function parse(source,defaultNSMapCopy,entityMap,domBuilder,errorHandler){
    function fixedFromCharCode(code) {
      // String.prototype.fromCharCode does not supports
      // > 2 bytes unicode chars directly
      if (code > 0xffff) {
        code -= 0x10000;
        var surrogate1 = 0xd800 + (code >> 10)
          , surrogate2 = 0xdc00 + (code & 0x3ff);

        return String.fromCharCode(surrogate1, surrogate2);
      } else {
        return String.fromCharCode(code);
      }
    }
    function entityReplacer(a){
      var k = a.slice(1,-1);
      if(k in entityMap){
        return entityMap[k];
      }else if(k.charAt(0) === '#'){
        return fixedFromCharCode(parseInt(k.substr(1).replace('x','0x')))
      }else{
        errorHandler.error('entity not found:'+a);
        return a;
      }
    }
    function appendText(end){//has some bugs
      var xt = source.substring(start,end).replace(/&#?\w+;/g,entityReplacer);
      locator&&position(start);
      domBuilder.characters(xt,0,end-start);
      start = end
    }
    function position(start,m){
      while(start>=endPos && (m = linePattern.exec(source))){
        startPos = m.index;
        endPos = startPos + m[0].length;
        locator.lineNumber++;
        //console.log('line++:',locator,startPos,endPos)
      }
      locator.columnNumber = start-startPos+1;
    }
    var startPos = 0;
    var endPos = 0;
    var linePattern = /.+(?:\r\n?|\n)|.*$/g
    var locator = domBuilder.locator;

    var parseStack = [{currentNSMap:defaultNSMapCopy}]
    var closeMap = {};
    var start = 0;
    while(true){
      var i = source.indexOf('<',start);
      if(i<0){
        if(!source.substr(start).match(/^\s*$/)){
          var doc = domBuilder.document;
          var text = doc.createTextNode(source.substr(start));
          doc.appendChild(text);
          domBuilder.currentElement = text;
        }
        return;
      }
      if(i>start){
        appendText(i);
      }
      switch(source.charAt(i+1)){
        case '/':
          var end = source.indexOf('>',i+3);
          var tagName = source.substring(i+2,end);
          var config = parseStack.pop();
          var localNSMap = config.localNSMap;

          if(config.tagName != tagName){
            errorHandler.fatalError("end tag name: "+tagName+' is not match the current start tagName:'+config.tagName );
          }
          domBuilder.endElement(config.uri,config.localName,tagName);
          if(localNSMap){
            for(var prefix in localNSMap){
              domBuilder.endPrefixMapping(prefix) ;
            }
          }
          end++;
          break;
        // end elment
        case '?':// <?...?>
          locator&&position(i);
          end = parseInstruction(source,i,domBuilder);
          break;
        case '!':// <!doctype,<![CDATA,<!--
          locator&&position(i);
          end = parseDCC(source,i,domBuilder,errorHandler);
          break;
        default:
          try{
            locator&&position(i);

            var el = new ElementAttributes();

            //elStartEnd
            var end = parseElementStartPart(source,i,el,entityReplacer,errorHandler);
            var len = el.length;
            //position fixed
            if(len && locator){
              var backup = copyLocator(locator,{});
              for(var i = 0;i<len;i++){
                var a = el[i];
                position(a.offset);
                a.offset = copyLocator(locator,{});
              }
              copyLocator(backup,locator);
            }
            if(!el.closed && fixSelfClosed(source,end,el.tagName,closeMap)){
              el.closed = true;
              if(!entityMap.nbsp){
                errorHandler.warning('unclosed xml attribute');
              }
            }
            appendElement(el,domBuilder,parseStack);


            if(el.uri === 'http://www.w3.org/1999/xhtml' && !el.closed){
              end = parseHtmlSpecialContent(source,end,el.tagName,entityReplacer,domBuilder)
            }else{
              end++;
            }
          }catch(e){
            errorHandler.error('element parse error: '+e);
            end = -1;
          }

      }
      if(end<0){
        //TODO: è¿™é‡Œæœ‰å¯èƒ½saxå›žé€€ï¼Œæœ‰ä½ç½®é”™è¯¯é£Žé™©
        appendText(i+1);
      }else{
        start = end;
      }
    }
  }
  function copyLocator(f,t){
    t.lineNumber = f.lineNumber;
    t.columnNumber = f.columnNumber;
    return t;

  }

  /**
   * @see #appendElement(source,elStartEnd,el,selfClosed,entityReplacer,domBuilder,parseStack);
   * @return end of the elementStartPart(end of elementEndPart for selfClosed el)
   */
  function parseElementStartPart(source,start,el,entityReplacer,errorHandler){
    var attrName;
    var value;
    var p = ++start;
    var s = S_TAG;//status
    while(true){
      var c = source.charAt(p);
      switch(c){
        case '=':
          if(s === S_ATTR){//attrName
            attrName = source.slice(start,p);
            s = S_EQ;
          }else if(s === S_ATTR_S){
            s = S_EQ;
          }else{
            //fatalError: equal must after attrName or space after attrName
            throw new Error('attribute equal must after attrName');
          }
          break;
        case '\'':
        case '"':
          if(s === S_EQ){//equal
            start = p+1;
            p = source.indexOf(c,start)
            if(p>0){
              value = source.slice(start,p).replace(/&#?\w+;/g,entityReplacer);
              el.add(attrName,value,start-1);
              s = S_E;
            }else{
              //fatalError: no end quot match
              throw new Error('attribute value no end \''+c+'\' match');
            }
          }else if(s == S_V){
            value = source.slice(start,p).replace(/&#?\w+;/g,entityReplacer);
            //console.log(attrName,value,start,p)
            el.add(attrName,value,start);
            //console.dir(el)
            errorHandler.warning('attribute "'+attrName+'" missed start quot('+c+')!!');
            start = p+1;
            s = S_E
          }else{
            //fatalError: no equal before
            throw new Error('attribute value must after "="');
          }
          break;
        case '/':
          switch(s){
            case S_TAG:
              el.setTagName(source.slice(start,p));
            case S_E:
            case S_S:
            case S_C:
              s = S_C;
              el.closed = true;
            case S_V:
            case S_ATTR:
            case S_ATTR_S:
              break;
            //case S_EQ:
            default:
              throw new Error("attribute invalid close char('/')")
          }
          break;
        case ''://end document
          //throw new Error('unexpected end of input')
          errorHandler.error('unexpected end of input');
        case '>':
          switch(s){
            case S_TAG:
              el.setTagName(source.slice(start,p));
            case S_E:
            case S_S:
            case S_C:
              break;//normal
            case S_V://Compatible state
            case S_ATTR:
              value = source.slice(start,p);
              if(value.slice(-1) === '/'){
                el.closed  = true;
                value = value.slice(0,-1)
              }
            case S_ATTR_S:
              if(s === S_ATTR_S){
                value = attrName;
              }
              if(s == S_V){
                errorHandler.warning('attribute "'+value+'" missed quot(")!!');
                el.add(attrName,value.replace(/&#?\w+;/g,entityReplacer),start)
              }else{
                errorHandler.warning('attribute "'+value+'" missed value!! "'+value+'" instead!!')
                el.add(value,value,start)
              }
              break;
            case S_EQ:
              throw new Error('attribute value missed!!');
          }
//			console.log(tagName,tagNamePattern,tagNamePattern.test(tagName))
          return p;
        /*xml space '\x20' | #x9 | #xD | #xA; */
        case '\u0080':
          c = ' ';
        default:
          if(c<= ' '){//space
            switch(s){
              case S_TAG:
                el.setTagName(source.slice(start,p));//tagName
                s = S_S;
                break;
              case S_ATTR:
                attrName = source.slice(start,p)
                s = S_ATTR_S;
                break;
              case S_V:
                var value = source.slice(start,p).replace(/&#?\w+;/g,entityReplacer);
                errorHandler.warning('attribute "'+value+'" missed quot(")!!');
                el.add(attrName,value,start)
              case S_E:
                s = S_S;
                break;
              //case S_S:
              //case S_EQ:
              //case S_ATTR_S:
              //	void();break;
              //case S_C:
              //ignore warning
            }
          }else{//not space
//S_TAG,	S_ATTR,	S_EQ,	S_V
//S_ATTR_S,	S_E,	S_S,	S_C
            switch(s){
              //case S_TAG:void();break;
              //case S_ATTR:void();break;
              //case S_V:void();break;
              case S_ATTR_S:
                errorHandler.warning('attribute "'+attrName+'" missed value!! "'+attrName+'" instead!!')
                el.add(attrName,attrName,start);
                start = p;
                s = S_ATTR;
                break;
              case S_E:
                errorHandler.warning('attribute space is required"'+attrName+'"!!')
              case S_S:
                s = S_ATTR;
                start = p;
                break;
              case S_EQ:
                s = S_V;
                start = p;
                break;
              case S_C:
                throw new Error("elements closed character '/' and '>' must be connected to");
            }
          }
      }
      p++;
    }
  }
  /**
   * @return end of the elementStartPart(end of elementEndPart for selfClosed el)
   */
  function appendElement(el,domBuilder,parseStack){
    var tagName = el.tagName;
    var localNSMap = null;
    var currentNSMap = parseStack[parseStack.length-1].currentNSMap;
    var i = el.length;
    while(i--){
      var a = el[i];
      var qName = a.qName;
      var value = a.value;
      var nsp = qName.indexOf(':');
      if(nsp>0){
        var prefix = a.prefix = qName.slice(0,nsp);
        var localName = qName.slice(nsp+1);
        var nsPrefix = prefix === 'xmlns' && localName
      }else{
        localName = qName;
        prefix = null
        nsPrefix = qName === 'xmlns' && ''
      }
      //can not set prefix,because prefix !== ''
      a.localName = localName ;
      //prefix == null for no ns prefix attribute 
      if(nsPrefix !== false){//hack!!
        if(localNSMap == null){
          localNSMap = {}
          //console.log(currentNSMap,0)
          _copy(currentNSMap,currentNSMap={})
          //console.log(currentNSMap,1)
        }
        currentNSMap[nsPrefix] = localNSMap[nsPrefix] = value;
        a.uri = 'http://www.w3.org/2000/xmlns/'
        domBuilder.startPrefixMapping(nsPrefix, value)
      }
    }
    var i = el.length;
    while(i--){
      a = el[i];
      var prefix = a.prefix;
      if(prefix){//no prefix attribute has no namespace
        if(prefix === 'xml'){
          a.uri = 'http://www.w3.org/XML/1998/namespace';
        }if(prefix !== 'xmlns'){
          a.uri = currentNSMap[prefix]

          //{console.log('###'+a.qName,domBuilder.locator.systemId+'',currentNSMap,a.uri)}
        }
      }
    }
    var nsp = tagName.indexOf(':');
    if(nsp>0){
      prefix = el.prefix = tagName.slice(0,nsp);
      localName = el.localName = tagName.slice(nsp+1);
    }else{
      prefix = null;//important!!
      localName = el.localName = tagName;
    }
    //no prefix element has default namespace
    var ns = el.uri = currentNSMap[prefix || ''];
    domBuilder.startElement(ns,localName,tagName,el);
    //endPrefixMapping and startPrefixMapping have not any help for dom builder
    //localNSMap = null
    if(el.closed){
      domBuilder.endElement(ns,localName,tagName);
      if(localNSMap){
        for(prefix in localNSMap){
          domBuilder.endPrefixMapping(prefix)
        }
      }
    }else{
      el.currentNSMap = currentNSMap;
      el.localNSMap = localNSMap;
      parseStack.push(el);
    }
  }
  function parseHtmlSpecialContent(source,elStartEnd,tagName,entityReplacer,domBuilder){
    if(/^(?:script|textarea)$/i.test(tagName)){
      var elEndStart =  source.indexOf('</'+tagName+'>',elStartEnd);
      var text = source.substring(elStartEnd+1,elEndStart);
      if(/[&<]/.test(text)){
        if(/^script$/i.test(tagName)){
          //if(!/\]\]>/.test(text)){
          //lexHandler.startCDATA();
          domBuilder.characters(text,0,text.length);
          //lexHandler.endCDATA();
          return elEndStart;
          //}
        }//}else{//text area
        text = text.replace(/&#?\w+;/g,entityReplacer);
        domBuilder.characters(text,0,text.length);
        return elEndStart;
        //}

      }
    }
    return elStartEnd+1;
  }
  function fixSelfClosed(source,elStartEnd,tagName,closeMap){
    //if(tagName in closeMap){
    var pos = closeMap[tagName];
    if(pos == null){
      //console.log(tagName)
      pos = closeMap[tagName] = source.lastIndexOf('</'+tagName+'>')
    }
    return pos<elStartEnd;
    //} 
  }
  function _copy(source,target){
    for(var n in source){target[n] = source[n]}
  }
  function parseDCC(source,start,domBuilder,errorHandler){//sure start with '<!'
    var next= source.charAt(start+2)
    switch(next){
      case '-':
        if(source.charAt(start + 3) === '-'){
          var end = source.indexOf('-->',start+4);
          //append comment source.substring(4,end)//<!--
          if(end>start){
            domBuilder.comment(source,start+4,end-start-4);
            return end+3;
          }else{
            errorHandler.error("Unclosed comment");
            return -1;
          }
        }else{
          //error
          return -1;
        }
      default:
        if(source.substr(start+3,6) == 'CDATA['){
          var end = source.indexOf(']]>',start+9);
          domBuilder.startCDATA();
          domBuilder.characters(source,start+9,end-start-9);
          domBuilder.endCDATA()
          return end+3;
        }
        //<!DOCTYPE
        //startDTD(java.lang.String name, java.lang.String publicId, java.lang.String systemId) 
        var matchs = split(source,start);
        var len = matchs.length;
        if(len>1 && /!doctype/i.test(matchs[0][0])){
          var name = matchs[1][0];
          var pubid = len>3 && /^public$/i.test(matchs[2][0]) && matchs[3][0]
          var sysid = len>4 && matchs[4][0];
          var lastMatch = matchs[len-1]
          domBuilder.startDTD(name,pubid && pubid.replace(/^(['"])(.*?)\1$/,'$2'),
            sysid && sysid.replace(/^(['"])(.*?)\1$/,'$2'));
          domBuilder.endDTD();

          return lastMatch.index+lastMatch[0].length
        }
    }
    return -1;
  }



  function parseInstruction(source,start,domBuilder){
    var end = source.indexOf('?>',start);
    if(end){
      var match = source.substring(start,end).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);
      if(match){
        var len = match[0].length;
        domBuilder.processingInstruction(match[1], match[2]) ;
        return end+2;
      }else{//error
        return -1;
      }
    }
    return -1;
  }

  /**
   * @param source
   */
  function ElementAttributes(source){

  }
  ElementAttributes.prototype = {
    setTagName:function(tagName){
      if(!tagNamePattern.test(tagName)){
        throw new Error('invalid tagName:'+tagName)
      }
      this.tagName = tagName
    },
    add:function(qName,value,offset){
      if(!tagNamePattern.test(qName)){
        throw new Error('invalid attribute:'+qName)
      }
      this[this.length++] = {qName:qName,value:value,offset:offset}
    },
    length:0,
    getLocalName:function(i){return this[i].localName},
    getOffset:function(i){return this[i].offset},
    getQName:function(i){return this[i].qName},
    getURI:function(i){return this[i].uri},
    getValue:function(i){return this[i].value}
//	,getIndex:function(uri, localName)){
//		if(localName){
//			
//		}else{
//			var qName = uri
//		}
//	},
//	getValue:function(){return this.getValue(this.getIndex.apply(this,arguments))},
//	getType:function(uri,localName){}
//	getType:function(i){},
  }




  function _set_proto_(thiz,parent){
    thiz.__proto__ = parent;
    return thiz;
  }
  if(!(_set_proto_({},_set_proto_.prototype) instanceof _set_proto_)){
    _set_proto_ = function(thiz,parent){
      function p(){};
      p.prototype = parent;
      p = new p();
      for(parent in thiz){
        p[parent] = thiz[parent];
      }
      return p;
    }
  }

  function split(source,start){
    var match;
    var buf = [];
    var reg = /'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;
    reg.lastIndex = start;
    reg.exec(source);//skip <
    while(match = reg.exec(source)){
      buf.push(match);
      if(match[1])return buf;
    }
  }

  if(typeof require == 'function'){
    exports.XMLReader = XMLReader;
  }


},{}],264:[function(require,module,exports){
  !function(i,e){"use strict";var s="0.7.3",o="",r="?",n="function",a="undefined",t="object",w="major",d="model",l="name",c="type",p="vendor",m="version",u="architecture",f="console",g="mobile",h="tablet",b="smarttv",v="wearable",x="embedded",k={extend:function(i,e){for(var s in e)-1!=="browser cpu device engine os".indexOf(s)&&e[s].length%2===0&&(i[s]=e[s].concat(i[s]));return i},has:function(i,e){return"string"==typeof i?-1!==e.toLowerCase().indexOf(i.toLowerCase()):void 0},lowerize:function(i){return i.toLowerCase()}},y={rgx:function(){for(var i,s,o,r,w,d,l,c=0,p=arguments;c<p.length&&!d;){var m=p[c],u=p[c+1];if(typeof i===a){i={};for(r in u)w=u[r],typeof w===t?i[w[0]]=e:i[w]=e}for(s=o=0;s<m.length&&!d;)if(d=m[s++].exec(this.getUA()))for(r=0;r<u.length;r++)l=d[++o],w=u[r],typeof w===t&&w.length>0?2==w.length?typeof w[1]==n?i[w[0]]=w[1].call(this,l):i[w[0]]=w[1]:3==w.length?typeof w[1]!==n||w[1].exec&&w[1].test?i[w[0]]=l?l.replace(w[1],w[2]):e:i[w[0]]=l?w[1].call(this,l,w[2]):e:4==w.length&&(i[w[0]]=l?w[3].call(this,l.replace(w[1],w[2])):e):i[w]=l?l:e;c+=2}return i},str:function(i,s){for(var o in s)if(typeof s[o]===t&&s[o].length>0){for(var n=0;n<s[o].length;n++)if(k.has(s[o][n],i))return o===r?e:o}else if(k.has(s[o],i))return o===r?e:o;return i}},A={browser:{oldsafari:{major:{1:["/8","/1","/3"],2:"/4","?":"/"},version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:"NT 6.4",RT:"ARM"}}}},E={browser:[[/(opera\smini)\/((\d+)?[\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/((\d+)?[\w\.-]+)/i,/(opera).+version\/((\d+)?[\w\.]+)/i,/(opera)[\/\s]+((\d+)?[\w\.]+)/i],[l,m,w],[/\s(opr)\/((\d+)?[\w\.]+)/i],[[l,"Opera"],m,w],[/(kindle)\/((\d+)?[\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?((\d+)?[\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?((\d+)?[\w\.]*)/i,/(?:ms|\()(ie)\s((\d+)?[\w\.]+)/i,/(rekonq)((?:\/)[\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron)\/((\d+)?[\w\.-]+)/i],[l,m,w],[/(trident).+rv[:\s]((\d+)?[\w\.]+).+like\sgecko/i],[[l,"IE"],m,w],[/(yabrowser)\/((\d+)?[\w\.]+)/i],[[l,"Yandex"],m,w],[/(comodo_dragon)\/((\d+)?[\w\.]+)/i],[[l,/_/g," "],m,w],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?((\d+)?[\w\.]+)/i,/(uc\s?browser|qqbrowser)[\/\s]?((\d+)?[\w\.]+)/i],[l,m,w],[/(dolfin)\/((\d+)?[\w\.]+)/i],[[l,"Dolphin"],m,w],[/((?:android.+)crmo|crios)\/((\d+)?[\w\.]+)/i],[[l,"Chrome"],m,w],[/version\/((\d+)?[\w\.]+).+?mobile\/\w+\s(safari)/i],[m,w,[l,"Mobile Safari"]],[/version\/((\d+)?[\w\.]+).+?(mobile\s?safari|safari)/i],[m,w,l],[/webkit.+?(mobile\s?safari|safari)((\/[\w\.]+))/i],[l,[w,y.str,A.browser.oldsafari.major],[m,y.str,A.browser.oldsafari.version]],[/(konqueror)\/((\d+)?[\w\.]+)/i,/(webkit|khtml)\/((\d+)?[\w\.]+)/i],[l,m,w],[/(navigator|netscape)\/((\d+)?[\w\.-]+)/i],[[l,"Netscape"],m,w],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?((\d+)?[\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/((\d+)?[\w\.-]+)/i,/(mozilla)\/((\d+)?[\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf)[\/\s]?((\d+)?[\w\.]+)/i,/(links)\s\(((\d+)?[\w\.]+)/i,/(gobrowser)\/?((\d+)?[\w\.]+)*/i,/(ice\s?browser)\/v?((\d+)?[\w\._]+)/i,/(mosaic)[\/\s]((\d+)?[\w\.]+)/i],[l,m,w]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[u,"amd64"]],[/(ia32(?=;))/i],[[u,k.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[u,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[u,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[u,/ower/,"",k.lowerize]],[/(sun4\w)[;\)]/i],[[u,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[u,k.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[d,p,[c,h]],[/applecoremedia\/[\w\.]+ \((ipad)/],[d,[p,"Apple"],[c,h]],[/(apple\s{0,1}tv)/i],[[d,"Apple TV"],[p,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[p,d,[c,h]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[d,[p,"Amazon"],[c,h]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[d,y.str,A.device.amazon.model],[p,"Amazon"],[c,g]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[d,p,[c,g]],[/\((ip[honed|\s\w*]+);/i],[d,[p,"Apple"],[c,g]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[p,d,[c,g]],[/\(bb10;\s(\w+)/i],[d,[p,"BlackBerry"],[c,g]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7)/i],[d,[p,"Asus"],[c,h]],[/(sony)\s(tablet\s[ps])/i],[p,d,[c,h]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[p,d,[c,f]],[/android.+;\s(shield)\sbuild/i],[d,[p,"Nvidia"],[c,f]],[/(playstation\s[3portablevi]+)/i],[d,[p,"Sony"],[c,f]],[/(sprint\s(\w+))/i],[[p,y.str,A.device.sprint.vendor],[d,y.str,A.device.sprint.model],[c,g]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[p,d,[c,h]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[p,[d,/_/g," "],[c,g]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[d,[p,"Microsoft"],[c,f]],[/(kin\.[onetw]{3})/i],[[d,/\./g," "],[p,"Microsoft"],[c,g]],[/\s((milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?))[\w\s]+build\//i,/(mot)[\s-]?(\w+)*/i],[[p,"Motorola"],d,[c,g]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[d,[p,"Motorola"],[c,h]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n8000|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[p,"Samsung"],d,[c,h]],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-n900))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[p,"Samsung"],d,[c,g]],[/(samsung);smarttv/i],[p,d,[c,b]],[/\(dtv[\);].+(aquos)/i],[d,[p,"Sharp"],[c,b]],[/sie-(\w+)*/i],[d,[p,"Siemens"],[c,g]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[p,"Nokia"],d,[c,g]],[/android\s3\.[\s\w-;]{10}(a\d{3})/i],[d,[p,"Acer"],[c,h]],[/android\s3\.[\s\w-;]{10}(lg?)-([06cv9]{3,4})/i],[[p,"LG"],d,[c,h]],[/(lg) netcast\.tv/i],[p,d,[c,b]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i],[d,[p,"LG"],[c,g]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[d,[p,"Lenovo"],[c,h]],[/linux;.+((jolla));/i],[p,d,[c,g]],[/((pebble))app\/[\d\.]+\s/i],[p,d,[c,v]],[/android.+;\s(glass)\s\d/i],[d,[p,"Google"],[c,v]],[/(mobile|tablet);.+rv\:.+gecko\//i],[[c,k.lowerize],p,d]],engine:[[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[l,m],[/rv\:([\w\.]+).*(gecko)/i],[m,l]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[l,m],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[l,[m,y.str,A.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[l,"Windows"],[m,y.str,A.os.windows.version]],[/\((bb)(10);/i],[[l,"BlackBerry"],m],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\os|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[l,m],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[l,"Symbian"],m],[/\((series40);/i],[l],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[l,"Firefox OS"],m],[/(nintendo|playstation)\s([wids3portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[l,m],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[l,"Chromium OS"],m],[/(sunos)\s?([\w\.]+\d)*/i],[[l,"Solaris"],m],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[l,m],[/(ip[honead]+)(?:.*os\s*([\w]+)*\slike\smac|;\sopera)/i],[[l,"iOS"],[m,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[l,"Mac OS"],[m,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[l,m]]},S=function(e,s){if(!(this instanceof S))return new S(e,s).getResult();var r=e||(i&&i.navigator&&i.navigator.userAgent?i.navigator.userAgent:o),n=s?k.extend(E,s):E;this.getBrowser=function(){return y.rgx.apply(this,n.browser)},this.getCPU=function(){return y.rgx.apply(this,n.cpu)},this.getDevice=function(){return y.rgx.apply(this,n.device)},this.getEngine=function(){return y.rgx.apply(this,n.engine)},this.getOS=function(){return y.rgx.apply(this,n.os)},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(i){return r=i,this},this.setUA(r)};if(S.VERSION=s,S.BROWSER={NAME:l,MAJOR:w,VERSION:m},S.CPU={ARCHITECTURE:u},S.DEVICE={MODEL:d,VENDOR:p,TYPE:c,CONSOLE:f,MOBILE:g,SMARTTV:b,TABLET:h,WEARABLE:v,EMBEDDED:x},S.ENGINE={NAME:l,VERSION:m},S.OS={NAME:l,VERSION:m},typeof exports!==a)typeof module!==a&&module.exports&&(exports=module.exports=S),exports.UAParser=S;else{i.UAParser=S,typeof define===n&&define.amd&&define(function(){return S});var N=i.jQuery||i.Zepto;if(typeof N!==a){var T=new S;N.ua=T.getResult(),N.ua.get=function(){return T.getUA()},N.ua.set=function(i){T.setUA(i);var e=T.getResult();for(var s in e)N.ua[s]=e[s]}}}}(this);


},{}],265:[function(require,module,exports){
  (function(){var n=this,t=n._,r={},e=Array.prototype,u=Object.prototype,i=Function.prototype,a=e.push,o=e.slice,c=e.concat,l=u.toString,f=u.hasOwnProperty,s=e.forEach,p=e.map,h=e.reduce,v=e.reduceRight,g=e.filter,d=e.every,m=e.some,y=e.indexOf,b=e.lastIndexOf,x=Array.isArray,w=Object.keys,_=i.bind,j=function(n){return n instanceof j?n:this instanceof j?void(this._wrapped=n):new j(n)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=j),exports._=j):n._=j,j.VERSION="1.6.0";var A=j.each=j.forEach=function(n,t,e){if(null==n)return n;if(s&&n.forEach===s)n.forEach(t,e);else if(n.length===+n.length){for(var u=0,i=n.length;i>u;u++)if(t.call(e,n[u],u,n)===r)return}else for(var a=j.keys(n),u=0,i=a.length;i>u;u++)if(t.call(e,n[a[u]],a[u],n)===r)return;return n};j.map=j.collect=function(n,t,r){var e=[];return null==n?e:p&&n.map===p?n.map(t,r):(A(n,function(n,u,i){e.push(t.call(r,n,u,i))}),e)};var O="Reduce of empty array with no initial value";j.reduce=j.foldl=j.inject=function(n,t,r,e){var u=arguments.length>2;if(null==n&&(n=[]),h&&n.reduce===h)return e&&(t=j.bind(t,e)),u?n.reduce(t,r):n.reduce(t);if(A(n,function(n,i,a){u?r=t.call(e,r,n,i,a):(r=n,u=!0)}),!u)throw new TypeError(O);return r},j.reduceRight=j.foldr=function(n,t,r,e){var u=arguments.length>2;if(null==n&&(n=[]),v&&n.reduceRight===v)return e&&(t=j.bind(t,e)),u?n.reduceRight(t,r):n.reduceRight(t);var i=n.length;if(i!==+i){var a=j.keys(n);i=a.length}if(A(n,function(o,c,l){c=a?a[--i]:--i,u?r=t.call(e,r,n[c],c,l):(r=n[c],u=!0)}),!u)throw new TypeError(O);return r},j.find=j.detect=function(n,t,r){var e;return k(n,function(n,u,i){return t.call(r,n,u,i)?(e=n,!0):void 0}),e},j.filter=j.select=function(n,t,r){var e=[];return null==n?e:g&&n.filter===g?n.filter(t,r):(A(n,function(n,u,i){t.call(r,n,u,i)&&e.push(n)}),e)},j.reject=function(n,t,r){return j.filter(n,function(n,e,u){return!t.call(r,n,e,u)},r)},j.every=j.all=function(n,t,e){t||(t=j.identity);var u=!0;return null==n?u:d&&n.every===d?n.every(t,e):(A(n,function(n,i,a){return(u=u&&t.call(e,n,i,a))?void 0:r}),!!u)};var k=j.some=j.any=function(n,t,e){t||(t=j.identity);var u=!1;return null==n?u:m&&n.some===m?n.some(t,e):(A(n,function(n,i,a){return u||(u=t.call(e,n,i,a))?r:void 0}),!!u)};j.contains=j.include=function(n,t){return null==n?!1:y&&n.indexOf===y?-1!=n.indexOf(t):k(n,function(n){return n===t})},j.invoke=function(n,t){var r=o.call(arguments,2),e=j.isFunction(t);return j.map(n,function(n){return(e?t:n[t]).apply(n,r)})},j.pluck=function(n,t){return j.map(n,j.property(t))},j.where=function(n,t){return j.filter(n,j.matches(t))},j.findWhere=function(n,t){return j.find(n,j.matches(t))},j.max=function(n,t,r){if(!t&&j.isArray(n)&&n[0]===+n[0]&&n.length<65535)return Math.max.apply(Math,n);var e=-(1/0),u=-(1/0);return A(n,function(n,i,a){var o=t?t.call(r,n,i,a):n;o>u&&(e=n,u=o)}),e},j.min=function(n,t,r){if(!t&&j.isArray(n)&&n[0]===+n[0]&&n.length<65535)return Math.min.apply(Math,n);var e=1/0,u=1/0;return A(n,function(n,i,a){var o=t?t.call(r,n,i,a):n;u>o&&(e=n,u=o)}),e},j.shuffle=function(n){var t,r=0,e=[];return A(n,function(n){t=j.random(r++),e[r-1]=e[t],e[t]=n}),e},j.sample=function(n,t,r){return null==t||r?(n.length!==+n.length&&(n=j.values(n)),n[j.random(n.length-1)]):j.shuffle(n).slice(0,Math.max(0,t))};var E=function(n){return null==n?j.identity:j.isFunction(n)?n:j.property(n)};j.sortBy=function(n,t,r){return t=E(t),j.pluck(j.map(n,function(n,e,u){return{value:n,index:e,criteria:t.call(r,n,e,u)}}).sort(function(n,t){var r=n.criteria,e=t.criteria;if(r!==e){if(r>e||void 0===r)return 1;if(e>r||void 0===e)return-1}return n.index-t.index}),"value")};var F=function(n){return function(t,r,e){var u={};return r=E(r),A(t,function(i,a){var o=r.call(e,i,a,t);n(u,o,i)}),u}};j.groupBy=F(function(n,t,r){j.has(n,t)?n[t].push(r):n[t]=[r]}),j.indexBy=F(function(n,t,r){n[t]=r}),j.countBy=F(function(n,t){j.has(n,t)?n[t]++:n[t]=1}),j.sortedIndex=function(n,t,r,e){r=E(r);for(var u=r.call(e,t),i=0,a=n.length;a>i;){var o=i+a>>>1;r.call(e,n[o])<u?i=o+1:a=o}return i},j.toArray=function(n){return n?j.isArray(n)?o.call(n):n.length===+n.length?j.map(n,j.identity):j.values(n):[]},j.size=function(n){return null==n?0:n.length===+n.length?n.length:j.keys(n).length},j.first=j.head=j.take=function(n,t,r){return null==n?void 0:null==t||r?n[0]:0>t?[]:o.call(n,0,t)},j.initial=function(n,t,r){return o.call(n,0,n.length-(null==t||r?1:t))},j.last=function(n,t,r){return null==n?void 0:null==t||r?n[n.length-1]:o.call(n,Math.max(n.length-t,0))},j.rest=j.tail=j.drop=function(n,t,r){return o.call(n,null==t||r?1:t)},j.compact=function(n){return j.filter(n,j.identity)};var M=function(n,t,r){return t&&j.every(n,j.isArray)?c.apply(r,n):(A(n,function(n){j.isArray(n)||j.isArguments(n)?t?a.apply(r,n):M(n,t,r):r.push(n)}),r)};j.flatten=function(n,t){return M(n,t,[])},j.without=function(n){return j.difference(n,o.call(arguments,1))},j.partition=function(n,t){var r=[],e=[];return A(n,function(n){(t(n)?r:e).push(n)}),[r,e]},j.uniq=j.unique=function(n,t,r,e){j.isFunction(t)&&(e=r,r=t,t=!1);var u=r?j.map(n,r,e):n,i=[],a=[];return A(u,function(r,e){(t?e&&a[a.length-1]===r:j.contains(a,r))||(a.push(r),i.push(n[e]))}),i},j.union=function(){return j.uniq(j.flatten(arguments,!0))},j.intersection=function(n){var t=o.call(arguments,1);return j.filter(j.uniq(n),function(n){return j.every(t,function(t){return j.contains(t,n)})})},j.difference=function(n){var t=c.apply(e,o.call(arguments,1));return j.filter(n,function(n){return!j.contains(t,n)})},j.zip=function(){for(var n=j.max(j.pluck(arguments,"length").concat(0)),t=new Array(n),r=0;n>r;r++)t[r]=j.pluck(arguments,""+r);return t},j.object=function(n,t){if(null==n)return{};for(var r={},e=0,u=n.length;u>e;e++)t?r[n[e]]=t[e]:r[n[e][0]]=n[e][1];return r},j.indexOf=function(n,t,r){if(null==n)return-1;var e=0,u=n.length;if(r){if("number"!=typeof r)return e=j.sortedIndex(n,t),n[e]===t?e:-1;e=0>r?Math.max(0,u+r):r}if(y&&n.indexOf===y)return n.indexOf(t,r);for(;u>e;e++)if(n[e]===t)return e;return-1},j.lastIndexOf=function(n,t,r){if(null==n)return-1;var e=null!=r;if(b&&n.lastIndexOf===b)return e?n.lastIndexOf(t,r):n.lastIndexOf(t);for(var u=e?r:n.length;u--;)if(n[u]===t)return u;return-1},j.range=function(n,t,r){arguments.length<=1&&(t=n||0,n=0),r=arguments[2]||1;for(var e=Math.max(Math.ceil((t-n)/r),0),u=0,i=new Array(e);e>u;)i[u++]=n,n+=r;return i};var R=function(){};j.bind=function(n,t){var r,e;if(_&&n.bind===_)return _.apply(n,o.call(arguments,1));if(!j.isFunction(n))throw new TypeError;return r=o.call(arguments,2),e=function(){if(!(this instanceof e))return n.apply(t,r.concat(o.call(arguments)));R.prototype=n.prototype;var u=new R;R.prototype=null;var i=n.apply(u,r.concat(o.call(arguments)));return Object(i)===i?i:u}},j.partial=function(n){var t=o.call(arguments,1);return function(){for(var r=0,e=t.slice(),u=0,i=e.length;i>u;u++)e[u]===j&&(e[u]=arguments[r++]);for(;r<arguments.length;)e.push(arguments[r++]);return n.apply(this,e)}},j.bindAll=function(n){var t=o.call(arguments,1);if(0===t.length)throw new Error("bindAll must be passed function names");return A(t,function(t){n[t]=j.bind(n[t],n)}),n},j.memoize=function(n,t){var r={};return t||(t=j.identity),function(){var e=t.apply(this,arguments);return j.has(r,e)?r[e]:r[e]=n.apply(this,arguments)}},j.delay=function(n,t){var r=o.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},t)},j.defer=function(n){return j.delay.apply(j,[n,1].concat(o.call(arguments,1)))},j.throttle=function(n,t,r){var e,u,i,a=null,o=0;r||(r={});var c=function(){o=r.leading===!1?0:j.now(),a=null,i=n.apply(e,u),e=u=null};return function(){var l=j.now();o||r.leading!==!1||(o=l);var f=t-(l-o);return e=this,u=arguments,0>=f?(clearTimeout(a),a=null,o=l,i=n.apply(e,u),e=u=null):a||r.trailing===!1||(a=setTimeout(c,f)),i}},j.debounce=function(n,t,r){var e,u,i,a,o,c=function(){var l=j.now()-a;t>l?e=setTimeout(c,t-l):(e=null,r||(o=n.apply(i,u),i=u=null))};return function(){i=this,u=arguments,a=j.now();var l=r&&!e;return e||(e=setTimeout(c,t)),l&&(o=n.apply(i,u),i=u=null),o}},j.once=function(n){var t,r=!1;return function(){return r?t:(r=!0,t=n.apply(this,arguments),n=null,t)}},j.wrap=function(n,t){return j.partial(t,n)},j.compose=function(){var n=arguments;return function(){for(var t=arguments,r=n.length-1;r>=0;r--)t=[n[r].apply(this,t)];return t[0]}},j.after=function(n,t){return function(){return--n<1?t.apply(this,arguments):void 0}},j.keys=function(n){if(!j.isObject(n))return[];if(w)return w(n);var t=[];for(var r in n)j.has(n,r)&&t.push(r);return t},j.values=function(n){for(var t=j.keys(n),r=t.length,e=new Array(r),u=0;r>u;u++)e[u]=n[t[u]];return e},j.pairs=function(n){for(var t=j.keys(n),r=t.length,e=new Array(r),u=0;r>u;u++)e[u]=[t[u],n[t[u]]];return e},j.invert=function(n){for(var t={},r=j.keys(n),e=0,u=r.length;u>e;e++)t[n[r[e]]]=r[e];return t},j.functions=j.methods=function(n){var t=[];for(var r in n)j.isFunction(n[r])&&t.push(r);return t.sort()},j.extend=function(n){return A(o.call(arguments,1),function(t){if(t)for(var r in t)n[r]=t[r]}),n},j.pick=function(n){var t={},r=c.apply(e,o.call(arguments,1));return A(r,function(r){r in n&&(t[r]=n[r])}),t},j.omit=function(n){var t={},r=c.apply(e,o.call(arguments,1));for(var u in n)j.contains(r,u)||(t[u]=n[u]);return t},j.defaults=function(n){return A(o.call(arguments,1),function(t){if(t)for(var r in t)void 0===n[r]&&(n[r]=t[r])}),n},j.clone=function(n){return j.isObject(n)?j.isArray(n)?n.slice():j.extend({},n):n},j.tap=function(n,t){return t(n),n};var S=function(n,t,r,e){if(n===t)return 0!==n||1/n==1/t;if(null==n||null==t)return n===t;n instanceof j&&(n=n._wrapped),t instanceof j&&(t=t._wrapped);var u=l.call(n);if(u!=l.call(t))return!1;switch(u){case"[object String]":return n==String(t);case"[object Number]":return n!=+n?t!=+t:0==n?1/n==1/t:n==+t;case"[object Date]":case"[object Boolean]":return+n==+t;case"[object RegExp]":return n.source==t.source&&n.global==t.global&&n.multiline==t.multiline&&n.ignoreCase==t.ignoreCase}if("object"!=typeof n||"object"!=typeof t)return!1;for(var i=r.length;i--;)if(r[i]==n)return e[i]==t;var a=n.constructor,o=t.constructor;if(a!==o&&!(j.isFunction(a)&&a instanceof a&&j.isFunction(o)&&o instanceof o)&&"constructor"in n&&"constructor"in t)return!1;r.push(n),e.push(t);var c=0,f=!0;if("[object Array]"==u){if(c=n.length,f=c==t.length)for(;c--&&(f=S(n[c],t[c],r,e)););}else{for(var s in n)if(j.has(n,s)&&(c++,!(f=j.has(t,s)&&S(n[s],t[s],r,e))))break;if(f){for(s in t)if(j.has(t,s)&&!c--)break;f=!c}}return r.pop(),e.pop(),f};j.isEqual=function(n,t){return S(n,t,[],[])},j.isEmpty=function(n){if(null==n)return!0;if(j.isArray(n)||j.isString(n))return 0===n.length;for(var t in n)if(j.has(n,t))return!1;return!0},j.isElement=function(n){return!(!n||1!==n.nodeType)},j.isArray=x||function(n){return"[object Array]"==l.call(n)},j.isObject=function(n){return n===Object(n)},A(["Arguments","Function","String","Number","Date","RegExp"],function(n){j["is"+n]=function(t){return l.call(t)=="[object "+n+"]"}}),j.isArguments(arguments)||(j.isArguments=function(n){return!(!n||!j.has(n,"callee"))}),"function"!=typeof/./&&(j.isFunction=function(n){return"function"==typeof n}),j.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},j.isNaN=function(n){return j.isNumber(n)&&n!=+n},j.isBoolean=function(n){return n===!0||n===!1||"[object Boolean]"==l.call(n)},j.isNull=function(n){return null===n},j.isUndefined=function(n){return void 0===n},j.has=function(n,t){return f.call(n,t)},j.noConflict=function(){return n._=t,this},j.identity=function(n){return n},j.constant=function(n){return function(){return n}},j.property=function(n){return function(t){return t[n]}},j.matches=function(n){return function(t){if(t===n)return!0;for(var r in n)if(n[r]!==t[r])return!1;return!0}},j.times=function(n,t,r){for(var e=Array(Math.max(0,n)),u=0;n>u;u++)e[u]=t.call(r,u);return e},j.random=function(n,t){return null==t&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))},j.now=Date.now||function(){return(new Date).getTime()};var T={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};T.unescape=j.invert(T.escape);var I={escape:new RegExp("["+j.keys(T.escape).join("")+"]","g"),unescape:new RegExp("("+j.keys(T.unescape).join("|")+")","g")};j.each(["escape","unescape"],function(n){j[n]=function(t){return null==t?"":(""+t).replace(I[n],function(t){return T[n][t]})}}),j.result=function(n,t){if(null==n)return void 0;var r=n[t];return j.isFunction(r)?r.call(n):r},j.mixin=function(n){A(j.functions(n),function(t){var r=j[t]=n[t];j.prototype[t]=function(){var n=[this._wrapped];return a.apply(n,arguments),z.call(this,r.apply(j,n))}})};var N=0;j.uniqueId=function(n){var t=++N+"";return n?n+t:t},j.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var q=/(.)^/,B={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},D=/\\|'|\r|\n|\t|\u2028|\u2029/g;j.template=function(n,t,r){var e;r=j.defaults({},r,j.templateSettings);var u=new RegExp([(r.escape||q).source,(r.interpolate||q).source,(r.evaluate||q).source].join("|")+"|$","g"),i=0,a="__p+='";n.replace(u,function(t,r,e,u,o){return a+=n.slice(i,o).replace(D,function(n){return"\\"+B[n]}),r&&(a+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'"),e&&(a+="'+\n((__t=("+e+"))==null?'':__t)+\n'"),u&&(a+="';\n"+u+"\n__p+='"),i=o+t.length,t}),a+="';\n",r.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{e=new Function(r.variable||"obj","_",a)}catch(o){throw o.source=a,o}if(t)return e(t,j);var c=function(n){return e.call(this,n,j)};return c.source="function("+(r.variable||"obj")+"){\n"+a+"}",c},j.chain=function(n){return j(n).chain()};var z=function(n){return this._chain?j(n).chain():n};j.mixin(j),A(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=e[n];j.prototype[n]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!=n&&"splice"!=n||0!==r.length||delete r[0],z.call(this,r)}}),A(["concat","join","slice"],function(n){var t=e[n];j.prototype[n]=function(){return z.call(this,t.apply(this._wrapped,arguments))}}),j.extend(j.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return j})}).call(this);


},{}],266:[function(require,module,exports){
  function Url(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function urlParse(t,s,e){if(t&&isObject(t)&&t instanceof Url)return t;var h=new Url;return h.parse(t,s,e),h}function urlFormat(t){return isString(t)&&(t=urlParse(t)),t instanceof Url?t.format():Url.prototype.format.call(t)}function urlResolve(t,s){return urlParse(t,!1,!0).resolve(s)}function urlResolveObject(t,s){return t?urlParse(t,!1,!0).resolveObject(s):s}function isString(t){return"string"==typeof t}function isObject(t){return"object"==typeof t&&null!==t}function isNull(t){return null===t}function isNullOrUndefined(t){return null==t}var punycode=require("punycode");exports.parse=urlParse,exports.resolve=urlResolve,exports.resolveObject=urlResolveObject,exports.format=urlFormat,exports.Url=Url;var protocolPattern=/^([a-z0-9.+-]+:)/i,portPattern=/:[0-9]*$/,delims=["<",">",'"',"`"," ","\r","\n","	"],unwise=["{","}","|","\\","^","`"].concat(delims),autoEscape=["'"].concat(unwise),nonHostChars=["%","/","?",";","#"].concat(autoEscape),hostEndingChars=["/","?","#"],hostnameMaxLen=255,hostnamePartPattern=/^[a-z0-9A-Z_-]{0,63}$/,hostnamePartStart=/^([a-z0-9A-Z_-]{0,63})(.*)$/,unsafeProtocol={javascript:!0,"javascript:":!0},hostlessProtocol={javascript:!0,"javascript:":!0},slashedProtocol={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},querystring=require("querystring");Url.prototype.parse=function(t,s,e){if(!isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var h=t;h=h.trim();var r=protocolPattern.exec(h);if(r){r=r[0];var o=r.toLowerCase();this.protocol=o,h=h.substr(r.length)}if(e||r||h.match(/^\/\/[^@\/]+@[^@\/]+/)){var a="//"===h.substr(0,2);!a||r&&hostlessProtocol[r]||(h=h.substr(2),this.slashes=!0)}if(!hostlessProtocol[r]&&(a||r&&!slashedProtocol[r])){for(var n=-1,i=0;i<hostEndingChars.length;i++){var l=h.indexOf(hostEndingChars[i]);-1!==l&&(-1===n||n>l)&&(n=l)}var c,u;u=-1===n?h.lastIndexOf("@"):h.lastIndexOf("@",n),-1!==u&&(c=h.slice(0,u),h=h.slice(u+1),this.auth=decodeURIComponent(c)),n=-1;for(var i=0;i<nonHostChars.length;i++){var l=h.indexOf(nonHostChars[i]);-1!==l&&(-1===n||n>l)&&(n=l)}-1===n&&(n=h.length),this.host=h.slice(0,n),h=h.slice(n),this.parseHost(),this.hostname=this.hostname||"";var p="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!p)for(var f=this.hostname.split(/\./),i=0,m=f.length;m>i;i++){var v=f[i];if(v&&!v.match(hostnamePartPattern)){for(var g="",y=0,d=v.length;d>y;y++)g+=v.charCodeAt(y)>127?"x":v[y];if(!g.match(hostnamePartPattern)){var P=f.slice(0,i),b=f.slice(i+1),j=v.match(hostnamePartStart);j&&(P.push(j[1]),b.unshift(j[2])),b.length&&(h="/"+b.join(".")+h),this.hostname=P.join(".");break}}}if(this.hostname.length>hostnameMaxLen?this.hostname="":this.hostname=this.hostname.toLowerCase(),!p){for(var O=this.hostname.split("."),q=[],i=0;i<O.length;++i){var x=O[i];q.push(x.match(/[^A-Za-z0-9_-]/)?"xn--"+punycode.encode(x):x)}this.hostname=q.join(".")}var U=this.port?":"+this.port:"",C=this.hostname||"";this.host=C+U,this.href+=this.host,p&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==h[0]&&(h="/"+h))}if(!unsafeProtocol[o])for(var i=0,m=autoEscape.length;m>i;i++){var A=autoEscape[i],E=encodeURIComponent(A);E===A&&(E=escape(A)),h=h.split(A).join(E)}var w=h.indexOf("#");-1!==w&&(this.hash=h.substr(w),h=h.slice(0,w));var R=h.indexOf("?");if(-1!==R?(this.search=h.substr(R),this.query=h.substr(R+1),s&&(this.query=querystring.parse(this.query)),h=h.slice(0,R)):s&&(this.search="",this.query={}),h&&(this.pathname=h),slashedProtocol[o]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var U=this.pathname||"",x=this.search||"";this.path=U+x}return this.href=this.format(),this},Url.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var s=this.protocol||"",e=this.pathname||"",h=this.hash||"",r=!1,o="";this.host?r=t+this.host:this.hostname&&(r=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(r+=":"+this.port)),this.query&&isObject(this.query)&&Object.keys(this.query).length&&(o=querystring.stringify(this.query));var a=this.search||o&&"?"+o||"";return s&&":"!==s.substr(-1)&&(s+=":"),this.slashes||(!s||slashedProtocol[s])&&r!==!1?(r="//"+(r||""),e&&"/"!==e.charAt(0)&&(e="/"+e)):r||(r=""),h&&"#"!==h.charAt(0)&&(h="#"+h),a&&"?"!==a.charAt(0)&&(a="?"+a),e=e.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),a=a.replace("#","%23"),s+r+e+a+h},Url.prototype.resolve=function(t){return this.resolveObject(urlParse(t,!1,!0)).format()},Url.prototype.resolveObject=function(t){if(isString(t)){var s=new Url;s.parse(t,!1,!0),t=s}var e=new Url;if(Object.keys(this).forEach(function(t){e[t]=this[t]},this),e.hash=t.hash,""===t.href)return e.href=e.format(),e;if(t.slashes&&!t.protocol)return Object.keys(t).forEach(function(s){"protocol"!==s&&(e[s]=t[s])}),slashedProtocol[e.protocol]&&e.hostname&&!e.pathname&&(e.path=e.pathname="/"),e.href=e.format(),e;if(t.protocol&&t.protocol!==e.protocol){if(!slashedProtocol[t.protocol])return Object.keys(t).forEach(function(s){e[s]=t[s]}),e.href=e.format(),e;if(e.protocol=t.protocol,t.host||hostlessProtocol[t.protocol])e.pathname=t.pathname;else{for(var h=(t.pathname||"").split("/");h.length&&!(t.host=h.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==h[0]&&h.unshift(""),h.length<2&&h.unshift(""),e.pathname=h.join("/")}if(e.search=t.search,e.query=t.query,e.host=t.host||"",e.auth=t.auth,e.hostname=t.hostname||t.host,e.port=t.port,e.pathname||e.search){var r=e.pathname||"",o=e.search||"";e.path=r+o}return e.slashes=e.slashes||t.slashes,e.href=e.format(),e}var a=e.pathname&&"/"===e.pathname.charAt(0),n=t.host||t.pathname&&"/"===t.pathname.charAt(0),i=n||a||e.host&&t.pathname,l=i,c=e.pathname&&e.pathname.split("/")||[],h=t.pathname&&t.pathname.split("/")||[],u=e.protocol&&!slashedProtocol[e.protocol];if(u&&(e.hostname="",e.port=null,e.host&&(""===c[0]?c[0]=e.host:c.unshift(e.host)),e.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===h[0]?h[0]=t.host:h.unshift(t.host)),t.host=null),i=i&&(""===h[0]||""===c[0])),n)e.host=t.host||""===t.host?t.host:e.host,e.hostname=t.hostname||""===t.hostname?t.hostname:e.hostname,e.search=t.search,e.query=t.query,c=h;else if(h.length)c||(c=[]),c.pop(),c=c.concat(h),e.search=t.search,e.query=t.query;else if(!isNullOrUndefined(t.search)){if(u){e.hostname=e.host=c.shift();var p=e.host&&e.host.indexOf("@")>0?e.host.split("@"):!1;p&&(e.auth=p.shift(),e.host=e.hostname=p.shift())}return e.search=t.search,e.query=t.query,isNull(e.pathname)&&isNull(e.search)||(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.href=e.format(),e}if(!c.length)return e.pathname=null,e.search?e.path="/"+e.search:e.path=null,e.href=e.format(),e;for(var f=c.slice(-1)[0],m=(e.host||t.host)&&("."===f||".."===f)||""===f,v=0,g=c.length;g>=0;g--)f=c[g],"."==f?c.splice(g,1):".."===f?(c.splice(g,1),v++):v&&(c.splice(g,1),v--);if(!i&&!l)for(;v--;v)c.unshift("..");!i||""===c[0]||c[0]&&"/"===c[0].charAt(0)||c.unshift(""),m&&"/"!==c.join("/").substr(-1)&&c.push("");var y=""===c[0]||c[0]&&"/"===c[0].charAt(0);if(u){e.hostname=e.host=y?"":c.length?c.shift():"";var p=e.host&&e.host.indexOf("@")>0?e.host.split("@"):!1;p&&(e.auth=p.shift(),e.host=e.hostname=p.shift())}return i=i||e.host&&c.length,i&&!y&&c.unshift(""),c.length?e.pathname=c.join("/"):(e.pathname=null,e.path=null),isNull(e.pathname)&&isNull(e.search)||(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.auth=t.auth||e.auth,e.slashes=e.slashes||t.slashes,e.href=e.format(),e},Url.prototype.parseHost=function(){var t=this.host,s=portPattern.exec(t);s&&(s=s[0],":"!==s&&(this.port=s.substr(1)),t=t.substr(0,t.length-s.length)),t&&(this.hostname=t)};


},{"punycode":96,"querystring":99}],267:[function(require,module,exports){
  var extractinit=function(t){for(var e=new DataView(t),r=0;r<t.byteLength;){var i=e.getUint32(r+4,!1);if(1936286840==i||1836019558==i)break;r+=e.getUint32(r,!1)}return new Uint8Array(t.slice(0,r))},parsesidx=function(t,e){for(var r=new DataView(t),i=0;1936286840!=r.getUint32(i+4,!1);)if(i+=r.getUint32(i,!1),i>=t.byteLength)throw"Could not find sidx";var n=r.getUint32(i,!1)+i;if(n>t.byteLength)throw"sidx terminates after array buffer";var a=r.getUint8(i+8);i+=12;var f=r.getUint32(i+4,!1);i+=8;var g,o;0==a?(g=r.getUint32(i,!1),o=r.getUint32(i+4,!1),i+=8):(g=(r.getUint32(i,!1)<<32)+r.getUint32(i+4,!1),o=(r.getUint32(i+8,!1)<<32)+r.getUint32(i+12,!1),i+=16),o+=n+(e||0);var U=r.getUint16(i+2,!1);i+=4;for(var s=o,d=g,v=[],h=0;U>h;h++){var u=r.getUint32(i,!1),w=2147483648&u;if(w)throw"Unhandled indirect reference";u=2147483647&u;var c=r.getUint32(i+4,!1);i+=12,v.push({size:u,offset:s,duration:c/f,time:d/f}),s+=u,d+=c}if(i!=n)throw"Error: final pos "+i+" differs from SIDX end "+n;return v};module.exports={parseSIDX:parsesidx,extractInit:extractinit};


},{}]},{},[1])
(function(videojs) {

  videojs.Streamroot = videojs.MediaTechController.extend({

    /** @constructor */
    init: function(player, options, ready) {

      // ///////////////////////////////////////
      // RODI : CopiÃ© depuis la tech HTML5

      videojs.MediaTechController.call(this, player, options, ready);

      // In iOS, if you move a video element in the DOM, it breaks video playback.
      this.features['movingMediaElementInDOM'] = !videojs.IS_IOS;

      // HTML video is able to automatically resize when going to fullscreen
      this.features['fullscreenResize'] = true;

      var source = options['source'];


      // If the element source is already set, we may have missed the loadstart event, and want to trigger it.
      // We don't want to set the source again and interrupt playback.
      if (source && this.el_.currentSrc === source.src && this.el_.networkState > 0) {
        player.trigger('loadstart');

        // Otherwise set the source if one was provided.
      } else if (source) {
        this.el_.src = source.src;
      }

      // ///////////////////////////////////////// ///////////////////////////////////////

      this.player_ = player;
      this.options_ = options;

      console.log("Streamroot MPEG-DASH Tech for VideoJS!");

      this.event_handlers = {
        onMetaData: videojs.Streamroot.onMetaData.bind(this),
        onBuffering: videojs.Streamroot.onBuffering.bind(this),
        onPlaying: videojs.Streamroot.onPlaying.bind(this),
        onFinish: videojs.Streamroot.onFinish.bind(this),
        onSpaceBar: videojs.Streamroot.onSpaceBar.bind(this),
        onKeyForward: videojs.Streamroot.onKeyForward.bind(this),
        onKeyRewind: videojs.Streamroot.onKeyRewind.bind(this)
      };

      /*require.config({
       baseUrl: this.player_.options_.DASHR_API
       })
       require(['api'], videojs.Streamroot.onReady.bind(this));*/

      // Maniere assez sale de mettre l'autoplay
      this.player_.ready(videojs.Streamroot.CheckAutoplay.bind(this));
      this.setupTriggers();


      // got from old onREady function
      var api = window.Streamroot.streamrootAPI;
      console.log('MPEG-DASH Module Loading');
      this.aDash = new api(this.el_, this.options_.source.src, this.event_handlers, this.player_.options_.sr_options);

      //this.player_.triggerReady();
      // histoire de setTimeout pas claire ! Hack dangereux...
      setTimeout(this.triggerReady.bind(this), 100);
    }
  });

  videojs.Streamroot.prototype.dispose = function() {
    videojs.MediaTechController.prototype.dispose.call(this);
  };

  videojs.Streamroot.prototype.setupTriggers = function() {
    for (var i = videojs.Streamroot.Events.length - 1; i >= 0; i--) {
      videojs.on(this.el_, videojs.Streamroot.Events[i], videojs.bind(this.player_, this.eventHandler));
    }
  };

  videojs.Streamroot.prototype.eventHandler = function(e) {
    this.trigger(e);
    e.stopPropagation();
  };

  videojs.Streamroot.prototype.createEl = function() {
    var player = this.player_,
    // If possible, reuse original tag for HTML5 playback technology element
      el = player.tag,
      newEl,
      clone;

    // Check if this browser supports moving the element into the box.
    // On the iPhone video will break if you move the element,
    // So we have to create a brand new element.
    if (!el || this.features['movingMediaElementInDOM'] === false) {
      // If the original tag is still there, clone and remove it.
      if (el) {
        clone = el.cloneNode(false);
        videojs.Streamroot.disposeMediaElement(el);
        el = clone;
        player.tag = null;
      } else {
        el = videojs.createEl('video', {
          id: player.id() + '_dashr_api',
          className: 'vjs-tech'
        });
      }
      // associate the player with the new tag
      el['player'] = player;
      videojs.insertFirst(el, player.el());
    }

    // Update specific tag settings, in case they were overridden
    var attrs = ['autoplay', 'preload', 'loop', 'muted'];
    for (var i = attrs.length - 1; i >= 0; i--) {
      var attr = attrs[i];
      if (player.options_[attr] !== null) {
        el[attr] = player.options_[attr];
      }
    }
    return el;
  };

  videojs.Streamroot.prototype.play = function() {
    this.aDash.play(); //SR: not sure if useful to use aDash here
    this.player_.trigger('play');
  };
  videojs.Streamroot.prototype.pause = function() {
    if (!this.el_.seeking) {
      this.aDash.pause(); //SR: not sure if useful to use aDash here
      this.player_.trigger('pause');
    }
  };
  videojs.Streamroot.prototype.paused = function() {
    return this.el_.paused;
  }; //ne pas pauser si on est en train de seeker
  videojs.Streamroot.prototype.currentTime = function() {
    return this.el_.currentTime;
  };
  videojs.Streamroot.prototype.setCurrentTime = function(seconds) {
    this.el_.currentTime = seconds;
  };

  videojs.Streamroot.prototype.duration = function() {
    return this.el_.duration || 0;
  };
  videojs.Streamroot.prototype.buffered = function() {
    var r = this.el_.buffered;
    //video-js doesn't handle buffer ranges with multiranges
    var max_time = this.getMaxTime(r);
    return videojs.createTimeRange(0, max_time);
  };

  videojs.Streamroot.prototype.getMaxTime = function(buf) {
    for (var i = 0; i < buf.length; i++) {
      if (buf.start(i) <= this.currentTime() && this.currentTime() <= buf.end(i)) {
        return buf.end(i);
      }
    }
    return this.currentTime();
  };

  videojs.Streamroot.prototype.volume = function() {
    return this.el_.volume;
  };
  videojs.Streamroot.prototype.setVolume = function(percentAsDecimal) {
    this.el_.volume = percentAsDecimal;
  };
  videojs.Streamroot.prototype.muted = function() {
    return this.el_.muted;
  };
  videojs.Streamroot.prototype.setMuted = function(muted) {
    this.el_.muted = muted;
  };

  videojs.Streamroot.prototype.width = function() {
    return this.el_.offsetWidth;
  };
  videojs.Streamroot.prototype.height = function() {
    return this.el_.offsetHeight;
  };

  videojs.Streamroot.prototype.src = function(src) {
    this.el_.src = src;
  };
  videojs.Streamroot.prototype.load = function() {
    this.el_.load();
  };
  videojs.Streamroot.prototype.currentSrc = function() {
    return this.el_.currentSrc;
  };

  videojs.Streamroot.prototype.preload = function() {
    return this.el_.preload;
  };
  videojs.Streamroot.prototype.setPreload = function(val) {
    this.el_.preload = val;
  };
  videojs.Streamroot.prototype.autoplay = function() {
    return this.el_.autoplay;
  };
  videojs.Streamroot.prototype.setAutoplay = function(val) {
    this.el_.autoplay = val;
  };
  videojs.Streamroot.prototype.loop = function() {
    return this.el_.loop;
  };
  videojs.Streamroot.prototype.setLoop = function(val) {
    this.el_.loop = val;
  };

  videojs.Streamroot.prototype.error = function() {
    return this.el_.error;
  };
  // networkState= function(){ return this.el.networkState; },
  // readyState= function(){ return this.el.readyState; },
  videojs.Streamroot.prototype.seeking = function() {
    return this.el_.seeking;
  };
  // initialTime= function(){ return this.el.initialTime; },
  // startOffsetTime= function(){ return this.el.startOffsetTime; },
  // played= function(){ return this.el.played; },
  // seekable= function(){ return this.el.seekable; },
  videojs.Streamroot.prototype.ended = function() {
    return this.el_.ended;
  };
  // videoTracks= function(){ return this.el.videoTracks; },
  // audioTracks= function(){ return this.el.audioTracks; },
  // videoWidth= function(){ return this.el.videoWidth; },
  // videoHeight= function(){ return this.el.videoHeight; },
  // textTracks= function(){ return this.el.textTracks; },
  // defaultPlaybackRate= function(){ return this.el.defaultPlaybackRate; },
  // playbackRate= function(){ return this.el.playbackRate; },
  // mediaGroup= function(){ return this.el.mediaGroup; },
  // controller= function(){ return this.el.controller; },
  videojs.Streamroot.prototype.controls = function() {
    return this.player_.options_.controls;
  };
  videojs.Streamroot.prototype.defaultMuted = function() {
    return this.el_.defaultMuted;
  };
  videojs.Streamroot.prototype.supportsFullScreen = function() {
    if (typeof this.el_.webkitEnterFullScreen == 'function') {

      // Seems to be broken in Chromium/Chrome && Safari in Leopard
      if (/Android/.test(videojs.USER_AGENT) || !/Chrome|Mac OS X 10.5/.test(videojs.USER_AGENT)) {
        return true;
      }
    }
    return false;
  };

  videojs.Streamroot.prototype.enterFullScreen = function() {
    var video = this.el_;
    if (video.paused && video.networkState <= video.HAVE_METADATA) {
      // attempt to prime the video element for programmatic access
      // this isn't necessary on the desktop but shouldn't hurt
      this.el_.play();

      // playing and pausing synchronously during the transition to fullscreen
      // can get iOS ~6.1 devices into a play/pause loop
      setTimeout(function() {
        video.pause();
        video.webkitEnterFullScreen();
      }, 0);
    } else {
      video.webkitEnterFullScreen();
    }
  };
  videojs.Streamroot.prototype.exitFullScreen = function() {
    this.el_.webkitExitFullScreen();
  };



  /* StreamrootDash Support Testing -------------------------------------------------------- */

  videojs.Streamroot.isSupported = function() {
    // voir api.js
    return window.Streamroot.isStreamrootHtml5Supported();
  };

  videojs.Streamroot.canPlaySource = function(srcObj) {
    if (srcObj.type in vjs.Streamroot.formats || srcObj.type in vjs.Streamroot.streamingFormats) { return 'maybe'; }
  };

  videojs.Streamroot.formats = {
    'video/dash': 'DASH',
    'video/smooth': 'SMOOTH'
  };

  videojs.Streamroot.streamingFormats = {
  };

  // List of all HTML5 events (various uses).
  videojs.Streamroot.Events = 'loadstart,suspend,abort,error,emptied,stalled,loadedmetadata,loadeddata,canplay,canplaythrough,playing,waiting,seeking,seeked,ended,durationchange,timeupdate,progress,ratechange,volumechange'.split(','); // tous sauf play et pause pour pouvoir controler les etat reels de lecture/buffering.

  videojs.Streamroot.disposeMediaElement = function(el) {
    if (!el) {
      return;
    }

    el['player'] = null;

    if (el.parentNode) {
      el.parentNode.removeChild(el);
    }

    // remove any child track or source nodes to prevent their loading
    while (el.hasChildNodes()) {
      el.removeChild(el.firstChild);
    }

    // remove any src reference. not setting `src=''` because that causes a warning
    // in firefox
    el.removeAttribute('src');

    // force the media element to update its loading state by calling load()
    if (typeof el.load === 'function') {
      el.load();
    }
  };

  // HTML5 Feature detection and Device Fixes --------------------------------- //

  // Override Android 2.2 and less canPlayType method which is broken
  if (videojs.IS_OLD_ANDROID) {
    document.createElement('video').constructor.prototype.canPlayType = function(type) {
      return (type && type.toLowerCase().indexOf('video/mp4') != -1) ? 'maybe' : '';
    };
  }

  // Keyboard Shortcuts ---------------------------------------------------------

  videojs.Streamroot.prototype.addKeyboardShortcuts = function() {
    var self = this;
    // activates the keyboard shortcuts document.onkeydown = function (e) {
  }

  // Event callbacks ------------------------------------------------------------
  videojs.Streamroot.CheckAutoplay = function() {
    if (this.el_.autoplay && this.paused()) {
      this.play();
    }
  }

  videojs.Streamroot.onMetaData = function(trackList) {
    //removed the different quality buttons

    console.log('onMetaDataReceived');
    //console.log(trackList);
    var audiotracksinfos = [];
    var videotracksinfos = [];
    for(var i=0;i<trackList.length;i++) {
      trackList[i].bitrate = (trackList[i].bandwidth/1000).toFixed(0);
      //console.log(trackList[i]);
      if(trackList[i].type == 'audio') {
        audiotracksinfos.push(trackList[i]);
      } else if(trackList[i].type =='video') {
        videotracksinfos.push(trackList[i]);
      }
    }
    if(audiotracksinfos.length) {
      var audioButton = new videojs.AudioButton(this.player_,audiotracksinfos);
      this.player_.controlBar.addChild(audioButton);
    }
    if(videotracksinfos.length) {
      var videoButton = new videojs.VideoButton(this.player_,videotracksinfos);
      this.player_.controlBar.addChild(videoButton);
    }
  };

  videojs.Streamroot.onBuffering = function() {
    this.player_.trigger("waiting");
  };

  videojs.Streamroot.onPlaying = function() {
    this.player_.trigger("playing");
  };

  videojs.Streamroot.onFinish = function() {
    this.player_.trigger("ended");
    this.pause();
  };

  videojs.Streamroot.onSpaceBar = function() {
    console.log("onspace");
    //console.log(this);
    if (this.paused()) {
      this.play();
    } else {
      this.pause();
    }
  };

  videojs.Streamroot.onKeyForward = function() {
    this.setCurrentTime(this.currentTime() + 10);
  };

  videojs.Streamroot.onKeyRewind = function() {
    this.setCurrentTime(this.currentTime() - 10);
  };


  /* Text Track Menu Items
   ================================================================================ */
  videojs.AlternativeTrackMenuItem = videojs.MenuItem.extend({

    init: function(player, options, parent) {
      // Modify options for parent MenuItem class's init.

      function _levelLabel(level) {
        if (level.label) return level.label;
        else if (level.auto) return "auto";
        else if (level.height) return level.height + "p";
        else if (level.width) return Math.round(level.width * 9 / 16) + "p";
        else if (level.bitrate) return level.bitrate + "kbps";
        else return 0;
      };
      this.parentMenu = parent;
      var prefix = options.lang ? '[' + options.lang + ']' : "";
      if (!options.auto) {
        options.label = prefix + _levelLabel(options);
      } else {
        options.label = (options.lang) ? '[' + options.lang + '] ' + "Auto" : 'Auto';
      }
      this.track = options;
      options.selected = options.selected || false;
      videojs.MenuItem.call(this, player, options);
    },

    onClick: function() {
      videojs.MenuItem.prototype.onClick.call(this);
      for (var i = 0; i < this.parentMenu.items.length; i++) {
        if (this !== this.parentMenu.items[i]) {
          this.parentMenu.items[i].selected(false);
        }
      }
      this.player_.tech.aDash.switchRepresentation(this.track.type, this.track.id_aset, this.track.id_rep);
    }

  });

  /* Alternative Tracks Button
   // Herite de sprpriÃ©tÃ©s de MenuButton,
   // mais comme on override createMenu, on doit aussi overrider l'init
   ================================================================================ */
  videojs.AlternativeTrackButton = videojs.MenuButton.extend({

    init: function(player, options) {

      videojs.Button.call(this, player, options);
      this.options_ = this.options = options;
      this.player_ = this.player = player;

      this.menu = this.createMenu();
    },

    createMenu: function() {

      var menu = new videojs.Menu(this.player_);

      // Add a title list item to the top => inutile maintenant
      /*    menu.el_.appendChild(videojs.createEl("li", {
       className: "videojs-menu-title",
       innerHTML: videojs.capitalize(this.kind)
       }));*/
      this.items = new Array();

      for (var i = 0; i < this.options.length; i++) {
        if (this.options[i].auto) {
          var m = new videojs.AlternativeTrackMenuItem(this.player_, {
            type: this.options[i].type,
            lang: this.options[i].lang,
            id_rep: this.options[i].id_rep,
            auto: true,
            selected: this.options[i].selected
          }, this);
        } else {
          var id_aset = this.options[i].id_aset;
          //var bw = this.options[i].bandwidth;
          var bitrate = this.options[i].bitrate;
          var id_rep = this.options[i].id_rep;
          var selected = this.options[i].selected | false;
          var height = this.options[i].height;
          var width = this.options[i].width;

          if (this.options[i].lang) {
            var tracklang = this.options[i].lang;
          };
          var buttonOptions = {
            type: this.options[i].type,
            lang: tracklang,
            id_aset: id_aset,
            id_rep: id_rep,
            bitrate: bitrate,
            width : width,
            height : height,
            selected: selected
          };
          var m = new videojs.AlternativeTrackMenuItem(this.player_, buttonOptions, this);
        }
        this.items.push(m);
        menu.addItem(m);
      };

      // Add list to element
      this.addChild(menu);
      return menu;
    },

    buildCSSClass: function() {
      return this.className + " vjs-menu-button " + videojs.MenuItem.prototype.buildCSSClass.call(this);
    },

  });

  /////////////////////////////////////////////////////////
  // extensions des boutons videoJS !

  videojs.AudioButton = videojs.AlternativeTrackButton.extend({

    init: function(player, options) {
      videojs.AlternativeTrackButton.call(this, player, options);
    },
    kind: "audio",
    buttonText: "Audio Tracks",
    className: "vjs-sr-audiotracks-button"
  });

  videojs.VideoButton = videojs.AlternativeTrackButton.extend({

    init: function(player, options) {
      videojs.AlternativeTrackButton.call(this, player, options);
    },
    kind: "video",
    buttonText: "Video Tracks",
    className: "vjs-sr-videotracks-button"
  });
})(videojs)
/**
 * HTML5 Media Controller - Wrapper for HTML5 Media API
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @param {Function=} ready
 * @constructor
 */
vjs.Srflash = vjs.MediaTechController.extend({
  /** @constructor */
  init: function(player, options, ready){
    vjs.MediaTechController.call(this, player, options, ready);

    var source = options['source'],

    //TODO: changed swfPath compared to what it was supposed to be. Check that (before was options['swf'])
      swfPath = player.options_.flash.streamrootswf,

    // Which element to embed in
      parentEl = options['parentEl'],

    // Create a temporary element to be replaced by swf object
      placeHolder = this.el_ = vjs.createEl('div', { id: player.id() + '_temp_flash' }),

    // Generate ID for swf object
      objId = player.id()+'_flash_api',

    // Store player options in local var for optimization
    // TODO: switch to using player methods instead of options
    // e.g. player.autoplay();
      playerOptions = player.options_,

    // Merge default flashvars with ones passed in to init
      flashVars = vjs.obj.merge({

        // SWF Callback Functions
        'readyFunction': 'videojs.Srflash.onReady',
        'eventProxyFunction': 'videojs.Srflash.onEvent',
        'errorEventProxyFunction': 'videojs.Srflash.onError',

        // Player Settings
        'autoplay': playerOptions.autoplay,
        'preload': playerOptions.preload,
        'loop': playerOptions.loop,
        'muted': playerOptions.muted

      }, options['flashVars']),

    // Merge default parames with ones passed in
      params = vjs.obj.merge({
        'wmode': 'opaque', // Opaque is needed to overlay controls, but can affect playback performance
        'bgcolor': '#000000' // Using bgcolor prevents a white flash when the object is loading
      }, options['params']),

    // Merge default attributes with ones passed in
      attributes = vjs.obj.merge({
        'id': objId,
        'name': objId, // Both ID and Name needed or swf to identifty itself
        'class': 'vjs-tech'
      }, options['attributes'])
      ;


    //Don't supply source to flash player, so that VJS's NetStream wrapper is configured for appendBytes mode
    flashVars['src'] = null;
    /*
     if (source) {
     if (source.type && vjs.Srflash.isStreamingType(source.type)) {
     var parts = vjs.Srflash.streamToParts(source.src);
     flashVars['rtmpConnection'] = encodeURIComponent(parts.connection);
     flashVars['rtmpStream'] = encodeURIComponent(parts.stream);
     }
     else {
     flashVars['src'] = encodeURIComponent(vjs.getAbsoluteURL(source.src));
     }
     }
     */

    // Add placeholder to player div
    vjs.insertFirst(placeHolder, parentEl);

    // Having issues with Flash reloading on certain page actions (hide/resize/fullscreen) in certain browsers
    // This allows resetting the playhead when we catch the reload
    if (options['startTime']) {
      this.ready(function(){
        this.load();
        this.play();
        this.currentTime(options['startTime']);
      });
    }

    // Flash iFrame Mode
    // In web browsers there are multiple instances where changing the parent element or visibility of a plugin causes the plugin to reload.
    // - Firefox just about always. https://bugzilla.mozilla.org/show_bug.cgi?id=90268 (might be fixed by version 13)
    // - Webkit when hiding the plugin
    // - Webkit and Firefox when using requestFullScreen on a parent element
    // Loading the flash plugin into a dynamically generated iFrame gets around most of these issues.
    // Issues that remain include hiding the element and requestFullScreen in Firefox specifically

    // There's on particularly annoying issue with this method which is that Firefox throws a security error on an offsite Flash object loaded into a dynamically created iFrame.
    // Even though the iframe was inserted into a page on the web, Firefox + Flash considers it a local app trying to access an internet file.
    // I tried mulitple ways of setting the iframe src attribute but couldn't find a src that worked well. Tried a real/fake source, in/out of domain.
    // Also tried a method from stackoverflow that caused a security error in all browsers. http://stackoverflow.com/questions/2486901/how-to-set-document-domain-for-a-dynamically-generated-iframe
    // In the end the solution I found to work was setting the iframe window.location.href right before doing a document.write of the Flash object.
    // The only downside of this it seems to trigger another http request to the original page (no matter what's put in the href). Not sure why that is.

    // NOTE (2012-01-29): Cannot get Firefox to load the remote hosted SWF into a dynamically created iFrame
    // Firefox 9 throws a security error, unleess you call location.href right before doc.write.
    //    Not sure why that even works, but it causes the browser to look like it's continuously trying to load the page.
    // Firefox 3.6 keeps calling the iframe onload function anytime I write to it, causing an endless loop.

    if (options['iFrameMode'] === true && !vjs.IS_FIREFOX) {

      // Create iFrame with vjs-tech class so it's 100% width/height
      var iFrm = vjs.createEl('iframe', {
        'id': objId + '_iframe',
        'name': objId + '_iframe',
        'className': 'vjs-tech',
        'scrolling': 'no',
        'marginWidth': 0,
        'marginHeight': 0,
        'frameBorder': 0
      });

      // Update ready function names in flash vars for iframe window
      flashVars['readyFunction'] = 'ready';
      flashVars['eventProxyFunction'] = 'events';
      flashVars['errorEventProxyFunction'] = 'errors';

      // Tried multiple methods to get this to work in all browsers

      // Tried embedding the flash object in the page first, and then adding a place holder to the iframe, then replacing the placeholder with the page object.
      // The goal here was to try to load the swf URL in the parent page first and hope that got around the firefox security error
      // var newObj = vjs.Flash.embed(options['swf'], placeHolder, flashVars, params, attributes);
      // (in onload)
      //  var temp = vjs.createEl('a', { id:'asdf', innerHTML: 'asdf' } );
      //  iDoc.body.appendChild(temp);

      // Tried embedding the flash object through javascript in the iframe source.
      // This works in webkit but still triggers the firefox security error
      // iFrm.src = 'javascript: document.write('"+vjs.Flash.getEmbedCode(options['swf'], flashVars, params, attributes)+"');";

      // Tried an actual local iframe just to make sure that works, but it kills the easiness of the CDN version if you require the user to host an iframe
      // We should add an option to host the iframe locally though, because it could help a lot of issues.
      // iFrm.src = "iframe.html";

      // Wait until iFrame has loaded to write into it.
      vjs.on(iFrm, 'load', vjs.bind(this, function(){

        var iDoc,
          iWin = iFrm.contentWindow;

        // The one working method I found was to use the iframe's document.write() to create the swf object
        // This got around the security issue in all browsers except firefox.
        // I did find a hack where if I call the iframe's window.location.href='', it would get around the security error
        // However, the main page would look like it was loading indefinitely (URL bar loading spinner would never stop)
        // Plus Firefox 3.6 didn't work no matter what I tried.
        // if (vjs.USER_AGENT.match('Firefox')) {
        //   iWin.location.href = '';
        // }

        // Get the iFrame's document depending on what the browser supports
        iDoc = iFrm.contentDocument ? iFrm.contentDocument : iFrm.contentWindow.document;

        // Tried ensuring both document domains were the same, but they already were, so that wasn't the issue.
        // Even tried adding /. that was mentioned in a browser security writeup
        // document.domain = document.domain+'/.';
        // iDoc.domain = document.domain+'/.';

        // Tried adding the object to the iframe doc's innerHTML. Security error in all browsers.
        // iDoc.body.innerHTML = swfObjectHTML;

        // Tried appending the object to the iframe doc's body. Security error in all browsers.
        // iDoc.body.appendChild(swfObject);

        // Using document.write actually got around the security error that browsers were throwing.
        // Again, it's a dynamically generated (same domain) iframe, loading an external Flash swf.
        // Not sure why that's a security issue, but apparently it is.
        iDoc.write(vjs.Srflash.getEmbedCode(swfPath, flashVars, params, attributes));

        // Setting variables on the window needs to come after the doc write because otherwise they can get reset in some browsers
        // So far no issues with swf ready event being called before it's set on the window.
        iWin['player'] = this.player_;

        // Create swf ready function for iFrame window
        iWin['ready'] = vjs.bind(this.player_, function(currSwf){
          var el = iDoc.getElementById(currSwf),
            player = this,
            tech = player.tech;

          // Update reference to playback technology element
          tech.el_ = el;

          // Make sure swf is actually ready. Sometimes the API isn't actually yet.
          vjs.Srflash.checkReady(tech);
        });

        // Create event listener for all swf events
        iWin['events'] = vjs.bind(this.player_, function(swfID, eventName){
          var player = this;
          if (player && player.techName === 'flash') {
            player.trigger(eventName);
          }
        });

        // Create error listener for all swf errors
        iWin['errors'] = vjs.bind(this.player_, function(swfID, eventName){
          vjs.log('Flash Error', eventName);
        });

      }));

      // Replace placeholder with iFrame (it will load now)
      placeHolder.parentNode.replaceChild(iFrm, placeHolder);

      // If not using iFrame mode, embed as normal object
    } else {
      vjs.Srflash.embed(swfPath, placeHolder, flashVars, params, attributes);
    }
  }
});

vjs.Srflash.prototype.dispose = function(){
  vjs.MediaTechController.prototype.dispose.call(this);
};

vjs.Srflash.prototype.play = function(){
  this.aDash.play();
};

vjs.Srflash.prototype.pause = function(){
  this.aDash.pause();
};

vjs.Srflash.prototype.setCurrentTime = function(time){
  this.aDash.seek(time);
};

vjs.Srflash.prototype.currentTime = function(){
  return this.aDash.getCurrentTime();
};

vjs.Srflash.prototype.src = function(src){
  if (vjs.Srflash.isStreamingSrc(src)) {
    src = vjs.Srflash.streamToParts(src);
    this.setRtmpConnection(src.connection);
    this.setRtmpStream(src.stream);
  }
  else {
    // Make sure source URL is abosolute.
    src = vjs.getAbsoluteURL(src);
    this.el_.vjs_src(src);
  }

  // Currently the SWF doesn't autoplay if you load a source later.
  // e.g. Load player w/ no source, wait 2s, set src.
  if (this.player_.autoplay()) {
    var tech = this;
    setTimeout(function(){ tech.play(); }, 0);
  }
};

vjs.Srflash.prototype.currentSrc = function(){
  var src = this.el_.vjs_getProperty('currentSrc');
  // no src, check and see if RTMP
  if (src == null) {
    var connection = this.rtmpConnection(),
      stream = this.rtmpStream();

    if (connection && stream) {
      src = vjs.Srflash.streamFromParts(connection, stream);
    }
  }
  return src;
};

vjs.Srflash.prototype.load = function(){
  this.el_.vjs_load();
};

vjs.Srflash.prototype.poster = function(){
  this.el_.vjs_getProperty('poster');
};

vjs.Srflash.prototype.buffered = function(){
  return this.aDash.getBuffered();
};

vjs.Srflash.prototype.supportsFullScreen = function(){
  return false; // Flash does not allow fullscreen through javascript
};

vjs.Srflash.prototype.enterFullScreen = function(){
  return false;
};


// Create setters and getters for attributes
var api = vjs.Srflash.prototype,
  readWrite = 'rtmpConnection,rtmpStream,preload,defaultPlaybackRate,playbackRate,autoplay,loop,mediaGroup,controller,controls,volume,muted,defaultMuted'.split(','),
  readOnly = 'error,currentSrc,networkState,readyState,seeking,initialTime,duration,startOffsetTime,paused,played,seekable,ended,videoTracks,audioTracks,videoWidth,videoHeight,textTracks'.split(',');
// Overridden: buffered

/**
 * @this {*}
 */
var createSetter = function(attr){
  var attrUpper = attr.charAt(0).toUpperCase() + attr.slice(1);
  api['set'+attrUpper] = function(val){ return this.el_.vjs_setProperty(attr, val); };
};

/**
 * @this {*}
 */
var createGetter = function(attr){
  api[attr] = function(){ return this.el_.vjs_getProperty(attr); };
};

(function(){
  var i;
  // Create getter and setters for all read/write attributes
  for (i = 0; i < readWrite.length; i++) {
    createGetter(readWrite[i]);
    createSetter(readWrite[i]);
  }

  // Create getters for read-only attributes
  for (i = 0; i < readOnly.length; i++) {
    createGetter(readOnly[i]);
  }
})();

/* Flash Support Testing -------------------------------------------------------- */

vjs.Srflash.isSupported = function(){
  return (vjs.Srflash.version()[0] >= 10)&&(window.Streamroot.isStreamrootFlashSupported());
};

vjs.Srflash.canPlaySource = function(srcObj){
  if (srcObj.type in vjs.Srflash.formats || srcObj.type in vjs.Srflash.streamingFormats) { return 'maybe'; }
};

vjs.Srflash.formats = {
  'video/dash': 'DASH',
  'application/x-mpegurl': 'HLS',
  'video/smooth': 'SMOOTH'
};

vjs.Srflash.streamingFormats = {
};

vjs.Srflash['onReady'] = function(currSwf){
  var el = vjs.el(currSwf);

  // Get player from box
  // On firefox reloads, el might already have a player
  var player = el['player'] || el.parentNode['player'],
    tech = player.tech;

  // Reference player on tech element
  el['player'] = player;

  // Update reference to playback technology element
  tech.el_ = el;

  vjs.Srflash.checkReady(tech);
};

// The SWF isn't alwasy ready when it says it is. Sometimes the API functions still need to be added to the object.
// If it's not ready, we set a timeout to check again shortly.
vjs.Srflash.checkReady = function(tech){
  //TODO: call ready on our API?

  // Check if API property exists
  if (tech.el().vjs_getProperty) {

    var srapi = window.Streamroot.streamrootAPI;
    console.log('MPEG-DASH Module Loading');

    //TODO: replace dummy event_handlers
    var event_handlers = {
      onMetaData: function (tracklist){
        tech.onMetaData.call(tech, tracklist);
      }
    };
    tech.aDash = new srapi(tech.el_, tech.options_.source.src, event_handlers, tech.player_.options_.sr_options);

    // If so, tell tech it's ready
    tech.triggerReady();

    // Otherwise wait longer.
  } else {

    setTimeout((function(){
      vjs.Srflash.checkReady(tech);
    }).bind(this), 50);

  }
};

var eventQueue = [];

// Trigger events from the swf on the player
vjs.Srflash['onEvent'] = function(swfID, eventName){
  var player = vjs.el(swfID)['player'];
  console.info(eventName);
  console.info(player);

  //At the initialization, player is not always initialized, so important events might be missed (like the one triggering the removal of the poster)
  //This is a HACK to queue them and try to send them right before the next event
  if (!player) {
    eventQueue.push(eventName);
  } else if (eventQueue.length > 0) {
    for (var i=0; i<eventQueue.length; i++) {
      player.trigger(eventQueue[i]);
      console.info("triggering queued event" +eventQueue[i]);
    }
    eventQueue = [];
  }
  player.trigger(eventName);
};

// Log errors from the swf
vjs.Srflash['onError'] = function(swfID, err){
  var player = vjs.el(swfID)['player'];
  player.trigger('error');
  vjs.log('Flash Error', err, swfID);
};

// Flash Version Check
vjs.Srflash.version = function(){
  var version = '0,0,0';

  // IE
  try {
    version = new window.ActiveXObject('ShockwaveFlash.ShockwaveFlash').GetVariable('$version').replace(/\D+/g, ',').match(/^,?(.+),?$/)[1];

    // other browsers
  } catch(e) {
    try {
      if (navigator.mimeTypes['application/x-shockwave-flash'].enabledPlugin){
        version = (navigator.plugins['Shockwave Flash 2.0'] || navigator.plugins['Shockwave Flash']).description.replace(/\D+/g, ',').match(/^,?(.+),?$/)[1];
      }
    } catch(err) {}
  }
  return version.split(',');
};

// Flash embedding method. Only used in non-iframe mode
vjs.Srflash.embed = function(swf, placeHolder, flashVars, params, attributes){
  var code = vjs.Srflash.getEmbedCode(swf, flashVars, params, attributes),

  // Get element by embedding code and retrieving created element
    obj = vjs.createEl('div', { innerHTML: code }).childNodes[0],

    par = placeHolder.parentNode
    ;

  placeHolder.parentNode.replaceChild(obj, placeHolder);

  // IE6 seems to have an issue where it won't initialize the swf object after injecting it.
  // This is a dumb fix
  var newObj = par.childNodes[0];
  setTimeout(function(){
    newObj.style.display = 'block';
  }, 1000);

  return obj;

};

vjs.Srflash.getEmbedCode = function(swf, flashVars, params, attributes){

  var objTag = '<object type="application/x-shockwave-flash"',
    flashVarsString = '',
    paramsString = '',
    attrsString = '';

  // Convert flash vars to string
  if (flashVars) {
    vjs.obj.each(flashVars, function(key, val){
      flashVarsString += (key + '=' + val + '&amp;');
    });
  }

  // Add swf, flashVars, and other default params
  params = vjs.obj.merge({
    'movie': swf,
    'flashvars': flashVarsString,
    'allowScriptAccess': 'always', // Required to talk to swf
    'allowNetworking': 'all' // All should be default, but having security issues.
  }, params);

  // Create param tags string
  vjs.obj.each(params, function(key, val){
    paramsString += '<param name="'+key+'" value="'+val+'" />';
  });

  attributes = vjs.obj.merge({
    // Add swf to attributes (need both for IE and Others to work)
    'data': swf,

    // Default to 100% width/height
    'width': '100%',
    'height': '100%'

  }, attributes);

  // Create Attributes string
  vjs.obj.each(attributes, function(key, val){
    attrsString += (key + '="' + val + '" ');
  });

  return objTag + attrsString + '>' + paramsString + '</object>';
};

vjs.Srflash.streamFromParts = function(connection, stream) {
  return connection + '&' + stream;
};

vjs.Srflash.streamToParts = function(src) {
  var parts = {
    connection: '',
    stream: ''
  };

  if (! src) {
    return parts;
  }

  // Look for the normal URL separator we expect, '&'.
  // If found, we split the URL into two pieces around the
  // first '&'.
  var connEnd = src.indexOf('&');
  var streamBegin;
  if (connEnd !== -1) {
    streamBegin = connEnd + 1;
  }
  else {
    // If there's not a '&', we use the last '/' as the delimiter.
    connEnd = streamBegin = src.lastIndexOf('/') + 1;
    if (connEnd === 0) {
      // really, there's not a '/'?
      connEnd = streamBegin = src.length;
    }
  }
  parts.connection = src.substring(0, connEnd);
  parts.stream = src.substring(streamBegin, src.length);

  return parts;
};

vjs.Srflash.isStreamingType = function(srcType) {
  return srcType in vjs.Srflash.streamingFormats;
};

// RTMP has four variations, any string starting
// with one of these protocols should be valid
vjs.Srflash.RTMP_RE = /^rtmp[set]?:\/\//i;

vjs.Srflash.isStreamingSrc = function(src) {
  return vjs.Srflash.RTMP_RE.test(src);
};

videojs.Srflash.prototype.onMetaData = function(trackList) {
  //removed the different quality buttons

  console.log('onMetaDataReceived');
  //console.log(trackList);
  var audiotracksinfos = [];
  var videotracksinfos = [];
  for(var i=0;i<trackList.length;i++) {
    trackList[i].bitrate = (trackList[i].bandwidth/1000).toFixed(0);
    //console.log(trackList[i]);
    if(trackList[i].type == 'audio') {
      audiotracksinfos.push(trackList[i]);
    } else if(trackList[i].type =='video') {
      videotracksinfos.push(trackList[i]);
    }
  }
  if(audiotracksinfos.length) {
    var audioButton = new videojs.AudioButton(this.player_,audiotracksinfos);
    this.player_.controlBar.addChild(audioButton);
  }
  if(videotracksinfos.length) {
    var videoButton = new videojs.VideoButton(this.player_,videotracksinfos);
    this.player_.controlBar.addChild(videoButton);
  }
};
  return videojs;
}));
